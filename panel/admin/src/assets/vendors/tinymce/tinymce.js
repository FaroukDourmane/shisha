// 4.6.4 (2017-06-13)
(function () {

var defs = {}; // id -> {dependencies, definition, instance (possibly undefined)}

// Used when there is no 'main' module.
// The name is probably (hopefully) unique so minification removes for releases.
var register_3795 = function (id) {
  var module = dem(id);
  var fragments = id.split('.');
  var target = Function('return this;')();
  for (var i = 0; i < fragments.length - 1; ++i) {
    if (target[fragments[i]] === undefined)
      target[fragments[i]] = {};
    target = target[fragments[i]];
  }
  target[fragments[fragments.length - 1]] = module;
};

var instantiate = function (id) {
  var actual = defs[id];
  var dependencies = actual.deps;
  var definition = actual.defn;
  var len = dependencies.length;
  var instances = new Array(len);
  for (var i = 0; i < len; ++i)
    instances[i] = dem(dependencies[i]);
  var defResult = definition.apply(null, instances);
  if (defResult === undefined)
     throw 'module [' + id + '] returned undefined';
  actual.instance = defResult;
};

var def = function (id, dependencies, definition) {
  if (typeof id !== 'string')
    throw 'module id must be a string';
  else if (dependencies === undefined)
    throw 'no dependencies for ' + id;
  else if (definition === undefined)
    throw 'no definition function for ' + id;
  defs[id] = {
    deps: dependencies,
    defn: definition,
    instance: undefined
  };
};

var dem = function (id) {
  var actual = defs[id];
  if (actual === undefined)
    throw 'module [' + id + '] was undefined';
  else if (actual.instance === undefined)
    instantiate(id);
  return actual.instance;
};

var req = function (ids, callback) {
  var len = ids.length;
  var instances = new Array(len);
  for (var i = 0; i < len; ++i)
    instances.push(dem(ids[i]));
  callback.apply(null, callback);
};

var ephox = {};

ephox.bolt = {
  module: {
    api: {
      define: def,
      require: req,
      demand: dem
    }
  }
};

var define = def;
var require = req;
var demand = dem;
// this helps with minificiation when using a lot of global references
var defineGlobal = function (id, ref) {
  define(id, [], function () { return ref; });
};
/*jsc
["tinymce.core.api.Main","tinymce.core.api.Tinymce","tinymce.core.Register","tinymce.core.geom.Rect","tinymce.core.util.Promise","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.core.html.Styles","tinymce.core.dom.TreeWalker","tinymce.core.html.Entities","tinymce.core.dom.DOMUtils","tinymce.core.dom.ScriptLoader","tinymce.core.AddOnManager","tinymce.core.dom.RangeUtils","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.html.DomParser","tinymce.core.html.Writer","tinymce.core.html.Serializer","tinymce.core.dom.Serializer","tinymce.core.util.VK","tinymce.core.dom.ControlSelection","tinymce.core.dom.BookmarkManager","tinymce.core.dom.Selection","tinymce.core.Formatter","tinymce.core.UndoManager","tinymce.core.EditorCommands","tinymce.core.util.URI","tinymce.core.util.Class","tinymce.core.util.EventDispatcher","tinymce.core.util.Observable","tinymce.core.WindowManager","tinymce.core.NotificationManager","tinymce.core.EditorObservable","tinymce.core.Shortcuts","tinymce.core.Editor","tinymce.core.util.I18n","tinymce.core.FocusManager","tinymce.core.EditorManager","tinymce.core.util.XHR","tinymce.core.util.JSON","tinymce.core.util.JSONRequest","tinymce.core.util.JSONP","tinymce.core.util.LocalStorage","tinymce.core.api.Compat","tinymce.core.util.Color","tinymce.core.ui.Api","tinymce.core.util.Arr","tinymce.core.dom.Range","tinymce.core.dom.StyleSheetLoader","tinymce.core.dom.NodeType","tinymce.core.caret.CaretContainer","tinymce.core.text.Zwsp","ephox.katamari.api.Fun","tinymce.core.dom.RangePoint","tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretPosition","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.dom.ScrollIntoView","tinymce.core.dom.TridentSelection","tinymce.core.selection.FragmentReader","tinymce.core.dom.ElementUtils","tinymce.core.util.Fun","tinymce.core.fmt.Preview","tinymce.core.fmt.Hooks","tinymce.core.undo.Levels","tinymce.core.delete.DeleteCommands","tinymce.core.InsertContent","global!document","tinymce.core.ui.Window","tinymce.core.ui.MessageBox","tinymce.core.ui.Notification","tinymce.core.EditorSettings","tinymce.core.init.Render","tinymce.core.Mode","tinymce.core.ui.Sidebar","tinymce.core.util.Uuid","tinymce.core.ErrorReporter","tinymce.core.LegacyInput","tinymce.core.ui.Selector","tinymce.core.ui.Collection","tinymce.core.ui.ReflowQueue","tinymce.core.ui.Control","tinymce.core.ui.Factory","tinymce.core.ui.KeyboardNavigation","tinymce.core.ui.Container","tinymce.core.ui.DragHelper","tinymce.core.ui.Scrollable","tinymce.core.ui.Panel","tinymce.core.ui.Movable","tinymce.core.ui.Resizable","tinymce.core.ui.FloatPanel","tinymce.core.ui.Tooltip","tinymce.core.ui.Widget","tinymce.core.ui.Progress","tinymce.core.ui.Layout","tinymce.core.ui.AbsoluteLayout","tinymce.core.ui.Button","tinymce.core.ui.ButtonGroup","tinymce.core.ui.Checkbox","tinymce.core.ui.ComboBox","tinymce.core.ui.ColorBox","tinymce.core.ui.PanelButton","tinymce.core.ui.ColorButton","tinymce.core.ui.ColorPicker","tinymce.core.ui.Path","tinymce.core.ui.ElementPath","tinymce.core.ui.FormItem","tinymce.core.ui.Form","tinymce.core.ui.FieldSet","tinymce.core.ui.FilePicker","tinymce.core.ui.FitLayout","tinymce.core.ui.FlexLayout","tinymce.core.ui.FlowLayout","tinymce.core.ui.FormatControls","tinymce.core.ui.GridLayout","tinymce.core.ui.Iframe","tinymce.core.ui.InfoBox","tinymce.core.ui.Label","tinymce.core.ui.Toolbar","tinymce.core.ui.MenuBar","tinymce.core.ui.MenuButton","tinymce.core.ui.MenuItem","tinymce.core.ui.Throbber","tinymce.core.ui.Menu","tinymce.core.ui.ListBox","tinymce.core.ui.Radio","tinymce.core.ui.ResizeHandle","tinymce.core.ui.SelectBox","tinymce.core.ui.Slider","tinymce.core.ui.Spacer","tinymce.core.ui.SplitButton","tinymce.core.ui.StackLayout","tinymce.core.ui.TabPanel","tinymce.core.ui.TextBox","ephox.katamari.api.Arr","global!Array","global!Error","ephox.katamari.api.Future","ephox.katamari.api.Futures","ephox.katamari.api.Result","tinymce.core.geom.ClientRect","tinymce.core.caret.CaretCandidate","tinymce.core.text.ExtendingChar","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors","global!console","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Fragment","ephox.sugar.api.node.Node","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.selection.SelectionUtils","tinymce.core.undo.Fragments","tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.caret.CaretWalker","tinymce.core.dom.RangeNormalizer","tinymce.core.InsertList","tinymce.core.data.ObservableObject","tinymce.core.ui.DomUtils","tinymce.core.ui.BoxUtils","tinymce.core.ui.ClassList","global!window","tinymce.core.init.Init","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.content.LinkTargets","tinymce.core.fmt.FontInfo","ephox.katamari.api.Option","global!String","ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce","ephox.katamari.async.AsyncValues","ephox.sand.util.Global","ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator","ephox.sugar.api.node.NodeTypes","ephox.sugar.api.search.Traverse","ephox.sugar.api.properties.Attr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.katamari.api.Options","tinymce.core.undo.Diff","tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks","tinymce.core.delete.DeleteUtils","tinymce.core.caret.CaretUtils","tinymce.core.delete.CefDeleteAction","tinymce.core.delete.DeleteElement","tinymce.core.caret.CaretFinder","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.InlineUtils","tinymce.core.data.Binding","tinymce.core.init.InitContentBody","global!Object","global!setTimeout","ephox.katamari.api.Resolve","ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo","ephox.katamari.api.Type","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.katamari.api.Obj","ephox.sugar.api.search.PredicateFind","tinymce.core.dom.Empty","ephox.katamari.api.Adt","tinymce.core.text.Bidi","tinymce.core.caret.CaretContainerInline","tinymce.core.caret.CaretContainerRemove","tinymce.core.util.LazyEvaluator","ephox.katamari.api.Cell","tinymce.core.caret.CaretContainerInput","tinymce.core.EditorUpload","tinymce.core.ForceBlocks","tinymce.core.keyboard.KeyboardOverrides","tinymce.core.NodeChange","tinymce.core.SelectionOverrides","tinymce.core.util.Quirks","ephox.katamari.api.Global","ephox.sand.detect.Version","ephox.katamari.api.Strings","ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag","ephox.sugar.api.node.Body","ephox.sugar.impl.ClosestOrAncestor","ephox.sugar.api.search.SelectorExists","tinymce.core.file.Uploader","tinymce.core.file.ImageScanner","tinymce.core.file.BlobCache","tinymce.core.file.UploadStatus","tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey","tinymce.core.caret.FakeCaret","tinymce.core.caret.LineUtils","tinymce.core.DragDropOverrides","tinymce.core.EditorView","tinymce.core.keyboard.CefUtils","tinymce.core.dom.NodePath","global!Number","ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","ephox.katamari.util.BagUtils","ephox.sugar.api.search.SelectorFind","tinymce.core.file.Conversions","global!URL","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.keyboard.InsertSpace","tinymce.core.dom.Dimensions","tinymce.core.dom.MousePosition","ephox.sugar.api.properties.Css","tinymce.core.caret.LineWalker","ephox.katamari.api.Merger","ephox.sugar.impl.Style"]
jsc*/
/**
 * Rect.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Contains various tools for rect/position calculation.
 *
 * @class tinymce.geom.Rect
 */
define(
  'tinymce.core.geom.Rect',
  [
  ],
  function () {
    "use strict";

    var min = Math.min, max = Math.max, round = Math.round;

    /**
     * Returns the rect positioned based on the relative position name
     * to the target rect.
     *
     * @method relativePosition
     * @param {Rect} rect Source rect to modify into a new rect.
     * @param {Rect} targetRect Rect to move relative to based on the rel option.
     * @param {String} rel Relative position. For example: tr-bl.
     */
    function relativePosition(rect, targetRect, rel) {
      var x, y, w, h, targetW, targetH;

      x = targetRect.x;
      y = targetRect.y;
      w = rect.w;
      h = rect.h;
      targetW = targetRect.w;
      targetH = targetRect.h;

      rel = (rel || '').split('');

      if (rel[0] === 'b') {
        y += targetH;
      }

      if (rel[1] === 'r') {
        x += targetW;
      }

      if (rel[0] === 'c') {
        y += round(targetH / 2);
      }

      if (rel[1] === 'c') {
        x += round(targetW / 2);
      }

      if (rel[3] === 'b') {
        y -= h;
      }

      if (rel[4] === 'r') {
        x -= w;
      }

      if (rel[3] === 'c') {
        y -= round(h / 2);
      }

      if (rel[4] === 'c') {
        x -= round(w / 2);
      }

      return create(x, y, w, h);
    }

    /**
     * Tests various positions to get the most suitable one.
     *
     * @method findBestRelativePosition
     * @param {Rect} rect Rect to use as source.
     * @param {Rect} targetRect Rect to move relative to.
     * @param {Rect} constrainRect Rect to constrain within.
     * @param {Array} rels Array of relative positions to test against.
     */
    function findBestRelativePosition(rect, targetRect, constrainRect, rels) {
      var pos, i;

      for (i = 0; i < rels.length; i++) {
        pos = relativePosition(rect, targetRect, rels[i]);

        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x &&
          pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {
          return rels[i];
        }
      }

      return null;
    }

    /**
     * Inflates the rect in all directions.
     *
     * @method inflate
     * @param {Rect} rect Rect to expand.
     * @param {Number} w Relative width to expand by.
     * @param {Number} h Relative height to expand by.
     * @return {Rect} New expanded rect.
     */
    function inflate(rect, w, h) {
      return create(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);
    }

    /**
     * Returns the intersection of the specified rectangles.
     *
     * @method intersect
     * @param {Rect} rect The first rectangle to compare.
     * @param {Rect} cropRect The second rectangle to compare.
     * @return {Rect} The intersection of the two rectangles or null if they don't intersect.
     */
    function intersect(rect, cropRect) {
      var x1, y1, x2, y2;

      x1 = max(rect.x, cropRect.x);
      y1 = max(rect.y, cropRect.y);
      x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);
      y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);

      if (x2 - x1 < 0 || y2 - y1 < 0) {
        return null;
      }

      return create(x1, y1, x2 - x1, y2 - y1);
    }

    /**
     * Returns a rect clamped within the specified clamp rect. This forces the
     * rect to be inside the clamp rect.
     *
     * @method clamp
     * @param {Rect} rect Rectangle to force within clamp rect.
     * @param {Rect} clampRect Rectable to force within.
     * @param {Boolean} fixedSize True/false if size should be fixed.
     * @return {Rect} Clamped rect.
     */
    function clamp(rect, clampRect, fixedSize) {
      var underflowX1, underflowY1, overflowX2, overflowY2,
        x1, y1, x2, y2, cx2, cy2;

      x1 = rect.x;
      y1 = rect.y;
      x2 = rect.x + rect.w;
      y2 = rect.y + rect.h;
      cx2 = clampRect.x + clampRect.w;
      cy2 = clampRect.y + clampRect.h;

      underflowX1 = max(0, clampRect.x - x1);
      underflowY1 = max(0, clampRect.y - y1);
      overflowX2 = max(0, x2 - cx2);
      overflowY2 = max(0, y2 - cy2);

      x1 += underflowX1;
      y1 += underflowY1;

      if (fixedSize) {
        x2 += underflowX1;
        y2 += underflowY1;
        x1 -= overflowX2;
        y1 -= overflowY2;
      }

      x2 -= overflowX2;
      y2 -= overflowY2;

      return create(x1, y1, x2 - x1, y2 - y1);
    }

    /**
     * Creates a new rectangle object.
     *
     * @method create
     * @param {Number} x Rectangle x location.
     * @param {Number} y Rectangle y location.
     * @param {Number} w Rectangle width.
     * @param {Number} h Rectangle height.
     * @return {Rect} New rectangle object.
     */
    function create(x, y, w, h) {
      return { x: x, y: y, w: w, h: h };
    }

    /**
     * Creates a new rectangle object form a clientRects object.
     *
     * @method fromClientRect
     * @param {ClientRect} clientRect DOM ClientRect object.
     * @return {Rect} New rectangle object.
     */
    function fromClientRect(clientRect) {
      return create(clientRect.left, clientRect.top, clientRect.width, clientRect.height);
    }

    return {
      inflate: inflate,
      relativePosition: relativePosition,
      findBestRelativePosition: findBestRelativePosition,
      intersect: intersect,
      clamp: clamp,
      create: create,
      fromClientRect: fromClientRect
    };
  }
);

/**
 * Promise.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * Promise polyfill under MIT license: https://github.com/taylorhakes/promise-polyfill
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/* eslint-disable */
/* jshint ignore:start */

/**
 * Modifed to be a feature fill and wrapped as tinymce module.
 */
define(
  'tinymce.core.util.Promise',
  [],
  function () {
    if (window.Promise) {
      return window.Promise;
    }

    // Use polyfill for setImmediate for performance gains
    var asap = Promise.immediateFn || (typeof setImmediate === 'function' && setImmediate) ||
      function (fn) { setTimeout(fn, 1); };

    // Polyfill for Function.prototype.bind
    function bind(fn, thisArg) {
      return function () {
        fn.apply(thisArg, arguments);
      };
    }

    var isArray = Array.isArray || function (value) { return Object.prototype.toString.call(value) === "[object Array]"; };

    function Promise(fn) {
      if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');
      if (typeof fn !== 'function') throw new TypeError('not a function');
      this._state = null;
      this._value = null;
      this._deferreds = [];

      doResolve(fn, bind(resolve, this), bind(reject, this));
    }

    function handle(deferred) {
      var me = this;
      if (this._state === null) {
        this._deferreds.push(deferred);
        return;
      }
      asap(function () {
        var cb = me._state ? deferred.onFulfilled : deferred.onRejected;
        if (cb === null) {
          (me._state ? deferred.resolve : deferred.reject)(me._value);
          return;
        }
        var ret;
        try {
          ret = cb(me._value);
        }
        catch (e) {
          deferred.reject(e);
          return;
        }
        deferred.resolve(ret);
      });
    }

    function resolve(newValue) {
      try { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
        if (newValue === this) throw new TypeError('A promise cannot be resolved with itself.');
        if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {
          var then = newValue.then;
          if (typeof then === 'function') {
            doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));
            return;
          }
        }
        this._state = true;
        this._value = newValue;
        finale.call(this);
      } catch (e) { reject.call(this, e); }
    }

    function reject(newValue) {
      this._state = false;
      this._value = newValue;
      finale.call(this);
    }

    function finale() {
      for (var i = 0, len = this._deferreds.length; i < len; i++) {
        handle.call(this, this._deferreds[i]);
      }
      this._deferreds = null;
    }

    function Handler(onFulfilled, onRejected, resolve, reject) {
      this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
      this.onRejected = typeof onRejected === 'function' ? onRejected : null;
      this.resolve = resolve;
      this.reject = reject;
    }

    /**
     * Take a potentially misbehaving resolver function and make sure
     * onFulfilled and onRejected are only called once.
     *
     * Makes no guarantees about asynchrony.
     */
    function doResolve(fn, onFulfilled, onRejected) {
      var done = false;
      try {
        fn(function (value) {
          if (done) return;
          done = true;
          onFulfilled(value);
        }, function (reason) {
          if (done) return;
          done = true;
          onRejected(reason);
        });
      } catch (ex) {
        if (done) return;
        done = true;
        onRejected(ex);
      }
    }

    Promise.prototype['catch'] = function (onRejected) {
      return this.then(null, onRejected);
    };

    Promise.prototype.then = function (onFulfilled, onRejected) {
      var me = this;
      return new Promise(function (resolve, reject) {
        handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));
      });
    };

    Promise.all = function () {
      var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);

      return new Promise(function (resolve, reject) {
        if (args.length === 0) return resolve([]);
        var remaining = args.length;
        function res(i, val) {
          try {
            if (val && (typeof val === 'object' || typeof val === 'function')) {
              var then = val.then;
              if (typeof then === 'function') {
                then.call(val, function (val) { res(i, val); }, reject);
                return;
              }
            }
            args[i] = val;
            if (--remaining === 0) {
              resolve(args);
            }
          } catch (ex) {
            reject(ex);
          }
        }
        for (var i = 0; i < args.length; i++) {
          res(i, args[i]);
        }
      });
    };

    Promise.resolve = function (value) {
      if (value && typeof value === 'object' && value.constructor === Promise) {
        return value;
      }

      return new Promise(function (resolve) {
        resolve(value);
      });
    };

    Promise.reject = function (value) {
      return new Promise(function (resolve, reject) {
        reject(value);
      });
    };

    Promise.race = function (values) {
      return new Promise(function (resolve, reject) {
        for (var i = 0, len = values.length; i < len; i++) {
          values[i].then(resolve, reject);
        }
      });
    };

    return Promise;
  }
);

/* jshint ignore:end */
/* eslint-enable */
/**
 * Delay.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Utility class for working with delayed actions like setTimeout.
 *
 * @class tinymce.util.Delay
 */
define(
  'tinymce.core.util.Delay',
  [
    "tinymce.core.util.Promise"
  ],
  function (Promise) {
    var requestAnimationFramePromise;

    function requestAnimationFrame(callback, element) {
      var i, requestAnimationFrameFunc = window.requestAnimationFrame, vendors = ['ms', 'moz', 'webkit'];

      function featurefill(callback) {
        window.setTimeout(callback, 0);
      }

      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {
        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];
      }

      if (!requestAnimationFrameFunc) {
        requestAnimationFrameFunc = featurefill;
      }

      requestAnimationFrameFunc(callback, element);
    }

    function wrappedSetTimeout(callback, time) {
      if (typeof time != 'number') {
        time = 0;
      }

      return setTimeout(callback, time);
    }

    function wrappedSetInterval(callback, time) {
      if (typeof time != 'number') {
        time = 1; // IE 8 needs it to be > 0
      }

      return setInterval(callback, time);
    }

    function wrappedClearTimeout(id) {
      return clearTimeout(id);
    }

    function wrappedClearInterval(id) {
      return clearInterval(id);
    }

    function debounce(callback, time) {
      var timer, func;

      func = function () {
        var args = arguments;

        clearTimeout(timer);

        timer = wrappedSetTimeout(function () {
          callback.apply(this, args);
        }, time);
      };

      func.stop = function () {
        clearTimeout(timer);
      };

      return func;
    }

    return {
      /**
       * Requests an animation frame and fallbacks to a timeout on older browsers.
       *
       * @method requestAnimationFrame
       * @param {function} callback Callback to execute when a new frame is available.
       * @param {DOMElement} element Optional element to scope it to.
       */
      requestAnimationFrame: function (callback, element) {
        if (requestAnimationFramePromise) {
          requestAnimationFramePromise.then(callback);
          return;
        }

        requestAnimationFramePromise = new Promise(function (resolve) {
          if (!element) {
            element = document.body;
          }

          requestAnimationFrame(resolve, element);
        }).then(callback);
      },

      /**
       * Sets a timer in ms and executes the specified callback when the timer runs out.
       *
       * @method setTimeout
       * @param {function} callback Callback to execute when timer runs out.
       * @param {Number} time Optional time to wait before the callback is executed, defaults to 0.
       * @return {Number} Timeout id number.
       */
      setTimeout: wrappedSetTimeout,

      /**
       * Sets an interval timer in ms and executes the specified callback at every interval of that time.
       *
       * @method setInterval
       * @param {function} callback Callback to execute when interval time runs out.
       * @param {Number} time Optional time to wait before the callback is executed, defaults to 0.
       * @return {Number} Timeout id number.
       */
      setInterval: wrappedSetInterval,

      /**
       * Sets an editor timeout it's similar to setTimeout except that it checks if the editor instance is
       * still alive when the callback gets executed.
       *
       * @method setEditorTimeout
       * @param {tinymce.Editor} editor Editor instance to check the removed state on.
       * @param {function} callback Callback to execute when timer runs out.
       * @param {Number} time Optional time to wait before the callback is executed, defaults to 0.
       * @return {Number} Timeout id number.
       */
      setEditorTimeout: function (editor, callback, time) {
        return wrappedSetTimeout(function () {
          if (!editor.removed) {
            callback();
          }
        }, time);
      },

      /**
       * Sets an interval timer it's similar to setInterval except that it checks if the editor instance is
       * still alive when the callback gets executed.
       *
       * @method setEditorInterval
       * @param {function} callback Callback to execute when interval time runs out.
       * @param {Number} time Optional time to wait before the callback is executed, defaults to 0.
       * @return {Number} Timeout id number.
       */
      setEditorInterval: function (editor, callback, time) {
        var timer;

        timer = wrappedSetInterval(function () {
          if (!editor.removed) {
            callback();
          } else {
            clearInterval(timer);
          }
        }, time);

        return timer;
      },

      /**
       * Creates debounced callback function that only gets executed once within the specified time.
       *
       * @method debounce
       * @param {function} callback Callback to execute when timer finishes.
       * @param {Number} time Optional time to wait before the callback is executed, defaults to 0.
       * @return {Function} debounced function callback.
       */
      debounce: debounce,

      // Throttle needs to be debounce due to backwards compatibility.
      throttle: debounce,

      /**
       * Clears an interval timer so it won't execute.
       *
       * @method clearInterval
       * @param {Number} Interval timer id number.
       */
      clearInterval: wrappedClearInterval,

      /**
       * Clears an timeout timer so it won't execute.
       *
       * @method clearTimeout
       * @param {Number} Timeout timer id number.
       */
      clearTimeout: wrappedClearTimeout
    };
  }
);

/**
 * Env.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class contains various environment constants like browser versions etc.
 * Normally you don't want to sniff specific browser versions but sometimes you have
 * to when it's impossible to feature detect. So use this with care.
 *
 * @class tinymce.Env
 * @static
 */
define(
  'tinymce.core.Env',
  [
  ],
  function () {
    var nav = navigator, userAgent = nav.userAgent;
    var opera, webkit, ie, ie11, ie12, gecko, mac, iDevice, android, fileApi, phone, tablet, windowsPhone;

    function matchMediaQuery(query) {
      return "matchMedia" in window ? matchMedia(query).matches : false;
    }

    opera = window.opera && window.opera.buildNumber;
    android = /Android/.test(userAgent);
    webkit = /WebKit/.test(userAgent);
    ie = !webkit && !opera && (/MSIE/gi).test(userAgent) && (/Explorer/gi).test(nav.appName);
    ie = ie && /MSIE (\w+)\./.exec(userAgent)[1];
    ie11 = userAgent.indexOf('Trident/') != -1 && (userAgent.indexOf('rv:') != -1 || nav.appName.indexOf('Netscape') != -1) ? 11 : false;
    ie12 = (userAgent.indexOf('Edge/') != -1 && !ie && !ie11) ? 12 : false;
    ie = ie || ie11 || ie12;
    gecko = !webkit && !ie11 && /Gecko/.test(userAgent);
    mac = userAgent.indexOf('Mac') != -1;
    iDevice = /(iPad|iPhone)/.test(userAgent);
    fileApi = "FormData" in window && "FileReader" in window && "URL" in window && !!URL.createObjectURL;
    phone = matchMediaQuery("only screen and (max-device-width: 480px)") && (android || iDevice);
    tablet = matchMediaQuery("only screen and (min-width: 800px)") && (android || iDevice);
    windowsPhone = userAgent.indexOf('Windows Phone') != -1;

    if (ie12) {
      webkit = false;
    }

    // Is a iPad/iPhone and not on iOS5 sniff the WebKit version since older iOS WebKit versions
    // says it has contentEditable support but there is no visible caret.
    var contentEditable = !iDevice || fileApi || userAgent.match(/AppleWebKit\/(\d*)/)[1] >= 534;

    return {
      /**
       * Constant that is true if the browser is Opera.
       *
       * @property opera
       * @type Boolean
       * @final
       */
      opera: opera,

      /**
       * Constant that is true if the browser is WebKit (Safari/Chrome).
       *
       * @property webKit
       * @type Boolean
       * @final
       */
      webkit: webkit,

      /**
       * Constant that is more than zero if the browser is IE.
       *
       * @property ie
       * @type Boolean
       * @final
       */
      ie: ie,

      /**
       * Constant that is true if the browser is Gecko.
       *
       * @property gecko
       * @type Boolean
       * @final
       */
      gecko: gecko,

      /**
       * Constant that is true if the os is Mac OS.
       *
       * @property mac
       * @type Boolean
       * @final
       */
      mac: mac,

      /**
       * Constant that is true if the os is iOS.
       *
       * @property iOS
       * @type Boolean
       * @final
       */
      iOS: iDevice,

      /**
       * Constant that is true if the os is android.
       *
       * @property android
       * @type Boolean
       * @final
       */
      android: android,

      /**
       * Constant that is true if the browser supports editing.
       *
       * @property contentEditable
       * @type Boolean
       * @final
       */
      contentEditable: contentEditable,

      /**
       * Transparent image data url.
       *
       * @property transparentSrc
       * @type Boolean
       * @final
       */
      transparentSrc: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",

      /**
       * Returns true/false if the browser can or can't place the caret after a inline block like an image.
       *
       * @property noCaretAfter
       * @type Boolean
       * @final
       */
      caretAfter: ie != 8,

      /**
       * Constant that is true if the browser supports native DOM Ranges. IE 9+.
       *
       * @property range
       * @type Boolean
       */
      range: window.getSelection && "Range" in window,

      /**
       * Returns the IE document mode for non IE browsers this will fake IE 10.
       *
       * @property documentMode
       * @type Number
       */
      documentMode: ie && !ie12 ? (document.documentMode || 7) : 10,

      /**
       * Constant that is true if the browser has a modern file api.
       *
       * @property fileApi
       * @type Boolean
       */
      fileApi: fileApi,

      /**
       * Constant that is true if the browser supports contentEditable=false regions.
       *
       * @property ceFalse
       * @type Boolean
       */
      ceFalse: (ie === false || ie > 8),

      /**
       * Constant if CSP mode is possible or not. Meaning we can't use script urls for the iframe.
       */
      canHaveCSP: (ie === false || ie > 11),

      desktop: !phone && !tablet,
      windowsPhone: windowsPhone
    };
  }
);

/**
 * EventUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint loopfunc:true*/
/*eslint no-loop-func:0 */

/**
 * This class wraps the browsers native event logic with more convenient methods.
 *
 * @class tinymce.dom.EventUtils
 */
define(
  'tinymce.core.dom.EventUtils',
  [
    "tinymce.core.util.Delay",
    "tinymce.core.Env"
  ],
  function (Delay, Env) {
    "use strict";

    var eventExpandoPrefix = "mce-data-";
    var mouseEventRe = /^(?:mouse|contextmenu)|click/;
    var deprecated = {
      keyLocation: 1, layerX: 1, layerY: 1, returnValue: 1,
      webkitMovementX: 1, webkitMovementY: 1, keyIdentifier: 1
    };

    // Checks if it is our own isDefaultPrevented function
    var hasIsDefaultPrevented = function (event) {
      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;
    };

    // Dummy function that gets replaced on the delegation state functions
    var returnFalse = function () {
      return false;
    };

    // Dummy function that gets replaced on the delegation state functions
    var returnTrue = function () {
      return true;
    };

    /**
     * Binds a native event to a callback on the speified target.
     */
    function addEvent(target, name, callback, capture) {
      if (target.addEventListener) {
        target.addEventListener(name, callback, capture || false);
      } else if (target.attachEvent) {
        target.attachEvent('on' + name, callback);
      }
    }

    /**
     * Unbinds a native event callback on the specified target.
     */
    function removeEvent(target, name, callback, capture) {
      if (target.removeEventListener) {
        target.removeEventListener(name, callback, capture || false);
      } else if (target.detachEvent) {
        target.detachEvent('on' + name, callback);
      }
    }

    /**
     * Gets the event target based on shadow dom properties like path and deepPath.
     */
    function getTargetFromShadowDom(event, defaultTarget) {
      var path, target = defaultTarget;

      // When target element is inside Shadow DOM we need to take first element from path
      // otherwise we'll get Shadow Root parent, not actual target element

      // Normalize target for WebComponents v0 implementation (in Chrome)
      path = event.path;
      if (path && path.length > 0) {
        target = path[0];
      }

      // Normalize target for WebComponents v1 implementation (standard)
      if (event.deepPath) {
        path = event.deepPath();
        if (path && path.length > 0) {
          target = path[0];
        }
      }

      return target;
    }

    /**
     * Normalizes a native event object or just adds the event specific methods on a custom event.
     */
    function fix(originalEvent, data) {
      var name, event = data || {}, undef;

      // Copy all properties from the original event
      for (name in originalEvent) {
        // layerX/layerY is deprecated in Chrome and produces a warning
        if (!deprecated[name]) {
          event[name] = originalEvent[name];
        }
      }

      // Normalize target IE uses srcElement
      if (!event.target) {
        event.target = event.srcElement || document;
      }

      // Experimental shadow dom support
      if (Env.experimentalShadowDom) {
        event.target = getTargetFromShadowDom(originalEvent, event.target);
      }

      // Calculate pageX/Y if missing and clientX/Y available
      if (originalEvent && mouseEventRe.test(originalEvent.type) && originalEvent.pageX === undef && originalEvent.clientX !== undef) {
        var eventDoc = event.target.ownerDocument || document;
        var doc = eventDoc.documentElement;
        var body = eventDoc.body;

        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
          (doc && doc.clientLeft || body && body.clientLeft || 0);

        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) -
          (doc && doc.clientTop || body && body.clientTop || 0);
      }

      // Add preventDefault method
      event.preventDefault = function () {
        event.isDefaultPrevented = returnTrue;

        // Execute preventDefault on the original event object
        if (originalEvent) {
          if (originalEvent.preventDefault) {
            originalEvent.preventDefault();
          } else {
            originalEvent.returnValue = false; // IE
          }
        }
      };

      // Add stopPropagation
      event.stopPropagation = function () {
        event.isPropagationStopped = returnTrue;

        // Execute stopPropagation on the original event object
        if (originalEvent) {
          if (originalEvent.stopPropagation) {
            originalEvent.stopPropagation();
          } else {
            originalEvent.cancelBubble = true; // IE
          }
        }
      };

      // Add stopImmediatePropagation
      event.stopImmediatePropagation = function () {
        event.isImmediatePropagationStopped = returnTrue;
        event.stopPropagation();
      };

      // Add event delegation states
      if (hasIsDefaultPrevented(event) === false) {
        event.isDefaultPrevented = returnFalse;
        event.isPropagationStopped = returnFalse;
        event.isImmediatePropagationStopped = returnFalse;
      }

      // Add missing metaKey for IE 8
      if (typeof event.metaKey == 'undefined') {
        event.metaKey = false;
      }

      return event;
    }

    /**
     * Bind a DOMContentLoaded event across browsers and executes the callback once the page DOM is initialized.
     * It will also set/check the domLoaded state of the event_utils instance so ready isn't called multiple times.
     */
    function bindOnReady(win, callback, eventUtils) {
      var doc = win.document, event = { type: 'ready' };

      if (eventUtils.domLoaded) {
        callback(event);
        return;
      }

      function isDocReady() {
        // Check complete or interactive state if there is a body
        // element on some iframes IE 8 will produce a null body
        return doc.readyState === "complete" || (doc.readyState === "interactive" && doc.body);
      }

      // Gets called when the DOM is ready
      function readyHandler() {
        if (!eventUtils.domLoaded) {
          eventUtils.domLoaded = true;
          callback(event);
        }
      }

      function waitForDomLoaded() {
        if (isDocReady()) {
          removeEvent(doc, "readystatechange", waitForDomLoaded);
          readyHandler();
        }
      }

      function tryScroll() {
        try {
          // If IE is used, use the trick by Diego Perini licensed under MIT by request to the author.
          // http://javascript.nwbox.com/IEContentLoaded/
          doc.documentElement.doScroll("left");
        } catch (ex) {
          Delay.setTimeout(tryScroll);
          return;
        }

        readyHandler();
      }

      // Use W3C method (exclude IE 9,10 - readyState "interactive" became valid only in IE 11)
      if (doc.addEventListener && !(Env.ie && Env.ie < 11)) {
        if (isDocReady()) {
          readyHandler();
        } else {
          addEvent(win, 'DOMContentLoaded', readyHandler);
        }
      } else {
        // Use IE method
        addEvent(doc, "readystatechange", waitForDomLoaded);

        // Wait until we can scroll, when we can the DOM is initialized
        if (doc.documentElement.doScroll && win.self === win.top) {
          tryScroll();
        }
      }

      // Fallback if any of the above methods should fail for some odd reason
      addEvent(win, 'load', readyHandler);
    }

    /**
     * This class enables you to bind/unbind native events to elements and normalize it's behavior across browsers.
     */
    function EventUtils() {
      var self = this, events = {}, count, expando, hasFocusIn, hasMouseEnterLeave, mouseEnterLeave;

      expando = eventExpandoPrefix + (+new Date()).toString(32);
      hasMouseEnterLeave = "onmouseenter" in d À‘iH0P Jl("Ç¢P°P":µBRÃ0¼‹ @e#S€b…!,¶€C(p|92.¢€+ &-$ÆkHFrĞ‚@VJ‹BRM† +Òˆ
FğYœ–XŠŒ­	‰RÂ0&©ÀÌL©*¸Y  .CÈ* Åaáø":ˆ 4'`"J‚PÀ		À}ÃC”€¨çcÒÕ¡JF eP@¡Èaˆ€D˜CP€Cr$ 
@¸„ÀÂ€,°¸T»P©´£„¥ ~¢èJ•`5|Ğ'¤†V¸  A‚ Ğ
(a $:pOn,ˆ$Ğˆ!@$$‚"¸e ˜ ƒê‰2H) ğä ‰gh„
•R å (FÍè1¸Ø	Ê0Á8`F„x€  …)”ÀB3P
eP‚`„$å¦ƒdÃ@„E‚ƒÊ‚klÍ°&¼BUöÊÜÒ±FœR¢P'Ôñ‡ârûbàC>°AÕ`LCH*–HF`‘>ğ@\—jEÀA¡ z–äVÑ‡ Š":H-´XH £•i‘„Ke­à€™Ğ”åÑ¼¡…CBRsP°t0&@õ—!#$Àƒrã°à3XÃN @ZJÎH€ÜJ-›¦@ÀY“p.GH"¬@c(²ÑNBAj	0‘“/Ğœœ  À¢$aè	#@OŠºÁP
 â	€@p¨jUP ,â bP$N"€ˆˆĞ	¥šHÎ¦à¢Aª´~ ˜!3y[(t0Ó8KíÈ©„€R@V$LWÌ30á<!‚@! b÷°h%™AŒVèÈ³%#`©¤^âcs¢^zpÁ½b*2LS°Y³ PêSbB €–5` 8€Â-¨Wdä!gFÄ%P…ÊoŠÎŠ‚ BÁUà@°F…)mäÄ»E! ÃÜƒØğ	À£´™IÂJ’ Ä æ¸! W¸.Ğ@ÃDˆ$€¤!p“YZ–!D‚²4Àá­+ÊU`£  / …†àÈXáÔÔb’¨…àå  Æ ¨+*	`„ ŠVZr98"ˆ! hàpÇ ’
DKŒˆ„0<¡@°DFRu&'( #Â$„,ar€`ƒ¦b€°Ã$@ÿI„P–„2à€JSd
£CˆL•¨
à&p@êkÉ¹–Šãe¡¡"4—¨ƒd 'AÀ,Vª*Ô¤Ø¹AQZåI €P8ìÉk(a1P,°	Â ’f!’L&’KÉ	 ‡AùT–;0q XXB¡@5¶v‰JBÕàâOX††‚"ˆ xö È"S¦  0ä)‘´$@ñ8@ rH(pˆğ)iq
 €Á p@¯C„Ğ<%HCA¤"DÀ–È…'åC	F‚B$Ãaâ g@
^wL¨ ã&¦‚\d ^ˆi€P‘’”P((",`€QĞ”‚@R€ƒ‚$`!	CôL`(EUpÈv8F€ıEYB… €€èé H$ „ B á‚ `ÅP Rb˜©# 0E&†ŠBF€ä	aXH­®
Ò ş2Èô R*ÎKŞ–„ y&â ”Ê(£@„‰è€	J ­”®í4#9D²|kS÷ 	àTğmÓ¡€#1x„)#ƒ¤ ÄDâ•`x\0ùÇÆµÀ$Ñ`àTbàbÈÆ& (ò ØÄ D8kXƒáBa›Àú¬c è®UBP ÀP¹T ä{€¶ãp@È%A ì`ÒƒR2.#Â¡3T‚ZÈP"ˆh °Hç´1Xh2 P ÒH0Ù ¨T!ÂåÄÉ(+a!µ€€l
¨°°J3P¨’˜£…@
y2P‡H8”±” *ø
L2 V+n Éj´½F}íaaºX¯Ú´Aè/â¤"g„õHˆÂ ™ HA³+FXAk #2*®”`2É€•&*Ve30Éû´2S 314[4Ø € bM‰iÚ‰¸Ôb…³Ó‡s¢‘(Pˆ @”e$×§&•N:¤'È(c!ğ³`XÀ˜1h€…  F©ƒ±°ÊªğÌ$cdÊ ‘¢ ±ªâs€B]:_%*RåL\*Rˆá5B¶° R‚%}ÌS4Ú¨Á€ÿ°„Sed€Å3PGô$aÀÈe G(ğ(@ eE‰pL#{‹– C)¡$#”x	M+•Sb¥¸Ê‹:7¡N*[‚ u ( ² à°5ÀÁ`€9*E¬À˜ b	T B#, 
Éœ‚ `kXD
 ™ªˆ@XŠ®†U* —I8pCÜ$=¢!-ğ=L F#dÇ 	ÀS6¶õiÒ²—`N¨`X;`Š[âj	2ú•P#§t €¬ ’Ô¢U¦p)ˆ¢…Eå*µ€œÔvBq‘@+x˜SR
°!¼TeÊâ)t‘XP‚ú]ÁÍ(‚%'„š´£&vH8Y &ºEÁ¨)ëF€†p	‘œœ"Dè`8 æ–DR@S&-   "„øØ¸Tó Á ‰0Fµ’;‡â Ø¸„$¦4 8 N„I@€1 Œ@MPÕ/%.‚SNÁBd˜ ƒğ°[Ô€e1(š °é0 	†BL0PºØ-	`J¸¨(* Ä””DGÀ„L#ˆA1†	Ùã¬Å ŒƒpP¦¤ïàO˜Á9Ñ1D‚ æDŒ°nDEHB€m(Ğ E
"ªIÂS˜ÖJ  ( A8F¸50¬Sb¨°—%TĞjœb†A±Ğ Æ3A 
4\€ÂD"„TAdP’7!„H218°ô,d, ƒÁDD.D¤šÀÂ”4t(Ô•‚M„¡LZ…ƒ :˜€@ @Øœ¨€¤4fƒ°L8›Si jNY&` i@2&­KÀ0"8‚pÊHNG‘ ‚ Ø  $Ì !Z XEÔ…Ó;1!D€H‚%àĞ 
bW¨¥/'RídE! `"3ªÃ8Â2B­%!´Òmx!xìcKQµ@Õ1Doˆ} æÆnÃ@… >iÄP#/¡…A3Ğ!Ê @—nRFÙ¡+SBçY“@@à—´`$A¡Ik"mš%A'ÑbŒIZ2°¤(X±pb¹0`B\À0‚‹!Öÿ`ˆPB¸ÒFAØçˆR@:(0©`U€I Ø`8ÍP‰”•ÅÀĞù‘™„!!•0È¡5ÆF‘­“XL¨¡ =pD\Á=ñK˜ŒÑ¸Ç1ía²4‹ïèX'Pd¬Õ@PˆrÀÔ–B 5˜‘Q	C)¨bb2„A@ E A.X ± €@À€P   
‚à¢xà= Pp 4$/&#† ù+)?z‚‡‰PRA–I4%€
´= „SDBC'¨
ÁD@‡Ø¥f* J€6T œäÉ¨U€9¥ Œ(P ^#ÑY¾	ÛaE–‚(B-Ér¡ÃW!‡xÈR†T{ ì$fq”UÅs%ÄJN ™5T
+0Z`|*4Í íïøE EÂ±€P0òQ#–@ß¶³&…) ğˆ=Ê`I¬
	Ráˆº/x¨ÂÚâ ’Ì„€èhØ³‚%‚8 ‚r 
ŠÑp(„$·`à  Q‡Ùr8A q6B „@$0ƒ#DÔ¤„¬$ˆ‰"„2Ü’@0
HFX$0ŒH  ªè¨a”4F°ó©\ „(”·
sqÊÅ^@K@¢ Q€! Qx#z’€8  „)" „KQA b@`N‚,xP '€R20€,Ô­@ Éˆ‚˜€€PÆˆEŒ$‹)%$p`A I
#„4üT#LHÉ O	.# 1-zX<tÃq´]Ÿ]3.?pW
«@(ä	épJú,2Ñ €%#’H†S¿®ÀIÆ’®Ûux¬‚0I/¬`Û‰ 2 *£ RCÀ%c9¦ğ€FŒÈ*ÄFc˜–@D2†ÒXàGT?ƒĞ:º	Ñ   )£E)E%F)A€j&!+(4´ c‡À2@I¬H…nFƒ–UPa %ÌH0XbÃ$º¹(Ç K˜,¸
/áU)„Q@8-ê(cÁ‘J$°+€‰d9˜®Uhå«—@‡j&¼‚Ñx%%’ô@Dr’‡êÙaUƒBI`ƒ ¸+©gqvômr9Á= n8[©ÎH`PÂHQA”—è H¤î¢ÂÀB€È DŒT `bÂd’ŠŒã„ ˜ "#1’9¢0äMP$$lAUìøÉÛ#eıÂ Š£¹(fˆLM7"°è(Â ëC58?@B+¬@± 1(°%Bd£@ÁÅ A£aˆEF|«Á‡™a%@(mƒÈØĞT"7AG‚ğ¦E<0˜ Ó@œä…(†èŠÓ€ 0ª Àì€ÓåK T2'Â1jĞË ¦mèˆĞeÊ!àPLšE¥M@T$H†"45½@  „BN@r‚‰¤­
¨"(ÎK€qIÃ„ÀC(! €Àc	H1ò¤…`cZD–ˆã8                evt = fix(evt || win.event);
                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';
                  evt.target = current;
                  executeHandlers(evt, id);
                }
              };
            }
          }

          // Fake bubbling of focusin/focusout
          if (!hasFocusIn && (name === "focusin" || name === "focusout")) {
            capture = true;
            fakeName = name === "focusin" ? "focus" : "blur";
            nativeHandler = function (evt) {
              evt = fix(evt || win.event);
              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';
              executeHandlers(evt, id);
            };
          }

          // Setup callback list and bind native event
          callbackList = events[id][name];
          if (!callbackList) {
            events[id][name] = callbackList = [{ func: callback, scope: scope }];
            callbackList.fakeName = fakeName;
            callbackList.capture = capture;
            //callbackList.callback = callback;

            // Add the nativeHandler to the callback list so that we can later unbind it
            callbackList.nativeHandler = nativeHandler;

            // Check if the target has native events support

            if (name === "ready") {
              bindOnReady(target, nativeHandler, self);
            } else {
              addEvent(target, fakeName || name, nativeHandler, capture);
            }
          } else {
            if (name === "ready" && self.domLoaded) {
              callback({ type: name });
            } else {
              // If it already has an native handler then just push the callback
              callbackList.push({ func: callback, scope: scope });
            }
          }
        }

        target = callbackList = 0; // Clean memory for IE

        return callback;
      };

      /**
       * Unbinds the specified event by name, name and callback or all events on the target.
       *
       * @method unbind
       * @param {Object} target Target node/window or custom object.
       * @param {String} names Optional event name to unbind.
       * @param {function} callback Optional callback function to unbind.
       * @return {EventUtils} Event utils instance.
       */
      self.unbind = function (target, names, callback) {
        var id, callbackList, i, ci, name, eventMap;

        // Don't bind to text nodes or comments
        if (!target || target.nodeType === 3 || target.nodeType === 8) {
          return self;
        }

        // Unbind event or events if the target has the expando
        id = target[expando];
        if (id) {
          eventMap = events[id];

          // Specific callback
          if (names) {
            names = names.split(' ');
            i = names.length;
            while (i--) {
              name = names[i];
              callbackList = eventMap[name];

              // Unbind the event if it exists in the map
              if (callbackList) {
                // Remove specified callback
                if (callback) {
                  ci = callbackList.length;
                  while (ci--) {
                    if (callbackList[ci].func === callback) {
                      var nativeHandler = callbackList.nativeHandler;
                      var fakeName = callbackList.fakeName, capture = callbackList.capture;

                      // Clone callbackList since unbind inside a callback would otherwise break the handlers loop
                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));
                      callbackList.nativeHandler = nativeHandler;
                      callbackList.fakeName = fakeName;
                      callbackList.capture = capture;

                      eventMap[name] = callbackList;
                    }
                  }
                }

                // Remove all callbacks if there isn't a specified callback or there is no callbacks left
                if (!callback || callbackList.length === 0) {
                  delete   p+¹Q€ÿÿÿ@$¹QXn¼M    X^     xø:€¯¼M      ÌÒSûUa–wâk.ô[ßPé @    ¤  L¤ `¼Mˆ?»MÌÙ  ~^^§åà îáîë)	 êî¾æ>>	 `àbáíí	Ù0#3  àáîlnP#îşîì¾VVËåÀàîéìş_0S%à@îœşşëààëîéVPQâ`àî>>9"àà îèîŞ âîìîß@ åãä PB°Â? a
@ë,ÔG€A?¬0 Ì0 ÔG€=ŠŠH>Ÿ `€ì ’ÿ9 àÉ??ä p3ê/ @‡*p­ê:ã» ÀÖ,Ì0 %XM 	@6Zà% %è  4 SR  p    jxjîjŠ¢ğŠ      ’³¢ãª²¶¾©)‘À‰Â  0  ™;„Œš¯Úóº!RÃ   @À`à¨8ª¼}ú† 0"0
     §Î¡ã¦§¶¾&¡À
    00;jÎšoº!ˆ À€@À©ó¨¸©)m/‰Â(0   HÌ„Œ¦ÎÚó¦k.¢Ã    °à0j|jîjŠ
’ğŠ      Ò³¢ã©ãş|ª€‹‚(0      ¬(ˆŒš®Úó¾!’Ã   €Àpà¨8ª¼mê† 0"0
     X*æ    ã-H€ÿÿÿpÁóôm<      ,ƒ`„ÎK§'®kÉÌÍÿƒ €    ¤  ’   /L€ÿÿÿ@#L F7>Ÿ   Q¼M    À(Lğ/L€ÿÿÿX÷G    äMØÏòôØT9<€ÿÿÿ      ø@Ü9ÒKœW³kP!ÊÍÿƒ €    ¤   »ÈFĞ³ÈFz‰  XR¼M    XşG    H¤_?8OTFm9<     8x³kuA( €     í¡  @¿ÈFà²ÈF       X—È    Àê\JØÔòô|„9  7È    W]Î¤k‘Z   í¡  À8JP6J`  €{¶H     X‹    € sFxñôÀ×Ÿ9      ¼vH×Wê N>¡k!pìÍÿƒ €    ¤  Q  °=JĞ2JF7b  `V¼M  X%^    ˆ4ªDHóôPá9     Ÿhàª×& €     í¡  €8J¦Š  À°E!     X,     h„İL€‘ñôĞuó9      H&ÃhpX³]qK¢kÉlÏÍÿƒ €    ¤  º   1J`8JA  Y¼M    X¤    `¥ÄL°ñôX”^L     |Gi¢kš €     í¡   ¹ÈFu  àQG"     `ŸŸ6XX^    ˆ´lLà‚óôøp@:      fOì±Y fOì±Yq¾iŸk±e) „ €    ¤  l  0>JàF7©Š  À[¼M  @8JXl`    ˆH€ÿÿÿ€“óôÀç]:  &^    Œl€,>Í& €     í¡  p/L€ÿÿÿÀ.L€ÿÿÿÂŠ  p L     @+LÀ/L€ÿÿÿXMX    ÀšpJ€ÿÿÿˆRóô0§I     "4ûÀk©6É'   í¡  ğ¶ÈF z¶H     ÀºÈFXªæ    @ĞvLpÅóôà#<  $æ    ÌÔòª®kØŠ÷ÌÔòª €     í¡  ğ¿ÈF`'LDŸ  à°ÈF   nv0àîî)à0íî±îëîYY€å@°îêîë°[%.î.nnïåààïéè^&Vâ…à.éâîÊĞ
àîNãèîêXÀ\à"înnààîJîéîÚP%Ràîùş Z%@î‘îánååà& " óp?`Èá	
P½ï?äw { 3À\B>¤ p!> ‹  €‚#–ø9ä 0@À .0	8@>¢ 
P¢8 X  ‚#ä L4A> =^­*ã» l S   B  [   ˜È*?˜ıÍ  "ˆÌˆÀ
OˆÄ*<""3ÌÀ&3
OƒC*:#³ "3¢ğƒC‚Ó!³…ˆÌ¢ğˆÌÂ€@ŠJ/  ‰Œ¨ü Ğ ô<"¸ü"#Pô41Â  "#.?44TıÂŒ€  €À?TıÍŒ€0"€À@ÀOŠ? # ÀÀ$0
O'<ı  0àğ‚BBÓ#³…àğˆŒ‚Ó`ĞŠ,ˆÌ‚ˆÈ¨ü€@°ÄJ/"@ ¬ü"#`ô(4!Â‹"#0 "3*/84hı‚‹ˆ€0 ˆÈ+?€x„:€ÿÿÿà#ºM óG à"7 ‚7èn¼M€_ÊMh¼M¨°¼MÀi4B H  À   Ö¦t àÂ­<Š  p‡ª6hòÜ= à"7`uCHÛê  ğ»M ¯¼M ±¼M ‹F H €ğ “­s .¼M€x„:À"ºM à"7˜q¼M¸hàM ¼M€ÿÿÿ0¼M€ÿÿÿ˜²¼M ˆM H  À /XBàÂ­<Š  p‡WLĞíM à"7 Ğ<F¼¼Mh¤@€FH H  à   °I†É(= 4>€  ĞéxD^@ à"7 ‚7àz@½;8€ã¥<`ÃïBPäğG€ÿÿÿ gíB H   À   zŠ€\Â@°9f: $7 ¡7€ÿÿÿpZMHH¶¼M Í@H¶¼M0Í@€µ¼M ŠŒ> à ¿Œxj™C€yrF(º¼M ¡7€ÿÿÿğ"
J@Œ>ÙïØU™C€ÿÿÿ wrF(º¼M ¡7€ÿÿÿc
J €Œ>ğ”0V™C€ÿÿÿ€yÎA(º¼M ¡7€ÿÿÿ «¼MÀŒ> H  ºRšˆV™C€ÿÿÿ°€ª6 ¡7€ÿÿÿ°]
J`ƒÆ?ğ#ø7X$K<0­°M@hN€ÿÿÿ À   AœM $7 ¡7€ÿÿÿp).F »¼M°mƒI À  ³ÿø å»EPµ§M ¡7€ÿÿÿÀZ
J  ¼MÀ‚Œ> H   à £Èi™C€ÿÿÿ@„=F(ÚÒ8 ¡7€ÿÿÿĞ(
J÷:p³¼M‡LH¼¼M€`G H  à   |§˜îA 4>€   çxD€ÿÿÿ^@ à"7 ‚7˜@¨úMp•ÈBÀv£7p@à”>B H   À   bº°OB $7 ¡7€ÿÿÿ0ÆNHĞ¥¼M¿¼M @ÀÛìC H  à ›B†0¡EĞÎ<€ÿÿÿ ÷;ø ˜8 à"7 ‚7}@€ÿÿÿ¾¼MÿEH  ±F ND H  à   â?Š@˜E€ÿÿÿĞÎ<€ÿÿÿà/şA à"7 ‚7@€@ààîîŞîëîNîîîîÎààN¾îîîéNîîî®î¹îîîîîîèàîîî~Îîîîîîîáç´ìîî"î~AÎîîëîî)îáä¼îâî.î~àîëîé>ãç°ìî^î)îâî¾ì¾îîîîîîîèîîëîîîêêâîîîêî.êáğ?€ãñ?€ ü8ü8Xà 9ÿü8ü4€ƒ4páù?8 %hÂ
ÿ5`£"ÿü8Àƒ*ü8°#	5ü8`ÿ8$ğ?€ƒŒ#ÿ3Ä S;  Z  q  84˜ş‚‹ˆÀ  €À*?¨ñ¨ô $#À€À
O¨ô<$# €À$0O‚B*?"³"0&3¡ğ‚C‚Ó!³†ˆŒ¢ğˆÌ‚€@ŠJ/  ‰Œ¨ü Ğ`ô(!Â"#¨ü"3 ô(4!‚‹"#0 "3+? Ğlñ’‹   °€+?hıŠÍ 0#À€ÀO¨´&<$# €À$0O‚B?"³"0&3¢ğ‚CBÓ!³‰ĞğˆŒ‚Ó ĞŠ<‰Œ¸ü Ğ ô<!@ ¨ü"#`ô84"‚B  "#.? ¨ñ’‹ˆÄÿÿÿÿ˜ì¼M0»¼M0 ¼MÀ…Œ> H   à   49pi™Cà‰=F(ÚÒ8 $7 ¡7€ÿÿÿ 1
JÛê hêBè&óEÀSIBğ¹şE@‘"C À   ı8Œ Q=BĞ%H $7 ¡7€ÿÿÿÀ»IÛê `³§M ïE@ÅPLÀÛPL À   ­Gˆ aå?X¤TL ¡7€ÿÿÿp
6HşÜ=°›*<HfÒ=Èª¼M£¼M : H  à    ÕÀƒØu*D !®?Pç¦?.¿L à"7 ‚7€•4HÈ¦¼MPÇ…M¸\2H àE H  à   >ãpşò<ĞÎ<€ÿÿÿ€  àûCø ˜8 à"7 ‚7xœ@Ûê (öEÒC`ŸL°ŸL ‡<B H   À    ã°À{‘DX¤TL $7 ¡7€ÿÿÿ°-6Hø€‡L¾¼MÈ¦¼M @³M€ÿÿÿ H  à   ·MCEĞÎ<€ÿÿÿ êh9ø ˜8 à"7 ‚7ˆy@à³@ğ£¼MHÆ@ğ¥¼M`N³M H  à   µ½x¿ÜGAll rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */

/*jshint bitwise:false, expr:true, noempty:false, sub:true, eqnull:true, latedef:false, maxlen:255 */
/*eslint-disable */

/**
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */
define(
  'tinymce.core.dom.Sizzle',
  [],
  function () {
    var i,
      support,
      Expr,
      getText,
      isXML,
      tokenize,
      compile,
      select,
      outermostContext,
      sortInput,
      hasDuplicate,

      // Local document vars
      setDocument,
      document,
      docElem,
      documentIsHTML,
      rbuggyQSA,
      rbuggyMatches,
      matches,
      contains,

      // Instance-specific data
      expando = "sizzle" + -(new Date()),
      preferredDoc = window.document,
      dirruns = 0,
      done = 0,
      classCache = createCache(),
      tokenCache = createCache(),
      compilerCache = createCache(),
      sortOrder = function (a, b) {
        if (a === b) {
          hasDuplicate = true;
        }
        return 0;
      },

      // General-purpose constants
      strundefined = typeof undefined,
      MAX_NEGATIVE = 1 << 31,

      // Instance methods
      hasOwn = ({}).hasOwnProperty,
      arr = [],
      pop = arr.pop,
      push_native = arr.push,
      push = arr.push,
      slice = arr.slice,
      // Use a stripped-down indexOf if we can't use a native one
      indexOf = arr.indexOf || function (elem) {
        var i = 0,
          len = this.length;
        for (; i < len; i++) {
          if (this[i] === elem) {
            return i;
          }
        }
        return -1;
      },

      booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

      // Regular expressions

      // http://www.w3.org/TR/css3-selectors/#whitespace
      whitespace = "[\\x20\\t\\r\\n\\f]",

      // http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
      identifier = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

      // Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
      attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +
        // Operator (capture 2)
        "*([*^$|!~]?=)" + whitespace +
        // "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
        "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
        "*\\]",

      pseudos = ":(" + identifier + ")(?:\\((" +
        // To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
        // 1. quoted (capture 3; capture 4 or capture 5)
        "('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
        // 2. simple (capture 6)
        "((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
        // 3. anything else (capture 2)
        ".*" +
        ")\\)|)",

      // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
      rtrim = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g"),

      rcomma = new RegExp("^" + whitespace + "*," + whitespace + "*"),
      rcombinators = new RegExp("^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*"),

      rattributeQuotes = new RegExp("=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g"),

      rpseudo = new RegExp(pseudos),
      ridentifier = new RegExp("^" + identifier + "$"),

      matchExpr = {
        "ID": new RegExp("^#(" + identifier + ")"),
        "CLASS": new RegExp("^\\.(" + identifier + ")"),
        "TAG": new RegExp("^(" + identifier + "|[*])"),
        "ATTR": new RegExp("^" + attributes),
        "PSEUDO": new RegExp("^" + pseudos),
        "CHILD": new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
          "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
          "*(\\d+)|))" + whitespace + "*\\)|)", "i"),
        "bool": new RegExp("^(?:" + booleans + ")$", "i"),
        // For use in libraries implementing .is()
        // We use this for POS matching in `select`
        "needsContext": new RegExp("^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
          whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i")
      },

      rinputs = /^(?:input|select|textarea|button)$/i,
      rheader = /^h\d$/i,

      rnative = /^[^{]+\{\s*\[native \w/,

      // Easily-parseable/retrievable ID or TAG or CLASS selectors
      rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

      rsibling = /[+~]/,
      rescape = /'|\\/g,

      // CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
      runescape = new RegExp("\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig"),
      funescape = function (_, escaped, escapedWhitespace) {
        var high = "0x" + escaped - 0x10000;
        // NaN means non-codepoint
        // Support: Firefox<24
        // Workaround erroneous numeric interpretation of +"0x"
        return high !== high || escapedWhitespace ?
          escaped :
          high < 0 ?
            // BMP codepoint
            String.fromCharCode(high + 0x10000) :
            // Supplemental Plane codepoint (surrogate pair)
            String.fromCharCode(high >> 10 | 0xD800, high & 0x3FF | 0xDC00);
      };

    // Optimize for push.apply( _, NodeList )
    try {
      push.apply(
        (arr = slice.call(preferredDoc.childNodes)),
        preferredDoc.childNodes
      );
      // Support: Android<4.0
      // Detect silently failing push.apply
      arr[preferredDoc.childNodes.length].nodeType;
    } catch (e) {
      push = {
        apply: arr.length ?

          // Leverage slice if possible
          function (target, els) {
            push_native.apply(target, slice.call(els));
          } :

          // Support: IE<9
          // Otherwise append directly
          function (target, els) {
            var j = target.length,
              i = 0;
            // Can't trust NodeList.length
            while ((target[j++] = els[i++])) { }
            target.length = j - 1;
          }
      };
    }

    function Sizzle(selector, context, results, seed) {
      var match, elem, m, nodeType,
        // QSA vars
        i, groups, old, nid, newContext, newSelector;

      if ((context ? context.ownerDocument || context : preferredDoc) !== document) {
        setDocument(context);
      }

      context = context || document;
      results = results || [];

      if (!selector || typeof selector !== "string") {
        return results;
      }

      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {
        return [];
      }

      if (documentIsHTML && !seed) {

        // Shortcuts
        if ((match = rquickExpr.exec(selector))) {
          // Speed-up: Sizzle("#ID")
          if ((m = match[1])) {
            if (nodeType === 9) {
              elem = context.getElementById(m);
              // Check parentNode to catch when Blackberry 4.6 returns
              // nodes that are no longer in the document (jQuery #6963)
              if (elem && elem.parentNode) {
                // Handle the case where IE, Opera, and Webkit return items
                // by name instead of ID
                if (elem.id === m) {
                  results.push(elem);
                  return results;
                }
              } else {
                return results;
              }
            } else {
              // Context is not a document
              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) &&
                contains(context, elem) && elem.id === m) {
                results.push(elem);
                return results;
              }
            }

            // Speed-up: Sizzle("TAG")
          } else if (match[2]) {
            push.apply(results, context.getElementsByTagName(selector));
            return results;

            // Speed-up: Sizzle(".CLASS")
          } else if ((m = match[3]) && support.getElementsByClassName) {
            push.apply(results, context.getElementsByClassName(m));
            return results;
          }
        }

        // QSA path
        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {
          nid = old = expando;
          newContext = context;
          newSelector = nodeType === 9 && selector;

          // qSA works strangely on Element-rooted queries
          // We can work around this by specifying an extra ID on the root
          // and working up from there (Thanks to Andrew Dupont for the technique)
          // IE 8 doesn't work on object elements
          if (nodeType === 1 && context.nodeName.toLowerCase() !== "object") {
            groups = tokenize(selector);

            if ((old = context.getAttribute("id"))) {
              nid = old.replace(rescape, "\\$&");
            } else {
              context.setAttribute("id", nid);
            }
            nid = "[id='" + nid + "'] ";

            i = groups.length;
            while (i--) {
              groups[i] = nid + toSelector(groups[i]);
            }
            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;
            newSelector = groups.join(",");
          }

          if (newSelector) {
            try {
              push.apply(results,
                newContext.querySelectorAll(newSelector)
              );
              return results;
            } catch (qsaError) {
            } finally {
              if (!old) {
                context.removeAttribute("id");
              }
            }
          }
        }
      }

      // All others
      return select(selector.replace(rtrim, "$1"), context, results, seed);
    }

    /**
     * Create key-value caches of limited size
     * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
     * property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
     * deleting the oldest entry
     */
    function createCache() {
      var keys = [];

      function cache(key, value) {
        // Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
        if (keys.push(key + " ") > Expr.cacheLength) {
          // Only keep the most recent entries
          delete cache[keys.shift()];
        }
        return (cache[key + " "] = value);
      }
      return cache;
    }

    /**
     * Mark a function for special use by Sizzle
     * @param {Function} fn The function to mark
     */
    function markFunction(fn) {
      fn[expando] = true;
      return fn;
    }

    /**
     * Support testing using an element
     * @param {Function} fn Passed the created div and expects a boolean result
     */
    function assert(fn) {
      var div = document.createElement("div");

      try {
        return !!fn(div);
      } catch (e) {
        return false;
      } finally {
        // Remove from its parent by default
        if (div.parentNode) {
          div.parentNode.removeChild(div);
        }
        // release memory in IE
        div = null;
      }
    }

    /**
     * Adds the same handler for all of the specified attrs
     * @param {String} attrs Pipe-separated list of attributes
     * @param {Function} handler The method that will be applied
     */
    function addHandle(attrs, handler) {
      var arr = attrs.split("|"),
        i = attrs.length;

      while (i--) {
        Expr.attrHandle[arr[i]] = handler;
      }
    }

    /**
     * Checks document order of two siblings
     * @param {Element} a
     * @param {Element} b
     * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
     */
    function siblingCheck(a, b) {
      var cur = b && a,
        diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
          (~b.sourceIndex || MAX_NEGATIVE) -
          (~a.sourceIndex || MAX_NEGATIVE);

      // Use IE sourceIndex if available on both nodes
      if (diff) {
        return diff;
      }

      // Check if b follows a
      if (cur) {
        while ((cur = cur.nextSibling)) {
          if (cur === b) {
            return -1;
          }
        }
      }

      return a ? 1 : -1;
    }

    /**
     * Returns a function to use in pseudos for input types
     * @param {String} type
     */
    function createInputPseudo(type) {
      return function (elem) {
        var name = elem.nodeName.toLowerCase();
        return name === "input" && elem.type === type;
      };
    }

    /**
     * Returns a function to use in pseudos for buttons
     * @param {String} type
     */
    function createButtonPseudo(type) {
      return function (elem) {
        var name = elem.nodeName.toLowerCase();
        return (name === "input" || name === "button") && elem.type === type;
      };
    }

    /**
     * Returns a function to use in pseudos for positionals
     * @param {Function} fn
     */
    function createPositionalPseudo(fn) {
      return markFunction(function (argument) {
        argument = +argument;
        return markFunction(function (seed, matches) {
          var j,
            matchIndexes = fn([], seed.length, argument),
            i = matchIndexes.length;

          // Match elements found at the specified indexes
          while (i--) {
            if (seed[(j = matchIndexes[i])]) {
              seed[j] = !(matches[j] = seed[j]);
            }
          }
        });
      });
    }

    /**
     * Checks a node for validity as a Sizzle context
     * @param {Element|Object=} context
     * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
     */
    function testContext(context) {
      return context && typeof context.getElementsByTagName !== strundefined && context;
    }

    // Expose support vars for convenience
    support = Sizzle.support = {};

    /**
     * Detects XML nodes
     * @param {Element|Object} elem An element or a document
     * @returns {Boolean} True iff elem is a non-HTML XML node
     */
    isXML = Sizzle.isXML = function (elem) {
      // documentElement is verified for cases where it doesn't yet exist
      // (such as loading iframes in IE - #4833)
      var documentElement = elem && (elem.ownerDocument || elem).documentElement;
      return documentElement ? documentElement.nodeName !== "HTML" : false;
    };

    /**
     * Sets document-related variables once based on the current document
     * @param {Element|Object} [doc] An element or document object to use to set the document
     * @returns {Object} Returns the current document
     */
    setDocument = Sizzle.setDocument = function (node) {
      var hasCompare,
        doc = node ? node.ownerDocument || node : preferredDoc,
        parent = doc.defaultView;

      function getTop(win) {
        // Edge throws a lovely Object expected if you try to get top on a detached reference see #2642
        try {
          return win.top;
        } catch (ex) {
          // Ignore
        }

        return null;
      }

      // If no document and documentElement is available, return
      if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {
        return document;
      }

      // Set our document
      document = doc;
      docElem = doc.documentElement;

      // Support tests
      documentIsHTML = !isXML(doc);

      // Support: IE>8
      // If iframe document is assigned to "document" variable and if iframe has been reloaded,
      // IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
      // IE6-8 do not support the defaultView property so parent will be undefined
      if (parent && parent !== getTop(parent)) {
        // IE11 does not have attachEvent, so all must suffer
        if (parent.addEventListener) {
          parent.addEventListener("unload", function () {
            setDocument();
          }, false);
        } else if (parent.attachEvent) {
          parent.attachEvent("onunload", functionêïKv\ŸÿôzŞ“gş¿/¿3çíû¹ÑY²ûü®_ï}Î—™œ÷Ë;{ëùgñõÃ{»åïıëg­ÿïœyÊ/ÿÜ3ã¶-ö÷÷çÿ«y?óßßÿäİõ¯®x•Ô÷ÿlëÏûËØy±½¢ş^İ¾‰õş™µ¯ÅÚuÿ»´}ÿñºcû ’Ê$`g´‰¢$…(FĞæDÑ Âká’-ÂP¢;?æ›Ù—H„ğÑƒfyš"ÅDûë‚8N	C2€t ÀÄG¬0IB JQÁÀ!Lh¹ )aCs©! Yx(—„”¢¢)-(1ÄÈ!}JD1ä9XÉÚlŠ@-. K€`Q+˜8Z ŒÜ
D"…04`Q†&°"ã sFp-€„BŠÔ>WÁ9dL#1ûTeÑ„â-mch?!™ €hW‘a‚ ¸;šà¶U!ôßøhª€ÁÃ˜7lkC
„0‰sùLèe#àÀ=jş­>ÿ_ß·^;&ş¾òş*ÑsMóÓßwØ=zÿTÀuußÛı×[`Ü{¤•¶·ßğöwoÿcÿË¼åËjëıc[WÃÊyßñu”]®3şÓå»êu×©Ëö¿-ßfçw†àê‡õ?Ö7ÙßGóÉËçC®½§ÓlíëÏÿşß÷|ÍG=T#“LtØÑtM/Kp	Aé!"µ
‡õ €¬D…=æ"ák“ Ô"àceO$HÜè+AÁF%°9 >„jâ4+¥é°t`Á? N™İC¾H¨&|3hƒA¤´(ä 0µ|€ÌÓd$°˜•ñØøûÎÅ÷±•±Çq0÷¼í²Ö7¹-=–×ÓÆÃ_yç½Î¿_ùşo¿¾¿ó¹‹ùö»õÿÿÙïeZ#İª¾wÎr¬æƒ'¿«Oíı¿ï—ŸnŞ8·Ÿÿlòø¿nÿßußö½ø½÷üı‰°ÆıòıîşıÖûú¿·Æ{ÒùyuWşw8¶zï|ù^Éø¦·ôMßîû_Ü|/üõ³¾ıÄß‹o¦h½ı9êê=ŒD×Ş™ıı-æúzŞ~ëßù=ûç•ÿÜ}õó¯ºòşÏVÿÍÜÿù>£Çmå'æ½¿?òŞ‘=·ÿ“~Ûÿs/¤}ÿÿœÿî®‹«ZWZŞû÷ãäW¬¿¯÷ÿ÷•Ğ‰&Â Tº—²è
ØrDqŠ"SB(b6¨Å”ƒã Ü	¥2!¤D‘Ñ>‹9Î–
…F"¥,mğ À’F…%“”$­†DhÄÕ0UA˜@šPåH „&¦Ğ±Mˆ¨Qb!CôS)€@|Mo¼ßz†0¼½·ËÙ¯æû÷y½±|`˜7Úï‡š½×=<ñ}ªÚíßˆû÷¼û÷1±ï_¸¾ß¶ö‰­.éºúæ2©ÿÃö˜¾ûÎßîÿ6åì÷ë?ÿÿ÷ô«-ÿ½Xçoëş¯Ş×½ıóøM{·_ôŞª®Å÷ß{å2¶Î³ß}Ÿ³Ë"&d&VEÆ IÈ2¢â‚ÔP‰Là É¸ QhI'hGk”®âÇI@£dQÁò¢aÄubõı’‰dÊ/€H$Ÿ€Bl€W7àÄ§B©Z,àdºj£dC«¡†apBàä' £šÀƒ
‘ì6'‘ <¹AØJ|ÛI‰L|"B	¨ëòS  &&Îrú`6‹mQì‚Z’º‚`HR&ácZ‹’A›Cæ'|	 j0A2JbDÃÀ›ÉÛ$5a•™šÜÖGf+„¼˜… #”K r  ¦ ["
)‡‡p7ş>ï>ısx*{åÎßÌ¯5Ëa×ÿûëoOÿ—eÿı›ÿoÛåÇ{ÛûOĞo¯+9n?ÚÙÛû»·›ÿGïÿúÿùû½¸·úÛªßÜí?=ÿîªæçúPoüñİ97ªrñ4¾ëJ÷=æ¿÷~h~ÔîódÜğºÚØÔŞÎì/hHLA˜Äf2—|@bY2Pğƒ­Å© ú€‹©Q’…jrÂSU-!$­±â6@šÛXåÜ…KSˆ°“Hp±Á,†ö2Ë$#,* À@·M×R¤ğ.º‚œ><[?ã_ôÿãÍşûÖßÕã¦öçv÷Õß¯¯ÿ?íSëìu.­/±ßı¼“3û¯ı‰‰ù??ş}¯úİÛ¿>œİI÷İÿ|ùÿ¼Ÿ»yw«{Ôÿ°Xí»Øÿü^ùŞ{ïï‰cÿ¯âÑ»»øñÂõ}ÜÏ»ŒO7³ıNOÉuÏç;ÿ>¼¬O¼çnöå¿½ï—¥¸ßÿoíîÚŞûwvM®ıİ÷~üîö7úÏ÷g?×Góÿwÿ¬»õÿ¾²;½÷ï}¦ıò]éóúøê<Êÿñmn×ùO÷ß”ÿ³=3÷l÷ÿÎÏrõ)œ®oyüéßØ7¯>øï-’ôKøê·Ûo¿ßÜş»ÿO®Ô3(bŒH]ˆ+è„DHiô) @?ó*0
s
FHRP´ €IaAÃÉu\ÅLò 0ŠÙÃ„©ÂiÉ‚h
úÄ2HhB
AƒÄ8¥0Ô…„ĞÁØß8!,,€põ°u*9JM “¹ª'¶`l!_ûmÛùòs­®ÿ&ıĞÛ¨ÿ÷½ß/}n´×®í÷U_÷j×ËºÃûœ¯÷ê÷n€­òç¾÷'=6¿z>³ÿÛ¿ğëÛş|ÏÕë÷úO¼¦ÓŞ÷ÿ}]Óıßúfßj¾ı}{­è/Nçıo­ùcûÒ¹şõî˜ã`×û}  Y-˜*€–„Ãnú„âPHa™™$–@•ù1w9oà‘ƒAÀ™P#P ™$³£¬ÑtvW$\$€Q€Æ"»p«¦ŠFW1±^ ú‡…&€#ÀAè"U ATÀGÙ!ADP  &€iä¢–N#xµ 4”	Q$¡Ì `QÿÀŸÀ˜ˆ N‡ÀS¶L£’@µT¢£»+á³òÜŸµ0	‡A.pÆ×Qî¾4T4)FVêÓ†"ğB¢‚Àj`¨TppíBí )HÌËV›À†Ê$uÏlZ9×$h	©·¢IEµöúõFìë¼€²¡Ö}ï6ÿr©¨3íëò›ı­ÿóµûkş+õ_õÃgùıï£7Ü¶ş¼²ßıá¯–é<¯¿œ{caÿÛ[ÕÚßúóÿÿd÷qU|¨Züÿj{òÖ|oæ{¸å—ñ¼zî{ş>_>ôùw¾õëøşú%L7ŞşçÀUf• Úugå˜	Ñ 9 QÅ¨é shS°hHÀƒ¨… Ú@°R©’S4P¶öT9ä æyŒ
HøÃfH¾4YğT2pºú¦ô pbeÎpe$$tt“4 ø¤BA0'0ovAJnb‚B	’¦ä'^d<ŞUílß¯îµWZ\ÿdëÿßç_EşµmïÿöN´ººwş·ãùùê×ÙîíğŸ²ã}÷[Ÿ¤ÿ?Ë*ÿï_¯Fó¿Èöº_²¾×´7×÷ß/ÿõoÚtÿ7>½3MO‹o}Û¯õoáoö.“^\µ¿¹œû/ºŸ¿ÿ½î?Øu¦Rº™ac+Àæ³Øvï_şû]ÕÍé\}¿Å“ÕîkgûßŸúı3ğ;œê”÷uvÅÎwë®rîOÿ¹‡õòò]}ÿÿrúºøıŞï­5Ÿı›õõû¸çØlw¡ü?§Ş•F§ËËüÿ;\½Vsw¿KıŞŞ÷õ[WV=ö{ÃzÌàRVZ°4–èD_”€T¨ĞQÅL‹D=’ÔUE çÁd
N˜P!›n
L¼*&N?°&$I„áBÀ†n mÒÄ@QÂ
 @@h5}Ş¶¬" 9Df‡€Q»4‘gŠ$0KX‡$Ù‘ïÃíÄÒ7×ÛİÊÉüjq·üßúğ.Ñ<ªOÏ°Ã{_ÿ~Í»×ºhUÛòù›£ø^}½ééwıÍÏ¬üİo—´rúÃİ½ï÷SßæÆuÿñÚifïëŸÿÿ=º_?·õ9ğ/çvsûıZÎYùßş_n§ûíİî^bÏîç{Õ]úcî… c@Aâ|* 2F4¥H EYKö±‰-KJ$7!3`$‘Ë.d=]Zğsğ$^ åA&F`†5­¬(+€)	°Ä@œˆ¨JÈ¬ˆ$IàR„,‡¡iˆ•]5„œ”¥£—‘·$ÀÉÂšØ‹%WdJ"D4:d°$fİd(ÉR…d&ƒ†äu»7#$0/›¦Õ+€Y¶È#Á`"ÆÖŒ€ãÄhÈ‰ôu>²lWXÈ¿@`„&‹Pß°¢£áÈ"xĞ@…ñº ‹8øI0qŒÃ’|8áh¥Ù)gäíI5Rî¾àçÅnúû¾×îúÏofúyîÿŸ~5öó'>ùz’¾v¨ë··úyşËõ+}¯şşn½_}¿s¯^Oşgİ×á/Åïßõ®şä—ıİo¿ØûÜ×»«½ùv~ş%V¾·õyÃ¿_:²Ùï÷wİÜ5»¼ûÿßŠ‘ıµ÷åFíúÚç@1Kä#˜Ÿ} ’?hN ',i&+2•5C° BÀk o¸HD’àA ãp	GgD§ „@Î@ç€G8Ç¸dB z$Å“P‰‹bÄÄ‡ ;  ßyŸµ8 t%lb¸`a’XÓO ‚B˜¥\åDˆ•ñÿ†ÿ|óõ¼; %;êğ«VìÏ•<ÿÖç¤şş¾ôõÎœ÷Ş1È•·¿'Ãİ»Gûáİãö§f…ô÷ş·÷OØïßıùŞ>Ì¥ì~oGgş«˜ÿ÷3çôgÒÃ	ûwœ¹šïøvëb/œş/ÿ–¿êÿOßÏ-›?×ÿùÛ½{-&ç:]¿?'¶oïÌkıÚ×²›×¬÷O¾Û·$ÿNã™±5_h¿ßmŸ]İşÿÙ·İª±¼U+öŸïòìhü¬¿ÏJD¥j^İ¿¾ñ#÷şÿ_R}wvòÿ™£ßuwç½Ïğ=Íî?­ÿ×í¸~™§ß­µÔt§ë»7Êm;ÜO[óÿ!A$À N3r`LAÑ^pFD b@«GÃ"É?ÃU@4¤Ğ!¤PCB§@;OŠœWd‹B·K¤ ñ„&S@‘ *œª(¬hõt˜‚¤‡!(„0’q!ñç©ãå”7"(‘Q,²™.ÁAÉÍ40         // Select is set to empty string on purpose
          // This is to test IE's treatment of not explicitly
          // setting a boolean content attribute,
          // since its presence should be enough
          // http://bugs.jquery.com/ticket/12359
          div.innerHTML = "<select msallowcapture=''><option selected=''></option></select>";

          // Support: IE8, Opera 11-12.16
          // Nothing should be selected when empty strings follow ^= or $= or *=
          // The test attribute must be unknown in Opera but "safe" for WinRT
          // http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
          if (div.querySelectorAll("[msallowcapture^='']").length) {
            rbuggyQSA.push("[*^$]=" + whitespace + "*(?:''|\"\")");
          }

          // Support: IE8
          // Boolean attributes and "value" are not treated correctly
          if (!div.querySelectorAll("[selected]").length) {
            rbuggyQSA.push("\\[" + whitespace + "*(?:value|" + booleans + ")");
          }

          // Webkit/Opera - :checked should return selected option elements
          // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
          // IE8 throws error here and will not see later tests
          if (!div.querySelectorAll(":checked").length) {
            rbuggyQSA.push(":checked");
          }
        });

        assert(function (div) {
          // Support: Windows 8 Native Apps
          // The type and name attributes are restricted during .innerHTML assignment
          var input = doc.createElement("input");
          input.setAttribute("type", "hidden");
          div.appendChild(input).setAttribute("name", "D");

          // Support: IE8
          // Enforce case-sensitivity of name attribute
          if (div.querySelectorAll("[name=d]").length) {
            rbuggyQSA.push("name" + whitespace + "*[*^$|!~]?=");
          }

          // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
          // IE8 throws error here and will not see later tests
          if (!div.querySelectorAll(":enabled").length) {
            rbuggyQSA.push(":enabled", ":disabled");
          }

          // Opera 10-11 does not throw on post-comma invalid pseudos
          div.querySelectorAll("*,:x");
          rbuggyQSA.push(",.*:");
        });
      }

      if ((support.matchesSelector = rnative.test((matches = docElem.matches ||
        docElem.webkitMatchesSelector ||
        docElem.mozMatchesSelector ||
        docElem.oMatchesSelector ||
        docElem.msMatchesSelector)))) {

        assert(function (div) {
          // Check to see if it's possible to do matchesSelector
          // on a disconnected node (IE 9)
          support.disconnectedMatch = matches.call(div, "div");

          // This should fail with an exception
          // Gecko does not error, returns false instead
          matches.call(div, "[s!='']:x");
          rbuggyMatches.push("!=", pseudos);
        });
      }

      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join("|"));
      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join("|"));

      /* Contains
      ---------------------------------------------------------------------- */
      hasCompare = rnative.test(docElem.compareDocumentPosition);

      // Element contains another
      // Purposefully does not implement inclusive descendent
      // As in, an element does not contain itself
      contains = hasCompare || rnative.test(docElem.contains) ?
        function (a, b) {
          var adown = a.nodeType === 9 ? a.documentElement : a,
            bup = b && b.parentNode;
          return a === bup || !!(bup && bup.nodeType === 1 && (
            adown.contains ?
              adown.contains(bup) :
              a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16
          ));
        } :
        function (a, b) {
          if (b) {
            while ((b = b.parentNode)) {
              if (b === a) {
                return true;
              }
            }
          }
          return false;
        };

      /* Sorting
      ---------------------------------------------------------------------- */

      // Document order sorting
      sortOrder = hasCompare ?
        function (a, b) {

          // Flag for duplicate removal
          if (a === b) {
            hasDuplicate = true;
            return 0;
          }

          // Sort on method existence if only one input has compareDocumentPosition
          var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
          if (compare) {
            return compare;
          }

          // Calculate position if both inputs belong to the same document
          compare = (a.ownerDocument || a) === (b.ownerDocument || b) ?
            a.compareDocumentPosition(b) :

            // Otherwise we know they are disconnected
            1;

          // Disconnected nodes
          if (compare & 1 ||
            (!support.sortDetached && b.compareDocumentPosition(a) === compare)) {

            // Choose the first element that is related to our preferred document
            if (a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {
              return -1;
            }
            if (b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {
              return 1;
            }

            // Maintain original order
            return sortInput ?
              (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) :
              0;
          }

          return compare & 4 ? -1 : 1;
        } :
        function (a, b) {
          // Exit early if the nodes are identical
          if (a === b) {
            hasDuplicate = true;
            return 0;
          }

          var cur,
            i = 0,
            aup = a.parentNode,
            bup = b.parentNode,
            ap = [a],
            bp = [b];

          // Parentless nodes are either documents or disconnected
          if (!aup || !bup) {
            return a === doc ? -1 :
              b === doc ? 1 :
                aup ? -1 :
                  bup ? 1 :
                    sortInput ?
                      (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) :
                      0;

            // If the nodes are siblings, we can do a quick check
          } else if (aup === bup) {
            return siblingCheck(a, b);
          }

          // Otherwise we need full lists of their ancestors for comparison
          cur = a;
          while ((cur = cur.parentNode)) {
            ap.unshift(cur);
          }
          cur = b;
          while ((cur = cur.parentNode)) {
            bp.unshift(cur);
          }

          // Walk down the tree looking for a discrepancy
          while (ap[i] === bp[i]) {
            i++;
          }

          return i ?
            // Do a sibling check if the nodes have a common ancestor
            siblingCheck(ap[i], bp[i]) :

            // Otherwise nodes in our document sort first
            ap[i] === preferredDoc ? -1 :
              bp[i] === preferredDoc ? 1 :
                0;
        };

      return doc;
    };

    Sizzle.matches = function (expr, elements) {
      return Sizzle(expr, null, null, elements);
    };

    Sizzle.matchesSelector = function (elem, expr) {
      // Set document vars if needed
      if ((elem.ownerDocument || elem) !== document) {
        setDocument(elem);
      }

      // Make sure that attribute selectors are quoted
      expr = expr.replace(rattributeQuotes, "='$1']");

      if (support.matchesSelector && documentIsHTML &&
        (!rbuggyMatches || !rbuggyMatches.test(expr)) &&
        (!rbuggyQSA || !rbuggyQSA.test(expr))) {

        try {
          var ret = matches.call(elem, expr);

          // IE 9's matchesSelector returns false on disconnected nodes
          if (ret || support.disconnectedMatch ||
            // As well, disconnected nodes are said to be in a document
            // fragment in IE 9
            elem.document && elem.document.nodeType !== 11) {
            return ret;
          }
        } catch (e) { }
      }

      return Sizzle(expr, document, null, [elem]).length > 0;
    };

    Sizzle.contains = function (context, elem) {
      // Set document vars if needed
      if ((context.ownerDocument || context) !== document) {
        setDocument(context);
      }
      return contains(context, elem);
    };

    Sizzle.attr = function (elem, name) {
      // Set document vars if needed
      if ((elem.ownerDocument || elem) !== document) {
        setDocument(elem);
      }

      var fn = Expr.attrHandle[name.toLowerCase()],
        // Don't get fooled by Object.prototype properties (jQuery #13807)
        val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ?
          fn(elem, name, !documentIsHTML) :
          undefined;

      return val !== undefined ?
        val :
        support.attributes || !documentIsHTML ?
          elem.getAttribute(name) :
          (val = elem.getAttributeNode(name)) && val.specified ?
            val.value :
            null;
    };

    Sizzle.error = function (msg) {
      throw new Error("Syntax error, unrecognized expression: " + msg);
    };

    /**
     * Document sorting and removing duplicates
     * @param {ArrayLike} results
     */
    Sizzle.uniqueSort = function (results) {
      var elem,
        duplicates = [],
        j = 0,
        i = 0;

      // Unless we *know* we can detect duplicates, assume their presence
      hasDuplicate = !support.detectDuplicates;
      sortInput = !support.sortStable && results.slice(0);
      results.sort(sortOrder);

      if (hasDuplicate) {
        while ((elem = results[i++])) {
          if (elem === results[i]) {
            j = duplicates.push(i);
          }
        }
        while (j--) {
          results.splice(duplicates[j], 1);
        }
      }

      // Clear input after sorting to release objects
      // See https://github.com/jquery/sizzle/pull/225
      sortInput = null;

      return results;
    };

    /**
     * Utility function for retrieving the text value of an array of DOM nodes
     * @param {Array|Element} elem
     */
    getText = Sizzle.getText = function (elem) {
      var node,
        ret = "",
        i = 0,
        nodeType = elem.nodeType;

      if (!nodeType) {
        // If no nodeType, this is expected to be an array
        while ((node = elem[i++])) {
          // Do not traverse comment nodes
          ret += getText(node);
        }
      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {
        // Use textContent for elements
        // innerText usage removed for consistency of new lines (jQuery #11153)
        if (typeof elem.textContent === "string") {
          return elem.textContent;
        } else {
          // Traverse its children
          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
            ret += getText(elem);
          }
        }
      } else if (nodeType === 3 || nodeType === 4) {
        return elem.nodeValue;
      }
      // Do not include comment or processing instruction nodes

      return ret;
    };

    Expr = Sizzle.selectors = {

      // Can be adjusted by the user
      cacheLength: 50,

      createPseudo: markFunction,

      match: matchExpr,

      attrHandle: {},

      find: {},

      relative: {
        ">": { dir: "parentNode", first: true },
        " ": { dir: "parentNode" },
        "+": { dir: "previousSibling", first: true },
        "~": { dir: "previousSibling" }
      },

      preFilter: {
        "ATTR": function (match) {
          match[1] = match[1].replace(runescape, funescape);

          // Move the given value to match[3] whether quoted or unquoted
          match[3] = (match[3] || match[4] || match[5] || "").replace(runescape, funescape);

          if (match[2] === "~=") {
            match[3] = " " + match[3] + " ";
          }

          return match.slice(0, 4);
        },

        "CHILD": function (match) {
          /* matches from matchExpr["CHILD"]
            1 type (only|nth|...)
            2 what (child|of-type)
            3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
            4 xn-component of xn+y argument ([+-]?\d*n|)
            5 sign of xn-component
            6 x of xn-component
            7 sign of y-component
            8 y of y-component
          */
          match[1] = match[1].toLowerCase();

          if (match[1].slice(0, 3) === "nth") {
            // nth-* requires argument
            if (!match[3]) {
              Sizzle.error(match[0]);
            }

            // numeric x and y parameters for Expr.filter.CHILD
            // remember that false/true cast respectively to 0/1
            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === "even" || match[3] === "odd"));
            match[5] = +((match[7] + match[8]) || match[3] === "odd");

            // other types prohibit arguments
          } else if (match[3]) {
            Sizzle.error(match[0]);
          }

          return match;
        },

        "PSEUDO": function (match) {
          var excess,
            unquoted = !match[6] && match[2];

          if (matchExpr["CHILD"].test(match[0])) {
            return null;
          }

          // Accept quoted arguments as-is
          if (match[3]) {
            match[2] = match[4] || match[5] || "";

            // Strip excess characters from unquoted arguments
          } else if (unquoted && rpseudo.test(unquoted) &&
            // Get excess from tokenize (recursively)
            (excess = tokenize(unquoted, true)) &&
            // advance to the next closing parenthesis
            (excess = unquoted.indexOf(")", unquoted.length - excess) - unquoted.length)) {

            // excess is a negative index
            match[0] = match[0].slice(0, excess);
            match[2] = unquoted.slice(0, excess);
          }

          // Return only captures needed by the pseudo filter method (type and argument)
          return match.slice(0, 3);
        }
      },

      filter: {

        "TAG": function (nodeNameSelector) {
          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();
          return nodeNameSelector === "*" ?
            function () { return true; } :
            function (elem) {
              return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
            };
        },

        "CLASS": function (className) {
          var pattern = classCache[className + " "];

          return pattern ||
            (pattern = new RegExp("(^|" + whitespace + ")" + className + "(" + whitespace + "|$)")) &&
            classCache(className, function (elem) {
              return pattern.test(typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "");
            });
        },

        "ATTR": function (name, operator, check) {
          return function (elem) {
            var result = Sizzle.attr(elem, name);

            if (result == null) {
              return operator === "!=";
            }
            if (!operator) {
              return true;
            }

            result += "";

            return operator === "=" ? result === check :
              operator === "!=" ? result !== check :
                operator === "^=" ? check && result.indexOf(check) === 0 :
                  operator === "*=" ? check && result.indexOf(check) > -1 :
                    operator === "$=" ? check && result.slice(-check.length) === check :
                      operator === "~=" ? (" " + result + " ").indexOf(check) > -1 :
                        operator === "|=" ? result === check || result.slice(0, check.length + 1) === check + "-" :
                          false;
          };
        },

        "CHILD": function (type, what, argument, first, last) {
          var simple = type.slice(0, 3) !== "nth",
            forward = type.slice(-4) !== "last",
            ofType = what === "of-type";

          return first === 1 && last === 0 ?

            // Shortcut for :nth-*(n)
            function (elem) {
              return !!elem.parentNode;
            } :

            function (elem, context, xml) {
              var cache, outerCache, node, diff, nodeIndex, start,
                dir = simple !== forward ? "nextSibling" : "previousSibling",
                parent = elem.parentNode,
                name = ofType && elem.nodeName.toLowerCase(),
                useCache = !xml && !ofType;

              if (parent) {

                // :(first|last|only)-(child|of-type)
                if (simple) {
                  while (dir) {
                    node = elem;
                    while ((node = node[dir])) {
                      if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {
                        return false;
                      }
                    }
                    // Reverse direction for :only-* (if we haven't yet done so)
                    start = dir = type === "only" && !start && "nextSibling";
                  }
                  return true;
                }

                start = [forward ? parent.firstChild : parent.lastChild];

                // non-xml :nth-child(...) stores cache data on `parent`
                if (forward && useCache) {
                  // Seek `elem` from a previously-cached index
                  outerCache = parent[expando] || (parent[expando] = {});
                  cache = outerCache[type] || [];
                  nodeIndex = cache[0] === dirruns && cache[1];
                  diff = cache[0] === dirruns && cache[2];
                  node = nodeIndex && parent.childNodes[nodeIndex];

                  while ((node = ++nodeIndex && node && node[dir] ||

                    // Fallback to seeking `elem` from the start
                    (diff = nodeIndex = 0) || start.pop())) {

                    // When found, cache indexes on `parent` and break
                    if (node.nodeType === 1 && ++diff && node === elem) {
                      outerCache[type] = [dirruns, nodeIndex, diff];
                      break;
                    }
                  }

                  // Use previously-cached element index if available
                } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {
                  diff = cache[1];

                  // xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
                } else {
                  // Use the same loop as above to seek `elem` from the start
                  while ((node = ++nodeIndex && node && node[dir] ||
                    (diff = nodeIndex = 0) || start.pop())) {

                    if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {
                      // Cache the index of each encountered element
                      if (useCache) {
                        (node[expando] || (node[expando] = {}))[type] = [dirruns, diff];
                      }

                      if (node === elem) {
                        break;
                      }
                    }
                  }
                }

                // Incorporate the offset, then check against cycle size
                diff -= last;
                return diff === first || (diff % first === 0 && diff / first >= 0);
              }
            };
        },

        "PSEUDO": function (pseudo, argument) {
          // pseudo-class names are case-insensitive
          // http://www.w3.org/TR/selectors/#pseudo-classes
          // Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
          // Remember that setFilters inherits from pseudos
          var args,
            fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] ||
              Sizzle.error("unsupported pseudo: " + pseudo);

          // The user may use createPseudo to indicate that
          // arguments are needed to create the filter function
          // just as Sizzle does
          if (fn[expando]) {
            return fn(argument);
          }

          // But maintain support for old signatures
          if (fn.length > 1) {
            args = [pseudo, pseudo, "", argument];
            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ?
              markFunction(function (seed, matches) {
                var idx,
                  matched = fn(seed, argument),
                  i = matched.length;
                while (i--) {
                  idx = indexOf.call(seed, matched[i]);
                  seed[idx] = !(matches[idx] = matched[i]);
                }
              }) :
              function (elem) {
                return fn(elem, 0, args);
              };
          }

          return fn;
        }
      },

      pseudos: {
        // Potentially complex pseudos
        "not": markFunction(function (selector) {
          // Trim the selector passed to compile
          // to avoid treating leading and trailing
          // spaces as combinators
          var input = [],
            results = [],
            matcher = compile(selector.replace(rtrim, "$1"));

          return matcher[expando] ?
            markFunction(function (seed, matches, context, xml) {
              var elem,
                unmatched = matcher(seed, null, xml, []),
                i = seed.length;

              // Match elements unmatched by `matcher`
              while (i--) {
                if ((elem = unmatched[i])) {
                  seed[i] = !(matches[i] = elem);
                }
              }
            }) :
            function (elem, context, xml) {
              input[0] = elem;
              matcher(input, null, xml, results);
              return !results.pop();
            };
        }),

        "has": markFunction(function (selector) {
          return function (elem) {
            return Sizzle(selector, elem).length > 0;
          };
        }),

        "contains": markFunction(function (text) {
          text = text.replace(runescape, funescape);
          return function (elem) {
            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;
          };
        }),

        // "Whether an element is represented by a :lang() selector
        // is based solely on the element's language value
        // being equal to the identifier C,
        // or beginning with the identifier C immediately followed by "-".
        // The matching of C against the element's language value is performed case-insensitively.
        // The identifier C does not have to be a valid language name."
        // http://www.w3.org/TR/selectors/#lang-pseudo
        "lang": markFunction(function (lang) {
          // lang value must be a valid identifier
          if (!ridentifier.test(lang || "")) {
            Sizzle.error("unsupported lang: " + lang);
          }
          lang = lang.replace(runescape, funescape).toLowerCase();
          return function (elem) {
            var elemLang;
            do {
              if ((elemLang = documentIsHTML ?
                elem.lang :
                elem.getAttribute("xml:lang") || elem.getAttribute("lang"))) {

                elemLang = elemLang.toLowerCase();
                return elemLang === lang || elemLang.indexOf(lang + "-") === 0;
              }
            } while ((elem = elem.parentNode) && elem.nodeType === 1);
            return false;
          };
        }),

        // Miscellaneous
        "target": function (elem) {
          var hash = window.location && window.location.hash;
          return hash && hash.slice(1) === elem.id;
        },

        "root": function (elem) {
          return elem === docElem;
        },

        "focus": function (elem) {
          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
        },

        // Boolean properties
        "enabled": function (elem) {
          return elem.disabled === false;
        },

        "disabled": function (elem) {
          return elem.disabled === true;
        },

        "checked": function (elem) {
          // In CSS3, :checked should return both checked and selected elements
          // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
          var nodeName = elem.nodeName.toLowerCase();
          return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
        },

        "selected": function (elem) {
          // Accessing this property makes selected-by-default
          // options in Safari work properly
          if (elem.parentNode) {
            elem.parentNode.selectedIndex;
          }

          return elem.selected === true;
        },

        // Contents
        "empty": function (elem) {
          // http://www.w3.org/TR/selectors/#empty-pseudo
          // :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
          //   but not by others (comment: 8; processing instruction: 7; etc.)
          // nodeType < 6 works because attributes (2) do not appear as children
          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
            if (elem.nodeType < 6) {
              return false;
            }
          }
          return true;
        },

        "parent": function (elem) {
          return !Expr.pseudos["empty"](elem);
        },

        // Element/input types
        "header": function (elem) {
          return rheader.test(elem.nodeName);
        },

        "input": function (elem) {
          return rinputs.test(elem.nodeName);
        },

        "button": function (elem) {
          var name = elem.nodeName.toLowerCase();
          return name === "input" && elem.type === "button" || name === "button";
        },

        "text": function (elem) {
          var attr;
          return elem.nodeName.toLowerCase() === "input" &&
            elem.type === "text" &&

            // Support: IE<8
            // New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
            ((attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text");
        },

        // Position-in-collection
        "first": createPositionalPseudo(function () {
          return [0];
        }),

        "last": createPositionalPseudo(function (matchIndexes, length) {
          return [length - 1];
        }),

        "eq": createPositionalPseudo(function (matchIndexes, length, argument) {
          return [argument < 0 ? argument + length : argument];
        }),

        "even": createPositionalPseudo(function (matchIndexes, length) {
          var i = 0;
          for (; i < length; i += 2) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),

        "odd": createPositionalPseudo(function (matchIndexes, length) {
          var i = 1;
          for (; i < length; i += 2) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),

        "lt": createPositionalPseudo(function (matchIndexes, length, argument) {
          var i = argument < 0 ? argument + length : argument;
          for (; --i >= 0;) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),

        "gt": createPositionalPseudo(function (matchIndexes, length, argument) {
          var i = argument < 0 ? argument + length : argument;
          for (; ++i < length;) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        })
      }
    };

    Expr.pseudos["nth"] = Expr.pseudos["eq"];

    // Add button/input type pseudos
    for (i in { radio: true, checkbox: true, file: true, password: true, image: true }) {
      Expr.pseudos[i] = createInputPseudo(i);
    }
    for (i in { submit: true, reset: true }) {
      Expr.pseudos[i] = createButtonPseudo(i);
    }

    // Easy API for creating new setFilters
    function setFilters() { }
    setFilters.prototype = Expr.filters = Expr.pseudos;
    Expr.setFilters = new setFilters();

    tokenize = Sizzle.tokenize = function (selector, parseOnly) {
      var matched, match, tokens, type,
        soFar, groups, preFilters,
        cached = tokenCache[selector + " "];

      if (cached) {
        return parseOnly ? 0 : cached.slice(0);
      }

      soFar = selector;
      groups = [];
      preFilters = Expr.preFilter;

      while (soFar) {

        // Comma and first run
        if (!matched || (match = rcomma.exec(soFar))) {
          if (match) {
            // Don't consume trailing commas as valid
            soFar = soFar.slice(match[0].length) || soFar;
          }
          groups.push((tokens = []));
        }

        matched = false;

        // Combinators
        if ((match = rcombinators.exec(soFar))) {
          matched = match.shift();
          tokens.push({
            value: matched,
            // Cast descendant combinators to space
            type: match[0].replace(rtrim, " ")
          });
          soFar = soFar.slice(matched.length);
        }

        // Filters
        for (type in Expr.filter) {
          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] ||
            (match = preFilters[type](match)))) {
            matched = match.shift();
            tokens.push({
              value: matched,
              type: type,
              matches: match
            });
            soFar = soFar.slice(matched.length);
          }
        }

        if (!matched) {
          break;
        }
      }

      // Return the length of the invalid excess
      // if we're just parsing
      // Otherwise, throw an error or return tokens
      return parseOnly ?
        soFar.length :
        soFar ?
          Sizzle.error(selector) :
          // Cache the tokens
          tokenCache(selector, groups).slice(0);
    };

    function toSelector(tokens) {
      var i = 0,
        len = tokens.length,
        selector = "";
      for (; i < len; i++) {
        selector += tokens[i].value;
      }
      return selector;
    }

    function addCombinator(matcher, combinator, base) {
      var dir = combinator.dir,
        checkNonElements = base && dir === "parentNode",
        doneName = done++;

      return combinator.first ?
        // Check against closest ancestor/preceding element
        function (elem, context, xml) {
          while ((elem = elem[dir])) {
            if (elem.nodeType === 1 || checkNonElements) {
              return matcher(elem, context, xml);
            }
          }
        } :

        // Check against all ancestor/preceding elements
        function (elem, context, xml) {
          var oldCache, outerCache,
            newCache = [dirruns, doneName];

          // We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
          if (xml) {
            while ((elem = elem[dir])) {
              if (elem.nodeType === 1 || checkNonElements) {
                if (matcher(elem, context, xml)) {
                  return true;
                }
              }
            }
          } else {
            while ((elem = elem[dir])) {
              if (elem.nodeType === 1 || checkNonElements) {
                outerCache = elem[expando] || (elem[expando] = {});
                if ((oldCache = outerCache[dir]) &&
                  oldCache[0] === dirruns && oldCache[1] === doneName) {

                  // Assign to newCache so results back-propagate to previous elements
                  return (newCache[2] = oldCache[2]);
                } else {
                  // Reuse newcache so results back-propagate to previous elements
                  outerCache[dir] = newCache;

                  // A match means we're done; a fail means we have to keep checking
                  if ((newCache[2] = matcher(elem, context, xml))) {
                    return true;
                  }
                }
              }
            }
          }
        };
    }

    function elementMatcher(matchers) {
      return matchers.length > 1 ?
        function (elem, context, xml) {
          var i = matchers.length;
          while (i--) {
            if (!matchers[i](elem, context, xml)) {
              return false;
            }
          }
          return true;
        } :
        matchers[0];
    }

    function multipleContexts(selector, contexts, results) {
      var i = 0,
        len = contexts.length;
      for (; i < len; i++) {
        Sizzle(selector, contexts[i], results);
      }
      return results;
    }

    function condense(unmatched, map, filter, context, xml) {
      var elem,
        newUnmatched = [],
        i = 0,
        len = unmatched.length,
        mapped = map != null;

      for (; i < len; i++) {
        if ((elem = unmatched[i])) {
          if (!filter || filter(elem, context, xml)) {
            newUnmatched.push(elem);
            if (mapped) {
              map.push(i);
            }
          }
        }
      }

      return newUnmatched;
    }

    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
      if (postFilter && !postFilter[expando]) {
        postFilter = setMatcher(postFilter);
      }
      if (postFinder && !postFinder[expando]) {
        postFinder = setMatcher(postFinder, postSelector);
      }
      return markFunction(function (seed, results, context, xml) {
        var temp, i, elem,
          preMap = [],
          postMap = [],
          preexisting = results.length,

          // Get initial elements from seed or context
          elems = seed || multipleContexts(selector || "*", context.nodeType ? [context] : context, []),

          // Prefilter to get matcher input, preserving a map for seed-results synchronization
          matcherIn = preFilter && (seed || !selector) ?
            condense(elems, preMap, preFilter, context, xml) :
            elems,

          matcherOut = matcher ?
            // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
            postFinder || (seed ? preFilter : preexisting || postFilter) ?

              // ...intermediate processing is necessary
              [] :

              // ...otherwise use results directly
              results :
            matcherIn;

        // Find primary matches
        if (matcher) {
          matcher(matcherIn, matcherOut, context, xml);
        }

        // Apply postFilter
        if (postFilter) {
          temp = condense(matcherOut, postMap);
          postFilter(temp, [], context, xml);

          // Un-match failing elements by moving them back to matcherIn
          i = temp.length;
          while (i--) {
            if ((elem = temp[i])) {
              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);
            }
          }
        }

        if (seed) {
          if (postFinder || preFilter) {
            if (postFinder) {
              // Get the final matcherOut by condensing this intermediate into postFinder contexts
              temp = [];
              i = matcherOut.length;
              while (i--) {
                if ((elem = matcherOut[i])) {
                  // Restore matcherIn since elem is not yet a final match
                  temp.push((matcherIn[i] = elem));
                }
              }
              postFinder(null, (matcherOut = []), temp, xml);
            }

            // Move matched elements from seed to results to keep them synchronized
            i = matcherOut.length;
            while (i--) {
              if ((elem = matcherOut[i]) &&
                (temp = postFinder ? indexOf.call(seed, elem) : preMap[i]) > -1) {

                seed[temp] = !(results[temp] = elem);
              }
            }
          }

          // Add elements to results, through postFinder if defined
        } else {
          matcherOut = condense(
            matcherOut === results ?
              matcherOut.splice(preexisting, matcherOut.length) :
              matcherOut
          );
          if (postFinder) {
            postFinder(null, results, matcherOut, xml);
          } else {
            push.apply(results, matcherOut);
          }
        }
      });
    }

    function matcherFromTokens(tokens) {
      var checkContext, matcher, j,
        len = tokens.length,
        leadingRelative = Expr.relative[tokens[0].type],
        implicitRelative = leadingRelative || Expr.relative[" "],
        i = leadingRelative ? 1 : 0,

        // The foundational matcher ensures that elements are reachable from top-level context(s)
        matchContext = addCombinator(function (elem) {
          return elem === checkContext;
        }, implicitRelative, true),
        matchAnyContext = addCombinator(function (elem) {
          return indexOf.call(checkContext, elem) > -1;
        }, implicitRelative, true),
        matchers = [function (elem, context, xml) {
          return (!leadingRelative && (xml || context !== outermostContext)) || (
            (checkContext = context).nodeType ?
              matchContext(elem, context, xml) :
              matchAnyContext(elem, context, xml));
        }];

      for (; i < len; i++) {
        if ((matcher = Expr.relative[tokens[i].type])) {
          matchers = [addCombinator(elementMatcher(matchers), matcher)];
        } else {
          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);

          // Return special upon seeing a positional matcher
          if (matcher[expando]) {
            // Find the next relative operator (if any) for proper handling
            j = ++i;
            for (; j < len; j++) {
              if (Expr.relative[tokens[j].type]) {
                break;
              }
            }
            return setMatcher(
              i > 1 && elementMatcher(matchers),
              i > 1 && toSelector(
                // If the preceding token was a descendant combinator, insert an implicit any-element `*`
                tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === " " ? "*" : "" })
              ).replace(rtrim, "$1"),
              matcher,
              i < j && matcherFromTokens(tokens.slice(i, j)),
              j < len && matcherFromTokens((tokens = tokens.slice(j))),
              j < len && toSelector(tokens)
            );
          }
          matchers.push(matcher);
        }
      }

      return elementMatcher(matchers);
    }

    function matcherFromGroupMatchers(elementMatchers, setMatchers) {
      var bySet = setMatchers.length > 0,
        byElement = elementMatchers.length > 0,
        superMatcher = function (seed, context, xml, results, outermost) {
          var elem, j, matcher,
            matchedCount = 0,
            i = "0",
            unmatched = seed && [],
            setMatched = [],
            contextBackup = outermostContext,
            // We must always have either seed elements or outermost context
            elems = seed || byElement && Expr.find["TAG"]("*", outermost),
            // Use integer dirruns iff this is the outermost matcher
            dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
            len = elems.length;

          if (outermost) {
            outermostContext = context !== document && context;
          }

          // Add elements passing elementMatchers directly to results
          // Keep `i` a string if there are no elements so `matchedCount` will be "00" below
          // Support: IE<9, Safari
          // Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
          for (; i !== len && (elem = elems[i]) != null; i++) {
            if (byElement && elem) {
              j = 0;
              while ((matcher = elementMatchers[j++])) {
                if (matcher(elem, context, xml)) {
                  results.push(elem);
                  break;
                }
              }
              if (outermost) {
                dirruns = dirrunsUnique;
              }
            }

            // Track unmatched elements for set filters
            if (bySet) {
              // They will have gone through all possible matchers
              if ((elem = !matcher && elem)) {
                matchedCount--;
              }

              // Lengthen the array for every element, matched or not
              if (seed) {
                unmatched.push(elem);
              }
            }
          }

          // Apply set filters to unmatched elements
          matchedCount += i;
          if (bySet && i !== matchedCount) {
            j = 0;
            while ((matcher = setMatchers[j++])) {
              matcher(unmatched, setMatched, context, xml);
            }

            if (seed) {
              // Reintegrate element matches to eliminate the need for sorting
              if (matchedCount > 0) {
                while (i--) {
                  if (!(unmatched[i] || setMatched[i])) {
                    setMatched[i] = pop.call(results);
                  }
                }
              }

              // Discard index placeholder values to get only actual matches
              setMatched = condense(setMatched);
            }

            // Add matches to results
            push.apply(results, setMatched);

            // Seedless set matches succeeding multiple successful matchers stipulate sorting
            if (outermost && !seed && setMatched.length > 0 &&
              (matchedCount + setMatchers.length) > 1) {

              Sizzle.uniqueSort(results);
            }
          }

          // Override manipulation of globals by nested matchers
          if (outermost) {
            dirruns = dirrunsUnique;
            outermostContext = contextBackup;
          }

          return unmatched;
        };

      return bySet ?
        markFunction(superMatcher) :
        superMatcher;
    }

    compile = Sizzle.compile = function (selector, match /* Internal Use Only */) {
      var i,
        setMatchers = [],
        elementMatchers = [],
        cached = compilerCache[selector + " "];

      if (!cached) {
        // Generate a function of recursive functions that can be used to check each element
        if (!match) {
          match = tokenize(selector);
        }
        i = match.length;
        while (i--) {
          cached = matcherFromTokens(match[i]);
          if (cached[expando]) {
            setMatchers.push(cached);
          } else {
            elementMatchers.push(cached);
          }
        }

        // Cache the compiled function
        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));

        // Save selector and tokenization
        cached.selector = selector;
      }
      return cached;
    };

    /**
     * A low-level selection function that works with Sizzle's compiled
     *  selector functions
     * @param {String|Function} selector A selector or a pre-compiled
     *  selector function built with Sizzle.compile
     * @param {Element} context
     * @param {Array} [results]
     * @param {Array} [seed] A set of elements to match against
     */
    select = Sizzle.select = function (selector, context, results, seed) {
      var i, tokens, token, type, find,
        compiled = typeof selector === "function" && selector,
        match = !seed && tokenize((selector = compiled.selector || selector));

      results = results || [];

      // Try to minimize operations if there is no seed and only one group
      if (match.length === 1) {

        // Take a shortcut and set the context if the root selector is an ID
        tokens = match[0] = match[0].slice(0);
        if (tokens.length > 2 && (token = tokens[0]).type === "ID" &&
          support.getById && context.nodeType === 9 && documentIsHTML &&
          Expr.relative[tokens[1].type]) {

          context = (Expr.find["ID"](token.matches[0].replace(runescape, funescape), context) || [])[0];
          if (!context) {
            return results;

            // Precompiled matchers will still verify ancestry, so step up a level
          } else if (compiled) {
            context = context.parentNode;
          }

          selector = selector.slice(tokens.shift().value.length);
        }

        // Fetch a seed set for right-to-left matching
        i = matchExpr["needsContext"].test(selector) ? 0 : tokens.length;
        while (i--) {
          token = tokens[i];

          // Abort if we hit a combinator
          if (Expr.relative[(type = token.type)]) {
            break;
          }
          if ((find = Expr.find[type])) {
            // Search, expanding context for leading sibling combinators
            if ((seed = find(
              token.matches[0].replace(runescape, funescape),
              rsibling.test(tokens[0].type) && testContext(context.parentNode) || context
            ))) {

              // If seed is empty or no tokens remain, we can return early
              tokens.splice(i, 1);
              selector = seed.length && toSelector(tokens);
              if (!selector) {
                push.apply(results, seed);
                return results;
              }

              break;
            }
          }
        }
      }

      // Compile and execute a filtering function if one is not provided
      // Provide `match` to avoid retokenization if we modified the selector above
      (compiled || compile(selector, match))(
        seed,
        context,
        !documentIsHTML,
        results,
        rsibling.test(selector) && testContext(context.parentNode) || context
      );
      return results;
    };

    // One-time assignments

    // Sort stability
    support.sortStable = expando.split("").sort(sortOrder).join("") === expando;

    // Support: Chrome 14-35+
    // Always assume duplicates if they aren't passed to the comparison function
    support.detectDuplicates = !!hasDuplicate;

    // Initialize against the default document
    setDocument();

    // Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
    // Detached nodes confoundingly follow *each other*
    support.sortDetached = assert(function (div1) {
      // Should return 1, but returns 4 (following)
      return div1.compareDocumentPosition(document.createElement("div")) & 1;
    }
    );

    // Support: IE<8
    // Prevent attribute/property "interpolation"
    // http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
    if (!assert(function (div) {
      div.innerHTML = "<a href='#'></a>";
      return div.firstChild.getAttribute("href") === "#";
    })) {
      addHandle("type|href|height|width", function (elem, name, isXML) {
        if (!isXML) {
          return elem.getAttribute(name, name.toLowerCase() === "type" ? 1 : 2);
        }
      });
    }

    // Support: IE<9
    // Use defaultValue in place of getAttribute("value")
    if (!support.attributes || !assert(function (div) {
      div.innerHTML = "<input/>";
      div.firstChild.setAttribute("value", "");
      return div.firstChild.getAttribute("value") === "";
    })) {
      addHandle("value", function (elem, name, isXML) {
        if (!isXML && elem.nodeName.toLowerCase() === "input") {
          return elem.defaultValue;
        }
      });
    }

    // Support: IE<9
    // Use getAttributeNode to fetch booleans when getAttribute lies
    if (!assert(function (div) {
      return div.getAttribute("disabled") == null;
    })) {
      addHandle(booleans, function (elem, name, isXML) {
        var val;
        if (!isXML) {
          return elem[name] === true ? name.toLowerCase() :
            (val = elem.getAttributeNode(name)) && val.specified ?
              val.value :
              null;
        }
      });
    }

    // EXPOSE
    return Sizzle;
  }
);

/*eslint-enable */

/**
 * Arr.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Array utility class.
 *
 * @private
 * @class tinymce.util.Arr
 */
define(
  'tinymce.core.util.Arr',
  [
  ],
  function () {
    var isArray = Array.isArray || function (obj) {
      return Object.prototype.toString.call(obj) === "[object Array]";
    };

    function toArray(obj) {
      var array = obj, i, l;

      if (!isArray(obj)) {
        array = [];
        for (i = 0, l = obj.length; i < l; i++) {
          array[i] = obj[i];
        }
      }

      return array;
    }

    function each(o, cb, s) {
      var n, l;

      if (!o) {
        return 0;
      }

      s = s || o;

      if (o.length !== undefined) {
        // Indexed arrays, needed for Safari
        for (n = 0, l = o.length; n < l; n++) {
          if (cb.call(s, o[n], n, o) === false) {
            return 0;
          }
        }
      } else {
        // Hashtables
        for (n in o) {
          if (o.hasOwnProperty(n)) {
            if (cb.call(s, o[n], n, o) === false) {
              return 0;
            }
          }
        }
      }

      return 1;
    }

    function map(array, callback) {
      var out = [];

      each(array, function (item, index) {
        out.push(callback(item, index, array));
      });

      return out;
    }

    function filter(a, f) {
      var o = [];

      each(a, function (v, index) {
        if (!f || f(v, index, a)) {
          o.push(v);
        }
      });

      return o;
    }

    function indexOf(a, v) {
      var i, l;

      if (a) {
        for (i = 0, l = a.length; i < l; i++) {
          if (a[i] === v) {
            return i;
          }
        }
      }

      return -1;
    }

    function reduce(collection, iteratee, accumulator, thisArg) {
      var i = 0;

      if (arguments.length < 3) {
        accumulator = collection[0];
      }

      for (; i < collection.length; i++) {
        accumulator = iteratee.call(thisArg, accumulator, collection[i], i);
      }

      return accumulator;
    }

    function findIndex(array, predicate, thisArg) {
      var i, l;

      for (i = 0, l = array.length; i < l; i++) {
        if (predicate.call(thisArg, array[i], i, array)) {
          return i;
        }
      }

      return -1;
    }

    function find(array, predicate, thisArg) {
      var idx = findIndex(array, predicate, thisArg);

      if (idx !== -1) {
        return array[idx];
      }

      return undefined;
    }

    function last(collection) {
      return collection[collection.length - 1];
    }

    return {
      isArray: isArray,
      toArray: toArray,
      each: each,
      map: map,
      filter: filter,
      indexOf: indexOf,
      reduce: reduce,
      findIndex: findIndex,
      find: find,
      last: last
    };
  }
);
/**
 * Tools.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class contains various utlity functions. These are also exposed
 * directly on the tinymce namespace.
 *
 * @class tinymce.util.Tools
 */
define(
  'tinymce.core.util.Tools',
  [
    "tinymce.core.Env",
    "tinymce.core.util.Arr"
  ],
  function (Env, Arr) {
    /**
     * Removes whitespace from the beginning and end of a string.
     *
     * @method trim
     * @param {String} s String to remove whitespace from.
     * @return {String} New string with removed whitespace.
     */
    var whiteSpaceRegExp = /^\s*|\s*$/g;

    function trim(str) {
      return (str === null || str === undefined) ? '' : ("" + str).replace(whiteSpaceRegExp, '');
    }

    /**
     * Checks if a object is of a specific type for example an array.
     *
     * @method is
     * @param {Object} obj Object to check type of.
     * @param {string} type Optional type to check for.
     * @return {Boolean} true/false if the object is of the specified type.
     */
    function is(obj, type) {
      if (!type) {
        return obj !== undefined;
      }

      if (type == 'array' && Arr.isArray(obj)) {
        return true;
      }

      return typeof obj == type;
    }

    /**
     * Makes a name/object map out of an array with names.
     *
     * @method makeMap
     * @param {Array/String} items Items to make map out of.
     * @param {String} delim Optional delimiter to split string by.
     * @param {Object} map Optional map to add items to.
     * @return {Object} Name/value map of items.
     */
    function makeMap(items, delim, map) {
      var i;

      items = items || [];
      delim = delim || ',';

      if (typeof items == "string") {
        items = items.split(delim);
      }

      map = map || {};

      i = items.length;
      while (i--) {
        map[items[i]] = {};
      }

      return map;
    }

    /**
     * JavaScript does not protect hasOwnProperty method, so it is possible to overwrite it. This is
     * object independent version.
     *
     * @param {Object} obj
     * @param {String} prop
     * @returns {Boolean}
     */
    function hasOwnProperty(obj, prop) {
      return Object.prototype.hasOwnProperty.call(obj, prop);
    }

    /**
     * Creates a class, subclass or static singleton.
     * More details on this method can be found in the Wiki.
     *
     * @method create
     * @param {String} s Class name, inheritance and prefix.
     * @param {Object} p Collection of methods to add to the class.
     * @param {Object} root Optional root object defaults to the global window object.
     * @example
     * // Creates a basic class
     * tinymce.create('tinymce.somepackage.SomeClass', {
     *     SomeClass: function() {
     *         // Class constructor
     *     },
     *
     *     method: function() {
     *         // Some method
     *     }
     * });
     *
     * // Creates a basic subclass class
     * tinymce.create('tinymce.somepackage.SomeSubClass:tinymce.somepackage.SomeClass', {
     *     SomeSubClass: function() {
     *         // Class constructor
     *         this.parent(); // Call parent constructor
     *     },
     *
     *     method: function() {
     *         // Some method
     *         this.parent(); // Call parent method
     *     },
     *
     *     'static': {
     *         staticMethod: function() {
     *             // Static method
     *         }
     *     }
     * });
     *
     * // Creates a singleton/static class
     * tinymce.create('static tinymce.somepackage.SomeSingletonClass', {
     *     method: function() {
     *         // Some method
     *     }
     * });
     */
    function create(s, p, root) {
      var self = this, sp, ns, cn, scn, c, de = 0;

      // Parse : <prefix> <class>:<super class>
      s = /^((static) )?([\w.]+)(:([\w.]+))?/.exec(s);
      cn = s[3].match(/(^|\.)(\w+)$/i)[2]; // Class name

      // Create namespace for new class
      ns = self.createNS(s[3].replace(/\.\w+$/, ''), root);

      // Class already exists
      if (ns[cn]) {
        return;
      }

      // Make pure static class
      if (s[2] == 'static') {
        ns[cn] = p;

        if (this.onCreate) {
          this.onCreate(s[2], s[3], ns[cn]);
        }

        return;
      }

      // Create default constructor
      if (!p[cn]) {
        p[cn] = function () { };
        de = 1;
      }

      // Add constructor and methods
      ns[cn] = p[cn];
      self.extend(ns[cn].prototype, p);

      // Extend
      if (s[5]) {
        sp = self.resolve(s[5]).prototype;
        scn = s[5].match(/\.(\w+)$/i)[1]; // Class name

        // Extend constructor
        c = ns[cn];
        if (de) {
          // Add passthrough constructor
          ns[cn] = function () {
            return sp[scn].apply(this, arguments);
          };
        } else {
          // Add inherit constructor
          ns[cn] = function () {
            this.parent = sp[scn];
            return c.apply(this, arguments);
          };
        }
        ns[cn].prototype[cn] = ns[cn];

        // Add super methods
        self.each(sp, function (f, n) {
          ns[cn].prototype[n] = sp[n];
        });

        // Add overridden methods
        self.each(p, function (f, n) {
          // Extend methods if needed
          if (sp[n]) {
            ns[cn].prototype[n] = function () {
              this.parent = sp[n];
              return f.apply(this, arguments);
            };
          } else {
            if (n != cn) {
              ns[cn].prototype[n] = f;
            }
          }
        });
      }

      // Add static methods
      /*jshint sub:true*/
      /*eslint dot-notation:0*/
      self.each(p['static'], function (f, n) {
        ns[cn][n] = f;
      });
    }

    function extend(obj, ext) {
      var i, l, name, args = arguments, value;

      for (i = 1, l = args.length; i < l; i++) {
        ext = args[i];
        for (name in ext) {
          if (ext.hasOwnProperty(name)) {
            value = ext[name];

            if (value !== undefined) {
              obj[name] = value;
            }
          }
        }
      }

      return obj;
    }

    /**
     * Executed the specified function for each item in a object tree.
     *
     * @method walk
     * @param {Object} o Object tree to walk though.
     * @param {function} f Function to call for each item.
     * @param {String} n Optional name of collection inside the objects to walk for example childNodes.
     * @param {String} s Optional scope to execute the function in.
     */
    function walk(o, f, n, s) {
      s = s || this;

      if (o) {
        if (n) {
          o = o[n];
        }

        Arr.each(o, function (o, i) {
          if (f.call(s, o, i, n) === false) {
            return false;
          }

          walk(o, f, n, s);
        });
      }
    }

    /**
     * Creates a namespace on a specific object.
     *
     * @method createNS
     * @param {String} n Namespace to create for example a.b.c.d.
     * @param {Object} o Optional object to add namespace to, defaults to window.
     * @return {Object} New namespace object the last item in path.
     * @example
     * // Create some namespace
     * tinymce.createNS('tinymce.somepackage.subpackage');
     *
     * // Add a singleton
     * var tinymce.somepackage.subpackage.SomeSingleton = {
     *     method: function() {
     *         // Some method
     *     }
     * };
     */
    function createNS(n, o) {
      var i, v;

      o = o || window;

      n = n.split('.');
      for (i = 0; i < n.length; i++) {
        v = n[i];

        if (!o[v]) {
          o[v] = {};
        }

        o = o[v];
      }

      return o;
    }

    /**
     * Resolves a string and returns the object from a specific structure.
     *
     * @method resolve
     * @param {String} n Path to resolve for example a.b.c.d.
     * @param {Object} o Optional object to search though, defaults to window.
     * @return {Object} Last object in path or null if it couldn't be resolved.
     * @example
     * // Resolve a path into an object reference
     * var obj = tinymce.resolve('a.b.c.d');
     */
    function resolve(n, o) {
      var i, l;

      o = o || window;

      n = n.split('.');
      for (i = 0, l = n.length; i < l; i++) {
        o = o[n[i]];

        if (!o) {
          break;
        }
      }

      return o;
    }

    /**
     * Splits a string but removes the whitespace before and after each value.
     *
     * @method explode
     * @param {string} s String to split.
     * @param {string} d Delimiter to split by.
     * @example
     * // Split a string into an array with a,b,c
     * var arr = tinymce.explode('a, b,   c');
     */
    function explode(s, d) {
      if (!s || is(s, 'array')) {
        return s;
      }

      return Arr.map(s.split(d || ','), trim);
    }

    function _addCacheSuffix(url) {
      var cacheSuffix = Env.cacheSuffix;

      if (cacheSuffix) {
        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;
      }

      return url;
    }

    return {
      trim: trim,

      /**
       * Returns true/false if the object is an array or not.
       *
       * @method isArray
       * @param {Object} obj Object to check.
       * @return {boolean} true/false state if the object is an array or not.
       */
      isArray: Arr.isArray,

      is: is,

      /**
       * Converts the specified object into a real JavaScript array.
       *
       * @method toArray
       * @param {Object} obj Object to convert into array.
       * @return {Array} Array object based in input.
       */
      toArray: Arr.toArray,
      makeMap: makeMap,

      /**
       * Performs an iteration of all items in a collection such as an object or array. This method will execure the
       * callback function for each item in the collection, if the callback returns false the iteration will terminate.
       * The callback has the following format: cb(value, key_or_index).
       *
       * @method each
       * @param {Object} o Collection to iterate.
       * @param {function} cb Callback function to execute for each item.
       * @param {Object} s Optional scope to execute the callback in.
       * @example
       * // Iterate an array
       * tinymce.each([1,2,3], function(v, i) {
       *     console.debug("Value: " + v + ", Index: " + i);
       * });
       *
       * // Iterate an object
       * tinymce.each({a: 1, b: 2, c: 3], function(v, k) {
       *     console.debug("Value: " + v + ", Key: " + k);
       * });
       */
      each: Arr.each,

      /**
       * Creates a new array by the return value of each iteration function call. This enables you to convert
       * one array list into another.
       *
       * @method map
       * @param {Array} array Array of items to iterate.
       * @param {function} callback Function to call for each item. It's return value will be the new value.
       * @return {Array} Array with new values based on function return values.
       */
      map: Arr.map,

      /**
       * Filters out items from the input array by calling the specified function for each item.
       * If the function returns false the item will be excluded if it returns true it will be included.
       *
       * @method grep
       * @param {Array} a Array of items to loop though.
       * @param {function} f Function to call for each item. Include/exclude depends on it's return value.
       * @return {Array} New array with values imported and filtered based in input.
       * @example
       * // Filter out some items, this will return an array with 4 and 5
       * var items = tinymce.grep([1,2,3,4,5], function(v) {return v > 3;});
       */
      grep: Arr.filter,

      /**
       * Returns an index of the item or -1 if item is not present in the array.
       *
       * @method inArray
       * @param {any} item Item to search for.
       * @param {Array} arr Array to search in.
       * @return {Number} index of the item or -1 if item was not found.
       */
      inArray: Arr.indexOf,

      hasOwn: hasOwnProperty,

      extend: extend,
      create: create,
      walk: walk,
      createNS: createNS,
      resolve: resolve,
      explode: explode,
      _addCacheSuffix: _addCacheSuffix
    };
  }
);
/**
 * DomQuery.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class mimics most of the jQuery API:
 *
 * This is whats currently implemented:
 * - Utility functions
 * - DOM traversial
 * - DOM manipulation
 * - Event binding
 *
 * This is not currently implemented:
 * - Dimension
 * - Ajax
 * - Animation
 * - Advanced chaining
 *
 * @example
 * var $ = tinymce.dom.DomQuery;
 * $('p').attr('attr', 'value').addClass('class');
 *
 * @class tinymce.dom.DomQuery
 */
define(
  'tinymce.core.dom.DomQuery',
  [
    "tinymce.core.dom.EventUtils",
    "tinymce.core.dom.Sizzle",
    "tinymce.core.util.Tools",
    "tinymce.core.Env"
  ],
  function (EventUtils, Sizzle, Tools, Env) {
    var doc = document, push = Array.prototype.push, slice = Array.prototype.slice;
    var rquickExpr = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;
    var Event = EventUtils.Event, undef;
    var skipUniques = Tools.makeMap('children,contents,next,prev');

    function isDefined(obj) {
      return typeof obj !== 'undefined';
    }

    function isString(obj) {
      return typeof obj === 'string';
    }

    function isWindow(obj) {
      return obj && obj == obj.window;
    }

    function createFragment(html, fragDoc) {
      var frag, node, container;

      fragDoc = fragDoc || doc;
      container = fragDoc.createElement('div');
      frag = fragDoc.createDocumentFragment();
      container.innerHTML = html;

      while ((node = container.firstChild)) {
        frag.appendChild(node);
      }

      return frag;
    }

    function domManipulate(targetNodes, sourceItem, callback, reverse) {
      var i;

      if (isString(sourceItem)) {
        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));
      } else if (sourceItem.length && !sourceItem.nodeType) {
        sourceItem = DomQuery.makeArray(sourceItem);

        if (reverse) {
          for (i = sourceItem.length - 1; i >= 0; i--) {
            domManipulate(targetNodes, sourceItem[i], callback, reverse);
          }
        } else {
          for (i = 0; i < sourceItem.length; i++) {
            domManipulate(targetNodes, sourceItem[i], callback, reverse);
          }
        }

        return targetNodes;
      }

      if (sourceItem.nodeType) {
        i = targetNodes.length;
        while (i--) {
          callback.call(targetNodes[i], sourceItem);
        }
      }

      return targetNodes;
    }

    function hasClass(node, className) {
      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;
    }

    function wrap(elements, wrapper, all) {
      var lastParent, newWrapper;

      wrapper = DomQuery(wrapper)[0];

      elements.each(function () {
        var self = this;

        if (!all || lastParent != self.parentNode) {
          lastParent = self.parentNode;
          newWrapper = wrapper.cloneNode(false);
          self.parentNode.insertBefore(newWrapper, self);
          newWrapper.appendChild(self);
        } else {
          newWrapper.appendChild(self);
        }
      });

      return elements;
    }

    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');
    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');
    var propFix = {
      'for': 'htmlFor',
      'class': 'className',
      'readonly': 'readOnly'
    };
    var cssFix = {
      'float': 'cssFloat'
    };

    var attrHooks = {}, cssHooks = {};

    function DomQuery(selector, context) {
      /*eslint new-cap:0 */
      return new DomQuery.fn.init(selector, context);
    }

    function inArray(item, array) {
      var i;

      if (array.indexOf) {
        return array.indexOf(item);
      }

      i = array.length;
      while (i--) {
        if (array[i] === item) {
          return i;
        }
      }

      return -1;
    }

    var whiteSpaceRegExp = /^\s*|\s*$/g;

    function trim(str) {
      return (str === null || str === undef) ? '' : ("" + str).replace(whiteSpaceRegExp, '');
    }

    function each(obj, callback) {
      var length, key, i, undef, value;

      if (obj) {
        length = obj.length;

        if (length === undef) {
          // Loop object items
          for (key in obj) {
            if (obj.hasOwnProperty(key)) {
              value = obj[key];
              if (callback.call(value, key, value) === false) {
                break;
              }
            }
          }
        } else {
          // Loop array items
          for (i = 0; i < length; i++) {
            value = obj[i];
            if (callback.call(value, i, value) === false) {
              break;
            }
          }
        }
      }

      return obj;
    }

    function grep(array, callback) {
      var out = [];

      each(array, function (i, item) {
        if (callback(item, i)) {
          out.push(item);
        }
      });

      return out;
    }

    function getElementDocument(element) {
      if (!element) {
        return doc;
      }

      if (element.nodeType == 9) {
        return element;
      }

      return element.ownerDocument;
    }

    DomQuery.fn = DomQuery.prototype = {
      constructor: DomQuery,

      /**
       * Selector for the current set.
       *
       * @property selector
       * @type String
       */
      selector: "",

      /**
       * Context used to create the set.
       *
       * @property context
       * @type Element
       */
      context: null,

      /**
       * Number of items in the current set.
       *
       * @property length
       * @type Number
       */
      length: 0,

      /**
       * Constructs a new DomQuery instance with the specified selector or context.
       *
       * @constructor
       * @method init
       * @param {String/Array/DomQuery} selector Optional CSS selector/Array or array like object or HTML string.
       * @param {Document/Element} context Optional context to search in.
       */
      init: function (selector, context) {
        var self = this, match, node;

        if (!selector) {
          return self;
        }

        if (selector.nodeType) {
          self.context = self[0] = selector;
          self.length = 1;

          return self;
        }

        if (context && context.nodeType) {
          self.context = context;
        } else {
          if (context) {
            return DomQuery(selector).attr(context);
          }

          self.context = context = document;
        }

        if (isString(selector)) {
          self.selector = selector;

          if (selector.charAt(0) === "<" && selector.charAt(selector.length - 1) === ">" && selector.length >= 3) {
            match = [null, selector, null];
          } else {
            match = rquickExpr.exec(selector);
          }

          if (match) {
            if (match[1]) {
              node = createFragment(selector, getElementDocument(context)).firstChild;

              while (node) {
                push.call(self, node);
                node = node.nextSibling;
              }
            } else {
              node = getElementDocument(context).getElementById(match[2]);

              if (!node) {
                return self;
              }

              if (node.id !== match[2]) {
                return self.find(selector);
              }

              self.length = 1;
              self[0] = node;
            }
          } else {
            return DomQuery(context).find(selector);
          }
        } else {
          this.add(selector, false);
        }

        return self;
      },

      /**
       * Converts the current set to an array.
       *
       * @method toArray
       * @return {Array} Array of all nodes in set.
       */
      toArray: function () {
        return Tools.toArray(this);
      },

      /**
       * Adds new nodes to the set.
       *
       * @method add
       * @param {Array/tinymce.core.dom.DomQuery} items Array of all nodes to add to set.
       * @param {Boolean} sort Optional sort flag that enables sorting of elements.
       * @return {tinymce.dom.DomQuery} New instance with nodes added.
       */
      add: function (items, sort) {
        var self = this, nodes, i;

        if (isString(items)) {
          return self.add(DomQuery(items));
        }

        if (sort !== false) {
          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));
          self.length = nodes.length;
          for (i = 0; i < nodes.length; i++) {
            self[i] = nodes[i];
          }
        } else {
          push.apply(self, DomQuery.makeArray(items));
        }

        return self;
      },

      /**
       * Sets/gets attributes on the elements in the current set.
       *
       * @method attr
       * @param {String/Object} name Name of attribute to get or an object with attributes to set.
       * @param {String} value Optional value to set.
       * @return {tinymce.dom.DomQuery/String} Current set or the specified attribute when only the name is specified.
       */
      attr: function (name, value) {
        var self = this, hook;

        if (typeof name === "object") {
          each(name, function (name, value) {
            self.attr(name, value);
          });
        } else if (isDefined(value)) {
          this.each(function () {
            var hook;

            if (this.nodeType === 1) {
              hook = attrHooks[name];
              if (hook && hook.set) {
                hook.set(this, value);
                return;
              }

              if (value === null) {
                this.removeAttribute(name, 2);
              } else {
                this.setAttribute(name, value, 2);
              }
            }
          });
        } else {
          if (self[0] && self[0].nodeType === 1) {
            hook = attrHooks[name];
            if (hook && hook.get) {
              return hook.get(self[0], name);
            }

            if (booleanMap[name]) {
              return self.prop(name) ? name : undef;
            }

            value = self[0].getAttribute(name, 2);

            if (value === null) {
              value = undef;
            }
          }

          return value;
        }

        return self;
      },

      /**
       * Removes attributse on the elements in the current set.
       *
       * @method removeAttr
       * @param {String/Object} name Name of attribute to remove.
       * @return {tinymce.dom.DomQuery/String} Current set.
       */
      removeAttr: function (name) {
        return this.attr(name, null);
      },

      /**
       * Sets/gets properties on the elements in the current set.
       *
       * @method attr
       * @param {String/Object} name Name of property to get or an object with properties to set.
       * @param {String} value Optional value to set.
       * @return {tinymce.dom.DomQuery/String} Current set or the specified property when only the name is specified.
       */
      prop: function (name, value) {
        var self = this;

        name = propFix[name] || name;

        if (typeof name === "object") {
          each(name, function (name, value) {
            self.prop(name, value);
          });
        } else if (isDefined(value)) {
          this.each(function () {
            if (this.nodeType == 1) {
              this[name] = value;
            }
          });
        } else {
          if (self[0] && self[0].nodeType && name in self[0]) {
            return self[0][name];
          }

          return value;
        }

        return self;
      },

      /**
       * Sets/gets styles on the elements in the current set.
       *
       * @method css
       * @param {String/Object} name Name of style to get or an object with styles to set.
       * @param {String} value Optional value to set.
       * @return {tinymce.dom.DomQuery/String} Current set or the specified style when only the name is specified.
       */
      css: function (name, value) {
        var self = this, elm, hook;

        function camel(name) {
          return name.replace(/-(\D)/g, function (a, b) {
            return b.toUpperCase();
          });
        }

        function dashed(name) {
          return name.replace(/[A-Z]/g, function (a) {
            return '-' + a;
          });
        }

        if (typeof name === "object") {
          each(name, function (name, value) {
            self.css(name, value);
          });
        } else {
          if (isDefined(value)) {
            name = camel(name);

            // Default px suffix on these
            if (typeof value === 'number' && !numericCssMap[name]) {
              value += 'px';
            }

            self.each(function () {
              var style = this.style;

              hook = cssHooks[name];
              if (hook && hook.set) {
                hook.set(this, value);
                return;
              }

              try {
                this.style[cssFix[name] || name] = value;
              } catch (ex) {
                // Ignore
              }

              if (value === null || value === '') {
                if (style.removeProperty) {
                  style.removeProperty(dashed(name));
                } else {
                  style.removeAttribute(name);
                }
              }
            });
          } else {
            elm = self[0];

            hook = cssHooks[name];
            if (hook && hook.get) {
              return hook.get(elm);
            }

            if (elm.ownerDocument.defaultView) {
              try {
                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));
              } catch (ex) {
                return undef;
              }
            } else if (elm.currentStyle) {
              return elm.currentStyle[camel(name)];
            }
          }
        }

        return self;
      },

      /**
       * Removes all nodes in set from the document.
       *
       * @method remove
       * @return {tinymce.dom.DomQuery} Current set with the removed nodes.
       */
      remove: function () {
        var self = this, node, i = this.length;

        while (i--) {
          node = self[i];
          Event.clean(node);

          if (node.parentNode) {
            node.parentNode.removeChild(node);
          }
        }

        return this;
      },

      /**
       * Empties all elements in set.
       *
       * @method empty
       * @return {tinymce.dom.DomQuery} Current set with the empty nodes.
       */
      empty: function () {
        var self = this, node, i = this.length;

        while (i--) {
          node = self[i];
          while (node.firstChild) {
            node.removeChild(node.firstChild);
          }
        }

        return this;
      },

      /**
       * Sets or gets the HTML of the current set or first set node.
       *
       * @method html
       * @param {String} value Optional innerHTML value to set on each element.
       * @return {tinymce.dom.DomQuery/String} Current set or the innerHTML of the first element.
       */
      html: function (value) {
        var self = this, i;

        if (isDefined(value)) {
          i = self.length;

          try {
            while (i--) {
              self[i].innerHTML = value;
            }
          } catch (ex) {
            // Workaround for "Unknown runtime error" when DIV is added to P on IE
            DomQuery(self[i]).empty().append(value);
          }

          return self;
        }

        return self[0] ? self[0].innerHTML : '';
      },

      /**
       * Sets or gets the text of the current set or first set node.
       *
       * @method text
       * @param {String} value Optional innerText value to set on each element.
       * @return {tinymce.dom.DomQuery/String} Current set or the innerText of the first element.
       */
      text: function (value) {
        var self = this, i;

        if (isDefined(value)) {
          i = self.length;
          while (i--) {
            if ("innerText" in self[i]) {
              self[i].innerText = value;
            } else {
              self[0].textContent = value;
            }
          }

          return self;
        }

        return self[0] ? (self[0].innerText || self[0].textContent) : '';
      },

      /**
       * Appends the specified node/html or node set to the current set nodes.
       *
       * @method append
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to append to each element in set.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      append: function () {
        return domManipulate(this, arguments, function (node) {
          // Either element or Shadow Root
          if (this.nodeType === 1 || (this.host && this.host.nodeType === 1)) {
            this.appendChild(node);
          }
        });
      },

      /**
       * Prepends the specified node/html or node set to the current set nodes.
       *
       * @method prepend
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to prepend to each element in set.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      prepend: function () {
        return domManipulate(this, arguments, function (node) {
          // Either element or Shadow Root
          if (this.nodeType === 1 || (this.host && this.host.nodeType === 1)) {
            this.insertBefore(node, this.firstChild);
          }
        }, true);
      },

      /**
       * Adds the specified elements before current set nodes.
       *
       * @method before
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to add before to each element in set.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      before: function () {
        var self = this;

        if (self[0] && self[0].parentNode) {
          return domManipulate(self, arguments, function (node) {
            this.parentNode.insertBefore(node, this);
          });
        }

        return self;
      },

      /**
       * Adds the specified elements after current set nodes.
       *
       * @method after
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to add after to each element in set.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      after: function () {
        var self = this;

        if (self[0] && self[0].parentNode) {
          return domManipulate(self, arguments, function (node) {
            this.parentNode.insertBefore(node, this.nextSibling);
          }, true);
        }

        return self;
      },

      /**
       * Appends the specified set nodes to the specified selector/instance.
       *
       * @method appendTo
       * @param {String/Element/Array/tinymce.dom.DomQuery} val Item to append the current set to.
       * @return {tinymce.dom.DomQuery} Current set with the appended nodes.
       */
      appendTo: function (val) {
        DomQuery(val).append(this);

        return this;
      },

      /**
       * Prepends the specified set nodes to the specified selector/instance.
       *
       * @method prependTo
       * @param {String/Element/Array/tinymce.dom.DomQuery} val Item to prepend the current set to.
       * @return {tinymce.dom.DomQuery} Current set with the prepended nodes.
       */
      prependTo: function (val) {
        DomQuery(val).prepend(this);

        return this;
      },

      /**
       * Replaces the nodes in set with the specified content.
       *
       * @method replaceWith
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to replace nodes with.
       * @return {tinymce.dom.DomQuery} Set with replaced nodes.
       */
      replaceWith: function (content) {
        return this.before(content).remove();
      },

      /**
       * Wraps all elements in set with the specified wrapper.
       *
       * @method wrap
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to wrap nodes with.
       * @return {tinymce.dom.DomQuery} Set with wrapped nodes.
       */
      wrap: function (content) {
        return wrap(this, content);
      },

      /**
       * Wraps all nodes in set with the specified wrapper. If the nodes are siblings all of them
       * will be wrapped in the same wrapper.
       *
       * @method wrapAll
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to wrap nodes with.
       * @return {tinymce.dom.DomQuery} Set with wrapped nodes.
       */
      wrapAll: function (content) {
        return wrap(this, content, true);
      },

      /**
       * Wraps all elements inner contents in set with the specified wrapper.
       *
       * @method wrapInner
       * @param {String/Element/Array/tinymce.dom.DomQuery} content Content to wrap nodes with.
       * @return {tinymce.dom.DomQuery} Set with wrapped nodes.
       */
      wrapInner: function (content) {
        this.each(function () {
          DomQuery(this).contents().wrapAll(content);
        });

        return this;
      },

      /**
       * Unwraps all elements by removing the parent element of each item in set.
       *
       * @method unwrap
       * @return {tinymce.dom.DomQuery} Set with unwrapped nodes.
       */
      unwrap: function () {
        return this.parent().each(function () {
          DomQuery(this).replaceWith(this.childNodes);
        });
      },

      /**
       * Clones all nodes in set.
       *
       * @method clone
       * @return {tinymce.dom.DomQuery} Set with cloned nodes.
       */
      clone: function () {
        var result = [];

        this.each(function () {
          result.push(this.cloneNode(true));
        });

        return DomQuery(result);
      },

      /**
       * Adds the specified class name to the current set elements.
       *
       * @method addClass
       * @param {String} className Class name to add.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      addClass: function (className) {
        return this.toggleClass(className, true);
      },

      /**
       * Removes the specified class name to the current set elements.
       *
       * @method removeClass
       * @param {String} className Class name to remove.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      removeClass: function (className) {
        return this.toggleClass(className, false);
      },

      /**
       * Toggles the specified class name on the current set elements.
       *
       * @method toggleClass
       * @param {String} className Class name to add/remove.
       * @param {Boolean} state Optional state to toggle on/off.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      toggleClass: function (className, state) {
        var self = this;

        // Functions are not supported
        if (typeof className != 'string') {
          return self;
        }

        if (className.indexOf(' ') !== -1) {
          each(className.split(' '), function () {
            self.toggleClass(this, state);
          });
        } else {
          self.each(function (index, node) {
            var existingClassName, classState;

            classState = hasClass(node, className);
            if (classState !== state) {
              existingClassName = node.className;

              if (classState) {
                node.className = trim((" " + existingClassName + " ").replace(' ' + className + ' ', ' '));
              } else {
                node.className += existingClassName ? ' ' + className : className;
              }
            }
          });
        }

        return self;
      },

      /**
       * Returns true/false if the first item in set has the specified class.
       *
       * @method hasClass
       * @param {String} className Class name to check for.
       * @return {Boolean} True/false if the set has the specified class.
       */
      hasClass: function (className) {
        return hasClass(this[0], className);
      },

      /**
       * Executes the callback function for each item DomQuery collection. If you return false in the
       * callback it will break the loop.
       *
       * @method each
       * @param {function} callback Callback function to execute for each item.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      each: function (callback) {
        return each(this, callback);
      },

      /**
       * Binds an event with callback function to the elements in set.
       *
       * @method on
       * @param {String} name Name of the event to bind.
       * @param {function} callback Callback function to execute when the event occurs.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      on: function (name, callback) {
        return this.each(function () {
          Event.bind(this, name, callback);
        });
      },

      /**
       * Unbinds an event with callback function to the elements in set.
       *
       * @method off
       * @param {String} name Optional name of the event to bind.
       * @param {function} callback Optional callback function to execute when the event occurs.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      off: function (name, callback) {
        return this.each(function () {
          Event.unbind(this, name, callback);
        });
      },

      /**
       * Triggers the specified event by name or event object.
       *
       * @method trigger
       * @param {String/Object} name Name of the event to trigger or event object.
       * @return {tinymce.dom.DomQuery} Current set.
       */
      trigger: function (name) {
        return this.each(function () {
          if (typeof name == 'object') {
            Event.fire(this, name.type, name);
          } else {
            Event.fire(this, name);
          }
        });
      },

      /**
       * Shows all elements in set.
       *
       * @method show
       * @return {tinymce.dom.DomQuery} Current set.
       */
      show: function () {
        return this.css('display', '');
      },

      /**
       * Hides all elements in set.
       *
       * @method hide
       * @return {tinymce.dom.DomQuery} Current set.
       */
      hide: function () {
        return this.css('display', 'none');
      },

      /**
       * Slices the current set.
       *
       * @method slice
       * @param {Number} start Start index to slice at.
       * @param {Number} end Optional end index to end slice at.
       * @return {tinymce.dom.DomQuery} Sliced set.
       */
      slice: function () {
        return new DomQuery(slice.apply(this, arguments));
      },

      /**
       * Makes the set equal to the specified index.
       *
       * @method eq
       * @param {Number} index Index to set it equal to.
       * @return {tinymce.dom.DomQuery} Single item set.
       */
      eq: function (index) {
        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);
      },

      /**
       * Makes the set equal to first element in set.
       *
       * @method first
       * @return {tinymce.dom.DomQuery} Single item set.
       */
      first: function () {
        return this.eq(0);
      },

      /**
       * Makes the set equal to last element in set.
       *
       * @method last
       * @return {tinymce.dom.DomQuery} Single item set.
       */
      last: function () {
        return this.eq(-1);
      },

      /**
       * Finds elements by the specified selector for each element in set.
       *
       * @method find
       * @param {String} selector Selector to find elements by.
       * @return {tinymce.dom.DomQuery} Set with matches elements.
       */
      find: function (selector) {
        var i, l, ret = [];

        for (i = 0, l = this.length; i < l; i++) {
          DomQuery.find(selector, this[i], ret);
        }

        return DomQuery(ret);
      },

      /**
       * Filters the current set with the specified selector.
       *
       * @method filter
       * @param {String/function} selector Selector to filter elements by.
       * @return {tinymce.dom.DomQuery} Set with filtered elements.
       */
      filter: function (selector) {
        if (typeof selector == 'function') {
          return DomQuery(grep(this.toArray(), function (item, i) {
            return selector(i, item);
          }));
        }

        return DomQuery(DomQuery.filter(selector, this.toArray()));
      },

      /**
       * Gets the current node or any parent matching the specified selector.
       *
       * @method closest
       * @param {String/Element/tinymce.dom.DomQuery} selector Selector or element to find.
       * @return {tinymce.dom.DomQuery} Set with closest elements.
       */
      closest: function (selector) {
        var result = [];

        if (selector instanceof DomQuery) {
          selector = selector[0];
        }

        this.each(function (i, node) {
          while (node) {
            if (typeof selector == 'string' && DomQuery(node).is(selector)) {
              result.push(node);
              break;
            } else if (node == selector) {
              result.push(node);
              break;
            }

            node = node.parentNode;
          }
        });

        return DomQuery(result);
      },

      /**
       * Returns the offset of the first element in set or sets the top/left css properties of all elements in set.
       *
       * @method offset
       * @param {Object} offset Optional offset object to set on each item.
       * @return {Object/tinymce.dom.DomQuery} Returns the first element offset or the current set if you specified an offset.
       */
      offset: function (offset) {
        var elm, doc, docElm;
        var x = 0, y = 0, pos;

        if (!offset) {
          elm = this[0];

          if (elm) {
            doc = elm.ownerDocument;
            docElm = doc.documentElement;

            if (elm.getBoundingClientRect) {
              pos = elm.getBoundingClientRect();
              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;
              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;
            }
          }

          return {
            left: x,
            top: y
          };
        }

        return this.css(offset);
      },

      push: push,
      sort: [].sort,
      splice: [].splice
    };

    // Static members
    Tools.extend(DomQuery, {
      /**
       * Extends the specified object with one or more objects.
       *
       * @static
       * @method extend
       * @param {Object} target Target object to extend with new items.
       * @param {Object..} object Object to extend the target with.
       * @return {Object} Extended input object.
       */
      extend: Tools.extend,

      /**
       * Creates an array out of an array like object.
       *
       * @static
       * @method makeArray
       * @param {Object} object Object to convert to array.
       * @return {Array} Array produced from object.
       */
      makeArray: function (object) {
        if (isWindow(object) || object.nodeType) {
          return [object];
        }

        return Tools.toArray(object);
      },

      /**
       * Returns the index of the specified item inside the array.
       *
       * @static
       * @method inArray
       * @param {Object} item Item to look for.
       * @param {Array} array Array to look for item in.
       * @return {Number} Index of the item or -1.
       */
      inArray: inArray,

      /**
       * Returns true/false if the specified object is an array or not.
       *
       * @static
       * @method isArray
       * @param {Object} array Object to check if it's an array or not.
       * @return {Boolean} True/false if the object is an array.
       */
      isArray: Tools.isArray,

      /**
       * Executes the callback function for each item in array/object. If you return false in the
       * callback it will break the loop.
       *
       * @static
       * @method each
       * @param {Object} obj Object to iterate.
       * @param {function} callback Callback function to execute for each item.
       */
      each: each,

      /**
       * Removes whitespace from the beginning and end of a string.
       *
       * @static
       * @method trim
       * @param {String} str String to remove whitespace from.
       * @return {String} New string with removed whitespace.
       */
      trim: trim,

      /**
       * Filters out items from the input array by calling the specified function for each item.
       * If the function returns false the item will be excluded if it returns true it will be included.
       *
       * @static
       * @method grep
       * @param {Array} array Array of items to loop though.
       * @param {function} callback Function to call for each item. Include/exclude depends on it's return value.
       * @return {Array} New array with values imported and filtered based in input.
       * @example
       * // Filter out some items, this will return an array with 4 and 5
       * var items = DomQuery.grep([1, 2, 3, 4, 5], function(v) {return v > 3;});
       */
      grep: grep,

      // Sizzle
      find: Sizzle,
      expr: Sizzle.selectors,
      unique: Sizzle.uniqueSort,
      text: Sizzle.getText,
      contains: Sizzle.contains,
      filter: function (expr, elems, not) {
        var i = elems.length;

        if (not) {
          expr = ":not(" + expr + ")";
        }

        while (i--) {
          if (elems[i].nodeType != 1) {
            elems.splice(i, 1);
          }
        }

        if (elems.length === 1) {
          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];
        } else {
          elems = DomQuery.find.matches(expr, elems);
        }

        return elems;
      }
    });

    function dir(el, prop, until) {
      var matched = [], cur = el[prop];

      if (typeof until != 'string' && until instanceof DomQuery) {
        until = until[0];
      }

      while (cur && cur.nodeType !== 9) {
        if (until !== undefined) {
          if (cur === until) {
            break;
          }

          if (typeof until == 'string' && DomQuery(cur).is(until)) {
            break;
          }
        }

        if (cur.nodeType === 1) {
          matched.push(cur);
        }

        cur = cur[prop];
      }

      return matched;
    }

    function sibling(node, siblingName, nodeType, until) {
      var result = [];

      if (until instanceof DomQuery) {
        until = until[0];
      }

      for (; node; node = node[siblingName]) {
        if (nodeType && node.nodeType !== nodeType) {
          continue;
        }

        if (until !== undefined) {
          if (node === until) {
            break;
          }

          if (typeof until == 'string' && DomQuery(node).is(until)) {
            break;
          }
        }

        result.push(node);
      }

      return result;
    }

    function firstSibling(node, siblingName, nodeType) {
      for (node = node[siblingName]; node; node = node[siblingName]) {
        if (node.nodeType == nodeType) {
          return node;
        }
      }

      return null;
    }

    each({
      /**
       * Returns a new collection with the parent of each item in current collection matching the optional selector.
       *
       * @method parent
       * @param {Element/tinymce.dom.DomQuery} node Node to match parents against.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching parents.
       */
      parent: function (node) {
        var parent = node.parentNode;

        return parent && parent.nodeType !== 11 ? parent : null;
      },

      /**
       * Returns a new collection with the all the parents of each item in current collection matching the optional selector.
       *
       * @method parents
       * @param {Element/tinymce.dom.DomQuery} node Node to match parents against.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching parents.
       */
      parents: function (node) {
        return dir(node, "parentNode");
      },

      /**
       * Returns a new collection with next sibling of each item in current collection matching the optional selector.
       *
       * @method next
       * @param {Element/tinymce.dom.DomQuery} node Node to match the next element against.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching elements.
       */
      next: function (node) {
        return firstSibling(node, 'nextSibling', 1);
      },

      /**
       * Returns a new collection with previous sibling of each item in current collection matching the optional selector.
       *
       * @method prev
       * @param {Element/tinymce.dom.DomQuery} node Node to match the previous element against.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching elements.
       */
      prev: function (node) {
        return firstSibling(node, 'previousSibling', 1);
      },

      /**
       * Returns all child elements matching the optional selector.
       *
       * @method children
       * @param {Element/tinymce.dom.DomQuery} node Node to match the elements against.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching elements.
       */
      children: function (node) {
        return sibling(node.firstChild, 'nextSibling', 1);
      },

      /**
       * Returns all child nodes matching the optional selector.
       *
       * @method contents
       * @param {Element/tinymce.dom.DomQuery} node Node to get the contents of.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching elements.
       */
      contents: function (node) {
        return Tools.toArray((node.nodeName === "iframe" ? node.contentDocument || node.contentWindow.document : node).childNodes);
      }
    }, function (name, fn) {
      DomQuery.fn[name] = function (selector) {
        var self = this, result = [];

        self.each(function () {
          var nodes = fn.call(result, this, selector, result);

          if (nodes) {
            if (DomQuery.isArray(nodes)) {
              result.push.apply(result, nodes);
            } else {
              result.push(nodes);
            }
          }
        });

        // If traversing on multiple elements we might get the same elements twice
        if (this.length > 1) {
          if (!skipUniques[name]) {
            result = DomQuery.unique(result);
          }

          if (name.indexOf('parents') === 0) {
            result = result.reverse();
          }
        }

        result = DomQuery(result);

        if (selector) {
          return result.filter(selector);
        }

        return result;
      };
    });

    each({
      /**
       * Returns a new collection with the all the parents until the matching selector/element
       * of each item in current collection matching the optional selector.
       *
       * @method parentsUntil
       * @param {Element/tinymce.dom.DomQuery} node Node to find parent of.
       * @param {String/Element/tinymce.dom.DomQuery} until Until the matching selector or element.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching parents.
       */
      parentsUntil: function (node, until) {
        return dir(node, "parentNode", until);
      },

      /**
       * Returns a new collection with all next siblings of each item in current collection matching the optional selector.
       *
       * @method nextUntil
       * @param {Element/tinymce.dom.DomQuery} node Node to find next siblings on.
       * @param {String/Element/tinymce.dom.DomQuery} until Until the matching selector or element.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching elements.
       */
      nextUntil: function (node, until) {
        return sibling(node, 'nextSibling', 1, until).slice(1);
      },

      /**
       * Returns a new collection with all previous siblings of each item in current collection matching the optional selector.
       *
       * @method prevUntil
       * @param {Element/tinymce.dom.DomQuery} node Node to find previous siblings on.
       * @param {String/Element/tinymce.dom.DomQuery} until Until the matching selector or element.
       * @return {tinymce.dom.DomQuery} New DomQuery instance with all matching elements.
       */
      prevUntil: function (node, until) {
        return sibling(node, 'previousSibling', 1, until).slice(1);
      }
    }, function (name, fn) {
      DomQuery.fn[name] = function (selector, filter) {
        var self = this, result = [];

        self.each(function () {
          var nodes = fn.call(result, this, selector, result);

          if (nodes) {
            if (DomQuery.isArray(nodes)) {
              result.push.apply(result, nodes);
            } else {
              result.push(nodes);
            }
          }
        });

        // If traversing on multiple elements we might get the same elements twice
        if (this.length > 1) {
          result = DomQuery.unique(result);

          if (name.indexOf('parents') === 0 || name === 'prevUntil') {
            result = result.reverse();
          }
        }

        result = DomQuery(result);

        if (filter) {
          return result.filter(filter);
        }

        return result;
      };
    });

    /**
     * Returns true/false if the current set items matches the selector.
     *
     * @method is
     * @param {String} selector Selector to match the elements against.
     * @return {Boolean} True/false if the current set matches the selector.
     */
    DomQuery.fn.is = function (selector) {
      return !!selector && this.filter(selector).length > 0;
    };

    DomQuery.fn.init.prototype = DomQuery.fn;

    DomQuery.overrideDefaults = function (callback) {
      var defaults;

      function sub(selector, context) {
        defaults = defaults || callback();

        if (arguments.length === 0) {
          selector = defaults.element;
        }

        if (!context) {
          context = defaults.context;
        }

        return new sub.fn.init(selector, context);
      }

      DomQuery.extend(sub, this);

      return sub;
    };

    function appendHooks(targetHooks, prop, hooks) {
      each(hooks, function (name, func) {
        targetHooks[name] = targetHooks[name] || {};
        targetHooks[name][prop] = func;
      });
    }

    if (Env.ie && Env.ie < 8) {
      appendHooks(attrHooks, 'get', {
        maxlength: function (elm) {
          var value = elm.maxLength;

          if (value === 0x7fffffff) {
            return undef;
          }

          return value;
        },

        size: function (elm) {
          var value = elm.size;

          if (value === 20) {
            return undef;
          }

          return value;
        },

        'class': function (elm) {
          return elm.className;
        },

        style: function (elm) {
          var value = elm.style.cssText;

          if (value.length === 0) {
            return undef;
          }

          return value;
        }
      });

      appendHooks(attrHooks, 'set', {
        'class': function (elm, value) {
          elm.className = value;
        },

        style: function (elm, value) {
          elm.style.cssText = value;
        }
      });
    }

    if (Env.ie && Env.ie < 9) {
      /*jshint sub:true */
      /*eslint dot-notation: 0*/
      cssFix['float'] = 'styleFloat';

      appendHooks(cssHooks, 'set', {
        opacity: function (elm, value) {
          var style = elm.style;

          if (value === null || value === '') {
            style.removeAttribute('filter');
          } else {
            style.zoom = 1;
            style.filter = 'alpha(opacity=' + (value * 100) + ')';
          }
        }
      });
    }

    DomQuery.attrHooks = attrHooks;
    DomQuery.cssHooks = cssHooks;

    return DomQuery;
  }
);

/**
 * Styles.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class is used to parse CSS styles it also compresses styles to reduce the output size.
 *
 * @example
 * var Styles = new tinymce.html.Styles({
 *    url_converter: function(url) {
 *       return url;
 *    }
 * });
 *
 * styles = Styles.parse('border: 1px solid red');
 * styles.color = 'red';
 *
 * console.log(new tinymce.html.StyleSerializer().serialize(styles));
 *
 * @class tinymce.html.Styles
 * @version 3.4
 */
define(
  'tinymce.core.html.Styles',
  [
  ],
  function () {
    return function (settings, schema) {
      /*jshint maxlen:255 */
      /*eslint max-len:0 */
      var rgbRegExp = /rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,
        urlOrStrRegExp = /(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,
        styleRegExp = /\s*([^:]+):\s*([^;]+);?/g,
        trimRightRegExp = /\s+$/,
        i, encodingLookup = {}, encodingItems, validStyles, invalidStyles, invisibleChar = '\uFEFF';

      settings = settings || {};

      if (schema) {
        validStyles = schema.getValidStyles();
        invalidStyles = schema.getInvalidStyles();
      }

      encodingItems = ('\\" \\\' \\; \\: ; : ' + invisibleChar).split(' ');
      for (i = 0; i < encodingItems.length; i++) {
        encodingLookup[encodingItems[i]] = invisibleChar + i;
        encodingLookup[invisibleChar + i] = encodingItems[i];
      }

      function toHex(match, r, g, b) {
        function hex(val) {
          val = parseInt(val, 10).toString(16);

          return val.length > 1 ? val : '0' + val; // 0 -> 00
        }

        return '#' + hex(r) + hex(g) + hex(b);
      }

      return {
        /**
         * Parses the specified RGB color value and returns a hex version of that color.
         *
         * @method toHex
         * @param {String} color RGB string value like rgb(1,2,3)
         * @return {String} Hex version of that RGB value like #FF00FF.
         */
        toHex: function (color) {
          return color.replace(rgbRegExp, toHex);
        },

        /**
         * Parses the specified style value into an object collection. This parser will also
         * merge and remove any redundant items that browsers might have added. It will also convert non hex
         * colors to hex values. Urls inside the styles will also be converted to absolute/relative based on settings.
         *
         * @method parse
         * @param {String} css Style value to parse for example: border:1px solid red;.
         * @return {Object} Object representation of that style like {border: '1px solid red'}
         */
        parse: function (css) {
          var styles = {}, matches, name, value, isEncoded, urlConverter = settings.url_converter;
          var urlConverterScope = settings.url_converter_scope || this;

          function compress(prefix, suffix, noJoin) {
            var top, right, bottom, left;

            top = styles[prefix + '-top' + suffix];
            if (!top) {
              return;
            }

            right = styles[prefix + '-right' + suffix];
            if (!right) {
              return;
            }

            bottom = styles[prefix + '-bottom' + suffix];
            if (!bottom) {
              return;
            }

            left = styles[prefix + '-left' + suffix];
            if (!left) {
              return;
            }

            var box = [top, right, bottom, left];
            i = box.length - 1;
            while (i--) {
              if (box[i] !== box[i + 1]) {
                break;
              }
            }

            if (i > -1 && noJoin) {
              return;
            }

            styles[prefix + suffix] = i == -1 ? box[0] : box.join(' ');
            delete styles[prefix + '-top' + suffix];
            delete styles[prefix + '-right' + suffix];
            delete styles[prefix + '-bottom' + suffix];
            delete styles[prefix + '-left' + suffix];
          }

          /**
           * Checks if the specific style can be compressed in other words if all border-width are equal.
           */
          function canCompress(key) {
            var value = styles[key], i;

            if (!value) {
              return;
            }

            value = value.split(' ');
            i = value.length;
            while (i--) {
              if (value[i] !== value[0]) {
                return false;
              }
            }

            styles[key] = value[0];

            return true;
          }

          /**
           * Compresses multiple styles into one style.
           */
          function compress2(target, a, b, c) {
            if (!canCompress(a)) {
              return;
            }

            if (!canCompress(b)) {
              return;
            }

            if (!canCompress(c)) {
              return;
            }

            // Compress
            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];
            delete styles[a];
            delete styles[b];
            delete styles[c];
          }

          // Encodes the specified string by replacing all \" \' ; : with _<num>
          function encode(str) {
            isEncoded = true;

            return encodingLookup[str];
          }

          // Decodes the specified string by replacing all _<num> with it's original value \" \' etc
          // It will also decode the \" \' if keepSlashes is set to fale or omitted
          function decode(str, keepSlashes) {
            if (isEncoded) {
              str = str.replace(/\uFEFF[0-9]/g, function (str) {
                return encodingLookup[str];
              });
            }

            if (!keepSlashes) {
              str = str.replace(/\\([\'\";:])/g, "$1");
            }

            return str;
          }

          function decodeSingleHexSequence(escSeq) {
            return String.fromCharCode(parseInt(escSeq.slice(1), 16));
          }

          function decodeHexSequences(value) {
            return value.replace(/\\[0-9a-f]+/gi, decodeSingleHexSequence);
          }

          function processUrl(match, url, url2, url3, str, str2) {
            str = str || str2;

            if (str) {
              str = decode(str);

              // Force strings into single quote format
              return "'" + str.replace(/\'/g, "\\'") + "'";
            }

            url = decode(url || url2 || url3);

            if (!settings.allow_script_urls) {
              var scriptUrl = url.replace(/[\s\r\n]+/g, '');

              if (/(java|vb)script:/i.test(scriptUrl)) {
                return "";
              }

              if (!settings.allow_svg_data_urls && /^data:image\/svg/i.test(scriptUrl)) {
                return "";
              }
            }

            // Convert the URL to relative/absolute depending on config
            if (urlConverter) {
              url = urlConverter.call(urlConverterScope, url, 'style');
            }

            // Output new URL format
            return "url('" + url.replace(/\'/g, "\\'") + "')";
          }

          if (css) {
            css = css.replace(/[\u0000-\u001F]/g, '');

            // Encode \" \' % and ; and : inside strings so they don't interfere with the style parsing
            css = css.replace(/\\[\"\';:\uFEFF]/g, encode).replace(/\"[^\"]+\"|\'[^\']+\'/g, function (str) {
              return str.replace(/[;:]/g, encode);
            });

            // Parse styles
            while ((matches = styleRegExp.exec(css))) {
              styleRegExp.lastIndex = matches.index + matches[0].length;
              name = matches[1].replace(trimRightRegExp, '').toLowerCase();
              value = matches[2].replace(trimRightRegExp, '');

              if (name && value) {
                // Decode escaped sequences like \65 -> e
                name = decodeHexSequences(name);
                value = decodeHexSequences(value);

                // Skip properties with double quotes and sequences like \" \' in their names
                // See 'mXSS Attacks: Attacking well-secured Web-Applications by using innerHTML Mutations'
                // https://cure53.de/fp170.pdf
                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('"') !== -1) {
                  continue;
                }

                // Don't allow behavior name or expression/comments within the values
                if (!settings.allow_script_urls && (name == "behavior" || /expression\s*\(|\/\*|\*\//.test(value))) {
                  continue;
                }

                // Opera will produce 700 instead of bold in their style values
                if (name === 'font-weight' && value === '700') {
                  value = 'bold';
                } else if (name === 'color' || name === 'background-color') { // Lowercase colors like RED
                  value = value.toLowerCase();
                }

                // Convert RGB colors to HEX
                value = value.replace(rgbRegExp, toHex);

                // Convert URLs and force them into url('value') format
                value = value.replace(urlOrStrRegExp, processUrl);
                styles[name] = isEncoded ? decode(value, true) : value;
              }
            }
            // Compress the styles to reduce it's size for example IE will expand styles
            compress("border", "", true);
            compress("border", "-width");
            compress("border", "-color");
            compress("border", "-style");
            compress("padding", "");
            compress("margin", "");
            compress2('border', 'border-width', 'border-style', 'border-color');

            // Remove pointless border, IE produces these
            if (styles.border === 'medium none') {
              delete styles.border;
            }

            // IE 11 will produce a border-image: none when getting the style attribute from <p style="border: 1px solid red"></p>
            // So let us assume it shouldn't be there
            if (styles['border-image'] === 'none') {
              delete styles['border-image'];
            }
          }

          return styles;
        },

        /**
         * Serializes the specified style object into a string.
         *
         * @method serialize
         * @param {Object} styles Object to serialize as string for example: {border: '1px solid red'}
         * @param {String} elementName Optional element name, if specified only the styles that matches the schema will be serialized.
         * @return {String} String representation of the style object for example: border: 1px solid red.
         */
        serialize: function (styles, elementName) {
          var css = '', name, value;

          function serializeStyles(name) {
            var styleList, i, l, value;

            styleList = validStyles[name];
            if (styleList) {
              for (i = 0, l = styleList.length; i < l; i++) {
                name = styleList[i];
                value = styles[name];

                if (value) {
                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';
                }
              }
            }
          }

          function isValid(name, elementName) {
            var styleMap;

            styleMap = invalidStyles['*'];
            if (styleMap && styleMap[name]) {
              return false;
            }

            styleMap = invalidStyles[elementName];
            if (styleMap && styleMap[name]) {
              return false;
            }

            return true;
          }

          // Serialize styles according to schema
          if (elementName && validStyles) {
            // Serialize global styles and element specific styles
            serializeStyles('*');
            serializeStyles(elementName);
          } else {
            // Output the styles in the order they are inside the object
            for (name in styles) {
              value = styles[name];

              if (value && (!invalidStyles || isValid(name, elementName))) {
                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';
              }
            }
          }

          return css;
        }
      };
    };
  }
);

/**
 * TreeWalker.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * TreeWalker class enables you to walk the DOM in a linear manner.
 *
 * @class tinymce.dom.TreeWalker
 * @example
 * var walker = new tinymce.dom.TreeWalker(startNode);
 *
 * do {
 *     console.log(walker.current());
 * } while (walker.next());
 */
define(
  'tinymce.core.dom.TreeWalker',
  [
  ],
  function () {
    /**
     * Constructs a new TreeWalker instance.
     *
     * @constructor
     * @method TreeWalker
     * @param {Node} startNode Node to start walking from.
     * @param {node} rootNode Optional root node to never walk out of.
     */
    return function (startNode, rootNode) {
      var node = startNode;

      function findSibling(node, startName, siblingName, shallow) {
        var sibling, parent;

        if (node) {
          // Walk into nodes if it has a start
          if (!shallow && node[startName]) {
            return node[startName];
          }

          // Return the sibling if it has one
          if (node != rootNode) {
            sibling = node[siblingName];
            if (sibling) {
              return sibling;
            }

            // Walk up the parents to look for siblings
            for (parent = node.parentNode; parent && parent != rootNode; parent = parent.parentNode) {
              sibling = parent[siblingName];
              if (sibling) {
                return sibling;
              }
            }
          }
        }
      }

      function findPreviousNode(node, startName, siblingName, shallow) {
        var sibling, parent, child;

        if (node) {
          sibling = node[siblingName];
          if (rootNode && sibling === rootNode) {
            return;
          }

          if (sibling) {
            if (!shallow) {
              // Walk up the parents to look for siblings
              for (child = sibling[startName]; child; child = child[startName]) {
                if (!child[startName]) {
                  return child;
                }
              }
            }

            return sibling;
          }

          parent = node.parentNode;
          if (parent && parent !== rootNode) {
            return parent;
          }
        }
      }

      /**
       * Returns the current node.
       *
       * @method current
       * @return {Node} Current node where the walker is.
       */
      this.current = function () {
        return node;
      };

      /**
       * Walks to the next node in tree.
       *
       * @method next
       * @return {Node} Current node where the walker is after moving to the next node.
       */
      this.next = function (shallow) {
        node = findSibling(node, 'firstChild', 'nextSibling', shallow);
        return node;
      };

      /**
       * Walks to the previous node in tree.
       *
       * @method prev
       * @return {Node} Current node where the walker is after moving to the previous node.
       */
      this.prev = function (shallow) {
        node = findSibling(node, 'lastChild', 'previousSibling', shallow);
        return node;
      };

      this.prev2 = function (shallow) {
        node = findPreviousNode(node, 'lastChild', 'previousSibling', shallow);
        return node;
      };
    };
  }
);

/**
 * Entities.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint bitwise:false */
/*eslint no-bitwise:0 */

/**
 * Entity encoder class.
 *
 * @class tinymce.html.Entities
 * @static
 * @version 3.4
 */
define(
  'tinymce.core.html.Entities',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    var makeMap = Tools.makeMap;

    var namedEntities, baseEntities, reverseEntities,
      attrsCharsRegExp = /[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
      textCharsRegExp = /[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
      rawCharsRegExp = /[<>&\"\']/g,
      entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi,
      asciiMap = {
        128: "\u20AC", 130: "\u201A", 131: "\u0192", 132: "\u201E", 133: "\u2026", 134: "\u2020",
        135: "\u2021", 136: "\u02C6", 137: "\u2030", 138: "\u0160", 139: "\u2039", 140: "\u0152",
        142: "\u017D", 145: "\u2018", 146: "\u2019", 147: "\u201C", 148: "\u201D", 149: "\u2022",
        150: "\u2013", 151: "\u2014", 152: "\u02DC", 153: "\u2122", 154: "\u0161", 155: "\u203A",
        156: "\u0153", 158: "\u017E", 159: "\u0178"
      };

    // Raw entities
    baseEntities = {
      '\"': '&quot;', // Needs to be escaped since the YUI compressor would otherwise break the code
      "'": '&#39;',
      '<': '&lt;',
      '>': '&gt;',
      '&': '&amp;',
      '\u0060': '&#96;'
    };

    // Reverse lookup table for raw entities
    reverseEntities = {
      '&lt;': '<',
      '&gt;': '>',
      '&amp;': '&',
      '&quot;': '"',
      '&apos;': "'"
    };

    // Decodes text by using the browser
    function nativeDecode(text) {
      var elm;

      elm = document.createElement("div");
      elm.innerHTML = text;

      return elm.textContent || elm.innerText || text;
    }

    // Build a two way lookup table for the entities
    function buildEntitiesLookup(items, radix) {
      var i, chr, entity, lookup = {};

      if (items) {
        items = items.split(',');
        radix = radix || 10;

        // Build entities lookup table
        for (i = 0; i < items.length; i += 2) {
          chr = String.fromCharCode(parseInt(items[i], radix));

          // Only add non base entities
          if (!baseEntities[chr]) {
            entity = '&' + items[i + 1] + ';';
            lookup[chr] = entity;
            lookup[entity] = chr;
          }
        }

        return lookup;
      }
    }

    // Unpack entities lookup where the numbers are in radix 32 to reduce the size
    namedEntities = buildEntitiesLookup(
      '50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' +
      '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' +
      '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' +
      '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' +
      '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' +
      '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' +
      '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' +
      '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' +
      '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' +
      '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' +
      'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' +
      'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' +
      't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' +
      'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' +
      'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' +
      '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' +
      '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' +
      '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' +
      '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' +
      '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' +
      'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' +
      'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' +
      'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' +
      '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' +
      '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);

    var Entities = {
      /**
       * Encodes the specified string using raw entities. This means only the required XML base entities will be encoded.
       *
       * @method encodeRaw
       * @param {String} text Text to encode.
       * @param {Boolean} attr Optional flag to specify if the text is attribute contents.
       * @return {String} Entity encoded text.
       */
      encodeRaw: function (text, attr) {
        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {
          return baseEntities[chr] || chr;
        });
      },

      /**
       * Encoded the specified text with both the attributes and text entities. This function will produce larger text contents
       * since it doesn't know if the context is within a attribute or text node. This was added for compatibility
       * and is exposed as the DOMUtils.encode function.
       *
       * @method encodeAllRaw
       * @param {String} text Text to encode.
       * @return {String} Entity encoded text.
       */
      encodeAllRaw: function (text) {
        return ('' + text).replace(rawCharsRegExp, function (chr) {
          return baseEntities[chr] || chr;
        });
      },

      /**
       * Encodes the specified string using numeric entities. The core entities will be
       * encoded as named ones but all non lower ascii characters will be encoded into numeric entities.
       *
       * @method encodeNumeric
       * @param {String} text Text to encode.
       * @param {Boolean} attr Optional flag to specify if the text is attribute contents.
       * @return {String} Entity encoded text.
       */
      encodeNumeric: function (text, attr) {
        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {
          // Multi byte sequence convert it to a single entity
          if (chr.length > 1) {
            return '&#' + (((chr.charCodeAt(0) - 0xD800) * 0x400) + (chr.charCodeAt(1) - 0xDC00) + 0x10000) + ';';
          }

          return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';
        });
      },

      /**
       * Encodes the specified string using named entities. The core entities will be encoded
       * as named ones but all non lower ascii characters will be encoded into named entities.
       *
       * @method encodeNamed
       * @param {String} text Text to encode.
       * @param {Boolean} attr Optional flag to specify if the text is attribute contents.
       * @param {Object} entities Optional parameter with entities to use.
       * @return {String} Entity encoded text.
       */
      encodeNamed: function (text, attr, entities) {
        entities = entities || namedEntities;

        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {
          return baseEntities[chr] || entities[chr] || chr;
        });
      },

      /**
       * Returns an encode function based on the name(s) and it's optional entities.
       *
       * @method getEncodeFunc
       * @param {String} name Comma separated list of encoders for example named,numeric.
       * @param {String} entities Optional parameter with entities to use instead of the built in set.
       * @return {function} Encode function to be used.
       */
      getEncodeFunc: function (name, entities) {
        entities = buildEntitiesLookup(entities) || namedEntities;

        function encodeNamedAndNumeric(text, attr) {
          return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {
            if (baseEntities[chr] !== undefined) {
              return baseEntities[chr];
            }

            if (entities[chr] !== undefined) {
              return entities[chr];
            }

            // Convert multi-byte sequences to a single entity.
            if (chr.length > 1) {
              return '&#' + (((chr.charCodeAt(0) - 0xD800) * 0x400) + (chr.charCodeAt(1) - 0xDC00) + 0x10000) + ';';
            }

            return '&#' + chr.charCodeAt(0) + ';';
          });
        }

        function encodeCustomNamed(text, attr) {
          return Entities.encodeNamed(text, attr, entities);
        }

        // Replace + with , to be compatible with previous TinyMCE versions
        name = makeMap(name.replace(/\+/g, ','));

        // Named and numeric encoder
        if (name.named && name.numeric) {
          return encodeNamedAndNumeric;
        }

        // Named encoder
        if (name.named) {
          // Custom names
          if (entities) {
            return encodeCustomNamed;
          }

          return Entities.encodeNamed;
        }

        // Numeric
        if (name.numeric) {
          return Entities.encodeNumeric;
        }

        // Raw encoder
        return Entities.encodeRaw;
      },

      /**
       * Decodes the specified string, this will replace entities with raw UTF characters.
       *
       * @method decode
       * @param {String} text Text to entity decode.
       * @return {String} Entity decoded string.
       */
      decode: function (text) {
        return text.replace(entityRegExp, function (all, numeric) {
          if (numeric) {
            if (numeric.charAt(0).toLowerCase() === 'x') {
              numeric = parseInt(numeric.substr(1), 16);
            } else {
              numeric = parseInt(numeric, 10);
            }

            // Support upper UTF
            if (numeric > 0xFFFF) {
              numeric -= 0x10000;

              return String.fromCharCode(0xD800 + (numeric >> 10), 0xDC00 + (numeric & 0x3FF));
            }

            return asciiMap[numeric] || String.fromCharCode(numeric);
          }

          return reverseEntities[all] || namedEntities[all] || nativeDecode(all);
        });
      }
    };

    return Entities;
  }
);

/**
 * Range.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Old IE Range.
 *
 * @private
 * @class tinymce.dom.Range
 */
define(
  'tinymce.core.dom.Range',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    // Range constructor
    function Range(dom) {
      var self = this,
        doc = dom.doc,
        EXTRACT = 0,
        CLONE = 1,
        DELETE = 2,
        TRUE = true,
        FALSE = false,
        START_OFFSET = 'startOffset',
        START_CONTAINER = 'startContainer',
        END_CONTAINER = 'endContainer',
        END_OFFSET = 'endOffset',
        extend = Tools.extend,
        nodeIndex = dom.nodeIndex;

      function createDocumentFragment() {
        return doc.createDocumentFragment();
      }

      function setStart(n, o) {
        _setEndPoint(TRUE, n, o);
      }

      function setEnd(n, o) {
        _setEndPoint(FALSE, n, o);
      }

      function setStartBefore(n) {
        setStart(n.parentNode, nodeIndex(n));
      }

      function setStartAfter(n) {
        setStart(n.parentNode, nodeIndex(n) + 1);
      }

      function setEndBefore(n) {
        setEnd(n.parentNode, nodeIndex(n));
      }

      function setEndAfter(n) {
        setEnd(n.parentNode, nodeIndex(n) + 1);
      }

      function collapse(ts) {
        if (ts) {
          self[END_CONTAINER] = self[START_CONTAINER];
          self[END_OFFSET] = self[START_OFFSET];
        } else {
          self[START_CONTAINER] = self[END_CONTAINER];
          self[START_OFFSET] = self[END_OFFSET];
        }

        self.collapsed = TRUE;
      }

      function selectNode(n) {
        setStartBefore(n);
        setEndAfter(n);
      }

      function selectNodeContents(n) {
        setStart(n, 0);
        setEnd(n, n.nodeType === 1 ? n.childNodes.length : n.nodeValue.length);
      }

      function compareBoundaryPoints(h, r) {
        var sc = self[START_CONTAINER], so = self[START_OFFSET], ec = self[END_CONTAINER], eo = self[END_OFFSET],
          rsc = r.startContainer, rso = r.startOffset, rec = r.endContainer, reo = r.endOffset;

        // Check START_TO_START
        if (h === 0) {
          return _compareBoundaryPoints(sc, so, rsc, rso);
        }

        // Check START_TO_END
        if (h === 1) {
          return _compareBoundaryPoints(ec, eo, rsc, rso);
        }

        // Check END_TO_END
        if (h === 2) {
          return _compareBoundaryPoints(ec, eo, rec, reo);
        }

        // Check END_TO_START
        if (h === 3) {
          return _compareBoundaryPoints(sc, so, rec, reo);
        }
      }

      function deleteContents() {
        _traverse(DELETE);
      }

      function extractContents() {
        return _traverse(EXTRACT);
      }

      function cloneContents() {
        return _traverse(CLONE);
      }

      function insertNode(n) {
        var startContainer = this[START_CONTAINER],
          startOffset = this[START_OFFSET], nn, o;

        // Node is TEXT_NODE or CDATA
        if ((startContainer.nodeType === 3 || startContainer.nodeType === 4) && startContainer.nodeValue) {
          if (!startOffset) {
            // At the start of text
            startContainer.parentNode.insertBefore(n, startContainer);
          } else if (startOffset >= startContainer.nodeValue.length) {
            // At the end of text
            dom.insertAfter(n, startContainer);
          } else {
            // Middle, need to split
            nn = startContainer.splitText(startOffset);
            startContainer.parentNode.insertBefore(n, nn);
          }
        } else {
          // Insert element node
          if (startContainer.childNodes.length > 0) {
            o = startContainer.childNodes[startOffset];
          }

          if (o) {
            startContainer.insertBefore(n, o);
          } else {
            if (startContainer.nodeType == 3) {
              dom.insertAfter(n, startContainer);
            } else {
              startContainer.appendChild(n);
            }
          }
        }
      }

      function surroundContents(n) {
        var f = self.extractContents();

        self.insertNode(n);
        n.appendChild(f);
        self.selectNode(n);
      }

      function cloneRange() {
        return extend(new Range(dom), {
          startContainer: self[START_CONTAINER],
          startOffset: self[START_OFFSET],
          endContainer: self[END_CONTAINER],
          endOffset: self[END_OFFSET],
          collapsed: self.collapsed,
          commonAncestorContainer: self.commonAncestorContainer
        });
      }

      // Private methods

      function _getSelectedNode(container, offset) {
        var child;

        // TEXT_NODE
        if (container.nodeType == 3) {
          return container;
        }

        if (offset < 0) {
          return container;
        }

        child = container.firstChild;
        while (child && offset > 0) {
          --offset;
          child = child.nextSibling;
        }

        if (child) {
          return child;
        }

        return container;
      }

      function _isCollapsed() {
        return (self[START_CONTAINER] == self[END_CONTAINER] && self[START_OFFSET] == self[END_OFFSET]);
      }

      function _compareBoundaryPoints(containerA, offsetA, containerB, offsetB) {
        var c, offsetC, n, cmnRoot, childA, childB;

        // In the first case the boundary-points have the same container. A is before B
        // if its offset is less than the offset of B, A is equal to B if its offset is
        // equal to the offset of B, and A is after B if its offset is greater than the
        // offset of B.
        if (containerA == containerB) {
          if (offsetA == offsetB) {
            return 0; // equal
          }

          if (offsetA < offsetB) {
            return -1; // before
          }

          return 1; // after
        }

        // In the second case a child node C of the container of A is an ancestor
        // container of B. In this case, A is before B if the offset of A is less than or
        // equal to the index of the child node C and A is after B otherwise.
        c = containerB;
        while (c && c.parentNode != containerA) {
          c = c.parentNode;
        }

        if (c) {
          offsetC = 0;
          n = containerA.firstChild;

          while (n != c && offsetC < offsetA) {
            offsetC++;
            n = n.nextSibling;
          }

          if (offsetA <= offsetC) {
            return -1; // before
          }

          return 1; // after
        }

        // In the third case a child node C of the container of B is an ancestor container
        // of A. In this case, A is before B if the index of the child node C is less than
        // the offset of B and A is after B otherwise.
        c = containerA;
        while (c && c.parentNode != containerB) {
          c = c.parentNode;
        }

        if (c) {
          offsetC = 0;
          n = containerB.firstChild;

          while (n != c && offsetC < offsetB) {
            offsetC++;
            n = n.nextSibling;
          }

          if (offsetC < offsetB) {
            return -1; // before
          }

          return 1; // after
        }

        // In the fourth case, none of three other cases hold: the containers of A and B
        // are siblings or descendants of sibling nodes. In this case, A is before B if
        // the container of A is before the container of B in a pre-order traversal of the
        // Ranges' context tree and A is after B otherwise.
        cmnRoot = dom.findCommonAncestor(containerA, containerB);
        childA = containerA;

        while (childA && childA.parentNode != cmnRoot) {
          childA = childA.parentNode;
        }

        if (!childA) {
          childA = cmnRoot;
        }

        childB = containerB;
        while (childB && childB.parentNode != cmnRoot) {
          childB = childB.parentNode;
        }

        if (!childB) {
          childB = cmnRoot;
        }

        if (childA == childB) {
          return 0; // equal
        }

        n = cmnRoot.firstChild;
        while (n) {
          if (n == childA) {
            return -1; // before
          }

          if (n == childB) {
            return 1; // after
          }

          n = n.nextSibling;
        }
      }

      function _setEndPoint(st, n, o) {
        var ec, sc;

        if (st) {
          self[START_CONTAINER] = n;
          self[START_OFFSET] = o;
        } else {
          self[END_CONTAINER] = n;
          self[END_OFFSET] = o;
        }

        // If one boundary-point of a Range is set to have a root container
        // other than the current one for the Range, the Range is collapsed to
        // the new position. This enforces the restriction that both boundary-
        // points of a Range must have the same root container.
        ec = self[END_CONTAINER];
        while (ec.parentNode) {
          ec = ec.parentNode;
        }

        sc = self[START_CONTAINER];
        while (sc.parentNode) {
          sc = sc.parentNode;
        }

        if (sc == ec) {
          // The start position of a Range is guaranteed to never be after the
          // end position. To enforce this restriction, if the start is set to
          // be at a position after the end, the Range is collapsed to that
          // position.
          if (_compareBoundaryPoints(self[START_CONTAINER], self[START_OFFSET], self[END_CONTAINER], self[END_OFFSET]) > 0) {
            self.collapse(st);
          }
        } else {
          self.collapse(st);
        }

        self.collapsed = _isCollapsed();
        self.commonAncestorContainer = dom.findCommonAncestor(self[START_CONTAINER], self[END_CONTAINER]);
      }

      function _traverse(how) {
        var c, endContainerDepth = 0, startContainerDepth = 0, p, depthDiff, startNode, endNode, sp, ep;

        if (self[START_CONTAINER] == self[END_CONTAINER]) {
          return _traverseSameContainer(how);
        }

        for (c = self[END_CONTAINER], p = c.parentNode; p; c = p, p = p.parentNode) {
          if (p == self[START_CONTAINER]) {
            return _traverseCommonStartContainer(c, how);
          }

          ++endContainerDepth;
        }

        for (c = self[START_CONTAINER], p = c.parentNode; p; c = p, p = p.parentNode) {
          if (p == self[END_CONTAINER]) {
            return _traverseCommonEndContainer(c, how);
          }

          ++startContainerDepth;
        }

        depthDiff = startContainerDepth - endContainerDepth;

        startNode = self[START_CONTAINER];
        while (depthDiff > 0) {
          startNode = startNode.parentNode;
          depthDiff--;
        }

        endNode = self[END_CONTAINER];
        while (depthDiff < 0) {
          endNode = endNode.parentNode;
          depthDiff++;
        }

        // ascend the ancestor hierarchy until we have a common parent.
        for (sp = startNode.parentNode, ep = endNode.parentNode; sp != ep; sp = sp.parentNode, ep = ep.parentNode) {
          startNode = sp;
          endNode = ep;
        }

        return _traverseCommonAncestors(startNode, endNode, how);
      }

      function _traverseSameContainer(how) {
        var frag, s, sub, n, cnt, sibling, xferNode, start, len;

        if (how != DELETE) {
          frag = createDocumentFragment();
        }

        // If selection is empty, just return the fragment
        if (self[START_OFFSET] == self[END_OFFSET]) {
          return frag;
        }

        // Text node needs special case handling
        if (self[START_CONTAINER].nodeType == 3) { // TEXT_NODE
          // get the substring
          s = self[START_CONTAINER].nodeValue;
          sub = s.substring(self[START_OFFSET], self[END_OFFSET]);

          // set the original text node to its new value
          if (how != CLONE) {
            n = self[START_CONTAINER];
            start = self[START_OFFSET];
            len = self[END_OFFSET] - self[START_OFFSET];

            if (start === 0 && len >= n.nodeValue.length - 1) {
              n.parentNode.removeChild(n);
            } else {
              n.deleteData(start, len);
            }

            // Nothing is partially selected, so collapse to start point
            self.collapse(TRUE);
          }

          if (how == DELETE) {
            return;
          }

          if (sub.length > 0) {
            frag.appendChild(doc.createTextNode(sub));
          }

          return frag;
        }

        // Copy nodes between the start/end offsets.
        n = _getSelectedNode(self[START_CONTAINER], self[START_OFFSET]);
        cnt = self[END_OFFSET] - self[START_OFFSET];

        while (n && cnt > 0) {
          sibling = n.nextSibling;
          xferNode = _traverseFullySelected(n, how);

          if (frag) {
            frag.appendChild(xferNode);
          }

          --cnt;
          n = sibling;
        }

        // Nothing is partially selected, so collapse to start point
        if (how != CLONE) {
          self.collapse(TRUE);
        }

        return frag;
      }

      function _traverseCommonStartContainer(endAncestor, how) {
        var frag, n, endIdx, cnt, sibling, xferNode;

        if (how != DELETE) {
          frag = createDocumentFragment();
        }

        n = _traverseRightBoundary(endAncestor, how);

        if (frag) {
          frag.appendChild(n);
        }

        endIdx = nodeIndex(endAncestor);
        cnt = endIdx - self[START_OFFSET];

        if (cnt <= 0) {
          // Collapse to just before the endAncestor, which
          // is partially selected.
          if (how != CLONE) {
            self.setEndBefore(endAncestor);
            self.collapse(FALSE);
          }

          return frag;
        }

        n = endAncestor.previousSibling;
        while (cnt > 0) {
          sibling = n.previousSibling;
          xferNode = _traverseFullySelected(n, how);

          if (frag) {
            frag.insertBefore(xferNode, frag.firstChild);
          }

          --cnt;
          n = sibling;
        }

        // Collapse to just before the endAncestor, which
        // is partially selected.
        if (how != CLONE) {
          self.setEndBefore(endAncestor);
          self.collapse(FALSE);
        }

        return frag;
      }

      function _traverseCommonEndContainer(startAncestor, how) {
        var frag, startIdx, n, cnt, sibling, xferNode;

        if (how != DELETE) {
          frag = createDocumentFragment();
        }

        n = _traverseLeftBoundary(startAncestor, how);
        if (frag) {
          frag.appendChild(n);
        }

        startIdx = nodeIndex(startAncestor);
        ++startIdx; // Because we already traversed it

        cnt = self[END_OFFSET] - startIdx;
        n = startAncestor.nextSibling;
        while (n && cnt > 0) {
          sibling = n.nextSibling;
          xferNode = _traverseFullySelected(n, how);

          if (frag) {
            frag.appendChild(xferNode);
          }

          --cnt;
          n = sibling;
        }

        if (how != CLONE) {
          self.setStartAfter(startAncestor);
          self.collapse(TRUE);
        }

        return frag;
      }

      function _traverseCommonAncestors(startAncestor, endAncestor, how) {
        var n, frag, startOffset, endOffset, cnt, sibling, nextSibling;

        if (how != DELETE) {
          frag = createDocumentFragment();
        }

        n = _traverseLeftBoundary(startAncestor, how);
        if (frag) {
          frag.appendChild(n);
        }

        startOffset = nodeIndex(startAncestor);
        endOffset = nodeIndex(endAncestor);
        ++startOffset;

        cnt = endOffset - startOffset;
        sibling = startAncestor.nextSibling;

        while (cnt > 0) {
          nextSibling = sibling.nextSibling;
          n = _traverseFullySelected(sibling, how);

          if (frag) {
            frag.appendChild(n);
          }

          sibling = nextSibling;
          --cnt;
        }

        n = _traverseRightBoundary(endAncestor, how);

        if (frag) {
          frag.appendChild(n);
        }

        if (how != CLONE) {
          self.setStartAfter(startAncestor);
          self.collapse(TRUE);
        }

        return frag;
      }

      function _traverseRightBoundary(root, how) {
        var next = _getSelectedNode(self[END_CONTAINER], self[END_OFFSET] - 1), parent, clonedParent;
        var prevSibling, clonedChild, clonedGrandParent, isFullySelected = next != self[END_CONTAINER];

        if (next == root) {
          return _traverseNode(next, isFullySelected, FALSE, how);
        }

        parent = next.parentNode;
        clonedParent = _traverseNode(parent, FALSE, FALSE, how);

        while (parent) {
          while (next) {
            prevSibling = next.previousSibling;
            clonedChild = _traverseNode(next, isFullySelected, FALSE, how);

            if (how != DELETE) {
              clonedParent.insertBefore(clonedChild, clonedParent.firstChild);
            }

            isFullySelected = TRUE;
            next = prevSibling;
          }

          if (parent == root) {
            return clonedParent;
          }

          next = parent.previousSibling;
          parent = parent.parentNode;

          clonedGrandParent = _traverseNode(parent, FALSE, FALSE, how);

          if (how != DELETE) {
            clonedGrandParent.appendChild(clonedParent);
          }

          clonedParent = clonedGrandParent;
        }
      }

      function _traverseLeftBoundary(root, how) {
        var next = _getSelectedNode(self[START_CONTAINER], self[START_OFFSET]), isFullySelected = next != self[START_CONTAINER];
        var parent, clonedParent, nextSibling, clonedChild, clonedGrandParent;

        if (next == root) {
          return _traverseNode(next, isFullySelected, TRUE, how);
        }

        parent = next.parentNode;
        clonedParent = _traverseNode(parent, FALSE, TRUE, how);

        while (parent) {
          while (next) {
            nextSibling = next.nextSibling;
            clonedChild = _traverseNode(next, isFullySelected, TRUE, how);

            if (how != DELETE) {
              clonedParent.appendChild(clonedChild);
            }

            isFullySelected = TRUE;
            next = nextSibling;
          }

          if (parent == root) {
            return clonedParent;
          }

          next = parent.nextSibling;
          parent = parent.parentNode;

          clonedGrandParent = _traverseNode(parent, FALSE, TRUE, how);

          if (how != DELETE) {
            clonedGrandParent.appendChild(clonedParent);
          }

          clonedParent = clonedGrandParent;
        }
      }

      function _traverseNode(n, isFullySelected, isLeft, how) {
        var txtValue, newNodeValue, oldNodeValue, offset, newNode;

        if (isFullySelected) {
          return _traverseFullySelected(n, how);
        }

        // TEXT_NODE
        if (n.nodeType == 3) {
          txtValue = n.nodeValue;

          if (isLeft) {
            offset = self[START_OFFSET];
            newNodeValue = txtValue.substring(offset);
            oldNodeValue = txtValue.substring(0, offset);
          } else {
            offset = self[END_OFFSET];
            newNodeValue = txtValue.substring(0, offset);
            oldNodeValue = txtValue.substring(offset);
          }

          if (how != CLONE) {
            n.nodeValue = oldNodeValue;
          }

          if (how == DELETE) {
            return;
          }

          newNode = dom.clone(n, FALSE);
          newNode.nodeValue = newNodeValue;

          return newNode;
        }

        if (how == DELETE) {
          return;
        }

        return dom.clone(n, FALSE);
      }

      function _traverseFullySelected(n, how) {
        if (how != DELETE) {
          return how == CLONE ? dom.clone(n, TRUE) : n;
        }

        n.parentNode.removeChild(n);
      }

      function toStringIE() {
        return dom.create('body', null, cloneContents()).outerText;
      }

      extend(self, {
        // Initial states
        startContainer: doc,
        startOffset: 0,
        endContainer: doc,
        endOffset: 0,
        collapsed: TRUE,
        commonAncestorContainer: doc,

        // Range constants
        START_TO_START: 0,
        START_TO_END: 1,
        END_TO_END: 2,
        END_TO_START: 3,

        // Public methods
        setStart: setStart,
        setEnd: setEnd,
        setStartBefore: setStartBefore,
        setStartAfter: setStartAfter,
        setEndBefore: setEndBefore,
        setEndAfter: setEndAfter,
        collapse: collapse,
        selectNode: selectNode,
        selectNodeContents: selectNodeContents,
        compareBoundaryPoints: compareBoundaryPoints,
        deleteContents: deleteContents,
        extractContents: extractContents,
        cloneContents: cloneContents,
        insertNode: insertNode,
        surroundContents: surroundContents,
        cloneRange: cloneRange,
        toStringIE: toStringIE
      });

      return self;
    }

    // Older IE versions doesn't let you override toString by it's constructor so we have to stick it in the prototype
    Range.prototype.toString = function () {
      return this.toStringIE();
    };

    return Range;
  }
);

defineGlobal("global!Array", Array);
defineGlobal("global!Error", Error);
define(
  'ephox.katamari.api.Fun',

  [
    'global!Array',
    'global!Error'
  ],

  function (Array, Error) {

    var noop = function () { };

    var compose = function (fa, fb) {
      return function () {
        return fa(fb.apply(null, arguments));
      };
    };

    var constant = function (value) {
      return function () {
        return value;
      };
    };

    var identity = function (x) {
      return x;
    };

    var tripleEquals = function(a, b) {
      return a === b;
    };

    // Don't use array slice(arguments), makes the whole function unoptimisable on Chrome
    var curry = function (f) {
      // equivalent to arguments.slice(1)
      // starting at 1 because 0 is the f, makes things tricky.
      // Pay attention to what variable is where, and the -1 magic.
      // thankfully, we have tests for this.
      var args = new Array(arguments.length - 1);
      for (var i = 1; i < arguments.length; i++) args[i-1] = arguments[i];

      return function () {
        var newArgs = new Array(arguments.length);
        for (var j = 0; j < newArgs.length; j++) newArgs[j] = arguments[j];

        var all = args.concat(newArgs);
        return f.apply(null, all);
      };
    };

    var not = function (f) {
      return function () {
        return !f.apply(null, arguments);
      };
    };

    var die = function (msg) {
      return function () {
        throw new Error(msg);
      };
    };

    var apply = function (f) {
      return f();
    };

    var call = function(f) {
      f();
    };

    var never = constant(false);
    var always = constant(true);
    

    return {
      noop: noop,
      compose: compose,
      constant: constant,
      identity: identity,
      tripleEquals: tripleEquals,
      curry: curry,
      not: not,
      die: die,
      apply: apply,
      call: call,
      never: never,
      always: always
    };
  }
);

defineGlobal("global!Object", Object);
define(
  'ephox.katamari.api.Option',

  [
    'ephox.katamari.api.Fun',
    'global!Object'
  ],

  function (Fun, Object) {

    var never = Fun.never;
    var always = Fun.always;

    /**
      Option objects support the following methods:

      fold :: this Option a -> ((() -> b, a -> b)) -> Option b

      is :: this Option a -> a -> Boolean

      isSome :: this Option a -> () -> Boolean

      isNone :: this Option a -> () -> Boolean

      getOr :: this Option a -> a -> a

      getOrThunk :: this Option a -> (() -> a) -> a

      getOrDie :: this Option a -> String -> a

      or :: this Option a -> Option a -> Option a
        - if some: return self
        - if none: return opt

      orThunk :: this Option a -> (() -> Option a) -> Option a
        - Same as "or", but uses a thunk instead of a value

      map :: this Option a -> (a -> b) -> Option b
        - "fmap" operation on the Option Functor.
        - same as 'each'

      ap :: this Option a -> Option (a -> b) -> Option b
        - "apply" operation on the Option Apply/Applicative.
        - Equivalent to <*> in Haskell/PureScript.

      each :: this Option a -> (a -> b) -> Option b
        - same as 'map'

      bind :: this Option a -> (a -> Option b) -> Option b
        - "bind"/"flatMap" operation on the Option Bind/Monad.
        - Equivalent to >>= in Haskell/PureScript; flatMap in Scala.

      flatten :: {this Option (Option a))} -> () -> Option a
        - "flatten"/"join" operation on the Option Monad.

      exists :: this Option a -> (a -> Boolean) -> Boolean

      forall :: this Option a -> (a -> Boolean) -> Boolean

      filter :: this Option a -> (a -> Boolean) -> Option a

      equals :: this Option a -> Option a -> Boolean

      equals_ :: this Option a -> (Option a, a -> Boolean) -> Boolean

      toArray :: this Option a -> () -> [a]

    */

    var none = function () { return NONE; };

    var NONE = (function () {
      var eq = function (o) {
        return o.isNone();
      };

      // inlined from peanut, maybe a micro-optimisation?
      var call = function (thunk) { return thunk(); };
      var id = function (n) { return n; };
      var noop = function () { };

      var me = {
        fold: function (n, s) { return n(); },
        is: never,
        isSome: never,
        isNone: always,
        getOr: id,
        getOrThunk: call,
        getOrDie: function (msg) {
          throw new Error(msg || 'error: getOrDie called on none.');
        },
        or: id,
        orThunk: call,
        map: none,
        ap: none,
        each: noop,
        bind: none,
        flatten: none,
        exists: never,
        forall: always,
        filter: none,
        equals: eq,
        equals_: eq,
        toArray: function () { return []; },
        toString: Fun.constant("none()")
      };
      if (Object.freeze) Object.freeze(me);
      return me;
    })();


    /** some :: a -> Option a */
    var some = function (a) {

      // inlined from peanut, maybe a micro-optimisation?
      var constant_a = function () { return a; };

      var self = function () {
        // can't Fun.constant this one
        return me;
      };

      var map = function (f) {
        return some(f(a));
      };

      var bind = function (f) {
        return f(a);
      };

      var me = {
        fold: function (n, s) { return s(a); },
        is: function (v) { return a === v; },
        isSome: always,
        isNone: never,
        getOr: constant_a,
        getOrThunk: constant_a,
        getOrDie: constant_a,
        or: self,
        orThunk: self,
        map: map,
        ap: function (optfab) {
          return optfab.fold(none, function(fab) {
            return some(fab(a));
          });
        },
        each: function (f) {
          f(a);
        },
        bind: bind,
        flatten: constant_a,
        exists: bind,
        forall: bind,
        filter: function (f) {
          return f(a) ? me : NONE;
        },
        equals: function (o) {
          return o.is(a);
        },
        equals_: function (o, elementEq) {
          return o.fold(
            never,
            function (b) { return elementEq(a, b); }
          );
        },
        toArray: function () {
          return [a];
        },
        toString: function () {
          return 'some(' + a + ')';
        }
      };
      return me;
    };

    /** from :: undefined|null|a -> Option a */
    var from = function (value) {
      return value === null || value === undefined ? NONE : some(value);
    };

    return {
      some: some,
      none: none,
      from: from
    };
  }
);

defineGlobal("global!String", String);
define(
  'ephox.katamari.api.Arr',

  [
    'ephox.katamari.api.Option',
    'global!Array',
    'global!Error',
    'global!String'
  ],

  function (Option, Array, Error, String) {
    // Use the native Array.indexOf if it is available (IE9+) otherwise fall back to manual iteration
    // https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf
    var rawIndexOf = (function () {
      var pIndexOf = Array.prototype.indexOf;

      var fastIndex = function (xs, x) { return  pIndexOf.call(xs, x); };

      var slowIndex = function(xs, x) { return slowIndexOf(xs, x); };

      return pIndexOf === undefined ? slowIndex : fastIndex;
    })();

    var indexOf = function (xs, x) {
      // The rawIndexOf method does not wrap up in an option. This is for performance reasons.
      var r = rawIndexOf(xs, x);
      return r === -1 ? Option.none() : Option.some(r);
    };

    var contains = function (xs, x) {
      return rawIndexOf(xs, x) > -1;
    };

    // Using findIndex is likely less optimal in Chrome (dynamic return type instead of bool)
    // but if we need that micro-optimisation we can inline it later.
    var exists = function (xs, pred) {
      return findIndex(xs, pred).isSome();
    };

    var range = function (num, f) {
      var r = [];
      for (var i = 0; i < num; i++) {
        r.push(f(i));
      }
      return r;
    };

    // It's a total micro optimisation, but these do make some difference.
    // Particularly for browsers other than Chrome.
    // - length caching
    // http://jsperf.com/browser-diet-jquery-each-vs-for-loop/69
    // - not using push
    // http://jsperf.com/array-direct-assignment-vs-push/2

    var chunk = function (array, size) {
      var r = [];
      for (var i = 0; i < array.length; i += size) {
        var s = array.slice(i, i + size);
        r.push(s);
      }
      return r;
    };

    var map = function(xs, f) {
      // pre-allocating array size when it's guaranteed to be known
      // http://jsperf.com/push-allocated-vs-dynamic/22
      var len = xs.length;
      var r = new Array(len);
      for (var i = 0; i < len; i++) {
        var x = xs[i];
        r[i] = f(x, i, xs);
      }
      return r;
    };

    // Unwound implementing other functions in terms of each.
    // The code size is roughly the same, and it should allow for better optimisation.
    var each = function(xs, f) {
      for (var i = 0, len = xs.length; i < len; i++) {
        var x = xs[i];
        f(x, i, xs);
      }
    };

    var eachr = function (xs, f) {
      for (var i = xs.length - 1; i >= 0; i--) {
        var x = xs[i];
        f(x, i, xs);
      }
    };

    var partition = function(xs, pred) {
      var pass = [];
      var fail = [];
      for (var i = 0, len = xs.length; i < len; i++) {
        var x = xs[i];
        var arr = pred(x, i, xs) ? pass : fail;
        arr.push(x);
      }
      return { pass: pass, fail: fail };
    };

    var filter = function(xs, pred) {
      var r = [];
      for (var i = 0, len = xs.length; i < len; i++) {
        var x = xs[i];
        if (pred(x, i, xs)) {
          r.push(x);
        }
      }
      return r;
    };

    /*
     * Groups an array into contiguous arrays of like elements. Whether an element is like or not depends on f.
     *
     * f is a function that derives a value from an element - e.g. true or false, or a string.
     * Elements are like if this function generates the same value for them (according to ===).
     *
     *
     * Order of the elements is preserved. Arr.flatten() on the result will return the original list, as with Haskell groupBy function.
     *  For a good explanation, see the group function (which is a special case of groupBy)
     *  http://hackage.haskell.org/package/base-4.7.0.0/docs/Data-List.html#v:group
     */
    var groupBy = function (xs, f) {
      if (xs.length === 0) {
        return [];
      } else {
        var wasType = f(xs[0]); // initial case for matching
        var r = [];
        var group = [];

        for (var i = 0, len = xs.length; i < len; i++) {
          var x = xs[i];
          var type = f(x);
          if (type !== wasType) {
            r.push(group);
            group = [];
          }
          wasType = type;
          group.push(x);
        }
        if (group.length !== 0) {
          r.push(group);
        }
        return r;
      }
    };

    var foldr = function (xs, f, acc) {
      eachr(xs, function (x) {
        acc = f(acc, x);
      });
      return acc;
    };

    var foldl = function (xs, f, acc) {
      each(xs, function (x) {
        acc = f(acc, x);
      });
      return acc;
    };

    var find = function (xs, pred) {
      for (var i = 0, len = xs.length; i < len; i++) {
        var x = xs[i];
        if (pred(x, i, xs)) {
          return Option.some(x);
        }
      }
      return Option.none();
    };

    var findIndex = function (xs, pred) {
      for (var i = 0, len = xs.length; i < len; i++) {
        var x = xs[i];
        if (pred(x, i, xs)) {
          return Option.some(i);
        }
      }

      return Option.none();
    };

    var slowIndexOf = function (xs, x) {
      for (var i = 0, len = xs.length; i < len; ++i) {
        if (xs[i] === x) {
          return i;
        }
      }

      return -1;
    };

    var push = Array.prototype.push;
    var flatten = function (xs) {
      // Note, this is possible because push supports multiple arguments:
      // http://jsperf.com/concat-push/6
      // Note that in the past, concat() would silently work (very slowly) for array-like objects.
      // With this change it will throw an error.
      var r = [];
      for (var i = 0, len = xs.length; i < len; ++i) {
        // Ensure that each value is an array itself
        if (! Array.prototype.isPrototypeOf(xs[i])) throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);
        push.apply(r, xs[i]);
      }
      return r;
    };

    var bind = function (xs, f) {
      var output = map(xs, f);
      return flatten(output);
    };

    var forall = function (xs, pred) {
      for (var i = 0, len = xs.length; i < len; ++i) {
        var x = xs[i];
        if (pred(x, i, xs) !== true) {
          return false;
        }
      }
      return true;
    };

    var equal = function (a1, a2) {
      return a1.length === a2.length && forall(a1, function (x, i) {
        return x === a2[i];
      });
    };

    var slice = Array.prototype.slice;
    var reverse = function (xs) {
      var r = slice.call(xs, 0);
      r.reverse();
      return r;
    };

    var difference = function (a1, a2) {
      return filter(a1, function (x) {
        return !contains(a2, x);
      });
    };

    var mapToObject = function(xs, f) {
      var r = {};
      for (var i = 0, len = xs.length; i < len; i++) {
        var x = xs[i];
        r[String(x)] = f(x, i);
      }
      return r;
    };

    var pure = function(x) {
      return [x];
    };

    var sort = function (xs, comparator) {
      var copy = slice.call(xs, 0);
      copy.sort(comparator);
      return copy;
    };

    return {
      map: map,
      each: each,
      eachr: eachr,
      partition: partition,
      filter: filter,
      groupBy: groupBy,
      indexOf: indexOf,
      foldr: foldr,
      foldl: foldl,
      find: find,
      findIndex: findIndex,
      flatten: flatten,
      bind: bind,
      forall: forall,
      exists: exists,
      contains: contains,
      equal: equal,
      reverse: reverse,
      chunk: chunk,
      difference: difference,
      mapToObject: mapToObject,
      pure: pure,
      sort: sort,
      range: range
    };
  }
);
defineGlobal("global!setTimeout", setTimeout);
define(
  'ephox.katamari.api.LazyValue',

  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Option',
    'global!setTimeout'
  ],

  function (Arr, Option, setTimeout) {
    var nu = function (baseFn) {
      var data = Option.none();
      var callbacks = [];

      /** map :: this LazyValue a -> (a -> b) -> LazyValue b */
      var map = function (f) {
        return nu(function (nCallback) {
          get(function (data) {
            nCallback(f(data));
          });
        });
      };

      var get = function (nCallback) {
        if (isReady()) call(nCallback);
        else callbacks.push(nCallback);
      };

      var set = function (x) {
        data = Option.some(x);
        run(callbacks);
        callbacks = [];
      };

      var isReady = function () {
        return data.isSome();
      };

      var run = function (cbs) {
        Arr.each(cbs, call);
      };

      var call = function(cb) {
        data.each(function(x) {
          setTimeout(function() {
            cb(x);
          }, 0);
        });
      };

      // Lazy values cache the value and kick off immediately
      baseFn(set);

      return {
        get: get,
        map: map,
        isReady: isReady
      };
    };

    var pure = function (a) {
      return nu(function (callback) {
        callback(a);
      });
    };

    return {
      nu: nu,
      pure: pure
    };
  }
);
define(
  'ephox.katamari.async.Bounce',

  [
    'global!Array',
    'global!setTimeout'
  ],

  function (Array, setTimeout) {

    var bounce = function(f) {
      return function() {
        var args = Array.prototype.slice.call(arguments);
        var me = this;
        setTimeout(function() {
          f.apply(me, args);
        }, 0);
      };
    };

    return {
      bounce: bounce
    };
  }
);

define(
  'ephox.katamari.api.Future',

  [
    'ephox.katamari.api.LazyValue',
    'ephox.katamari.async.Bounce'
  ],

  /** A future value that is evaluated on demand. The base function is re-evaluated each time 'get' is called. */
  function (LazyValue, Bounce) {
    var nu = function (baseFn) {
      var get = function(callback) {
        baseFn(Bounce.bounce(callback));
      };

      /** map :: this Future a -> (a -> b) -> Future b */
      var map = function (fab) {
        return nu(function (callback) {
          get(function (a) {
            var value = fab(a);
            callback(value);
          });
        });
      };

      /** bind :: this Future a -> (a -> Future b) -> Future b */
      var bind = function (aFutureB) {
        return nu(function (callback) {
          get(function (a) {
            aFutureB(a).get(callback);
          });
        });
      };

      /** anonBind :: this Future a -> Future b -> Future b
       *  Returns a future, which evaluates the first future, ignores the result, then evaluates the second.
       */
      var anonBind = function (futureB) {
        return nu(function (callback) {
          get(function (a) {
            futureB.get(callback);
          });
        });
      };

      var toLazy = function () {
        return LazyValue.nu(get);
      };

      return {
        map: map,
        bind: bind,
        anonBind: anonBind,
        toLazy: toLazy,
        get: get
      };

    };

    /** a -> Future a */
    var pure = function (a) {
      return nu(function (callback) {
        callback(a);
      });
    };

    return {
      nu: nu,
      pure: pure
    };
  }
);

define(
  'ephox.katamari.async.AsyncValues',

  [
    'ephox.katamari.api.Arr'
  ],

  function (Arr) {
    /* 
     * NOTE: an `asyncValue` must have a `get` function which gets given a callback and calls 
     * that callback with a value once it is ready
     *
     * e.g 
     * {
     *   get: function (callback) { callback(10); }
     * }
     */
    var par = function (asyncValues, nu) {
      return nu(function(callback) {
        var r = [];
        var count = 0;

        var cb = function(i) {
          return function(value) {
            r[i] = value;
            count++;
            if (count >= asyncValues.length) {
              callback(r);
            }
          };
        };

        if (asyncValues.length === 0) {
          callback([]);
        } else {
          Arr.each(asyncValues, function(asyncValue, i) {
            asyncValue.get(cb(i));
          });
        }
      });
    };

    return {
      par: par
    };
  }
);
define(
  'ephox.katamari.api.Futures',

  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Future',
    'ephox.katamari.async.AsyncValues'
  ],

  function (Arr, Future, AsyncValues) {
    /** par :: [Future a] -> Future [a] */
    var par = function(futures) {
      return AsyncValues.par(futures, Future.nu);
    };

    /** mapM :: [a] -> (a -> Future b) -> Future [b] */
    var mapM = function(array, fn) {
      var futures = Arr.map(array, fn);
      return par(futures);
    };

    /** Kleisli composition of two functions: a -> Future b.
     *  Note the order of arguments: g is invoked first, then the result passed to f.
     *  This is in line with f . g = \x -> f (g a)
     *
     *  compose :: ((b -> Future c), (a -> Future b)) -> a -> Future c
     */
    var compose = function (f, g) {
      return function (a) {
        return g(a).bind(f);
      };
    };

    return {
      par: par,
      mapM: mapM,
      compose: compose
    };
  }
);
define(
  'ephox.katamari.api.Result',

  [
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Option'
  ],

  function (Fun, Option) {
    /* The type signatures for Result 
     * is :: this Result a -> a -> Bool
     * or :: this Result a -> Result a -> Result a
     * orThunk :: this Result a -> (_ -> Result a) -> Result a
     * map :: this Result a -> (a -> b) -> Result b
     * each :: this Result a -> (a -> _) -> _ 
     * bind :: this Result a -> (a -> Result b) -> Result b
     * fold :: this Result a -> (_ -> b, a -> b) -> b
     * exists :: this Result a -> (a -> Bool) -> Bool
     * forall :: this Result a -> (a -> Bool) -> Bool
     * toOption :: this Result a -> Option a
     * isValue :: this Result a -> Bool
     * isError :: this Result a -> Bool
     * getOr :: this Result a -> a -> a
     * getOrThunk :: this Result a -> (_ -> a) -> a
     * getOrDie :: this Result a -> a (or throws error)
    */

    var value = function (o) {
      var is = function (v) {
        return o === v;      
      };

      var or = function (opt) {
        return value(o);
      };

      var orThunk = function (f) {
        return value(o);
      };

      var map = function (f) {
        return value(f(o));
      };

      var each = function (f) {
        f(o);
      };

      var bind = function (f) {
        return f(o);
      };

      var fold = function (_, onValue) {
        return onValue(o);
      };

      var exists = function (f) {
        return f(o);
      };

      var forall = function (f) {
        return f(o);
      };

      var toOption = function () {
        return Option.some(o);
      };
     
      return {
        is: is,
        isValue: Fun.constant(true),
        isError: Fun.constant(false),
        getOr: Fun.constant(o),
        getOrThunk: Fun.constant(o),
        getOrDie: Fun.constant(o),
        or: or,
        orThunk: orThunk,
        fold: fold,
        map: map,
        each: each,
        bind: bind,
        exists: exists,
        forall: forall,
        toOption: toOption
      };
    };

    var error = function (message) {
      var getOrThunk = function (f) {
        return f();
      };

      var getOrDie = function () {
        return Fun.die(message)();
      };

      var or = function (opt) {
        return opt;
      };

      var orThunk = function (f) {
        return f();
      };

      var map = function (f) {
        return error(message);
      };

      var bind = function (f) {
        return error(message);
      };

      var fold = function (onError, _) {
        return onError(message);
      };

      return {
        is: Fun.constant(false),
        isValue: Fun.constant(false),
        isError: Fun.constant(true),
        getOr: Fun.identity,
        getOrThunk: getOrThunk,
        getOrDie: getOrDie,
        or: or,
        orThunk: orThunk,
        fold: fold,
        map: map,
        each: Fun.noop,
        bind: bind,
        exists: Fun.constant(false),
        forall: Fun.constant(true),
        toOption: Option.none
      };
    };

    return {
      value: value,
      error: error
    };
  }
);

/**
 * StyleSheetLoader.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles loading of external stylesheets and fires events when these are loaded.
 *
 * @class tinymce.dom.StyleSheetLoader
 * @private
 */
define(
  'tinymce.core.dom.StyleSheetLoader',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Future',
    'ephox.katamari.api.Futures',
    'ephox.katamari.api.Result',
    'tinymce.core.util.Delay',
    'tinymce.core.util.Tools'
  ],
  function (Arr, Fun, Future, Futures, Result, Delay, Tools) {
    "use strict";

    return function (document, settings) {
      var idCount = 0, loadedStates = {}, maxLoadTime;

      settings = settings || {};
      maxLoadTime = settings.maxLoadTime || 5000;

      function appendToHead(node) {
        document.getElementsByTagName('head')[0].appendChild(node);
      }

      /**
       * Loads the specified css style sheet file and call the loadedCallback once it's finished loading.
       *
       * @method load
       * @param {String} url Url to be loaded.
       * @param {Function} loadedCallback Callback to be executed when loaded.
       * @param {Function} errorCallback Callback to be executed when failed loading.
       */
      function load(url, loadedCallback, errorCallback) {
        var link, style, startTime, state;

        function passed() {
          var callbacks = state.passed, i = callbacks.length;

          while (i--) {
            callbacks[i]();
          }

          state.status = 2;
          state.passed = [];
          state.failed = [];
        }

        function failed() {
          var callbacks = state.failed, i = callbacks.length;

          while (i--) {
            callbacks[i]();
          }

          state.status = 3;
          state.passed = [];
          state.failed = [];
        }

        // Sniffs for older WebKit versions that have the link.onload but a broken one
        function isOldWebKit() {
          var webKitChunks = navigator.userAgent.match(/WebKit\/(\d*)/);
          return !!(webKitChunks && webKitChunks[1] < 536);
        }

        // Calls the waitCallback until the test returns true or the timeout occurs
        function wait(testCallback, waitCallback) {
          if (!testCallback()) {
            // Wait for timeout
            if ((new Date().getTime()) - startTime < maxLoadTime) {
              Delay.setTimeout(waitCallback);
            } else {
              failed();
            }
          }
        }

        // Workaround for WebKit that doesn't properly support the onload event for link elements
        // Or WebKit that fires the onload event before the StyleSheet is added to the document
        function waitForWebKitLinkLoaded() {
          wait(function () {
            var styleSheets = document.styleSheets, styleSheet, i = styleSheets.length, owner;

            while (i--) {
              styleSheet = styleSheets[i];
              owner = styleSheet.ownerNode ? styleSheet.ownerNode : styleSheet.owningElement;
              if (owner && owner.id === link.id) {
                passed();
                return true;
              }
            }
          }, waitForWebKitLinkLoaded);
        }

        // Workaround for older Geckos that doesn't have any onload event for StyleSheets
        function waitForGeckoLinkLoaded() {
          wait(function () {
            try {
              // Accessing the cssRules will throw an exception until the CSS file is loaded
              var cssRules = style.sheet.cssRules;
              passed();
              return !!cssRules;
            } catch (ex) {
              // Ignore
            }
          }, waitForGeckoLinkLoaded);
        }

        url = Tools._addCacheSuffix(url);

        if (!loadedStates[url]) {
          state = {
            passed: [],
            failed: []
          };

          loadedStates[url] = state;
        } else {
          state = loadedStates[url];
        }

        if (loadedCallback) {
          state.passed.push(loadedCallback);
        }

        if (errorCallback) {
          state.failed.push(errorCallback);
        }

        // Is loading wait for it to pass
        if (state.status == 1) {
          return;
        }

        // Has finished loading and was success
        if (state.status == 2) {
          passed();
          return;
        }

        // Has finished loading and was a failure
        if (state.status == 3) {
          failed();
          return;
        }

        // Start loading
        state.status = 1;
        link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.id = 'u' + (idCount++);
        link.async = false;
        link.defer = false;
        startTime = new Date().getTime();

        // Feature detect onload on link element and sniff older webkits since it has an broken onload event
        if ("onload" in link && !isOldWebKit()) {
          link.onload = waitForWebKitLinkLoaded;
          link.onerror = failed;
        } else {
          // Sniff for old Firefox that doesn't support the onload event on link elements
          // TODO: Remove this in the future when everyone uses modern browsers
          if (navigator.userAgent.indexOf("Firefox") > 0) {
            style = document.createElement('style');
            style.textContent = '@import "' + url + '"';
            waitForGeckoLinkLoaded();
            appendToHead(style);
            return;
          }

          // Use the id owner on older webkits
          waitForWebKitLinkLoaded();
        }

        appendToHead(link);
        link.href = url;
      }

      var loadF = function (url) {
        return Future.nu(function (resolve) {
          load(
            url,
            Fun.compose(resolve, Fun.constant(Result.value(url))),
            Fun.compose(resolve, Fun.constant(Result.error(url)))
          );
        });
      };

      var unbox = function (result) {
        return result.fold(Fun.identity, Fun.identity);
      };

      var loadAll = function (urls, success, failure) {
        Futures.par(Arr.map(urls, loadF)).get(function (result) {
          var parts = Arr.partition(result, function (r) {
            return r.isValue();
          });

          if (parts.fail.length > 0) {
            failure(parts.fail.map(unbox));
          } else {
            success(parts.pass.map(unbox));
          }
        });
      };

      return {
        load: load,
        loadAll: loadAll
      };
    };
  }
);

/**
 * Schema.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Schema validator class.
 *
 * @class tinymce.html.Schema
 * @example
 *  if (tinymce.activeEditor.schema.isValidChild('p', 'span'))
 *    alert('span is valid child of p.');
 *
 *  if (tinymce.activeEditor.schema.getElementRule('p'))
 *    alert('P is a valid element.');
 *
 * @class tinymce.html.Schema
 * @version 3.4
 */
define(
  'tinymce.core.html.Schema',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    var mapCache = {}, dummyObj = {};
    var makeMap = Tools.makeMap, each = Tools.each, extend = Tools.extend, explode = Tools.explode, inArray = Tools.inArray;

    function split(items, delim) {
      items = Tools.trim(items);
      return items ? items.split(delim || ' ') : [];
    }

    /**
     * Builds a schema lookup table
     *
     * @private
     * @param {String} type html4, html5 or html5-strict schema type.
     * @return {Object} Schema lookup table.
     */
    function compileSchema(type) {
      var schema = {}, globalAttributes, blockContent;
      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;

      function add(name, attributes, children) {
        var ni, attributesOrder, element;

        function arrayToMap(array, obj) {
          var map = {}, i, l;

          for (i = 0, l = array.length; i < l; i++) {
            map[array[i]] = obj || {};
          }

          return map;
        }

        children = children || [];
        attributes = attributes || "";

        if (typeof children === "string") {
          children = split(children);
        }

        name = split(name);
        ni = name.length;
        while (ni--) {
          attributesOrder = split([globalAttributes, attributes].join(' '));

          element = {
            attributes: arrayToMap(attributesOrder),
            attributesOrder: attributesOrder,
            children: arrayToMap(children, dummyObj)
          };

          schema[name[ni]] = element;
        }
      }

      function addAttrs(name, attributes) {
        var ni, schemaItem, i, l;

        name = split(name);
        ni = name.length;
        attributes = split(attributes);
        while (ni--) {
          schemaItem = schema[name[ni]];
          for (i = 0, l = attributes.length; i < l; i++) {
            schemaItem.attributes[attributes[i]] = {};
            schemaItem.attributesOrder.push(attributes[i]);
          }
        }
      }

      // Use cached schema
      if (mapCache[type]) {
        return mapCache[type];
      }

      // Attributes present on all elements
      globalAttributes = "id accesskey class dir lang style tabindex title role";

      // Event attributes can be opt-in/opt-out
      /*eventAttributes = split("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange " +
       "ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended " +
       "onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart " +
       "onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange " +
       "onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange " +
       "onwaiting"
       );*/

      // Block content elements
      blockContent =
        "address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul";

      // Phrasing content elements from the HTML5 spec (inline)
      phrasingContent =
        "a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd " +
        "label map noscript object q s samp script select small span strong sub sup " +
        "textarea u var #text #comment"
        ;

      // Add HTML5 items to globalAttributes, blockContent, phrasingContent
      if (type != "html4") {
        globalAttributes += " contenteditable contextmenu draggable dropzone " +
          "hidden spellcheck translate";
        blockContent += " article aside details dialog figure header footer hgroup section nav";
        phrasingContent += " audio canvas command datalist mark meter output picture " +
          "progress time wbr video ruby bdi keygen";
      }

      // Add HTML4 elements unless it's html5-strict
      if (type != "html5-strict") {
        globalAttributes += " xml:lang";

        html4PhrasingContent = "acronym applet basefont big font strike tt";
        phrasingContent = [phrasingContent, html4PhrasingContent].join(' ');

        each(split(html4PhrasingContent), function (name) {
          add(name, "", phrasingContent);
        });

        html4BlockContent = "center dir isindex noframes";
        blockContent = [blockContent, html4BlockContent].join(' ');

        // Flow content elements from the HTML5 spec (block+inline)
        flowContent = [blockContent, phrasingContent].join(' ');

        each(split(html4BlockContent), function (name) {
          add(name, "", flowContent);
        });
      }

      // Flow content elements from the HTML5 spec (block+inline)
      flowContent = flowContent || [blockContent, phrasingContent].join(" ");

      // HTML4 base schema TODO: Move HTML5 specific attributes to HTML5 specific if statement
      // Schema items <element name>, <specific attributes>, <children ..>
      add("html", "manifest", "head body");
      add("head", "", "base command link meta noscript script style title");
      add("title hr noscript br");
      add("base", "href target");
      add("link", "href rel media hreflang type sizes hreflang");
      add("meta", "name http-equiv content charset");
      add("style", "media type scoped");
      add("script", "src async defer type charset");
      add("body", "onafterprint onbeforeprint onbeforeunload onblur onerror onfocus " +
        "onhashchange onload onmessage onoffline ononline onpagehide onpageshow " +
        "onpopstate onresize onscroll onstorage onunload", flowContent);
      add("address dt dd div caption", "", flowContent);
      add("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn", "", phrasingContent);
      add("blockquote", "cite", flowContent);
      add("ol", "reversed start type", "li");
      add("ul", "", "li");
      add("li", "value", flowContent);
      add("dl", "", "dt dd");
      add("a", "href target rel media hreflang type", phrasingContent);
      add("q", "cite", phrasingContent);
      add("ins del", "cite datetime", flowContent);
      add("img", "src sizes srcset alt usemap ismap width height");
      add("iframe", "src name width height", flowContent);
      add("embed", "src type width height");
      add("object", "data type typemustmatch name usemap form width height", [flowContent, "param"].join(' '));
      add("param", "name value");
      add("map", "name", [flowContent, "area"].join(' '));
      add("area", "alt coords shape href target rel media hreflang type");
      add("table", "border", "caption colgroup thead tfoot tbody tr" + (type == "html4" ? " col" : ""));
      add("colgroup", "span", "col");
      add("col", "span");
      add("tbody thead tfoot", "", "tr");
      add("tr", "", "td th");
      add("td", "colspan rowspan headers", flowContent);
      add("th", "colspan rowspan headers scope abbr", flowContent);
      add("form", "accept-charset action autocomplete enctype method name novalidate target", flowContent);
      add("fieldset", "disabled form name", [flowContent, "legend"].join(' '));
      add("label", "form for", phrasingContent);
      add("input", "accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate " +
        "formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"
      );
      add("button", "disabled form formaction formenctype formmethod formnovalidate formtarget name type value",
        type == "html4" ? flowContent : phrasingContent);
      add("select", "disabled form multiple name required size", "option optgroup");
      add("optgroup", "disabled label", "option");
      add("option", "disabled label selected value");
      add("textarea", "cols dirname disabled form maxlength name readonly required rows wrap");
      add("menu", "type label", [flowContent, "li"].join(' '));
      add("noscript", "", flowContent);

      // Extend with HTML5 elements
      if (type != "html4") {
        add("wbr");
        add("ruby", "", [phrasingContent, "rt rp"].join(' '));
        add("figcaption", "", flowContent);
        add("mark rt rp summary bdi", "", phrasingContent);
        add("canvas", "width height", flowContent);
        add("video", "src crossorigin poster preload autoplay mediagroup loop " +
          "muted controls width height buffered", [flowContent, "track source"].join(' '));
        add("audio", "src crossorigin preload autoplay mediagroup loop muted controls " +
          "buffered volume", [flowContent, "track source"].join(' '));
        add("picture", "", "img source");
        add("source", "src srcset type media sizes");
        add("track", "kind src srclang label default");
        add("datalist", "", [phrasingContent, "option"].join(' '));
        add("article section nav aside header footer", "", flowContent);
        add("hgroup", "", "h1 h2 h3 h4 h5 h6");
        add("figure", "", [flowContent, "figcaption"].join(' '));
        add("time", "datetime", phrasingContent);
        add("dialog", "open", flowContent);
        add("command", "type label icon disabled checked radiogroup command");
        add("output", "for form name", phrasingContent);
        add("progress", "value max", phrasingContent);
        add("meter", "value min max low high optimum", phrasingContent);
        add("details", "open", [flowContent, "summary"].join(' '));
        add("keygen", "autofocus challenge disabled form keytype name");
      }

      // Extend with HTML4 attributes unless it's html5-strict
      if (type != "html5-strict") {
        addAttrs("script", "language xml:space");
        addAttrs("style", "xml:space");
        addAttrs("object", "declare classid code codebase codetype archive standby align border hspace vspace");
        addAttrs("embed", "align name hspace vspace");
        addAttrs("param", "valuetype type");
        addAttrs("a", "charset name rev shape coords");
        addAttrs("br", "clear");
        addAttrs("applet", "codebase archive code object alt name width height align hspace vspace");
        addAttrs("img", "name longdesc align border hspace vspace");
        addAttrs("iframe", "longdesc frameborder marginwidth marginheight scrolling align");
        addAttrs("font basefont", "size color face");
        addAttrs("input", "usemap align");
        addAttrs("select", "onchange");
        addAttrs("textarea");
        addAttrs("h1 h2 h3 h4 h5 h6 div p legend caption", "align");
        addAttrs("ul", "type compact");
        addAttrs("li", "type");
        addAttrs("ol dl menu dir", "compact");
        addAttrs("pre", "width xml:space");
        addAttrs("hr", "align noshade size width");
        addAttrs("isindex", "prompt");
        addAttrs("table", "summary width frame rules cellspacing cellpadding align bgcolor");
        addAttrs("col", "width align char charoff valign");
        addAttrs("colgroup", "width align char charoff valign");
        addAttrs("thead", "align char charoff valign");
        addAttrs("tr", "align char charoff valign bgcolor");
        addAttrs("th", "axis align char charoff valign nowrap bgcolor width height");
        addAttrs("form", "accept");
        addAttrs("td", "abbr axis scope align char charoff valign nowrap bgcolor width height");
        addAttrs("tfoot", "align char charoff valign");
        addAttrs("tbody", "align char charoff valign");
        addAttrs("area", "nohref");
        addAttrs("body", "background bgcolor text link vlink alink");
      }

      // Extend with HTML5 attributes unless it's html4
      if (type != "html4") {
        addAttrs("input button select textarea", "autofocus");
        addAttrs("input textarea", "placeholder");
        addAttrs("a", "download");
        addAttrs("link script img", "crossorigin");
        addAttrs("iframe", "sandbox seamless allowfullscreen"); // Excluded: srcdoc
      }

      // Special: iframe, ruby, video, audio, label

      // Delete children of the same name from it's parent
      // For example: form can't have a child of the name form
      each(split('a form meter progress dfn'), function (name) {
        if (schema[name]) {
          delete schema[name].children[name];
        }
      });

      // Delete header, footer, sectioning and heading content descendants
      /*each('dt th address', function(name) {
       delete schema[name].children[name];
       });*/

      // Caption can't have tables
      delete schema.caption.children.table;

      // Delete scripts by default due to possible XSS
      delete schema.script;

      // TODO: LI:s can only have value if parent is OL

      // TODO: Handle transparent elements
      // a ins del canvas map

      mapCache[type] = schema;

      return schema;
    }

    function compileElementMap(value, mode) {
      var styles;

      if (value) {
        styles = {};

        if (typeof value == 'string') {
          value = {
            '*': value
          };
        }

        // Convert styles into a rule list
        each(value, function (value, key) {
          styles[key] = styles[key.toUpperCase()] = mode == 'map' ? makeMap(value, /[, ]/) : explode(value, /[, ]/);
        });
      }

      return styles;
    }

    /**
     * Constructs a new Schema instance.
     *
     * @constructor
     * @method Schema
     * @param {Object} settings Name/value settings object.
     */
    return function (settings) {
      var self = this, elements = {}, children = {}, patternElements = [], validStyles, invalidStyles, schemaItems;
      var whiteSpaceElementsMap, selfClosingElementsMap, shortEndedElementsMap, boolAttrMap, validClasses;
      var blockElementsMap, nonEmptyElementsMap, moveCaretBeforeOnEnterElementsMap, textBlockElementsMap, textInlineElementsMap;
      var customElementsMap = {}, specialElements = {};

      // Creates an lookup table map object for the specified option or the default value
      function createLookupTable(option, defaultValue, extendWith) {
        var value = settings[option];

        if (!value) {
          // Get cached default map or make it if needed
          value = mapCache[option];

          if (!value) {
            value = makeMap(defaultValue, ' ', makeMap(defaultValue.toUpperCase(), ' '));
            value = extend(value, extendWith);

            mapCache[option] = value;
          }
        } else {
          // Create custom map
          value = makeMap(value, /[, ]/, makeMap(value.toUpperCase(), /[, ]/));
        }

        return value;
      }

      settings = settings || {};
      schemaItems = compileSchema(settings.schema);

      // Allow all elements and attributes if verify_html is set to false
      if (settings.verify_html === false) {
        settings.valid_elements = '*[*]';
      }

      validStyles = compileElementMap(settings.valid_styles);
      invalidStyles = compileElementMap(settings.invalid_styles, 'map');
      validClasses = compileElementMap(settings.valid_classes, 'map');

      // Setup map objects
      whiteSpaceElementsMap = createLookupTable(
        'whitespace_elements',
        'pre script noscript style textarea video audio iframe object code'
      );
      selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');
      shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' +
        'meta param embed source wbr track');
      boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' +
        'noshade nowrap readonly selected autoplay loop controls');
      nonEmptyElementsMap = createLookupTable('non_empty_elements', 'td th iframe video audio object ' +
        'script pre code', shortEndedElementsMap);
      moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', 'table', nonEmptyElementsMap);
      textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' +
        'blockquote center dir fieldset header footer article section hgroup aside nav figure');
      blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' +
        'th tr td li ol ul caption dl dt dd noscript menu isindex option ' +
        'datalist select optgroup figcaption', textBlockElementsMap);
      textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' +
        'dfn code mark q sup sub samp');

      each((settings.special || 'script noscript noframes noembed title style textarea xmp').split(' '), function (name) {
        specialElements[name] = new RegExp('<\/' + name + '[^>]*>', 'gi');
      });

      // Converts a wildcard expression string to a regexp for example *a will become /.*a/.
      function patternToRegExp(str) {
        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');
      }

      // Parses the specified valid_elements string and adds to the current rules
      // This function is a bit hard to read since it's heavily optimized for speed
      function addValidElements(validElements) {
        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder,
          prefix, outputName, globalAttributes, globalAttributesOrder, key, value,
          elementRuleRegExp = /^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,
          attrRuleRegExp = /^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,
          hasPatternsRegExp = /[*?+]/;

        if (validElements) {
          // Split valid elements into an array with rules
          validElements = split(validElements, ',');

          if (elements['@']) {
            globalAttributes = elements['@'].attributes;
            globalAttributesOrder = elements['@'].attributesOrder;
          }

          // Loop all rules
          for (ei = 0, el = validElements.length; ei < el; ei++) {
            // Parse element rule
            matches = elementRuleRegExp.exec(validElements[ei]);
            if (matches) {
              // Setup local names for matches
              prefix = matches[1];
              elementName = matches[2];
              outputName = matches[3];
              attrData = matches[5];

              // Create new attributes and attributesOrder
              attributes = {};
              attributesOrder = [];

              // Create the new element
              element = {
                attributes: attributes,
                attributesOrder: attributesOrder
              };

              // Padd empty elements prefix
              if (prefix === '#') {
                element.paddEmpty = true;
              }

              // Remove empty elements prefix
              if (prefix === '-') {
                element.removeEmpty = true;
              }

              if (matches[4] === '!') {
                element.removeEmptyAttrs = true;
              }

              // Copy attributes from global rule into current rule
              if (globalAttributes) {
                for (key in globalAttributes) {
                  attributes[key] = globalAttributes[key];
                }

                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);
              }

              // Attributes defined
              if (attrData) {
                attrData = split(attrData, '|');
                for (ai = 0, al = attrData.length; ai < al; ai++) {
                  matches = attrRuleRegExp.exec(attrData[ai]);
                  if (matches) {
                    attr = {};
                    attrType = matches[1];
                    attrName = matches[2].replace(/::/g, ':');
                    prefix = matches[3];
                    value = matches[4];

                    // Required
                    if (attrType === '!') {
                      element.attributesRequired = element.attributesRequired || [];
                      element.attributesRequired.push(attrName);
                      attr.required = true;
                    }

                    // Denied from global
                    if (attrType === '-') {
                      delete attributes[attrName];
                      attributesOrder.splice(inArray(attributesOrder, attrName), 1);
                      continue;
                    }

                    // Default value
                    if (prefix) {
                      // Default value
                      if (prefix === '=') {
                        element.attributesDefault = element.attributesDefault || [];
                        element.attributesDefault.push({ name: attrName, value: value });
                        attr.defaultValue = value;
                      }

                      // Forced value
                      if (prefix === ':') {
                        element.attributesForced = element.attributesForced || [];
                        element.attributesForced.push({ name: attrName, value: value });
                        attr.forcedValue = value;
                      }

                      // Required values
                      if (prefix === '<') {
                        attr.validValues = makeMap(value, '?');
                      }
                    }

                    // Check for attribute patterns
                    if (hasPatternsRegExp.test(attrName)) {
                      element.attributePatterns = element.attributePatterns || [];
                      attr.pattern = patternToRegExp(attrName);
                      element.attributePatterns.push(attr);
                    } else {
                      // Add attribute to order list if it doesn't already exist
                      if (!attributes[attrName]) {
                        attributesOrder.push(attrName);
                      }

                      attributes[attrName] = attr;
                    }
                  }
                }
              }

              // Global rule, store away these for later usage
              if (!globalAttributes && elementName == '@') {
                globalAttributes = attributes;
                globalAttributesOrder = attributesOrder;
              }

              // Handle substitute elements such as b/strong
              if (outputName) {
                element.outputName = elementName;
                elements[outputName] = element;
              }

              // Add pattern or exact element
              if (hasPatternsRegExp.test(elementName)) {
                element.pattern = patternToRegExp(elementName);
                patternElements.push(element);
              } else {
                elements[elementName] = element;
              }
            }
          }
        }
      }

      function setValidElements(validElements) {
        elements = {};
        patternElements = [];

        addValidElements(validElements);

        each(schemaItems, function (element, name) {
          children[name] = element.children;
        });
      }

      // Adds custom non HTML elements to the schema
      function addCustomElements(customElements) {
        var customElementRegExp = /^(~)?(.+)$/;

        if (customElements) {
          // Flush cached items since we are altering the default maps
          mapCache.text_block_elements = mapCache.block_elements = null;

          each(split(customElements, ','), function (rule) {
            var matches = customElementRegExp.exec(rule),
              inline = matches[1] === '~',
              cloneName = inline ? 'span' : 'div',
              name = matches[2];

            children[name] = children[cloneName];
            customElementsMap[name] = cloneName;

            // If it's not marked as inline then add it to valid block elements
            if (!inline) {
              blockElementsMap[name.toUpperCase()] = {};
              blockElementsMap[name] = {};
            }

            // Add elements clone if needed
            if (!elements[name]) {
              var customRule = elements[cloneName];

              customRule = extend({}, customRule);
              delete customRule.removeEmptyAttrs;
              delete customRule.removeEmpty;

              elements[name] = customRule;
            }

            // Add custom elements at span/div positions
            each(children, function (element, elmName) {
              if (element[cloneName]) {
                children[elmName] = element = extend({}, children[elmName]);
                element[name] = element[cloneName];
              }
            });
          });
        }
      }

      // Adds valid children to the schema object
      function addValidChildren(validChildren) {
        var childRuleRegExp = /^([+\-]?)(\w+)\[([^\]]+)\]$/;

        // Invalidate the schema cache if the schema is mutated
        mapCache[settings.schema] = null;

        if (validChildren) {
          each(split(validChildren, ','), function (rule) {
            var matches = childRuleRegExp.exec(rule), parent, prefix;

            if (matches) {
              prefix = matches[1];

              // Add/remove items from default
              if (prefix) {
                parent = children[matches[2]];
              } else {
                parent = children[matches[2]] = { '#comment': {} };
              }

              parent = children[matches[2]];

              each(split(matches[3], '|'), function (child) {
                if (prefix === '-') {
                  delete parent[child];
                } else {
                  parent[child] = {};
                }
              });
            }
          });
        }
      }

      function getElementRule(name) {
        var element = elements[name], i;

        // Exact match found
        if (element) {
          return element;
        }

        // No exact match then try the patterns
        i = patternElements.length;
        while (i--) {
          element = patternElements[i];

          if (element.pattern.test(name)) {
            return element;
          }
        }
      }

      if (!settings.valid_elements) {
        // No valid elements defined then clone the elements from the schema spec
        each(schemaItems, function (element, name) {
          elements[name] = {
            attributes: element.attributes,
            attributesOrder: element.attributesOrder
          };

          children[name] = element.children;
        });

        // Switch these on HTML4
        if (settings.schema != "html5") {
          each(split('strong/b em/i'), function (item) {
            item = split(item, '/');
            elements[item[1]].outputName = item[0];
          });
        }

        // Add default alt attribute for images, removed since alt="" is treated as presentational.
        // elements.img.attributesDefault = [{name: 'alt', value: ''}];

        // Remove these if they are empty by default
        each(split('ol ul sub sup blockquote span font a table tbody tr strong em b i'), function (name) {
          if (elements[name]) {
            elements[name].removeEmpty = true;
          }
        });

        // Padd these by default
        each(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption'), function (name) {
          elements[name].paddEmpty = true;
        });

        // Remove these if they have no attributes
        each(split('span'), function (name) {
          elements[name].removeEmptyAttrs = true;
        });

        // Remove these by default
        // TODO: Reenable in 4.1
        /*each(split('script style'), function(name) {
         delete elements[name];
         });*/
      } else {
        setValidElements(settings.valid_elements);
      }

      addCustomElements(settings.custom_elements);
      addValidChildren(settings.valid_children);
      addValidElements(settings.extended_valid_elements);

      // Todo: Remove this when we fix list handling to be valid
      addValidChildren('+ol[ul|ol],+ul[ul|ol]');


      // Some elements are not valid by themselves - require parents
      each({
        dd: 'dl',
        dt: 'dl',
        li: 'ul ol',
        td: 'tr',
        th: 'tr',
        tr: 'tbody thead tfoot',
        tbody: 'table',
        thead: 'table',
        tfoot: 'table',
        legend: 'fieldset',
        area: 'map',
        param: 'video audio object'
      }, function (parents, item) {
        if (elements[item]) {
          elements[item].parentsRequired = split(parents);
        }
      });


      // Delete invalid elements
      if (settings.invalid_elements) {
        each(explode(settings.invalid_elements), function (item) {
          if (elements[item]) {
            delete elements[item];
          }
        });
      }

      // If the user didn't allow span only allow internal spans
      if (!getElementRule('span')) {
        addValidElements('span[!data-mce-type|*]');
      }

      /**
       * Name/value map object with valid parents and children to those parents.
       *
       * @example
       * children = {
       *    div:{p:{}, h1:{}}
       * };
       * @field children
       * @type Object
       */
      self.children = children;

      /**
       * Name/value map object with valid styles for each element.
       *
       * @method getValidStyles
       * @type Object
       */
      self.getValidStyles = function () {
        return validStyles;
      };

      /**
       * Name/value map object with valid styles for each element.
       *
       * @method getInvalidStyles
       * @type Object
       */
      self.getInvalidStyles = function () {
        return invalidStyles;
      };

      /**
       * Name/value map object with valid classes for each element.
       *
       * @method getValidClasses
       * @type Object
       */
      self.getValidClasses = function () {
        return validClasses;
      };

      /**
       * Returns a map with boolean attributes.
       *
       * @method getBoolAttrs
       * @return {Object} Name/value lookup map for boolean attributes.
       */
      self.getBoolAttrs = function () {
        return boolAttrMap;
      };

      /**
       * Returns a mapÂ÷\7²ZÜ¿iĞ?®:E[ğùóV>›¹üÜ—É]¢*²úÒW-ş…ãÍSô]ßà7~±w…Íò9æŞôşVÚ;¾õ~6Óì/Æ)«gkÖŸNv®»şİkÿ†x*öı¶µtü]ßéÜ¹\ıŠwaUõ;W¼~İ_óëœò~Áôîşk½¸T’D„B  Š "vB‡A‘’à°H,-°
H?à’4†ú…(Šé‚ 'BÍôaÄ@LØ(
j($ âb‡]^AĞP¹©’ Ğ†Q<Š|ePÀ±@“U„!ƒÅ¬¬#	 JP¤$Z%¨1ET$- 0™rÂh D0… !¨d8GF¹Î  "‡ à¤	«`A”’RR:@‚,GN0<Ò…”TÁ-‚˜Çq[$:ˆ€˜®+°ØHh˜!úÆËÔ4
@¾:W‚€ÏVšuQw¢Îî«£øÕÊ|ı- ı¯GGßÊ/Ï~ëKíCõ5îÕûÑÂ¨¯êbî\÷=ïWÉ³ùohWûÿ[?}jND]®sG=ÛÉİÉ¬ùòÓ«]v•Vÿ§½ş¶üßÒ{ªFÇ¡®fvÊâ—léS÷Ï_ös¡q=zï»ù½æ³ÛÛĞp   AÎÄˆ
€
Ê 8ĞWFÊÎèzæŠáŠ!Ò5E	i%nô·€TkL€€¡Â ‘¢	°mïb ƒjÔ9¡¨¦HM`#†Af”p ´2b@ ¹*s ‚J$± #Ì2Ø‚˜A$¿X1´ê¹½<íÓÿ1ïş9şø"¹ï
%ë±k‹Çø¯O|úÉ;Ìû²ÜšS_×ö«}\ä÷u÷X6EøW¿ŸåûâÌûRœ16k_ğ&ß÷;’Û÷…íÍ¾¼ğ§ã_êÓ?5ÒÎ[úÜÿëğó]õ˜ÿï×¯ı¸–~ğ:+³¬ø/§ÆîëßŠçé\=}ãş]z%üİıµı—ø}(ïÕGmu26®67¬”¶ßÕÿCxûñ®†ø·Çù§ü.¼ô‡fe¢şfÎÜGwšìT}n¸aÓ/)&ó÷¾uİàÏîr‘^v§3ŠrŞ”ÚÔ}ÁÜß{^àVMŸÏÈøÇId|ÿïsş—åÎ2Öˆ@P2­‚  
B 1ÄC2Œ- 3üA  
 @Á@™æ— ’@y˜ zLeŒ@ú! o8!”è@V0 B6Ã`:T2*A‘øXEN@3´	€IH€@@  ál€CŒÇ`À ğ¨é	€æÕ\¾´—è…Ü«ëkâO[zº–î,¸“?7è®yŸ{·³OâáõfË·şoÆ9~øú3‰ykÁuW_—ÊOóOpûK½¿$CÖ½6—±~` ½ğ½_^V^_Ù±çÓÄõŸî×i-UœÛ6Nâ»,vùüõifk•ïnïõÿ÷BiZßù™¦²„’J`!`f1Àdud!‘!¨h„€!ÁËDˆ¼h$„$ƒŠ A:xD P„ƒ‚˜C||‚Â!G…«„L€iŒ9C‹Y€§
$FA„B êF !åJàF I!€b@& PÈˆ)Hæ@ƒ Q%Ãta€ É
+•GO:.‚ 60f Ğ2„ZD¤ ‘8  €€ˆCHšB	 s2á Óè„)°`
ÔRH"(Äb	Mk ‚€R„õ CpzÃ5@ËDÙ];„İÔ_Ûğ;)l<_´'oŞÜÅZb6Rïf[»£E–xİÖ¼~ışîúßß`Ë¦±®¿‘^’ßÛt~ı¶/øW«ë¨}ùÿaBêüøcî'ÿßœÍ¶¶_îKïô,úúã½^OşI±°NÙ÷õûuâ>ÿ½‹­£^]¤qKß —“ „j³*C!° %Gˆ&…£Ê BPCÀƒ„!E„ €¢@`!å ¢3%›bPˆÊ)†¡#ˆXp	J0ìPE A	ˆ

ŒQ`@Å€ T  -BItÆ¢€®B›t"hK–“[îî3é¯ı÷OPPõı÷÷Õ2Ã:õ)Ô¡±ÚşŸıåÂùÅÎ¬wÜòjÚ,X¯m7ğºrÚÄ
ßïÆŸãó»çK½üf4û‡ßïŸâÕme7ßJ8Ú:¬ûĞ]dZØ5ø}ıçèÏøÍ}/˜å=™Ü·Í/_8Nú?ÑïïçÏqoªQm;¿SŞD=¯Ñ¬ÿÎzmô>çoSİNgÔ‘Ÿû˜ÛMı×mõœSÏ¼|tãÿµçuıWÃÇŸšxiüc'Íñ½8÷›õW~ÿÜ·ÿ†Â—»Ş‹%s6×»Ï×oÏ’6=?òLÿ¹ûö¦+½sÎ”¿_ëtô|fuëÏ½ş.Ê]	¾$I€ˆKä„
€‰T Q&‚Ò((„À§tÙ¢À@°!¨ğ&CHI¦ TP!,€‚0†¡bJ&Q1ÄdŠ’ À‚m˜Š<ÀOYˆˆH ´Á MPæ°€À„¸Á¤HQ£&+„+Éôœ  C‚’M^::wiçoıº÷.uõsnÑóZq~ü¿œtgt³¿î¯é†ñé&g“§ÅµrÓ&=Æ×AİışÕÌ²õ5øÍÑÎïõ‰ÈË{ì}¬{NÔ¼_Û¯ÇÆ+6äÏïÿjÜğ¸Z¯ÿ¥ÊÎu“Gqåöü]U_ôÃ%=gGvgûÕs?÷Ü~·Ù<~Yş,aH(¶ƒ›/I`!BÃ!hB¥0 ã%"€ÆĞJ %†ˆG à 9¦45 @8 2b,F@
À˜1H0p(@È<‰‚‡	`<@Tv ĞF"@à4xô'Îl„€ ©’HÕ`BÀ(@"@ 2A$ˆ3QBñ*ê'„  ËB`A€$¡ Dp£P¡DB PRANàØ @¦%¨1Ş$((ˆY©
Æ `‚ÉJEM
 Ht È`kXD@* Àå ÚJY…3†¥EHfÉD:`"`.eƒ$‘Ü–G¤ÃKm×p7NFÿÙ×wYXûø®–˜¾9rMİûx§Ù¼ßUÑfÖÖ‹Ë»±_¾iI÷ÿfêîR¹¦{Õ}®dÿË‡Cù~aûÿ2Sæ–ççıÌÏÌ}øïaïıO¯›ıÜË‹ùšvf¦§1=níëŞéÇğ©~G.Ğô S j ¶'ÅÄ#ˆYX %3/0a 	0«EL<À ƒ„Â(€c  ` d\Ò2 õ  ŠR LJoP¨ÑHÂ‰	4±í‰(…X¬z(3SRRà@Ë0 0€Œ˜\$PHA à Bø7…›Âi”óX}3ı¶Ï)eïGG;ıi]}*©İşŞWk¯ºvùï¹¿ıç•»Õ—ÿëíğw/.bÏİıÏï©ç^Ætõ‡ÛtÖb/êñÑzşÂywÖÏ5\u·]î^·šù¥éÍúYUÊ>@8ïÂ/Ÿ~Ø*!¦SıR×Ô¾Í™R5ï±ÎŸéLë{jUqì-xÙ¯¿ÛëïT=åKUW?e
Mpß§]³çñİé6¯æK‡5Ü¿üN>Ë¯}Ó9ö\æ´vğX©OÒ¹|7Íõ-·³-óŞ"<üş÷şXØ‰áºïòvóW=Ò;ŸŸéîw“šgbuõï49ßµè¶Ğw¿Q /€*”­*Ìã¢ğpÈ4\X@1ªBœ™E¤ÈZÎFÇ% 7šAÀÊ˜ƒI,`%tÈ…(p`Âpd:
q Dj†H  0’&P õAa5í52âB¢€â² IˆÈğA‰Dx=§ËÏı¤ù¬×‹{;7øÕWŠ´_ğÇûïJ#æPíÓŸ7¤ş®ZFPE?Ë6ü¡àoa=]ç–÷ÂÃùŸ·—Æß¿Íj#÷–“>‹¾ûÂªš›ııç¾é^óú{?€·ßSÑ¿6L:y~ÏTÅM±EÚü/öî÷9=z«¦ÅA…f˜…C@‚Àâ`	I2E2$RÉâ (Hˆ·"“"‰UDÓ °8Š=WTP
RT!UÊa€˜­#B1‘å`€ áØÑñD!á<Caøt b€˜’ l3 4	"°pJP Qu0F@‚Dh4kUÕ&p‡"0 £ˆXôà AHó8r‰O"ä®Š äR Œ.²Ö„Š	  ô)Ä$80D ²â
IH‰´˜(çk=0B"ET ¾´"$›`B@” ¤	˜B&A2‘Äš:§f>nó|óç_öT¦{ÿúuµäÿbÏZÓø«/ÚKÑßçÿı~öO¼Ëdv—I\ïmíü\îŒ
ûn¾æ…ÚÎımóMç«vË¼*œÚ—I@ïgóİÏ¾õm£uç[ŞSAì¼±kè×ó^‘ı{ÏË‡í¯I÷:ñXß<ÓÏïÇ^÷}äH@(¤¤Q€Ê@HE‘èŠT
’4‚"  šL$K7!ù€48 ru:< öW
°  ¨N HÀ„´Ø J § ·`À £Y!T# ’1#$4*À	" *IŠ!Á Æ)°
ˆ´`6Š‰Ípk¹ëøò?‰Ë—ómô¿¯£üEä«^Çècq?¼;ôwïóÏìm¹éÍUásó_º8Õ;ÿ§s¯¿ëì­É—‚ß^İEŞåçÛşjş~Xoùâ´o¿õªØ¿Áïk¼ö	M½ÿ3»Øò—Çétw‚]ö%éØ}°¾ÒùFùQÙªú{’ù!÷Şß.vë|¿ª£ü¥Ëö‹ËXs'w,vÕyka7Î©™÷ºÆoù_Fõ¾‡gºòşc*v·ü·ôªôééKÓÿßŸÍx‚’¬óºµ¡Âö©nìš×oÖïúùÑ8ÚÛMP‹]k3ºqWïêª=¶2A  #ªpËĞSF„ª„PW@$€	° DÂ]2Bb¹ \Ê´É0ç
 ˆªR,*§°QOà%D0JŠ(
ÑbŒ>e‰H	HF`V8 ¨h` "
jÁ¸È[ğ Hb`€" &À@c"šOBš$JJ °@ €8à(æLH°"$H 
ù €Wj§x‰(nE8\VP)#¤ ¶"à	@ ˆA@((~ ì €!ËÜ1 ) ãB® ¨¶`¡Õ Pƒ‰€H£-œ„ ¼©Ñ0ÿş]ö$ûŞ£]wß›ø‹-z×—{4}ºk§64¾ş[q6÷jeU«­]ÏVû¼ö{ı s³Şúõ
!ÒË†?5ÕÏ¬§ó{ÅÃLÀ5¼şæËõ^½åöùÿGôù«÷ß×öıt%{5ö··¿¡ÏËı³Rÿ¦ç‘yl=ò::7éÖs{Ëë’È>Œ\‡ÍçşWÌë¿{o·iÖo0ßJ­~oƒ;ÖyÚÅjmà-Œøkùo)šıq§^úyóoäzÎwsı^ïŸúã]€|¨¿Ô÷Î·#ıMÉdíî•‹.^ŸS,½yâïWŸüwªØ—ß¾\UÚtïé±2™#Ÿ>Q¨ £2¤$2(T1Xx  ĞRQX!„ `B ô‡€¥`(ˆ‚ G'@Ä‚ #ˆ"–¥8€ P
 ¨Ä8²XPa *Fb 8Èl€C) ÉÜŠBBb£Ø„»ÄB<é¨¡8Hâ_³?Ö¶ámíŞ³w^u»+µ?Å¼[ñÿb·Ñ$Ÿ-İ|ß×¾yÍtÿt_u¿óÏËoqßíıûkærq¹¼ÿÂÅ4îıu§µë{-÷FbúêËÿ¬ôÎ½0uÖÜd³–+kİ#ø>·¥ú)ÿèï~SPâÌßv_¯çn¥O7¶»Ÿù´“óI†kf0 9!M àˆB%D'Ê< Ô-¥Â[ÉU  Â‘;€‚R>A¸Ø%CÛ0dH&C“ ˆH”@!‰éÁHZÄ‰œ™	@s@ˆTÀø
¡ 1*d¨Tn‘ q©ABP©BBòF” €ûù¤BŒjNAAPÎ #B@8 ƒBàH & ™B

 ğ ¤VÆ)&Dàˆ‚4á
(€± €:è¢ ãdh /’8QP#‰8„D€RÃÂå(K©Í‚Ç_vbÍ·}òïí3óïÖ;ÿ‘üÅëqËşû¿q@/ïvŸ3úyClSvØzøË°^W *]}óÿÓ¿øaäñ×y©ûŒ¦ç|¹©ıÏæ[O»_ºƒ÷}«- W§N¬e×ë/JtıŸïV³Ï¥;Õùê]oşŸûy¡®\¦Lˆ I#CAbøB€Ê"pKD(Œ+3!ÉAI‚(‹1ˆ6„„-Ğ@€ À@ª	Š¹F©€<€€"%è©áÏ ­|Èá8F*èªRlÀ	¨"
 "B‰`hƒÆ` ² tsÿc]ŠıÿêŞú"X¿xÍR;ã#è_YŠã[U›L7­ıujz½}¦+=c¾d›«ä“ï§ÿì÷tÚö#›¿×öŸ¿şk¯5~ş§5ß=úã“Ÿ9÷ÔOWùÿá7—›ã×¦¯Oó¿??,zËÿ'/”ö5ó·›õ¿Ï}ë÷w^Ü˜ÓÕg¥´ëlu¹­Ã~¾.góó\5üşñ›ÉõVª»ôÛ^r×‰oÍhr>W»Şë¼»ö®˜¶m¾µ°7eêCd+Ûqûú
·5+.–½Î·¡¯Ÿò¶¿şo{{{õwÿœ|šÆ´sÔ·ÍonÏ¶M¦½·ßgwHßïcv b’ğ€b!’¨0ˆ`ÚBD%Xˆ	 DàB„¤`’ĞÀçUÇ AE¸ÌÀ$J‹Š,   Åh$äL‘  ¢’Úœ	ng/ (Q¨6°"	Š XÌbù?¢QØ ì  ÆÀ ‚LcjÈ_ÄLbÖ›ïßù¥—`ÔÒê›ÿç3ïçÓíÌõ'Ñ?´'ó?Åèóåëi[~õ‡ä³ú¾Ş„w¦Ç[o—°¤‡æ÷x×Æ¯×jû}o÷ç·¿¡ôïÃéöşıÙçNêßOÿ£Kğ9§»ìIûæfãohZ•%ôÖ~²®A=g_ÏÁnïíB€q¸ª@ ` cT
%Rñf ÑM„A
@ª T„ 8-H˜
4	˜.U˜j0İˆ[!’jH\ `Ecâ1M H Œ ‚ À¥F(‘@PP ˆ9P°…
¡¸	TVÁ!PT@™ B†Â„+  ¼H!dUìë9‚IbDÉT( @! 0à „¢	%H ((˜c€€(¦‚Á´%‰hH˜‡Ú‰ƒ€‚F#–€ø€"‘(r ¤@$Ò	2—a`F„Ñ ¼‰Q‚gÕó­öşİós~Æµì¶¬YşUËí{§qüæjõ¦o¡5ÿKú›ïkg4³îŒõßß1R‰ò¼ÿmÚ×1]ïıûÃ ‘\xjÇ®ØoOö·.ÆùÕğ½nİìv`¶?´rû×®uÜñ×Õv½æÍÎmÿøöÕó÷Ë~Jãwçm»¾=‚€Sgƒ)3jôD9!à¨£Z… 0‰p@ Le	1@+ÀJF QÇC
@V"€) &ã‹0ˆ¢"‚9: ƒ`ø¥JFA(DÄ( lƒ*IÙ´ €°LC‚§A£  Œ¶4„ t°HÉ[Hqïïò×øÛó˜/y=ÁY‡µ:oü¦nã¾è‡}Á­ÈÔoı“wÙÒ~Û‹÷ï·¼×ßıåk{œáîÍ(7[Ï{S¹âS;é/—Íp©¿K£ß&oß²w½gntóWüÁırûûâü_ãoûj¦?šü÷vŸ5;õûçÑÿ¼ó—A¿½ÜŒ·y¾öÊò>¶ŞÉ±Ge½\ßÌ»‘¶uß×1ÿ5§Qí_«¿ÿ§*ûlßºß×úüıÛÿ7ßZ„•Á.\µõÊ÷z¯V÷×ëw.ıî~Ç«ù—uc_^zó£nVí;ãuplÿ·bæÍ6ßÜÒ³º¿¿éÇ<=´ßuÏgU¾“ı7û) ! ä("
˜3R`pI%•ÀRRCÀkBrÑ¦ P ’	£BLA’$ƒ0`ÌDƒœ,bÀ$´‘×VÃ08Àr.
ëhÀ¨LOÚm	  DÎ‰%x¢ƒQ B"x% BB+€ñ–X<®ğa#Ìäv§àşÛÓeÛô™a™¯Q}‹2ı_îİjåäsŸ«{cò`[uGXŸy5÷Ø“£NpÑ¨<éãC„ç.+zÜR÷nj}&¿›¹õÏ{gşÙOï}Û6ÿÖz:¦şïÆà·¿ê¶¸4ïúÿ+Í¦¨UïÈşiÛqÔ]¦¢Wú™vÕY÷ş›È68BeFˆ‚Â  "D "#*„l¨1IµR+>Œ <°©Ö~ŠÇš!$ jİS”,˜D@Z˜X!CXVµÑ „`diÁ%€D’£JœeR— BÃ4 ±€ˆ‘ALI
9
 s }¨ˆú#P2€(G  H€°h@  ƒB¨œ èîù¢y–Lˆ* A(x@ »$‚( FÍ-Y	¹è%+¢0C˜¤–Ht€I!³àYŠ/@‰  E A‚ˆh˜ ÚP‡%d Å’yV)Ôˆ¯ü˜Èb®ıë»Os?¬»Â¶ÖF_¯Ú®÷êmçF”ÜŞ(öz‡˜²­èxOSkt~ôä.†¿‹˜_ìİ}÷o¯v·Oû­ü?õÖßufmÅíœ]xüÍqò¯×¯Ÿ{Ò‹r_ïàç×Šï›şñ¸ü¼Éåiù“"7÷ü HÓ¿XãåãÀ)LD Í.‘L %8RÅ—;"P.‹%Œ' ~A €’`& "6À´ oM­BˆDld"PÀ˜HĞ †èÔˆ  ¥D Ú Pà`6Ğ
C$<F@ñ	CàÎ`ğÛY{ãı·¾=ó‡œÎÿùíùK­w€ßù¥şßÒÛEÙ¬fàíÏüÔk;g T)ÚåËí?ù_÷?ğÁ·e\eÕÏºß=nmŞ_}%{-öMuÿqk½Ûîûuÿóşp·İıÂ~l°¿vî.f?ıíÖRçR­wúÀ•v_ÂéOûzœS½Ï6ñ>¶îÆN„¶?–±|”zëÿ·{ºhnÛ%¯3ğVŸxÏæzØÈŞ@9sâŒú±»şÎvö?û}¾nû÷‡'!ûj2Ù4Óï\Í¿#^Yãşë-%O²ßı¯Ş<vz`®/°ktÕuÛÃW·wÚİÿõìk]ô§…_ï´xA  @8 `˜R/`‹"sÆ‘P¾8Ø@&ê "   @
+ ," JN8 VQ€«  * @ÄP€m` Œ)Ä6‰3dÁ¢’pEã ´©°K€™l
1€y(B`¤dÔCÄ`È ˆoÛ_Û¼Õuz®I·­já{S›Çeoÿ<ï}ßõËùûŞëÅÜ{ñì7V^­İ\V¶ı—İŞœıTÿªÏ~ıgp«üìT ÜüV·»ËËDOıãGt-îÿús?wQúZÇNm½ \ÏZé}b'»UËÄÖ:s¿kS“şq³÷ÌCb—¾  ˜F€’"À*b	(„@¦È P­È„Ü»(Àh$ä ÛCÒ!4’ Å6'å
  Ğq$`æÀ¡˜A<”À7&4`‚;İMãĞ#`íd‚pmÁA1¢Aã†‰}4€5 W!`ìü>4 \ÉePäc ˆ@)/„€ƒ €)Q 0™ÀÀ“‚Bæ14¬@”F´@ÀŒ`&	J © bÌ4¤FÀ ‹"h&AH„@Q2{i„DW’® ;‰îHÑ ”Š°N€eá¨! 
 C˜Xˆ Äÿô'«öÏ¡pÁÑñ>›™§lğÜşü{]üú³ë¿­švÚt»Jÿÿ™gc~'\gìßù;&XûLï¾v­ËRëımnËş{´ĞO&¾”¿ÿíSÿsj–sşMİÎJÇ&xôİš{·0Ïr—yMôÙ*ÏöÏmp²{MìËO‰|UşÒ+ôˆÊ&âHO\7\Ò‚,MÃT ˆ!> £Š°#$€²Œ‰J%Gˆ9Î	 ˜p¨0ƒ }!Qq@@ˆğ®t2‚„hA%@ˆ`ÄĞ'©ZOm „AW8@e•Ö ÂÆ•=;„P4 “ À–” ‚¢ ¬"H¬aˆø ‚šz¢SL2Q*¬' Iâ£!{PI„H`½bÃÃ –cœ
RrÁ¯2<\ ex²ÃğB\Ô@ˆ½sÁ †Á «LIDNÀL•Å‚š‘Ía~À1ñD’yÜ$2˜ˆ
f
cP  
¸2 @U€Ù*¢ 8&¸A›è¬€ rE†Èˆ,”$ÁÇ"³sC(Un}°´ «g(  	ô1q0‘IG  BT8™F0J)ˆF
±a(LG(i`£A(*8rR  €¥@Ñ5& Ltx€Ì ÉAB4UŒˆ@…ÈV@Ãˆ!—jb†¥™˜dAx€[C"ˆ ,K•€ "“PibäÀdi	‚@™T1½Ì1!Çü©‚%™!…àG	Š”( 	b¨#ƒ€@ÌJG $]Œ…€>	>	&J4R		í$J AÒ)P‰HAÈ Š šG’  DR<@@	$¥DHƒn I 
€P	vB4˜aÄ"€xÁ`LÀ°aÁtñ«À Ù§  ‘& p ƒÛ€”@$XMDFâRI2ˆt)
„+n`OY‹H¨‚¥Áš¸ ©Ô<¥”òˆQ ‚"8…àLp7'ú'aIîQ$ÈŠªP29•S0—Éa£ À€B¢J REÂ~fi¬I¡fÀ• F ‰¯Ã·"ğ@4,Jà@ †q  ( š1
a ¿£5®šCI"+XPG…&Î ê  ³kÁ,1µ2Ø`%6 ¤Z ¶ rM 4#¸Ês€´ÈÎ	RÀ	86`¿. 2|Y+à€F¯7ã¢E,¡	$M§pˆDD  &´pC¥¢€&' ÆAÇ:Œ• DÌ‰cB\Lhœ  @8l²À" RRH…d‡Dä#ÈEÂR€ªF1 +Ó(’ê2R¢!ÊÅ08„ E¸
â#49q È´ë ( ”0h Yš‘"VæhºIkğdÏ:‡1@E†‹6’(šò†Æl  SDšÌ	E VÒÂàğyT”&-1ÄØi*©$EV8V/h¥X€.Q’\$ÙD„CX ‡iéÁràQJö ‘‹õO˜ÀFÄNĞ-xï`E1	{ÙF÷·l¢ˆú¨‚ÑÀôI²‰Ã†0˜³bCRba8’¢
›0FTQ € ˆA@T$ö`Ğ„CD@J`KEP KC@„lğQ˜¨  @`@d  r ¼P  ªOX$"`` HC€á%$ ’@öA
„Î@9M2	ÒD¤16 BˆH`áT@Ğ   6¨À4,;BÂ¢&‚/ğp2Ùa €¨ (&°– ˆÓ;ö„D¢:OƒV”D@V1:@AÍ& ±bhIp Èà	€&SD Œl0? ó	`R,x¤A((«9	8ÊqBÉˆè51ÀÕ°@`QÀ„e	Ïƒ@†h“<@‚"&!CÙƒ:Êà®[2JJ"@’ ˆaQ•¡$„÷‰ó¿Ğ<C³j À€ğdY…Á B±ÈF 4‹ b–¤H©ÿ(Å4<Pp(¡À-h *ÕÍT—‡İ Â:¡,Œ¤…>òPÑ¼­@ ‚Í nˆb'-J€PDÎ ¡0…¸€%RX‚@4 C,Ä ¥@/ª#A†19C#“P-Œ¹€eeät£Â¢ƒ08ˆX @r$°Íâ˜†€»Ğé¡u ˜M‚Q	Bè ( ¥Ç
  `ƒ&bS#fE$À$ˆU€ˆÅòĞEã¦Í)€2[Ã)&ğˆBØò'I˜8'‚Ü!
@±"/%	xRÎWBØ…€`´7pÖ#¤&^@ó A4&Ğ€ @‚Š0¬ıd¢r ©8Æˆ¢2+H0  7Œ(Ø$gH(l£ €ŒíF­Lo)PÆ$‘BğÄ¡î—(Í‡"HT@1/
€Ñ%uE/å” Q%¦ƒºS w’IPÉp‚©HËk(pU8ŞI% )D¸€R¤àH P© à „U†Æ8ELÀ@D„&aÔ0Ì‚aC$C@dYXH6©\²#(p•† ÅO"		LB† æ!>Ñ0Q¦Ã, Â0bŒ°Æ¶jpÊÓ¡ªD$p	 ¡" ³aˆ€@"$ D,ÁAxf	‘!u6P),lÀ[)$êÛY€¨  K)À`)&5
 ªÀ¸†M	êcĞ¢’z€Õ((ùq KÅ ä-ç€J$a¡JEDb¿‚•	t­]À3‰¤M¤!†€=J “$)2!bßZÒŠ"aÄ‘- 5R&ØŒh‘™	 ¤@˜c€k"f(Û0†AdÄjv1 Dİ(¢!˜‹¨fIA¡ˆ¡02(ø-1È%°ˆ"2xpò>)@P1CØƒX’Ê“$$4H z, H ñÌÀaJT ÀƒFD($
“r6€Œ”B0 A¡8cª…EN€²>ED!a"j”„0²MhG#A"W @"@g†…:"‡"â…HÔFüø†Cà¦A ''
C ÚBÈL"‰„ ²/4&±‚‚Fâ£(DT‡Ät"P:‰6ÈfÈ@ò	‡#„Á2NFrZ„Ó5CâdŠú ­‘$„1bÆ W¦”!¥,ÄÊçQƒÄ/|!ö°@Hºd¥M%bÊ; QÌT‡æ,
ÉHŒ@8°3 Ê P 1ÓE$)-P(	*Tp€:Š
iUÁÄh
@0 ‘ŒB àW	ˆ€ÀX­B¡<"æ&×‚!€Ë+HÒ1 Ak xu‰ÙÁD–Bë”Êœ!Õ   P!’€ LY#p6‰ òJRAÒbk`Rl
Aà¡[şö/säBiY€åB¥^I“°(d à=Nf£6y DXS‡`A’±XYDl¡‚ÄT’„ÊP}Œ¥
<q.?‘œ,4H-ÃÍk9`bb@ €%$!"tq°ÜÓ^‚–•ga¹%LÎAe"b"ÇFX˜ª2[/ÄÅöI‘°@2R
Iš†@uš
¤.‰aÏ:øİINò$ßŞÏÏĞ„Ğ™¼‚-
±ãñEœ0Cı³‹ „'¸Ìçh‚3lA0$E‚
a8!@’b^á$ŠıtØvˆ@1K\'8ñ"èEURPìÀÄ€DäAHƒ( µ02 ™b`DI¢P"„2(%§ÑdÉÃA– !hq2H8$ Sà /@Ğ¤@†®î1:"L+¼x„çáRmÎƒÚÛP KÀ… £ˆ$,Ó0SH®F‹5€ BFdq¢&Ñ
5„ƒÀ XÅ8@#ÆEXt‰VAˆ;DœÃhè($Ğ`HàV­‹!! ¡­zKz2BøAQ'Ñê°.‚NFşÈ`Ã…$ƒÂÒNC‹Š˜ÇE‹‡µxŠ" ¬à.bĞ(´H"õ` j³"IB\rÆ€‡@‚@Ñj¨ h4Â€(a†9ê 	x°%ğ 1%UB˜°Ø`S…*a¢ (‹ 
LxSD&ç3	Dt°‹á‰€¦ş´X `@±¨J Œ‹äKB‘
‡‡ªgR llè†@6@q`jâå	ßL‰  8,ÈÖ ®B„b@2kH`‚$@—B³"zÚ ŒQö„”hA‡F“±¨RÄ1†u$„h6bl€ôL(	@(`+  x1a 	ÙL¡P5RPL¨÷`s  (BB„ÓBu)e“`Stô`œ ğ"g Ô •ªª àgkŸ¡!®¡1b€0€DT×‚8‰’B«ÈF¥D#„ –Â8V>ÊŠ%#Î –B'<X|r)Í˜u8à($…`<$ àb  ˜¬ ãG0l `%".
¬@Œ¼ *Š	2ùø 	(o¶Àn‡ÀHAF`2QAÑ@‰!
 _èÜ@AÈ`…ˆ È. e‘³˜€H  ¹(3	…
™2`„[ªƒ°†àœéK?ñQ,W@“@!q :¦,i7	¥%11Íã%¤l‘…Šr“  ‚8ˆÎ-8Ë!˜Â–ˆ`„@„6š‚Œ$ÙÂ  €Á˜aBƒ|]¿³¤Q„åÔrÊ8„€´Sfò>BĞı``C4ŠlÙŠ¸¨&NÍ2jP- Ò68	srĞÕŠÀ. -‡ „Xd€'ö†€ŠBpˆ:âa5bæ8)Ğ
QÀ*\H "Or2( iĞƒ(Pcœƒ$Œ%°D"›=\HCÈ™äšËJ$PIˆÀX‚\Æ ˜&Ò˜0~ğ¬Á…€aEˆM!Ø€DFÁpDÀ&`)GB WÎ€ B `‚§ŸÈ‚@ÊÇ9‚PL.ˆ…aR:Ûd
	°n(i{  Dà0 Ex¢(€
ÉCˆ  ò+l  Œy…ÀğèA€ Hà§Œ„@Åb`PR10`_…*„¼HQ+ !6"FŒ¼…$ å%¯a" UPQ6) U „DX‡sGEŠA”T'4…a' 8pË#<€ Á‚DMÂ0f)¨äd	*„Ä
¦¤ƒÁÇÂô¼!ÀàèÉB-v
T	*8*K°P ¼.€ucÆ	F(ó¤¸Ğ
ˆ‹`HX#ÖÈ 5D#%0‚(p!€ìÃJÖˆL,(!B=APĞ è›K¯âñCÁ·htL! !õÀ8@.…D ˆ×+dGa$bƒ0±8º=!ES¤8¢S0@df	 epšÌÂÀ ,˜Ä¸CÀ00ğQFp•Àp¨AM‹p©S¨ÁEƒó±f $rIã&°P˜5¨@„H2Ä€ Ww0GÊ™–²C²1…ĞÀÄ€GĞeEG40Ä%Ô µÔl€  ‹dM 3X09 ¿¤PE  fpÄF	I†ÀE€@€p"TK–ÁLS 7 °Â¡†DÔhÙ‚Å€ 4 …AÄSPı“Ø 5`1
AbJZHb¡XÉ A„ ,¬@$À&-À¬	©8 €fE&ƒ&ˆb a)g8© 5Pƒà¥² ÀAH7d ØkàŒ¬ÅL˜€§%jYÃ³V¤Np
HD\…@J2<0 ]¥ ¶‘½	Y‘ B“xJ¤EVR
i<¾à’Q¢ì $†U€[`Dk ‘çÆÔ TÉ*T ÄÁ`·Â8(È76
E&Ì—ãˆ 9â“L €¸HŒ`›@ Jªj/@\ ÈVğa a@ËË£8’"¦(tQÀĞ*àÆÈa48 !…€ Š+ ò	²P0µ{æÉ"Q ÊàY ÀI j¼ı#Œ,›Uà2fæE„ºP)®$Ó ±
"¬4–EÀ¥ô™ä @[ £ÓĞ-•Yı 
ÀÂ…Ğ €sHfÓŒ%`BAbP@ 'A*( %! NÌeÈ " "]'l™ÀrE°OB¨@Ù &Œ
DF >á%z|‰ê)£Q²( Íé•F â¨Àâ‘&P§GT R˜C¦`ƒ"Ø @t„j0€‹Hà‘h@G-URF°sid@u`’ õ•uÀ²M@©œÉ‹™-I!VêÒàLs…ÑÃÎ 0˜3KÒÀ8˜› è" ‚Fb"‘T„Ã€,øˆTB$¢ æ(Š‡ 0ˆ r„ 1	$ S‚-`bµÂ¨‚ĞŞf BRDà
¡',S #B¶Ü—Vò£S	’ñ“R•€ ¾D`
7àd   ìÁ°’b  ”€^qK
@a1Á!*Í4QV \Œ 	‹±¡	L@CBœ%A¢¡†O B	„@† aŒ…Ä"#¨!‹â±DA¢.àA!sA˜ƒ,¬ˆ ”‚˜8_€#È˜„ĞXÖPÀáAà!2
¢¥ %0`U±a¤ÓF@VT"Î@Ê‚ƒ¤ç‰h˜Ğ¨)t`…â(%Àe d€ˆC ¤ ”	@•†Ÿ…Ğ…B0áL€Ây"„EÄè„ˆe†:Kj¶)ââd¦#ğ  ¿SĞ$¤ KºÑ"Ë²ÒÂÑèBs:ƒÃN
„…C@ Ädìƒ9@ø ò ,]i¹Fh@! C±±-(Å@4IÀ©šÄY¬`ğ¬ˆba¿)CT˜Œ—S À$MQ@@“aYPøI 2<
›#ˆl”„¨ˆÀÌAk ĞÀàâG°‡I¡,b‰·1€)ğ
"±| Ñc8Œ 0ATƒ¤ Y
DƒH"Rp’"`€`à.,@1@g ÁHîP¦D ĞÅáz1ûDô@éØ¬4,kd„™(k
 ‘ 	9°â €Hí€.sóK"5Dèêğj7ƒƒî'L
A¥2”'}_ĞR€6ÑU£@(ÑÉ” D$@,|f!Ë6#›¢ É SÂ Kr.`1àMŒuFÓùV Y+P€€PÃ!E2€Øo*ú¨P!Q	d"-H…ƒvù¬:µ €& H”œö#„ , Á‘ü¥dƒÀ`{  Á,áº× H9²Äp,—QÚ@™˜€mœ*Ôˆ’YàFLÊ2VÁÀ[ P "ˆfr„¢JBAñÁ MU@°	ÂñHµ‘0*¶$â@Š 
„™€ö– ,@Òa%„'h(áh@T,×!XŠ uP¡ì@›@PÑ€‹  Â˜d’Â€$ ]%?)P6,
 ªÇQ¦!ÅE"/%#pO’11,ÀÈ!À° /3‡:$ÙFC

æ‹ £úª(#ÄĞ H,Â5Y‘¡ÀØ	FŒ-[O5ˆŒ–K $4 3Âô®  e¹s")!†	@`@%"(€Z Ôà}ÔÅT„ áPJ"LS€YÔª—E4+BÅè€Ø2ë: ”(!Ğ€p€–@²Í!T $ÖAÒ<ŠØPw„/&Œ
Nó!“ÀBñF)T5H€%Ç ³RÉ4Ò^k@Ê5Ô€ƒqT"d0
` 9P@ @Ç ‘NE ZD¢Q29¡€•#É/“ JD4>@ÇÃ¨\Ñbò+ CràpÜI¨â £4ˆHpÂI"Œ CD (U°xp *p5 F<'€Ä IAN¡†ĞM  dğ K(jìáÔB)„€†›¤ëØ*i0€ez.‰
á–ƒ~é¨™°—¡QÁ,‘.#€T(Q%`éÛX(ªËÒÄ"ÇVÀ¡Ğ&Á†(a s2íŠR,lbI„ K‘QPÉ@)eÁÀ cò€P£cg¥Ö˜…CC€\`PÀH,àò@¢¦Î8ˆx`a„H¤  Œ!( H.Å#ÌÄIğ 
Çh _Õ!Ä«KI9H±<A<]‘%`q`’PØà%6b@‚ ’Â£µJğ'@!ÑOŠà„Úa‘(ª
€5Cğœ("µ@Œ1v>²T[ è)–Àô¤]¡³Œ Eb­ Á…ö³1@8¡÷•®„P Èòƒ."k`TÂ13LW†rH	¦‘ˆx< @¤ƒŒ§¡DFİA@! 2¹ª r„M@íèñ ÚÀŒ2ÈPÂ„Q>7èK (	Lñ”3ŠĞE´è¦Û[…4†ÁI”,•,Gà–„È¬@ƒX¼¤1GQ
 	H H)€ÖÀm±	İ!H‰:W,\b“¦ bJæ!
ÕtÉ½à#g*Kàh#÷Àˆl‚€³qTÂ¬@ãÀàA@ `B£BÅZ”‘J†0,€R¦§Q
!ÑpP‘*9€ã‚ „ø´N¤PĞp`€A>	„ Zà†‡&P„a•œFˆF°‹h E2@‰cô±0Ùë$0O0´h‚í—{¤TÎ  à![„.óÄ$¥E@ÀÀ¨­Ù_Œ`%¤˜,Œˆõ#Ôá¤TzW`…@	$)\°\T_$yĞ‚°uît9$“r	‚jÎ@H–RM	0óa‚B-‹"ÂE‚©T@˜ Cz‰ÈK†p
E@C  0*0	,À¤0‚œ(8(Ğ¡ Õ
Z"À ü„" Ô%QDL/FÕ"hE‰Àk  ¬ ‡U@¬¬¾#€€%(E;£$XÉ€@8â@ÈI#
 OŠÄÁpŠAÃb„*@@ä[‰AôE `

 8…GPC ,â_øâ *áp(ÀÄÍ (D°jbs 0Åp 0EB#QÂ
#h@§Ì`tÂÊ€Š†Iá`Q$ŠDD£	%¼©ù¢d ‚/
$ñNeL$7Á¢” PBˆ $†7D%xì°PRïp®l¡„uIx$|%b?!"·‚MARP‚¦”P€µ>ÀB CfñTàM”B
 ŞX!#ŠËaw%ªŠjM P:S (rLb ü8ª0M<c0= yH¤„Ğ¢°À£@ Š@d"’	@liğ¸ƒ‚ÊG `’c¦Å$À¤¡HL€„DgÌƒ '  ƒĞBÀG
 ~R(	EsÁ‚) ˆaØ/ÄÈ!CNñInP   @\ŠN  WEŒ3< JaX™Ä˜D„ó œş) ,¿ÍÑ)  .HªR™>
P`„FPFi"†(@&ÂnƒF!"@8”K‰°U
)ö 	PR¡`»@È HN`Ç­ j#0W”H,Ô*Ò%Aš0*.dO@¡“=ÁFZCÔ)	"„ N÷Y@7ŒuÁ ¬@Ü¥HRâ¨Å»â T(&„ö¢JRe ‘Õ=Ë¼€D¢(®JäTƒ5¡”’PR#‡%ÈûÎ0Â8/ $†ÈƒÀ€€ğI ÆšÍ   _W@½A &â× C*Lr’…
@†S1‚D 	—*ˆV :I(ñˆ+dhR€p€„Á1€R $ÈÁ¨(@Hæ"8BcRY.A –Á¨€1q Ê0W\…ĞF"4^P '€A‚‰Œr) @i2Xê‚"‰ Ï€!‡P04¡±	:€EÎWtğwDÈ ñT$HPÍ®-¢„E‚Z00$´@€JA\µRaJG!§$`ÑA€(.ÅG –![Ù1$ ğÚ¤9"+Pƒl¡¼Â@Œ`QNâ;€¸Í-¶öK÷üŸUì}'óæÛ”şã™]ƒ>üßîûß}ış[Êíuïêñs¨ÌÚö·¿ÿŸ£ğÿow÷ÿ´‡?Ûîı¿‡Ö¢ŞöOõÎ8YíßÿÙyÏ©méÇ=¯×ÖÓŞò—íëFéã
~‹Ô;ıŞı§î}ÿÚº¸5=öîİ¥¿½?Ïğ±7{=?'{óFßÍ]±{Ë+[ùİ\Ÿ§Ùş§>/Şò«Ş›ç_%V\ı»İÏK'_Áí'Ó4öò^Qæ%{õ'ÖøK/Mc¿ßı6IÿİK{wvÿo_ûÿ­÷ü}şß‹Åó³ÒoşÁî›‚ëÏ—á_ç{sùÄÿ}—zË·|š}ëÔçßæ/|WÎ÷‡")Ã‘9€$2b XJ­TX v>€1ƒ )j‡ÀH°@ ¡I?¨“PN ;$±¨F@9VÊ.EÕQ‡a@]–DbíRI) €Q¡AÃ€¤bP* EĞ2D"=µÅRE@¸Zğâƒ±v(‰l‚WdóGL„~ıÿ¯§~Õ—ù©kõÿû/ûõ3¿İw\_û/¯ş}úoîm/nÿzşßÓçÙûìì[èùWzõ‘Ûø¬úuêùÓßÙ»ÿûïãFue¿½ÏÅ¶şœŸ÷İÏúıëÇóv|ëRıÜ{w¯z›Wür+w‹ê>ßíÿïñjÜ¥WİîÈ "`Ô‰@ %v;ªÀHÕ4rğ0àËè"ÅL'HF"@)“ÆğşÒgğ0OÏÜ 
(BÃŠàÀ)÷TˆpªgÛ¶Ö% AÅÔ„ ÀO!ş B ´CÎ8i¦D+P‹‘#¨Ø««5$Ô‹¶áŠƒ€C@ £@±ø ¸dEÔâÊ &S’ä$'¢‘@Òb“?¢¸ˆ ¹AÂè À `p=./
°0Ád’h8<4À fk¸ “¢ hª¹!£D@FQb …j#ñ9Å@"9Q (€D€;	
€ußJ‡>Î¾ºÊïÒï?Ó<©ı¾Î_}ºúáßÿOx¾Ù>ÿ¬ÿœyVÿ5Úå{ñÿô¼Ó¯/{¿­µ¸séÓÆï_Ç÷ûÙpıİmßÖ¯øü²óïgıV½rªÿíÙWóïÇ«e´ßòÛÙô”ÃWî¼¿ş¿öê^¯oö9ë¿v?ıÇzÍº"ÓÎ€ä¦1t 	{0
ı…Êºi°„'Ò  öHÙ@ø zÄOB
R ›¸¹ À\i,DËH$$0BºØBœ€IÂ°m*8pˆ€P¬´DlÉùe†Ö…(hD&béæ0‰²Â0ÄÅ"ÿƒH†dâ4lííÿ?»ë>Ú[ï×îúò¿Ó¿z}oRÿ_Õó.½µñ÷?Òıñ]ÿ|3q¹^›Ş?äßîß¿ÿõ“÷ışuöÁÿ3Ÿ|Œë½.²ñ÷·úÿÎcğÿjßû}÷çõ-û¿—°wşÊñ¾ÛÏÊ­¯îÙ³£ÍÖ6«Ú+ø`ªï¯ÿÿO»nr‘ı·4}ş³Öı»ÓïßşòóÍóùß¢!«•Yï£¥Î“¼Ş«Oïæÿ=Z÷üšûŸ÷ë÷N¿lï~ÍçÙc­¶ıvã(iîÛÇ×xVf'ë<¯æÒ×¦;…ß÷ÿøÕÿó¾ûïmÿZ¨ÿïñ§¿s{¯ú-|u¿ï{¿ÿÿÔö«?ÿz‡w	uU0U¥l‘ÌQ„3ÁÒ £à'0*Ì0Œ'Äà‰“!7%á8#¸P„à@ 0‘À5KÉ0=ZàAæ€8ÊLÃDS0/ )Ä ¢–2(Q‹‚”=¤ƒLP{á If x6ºğì.ºpc„¸÷£p	|bíWËø~_tíº oâ÷îûæßÜ¯6^Çïb~÷ûÿû÷s~xÄ(¹å6ß›çzüèó™kZÔ•÷ûoû›ßş¯Ş·[óõÌÏì½÷@~óü=Ş(__¾o_¦Ê/ß}ô]ä¿‹Ïß¯şûôßÿ%Çõÿúvr“ïÛsš‡]ëgçaøöşûóˆ„R&ˆ¤ lîĞ
c!$biDˆ¾å …$=($"‹$VAU‡"£ˆ*iQ°"”MÄW°£“"
Â;Ç“
À	E…¸ÚÉhŠQR 1HÕÒq†4Â€§ZC ­ ûàš’b@!Ra„e@ .m–ábJA"… q§€ÙXÀõœò_$¦kÂ“*bDšhÉ#T‘A%€‚6@sğ21^".è	áé’¤àÔBDĞP~M›Œ`°¥G\FÀ,³
QèÖ-Ê "wö@µĞ,r8GÆ¸ÿİúîûşù¥­äÇëú?íÑæî…ñäÿ³åŒ¿ÃŸGV×I~ÍO¥Ÿ×ÃÆöoİ}úß½ş¿C÷¶•§Ji¿îÿQ~¾õg«ù.ë:×{gŸÿ¼¯¿şj}øİ÷íçÛ_ÿŸxíÕÿ“õvÿë='íÕ©Õõx¿úzïñúÒèò›õçÏÚ C[UÁ¶À‹º!q  ‚"•…:ç%8 2r2-# œ˜`
S¦”B{WÂº‡Å¹ÂbX|TÀƒ	†@ğ æjgi@
+lBRÅ`k”VœÊâp|ƒîºH¬±'J6`=ÁevD E7 B
Ûy(ş?»tëS¾ù\¯Â¡×=)ÜK÷[¯›:ıííÿk´ıø«_Ÿ/ÿßí³ºÙâı[ß“ºkø3ÿ÷¦óÎ¢½iÿãIş«İ®g[ îzÿı7¯¿Jëùõõ­ÄÎİŞ¾æËwÛy¼/Éˆ»~xÿoÿÿs«m›¿«~»üÿì?¿6¿Ÿ¯÷¤ÙïËŞş_ÿMoÿªÜWÒ¹¯>ùËsşÿ¶Vö;õúûOŞşVö[¿¬^ô‹–ºûŸãoì{¯Ş|9ıî÷–<šå¹‹Í˜_•}ïÙz®ş]Ù»×¿«|]?7~Ã÷eÿ;ş}yğ¶ûpU·óWû—'ñü÷ûîoŞy¥âR^Nÿ/ïÿ= ğ$C@„aUL^Ş%´D6òuØVâ`-Ä	Db‚¬®¥Da@PBŒ-M’FÂ³#Kt¹ÓÁ×*%jt£)à’TÄ`Â˜¹€“tÂœ|\E“gp1›¡J	»zL¡°
%dQT†â ùh’Ã÷Y‹ıéOÚıøÓ½ç'ímº‹Lw¿ıò?·ıÅı®½ÿwôw»ı··½_éü__±+^_ÿ·llsœ{Ëáÿ5[ûW_·½ÛébÙ²ò_6EëÚ_·´;Ôc*’zŸŸãv,çŞõ?»ç­îë¶v^¿»ÖowáùÏNıó.ØT¿Ú»ÆîHŸGTHÒÙx"#
È‚i)!hò_ ÒD/Qhˆ$`kÁb½–&´$Û×µ¢:V< $0¨‘ğOT@™CáÃD# ºh A'$Ä–@N
‚ Æ€KA  DIÆ0BN8€µJaÀLJñG´|„"NÆ‚pIŠA£6âIÌ%¦¢Ôõ+À´(IÑ%‚($!0AŠU»?
@Ğ
YšBp.o‘‘aÄ™ÅØ!``¢‰ô
NU’Í®œ´Œ1;È.•H"()HGŠ 4
Üt6T¹bÉJ½{ú¹İ3¿¯Ë¿áßñ•Û½I'÷¾7o{ç©õœñ×ÆßøÿÖıÿØïíÛø<¾õoéÿ‡Ù¼ûpº›{ùû´ñüıÿßöû¹5½ÿ@Ÿßÿû~õÿ9Ÿ}¼»Ù»}æ7ÿß÷æßïæ¿Ë­†¿iç?ùÄğk<ÿû’_w}Nd>»Ïyï„Ò3,£ÅrÑ›BˆğU1
PÁÔK‡dHDS@Ô+E‘€`€!¬aX/´9"AKÀ‚°Âvkj»‰^d4½P  ÈàÚ*@$	Têh¬dh7UùH*©1P€Ö #tõKJ,°*$@âÜöú·ãøŞo7ûÖmßã£'Êÿº{;ÛìlÚ.îgzò*x¿]õºoÌWSÇöîïø?ü}?ó·v~ecéœvÿO{!²ş²·Wöı÷¿§›Wßß+çîıgº‡¯L~ÿ·¾5©ş¹ûmL±»?ó]Ÿ†ÿúé¿»Ïü¶}ß÷Osæú÷?pµ¿/«‹ßûÁ>Kÿv‹¹s†…ukôı÷Û­æj—z.½ıŞ7ıÌ|;õû÷ïñoø¿ø¾eÖ—öôÚñ¼]xş¯¾÷_Eşoöı¿I÷ŸñÒiÇ­?ÿËú[¿™euïêyî{ÿ:ÍÆûkôz._¶ş¸êÿ¿ÿ}ı÷í¹çR}î&GC…bt TL4”`"ì]
ìĞ^9	L$Ò:‘®C#í) 6ô™#3,ôĞ8"Tz"$õ–fA @1"˜ğ+P`ÛUõ¢…¦U=ŠR+ HÃ]0ê¢$(%$¸± D °tûşşÚ·›“o¼MÌÜßãñ~Õ½æ{×oíü}ÿßíü"ôvoçırÿğ´ıåËÿü¯û-§–cTÖ™}qëöùş·Ğğ·µÿ‰üŞ™lùï7×;?Ñï{}73ßûåwÿ;sz[^Ú¾ÛğÉíï.ìN~yöü­üÿìz»>ßÍW¬e¡
Á5  zQ$«, Gä`¦"	ÄÈ23b“as!.(\Š‚ÊKh!Ébsí„Ê‰1cN«ş\@šÃĞğ±+A ‰	DMÂ–KKA£°¨`At‰ ˆ$L´$cĞƒ¬" 46îĞ@[0ÏF™ZXI-¢3¤©€°‚¨­¦Œ@ÉĞe%SÊLrYX!4Æ¨¨Úà•ÒA@%’ ¯‚ÒBÎ Jàğ]¬0(©sêø’,p‰`%@#à À á„1!.‡Ñ	L.(8‘Î:cĞ‘¡H13…•XöõaqPî°
oófö÷»ïíf²nÅ´MÖç¯®ê.šÛÌ­'¯8şürşş:šúu9›ÿÿo½ÜÿWß{Õçü¥ÿ¿õ–ı£÷ßßÿ®¹uûûiÏóïqŞcı>rşÇß7æ½Ø¦ò_ï¥ô·»÷ÿÿé½»ü{Ôëß÷^_Ï{_‡¯üëf›ÿÏoÿod getPrev
       * @param {Node} node Node to find siblings from.
       * @param {String/function} selector Selector CSS expression or function.
       * @return {Node} Previous node item matching the selector or null if it wasn't found.
       */
      getPrev: function (node, selector) {
        return this._findSib(node, selector, 'previousSibling');
      },

      // #ifndef jquery

      /**
       * Selects specific elements by a CSS level 3 pattern. For example "div#a1 p.test".
       * This function is optimized for the most common patterns needed in TinyMCE but it also performs well enough
       * on more complex patterns.
       *
       * @method select
       * @param {String} selector CSS level 3 pattern to select/find elements by.
       * @param {Object} scope Optional root element/scope element to search in.
       * @return {Array} Array with all matched elements.
       * @example
       * // Adds a class to all paragraphs in the currently active editor
       * tinymce.activeEditor.dom.addClass(tinymce.activeEditor.dom.select('p'), 'someclass');
       *
       * // Adds a class to all spans that have the test class in the currently active editor
       * tinymce.activeEditor.dom.addClass(tinymce.activeEditor.dom.select('span.test'), 'someclass')
       */
      select: function (selector, scope) {
        var self = this;

        /*eslint new-cap:0 */
        return Sizzle(selector, self.get(scope) || self.settings.root_element || self.doc, []);
      },

      /**
       * Returns true/false if the specified element matches the specified css pattern.
       *
       * @method is
       * @param {Node/NodeList} elm DOM node to match or an array of nodes to match.
       * @param {String} selector CSS pattern to match the element against.
       */
      is: function (elm, selector) {
        var i;

        if (!elm) {
          return false;
        }

        // If it isn't an array then try to do some simple selectors instead of Sizzle for to boost performance
        if (elm.length === undefined) {
          // Simple all selector
          if (selector === '*') {
            return elm.nodeType == 1;
          }

          // Simple selector just elements
          if (simpleSelectorRe.test(selector)) {
            selector = selector.toLowerCase().split(/,/);
            elm = elm.nodeName.toLowerCase();

            for (i = selector.length - 1; i >= 0; i--) {
              if (selector[i] == elm) {
                return true;
              }
            }

            return false;
          }
        }

        // Is non element
        if (elm.nodeType && elm.nodeType != 1) {
          return false;
        }

        var elms = elm.nodeType ? [elm] : elm;

        /*eslint new-cap:0 */
        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;
      },

      // #endif

      /**
       * Adds the specified element to another element or elements.
       *
       * @method add
       * @param {String/Element/Array} parentElm Element id string, DOM node element or array of ids or elements to add to.
       * @param {String/Element} name Name of new element to add or existing element to add.
       * @param {Object} attrs Optional object collection with arguments to add to the new element(s).
       * @param {String} html Optional inner HTML contents to add for each element.
       * @param {Boolean} create Optional flag if the element should be created or added.
       * @return {Element/Array} Element that got created, or an array of created elements if multiple input elements
       * were passed in.
       * @example
       * // Adds a new paragraph to the end of the active editor
       * tinymce.activeEditor.dom.add(tinymce.activeEditor.getBody(), 'p', {title: 'my title'}, 'Some content');
       */
      add: function (parentElm, name, attrs, html, create) {
        var self = this;

        return this.run(parentElm, function (parentElm) {
          var newElm;

          newElm = is(name, 'string') ? self.doc.createElement(name) : name;
          s1æ^Ÿ›	 . ¸0»wF1 [0x5934bde217c5e4a3][1][0] 	isLinkDown: FALSE
  W     5Ë1æ^r: 0P9»wF1 [0x5934b7c5e4a3]0] 	rssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%  6Ë1æ^1 VENTæë}F1 [0x5934bde209480b53][1][1] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_event_data:  7Ë1æ^E
  . yë}F1 [0x5934bde209480b53][1][1] 	isLinkDown: FALSE
    8Ë1æ^r: 0I u%ë}F1 [0x5934b9480b53][1][rssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%
     9ËñL VENT] «í?‚F1 [0x5934bde217c5e4a3][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_eveata:  :Ë1æ^õL . Éı?‚F1 [0x5934bde217c5e4a3][1][0] 	isLinkDown: FALSE
    ;Ë1æ^÷L r: 0I ä@‚F1 [0x5934b7c5e4a3]rssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%  <ËI VENT‰ÇÓ’F1 [0x5934bde217c5f8e3][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_eveata:
     =Ë2æ^. ñ×Ó’F1 [0x5934bde218e3][1][0] 	isLinkDown: FALSE
    >Ë2æ^r: 0I ‰äÓ’F1 [0x5934b7c5frssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%  ?Ë_ VENT] Ş)“F1 [0x5934bde217c5e4a3][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_event_data:  @Ë2æ^#_ . èí)“F1 [0x5934bde217c5e4a3][1][0] 	isLinkDown: FALSE
  W     AË2æ^r: 0'÷)“F1 [0x5934b7c5e4a3]0] 	rssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%  BË2æ^ª VENTŠÃ™F1 [0x5934bde217c5e4a3][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_eveata:  CË2æ^® . OšÃ™F1 [0x5934bde217c5e4a3][1][0] 	isLinkDown: FALSE
    DË2æ^° r: 0I X£Ã™F1 [0x5934b7c5e4a3]rssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%
     EË2æ^‘% VENTšF1 [0x5934bde217c5f8e3][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_eveata:  FË2æ^•% . )šF1 [0x5934bde218e3][1][0] 	isLinkDown: FALSE
    GË2æ^—% r: 0I c2šF1 [0x5934b7c5f[1][rssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%  HËõî VENTÇ×¡F1 [0x5934bde209480b53][1][1] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_eveata:
     IË2æ^ùî . é¡F1 [0x5934bde209480b53][1][1] 	isLinkDown: FALSE
    JË2æ^üî r: 0I İò¡F1 [0x5934bde209480b53][1][rssi: -39dbm, snr: 0db, nf: -84dbm, cca: 31%  KË× VENT] 9I=©F1 [0x5934bde217c5f8e3][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_eveata:  LË2æ^Û . ñY=©F1 [0x5934bde218e3][1][0] 	isLinkDown: FALSE
  W     MË2æ^İ r: 0c=©F1 [0x5934b7c5f0] 	rssi: -39dbm, snr: 0db, nf: -83dbm, cca: 31%  NË2æ^…; VENTî ÷­F1 [0x5934bde217c5e4a3][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_eveata:  OË2æ^‰; . ò÷­F1 [0x5934bde217c5e4a3][1][0] 	isLinkDown: FALSE
    PË2æ^r: 0I ´÷­F1 [0x5934b7c5e4a3]rssi: -39dbm, snr: 0db, nf: -82dbm, cca: 31%
     QË]Q VENT] ûWL®F1 [0x5934b 0ÊYp b­ |P0
 Ás	 ’ Ê%× Ê	0¢%0 	 %× ÆY— À×P0bz  %Ã
W\Ñ
\Q
\ÑW`¨ W(p¡'¡ Wt¡ W\¤W(p
\!]\‘)p
\Q2I(p](pWt¡ W(p]\¡ W(pI(p](p‹_ , S§  ¶  Ë  ª¡©ªªªŠªªª««ªš¡©ªªªª–ªª¡*zªª¾ªªªŠ¦ªšªªªªª†¦ªªª+zªª¾®ªj†¦ª®ªªZªªŠªê®ªø©º©šªªªªªªªš®ªª®ªª¦¨ºªªšª©ªªjªªªªºªâ§êêªjªª¨ªªªªjjºª¨ªªªª¢«ªªkjªª¨ºªêªªéªª¨Š®ªª¯«ªª¡©ªªªªªêª¡©ªªjŠªªªªªªª¡éªªªª¦ªª¡+zªª¾®ªªŠ¦ªªªªª«ª†¦ª®ª*zºº¾ªªª†¦ªªª«š®ªŠ®êªªøºª©šªªªªªªªš®ªªªªª¦¸ªata:  ÈÁà€æ^°s
 [1][. ˜Ôæ31 [0x5934bde20c3ce643][1][0] 	isLinkDown: FALSE
  W     ÉÁà€æ^²s
 X6å^I sİæ31 [0x5934b643][1][0] 	rssi: -39dbm, snr: 0db, nf: -81dbm, cca: 38%  ÊÁà€æ^%1 [0x5À
k±31 [0x5934bde209480b53][1][1] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_event_data:  ËÁà€æ^[1][. Àk±31 [0x5934bde209480b53][1][1] 	isLinkDown: FALSE
    ÌÁà€æ^X6å^I d&k±31 [0x5934b9480b53][1][rssi: -39dbm, snr: 0db, nf: -81dbm, cca: 38%
     ÍÁá€æ^! [0x5HÔ­µ31 [0x5934bde20c3ce643][1][0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_event_data:  ÎÁá€æ^$ [1][. rã­µ31 [0x5934bde20643][1][0] 	isLinkDown: FALSE
    ÏÁá€æ^X6å^I  ì­µ31 [0x5934b643][1][rssi: -39dbm, snr: 0db, nf: -81dbm, cca: 38%  ĞÁá€æ^¥	 [0x5è—£¹31 [0x5934bde2145552d3]0] getLINK_CHANGED_EVENT_DATA(): apple80211_link_changed_event_data:
     ÑÁá€æ^[1][. ¨£¹31 [0x5934bde2145552d3]0] 	isLinkDown: FALSE
    ÒÁá€æ^Y6å^D±£¹31 [0x5934b4555[1][rssi: -39dbm, snr: 0db, nf: -81dbm, cca: 38%  ÓÁá€æ^Œ [0x5] 	)ù¹31 [0x5934bde20_~ÆœŸ»ïwy‚÷óÿëÊeôT÷â¶nEûg2g™u´Åë[İÆş›ÿ:Ö3·©ÎÿÖõQ§èÔ»ü·áï±¿²/Ëÿo÷YïO˜Rj|Ûø—[ò7üwà{ş½×}k›6?çí¾í?¯÷ßŸtıÓ¿=·óÏÅşÔ/úUïïûïøš>J \l¦Â@JĞ`%6‚€ ±  fŒĞ‘t‚P
 H„@Ã 0‰‡ˆ €1€€TQJ €€ (ÔÀaNPDÈ MD ‡	Ñbd@  ğ !F4|&‡'â:ÏP`G(@š&	­ö ( ±ˆ	]A!€AÈÂ%p Hq bGÌ†pAÀÀ„
M@ ‚³Ä  Š…H„
È"À!0@è-EdŠ–ØpPLP%@Ga À@ „”(ç `D¾€’" ¬,è¡°  Ha†Á m®Êÿ/üøkïrİ=İÜèŞ¯íoyúªß—9ï½ñïó•ÕÏk¹oo%Eß÷ÿí_Mı_3ÇTÒ¬C¿Ÿ£;ú%Ör¿ßû¼ÍVäæÎûÍûºgÜãˆÿÏ}õørŞ:ï?çik.2»¥—:ûgìnüuáAûõ_~gy6ÇfAıˆ'‚ ²&ÀF(hºÕ R ¤e’I hG˜…)ƒ@q)F	, /£ KS°A@'@$‡y¢“C„UI©„AdÌ%¥šH@F,à‡D@B
„ !M 6$•!²!0”Jš@.ïˆx †™A€’î[ßg÷kï½~ø¯/lûZüb²ıËıışı5ò¾ãå«¹î¿œÿâ~5Ş°ìÑêêPÍ»ş|»9å·Ï±mÇãŞãË§}ÏÍÎ\ŞşN{%ïKj¯s_ÏŞŞKûq÷V¶ÇúQnÔí7ÕUÚ|uOÜš)íëøè‡÷3ï³é?sñ¯{û½‹=«ïˆß\<_•ÕnìOû.£Ui£ûßùO6U7ÏşWõ´œW?Ş§÷Å¼“==éÌòf®™ßo'N§Æ­—¿íïò“=÷»õÿgÇñyöÃÃÿ{|»w÷î¾ÿ÷]äå™•—Äÿçšıÿİ­×äOw~yzëş~ÿÿüÿúØÕ/şß··§Íû *"`@Àğ¢&+dE†>1P!@  š @€c Ğ)I „ \È ÑH PfÁ Y‹p¡`ˆLiµ‚àF Ôä@ @9Å+«à1*‘ Ì€¤ªLÈ Qb)S(¤$
‚ƒ#=ˆÓkçMîutôıõ…zÖ¯çƒ|½Òkîú;şjûïïŸÿÏä?ßÇó§u<yşöĞÇ÷÷Ïß¦bûÏ§ıŸ7ÏŞÖş—İ~}QCc	¿ŸÛÿş+ÿû	ÚÇüK‡ÿ}Ùÿ~-DFÿ÷¬V§ùİş/GF¾°§–¿/ç›?¼-?ç?÷ÙŸşúÏBÂà“ähHõ Dsq†&•"„äA À£’(@v`àIš	p 8CÂ+U r4! ª z0æÃ0`D# *¨	À@b ©@t"€„ 
NĞˆ‡S4‡fÉ%Xê ("h	˜T’h  Ğğä›€`‚Pô
D nˆ$ 
FB¤È€Á i!ÕbQ" %`D ‚h8!² ¸BB;, l\	B¬ÌdBB +”E€5# DÄˆ	à’¢€"@ˆ@Š£!Jja€Kc hgyooÿ×ßFŸ¼Œ/ö·œõæ­í×ıãõÛ¿˜?ü~ó¿w‘¿Ogo|‹õ ûuÿó_<¶ç}O²ûş×ü^Ù}wÿ{ïïå³ÎO>·/™s¥·Ÿ¸îÿó~ïw5÷7o¶¦}´}À‰öw÷’ÜkÜ}ÏÙ¯øÚ_…½Ísİçœdg `=

\À
8ò)€Q#L`B€‰”R¡2–d‚MÖ"L °ÄDp¦šEƒ@P BX‚B¢d$Û€$  "P1	Óhø¨o­Br©6 Póc¡Ğ &0Ø)@,¥3ZúÄ F4$k·\çĞÿü»şûƒ>ÉÚgø»ş—ê¦«·÷½¾B¾f=ä’ÙÕv¿möÿç¯?ço?sÿ”f÷;ÿ¾ç{·|QZßÿ’”?üº?òò·m÷ı|×—n»o³âİ/Øõß?şßñïiC~u¿wt×_?ó>îûº¬í.–?ê|{Óoşß×¿ü¿WÙ†Å¿ÿŒ{õæ7ë»»ú?UßöïäŸõ¿gËË÷—÷ğ¿~ökºoÇ~=Åÿ_>É·¿—ıışmõ×=àŸF½µj_siÿ;}ÙOÇ7Ş—Õë{ü¯üµïó_3ÿÕÿ®÷oÍ¶û#Çn÷Ÿïò~ÏóêÖ«Üí(@£ˆLCXB˜r¡ "¤$+|€BD	$Ä<Ğï0ÈÄDª` 0¢­¡1Ä`¢DPRÀ8*Õ T¯ @z&
…(H€„@,° jŠÀÌ\C €€ƒ´‘ !BLúÑ(ˆ `&8BDÿÿÿı]¿?ïÿuûOíÏÿw„svşÿõ2pÏçß}ÿão¯mÿö–Õ×9i{Ö]ıNÿz=ß³¿ËÿÇóü>¬jë¿§GÎ÷ş»“a¥ßş÷šo°ã¶ygl˜±©óÉ5_÷ûŸúw|Çæı»÷ñßu/ıš|ŠôVw¿w5@CH	áĞ ˆ2}UD4ç0!'–R¢{!Q$—„b€–M¶t4„@
àìÉ@  (‡0BD` Xd¥ij xiŠU  „0/ Äå¥ ‘`!$!“SBD 4ƒš@B„Q<R’F+XØŒ åÃĞ•:eD†&äR À3 ™€Cˆøˆ	 DS‚T4,	"N ‰\&€‚ @Išà	8€DÊ 5¥] üd2ú(š 9Pº(…0ÒĞ˜€$0R-
€êš¢ !”!EÈQ ,È€ ¨t_lMq~öŞ>‘×ô.µ €ÿüvÛÇö»oÿ÷·¿¿ØşW1ï}¾¿/ËÏ¯ıßW9}åîßP•÷'û­z·ø<GlrÒÜë:=¾ÅõÊ]¾Ø¿ûÇ÷åÏóû.†Uÿç¯]Û¤ñ|ÿ_Ú_gû>M¼InóoKüòvó\»Û¿?İhfáıÿì„¦  ^Ur„ ?	=xp†#wGƒ í@#‚€$"‡l¡”^ ˆ`´)F€dQX	sÁˆ›6`¥B$˜`@€Î=†ĞÀp‡°D²@ rDh@B:ªº" €P™ŸD! ĞÊ¿}¹Ÿ_¨ÿÿÃ¤û]j¾¿İó0?n]÷7>İ¿ÿo+Öw‘•¿ÿÛo•¡ªOî‡(¿ÏTœNç§ÿ¾³şÏÑïû÷õ±~“»ÿŸgÊf¯úÕç|“ıÿ™¯<`§¯Ù£ßwßºĞ÷üşùt}ÏùÏ-÷ç­õs7ã»½ßLÿ­ÿÿû3ë¯æRïófıı=û*ìgÕğO![æ¬¹oiíşépß8ÿmöugvŒ²yöïïãzÿ@ş~ÕÓ|Qå-G÷1/ê~÷Çû§&ÿí×ÛÛõ“b«”s¿ÿßŠÔÜ×%ã×¿¥ñnı‘ş'ËGóõKÿÓ_·ß™uÑÿßÚ¨hÌ'€à 2IGÂG¥!0 |Ë@P…&t %AIxÖ€âŒ *› …Çš`D¸#‚1 „8©Ád"%Â
ä€3V˜¤‚'S PD‘b‚¨<‚@‰_‰©„Èt° À â 2 H@‘$sòßÆ.ÌÀ¿½ÿ¼îùç~›ŞÌ•eï»ÑX³ú¸?ßºÆÙô¿]î×¾÷’?»ÖVÿtøß^ÿ~>oì×ûı\3tè¿ÏıùÉ¢ş|wlß¿v—ú÷>ªÚcß~»Â«»7­qÿüø¡ÿë½ñu¿£¦Ÿÿ±Ûœõmß½ëe©’ Ï  (§H À ü&:Ab¼ °¢d)r£G PD yŒJçˆV f$¥‘lH&M`	Á$…¦`${C÷E€P CAİA Ü˜˜ „Øœ ‚  PÍ‰`L£D/’JL„CÀÁ46lÁ7Àâ4À % ˜ô‡±*1¹JP;B
(„ ö GË1Ä"LIS0E @;ƒÄÁ"2PŒ0‚		d*XpÃFÂ‚=`€©!" ¸`0ğ›€œ„é B
„– D!ˆ \€B˜ŸK]ßM1ÆI¾lVú?Šùm%ï]ï¿İ÷P]'¿¾û«ïÍzíº~ùş>?f™ß~ËÆıİ¯üÿÿwŞ¾ı]ßŞnşKÿ­zWUCK}poß¶ãCûÖÍXîçıßêæÈuştm\oûGaï¿w÷ŸûÎ‰—Õ«[Ç·İ~íßı‡û}í”ò ·aÖ‹C‚ BŠd²ğŒ"1‘E TD0b°´İĞRÒ=`(²¡„  9à2m€¨„„”-$¡Hƒ«À‰aEPD- yÍ@K°h$ÙĞ´3¡ "#`ãc„‡Ïx  ˆi§j |Ç[mW³›ıóü½ÙNößÙ8Á½ÚéÜ5ªŸÒúy¹WSÿşâÜİêûû?aáÏóğw~©»w—ï^o×çß»vÎå?ßd»ûUÿ_º­WğÏÿgz‰åoåÿ¯Gû®ò´Íúë_{÷>úõşï|=w6óuû¯¿Ã¹ÿ_ßë¼N¥ã¿m8ÿçÇI{Í»¶¶§ôÇõƒïwÿw–Ôõ|»9ëóâßÿù¯¾iÓŞl?çÍ›~YËwı¿µ“ÿ7=ôïß¡qgk·‹í}Éugıá_½ÿùFûÎ‰nï}×åã{ı-ÜÚ'§¯Gû=»·ßïíß¿nìrîo±-˜·ˆ6”BÁHPÀ€ Œcb4„d  jÅ *¸ÌDr£@+8EH
Ra,˜„!”‹U¡z` p#B@ $…—	¨ ‡àÏÆÔi	†qÙÒ À ’. ”˜‚,
àM1L«E4FD¡ HE°ù­%. ÄÑ 2J(G( ²1cˆ S $Cl¢‚ È(Œ„|‡¢BÆQd',»H¢p`5R¨Â1 ‚’ÒbŠ ™ J\'c†ÔjX„‚ÕŠÁøâI&A•€Qâ€8Á 	ˆf 8ÍŠT"%v_P0)mPBÊÅB›¨°u° 'P²†ºVˆ‚úKbÍPˆíA'¯|IÌŞöOë`w*ØÓJ5EdV„…DH„"Ô@iZ J %ëÙ€ulÒ– r!—:ã)À'bƒ²òX!öÄSL¤“èªÄÖÉïƒÅa N¾ˆÈI:ŠúXB«@æÒIÄ" &G¹«)`põEábØ†¢¯peÙªôâ—Ò ¦}r é¹•a¬på$BÃô;¬t ®q'@RZbç€ Pˆzû0TA(…·	 	ÂµÙÛ"–#PÛfˆĞ¦L@@%ä  cÏ{p(“ Õ€ÛÅ
	=ˆ"NÅ§‡à¦DPFLqA ‰ !€F	!±RD¸ I0c@2§ ÒÉAÊ\x†…py E‘S”€4îš£ƒ%ÀÉHÆB9>"‡+rA©n6Ç+·¬ ¨¤Œ‡ó€ (é8„Z=AÄ(Æ‹û…˜	«1&¥²Ø$p¢ÿN^Ó…ƒ»(C€B‚©ï¢ aB­Ê=+äâ¡!Yƒô0£x÷&0—Hu¹Gò3ÉÌ P-L  „Œ‘†I…À<"H,p€àI²Æ €@FDUÒˆÑ(	$à("H´Ôà&ŸDq’À• èÄ*² £“I R"0S€A ªv2Å€‚ˆÖˆ`" „LÇ€0‘  ‚Hp8)Uz1@‡2 Ç@ğM(#€k„EY„.lsU…Ìà†€	‘î˜› ) béğÔ¥ Ñ„v¬D#D(h¦àQ!¨0$!úŒ¨E‘V &\ Å2ŠEhTr‡# ŒaT‹PI	° AA!*Ö c K"¥‘æ–§­A›
„À5À$Í„œí İŒ÷DEQ¦íO H@@„&NÈË"yexĞDf4[RkC!¢òˆ‡ÂDÔeªY\ãEÇ`0 {ˆEwì eT(ç å„”KDïC8¬®²\°&†„0Oğ510å	¬Œàdv$D2i QQ B7C4!01R@‘x hEHC=òù£‰„„Ğq‚X¾#Dƒ(D°f@˜”€e ĞÑ@ƒñ³ ŠDÈ
 "„1@€$0˜`qV2•DÚv FLE‰Ğ¶HbG9G™‘ø ³Á€BñÑ*JÃÀY|¿I fpK
r@ó!+€¢s§`Èc™@ … GÖzšA@æ¹¢‚ŒW)“
ËÎ!€-t.IIC9h@ÂÆPUY4ú  ¦
<(Ñ€>c£`>è—n·\4$0à Ô®BÍø@uP¡ ù³ÁÅˆõŒSES‘wd‚UjdÄ°J¦ıÔ£ˆØ¦ÆG'¸Ô‹^‘€¹ôLHºõI bõ!AQ /['E×.±«—W† Kº+@''±™‘¾ˆ
X<ÿ´ Ó !v•„@ ` b3@ !DŒƒ±&aE¸R   #@pŠ 8‚N!* #@€âHA ¦¡F…0ÀmLğÌLD‚Y5‘ BD‘é‰âÂ)ˆ$	C0KF.¡"$‚ÒU” †›¤¡Œ BÙQ‚™!„° ÄÀ‚˜±" ùØ¾‚°
OáŒTßPUè ‰°Æe˜¤·€ÚªÍ@ &4´î’„EêµMgdÔb´´yı ò%‚I­–T'-  _ZšAèHª`DF¥;b[•f9Â©`" ?á@™Ÿè&Œ#(%¨S@`ˆA‘IP`À"0PY" !)D‘4Ğˆt €Ü%†¤¢
Ğ%A´IA
 RM	‚` Œ!âK] dˆ¼,)‘ ’ D R"-«,pAÈ ZLs² ,Ùj @³O†‚I@8	ÖG•@
Ô€@4éFÈ–Ú ÎS2‘”‹PX!	 FJ. %¬ÀEJàPŒ!  @…',”Ä	@˜èQñÉ8‰ À’º¡\2EHàhÂ¢D‚D€7­':	àÂ …$‚Áa¸,r(J0Ä„±ˆC„¥€é¤¡r‚ã¿`„ÄìzC’UÔé‚œşp,LT W#–[‰`Å½€H‘y‡>ãÆ¡ÂsÂôpÄµ”E›¿y‡V„6€kş„! ¢â›²À"„WÂ5É"~4h	à€¦-›À™Í 'dÀÀı×€¢L°Œ2Â Ò`Q28D@[BZI|À@ª¢¤3HS ,("00vˆX(Ã A#¸$q²JD6n ˜%¦ƒfĞ¹q
ÌÀâC2NÎ€È51 %¤DFDà% b >BÑl§ @³¶9	†° {µ!€›€pQD¯£Â+ã…«KQ&rÃ¢ –ÒLz RãSÂ#Šú°2-G úBMy bÑe¦E(+a»ˆÎœˆ  JøC	R@« Cœ€Şrœe@d‡û”¹Ên@À M*<ß28$är¥{D @iâ’!hb$İ&Š åĞÄF†… qÛ0AJ‰´`$@E.
0)$æYår@BøTñBfäö
„– K@ pÂk31 ~!¯èG(·wĞfH0$ß,!ˆå†áˆXè~!ñ4´WíUFBë€Ü¶¡ê40UÈµ’ sœˆ†%€ M” ‘10Œ£9>È¡€„6ŸàÅ % 4q@G€ @ÊÎ€åò1QxD	À¶m FXÇP¨bAE°0D
@h¸ô9bo0@@ ¬ ¨DrB¡BÄPŞÆÀpA‰ÛMû 4À¸:d¸ BA0XŒ+ï gòæc½ 3½ °šçxZ`&! ÿs¸’E”!DŸ€@š,Ñ¸ *‘q@û1ÅbºTD‚†,YçÕí¥Ò‡¹`?`¦ÄİJ69Ÿ VıQ<eš…^Â`“ù§¹èv>@¦[L©`©XXmHÛIJ)¤ˆX@†à²ÉH‘„Ä“  ^ƒø@¨ê!!›R›2ï_B…€H˜((ª$d˜(¥	 "’A4%¨B@,I€@ÄC
ÕHPØD°°ˆ” Š 0:(Ø@Ágì`À@\Ka H'Á"hf0$	$ô
Bˆp0Ä#
‘„A`Q"¨ä”0
 € ˆŠÜ ™%‚ˆ¢1a5’Šø™ …=Ç€ )Q5˜×0©†(@CTŠÔ°¶{—hº  „Ö,†8”@$½€P—’!›ìoŠÓãFÁ(¸
§w˜ŠJ:œFn%äm‚€lŠÕRRHõŠ°Í¾fS*;şF! %ö*±E4!”S€!8Ê`ÇV("Ñ0¦sP´g0˜…ä©÷C@«‚ÛÔ„%.èåHF2 ÃùP€E7•G^à' lğhJÉ5 ĞP‰C@ @$IÈ€©`Ú ¹@¡JP¸8à@ K QP¢ˆÈ† c¦ÄDAcØO8  À‘@$@è@$˜QÀ˜'EbìÒpHÆ{sÀX€&0Q†İó>†KDmTxùAqVYØ¸£Ñ°9Ğp Up¤#!%!L.€ñ Ş€#À!
Ä¡+ÑÀÁâ"‚"2*M¢²0só [Jåø'l@’D ‰%Ú˜%—ãŠ˜éPOQØkBT0—dËN†ÌpÀºetÙáM­¤ D™QYğ O È…&ÙúÔ `"¿â'l¥½ó”Nrê*ïôBç !"ßó¤r±h0ç½8Å€9¤hi@«†Mû0O`'(‰—¿`?iâĞ`’¢áPaİĞ D)€¥€”`ÔñFNp¨HFˆĞˆÄÒâ•ë ÙéšÌ… b¶ ŠÀ`ÄH(Qd‘ˆPôD9x €(’[ˆU²”Ñ!%ˆ`
 @	ˆ`‹0²@tDD&‚;\`„¢ä%€€€yİc‘ˆ*añ¡8J‚'… ‰r+€ I„ÃàXõ õ…ô€.
€ xÂ‡¥¦ˆ†>Œ©Z|˜€Ã@à›š'GD)+¸çJn,–— I5
ªü)Ş g6obVûT¬aÈ4ÿ ¢@ †Åö‰b		Œˆ¿*b¯2<‚˜ó³† >2 ¦õT0X‡ ¡Ä °4"8„À  2(Bˆ2*$ÈHÄ €°à!à "òwF@¤j{S Qšs‘„,€ f$ı  ˆ@Lå«€(*©I0MGB™€¹Çµ0 0°Cj˜ÀèÌÁ¨MhG0ÇâMt¢äÄ…@0$ËğÈÈ=Âú/U   ˆM  ¾As@8Ö,
<b‚"Á  @uÄd ‘À @<à,%†Ü‘5€`¨1Z3—B|h“”1€‡8 2B (¢TW á0­ 0¢ ` V	!§YŠ²Ø€4LÉÙ`B$Ğ[h%$á–WA$M–ŒûĞC‚	œÊÀî€€B¾ĞEC$«ˆnÀ„²‚UŠÁ ‰ ¨8†$¸ÅH=Då1	­ ÷ Ã¿˜1;^ T!úr'ê3<© f 4(³*%SK7`‰ >„MË will use d.body and so do WebKit
            // Also remove the body/documentelement clientTop/clientLeft on IE 6, 7 since they offset the position
            x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - rootElm.clientLeft;
            y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - rootElm.clientTop;

            return { x: x, y: y };
          }

          offsetParent = elm;
          while (offsetParent && offsetParent != rootElm && offsetParent.nodeType) {
            x += offsetParent.offsetLeft || 0;
            y += offsetParent.offsetTop || 0;
            offsetParent = offsetParent.offsetParent;
          }

          offsetParent = elm.parentNode;
          while (offsetParent && offsetParent != rootElm && offsetParent.nodeType) {
            x -= offsetParent.scrollLeft || 0;
            y -= offsetParent.scrollTop || 0;
            offsetParent = offsetParent.parentNode;
          }
        }

        return { x: x, y: y };
      },

      /**
       * Parses the specified style value into an object collection. This parser will also
       * merge and remove any redundant items that browsers might have added. It will also convert non-hex
       * colors to hex values. Urls inside the styles will also be converted to absolute/relative based on settings.
       *
       * @method parseStyle
       * @param {String} cssText Style value to parse, for example: border:1px solid red;.
       * @return {Object} Object representation of that style, for example: {border: '1px solid red'}
       */
      parseStyle: function (cssText) {
        return this.styles.parse(cssText);
      },

      /**
       * Serializes the specified style object into a string.
       *
       * @method serializeStyle
       * @param {Object} styles Object to serialize as string, for example: {border: '1px solid red'}
       * @param {String} name Optional element name.
       * @return {String} String representation of the style object, for example: border: 1px solid red.
       */
      serializeStyle: function (styles, name) {
        return this.styles.serialize(styles, name);
      },

      /**
       * Adds a style element at the top of the document with the specified cssText content.
       *
       * @method addStyle
       * @param {String} cssText CSS Text style to add to top of head of document.
       */
      addStyle: function (cssText) {
        var self = this, doc = self.doc, head, styleElm;

        // Prevent inline from loading the same styles twice
        if (self !== DOMUtils.DOM && doc === document) {
          var addedStyles = DOMUtils.DOM.addedStyles;

          addedStyles = addedStyles || [];
          if (addedStyles[cssText]) {
            return;
          }

          addedStyles[cssText] = true;
          DOMUtils.DOM.addedStyles = addedStyles;
        }

        // Create style element if needed
        styleElm = doc.getElementById('mceDefaultStyles');
        if (!styleElm) {
          styleElm = doc.createElement('style');
          styleElm.id = 'mceDefaultStyles';
          styleElm.type = 'text/css';

          head = doc.getElementsByTagName('head')[0];
          if (head.firstChild) {
            head.insertBefore(styleElm, head.firstChild);
          } else {
            head.appendChild(styleElm);
          }
        }

        // Append style data to old or new style element
        if (styleElm.styleSheet) {
          styleElm.styleSheet.cssText += cssText;
        } else {
          styleElm.appendChild(doc.createTextNode(cssText));
        }
      },

      /**
       * Imports/loads the specified CSS file into the document bound to the class.
       *
       * @method loadCSS
       * @param {String} url URL to CSS file to load.
       * @example
       * // Loads a CSS file dynamically into the current document
       * tinymce.DOM.loadCSS('somepath/some.css');
       *
       * // Loads a CSS file into the currently active editor instance
       * tinymce.activeEditor.dom.loadCSS('somepath/some.css');
       *
       * // Loads a CSS file into an editor instance by id
       * tinymce.get('someid').dom.loadCSS('somepath/some.css');
       *
       * // Loads multiple CSS files into the current document
       * tinymce.DOM.loadCSS('somepath/some.css,somepath/someother.css');
       */
      loadCSS: function (url) {
        var self = this, doc = self.doc, head;

        // Prevent inline from loading the same CSS file twice
        if (self !== DOMUtils.DOM && doc === document) {
          DOMUtils.DOM.loadCSS(url);
          return;
        }

        if (!url) {
          url = '';
        }

        head = doc.getElementsByTagName('head')[0];

        each(url.split(','), function (url) {
          var link;

          url = Tools._addCacheSuffix(url);

          if (self.files[url]) {
            return;
          }

          self.files[url] = true;
          link = self.create('link', { rel: 'stylesheet', href: url });

          // IE 8 has a bug where dynamically loading stylesheets would produce a 1 item remaining bug
          // This fix seems to resolve that issue by recalcing the document once a stylesheet finishes loading
          // It's ugly but it seems to work fine.
          if (isIE && doc.documentMode && doc.recalc) {
            link.onload = function () {
              if (doc.recalc) {
                doc.recalc();
              }

              link.onload = null;
            };
          }

          head.appendChild(link);
        });
      },

      /**
       * Adds a class to the specified element or elements.
       *
       * @method addClass
       * @param {String/Element/Array} elm Element ID string or DOM element or array with elements or IDs.
       * @param {String} cls Class name to add to each element.
       * @return {String/Array} String with new class value or array with new class values for all elements.
       * @example
       * // Adds a class to all paragraphs in the active editor
       * tinymce.activeEditor.dom.addClass(tinymce.activeEditor.dom.select('p'), 'myclass');
       *
       * // Adds a class to a specific element in the current page
       * tinymce.DOM.addClass('mydiv', 'myclass');
       */
      addClass: function (elm, cls) {
        this.$$(elm).addClass(cls);
      },

      /**
       * Removes a class from the specified element or elements.
       *
       * @method removeClass
       * @param {String/Element/Array} elm Element ID string or DOM element or array with elements or IDs.
       * @param {String} cls Class name to remove from each element.
       * @return {String/Array} String of remaining class name(s), or an array of strings if multiple input elements
       * were passed in.
       * @example
       * // Removes a class from all paragraphs in the active editor
       * tinymce.activeEditor.dom.removeClass(tinymce.activeEditor.dom.select('p'), 'myclass');
       *
       * // Removes a class from a specific element in the current page
       * tinymce.DOM.removeClass('mydiv', 'myclass');
       */
      removeClass: function (elm, cls) {
        this.toggleClass(elm, cls, false);
      },

      /**
       * Returns true if the specified element has the specified class.
       *
       * @method hasClass
       * @param {String/Element} elm HTML element or element id string to check CSS class on.
       * @param {String} cls CSS class to check for.
       * @return {Boolean} true/false if the specified element has the specified class.
       */
      hasClass: function (elm, cls) {
        return this.$$(elm).hasClass(cls);
      },

      /**
       * Toggles the specified class on/off.
       *
       * @method toggleClass
       * @param {Element} elm Element to toggle class on.
       * @param {[type]} cls Class to toggle on/off.
       * @param {[type]} state Optional state to set.
       */
      toggleClass: function (elm, cls, state) {
        this.$$(elm).toggleClass(cls, state).each(function () {
          if (this.className === '') {
            DomQuery(this).attr('class', null);
          }
        });
      },

      /**
       * Shows the specified element(õş_ºãŞûÚórîÿGıezé_ßùîLÿâ}ÛÏª½ÿ#ö~Ãoûïõú°oâ‡ãj¦çÜ}õG±¥<øß½;v‰»{T=WkL®,ÿ©ŞûìëRò¿²¼ı[õıïòÜı÷ûø¿İù«ÿçÜŞ_ÿÀËhG“zmû÷}é¿|ÿñ¯ë¾©çåÉ« ´ Ò˜œ‚°•	'aG&49 ™ÂĞâVLZ””M8H 1/1B@ê(n @Á)$µ2¤G*l¬Šk‡@u#ˆ(9Á’ ‘E5@`0%K«9€hÂ+W !,sÁÊ† ÄD 	äõ‹€– •   )Iˆ FXht!F!@C‚(¬cU¥¥FÉ*0ËJúH ¨’¤¡€ Ô Cf†",baB ÌØ0EXQB#“ˆÈ„PV
€­¤Œ !•E²TL¦YEtB£~ ŒÉú¯Û>åÿ^òïïÿ£T}Ï!ü¿ûöWİİÁÓï&¼¾¬rëM¿ËSîı·û×=ç2û[ÿîÏjö_¿ûş{ÿ-:oÛ??w5ûß™oãâ>ÓÍ‹¹û}§!?í¾OşŞZÒ«×S‡7ó´~Ş¿6OüÿW¼ùë¿û¯ùÿüîÿú£ÿşÏıEÁ*Ï¤d@”BJÁG ¤’ÏÉ™ ÉÄÀ¢dQ;À§œ3MÊOÚx‘@œ.@<PB‚SìÓ(0Œ	ƒƒ J›>%Œ˜‰ê>5R'Ã9+‘CÔ›Ğ	 
 e8fV@:<ÅŒ•,H ¡Šc“ĞN_üVwè·wŠæş_zßç«îz´ŸÒü_ó.÷šQÅKßØ‡ËÿŸÿy°†ûìıw×ï²ß?ïOèWMë7eÿçoô©÷>´Ş`—¾û¿ñP?Ÿ}½;7·÷û×§w»_ìrİ®2k_Ç¿âÿ¾ëĞ¿şşÂ3üÏŸÙ÷İŞëöİ¡»ù»ïÑùK]ã4ÌĞ7Äœş+ø½·÷ï­ÿ÷mdğÿÿÓø©¿¾íµWğÑßş}¾_Uíj[?º×î¢Üoı½Ûô_¯]÷{ïq5]å{ş·Fûôü·R_öÓí“ïùwúŸ®:ÿ±_õ»ãåË'›võğòïòx³ó¶ˆmö³‹æw~ë,´xRC DB€[-ã¢‡€]Ñ„ J" -RGt1† p1ÛG~.9ˆ™<B2 HJY0[ƒ¥‚/âÏÒ°+Ê ?¡uŒ8Êr[áM@Å©bi!ˆhH¨C€i*a±`cà X¨¢ÂÛ"Ôacä´öÓ»Ûÿ¶ñ{÷_¬½víé¯öf»©™Ü{òŞÎËùıhw'Çcõåß{9¿¡““çÅ}¹fïê:Zçÿ•·›ŒŞk3ş¹^uŸ;oLùmœùÿ|ÎıO7—Iãûİ6ÚŒ~ÿûŸ¸×§lŸ~bÃF}w»ß_ˆ¾™©Ö;ù±ĞëèÁ‚Ê$Ê’DR,–£¬e^¢Â1”S98(íA/”JËâ	çš .AA±d %ºÀ-àZL0T5AdÌ!A„)*o¿TÑf>B’‹Lh…j'èL‘Ö#!‡Èà¯‰²R%S…BˆCP…‚Ä?BÖº
0HÜ@M#Í@ƒ€'#H¸^±‘ÄJaÍ"¯`N–(ÆŠÌÁX`°•‚ …I¯äŒ`Â  0=7T@­¥ @$ïWª¡Gze!˜U0&ĞD 5N‡…%k¨` …€z 	Ëà]ÂçXpU–‹œ&Ï éIH1÷ÓSÄ|™§ó}ï¬ùQ‘Ÿyÿ-¯–Ñ8èjïíÛ®ÿ¶{M[ºê_õ®tÉò}¿G4Å—ş|÷y¹o½î{óÿşıÜüq¯îí×ÿW¿Nüê
iuı¿÷wı«‡ŒkÿºèoÛŸ§¹ô÷íîÇ¾^¾5şß­|›óÚvóØÙì—ø?ÜrÜ§ó	%Â`ìXBÆçlGÁ"ƒ&ÜaDÂpÁ£2¡° AÈjÄ€:¨Aëx­úDXF¶À
;	 ­	b,…(ãrBd xE‚!Bİ€pÂ,‹J‰´
b-Ú­t‚@Oô‰,H€6€B "w³!™>üáMzş½şùú=Ö~ëOÿÇÕc¸UvzŒçãÒ·ç÷ïËó}÷tõªï'sîÍõÆ×óÇù}¿U/àì‹×òïU>muõÃ¿Íø­¹šşoSû~ı{·šÉÿşîÿŸĞKy¡[İğïŞ­_úÕòîû¯ÇùÛæ_ûïÍí=Íä¹>ìÃy+ßùü½¸î>äïó{‡
ïú«øiÿºñ_çuíoUgÿıóıç?·}_ßï-¶¾ô¹êñë–ºi5ºÍ<jÇåöíÜíıFöŞÚÿÍ}Ïñùhiÿ¯òªÿùênÎüp|-ş?Ïïï^ë~OöÍûë¯“ığé»~ıK æˆÂ Â…DL ¢S‹üTi-@€c¬—àá2» J`Aµˆ U­Ã&ÀEƒ
D€  z$RB0RH¨f’b²1lOğ@'9ŒBÕ6	V¥@$‚LÙe`D.B!A‚¨ 3¯™ö$:"Ù~mÊõ¦şšºßŞÏzû—Éım»õ®å3_¿µ%Ïô/«îıÿùö÷Ş¼ßïíı;Æ¼g—ïÌùâ©¾ÿ¿ëûÙ¦´ïşÛå¯³w+çÍœŞä½æ[_÷ñ¹üÿı_¦¿ëş¿y¡öq}zsü¼ızEs>§ŸsOìşu6‰Ãlü>ó¹ÏØ¶0B ¡¯P	S‚„ê€=`!²d3AÄR$ˆd
7L€SÅ,%k0Ú rRÂÀ„¢5E8p ©Ğè
¤'Æ ŠÆ!B›/S\CÅ+ˆdÃ7Ô4°†CŒP  Ø0Ğ:P¡Ñâ`òXŞ à@~ 
ÉŒìFr -0“N	$Œ™l,\ò8,À  Uz(¨€A ˆp)$³$²+!nWˆK!£ÿ xC`P%2
ØDõ &=œĞPAlhPÆ‘Õà$AúªIÆFAÔÙ20!¤1
»2 @!€2*í$íª‘\ûÿ~|ósû}ï¶÷ÛÏ/øû­}Ñ«¿ü»·:õöö¿÷W7oĞËï3vg5G/áMá'=;şûßogÏ§ñ;¹üÑcO_	øßwó[íÕvÿÿe¾ÒÿŸü¯#ğ†~ûôó,ÿEw»lŞúÃ9vğüßÿ{Û-hy¹móÛ×ûºïí€€ˆw)°‚C†AtÔ ÂR`bè`6\Dò¢+@FO@‘ÒAaÂ–v"‰cHü£ ­8GÚâZ€\*N¢ôè	
ÌA0v “‚ ZÁá u#0 “¥øˆ††…ğ†p(D Ä².ÿÔÇ~wº^?3_Eú|?¶éÙõ<¿úéÌîç£ŸŞ=Ìğä[ÔÇÕS4¯ÿı¿ÿú¤q·jçúIs—ıÿøB·öşWíæûŞŸÛÿñŠ¯û?5¿÷şİÏ5îgÿûU²÷û^ÿ¿ÛÓóıKÌoêSÿ§ñç|vo?åûµÖû'ßtşĞúÑ_¾ÛskİŞñ.ìZOùN¿ıı«“0ßooG½*sò÷ûö^÷ûÛñë?æ|æùİowoï_Å—½ò»+şy;ş~Q~ôoüå²¥¹Ö5û.îuÖŞ¾ø½%½¥ûúÏüió«êûõ.ÆºTÒöÿ>â#|Öı®î×mß_nZW—wÿ×£ı-@À`P Ğbô\2 y‰ Ø À‰ú€1J¨@G|oD’`J -ÀÅ€ âÈ $Ğ\â
€º4Â×o)1 é	 ŒŒJ °…PÉWSŒ‹Ä<"Ğ"7G¶0#@Š%C¦’ ÑtK€2‚§BóÏß?ÿøıUıoxü©Õ–˜Qşxß·¤çSÜ~ş_²÷Ñryc}üİÒ[÷oU/Ã£ûáÃzºl~íy[…¥6‘ğ»)§~ÎÛ¿ÿñ¶Ôûçß²5×ãïï÷ıú¸MÓ7ÅÛ_Tv¿ßÖSÿwæcñÔúÛ¾íg›¿yØº_Ûïríü\Ğ86A€9° HU;RIˆW@(’8`“´ˆ÷(10A€ª€@L• s›=QlÈ“:HœUœ¸`¡\(€<×  a"0³ğ$%‚¥DÁ*…³¨€Á×CËkÒà "U=¤R<I{Ğs# E;@ë„1LIŠpíW@C_P1æJ£*Pb  Šz‚ ç’ZKÖ Ç˜ˆ6Q6ŠC† VJ(væJ&#r“‰q²´G	¨
 ı­$Ğ‚cÔRÊÑP3ÁNàÆP	Nñû! `ûí®÷=·¾[öÈ•ßu†ïŸËï9É3ÿæıûñºöñ@åûòÙÿö“î_zÄßNô¨º¦}Ó|òş?ùùt±9_NÚÏçßÿ~÷¦ö†ßc?Âooş©ÊŸÿwıç¯|QØïôùîô·cö—İÿ¯ı›ş»/wŸu¸ûúq»{Ğ0®˜|‚G2YØàt"ÔW°DN02PáY‚` D>5w"	ŞE@d@Èdá dxHáŠ˜bÎ $n.BQ-Füş( Y!Ğ5lPEÅ,âK¨f@lj¤Bjñ™¶`u|b0)\kx1vÿçí?ö=;L£âv¿ôõÓyeøßçÅ-„WÿWÉ×ûÿTGŞÅî»×»r×÷åoşùÿêË™ëúêÿ¿¿Ùjİïï®â—÷±kçß?Óösø¸dóq¿İü¿Î¿jä8ûúÖ]îw÷ßï8âæGÿâ.§„Áé-¦÷¼ï~ËÿÚï°wvıáÕOşZÿç¹§×k¤ã?ùoKµ{¿ë¿gùüìh¯{^ç¾çŞå/ÿv>ïëíI×ê·SÊ¥¹Kır×ßD®ÖÿúMŸ£»?¦›~ènôOÊéôç'¾éù×ÿ?Áÿ_³­ê½³[Ì¿YôÿsŒõû¯½Õ_Oİ®O?s?~~¿¹3nwğ—¶ @dbdQ…'‚«á”Ñ	h° ` °# `ğ$ì."S"–ñ0ÔÒ—< T ”šHÀ0›Á0rÆ ‚#F x€ÁNB¥e‡$`YÂ Aƒ24À˜B—#3 ˆáA"×ˆ‘pUôaP
”  …˜æËÿ›Ş~`·mÿÿß½Ÿ•³ŸÏº	ÿ÷ƒ§o–ÿİOÙ=x‡p–/Ïv“¸õOÏ¾Ş«÷3™½ıãWÿ½ßø±»úxíß›­ù1òõT+~}²ß¿öyñMÿ¾Ã÷»Ï½í¦Ø$ÖÿÔ³ =Óo÷Ïşûöúì±HÓ£Ù›k«·®Û}€)7SĞ3f™’'8% õ­â¨ )Ã*	äŒé·‚zá¤ÚØP) &DĞP² b÷mê•Âã ƒa5A‰@`Fo«!¢"Àæ¸çj ‰«ƒ1ğ-»ÃPÄ¸¿£Q‰¡u($ ER0Hd	Œ€ 8"iÖÌ­ÀX†DÄ$P5‹PYñB<6 A ¸WCG„!?”@cjˆr1”fœ¾Ê“#J$ˆ%)ÕBw5¼fT+µSl}D E"4ˆD 5Ği ¤8U à	¼&86ŠØE’s!yó÷ÿûo¯°ÿÓZlëÚüí?İwåÙÓÿÜw~É»ßıïïß.»Oç¨¿ïşoê—ŞÿŞã|ÏÍÿ}ë½Ã¸åÏï|Ëÿûy9¹CûíH½tŞõ¬Ì™Û?½è«ø‰yhšöµ²×wuîóïySöİºä?ÿæŞôŸ?ïóxß cQÁ„‚!šFhMQ½‹jOH’Ùr‘éJÁ^SÊ6 )êìpI!„ÇG(QøP-Á°FƒØt¢¢Ä&ÉN f¾Êsş,f¦ ĞtpBZò°”­Â”"Æ¦)ÀLò‚í-éŒ³ Æ‘?À`Üé¾úşÜünÿ×í=ew†¿™‹ñ¹¾àO›jw[1•ş‹¾û}ôÕOı›ÿß|Æî—½_¼ğöşüßÿñÿòşûşÜ?\×ßËÙÏM/Ú¿+ÿ;ÜXvŞÇ·}^[ù”®òÚ÷÷“g~eşá#öyo7ÿ–»ı¨Wµšÿoıû½{øÏõxªG»Íësz=ÿù÷üu,¶ïãø¼olşÕªìjóï«¯ó~µ°{¯ÿyíg~ÚŸñ=úvª/î]ÿpüí]¯ûÛw·ZÕùåß¡¯“ú×ÿûë/;‘Şo·_roøPºry¸Kûë>uæ·¿/ë»ı²²÷i\¡ù½÷æûöşÿHÑ€BH¸eû –ƒÖD{!@.š8›@ÂYŞX/iiÍxC"àr€aáà¦By²F•ÄÀ-ƒ4ğ³gô$¥:ÀÖF…ÂDà©.*`AÍ6h² TU“8R¢Ópƒ¢CŒJ°ÑqD+ÂĞDŞ¥N‚‚à\,!®ü…¡·Ïü}ç{‚î±Ÿ¿Ïÿ×ŞÑîõÿMùßÛ¿}ïü¾Chûÿï¾Çöß|n‡ûG›÷¿÷ÿ[û¾_5ÿıØ»šÕøƒÚöîq|ûßìîÇ¯S¯)§ßqÍé­?ß¸-oäÕÓ{®í¿Qüwö—l=ŸûB}Ûß]ß¹|vîüíùªŞûô6ìIFŠv s²*Bi!Šà1©µ %$ÍJ®ŠS’@+Â0BB%°_&Ä©P;	á3P#ˆ)üT´ÄÄĞôUò@ÊISfü ƒ¥¨5œ™á])˜DS3à÷0íĞm‹2A
2X'³,Ä`-  ¸IÁ°®v‡¡€%à4€D™+Ñ&Ç ×âK•„ ĞŞ2Ñ«Š€#è!À$ˆhqáìê*F	‚ÌWŒFÂ/a  Á%l2ğ0F1*OWYAV G@ĞQ
NF$a¯’Hx EàRUğ:Å
çíúàzGúxÿßõWßí›­©O»zá‘géÿÿ*ö¯{½»Ïğ_ ¤+«¯~³mûg×ìk»ãÿÅÛ¸^ºiÍüßı<Û)Ô;'ïk-ßºmÿÓmü\§¯³ıùÿÿÙ?ònÿ>ßï>½¶ÿõí³Õ/uıoé½w»èı¿äw¶Ö›ûîHb-Š-	¡4ÕU¢ÎˆAc¿p b,TÀÙàMİ “©­jCšÅÄÉ€"…0R‰$ÙÓl0Ó «¨UÔ·°: L'”#C‰~&ÔË ) Œ´Â Ê®²å0B%5Ã0ÀF‡õˆ °‰%*Ïÿçß×²ı~ßmŞ÷ÛİÿÏ÷ôœsïş¶­».ôôºækÜÍóï¿õŸ\ı÷¿™÷ëÌñîûûõïÏ.ëÿxáï.Éu™ßîÆ'üÿ­ª}ÿıüèù½=ó¿×ùîiRã÷Ÿ%×œ·_ÖÃw©¿Øâ}úË…ûİ~oíıØ³üXª=ìÿ³Cµ{yıÖ5Ro¿Ïß­_ÿú¯şÏ8-ıËÚoëó/uïÒï…a×í_L)Å}Ï"¿½Ï‘ïË¼şéçÎ[{GşãÏ¿¦ç{d?~oõõu_3·óòÿÏyôNõ~İÿ»¹Ã;OÛüÀ÷ÖgO·şµçzGuñòN®YWÿïóŸ¿ŸüĞñ" øªN×]YÃåYã ¬(f" …QU§¦F‡à:ÄØG! !1¡&ØÅ@<N C	p I6fÔ@C¨Çh2ABEñƒQ*p¿
2ù %¬±=«r¯¹‘^IP‚Î€*5ªÍPi¥!Ö­ÿê¿}ûß?í¿zç±İŸ¹ş~óïø³=ßÅ}kç^ÿ†œİŞõ÷Í§ïxmMviÛôİóømë¾mÛí:9çÏù¯÷”‡_6õªöÛÕ×İúÅ®Õ¯7é¬{Ë9ÿ{¹­ûgşdÿ9½/G}İf×Ïµßû_ÿÿş·é¼¯ïúŞ÷³å·ıÅ$" c =aÙÈ3„\p5ğ‹	a[L-+@)R˜°„NKFœ…$Ó`ö‚Q,
:è˜ºT @Af"²Œ‹‰é€$©%!)èT„(B˜#´jnGRª&pcx¢®
D9Ø6è@,&¬8 ¨Æy@Zœ( éˆ 846@æğÀ#3¤/‚‚0Ó Í€ÆÁTğŞ††Ò]QJ•¥ ‘ÜòšIÉe(Aò¢€JÏRº”BÑ<ˆ3@\×ÊAq š®‘™xÏ m¢ägv£$çÀ©$ ·Õ…X
0£Ó
U+“ş?lìï‹8ßŸö?ı†ı³Mêu»:ÿ©×ÿß‘ı^ËåËÛç½é÷ûş_¨L±¬í»cı?ßı×ïŸöw=n·Øëıºç'Z=ÊşÛû{ÛZ«·«›rñç-§öÚßü_Š}˜¯œ°Ï]ß“ÿ7ã®ç«ÿı{¾œ¿×ÙwÛùìòş a4
t\ŒbPRŒ¡08Bñı m9#0œc”Aà(L8,àAà ¶4X$8Æ¼ ƒ‰\‘# ål„]‹¢HY4‘Îˆ6Æ “„P3°FĞ‚-*‚ÜafTAˆŒlÕ'ÊœÇ“€U@¡¯‚=Š!²çk¬ïñ¶5íÿ›?û;yuÛæhï>ş6ûkùş~h–ÎìoştŸïùÿ7¿7ù7åé¼†¾Íè¸ÿêËî¿_m?ÚvÏÓ>›³ZDÜNëËúë~]ÛÔŞ?Ûá’ïÓÿÖûğ·©~ê{½ÿ/é-ù¯z®o»¬=w®³ò÷=şı—´t¾¯mw>ŸÙ]¿}üG{>sÿ¼jŸ·Z«í¨ïúÄõrùs*owıoû?Öÿ{\ûüç'qŸ<»?÷Xù<É¯|—kÌÿ¢ÏÉ~­âï·Zÿş)ÿëôwÿ}¿º¿gó×ëñ¨oıÃN©~îëâ¿ÌûŸü{oßz[oíĞ¬UVçê—îI¡D¡©Ñ‚KPñzDTF¯@Ä((tTX‹wd´ UÇX@ğT¡àâÙPà%bDÃI	6‰…D&Ø…if@Ø«º§Œ¬cÈ©ÀBFâràL%Îf ”²ôh@eÀ%"Š½jÚàÛ 9€rpEÑ¸gİû_]ÿïº÷o÷ßù«ï;öÚŸ{Ëaµşÿ.½÷fïëÿ¨Ëöúí~i_½Eı:¿íWı×¿c´ûÏO÷Š^ÿô‡Í¿êDÏ~~>"Ï½‡yÿüïûÿ=¼ÿßÿùûõ|>Çñ_ú}MíoŸ_ıúî»ÿÛŸ’öÛeç2¯²ıö7ÚÃË * *İàA'F %DÖŒPD'BÀ  ]^³9 ¨X…&Ã‘HÆ&:A!Pß*DTØ¢¢V ‰x€!!b2:¤ä€AX1¦e2qÚ„|qqM0d ŒZï/P SÓBH8 R		 6¶¡U£xª¢ ˆ&€f]80À4`2Il-K!0X•Cà r7™Â–3 AFm%Ë‘q é)Æ lP€Ÿ %f ˆÍğ!(ÂP eŒ$ "T ‘\yi Ó/ÉC,tQÄèk¡ÁÍ"ÅUb·v=ÉığJÿöË~Bßì~E~Î{Eâ¼Ÿ?İöç§¬õõÓûÂïßı^ûoZî«÷¯·ÿ×÷úÈûàÛ(÷ß¿íø/÷ÿ­[w†ûk‹iüûİÿåŸ×Ÿ6]—^Ûßê÷ıŞùõ‘Ï+•¢È7k±ş›²m3©¼ùJÿ¼õïOèûé×Ğf jq.¾t §B² R0Q@dr‚0 £±$"pŒ½C"d(% YL/MwCÌLà
%cfkê¢€ğÓt ÃA0ÀHD)[!¢ $@ô „lÆ±-“– ñ MTTJƒL3÷É[”®ş/;û;oş½ıùªfmó[Ÿí{¿Ôwu3{é3­&í÷Wú#:×ïï;+ŸïSÿ)Nz=çMû>_Û¢·]íú™ÌışÍu/_ÖdÓ«›¹Õõ•Qüù:z+c¿ĞS¯~š¿æ¿ÿ“É­/şöööİ÷¡çíÛ¼õd}7õ}ÃÕĞß£ó§û_İÏëõ}^¾Ìåkÿ’ØŸ'ııy®'ç­ãúüïşy{Çûûö¢mõÛİtOï¯ÏîO×İ¾ãs»ÿ~Zïÿë¶¾_X^ÿÃ÷¥÷Ô/¬?{ùkÙÙl§ßö{w¿MĞùûû›úın¿K_9Ç¼ı®Ïß÷cÖû÷Õ¡¸îÏŞëƒô¼Øı  ‚¸ù$ú‡}–2*UÄ0Bƒ	k"Ñu`•R	ĞZôYƒÌˆ€ Şr+l¹NA*ğ9 êRœLHi…zÄ 
J2.%*.¬î@JYwAx—ÏæLxLÀ§ ·Ÿi4F%Cx@£ x?¶Şïù¯ş÷11û÷õæ;k}÷õüç?ƒW>Yyßÿÿ#(^z­ÖõZ÷$íıw¿ºm¿ûÿÿœmŸü·Şí~3ı§oêï÷~{ı}Ş¨Ùúÿœ7~úß»ïùoOŸâÿ×zñåoÏw]ÄOöî§cç·»ûÿ¿½pçÏ—J­ïYvD =ô¨<Aä„„58b°| F8¢’1CXH # d‚¸U“Ò>´›@ €AÁ"¸|c‰ºŒ;
Ç	£’E… "R±Õj¢†˜ZI)—RÍ“Yˆˆp„7µK´/H 	Id¢>L¢O7`—PXa‚<›ÇU²ú%”!öi'õP•} Dé0pÊ‰Qóa`n‚„‘°Àt†¤XÈƒK@f’ Eâ'ØÆ¥LÔ j#
˜¤€ CÚE.:"(µìÙ BL(ÅZ °,* ô…	á e$h—Eƒ6@ €®ËËzşÖ»ú?wSıÖıï÷g¿O·G,ÃYu3Ëóï~~÷r®ÿåôgŞ·UÖGš¿‚Ç£ ~+³éÂº>Z~¬ğ¾×š]¸æÛöù}³¤§èıëşüìåVïWq‘;ôÚéÿş¶ùşwû¶/ß»ÙÓŞ÷ıMËè~¼üËÿßó'¦õªêÍEÑQ›‹@§a¬ !CÀØ'\ÂCQ"Ç	†È|/Â"° kˆ­ RD ‹mØ¡ÒFŠÍiq6
XˆNƒ æ–„.ôg,tÌÇŠ‚ `ç§,™2–Àz¤ÏI#pÒPH!Š‚xJJ<|ôçÿ:E¾æ¿n»êwpÿwÿÿJöïMõ¶öéÚÔNıÎı=böÉe]>]ºÿGß|Ÿz¥éìÿ/ºŞşş¯•üß©%úNïïºîËöÿíà?ÿšÿÖûßúÜÌğßÏÛºõÏşiÑ£‘ªŸpKoúòßÏ½£ÕöÛ¶ûwçÿn½µö¾ìR}ê´ï§k»ı÷}¿–õ{‰Gû»ÿüß™>ç]ïîûİøÑÇ}ÍgÿæüVŸßæëş¿?¥)¦ûyë—ş¼Ï‹Úı7şÍ+¤]7n_şÏ_ı¿?ÿ¿ÜÒéëÿı÷Géÿ¨¿}vçÛ—{‡÷[»úÁûÍ[Õk·‘ÜşÔş¿·«Ümß¿ËâC¨.L}TD/@` ]`ğ¡ĞgµWb‘Ã—ğfl  ± ÈM`N=QB`—P‚L!ßT¡	-*
§± 	†Á¨‘:Z30xê ¢ì$`Ã ‚{2Ü‹Ãg
…rQX/ÅI*ÿızÛ÷#Ş]ó/û?óİŸÿbu«îúH?­ ]iíKİï/Ã­ù¹ã¯ü—íŸ€ÿ}ã}ûëĞ{ÌÛ^~¬éSQ/ØvÛy÷r7ï³ûîğ÷Ó¨û}ò×ógÿ®şxıïÿ:ï>L¹ıÜwø§¿Ô{óØzşçıÿÿ~÷ÛÁzûÃoöjÛe0@ƒ\àl /+aQ)w!ÈAÙ
I`Ğ!p0¹BZ­(AÛ¡\ZHÑ…BÀI¯‚dŒ‚0óÊ•´‘äBG¡’†‚Š&D—ièQ • AÂÄ-‰ Œ®éšãS0§ „ÁP„ò9!TÄT(àÚ Œ1}"ƒ›’Ÿ#•‰ "P¨Lc€â3(ãT´"‹Š6F)¸	a1Ñ@`ˆ¡JâÖÔdíP
 }h²tAFB bÕ 6€#vÕ!.€`X@îÒ€”‚¶ÂQYDL'eG¢Ce&ÄÄÀ™XJÍÿßúûÓc|¾ÿû»_½ÍwÕ}k÷¸}û]êWéŞßïÿûã÷2Zõù÷úGÂİÿçı¿øñÿ¯½kçşşşÊØ<ÿ7^‡o§÷¾Ÿ»¯òıç9×z¯ŸüÛ¿Ôş·ßrï}vÏvü­Îïmë&İË9û‹o–şµÚS»·Ï÷¼7Óy
9O§È¤P`…°äÄ0xi@NÀªÃÈˆ e |™Ö ´cP•à[mQ<ñ…Y-v¸MÄAŠMrZ=Hp¦£“¬–2	1%s‰2ğP`<Ñ^^u¸ ºgEO¢Å51H9XÓ•s"†g"$P€0Ú@$uÍ›ÿ9mïÿÚwk»©÷C>¾¯ÿØ}şwşkµæİíöí}Óş[Ûcø/÷½ß¿oï¯áûæ4ÿğ×ÿö;wc>gş÷¿Ş½ç×á¿¦¡Åoöâsóöÿö×ó/àÏdıµÊ~û[÷ûwº?cüöúsøŞv÷Rí4”gır3nÇıÏûï?.÷ooını¯€Ø?ÅŒ›Şãÿ«ğèİ·ûÿ‹Vkıæeıêı]äŸyînª–~½ÙŸŞÿw6,BŞwÎü,­¶»öv½şo¿KUËnÌı?ô½ó“ı¢ÎŞı-Ó·ï9ıú¨íìsÿIuóî÷·Uÿÿt²ıïé‡xmç¼íÿ×úÿ_ëâ¹n
âızZ>E„¡!¨6Gƒ“M°ÃQßí4<CÌ	h-9ğ šFÒA"&¨ E3#ˆ€C(rFn 50h1Z	‚¡‘@Ø"	p¤
‰ã€DÑ(ånç" €P‘†DĞŸ€ õ›˜øü ÆRÁPRÄxHàãó÷fo÷ÿı¿ÿpŞíio¶o˜¥¼¿ÿõ¯î=»?vë¹ÿ~›>‹tû¿ZmŸ¿óæÿ³Êïù»{_Üëö× ø
WŞï|Ïÿ6ísïÂíÏÜ*ß‡ßçéÛ9Ş#mó3ûw÷zß.Úå6»³{ŸĞ÷á+ï¿ßŸ²,oŸ&åº6×»™öÑ”O6(Q …"“•/@qBƒKPL˜Ì€Œ†‚/‰9²ˆ9¡„Ö|€uz#N`0º^EÂ‡'„“…ÒŠal‚S0ˆ@‚ bFh	À=Ã €€	9´¥ !
QËb6C*$7 9À@,$Tj9†¨$…!ÄÂhÊ'‚XPr¡¨°‚û AU/Ó€‰	`#b…‚Yj‘$æ´T  äÂqb:ôŒ*~¦†Í€ˆ‰	,
Gª@¥‡§Ğ‹çØ2ƒ’`óJjŒÑ&­t*pÀE]A¹0¢G@È@%Q™î ¤ 0×´~çÅÍ®üİüøoè™Äÿ¿ÒG+ÒÛÍıU?ÿêçôñƒ»ÿ^oû¶+×ÑúÍŞíAñõş-¸Ûç÷ÿ¶}?œ÷{æ=iÎwç×şáòëı:Şİu¥­™·ÿpÿOçÃÛ×–ö{òùµ6/æ¯›¿ßİï{ìßÓm[ş[³ïñOşv¦1øn6Éo£YéŒ¤@EJÛ 
ÒAp„*@ÂİqÙÌ	0|;6EJÖ?
Âá¾ì„1a!Œ:£ƒµI+A@A"¿U*wG:"Á[Q(4PÒhyUªàb†•ñê&Àê‹úljs^ã ƒfº&ĞH(ÍóÿñsJGıqlKkÏO7®ñm¥ŞøüoŠYá¦ôÙßs¾ş|œÛtİ;¼¾u?ıï[ë¯œíÿ_Ûş¾¶ü>_÷ôşéWh?-ş¸ÿôÓı}ï6eûs«3ÏÛ~Ö¡{Û“wY}ÿö|ÿßlçÿ¨Ïıëk¸ÿûÜ‹¼ÿèÛÿæ¿¾¯÷¥Y“oï®ZÏñıäkfºï×éWnmWöiÊßµ­{¹ı‰ßoÿüÿö?—ãê™§ÙEá¾Í÷ßª}y{ïØp¿£óİ¯õÅÎ#?ïŞ~g¾ÉçıûLõÆíWÙ;9¾ş_í¦÷ÿõöŞ«ï¿¯ìOîan¾Øä»íÿğßëßÏõ½ßõª,"1ÄÀU¤(-D”BõAÂ02„Á1¥¹FÌŠ2+c†fL˜–‚a6	  Nt„#Cì À^‰^Á é…vTáÂèD€Q…P"œàgG¡Å…RIÃ×H]ø`-K0HâTb i@ (_¿ùzOÚı{Õ¿û·må‡g—ó|û¿ı‰/YË_7\ãzüÁáuı+ı¶øm÷ù¯¦ÿj|âÿ¿ë¨®ış×óÿ½o®7Ô6»İ¼V:[¾Ùù¿ıéİí»ü¯ëh_òûºôıû»şíóÏ“ßÕü/×óİÌì»_5ı«ßË{ó¿Î]Ğ$TND‘2Jjz!‡"´0ÓQ¨  	 }˜ ‘Xà¹„&ã˜
a4-‹8M  ‚”EÀ ÑHF¨¡KàÌµ;;G¢DıH²\¯ˆ 1Áõ–#Ef€ØZ?Á
¤..ºr¤š¥	•Øq–%+3.¶bP%HWmòÕŒpAòzajz¸4‹À¶ÄK rÁ„˜oT;ÀEGö`¡Üwò,ÁŒc?‡ tƒÅ ›„6Â8@1bP‚.d‹utPP“ÒQÆõHp
"Ğ?"øø*†$IĞiçúşë™Ë{?'ıì87³§Îx_×ôìš÷~m»ß•şú¼ïßÿùñgßæ½/Ïß&Uî÷îóÕõ¿¿V÷İy>¾ëñÿ÷ÖÿÿM@·mó»ö÷G›ğòõ½˜&äÇáo—sşõæß»ºı_-OÃ˜;¬}Ø{2_ÿüCï¯å]ááÎùÿı›Pr°"¬)èU
-IPÃò"[ I0iB&k vpµPÀà@c&G¯ò!9#ÑY
Ğà;#p!2Ö2ıW@ X	*TÈì2	Ò}¹¤À )‰P~ ˜ˆ@köƒC¸0\Eå@ ·¼ºÿú»»{Ñİ”ìÏç÷¾êûó|éâõ÷³®¢Şï¿ÏÙßİÏ…ß·ûÓŒ÷êŞë;ÿÛo,û÷'üİ>5Ú·_”ÿÿ¿?_¿ıÇÏ«åÿÓ;ù?ÿ;ûØß:?÷ÖQ—Ï¿ó~ë­mOÆg«ü†ÏóBÿõëwş‡İ×ì¹ª¤Üã»¿ij¿÷ş×ÚÍuÕœ¹ïî=ÿbß¬æşÁëëÎ}/ÿÜeW{·¿şıS¿ ¿çÿ§ìßŸÑGšiâÙ}»ôµTû˜O4²ëôÿ>Üıÿñ¯‡—ËWÜÿûx­ÜšmÙÇóx¬¶ü¿k9Ïîy­Tû'û¿ [k7ûóo½VÌU›·¯¶ËıßoA3vLG3 GXB086‘Ôÿö°!PˆV- )S"•4ÜD¨cÕu¢Àâj‡„‚8R”A"ëÉ½,¥%†F@Hvwho¡Ô8ˆCvÜ0¢
‚_A¡A®¥LCyGœ 	!$7( Y Põã:™SÁA°¶ @param {Object} elements Optional name/value object with elements that are automatically treated as non-empty elements.
       * @return {Boolean} true/false if the node is empty or not.
       */
      isEmpty: function (node, elements) {
        var self = this, i, attributes, type, whitespace, walker, name, brCount = 0;

        node = node.firstChild;
        if (node) {
          walker = new TreeWalker(node, node.parentNode);
          elements = elements || (self.schema ? self.schema.getNonEmptyElements() : null);
          whitespace = self.schema ? self.schema.getWhiteSpaceElements() : {};

          do {
            type = node.nodeType;

            if (type === 1) {
              // Ignore bogus elements
              var bogusVal = node.getAttribute('data-mce-bogus');
              if (bogusVal) {
                node = walker.next(bogusVal === 'all');
                continue;
              }

              // Keep empty elements like <img />
              name = node.nodeName.toLowerCase();
              if (elements && elements[name]) {
                // Ignore single BR elements in blocks like <p><br /></p> or <p><span><br /></span></p>
                if (name === 'br') {
                  brCount++;
                  node = walker.next();
                  continue;
                }

                return false;
              }

              // Keep elements with data-bookmark attributes or name attribute like <a name="1"></a>
              attributes = self.getAttribs(node);
              i = attributes.length;
              while (i--) {
                name = attributes[i].nodeName;
                if (name === "name" || name === 'data-mce-bookmark') {
                  return false;
                }
              }
            }

            // Keep comment nodes
            if (type == 8) {
              return false;
            }

            // Keep non whitespace text nodes
            if (type === 3 && !whiteSpaceRegExp.test(node.nodeValue)) {
              return false;
            }

            // Keep whitespace preserve elements
            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && whiteSpaceRegExp.test(node.nodeValue)) {
              return false;
            }

            node = walker.next();
          } while (node);
        }

        return brCount <= 1;
      },

      /**
       * Creates a new DOM Range object. This will use the native DOM Range API if it's
       * available. If it's not, it will fall back to the custom TinyMCE implementation.
       *
       * @method createRng
       * @return {DOMRange} DOM Range object.
       * @example
       * var rng = tinymce.DOM.createRng();
       * alert(rng.startContainer + "," + rng.startOffset);
       */
      createRng: function () {
        var doc = this.doc;

        return doc.createRange ? doc.createRange() : new Range(this);
      },

      /**
       * Returns the index of the specified node within its parent.
       *
       * @method nodeIndex
       * @param {Node} node Node to look for.
       * @param {boolean} normalized Optional true/false state if the index is what it would be after a normalization.
       * @return {Number} Index of the specified node.
       */
      nodeIndex: nodeIndex,

      /**
       * Splits an element into two new elements and places the specified split
       * element or elements between the new ones. For example splitting the paragraph at the bold element in
       * this example <p>abc<b>abc</b>123</p> would produce <p>abc</p><b>abc</b><p>123</p>.
       *
       * @method split
       * @param {Element} parentElm Parent element to split.
       * @param {Element} splitElm Element to split at.
       * @param {Element} replacementElm Optional replacement element to replace the split element with.
       * @return {Element} Returns the split element or the replacement element if that is specified.
       */
      split: function (parentElm, splitElm, replacementElm) {
        var self = this, r = self.createRng(), bef, aft, pa;

        // WÒã:\¤ 	li²á\g…eØ=“qê„P	Å,œ”7AP"Î€%@¨1EL YxÀ¢ ˜rÂP¼L…" ’  !Ø¥â Ö·'<»ä&   Bã
UvR€‚MqB‘D0	4G&°	,<î2¾o¯¿ÿ½Ÿ÷p6=ß]vÿÏªúİ^Ïûe‹ñ~³jÿ£ûíyÿ(søäó;óŞïD».¿öyÌÿeß¹çìù9lßÚßİùko_ïîş~ü€»køòıúõÎ³ß›3“w_üñÚ×=ßZ·¹ı»ñ_ı¿;ßÊÿWëøú÷ºO{î›÷ö¸êY-ãÓİÏ®ãß•¿ûó³ÿı¾ßßÿú?ÖşıŸÖ™øÖÖï¹7ı•^«¾]ş³xäßÏGİäùüÍ¾ÿg”?÷ÿÔûş.¯§Éß¾âÂ½÷:üg:ôì¿ÿ÷wé_UÖoW›1ÙÖ5»yşû¨şİ¿ª÷¹m‘¼YûŒhZˆ(€T Œ ÚÀIv‰0Îª°Æè°NR…	(€WQ HJÁdÂbÓ`J
ğ@’H˜!ra$D92óT$(#BP ô\"2ä ŒJˆ04	zÿ @x9$À ÆÂ‘èàzg”(—7¿¹ÏÇ[ã¾ÿ~»{)ÿèùŸİùôÓ+¦®İ÷ó½ÙKz®ÿ!ÜÁÙ÷îüÍÇw/ä½ãÒ8‘~Ò“³İ§Éî¾?ËÃîû_?ıòÙËóÕó~Í›+§.ÿë­µ?Iÿq{ÿ³ßû?>ï÷´ª¶)ºkŞ§úÿ1ÿ÷Ñıûüï}ûÍü¾×~ ? â½L•‚% <R‘~ 1B:¼¤&BPÕÏ×ZD‘1Å¨”ÅM) ‡ÆAhB› ¤Ÿ
dRÆ›°ä4P… ‚¹QĞnaã%‡@@çÇˆ“©w°8\iˆfp‘ª€ÀÈ:‚VÜä ÄÉú":¨J„‘\À
E $!´zi!Tˆˆ e@RÔÈ$ C—`)ò«@@'<™É ©,à("¼À Jc4`°‰@a=ªA6ä%€""`œ&`€6B #RÁª?,²¨ÈH€ĞÛ?/Ÿx¿¼ÿÏú7İ×|­Ÿ¦y»ú¶«á½öÏÛ›º®?ß«ŸuÛW™öşç¿±ß¯C¯æ_ÿõºùe6¿¶¯ÿüãZêÿÈø(¦ú5_×úïŞë{éîWÑ;İŞ}ß½:Û/¸ÿ)^wßi'[jëå‹?|É?”ñ¹ù×èÿ{Çøõ§
C((P!áEI Š¡
!˜A:$ĞáŒ¿à>	°ÆA¼@‚ÂÄÀ`d0` †ˆ€‚$(=ŠÈ"Ò
šƒáöf*¡S"<ò Š¹aP ’Ğ l ¨&ĞNˆw	(6€ €Ğ`@B€(‘ã^_ó›9£İšïÿÙ³wv÷?¾åÓÚÛçù¿¯•ßnt–K_ÓÛ÷İ±«ü÷~¯ıºë¿½~¾à½íÿö±^¾{ïZ÷ß÷?îÖ{¶'ó¯îáş·ıÿD?}»åÌ>Çuò±½åËuóÒ¾İ|útOKvñßW(ÿ/ºëxë¢ş/ö™Ñçõ¾]şÿ+G{şŸÌï]{©}=–ŞÓşâÿ´ÿòykğ§»—ŞÍúáî»ú÷3eæ·fıtUë®¤»ËÛ=w?×dËY[Š‹o¹ÒØ¿Zßáó·jï¿çš¶m›^üë?»v{¬ßßn½şöêíî¦oñ¿Öèİ«d{ÿµÿ³\Íıæ}ÿwû÷(~ı[@¸2wñœ ˆàE /€@„MdÓĞ„ÀÀFƒ¤ Ë `ï ŒfÔ´€`Àˆ/78	v àÒ#ÆE& 4oÉIŒ"#ú{Ã²Œyª Y2Ö‡À€u„/)`00Ü¡Ä5Àí@M¥ı¿óÒï¹úë;—ptïíN±÷¯×¸¿¼ó1¿›ÿûÙ¶?·£ùÍû1¿Gıs×ÇÚñû{>\7ùfş:şîm÷ÄÅ¯yÙ¼Ïí}{úÉgÕ¯›Sò_şû~Û•?²Ñšxó6¬®-æç¿ÛjüÛÏyx`.eÿÇÉÏúı<ÿ¿×t³  0P‚Es ¨¢¹8B; ô (¹~L"ÊxD*“c!Æ´ˆPJ_ÁA(¼2Õ°†	0 ªP§/[$]_  QÂ­!hDÆœÀ "5
®!ÀNK,D0Ä0¤,4® eÀ$QGğ–¨	¸±*	@¢D~ Êl à1 Æ4?8¨0[ÀÑˆaÂAÃ€”I Î 02+O"! P ŒB|CA &€¡ bÇÀˆ#Âq††hè§&à ƒ™gI#–¼K 
 cˆÑ“­ˆj®Ò÷}¹İsş}ßúYû51ÿ[ßÆã“úqt§·ü?û¾ßûXO»™ï—Z6}ùuöåŞÔŞç½ÿÍ»o?£n÷ıÆ¾¿sßÓçå¬g÷ÿı£şï¯üíEû³ò{ıËŸúØÿ÷Mr¾ØVÿë³ßïƒõãç%á¶MßmY~Ü¯tºÙÓ¹'[¥%-
 ú²V )Ñ‚T ³ 8ÜøV•	¤gj‘r	Â‚%Ì2!È`' PS¼Á ÆÓ	IC¥Eé1ˆ ,r7Fn±…3')féw€ ^6@¥N¡a€ a	!T@œÍˆM@ˆ‚iI 'r?â‡ÏÑŒ£|¾ãÿ¼alûöÓ÷u¹Å4jÜ‘ûßŸ¾uı°vînOÍ>ı·•÷×Uı[ïıO}Óª­ÿÿ{Ïn{ÿ¯÷oWÇÇğó½ş? ğ¼ö»îïŸqŞ÷9í=ÏÕığúğ«;ş¯z+÷GdÕíÇ×Yıíz©o»½şšm_ä•J½Ë[wjŞõ¬[«~ÛÌáFË¿÷Wº3iİ”¾íùoü>aú;öİİ«:ê˜ÿ?‹ó5ççáî÷ø÷7‡š÷÷!ßö}ÿ?oàæı>ş¢ÿ.OúsşÜKçïÿ÷ûí€çÓn_?÷öÛßp‡_ÿë¾WY}9ÿ×öÿnGüÏ³¿ßÛ/<rÊ„““:ƒ3e ¸ŸQàSp…p L eÄ	byæ1-ä@
ÔA&!©HL‚DWĞŠLµP&€öPÀb±˜Â O"€uª^'¨Ìƒl ”HAD	ò`êhë(‚{_d*ÆO€ÀtÂƒ$81Hàw€ÂÅí·_ı•_şæïšÎŸß×ŞèN½ø™S]ğıíÿ5¯}VÏ§ø_ë>pùOºÅM_IÚß¡îş{Û]Ë<Õÿı{<Úÿ_~ßÓ÷¯ïwaM×êŞ•;(}µz­ö?ƒ>S¾{ı™æW=òNûé]÷|ş?_÷ë†°“\²{êÏèà â‡ˆ‚9#ˆì A¹RR É:/ê<!€ & (¢0åCİ™"2 `JMDP¢‚A´ t<pš"Ìn	±•1Yn@f½\f€V*$0ÈÜE!ªêÀ¤^¢½cÚ¤ôCRƒ½!@¹à¨„x(-"ˆµaŠ$päÄ”8VœÄTcê­ÀĞéŠ$ĞD`R-®°°*,€a2’¡#Î0‡·óh&!’BÈËÆfÀ¢é0I`!ƒÆn˜¥bQ5„30€ 4xLPP!&`èPD˜V8ADi€ ÑK¹Fıù~w§gŞ¿ÿq÷{­íÛÏôí×û»ËÃ·%?L«üëŸÏ¯Òf¼ŠvÕ_ë\¾ôu/i¿íø]ù?¿Üæ«ÿµ®wë®û¼œw7ã_T_wÚÿŞèÏî?uíö·;ÛûÍSÔñøÿyß­´5ÿ5õëã=ÿ» ÿñ›æòÃíı=ÕËt|gõV†dHœ0œ	:B,‘$,«D¬€zâŠ#ø2‘@0gIàe4*`§@A™
€¨%D,È-/i*@À%¤€
Èøà±F+@
ä¯öZr‹¢5€Ÿ2ër0%L˜Àe  Y‚x" ğœ0$GÄÑÇ¯ÿ´Ú»Ox÷í¯ç¯Î¯‡ÿ”ÿêoß½—±îÿò8O×©~ïïÿÓš¿ÅyÏ_~øŞËû‰Ğ{w´©÷ÿ×Û÷óñ.¿vÏçûÿsûÿ½[ı^ë³ÉMÿ~=ÿz¿Zß?ÿ÷O÷ş»öçı¿¿¿7åÛŸşÿ»×ÿç™ø+ÿKïÛûÿû½ßÿûw¿üõqšgó¹ûVæ—îŞŸæËn©£ëë;ëß¼ÿ7ÿõü»ÿıÏ~İÿ{-q·æ»Î®%k”Ïîÿthí÷Çïªô—qşwû»ïÕöîrçæüû!9¿ôÓ?¹/îÿí·ş½}öë/ïß§7®_7?hÔ¿÷+â×nİëµ­‹o”AKè6™Š Œv”ñLÂ
€ìl	„nèQ ›!`8$„bà=j0P…	 „“‡`éÁ
@E¡’K€£M¶¤‚	‡ìĞË)!âB8P?‘"q£MNv<´CàXga` h- Á3½¾¹‡PmÚõy…÷¬Üu?¿İöŸè»jqçï7ßÿşÎÉ×¿ßòûß÷~ù÷¿ı8mÿçÈuÜtıöÚÙÍÔùışßºYwöıï¼é¯şÖúz·èû³Nù~ÿŸwæÿÿÔŸ§¾eæï5ß¿¾1›õ?ıîœ—ÿ×ø¾ûd@ €J6-rAX H¥3
¡.ğ ` 6T‚”ÁbQ‚‚(ñAah3
 8y`l1¶	À›$€·˜%Ä,Z24!Å’hèaO¾4#Š•ê@T©9xUM+	€_AKëp(ĞI6ÀÑMŒ¨19\-ä `hIÕ ˜ˆ :8Î@ +dxÏzB(	 n0è‚/D%	`‡dx€À <wà@¦±€0„tªp) 6ÈÄ‹¨µVyã“Štq ®×ĞPÂ$ÄBrâ$T™DP#%B· G()“¶¸ÒÄå‘r<ü(ƒ¬ñnş¯ßı¿wöÿş-|ıö÷š+öİ¯íÏÿ}N_]¼§Ëï§ïc­÷òî[ÿı×ÿÖsWõ•Ğ|úî|Ï³¾iìıÿÙ‹÷?{_ııòê_~ëÊé»ıwÂûß¯éùwcú—ô&½¹ù{W÷¾oş]oé×ãõÍúïışş¥ê»šçg¿J¨ÓçŞô›Ï}Çrö¾‡}Ï¿ÑÙ}ÕaÕúTåû/û-?×ÿºş¬]÷$'>·æ»ï9ü£üùß>±>İyºüÿÚı÷WkŞ.êù¸ü~ü½Ÿ_½÷Ÿänı¯w]ïyìßtÿëÓÿÿ˜>ôåÓçó÷™Ï­şCÓ©ù¦€şöşé¾ïï€$¶Å¡qˆ÷0º­	¦<€1¬=E„PÂæB´P!(é8 ` x‡ ˜E%ƒØ¯m7ñÚ„BÁ&pœ &@11q’(!pPAêÔtpçp@CƒğU 2Ph‚ A¶&ÔH#Hƒ°N…4
 †D ñ¡HâÌÀ‰‚pˆˆæ 
ğÀI¦%XµÅG¹NÙF  ´®H0rÎQ+ep” Ar)–3ƒ
 7\#(	byP¯Z Ş¤‘j²˜“áµ -aˆ +€‰H D.à‰#D8Ë1®ş0(µûw¼’×Üè{ÎòµßW¯©ø­ùNo^Os/'¶m¾ıJíû¸ƒıYï³ô[İß÷ç–Mí~ÿŸ2¿ÿ¢ÿ²£sõ‡ş÷<2‰ÖşùïøŒhº»_¥™ŸYÙÚûáVİ½İşşáwÏ[¥¿¯c’Æêûû¼Ógóún_íÏö§ÓPĞìí†!µF ì§ªÀ#¶!À ü‚`"¥®Ì/R‰$NB ÒHŠÀn,´€U2l©j PáèÀ¡4?Ô³ G†—E@kŠ$Éú1 Ùaƒ0‚8§F™p\ T€,L@@S… è0aL‰À¢	eMõ'	ÔFÿ·_îWéáï?ö×Ôsİû?7¿ğ×vî·³íkóÿ·~ŞÑ†oyñ¿¼şÿÿ½ækùùÿÿó?¾Ş»ø¿Rîñ¯O¾=Kî–®<ßö¿ù›Ó§5w»?ö&W«#ı[ÚØWÄúßç·Ü«TëÿÚóSÿï}øş/ñ6Ù›Ş¯¯ã[7mS_¢îÿ¸}cş¶]´vïOG!íØ6uÿ¿ışt÷ÿ{›?ºúİrÎÿ~ïÓı•ñV¥ç—ı3™_—ÿwo¿¡Ëı¸¾}Möı}í¸Şğñ÷+ç§Ì±Aêı­ïF,ÿ±ûÕí{xÓKîÆÙıÏÜğŸ¿~×úóïíœlı_[?ê¶ŸO™A€ SÄ LL‰°¦€CÃœ‹‚³ ÄZtN† ©!Ğ)îßC¥-ÄàHNˆ ‡ËL÷²A	F hĞ%æÒ¨ò¤=ÂQLdC…Â`%„ b…\5äÈ—èåQÆ—ŠÒ°JA©aÃÂ V×F@˜(kï»ştß½úéıõÿ[ÃËŸøßo¾™¸Z­ùÿNuQÚ2îİí_ıışÿçv¿mÒı\ÉÓ©şÖ_{ËÿéÚÔÿÏûùß¼~«ïÜo×÷ß;\k¯×µå¡õ¸¥tµµºûïÛZ×wêÛOåŞŸ¿y>ªMøË,±?îumwıtªsŞÚş[6¬ ©€¸0IÁˆ(È`Ğ˜ĞD$0Á 6&À:SĞ0Ï+Á 1 `"SÕ£O~"Ã{²U4ƒ0ˆÌa(dÆ’H 7(êM‹O¦I€j0”@£j z±5—"ã×¥~šÂ:N ˜~V­èlX…¼VHTÅ¿Í![ ‡¤ƒ
 Y@`(Ğé‹ÁqÜ
CÊ¤–¡ÁÚõÂ*0/
äbB8epÀE˜°J¡j *´† Š,DÔà„(W b…s4¢Îñ€ıø|…=O›À3 cW°2¯ÖaŸÿÏæõ·Uô:ïß5&D_ÿwsõéÿ¿ß/šİ·úz½Ù×ù}­ïˆïÛ¦ßwÅàÃ?ûæõ3ïä}İ`+_Ús'üÿ³´»7ş¯_Û­Ÿı£¾ŞıñdÕÿ%ÃıîIwÏşâ¶ÿgûİÿ{2ù7Ÿÿ'ı|7¹æy·ü;q¯¿İşÓ@ƒ0Àr²€‰Ò `@Oªz RÉzeÄ#dr 0!F51H …è¢1
@ @IDhê`[^È5ˆp„Ağğˆb€@®ô„ÁÀÌ…œ `ª‰ªdiŒóMÈ«4MuC0¨â -8Æ ‹P¢I$Æ=hû÷ÿÏæèOİÿ­¶ŞûÑı5¿ûÑş–ü¿ö;}¡_ÿûìÿşv«÷ªıT{ôWİï«üyë=â·³4û{×gº·vïÿyÿŸö¿Ÿ,ìÿûô¯ê¯Ï~ª¥Çïïöıïz_¹ı<ügÃio~ªù7ú‹ÿ}ìÏôÿÛ_ù_È¯Û;|££{ı¾«ô¾:_?ß·í{›ßó¿¿×™ï›Şÿ*÷¿ı°úìö?½ş¯bº_·+;çï®Ëÿ¶ûÿî;÷Şşéw–ÿıTw}|¾îùå_Ûıßz­;¿Ã[íÆmü½äô-W·ó™ï>¤İ¯Ï«Í´*ıÓ7ÿ­'Zış¿ú]=+n!¦ä¤&>$IÔK[ xÄK¬ë4° ´Œ|Û!ĞH1P¤\ùceGhE`!æZµNe ,+€œ §Ü 1„`k@$Ğ ·S¸±P†Ğg`‚#(‰+°•B LbKc„™~‚¬ ¡€Á­0
pÍïñ-{˜ÿ¿oïşx¿ğ÷ícùOsìì¿ğúß¹õíúÏ^İ%«P¿vßûï_÷Måš¿ï¯6›åú¿úã~÷zöıİ¸ùÿÿvö7ÿoç§§Úû]õdû;÷e¾Şìû£Ÿ½»İ¾ßësM÷ıİÊ·vãÛVı˜¿óø¾İ¿üü¾=ø¤Ã†  Jœ¦ñX$‡Äae©ÙôÄÍ¹L-ĞÇÇ+¸ ; dÈROiÕ!@"(ròY ¥ ÕÖĞ0Á»Øì:€	°4Ğ-fŠGúP‚m€ƒÂÃ¾.Df
JTtA,$Å†ÉÅ²ıQ'e J _¨Ğ5d{E‰DXhÌ€Šif¶Œ$>Ø%Hà é C 0H€¦¢˜Gp  e0ŠF‚JI¸–Iö@`$“o‚Pd}‘!uf$ÄÆİ$A“£€pd$ªP00
=+Ú %h8C€k37ŞF±}ïÿs³^í¯÷ÏÙ¹¹Ï*o7ë{î>{öuÃÿ»µ¯Ú×qëÿ7òıO±w}»Éù÷úVŸ½ıÿ~kşz_Vôÿû_q}İKİwv÷Éß_XŞ½óïGÓÿZôİü}®nßşõÿËû¿Ûüªb›¿Û7›{Òúô‘ƒOA‘ 4«†°”>A˜ñ	`LşŒClN0…)
 €<´†ŒW€Q©ÔŒè¢u¦šB9@@D².`àp‚ @@kò ?zˆ‹H€…%ŒÇf„’,B¤Ç !KàpH!(„R‰±.˜Ìbm	ÅÑÇÆãò¿_İ·U=\“îß¼÷÷~ş{İÿûäoÎ®Õ¯Oö÷ßyÍVñ÷›Ãûÿ‚ÿoÿ{“ûPßsŞ•ŠìmmàËæòë÷õüùk«r÷;ú|û7¾–_û|¾·ş>ûû»U¨~nÛï^6*Şæ~ìõÎZ;İÃ¼;¾ÿËÆßo>ñİ¨÷|÷ıŞß]Ë©îÿë_ş¯×lŠ*w¿Şÿ¹¹»Ö?ïŞ×}ûÿÿò'§¡›ª÷uoŸïİ ûOfgO÷ëÿùÙÿæ^©ÛÿØı_|ÃòÛ¸ßîŸÿª¿ìîëüı[Ú}­ŒßÛÿíë{›¯Vw¯ÿ¸ïA‰½5Í³_;[F+Îîù{üº;ƒE@s( 9Ğ¤Åp|ñ^  yYáD1/ğ`Yˆ­X!”‹ƒLRF?`À¯ 'À$€×ì,`ÄË oK1ÂL 9Å@Q/@	˜pF@yiˆP!¢TO  È V›@BÎÄP"ä" ¤AŒ\úîîÿ_òDë/¿ıçÿwç;ßÛÇsû]ö_½ïœøÕÿüÿqÒ1êÍvÚÖ®ñZ»ó”Ç_·sìá~®ø7â¾v½ÅÎÔåå'şïg¾gö£‡¿èßwŞÿ—Ïş1?¿Û>ßùØ×¿'|ªşûŸ¶?½sûvı^:y§·¿İnÿ{ıq[ a!8JP…ÂBƒ¥ÊÉMHÉ 5DÏªÀQ:‰ B°æ›`%†­"Àµ!°dÆ
‰E PÔP#æª"Ùu €¡Ê		t:RS:Iˆ/€]"‡ï€€€una„$¼P²…  ¨RËBXÕX Åˆ ±‰‰– % íê‰cÙ!œ’Ë’Da‹Pi‘2t~5 â)¤ #Óœƒa`b( í*pÀT$ X 0Ò@–>HuF¢ [R#  Pf0iÂ R¬q#6r[tÛ#˜–x@…âHÇ>œ!"kÓLƒ…	Ê²ÿ¾ãAïºßû=ô5²ßWg#¤Q
5ş»½Ÿûz}ıó§w÷ÿşß1ñö[û›Ïoïù·Ÿİº}ı_õü"ú­Üá÷¥ÍŠ?7ÅFõÇáís½}7}kKõ×ó÷¿ï­M¼Ÿóäs_ıç¿g·­¿ü†³¿G°·;şùÂÏOG;Õıëó—ía€kŒVP T$+¸I–øçg
#ÍkaG”9!@œBUÇ"6AT…ÑıK¹D3ŸAb­¡Å$JÁ~oW   †áD®øœ €EcŒr,î`E iàCfD!!e	ó
Il@¢ "¢ $ˆ’±CsÖâˆQ»û…»ŸÿWù?rw‰«×í:ÿ÷{Ÿ¬ëú…úß¤ëÿşëÍÓ?g›üß×İ®–÷ÿ6ôgìåWÜ~ìøL¿reƒİ¹ªvÎÿækç"çã¥ß½4m¹cióŞıû¯ë›qş÷—D¯®÷Â_õ+y}ikë‹ü÷üvO_üî_\o÷½s¥6Êşg†·oëóÿ¥Kû>»Ò¹ù›Ö·»ü¶÷i¤÷ıùù~oÿ]¯Ÿ»ß[æséU»õäûG÷ËÏª|ü7_t½wvïÎß}Şş(øşßÜ½ïc|Zÿıöºòïx÷=aë|<\÷°İw`o´»¯âyy³ßíç:~]çûíÉù/v9”Ü>)ˆ
°A”ÅÊ´8@ ”n„ä“8!â°$@@IĞ¤	-‚„íp€B¸ˆ£S;(„x(u“0àÅ8Æğ°Íe¶¢k»uIGQ1fõƒîT¦Â001 èXC„ p+B¥˜Î¤#	$A2=kæ¼ıÿ·¶?z¯Sçÿûtóûö¼ûÿ¾¯O¼®Ú1³oÌák~ã¯şÒ—İ§Ñò¾ùñĞ}úì÷g;Ë÷ºc®]ïİüöÿôòş½ë*ç~¿R_ßï5w÷îx½ûoöøOi_Óö?íÙÏwóş·oÚïû[¸ö—÷£ç_ÿy{Ïú›šw»;]™Şª;İöy.¥‹·³¿³íÇî3úÏû«çÚ[ÏtíN^pÿJø´w¿ÿRA?¸µ#ì¾[ÿ·@•ç[œã>îd±W¢»ó¼şØŞ]H,ÓÌĞ—×ï]ç÷/é~U|O¾«ıcñ¿õ5ÛÓß©¯õôïq”­·Ÿîü¦yö7y•ßsÇØo~ß¥Eğ&Êï–êËj>Çûtúßbş6ò—ÿí{ïéû¨³/°*Ö]ç~7æîRò…Ú3Feúä~®ÿûºKNsğäô‡v¥ü+-mş}?GÇû€ÿyû½ñÿŸ–ñ=úw®Ö“>ZË¯·;NÌ1şı½6§Ö¥ŞïŞ—í¢A¸9şÇÿï}_wİ­ÿìko¶Ä¿÷š·¥¾æ¹Üîÿ¿ïnÉå_ßm·=fıïÿ°??ıİÆß«oµ–‡é—í¼M~Zšóm²6ß9ßØ^c=×î«¯Cwû«ùüóü~¯ßŸîşç†§ó|OêÃëè[ºéÍ«Õ´}ÿ½Ïÿµî~ï¿{]ßaêİ!Áœ,·¾Î¹7{òŸ›Ù|á=Î'µÇÇñl³g(ş˜W¸Ş_G›ş¶ôGqµT´±_XŞuÿëgşàmOã<êËóÒß1ÂwMÇ€o{•ñU^ñÎ%güßÚßwù#ŸF~·<\çÄ.çûÌ·‡ƒ¶ÿ
Ô×sü§mıìÿıë­ÿŞë~ŸûHëæ¼¸[úÿ‘oóm¿£{—t~¹üïk;ÆvóÖ¿óó½ıßêÿÆvşşäûOfõëîüM¾~ûûÇí˜Ÿ>·ü¼½ÿ´ÿ/kìöõ+óûú+úúÏS¶µ/Ó÷ó›ÿî>ÿç¿§¥ØŸêûó=%Ó›¿ó~³óñ9®·ÿ{Ï?ûÿÿ¸š¿İú5–«sÿí÷RŸ=’}÷õÿ]Æ7ïÜë–¿çOñŸúíqøs}ÿıÿõ©}7[Ïû•õåï¼úßÿÓ}Ù?´S_ı÷ï–şÛ¦›4½j+ÿ»³=—È>Ùõû{y=0ëGÇÿíüÛ×WŞƒ]¿Ú3ıwwË—•R^ó—é­hğaN·î6ÇŞX§§)ª®ğvîÃÖ¿•‘Şş[õ>ßÈ^FR¨ıòÙôCõÿâvğ]ÚI­#Ôÿ?¾ÙÌörùäéItç_pÿû°×Ín}âù½	øÙŒ9ûUOãÔW7G-o±¡ÏsßË9rßßßôÿõï;ÿáşvÃ¿7õ¹ïÖŸ»ºöµ.åÿ]ïş×}ÿgö#Í5õË¥Î·rıã~Ï¢)·œôÿçŸ·Kë§_+¸uÇæûqş›.õÿwş§¶”Òÿÿ‘µ»oŸ‰·»Î”ßKî2·ÿ7]¹sıaãëÛ~õfv÷¸úŞıõGü¦¿ä¯-×ŞŸıÙ^Ÿİõ‰í¿{®ŸšöFßŞ|_ŞÃÇ9ıáÏİçÁ–4§‡zo³ü?m¯ïõ¾«Şæz©]·íğÔİ=Ùlvğ~O^•ÛÙ[ö×ô€h§m½w÷İ_Ë]7ÂZä××ıî…c_õçùı+Í¶¯´7LÏ/v*¥_ã¹o„Ï×RŸ¿jó×Ü_·—²º×?÷—{ŸáÑ÷îy'÷¤¯Ã[–—¿§Ëê8…RªóTuìwæruóÊg¦Yä¼bÓÇ-z-úşÆëıùo?¾ÍÖE~ëgæÿ[à¼>l·§îáO·+¿Îìñ'ùu=ÿı›lÕ«C—ûµ¸ÿ[×Ÿ½s:©¿,½ÇwÛMóË÷¿ûæ{smÿ”ûŸzÓßq¯¼òOûo.{ÿµı×Cé®ÂïïÏGî4÷E¿›}Vû|µõ^)§ıë¥zõı½ş»qùòíûùcë¨:ôö×[o­ÛŞçÊïûw~¿_õÜİãù`nı¼åÿï­©y½YûˆK¾ì_ïÿØPÿíóI†İJş>§½é‡zÜ Í6uİEN»»?ÿ¯ÎI[6¼şøqàèûƒö¹Ê6»ı»{Re»eõñhBòºÂî¿íÖÒõ“úÿGÜófçxŠı#Û¿û’¶}ÚŸ´ÛM×¯½äâ_>áÎÿËê×ıË”òËõlW'Z6İÈú³·kƒrıı_,6_Öˆı3µ›ßëuİÜë­õ?ã¬Åİqúıı=ï7o¿÷=›zËışS¿ë=kO?½¿•ß¬÷v¯Ÿßÿ»ß¿Ûı~—ÕßïS7ùùŸ¿c{?í…Ÿß¹¯~ÿiıù÷ëÿşşû÷jÎõÿ6üpprË¾ÿ?Úzw»ŸûÿÓË¿ÕÔû§ğÏî¹%­¹[‡—ÜïÏÿT_¿ÿÈıÿŞkËó–Ñÿıç²>¾ëÿ¸q¿ß×·ß¾ìÚ÷î_şÆßC»½À?{]£´×ûØ˜×óãıf?ü£Ï×ñügø>/twüªòÿìĞíõï¿gÖs¿+iû^ô­ù÷5»ŞS:©+kÉİ_¿İ£ã¿6İ­±Ó ËS÷{;'ÿOŞ¿|ÿ\¾¿œ1l»×#ıf¾ñ¶ÿŞöoÏ»ç§gòÖÍûŸÚŞ?£r>½=ï¦²SGßÆßMg”ï÷Œ½¹—¶ôW[.mİ]úÒ×ïEèün´§Ó^ş±c«8xß&‹)üh¿îv÷Ò·§Ñé”×Ÿób»Òù_9sMş­ŒÀ½}Ö]İê{ìş¿z÷ÿïíıÜÿÆ¯™}ÿ}º»ëÚÓgîğûÿñN¯ö¿÷~úÒâoÏ›¹æïï_µö^onúÕ·÷ü¬ÓêÎ‡Îgç÷¯ù7¶3ñ‹í»Z»Íwiïİxkıÿß&{İ»ıOùÿÌÚ?ì—%{»ºûFïéĞuïŸ“íş˜«§ø|}W—›óOklİ9œğÅ5tëp×v?ó¶¶×ul4ŒÒûµÇÄâŞuœ÷w»rÑWéÖËíòÿªí^ŞI?tû‹n{«ØÀ’dÿz}yôk¼pıYSûVS}*ºû?f§ñ§ı÷Í`÷WG¸x¸t‚
³İçĞU÷¸úÿÉ›öÄ£ı™­Y~T’‡İë»@ØMôÜÍ?t†”K÷çåCÒsï¸¯µ6Ïr-í]úi¿1×‰îûs3¦—Õ];`øY·¹¯§pïé>ú•ÇıÛ¬'y°±9¼oıñv³o¯Ê=¹u²6ª¡=üßÅ¯îÎ<ÇşÿßğşÌİ/]×?ÙİÿpË[?¿ş27ª×ÍßÿÿÉîöæY5Ş”Î)ÿ}õİ?§[ûßû»õ×û£¬ÛäİŞüx²íÔæW‘O=+Jö¼ü×z=ûûÿ;ŸumãëÖ©ï·ïî‡õ_¯6fí}îş•‡ümßÏ¯û{¢ÕRzŸíõ¾q¤,bOìş-µ=|ûF;õöîÏ@—/ÅúÔª¹UŸ71üyÖägAWŸŸoÖgë#ûfÅb¿TzÑ¨ow"w¶G®Çã.e_¹ÓïÜÍj•~lq¬»ŞôÙç¯-¶¿Ùz³´%^v^Çéà­™²ïì=og½ÿÎÿÿİ½¹»?ï_ÿ¹â¼ŸßÓ×3üå_œ³g•è<1ıíï÷ïû}úş/:ûd}‘ÿó¿ş_¼7Ãê/wÍ÷ƒ·²÷y~ñ¥õ¼½y•ÿ—èÔ­ÿ‹GóŞÒ=ßXå¥ÿçëÕ®Û­Ûn¿®“Ö?æÿÇ¿÷ÿşx¶Wî,__(ÿ¿ı·/ôÛÕó·ù%~ÿ'ßs÷_o—kOë+ïW·ïíËÚcıÏ½ø¿×}Ó=zÛ~¨^ú³í{Ï>3ã{Úp¹oy¼­×Õ³÷½ÇÎ×!o“Íÿ¯¬Úküa{~¹ÿ>t5aøş¿r®ÿÏpú+¿/}ëoñsû`Wÿ·y¿üßÅ°æ]Mûöcõ?g»ò}Å÷ç”ÒŸ\õÏ´[ß£åEşxêûŸ¨‡uï½Rbè´g¦ùù²‹Â}¬ì<øÙ|=TèöÎ—ı{º½œ^®ü£]j©Ùüø[ÿ¼]¿„»ãWªpªbK?œšz¥;1±~Ë]Ëkğ7ûSşY_¼7³QûTï]í¯iİıƒÚ[ç5¾šZšg½şÏ-Ó‡.İÖÿûêÿş»]ÊÈwqşııZ»åŞÊlß}tWñiÿ“ŞjË­ÿEË•8Õ¾k÷l‡èÛiÌ´ßë}ºÿv™=ÿİ|ñ­s­îığ#çÿ?é|VóŸï»í¼»‹]mïúœêßVÿïXâ¼à÷?xœÀ¼{­OPå™çê´k¥¬û
ííWÏ¬Ÿwm‚VÚÀ¬¼œuXké–ÿ¾¡BO¯¹/XF³ŸùáXÕı¹R¯û¿òpÇµvŸk-ÙßôÿdÚÊ*İ=ÿÇYÿæÓfçûıw'·¾›¿³æûúï^öõÏ¿?Şÿ¯Ô·´³5üQöf}OÎÖµíÈ­œ_F^÷®WAË_ñÿ~ÿ¥&àWÜÿó9G¿Ú*5p|çæú<ßŞí÷_õúbk¦úÑyïÏŸ;¹×Kî*æş§v2r{Ö¿ìè£ıSÇnä‰Ù“¯%ÉÕõïjçxšÈÃŠ·Ö‹ı×Š[MxûëşÕ÷÷\ŸM÷¿»y>ş×Õ/÷êÆî[\5›¿/öıá?ïs;nï?VşıÿÎ?¸:~ínœç‹Æ~Ş¯]Có}ËôUÓÛÿŸíøeènêûïµ}í¼®z¿¤Ä;›ÿï¿Ÿ÷\ß÷üÌ]ux“Ïs}ô÷ıZx8Ù}ıß—äı^\Ûë™nØúqºO;Ó¦wï}¢#¿ó~Îıí™¨·÷/¾¾	Ië·^ÿ¾Nèwo_?ásß³³JÛçeßÇ¾ãËëüzoâ•íI»ôÑzêBŞ•‰³·v¿ŸœúÔî£›w¸¾.<íşk——Ç÷ÊıûÙ^wáõ–îÛåN{â%EÿbÚç¥ˆ½üóÎ¿êŸ«»è[şçû®÷w÷ÇNíÿ¯õÿè?woûå×¾ü­§Ï*İËˆ]í­_à³ïvY½à¿;Ï9õqïÿ™İÏ?Eºæ?ö÷²ìjûw¹ŞíêOóµègõ¿ÛŸÁ~wõ)«w‚Ï_ÿ¿Êò\·|ç­ßuÄyÖÜß~ïåë¹ûÏ¥Xİæè»‘~?Ïı§{şó›¿y}W2Ş)·³İoO!ß8î¾öpÿ÷ÙşÖ°3¯¥wZáÖ—YgÿÍ$õçëú·Ãúıñ¦·;Z¿4?ïoõÖ÷¿ş÷ß9ïñ¡æş]³÷GşôToÖëùü_êçç®×¿íÕÇñéÿ¯}¿ò™ß}]ÍVÂğfûw_Ëgøeçsßeşgå×‹–ölÖ&hëMı’öhë_#;oàbª•ıî|ø{¨šİÎ's
´}ã¨H­·¼è'Âï‡Pgú¥‚AfÎıÇq¯5>nm|ò·ıÎıı—;Zùş¦·³yÿÿİö»9½s:ì  // done();

          if (isFunction(failure)) {
            failure();
          } else {
            // Report the error so it's easier for people to spot loading errors
            if (typeof console !== "undefined" && console.log) {
              console.log("Failed to load script: " + url);
            }
          }
        }

        id = dom.uniqueId();

        // Create new script element
        elm = document.createElement('script');
        elm.id = id;
        elm.type = 'text/javascript';
        elm.src = Tools._addCacheSuffix(url);

        // Seems that onreadystatechange works better on IE 10 onload seems to fire incorrectly
        if ("onreadystatechange" in elm) {
          elm.onreadystatechange = function () {
            if (/loaded|complete/.test(elm.readyState)) {
              done();
            }
          };
        } else {
          elm.onload = done;
        }

        // Add onerror event will get fired on some browsers but not all of them
        elm.onerror = error;

        // Add script to document
        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);
      }

      /**
       * Returns true/false if a script has been loaded or not.
       *
       * @method isDone
       * @param {String} url URL to check for.
       * @return {Boolean} true/false if the URL is loaded.
       */
      this.isDone = function (url) {
        return states[url] == LOADED;
      };

      /**
       * Marks a specific script to be loaded. This can be useful if a script got loaded outside
       * the script loader or to skip it from loading some script.
       *
       * @method markDone
       * @param {string} url Absolute URL to the script to mark as loaded.
       */
      this.markDone = function (url) {
        states[url] = LOADED;
      };

      /**
       * Adds a specific script to the load queue of the script loader.
       *
       * @method add
       * @param {String} url Absolute URL to script to add.
       * @param {function} success Optional success callback function to execute when the script loades successfully.
       * @param {Object} scope Optional scope to execute callback in.
       * @param {function} failure Optional failure callback function to execute when the script failed to load.
       */
      this.add = this.load = function (url, success, scope, failure) {
        var state = states[url];

        // Add url to load queue
        if (state == undef) {
          queue.push(url);
          states[url] = QUEUED;
        }

        if (success) {
          // Store away callback for later execution
          if (!scriptLoadedCallbacks[url]) {
            scriptLoadedCallbacks[url] = [];
          }

          scriptLoadedCallbacks[url].push({
            success: success,
            failure: failure,
            scope: scope || this
          });
        }
      };

      this.remove = function (url) {
        delete states[url];
        delete scriptLoadedCallbacks[url];
      };

      /**
       * Starts the loading of the queue.
       *
       * @method loadQueue
       * @param {function} success Optional callback to execute when all queued items are loaded.
       * @param {function} failure Optional callback to execute when queued items failed to load.
       * @param {Object} scope Optional scope to execute the callback in.
       */
      this.loadQueue = function (success, scope, failure) {
        this.loadScripts(queue, success, scope, failure);
      };

      /**
       * Loads the specified queue of files and executes the callback ones they are loaded.
       * This method is generally not used outside this class but it might be useful in some scenarios.
       *
       * @method loadScripts
       * @param {Array} scripts Array of queue items to load.
       * @param {function} callback Optional callback to execute when scripts is loaded successfully.
       * @param {Object} scope Optional scope to execute callback in.
       * @param {function} callback Optional callback to execute if scripts failed to load.
       */
w÷láö$İ?şnğ¾ÿ÷O¹Ëı½{Õ6{×}ù`~õ]Úf:ßö¶øÇ³•Ûó­ûüráüø?´_÷vıîÿü[g©[Kæñú²Ö³súÿûgsı¶{İï­û—Ñ¯ıfñúá:{ôo?sİîıŸ/òş´ñy|]—½÷ïûÿevûŸ©[à³¹$T1Áˆ.Èá0iá Ò˜X5v¤ Q¬¹<qX@€(m$°hÀ
5@70¥›4ª¦D0(PÖ†ğš¥˜nó0wPJ
ˆä%Fi9“¹""4%œ§Ï°Ã'dåØ [DCÀ`d— ÈÇXŞÒ(d@˜š”z"ÁEĞ.èHH  =‹\M! 7†¤B 9q†™	gq.g *7½Ğ•AD(%d$F{j²(^"z@Sº>TBÉZqERHÀ 0 ¸DwIL§ ‰’lÀ@k6Òƒ£ ì€¤‚Ãªàô/å4’Tößrızû¶Ù÷ÿ¾¿øßÿ_²¼mû^èÕ¯ñõOë/søjïûïo·?¿¸oë²o¿e¬gµS+?k¼”K¾¶OÑöŸo¿şˆo\İ+¿×ÿÿ[İ{ÿ¿Ò?L¾]7GöşÆç‡wÿx½Ÿß÷ÄŞ›»oß0væ÷{ö%ï¼Íâ·^7ßû`ƒÃD0QIhpŒU˜€AAi0~˜‘bA¶hBÀ”x— &¡!)‚`  / İ»¬¹	˜Zaˆâ@<>°€B¥—†Ó6±€ŠÆÀªIzBe<Òb¤áÁ‘ T!4¼6è¦‚ˆxò„‚ˆdR2¤«Ò=:æm¼¿Æµ½ı{ßş¿Ö¿¿iòMßûóVõú7oü÷ß»Ÿó÷úÎ¯Ÿ¥ßë~O:ËÂôúÿëßï|öÙÿŞ§ÏÏÛjş×İæóï­Kèxmİ¯ÿMû·¿Olûÿö?7Æ¨oï&Ç}ö—ë7ÿ¹}×÷ÛûŸßıÿìÿæçæ«yÒcÛÃlâ¿ïùÿåÕï»í¢:ŸOäú6ïëÆ÷;ŸıÚ×õ%ÿ¿Ïœéo};~ŒNïûŸûûßîÿãømú<vW×WÎÏÚozşİÿç—ówı¯ºûøò—úõÿ>¶ı/åÕóşOê³ß×wğşk}¬×ºûßıwû\ìÌîïÏ½×sØHœºÛÛ[«µ}é€µ©HTLMø>FãB‘?îì ÈØğƒ	¹¥È	 u@Äf$Ä_pÌ\LEb,$¨@Šx&IåP`Î®•+ºA¤cä€46`ÆB1`ç¤Š 0n1–˜ÇQ8`;‘¢Å²lnó%Ğ 6ŒP¢
™
ÿÿÑ§Mœ;F_ø_ò~}ªÎ{èm¿5©ï¹g4ŸÃü½èÿõ×¿v¾¦û—ßİİï+yÕ¯¸gŸ{uí6åÿıh+u]ßrë?rë÷ÿ½‹möí»óÛ?İÖ[Es­-ıÿ+›İıfêÿÿxßÌ¿sïûîwÅ§?ÿş¾¾»øøß»oÿşªÈ6DÆEIBl-Â'@ğ Ôt&É1$ğ .äÆ3BªöÁŒ¸$‚À (Á fåtQr€MğRñE	 9E)$	OÍ³ 	¹1`GhL"NáÙ…˜Ğ àFFê¤ŠÆ„“†Â"K'€qÃAUâ…`JU/Àp7ÀxaÕ¦ÆtFPÂ<JØq´vD€ˆ‰%WN#s ¶Á9 7¶‡X2r_D¨FtÛëéÁFàSŸ>¦!På»‘Ô€@T,·2
ıQq0úâm 3ê€	t±’@!HcË Q
xîğïÏõªÁ~êÌk~¿ÿù¸/¾ımËz¿»×Ï¿Ù×êıû·ò½İB×{[Ÿş÷kS>ÿÿ/sfÿ²Ğ·ûş<{¿zÁåÏy·è}V­¶N·íÓóÔü¹ÏûÒİü%•ğÿÌï‰›ÿ·÷Öş3¹OÏ—ö^—ßıîí¯]OÔ>÷ßÿÚœÇ1"è˜	bh'v±/TAt˜  
Ô…œšÑ'QÊÍ€ŞÆ!bâY…"æÄ"ŠƒÁ¤ š8%BÈ¬ˆüAC‘)qñ=t†âÃRjâaU¤^LOÅ» FTe@õ@ˆóç]t°L˜`=‚ ãÏï×òÉ÷eWïş™Ë£~”$'¿ù«÷úİxßâ¿÷´Û¾;úß_šşü;İßÖşsO/2úm]írŞŞÃùtoãÿJîşú»üõLæõ“û[ôë÷ÿÛn›Ëı•~Íö\şŒû_mßçùÏÿ]ŞõÏ«Ïº}»íÛÛ-éŞù?î×+¡½jd÷z~.c¾r3÷İŞÿşí}6
ıeîµ=ßİegë“Uºqû§SûÿÎÕÌÓşÉî›2íıùüßÙÅÿ¦o0ıUŞ=ÕßùWÖ±½ÿışF[éÿØŞûş«ÓägÏO¿mÚ¡Ïë{Ş]_ßß¿?Uf÷»_oëÿ¿Üÿ^=çûâ<ûrÃÓpßqkà‘)™„h
òpãBÀ0'&(…Q9æ!‘£x\Ò(fYA $pM…¨%»Í°˜*$lÍØ¡nn($p
…Œš÷wu$&ÜĞĞ	-
‚@‹Ô‚½T1Ü¡ ŸÙÚÄít "(‚›Sÿ¯ó·Âî¿]ß~âın¯ßú}ıÛú÷¶¼ÿı_Ö(½b½mk×e´‡ª®•{ømì¾ÿ«è}x½îëÊÿ[póïËîÆïı¹µÿîtQ§ìĞÿÿüWû…çûì;Şüî×~{Ë]jùÚ?îªƒWâK}x:{-/v«ı—÷ùéß`ĞÂ«„ÉN	'n d!¥JëÁ€ÄnG2U4aGÒÄ,(/4† #°!¢‡™"ÄM	!`šJ@¡ 
JT¢%ŠeÑDCAÖ:RtİÃU-#<àŒ$Œ9ôÿ¦æ‰?HÁ'“Z³‚M CÄÂğ³’ÃBCC‚’`s™ †¹ÑÁÒ9@)-‹…@ğ@%ƒÅdQĞd€Jrñ(bÃ_ŸÁV!ùÃˆâ;%âlÀqA78
ÀSD\J†À˜°$Ö2J JDÆÆEq0Rgäp5•wX+‡”.ı~ÆÒèÿ^´ïÿìû¨ïwÿÈ½½ÏößñŸE=ÿıùO~Vfëq³ø¸6,û{¿¾ø—ı™>ÿ÷¿ÌüOıûÿ8ı|ûÿëØ“u²~û>éGmµOÏzÃ<5w¿}õÿ#t¯´nõÿw
ï®êvsß>¯î÷ïÖ§üëÛºÕì?ù­Hh³Â†â¨øÜè§Ñ´B¹†n@Îsçb]Â)Â’5.êÂµîK¦‚¥àÖ„@K§Ğ€Ä{@ÚkÀ°`‹•Á’L p`°"P›€0C	¹iBEÃ½$€²Ah&´
TTP—KDàª@†Ä÷½Ûƒ/ß­ƒüÔï¡_îÿ}şoŞ-¿üşöÛ%øú~z¼3ÜÿşßSß?÷/ÓóÏñ™ã¹óİöüVÇıVö¾æÕOß¿şûr^–ñî§»ÇøşıæÎšYë÷oşı…éÿıßûÿß7èÙœû_Øô;]}¯yÚîÇo¹»oÿï®½ûú}sùirÿo7×ïùü·}¾A[ÿö7[÷~?ïë¥ñÏ`şqÛë÷wûWg¾ÿçô.³ûçõòÿ¿ÿÏTßnûı½Ê¹[ŸÏşÇ÷«¶jw“{«köşşÏí×øıÿ¯~|½÷6úßrÁwk¿×<ÿŞ}Ïyöö›ÇÆ¿UWÜ×Ÿ/¸×ßØÏêç÷~0‚
 \
~ n‚è¡á¸0aÀ%ì$Ã  bP4B ­9eÂïæ¿\,«9 [Ú/%âzÃôüƒ£éb
 Y“ì ƒdb4A…—M Lq¨±†PÃÁBTY€L†<²(Œ¦Æ`Æ@AòN Ò@ÊBÈ¨’§:Üy)î¾kîÛÙ7x¶ÿ^Òa¿sóyø¿_Ï÷ó÷ö¿aß\áëÿÕñßÜ¹ûß=ú3^şölzÓøvèÑgZÚG¾i­u¢ƒ{?ÿ¯ÿÅäMÙiŞ5´SùŸú>7Î|›·ÿÿ¹Vß³{£üñ_'Çãßï¸wê—İş®ÿ†ŞÍß½õ¥HS—!¡%Gõ˜æÿS: Po 2« „$Bq^Q.¬S Ğv€F‹°	.„CÀW"uù•¡
#55äûÛ €2"=ÈT°ˆ8†¶Ax€Ä°õ„BP™”Ê D\ŠT¡`W B¬)¦CyFô'kKô!˜İôUà\!Ö^™Õ}T¥^›#iôGÁ" 2ÌÈ5@9&½@ñIÇ"	A„pGS	  …€Ğ‡hPQ P˜D‰ğtà"%Ä˜¬`À Ø@jIh Q äáCjabƒ¢O¤©Ù-%!UÇ#ƒ0Ù„bI¯e0bœVÿs]o×‡ÿ_?oÛç4ù¾ÎÌ½ö*{{ÅõßıÿÿîÎŞYHWS?uJsœpwé‡îóı×wÓ¿kïwÖïù÷í6_]\&‹½¢Û¯üıâg]±§Sç•“üŒ¾ÿ÷óïmŸşî{íŸ÷§ß»»¡~Ïş¦ºŸıÖ.owŞõ­úŸã~^u¯<HA8^GZ—yòIœ 4M
¥İ<fŒ 3“‘Qì \a$0³æ#câ Tn/JpxT@y/à¥†		†ÇTG©Aé…î=,JÈ†Zkàpêb"O@ªAèBÔ¦•J‚ í‚ĞèBÌ ZÜ”4$A‹Í8ûïÿ#ëGù¿Ü×_ÿMö;‹Ûúmå¾ÚïËŞv[{Ê{ïã§è>Ãş/ù¼¿µì­Mÿı¿Ö­xùoy[Ïgtïåù/şgáSd­kñÿŸ—îN¯êêÖ×|ÿ×ÿïëİë¥oôû»íóü|î>oÿÛ½õ~y~ÿš§Ûv?ß]bâ÷Oò=Å_ûßÚ—¿æµÜûÜÏõ”ÊìÛéûHşü™>´Ş'wÂë[Ûÿzš¿rÿşÍ~ïğ§½ÊúÎÏÌö;o®¹ÊÌ¨å•ÒÚÍšşÓßWû§¾kÿ«ŞkéçúÁåòVúíÓ÷ûÏëgªÛ»zûó¦™ıôîÿs,J~l.œp–<ÄyÁ¦QHêT•è²Z,a)@fV*À£S¥®’‘Æh ^ İ‚ o€!0AªTş|!9!g`•@H	ÁT…Ã%Òiø±E%Ü8­¾L77s
´°3Ä= ¥şÜ¢8CúÂĞS ğZ)–È„ ¥jøô1c T@˜@q*	İDˆ&Òò7³I‘¦P0‡Šù šŠ+ê@€D€’ˆtL\€ ¢€H,t•R8	€@V $’†À@HW ®,ÓQ ÃDzH UĞ#„„ÄPá¤@©P†l  &Ç,Èˆô/¥C& {h(\Òñ´ºdX Ù'Š4$Ú 8B@l #–T xƒŠgT”  ‚íP¡‡Ã!´i€•€H	­šCì(¥™BSXAäqàIf@ÓÑ%2ªV G	ŠC rî$RÊØ!Êl¥¢ÁÖI&&XbƒAšùğ2ƒ  E¢Ä˜K ! H"
A˜ ‚ CÂ@ÅaJAgm Xs)€Ñ`³
æQÉ·”(¤sBX6 6¿eP]]D B®…P` AÃ[ —Ê06‡° 0¤,za0H1%âOĞ	Ğnbô-B"¼A¨@˜  ”¢!ö ¸C K’¥P0^(¨Ï
ª§±,@I€)#^ “TÆdrİCY‰`õÊ @îb  €h<µ¼€
[ TN“PP‹Bƒh$ R@Dn„="Dô CsÔ	S˜°Æ^hŠ{eH%äÄÑOQ2@˜¥^ËUBÆ%s»K Á8ôBĞõÿB`
(åH£…tI ™d
`AÉ¹ğÙÔĞj u¿¶‚FDŒH±µôdVH0Q$
CÎœP§¤ˆ0€H H Ø` š9`aÂTˆ YC Á´7¨‘ƒ169O D\ UH ÈPX02(˜½	!ˆ Ù;l„ô ±¨òà„ ˜
†Ûˆ‚ä˜#xîÉ¡ABø bÁ
Ğ-RJ@‘ÁQÇh3¢€ 
Ï`a ÀˆƒDÈ$0µ) 0R62BKEBAvÌ˜bä“Ã44
`8ÚÀT0`**‘c¸D$GQ«	  E!$HPÌ@GÄÁô % B(‚ "®E(@Mè€mb0 U Ú0!Cs%­]çÀ˜(Q£±KÂ`7¶ÆØ×*`°ˆ2+‹PR4"á'ê¶•,Ã ²‘’-œE2Û |Öx
?R²U9"HŒÀ‚'cLL‡_Ó1K†¢B‡{“":oBÙˆÈ©†˜ "‘  5@$H Ô@$VL	 ‰¾ â?Å¼¢ÕÆD‰PÂCRˆˆËŠ-˜ˆ—„~ï* IQòĞ@e¥HŒ€a(°&‡ Y®*!§Â tNDG¸K*Ò€È’2šEQ‚è` ƒ^bCœŠ™ rK€Ê8gòKê	Ñ!19Mã!Ä5"çd“”T`9õaA°À@~Â³p A*ÀÄÄÜŒ„	ÓÀZcT	Y,d—.d‰œ¬öĞ¸À¢ç1P-Æ NÚ„êc@pc¤•b„²ÉÙÂ\,ˆÂäs¨¿BÙdS¨e Wàe S×‹å×|;„& @aX¨X	U¢È8 $-LÄ <ˆADÈâ¤ˆÜ„L¾£ˆ`N…I3„Áñ"`. €B"`S.‡Ñ
Eãƒ
!! ¾rGP§&›Š˜æH‘D!H  pšˆ™àd‰dĞ"Aë¯Œ E”À;x€UN†  ¨×ˆ©	xG¢3‰2¨VL @`CŒ«&R
IìPèF€ @ŠÍED
„
ä EH (ˆ 0°ÒpĞŠ‘õvé@„X†9ñÕÌâ@"Š¦8-†0àmÄ€;JÏ œ„U7SÂ,!ƒ	ĞS`‚‹Ö6ô MCˆÊÒTö€k–à¦è¨?%dƒÆbÄç&dPRÄ‡æˆˆ0‚DæYSPbRœ4‘HŒø$`D$«œt†ã ŒÔI“NAcàà†‘ C0Ğ€¢%DDº Ú	Áa
PÒ‰ÁO-BÈ˜ñ Â! 	 È@ hIˆHÑ@¶Ô4B<´Á¢>héÒ€L°h `Ä™¡àŒô–ÊDÌ •ˆ‚  2B’ˆ.° `ä 3Pª Fğ	GD0ØêqRı¢m4	, ÍŠØÂÄáx#©€hb† ˆâ€	Ğ¢$XLÁEéP ‚	7‹€08$c  EQ6"š P‘,AK‚NÌ!£±dhËà°J
 \2H®…k  ¶)dà kÔpÕ€'rµVJ ®bıJ	 Ôİ&R@˜0$@€-P¥4—‹#]*P	¢C†n®3 œ‘»­ƒaSK²¦l¢KQ‚–&h À, w±M“Ó¨Z:Î U}‘­E ³# *hKÃÒC‘Ä™ƒšÁ°†MN,H›+•¥ à „À‚”X‘¨À@Vï
ìÈÂ	ì2^„: P Êì³äcBLŒ­o<-R@JÄŒ„(ã‚…ZP¨Ô … ë cNoÛWÇ¸,ª(€L!¨0J”ƒ#Px ‰@P#v‰4.Ë ?Öàİ&Yğ) C(Vîy ´$Á“(*¤âˆcHIXE(Ã£ÔÌÄÅI“ƒ†FfAHOšCDLR4u2P³‚	5r`H©µ¾B0xmÄ@L&J"À–¶ †LF9°éD ¸âˆšs¦ ÂÁçøU0`¡x‚B€ka(Ñ‰9p1”„¥ˆ˜ĞØ’cwÅ§&¯pÉ@""HQ@É2 „d÷\™"+M¬@˜ŠNAÅŒ@…Ó$€ÒÛ¡ƒKŠ°
ü)¢„¸øTÛÁ®IÄ&0 4”qa¯C–²•´7ZôUÈg„‚-0 Ä<‰q0!`„F†ˆ„4’¦*¹†t(D3ã¤ÌX ĞB‰¼Ğ„0Ü`%@qÒ
”CJ¥€¡ Ó$â Ñ\€ BÖLn	Œ`
€ƒÙ Hß&€J®dXC	Ó`t›@Q€´Ğ„Aè€Ò†€ M¡ ÀDÉ¶†)‘D´’QÂ½å‚ÂT#Ò‚’˜6Ú?x’•`€ÔXTÈªbX$VÈ5ÀˆÓ’Æ¬5Tãøl•c0­t 	QBÆiXdP>Ğ@d@]uAzAÆ%Áaá€6‡8 HEÀS6Fµ%¡‚¶ƒ@Ü0\fƒ€8‰Ğ€p"¥™D¬IÃØ0 Mô .’’ `à@d pß¡ dpˆPµRØ‚d'H¤²¨1°›L1¥Û	€üd0à’ T±ˆ  Â‡ |&  ÁjØ†g C¼Äj\‘p‚EI  ‰¬d0H`8ˆ4tH¢áÀXL‰T<ˆR4„		|ì 4¦µèUÀD‘’0,‰ À!zÑÁN yŒòrL#dAˆ¤ˆ¦e! $10)B$Àˆê¡H(ºW´¢rœ _N@(PiFq€ 
†2—Q—¢d8	¤"A t:í$&0aJ<ŒÊS'B^	æVÑğ°€4äH
B3$@ ê`Dd`:xÆTp!
 LÈaGs¦L"Ãçàí B¨"D¥`Û!ÀU¯’¥“ 
rrĞ>Eu Š¦ S× TÌ8pq‘©…ñ¼ğ`gˆ  ¹PXÀCœ€µh	àp@,†„!\ +BVh‹9š‚ê§Dˆ Ã† 2xØªP‘8`	ƒ¦)8X©Yp!P*`€!.€&	L
p•à„Já1* Z2I„pe &y¦8€© ’'"€ä0Æ¼QDHŒ‚Æab  ±B¼IH„*PÂšÒZ!Â=«¬ 
JA‚Jd@MX "øP
Ææ…£¢€1z/ûà‰
ñ¯Œk *@¬e’ÕŠ8#0@¤[Z#@â”ÇPïu˜µy¼KH`Ia ƒwl‹D&‰^€	P-¸_ƒq‘B7âà–ğO".£EÜÀFy™;YË8ÔòA?ÀI4¶U“ ÅcU70œh”6àïø¹XU‰ èB‘ğØVƒÙ(U„@B
Q•L”ª¿ì8öU"DqŠÆ(C;†ˆ°hÀ3#@ƒ8) Ãd%( c ÌLÈŒq„"ÁŒÅS¨$‚@ 
¸A(	Fğ¨U aÜ0õ‚ m2Š<†”‰ÈNGÒ. À$—
 ˆ b òÀp!¨›¤P
Px "‘ÄúB„Æ‚ úÔÒDÂA¸à1VN ¤ 5Úá²1à/°$)Ÿ)'`¢T'Y‰€šP#”0ˆXcªŠw$± '""ğ(†`L›8Ep!$aDÇÈ*Æ V"”;Pƒ`c  CÀƒà%Ì%€³*Ès\‰„4‰[¤$ğ(jk¡0 a}¸°P$  e(€BÇ‘ÈĞÒaB™¦L
ŠAüiÉf\!Ç=‚`„F P™PT¬c }¨0HPTzIÁA»@B-H ”ƒ €h!ŠLI«Ò §À; XÂ*	hÄÔ;£À¡`"€Ç#JÚ€aÁ8
	|àP30 9Ôày%`M	`0Kq‘‚–c @$bjµ H”ãÊ-j4@ì€E ¤ ³<æR!€-¦"ÄJ4‚`,¸j „£ L)	h I£h%X‡N1¸gÂ€ú"	²DÄ´$2! 0ŒòÒè£Ú!#"$/"(ÒÕ†µdaI$S@‘Ï50’cgKtºg æG”mğ~˜Ye'ò®Z,#Ÿ}Ä”út.ÄQo.I(Üt†±8‹mİŒ n1 Ğaˆÿ  à]>şÙ$ ,ÀB¶_Nà·; 0¨¯]>v× 0Ìo<ÀŞCà÷ˆ; €q†ÿ  à]>ş! ` XNĞµ³Cğ¬j9 °Aˆÿ  `³]>õÅ `àsG áêJ ? Ğ¯]>¥] à¤= K˜2 @k0 {Š6€ÿÿÿÙØ àºÒB U0;Ò²K  }‹ÿ   ]>³¹  pË)?;VNğMB °¶† ]>Ü! @.¸Bpî‘< 0‡À“]>øí$ @…v8u'>PGÅ> ğš]>ñ @µÅ<`³C À t]>49  Àã"Bà=èC#= @	Šÿ  ày]>
+! °º7:`¼¤8 ‹â8 °1‡P©]>vÓ$ PqÚJĞØ:ó…; ğ@¶]>mú#  ŠµBp>t7ĞxA8 àÙğš]>s	 €'’< .> sTA pğš]>«" à=pI0ğ
?0ÖZ> På†ÿ   Ä]>z?! `ãµ8àä¾D0–NA  Ú†ÿ  ÆV% ĞÒıC€ÿÿÿXÊA    t]>v$ 0|¬<€ÿÿÿÀùÓ<ğsd? Ğ~¯]>Ø÷ 0ƒïJ ,Ê0 €v, {Š6àg 0<Q@Àä3 e,   –6! À?ğĞ	Dğ†üM °ËcÎ €‡ø9à<D 82 0Ü   °‰]>Aˆ  PèC0‘C   t]>-|   ·¸:`>Î/€ÿÿÿ`>Î/€ÿÿÿ  t,    {Š6sˆ  ` úB &¼8à–:  Ö†ÿ   Ä]>Ğ8% P*a; jÁA<9 pä†ÿ  ğ±]>VD  ßø9°Šù@à×A pÙ†ğ±]>[%  Ûl= @X>€”…? à€†º]>! PıNÀ¿½BğùÄD àº¯]>Ò P7ç; AÀ3 ™+ {Š6  €-5B€ÿÿÿğªEÀÀğ/  ˜°‰]>†œ  <Û;€ÿÿÿ0ãfCÀğªA 0Nˆÿ  š~  —d? |PA`oÉD |ğš]>{  à'ÛB`°¿H ½ªA ‡ÿ   Ä]>È ĞÈÜBàÑ³< ñ´; à€ğš]>} 0ó¾>`#XC ÛH  6Ñ]><ñ @¥]N ™³;ŞêJ P¬¯]>¬š ğy>€ÿÿÿ P80ß¨C  Y
ğš]>À `S;€=@¾Û< 0ğš]>g" Œ@=Àv'> `TN ğÕğš]>i  ¾éJğu>`à¯K  t†ÿ  Ğ†]>D! Ài\N@ÄF@XN  ] ]>4© øF0?‚>€ÿÿÿ@òVF °ˆÿ  ÎØ 0\XN`…=0™û9 °$
@¶]>.Q Àïƒ>À™ÈA€ÿÿÿ B @á@¶]>Ïû  eD°
õ9pîÜH iîö H¢<€‹°3 à]0×>Üš °ñ‹>@>ÈBˆPA  ‡ÿ  p½]>RÇ À™çCà7nI B= àJ¯]>
  @¸ç;@®3 ğ·* {Š6ò °W”7 µ3BàšVN P‹ÿ  OÛ$ €„¢BÀÏÀ3 @K, {Š6€ÿÿÿş   ÅBBÀ|{3€ÿÿÿÀ|{3€ÿÿÿ ğq,fò >N€ÿÿÿ :D @Ù t]>¨€ `ö±:@’«A ğ‘ş pÂÈ<ÀGC€ÿÿÿ ÀÀ `î?àíJàáRN p,‡ÿ   ]>£´  @‚9 ¯c4  C, {Š6ı3% 0fRN€y¯0 L,L’ €UN ^y<°ù9€ÿÿÿ @ˆÿ  à¾]>€ÿÿÿ¹Õ °WEC€ÿÿÿ`ÜnB Ë°Î]>u   ìN: ‹Ô<€ı#N€ÿÿÿ °·@¶]>ª¶# Pñ2?`™; P• t]>Ú² pB=€ÿÿÿ ã«3  r {Š6˜u  WF°1u@ `‡ÿ  Œ]>ŠØ$ pë^N€ÿÿÿàº¹<ĞØƒD P1¯]>nX €màC@ÈÒBğ<!N Pó@¶]>ZS P÷k> ï2 ğ
1 {Š6½ €Š,9>îîîî3îîîà>îîîî>îîîNîîîîîîãnnîîîîîîîîîîîîpîàîîî3îîîî îîîî>îîîîààîîîîNîî îîîçî îï^îîîîîîîîî>îîîîã îîîî`îîîîàîîîîàîîîàîîîîîîîìîîîàOîîîîîîîáîî»îàî ïîî Ìîîî.îÀîïîîî îîéîàîîàîîïÀ `ƒ ,
 SY  Š  ‹  ªÆªÿª²ª¿ª<ªÿªÏ®ÿªóªÿª<ªÿªÎªÿªóªÿª<ªûªËªÿªòŠÏª®¾ªÏªÿªòªÿª<ªÿªÏëÿª³ªÿª<ªÿªÏïÿª°ªÿª<ªÿªÏªÿª£êÿª<ªşªÏªïª²ªÿª<ªÿªÏªÿª³ªÿª,ªÿªË®¿ªó«ÿª<º¾ªÎªÿªó«ûª<ªşªÏèìª³ªÿª<¢óªÏªşªòºÿª,ªúªÏ«ÿªò«ÿª,ªÿªÏªÿªò«ÿª,ªÿªÏªÿªóªÿª<ªşªÏêÿªóªÿª,ªÿªËª¿ªóªÿª<¢óªÏª¾ªòŠÏª<ª¿ªÏªÿªòªûª<ºÿ*.?ğù9€ÿÿÿ`vÂA P®¯]>i‰  4>ÍAàı’B €×†ÿ  p]>³Ù$ 0œTN`ÀçCà1ÃF  '	   ¯]>€ÿÿÿ# P·Q>€·B`?: 0Ø†p½]>è$ °‡š;€ÄÁHĞ8GD ğ*‰õË  °‘BPÔÑ;pıC  2†ày]>¹¤ €V8`lVN0ÒB @öŠ¯]>™%  ®Š7 99`y‘C °êˆ¯]>5% 5? œù9€ÿÿÿÀ@x> °	¯]>qˆ ß3;…‘C@eÆ: €p½]>­ƒ%  úu<¦=€QÔ: Ğ ]>œ àjD=àªa>°·š;€ÿÿÿ `ë	°‰]>Z$ €MA Ü¼FP!ÍF p ÿ  ày]>ë‡ Pí@@^?#5> €>‡ÿ  ¯]>R 0)\N“C €š t]>rİ @µÚ;€ÿÿÿà>¡2 PN	`Õ$8w  `¶2;€ÿÿÿ œR8 :B  ğš]>@ àJf@P*Õ<`Ö\N Ú†ÿ  @q]>”Ì$  "í@àèA`ÖKB `s†à§]>%! 0#< ïB= JN W –]>Åó `æJ@^3 p4%º$8r©  À:ÀØ0 p;º$8Få  ÅÌ;pØ]:0`9 0º‰ÿ  ÀÁ]>X® P‰;p+ìJ°Š„; ù† –]>±×$ †?€şÉ0 pÅtf `öø= r½2  Æ`Õ$8  Oñ> ;@ï2 °ü   ¯]>úÍ P—_N‚%CÀ{W4 P3‡P{]>^Ò$ Pú8p˜£8 KC @®†p½]>FÔ$ pòƒDÀüè8 ¬ú@  x†`³]>Ê! ğp£9°´F>€ÿÿÿ`c:D Ÿ†ÿ  š#% Ğ
N€ÿÿÿ W;9ÀÏó1 Ğ[°‰]>ş´ @N±BĞƒ@À’¥0 Ğ[	¯]>C `†ÒB€ÿÿÿÀo…? Ú 3 KŒÿ  à¾]>P @øø9 ?ü8 fÓ7 Ğ!‹ÿ  ày]>Şƒ  #; ÂÛHÀ`E: ù¯]>¤ï À_¾H¦«A ®üA `/‡º]>üÒ$ P![BP$û>`©j4 ` P{]>Ëk% @¨J@ ïv=ĞU”A ğk†ÿ  `Ê]>b! p[œ;p.N ÈA  9ÿ   Ä]>«o% yVF`‰ƒD0¬/; †ÿ  É! ğ0¼<ĞÎğ;ir9€ÿÿÿ 0hÒ$ ÅŒ:`Ï€7 Å‹<  ¦¯]>íP °İ>€ÿÿÿ YÙHà1DA ğÕ†‚:% Àé¶>€ÿÿÿ€ùM€ÿÿÿ@KÖC °1
@¶]>Æû  ¨WA !!N€T
D p2
ØÉ ğ@ß<€ÿÿÿĞ2ÅDàÚSN p½]>Vœ% @çB€ÿÿÿ@›#Nğ#±F  r† Ä]>Ì! Ğ>¥<°ú¾D ğ» t]>™æ$ p‹>€ÿÿÿ€F2 €@, {Š6´˜ 6 Bğ¦Ê< úe? €ÿ‰ÿ   Ä]>Â ! p˜9@¾È; `SŒ]>B ÀôC^= ¡çC€ÿÿÿ  ˆà¾]>5Ù PÚ0; U> “Ò; Ğúÿ   Ä]>GÕ$ ğœêC@Û0 0
1 {Š6Z  ÒB€ÿÿÿĞu‘CĞà:€ÿÿÿ p·†ÿ  `Ê]>¾%!  F= ]ğ3  } {Š6h™! ÀŸ;0Æñ< ØâA `ŞŠÿ  ‰ï À@`sGDàİ«7 €b	¯]>•ƒ àq:ĞÛ+7àD_N À‰ÿ  Ñ]>Ó À èJPš»F >XN àY°‰]>øß (Nğ&Ê;àl3 0{†ÿ  ç	 pk;ğùQE¦ÔC pq†`³]>7!  ³«< ƒ¿D0ããC €ê†ÿ  p]>o_% ğö90ß÷9°Q0; ğo†`³]>Ÿå# @¨²8@e	=Àï¾D `Ô¯]>ñÙ  °šÖ:¦ìJğ)€8  Àª]>ø˜% ğVa=€ÿÿÿpË9 ŠÅ@ À‡@¶]>Û ! P-3@@…@8P!×H p¤ğš]>Î% €‚;€Êw0  îº$8ÔÔ °QØ>0CNğì9 Ğ÷ ]>5¿ À\R<ğC=Àœ^N  K‡ÿ  ¯]>tì$ ğ–+<pşYCĞòÜ> `Ô†ÿ  p]>k9%  ¡	N0Æ@ğ|SF€ÿÿÿ p(¯]>¶S ĞuI>ÀÏıC°fG P°†º]>ìÕ$   ;Ğ%[B ğ t]>±A  °1Ö:À N`™TN€ÿÿÿ °&‰p½]>‰% P×‘BàşC`2€ÿÿÿ  µ    ]>3 ĞÀDÀ“RN /!PIŠ6vo ğ£¢@:Bğ“v8 à'	¯]>Q p‚«<€ÿÿÿTD`òD ß† w]>VA! ‚S>e&;Ğå"F `†ÿ  p½]>Õ! P=F>€ÿÿÿ0À*BpEs@ €‡º]>»Â  HÖC0®Apëã8 PG‚% 0ĞÎ<ÀCŠ:Ğ‚Í;  Î†Ğ(! °İó<îàîîî>îîîîãåã>îîîîîîîîà îîîîîîîàîîèàîîîîãîîëîçîàîîîîSîàîîîîîã>îîîî³îîîàîîîîîîîàã>îîîîîîîî4Nîîîäîîîàîîîîîãîàîîî0îîî>îàîîà¾îîîîàîîîîï>îîîî>îîîî0îîîî€îàîîîîîîîà>îîî0îîîîîî0îîî>î¾îîàî    
 SL    €  ªÊªÿªòëÿªªÿªË®ÿªóëÿª<ªÿªÏªÿª³ªÿª<ªÿªÎªÿª³ëûª,º¾ªÏ®ïªó«ÿª,ºşªÏ®ï¦óªÿª<ªÿªËªşªóªÿª,ºÿªËªÿªóªïª<ºÿªËªÿªó«ïª<ªÿªÏ.?ªóÊÏª,ªÿªË*?ªóªÿª<ªÿªË®ïªóªÿª,ªÿªÏªÿªóêïª,ªÿªËªÿª³«¿ª<ªşªÏ.?ª²ªÿª<®ÿª‹ªïªóŠÏª<ºÿªËª¿ªóªÿª<º¿ªÏ®îªóëï©<º¿ªË®ÿªóëÿª8ºşªËªÿªóêşª<ªÿªÎªÿªòêÿª,¢³*.? 4ùM€ÿÿÿ`sæJ àŠÿ  ¯]>µ ãã@`“!:à\D à…‡ÿ  9  <È<`Ğ;`†ó< pº‰ı ğÌ{8 (,A ©fG p¹@¶]>%µ  ²ˆ; XNàM@ p‡ÿ  ûG! @âÛ<0ƒ?ˆTD °ñˆú P—\7ĞøUA0JD t‹ ` ù= >Õ9 Ó˜? áº]>Ü™ 0Ì¥<àgÕB ‰@ €Aˆ¯]>’ Àl:;à¡N€tÎ@ °7†¯]>gH Àƒ@D@.DÛnC  0ÿ  ¯]>M8! ğy½EĞå®:ğÖC `¤‰¯]>§ì p¢=	N€ÿÿÿ`àD ğ}‡¯]>ÍÚ ğĞü:àİ[? óû9  Šrœ! @>~;€ÿÿÿaFĞ(ÖC €´ÿ  n,! àDVN€ÿÿÿ€ú< 
ú9 p·†ÿ  ¾%! `æÔ<€ÿÿÿpû§8ÎÌ@ Ó‰ÿ,! Ğû 8€ÿÿÿpÅTNàşC N:)! h+9ÀÿNĞx‘C şˆ¯]>¼.! 0ã;€ÿÿÿ0¬×<PáÕC  ÖŒÿ  51! Ğâß9ğàÂHpÈ’C PwŒ-!  ÌH:€ÿÿÿĞK=@˜«A @x¯]>€±N :BÀo@ 0L†ĞË]>ú“ @¾¬:ğö[<àÇ«A  ¸†¯]>$! ¿Ë> ;¶A@>
D€ÿÿÿ M
   ¯]>ãœ  A:DÀÖú;àñ0A  Dˆ`³]>ûÆ ¬ËC ñä8À@3 PE†P{]>†˜ ğY;9`oA@à3  Y†ÿ  ª! PGÎB€aÊB€\q0  ‘    ]>d¡ Ğ{ù9Pø<P§³C  H‹ày]>¦#! p’‡?0ğÜ>¢?A€ÿÿÿ  X ]>ºš ğ°s;\ä?L­A À÷4¿ ÀLZ?0^Nàäş3 Àw‡ÿ  `³]>§" ğ>Pz¬B€-+8 °0?$ °TçC€1 80<:D€ÿÿÿ PäŠày]>•Í pB¡DP}XNàacF à ]>X P§»<°­DÀYTN `o
t Ğ¥ŞCpU¿D pˆ!PIŠ6x‹ ğéM<ğ@H: °;&Ë `A`7 ×ó2  x‡ÿ  `³]>8µ ğ E0¦=@KîM  G   °‰]>– `3Õ<àÑÙ< Ï"PIŠ6Ÿ# 0†Æ@0Y@€„ª; pŠº]>à! °1¿HÀ,ë8ğ‰ù9  ‹¯]>% PÊA ;£<`‘C 0‡ÿ  k% @U);€ÿÿÿğÌÎ=0ÁB P†p½]>s! –aAĞ‹Ô<°é8 ø ]>¾ò ĞxiIĞµŸ8 6R= Àèˆÿ  Ñ]>¤± 0LUNà¤9P­İC ÀvŒp]>Â"!  ªjIğ©WC€áB> Po ]>'@ pÛ–C°D:D0<¦E€ÿÿÿ €7µı" ğàØHĞuI9 ìã8 pá†ÿ  ày]>Û>! Ğò$? EèJ ûnC  H‡ÿ  `³]>VÛ 0EpØÄD€–F ğoÒ  ›IA` N0 é?  ‡ÿ  Ñ]>€ÿÿÿ©/% ğ¶ùM€ÿÿÿÀ0'B€¤ê? °Gˆ°r]>õÉ   õ>€«Aà1®A  H‡ÛØ ™BÀ¿´< à-‡ÿ  p¦]>Ô$ @ÛŞCP—=°ú"D pT   ¯]>\² ÃóB ;£2 ğ¯1 {Š6]0  "ÿ@Ğ•m=Ğõ = @Î‰ÿ  `³]>dÛ  éªA€ÿÿÿ CGF€ÿÿÿpÕØC 0ı ]>Q €1Ë< ú< p%PIŠ6{  0\“CÀÙ;DP]­<  oİ ĞşAàÑ¼FS…? €”‹ÿ  ¯]>©   `oïJÂ¦8À¶nC€ÿÿÿ °	Š¯]>î0! şªE°‘ÙJğ©˜@ P‰¯]>{'! `Éo>ŞSB`Ÿ˜@ `ûˆ)!  |SC€ÿÿÿ@‚]N@µÒB€ÿÿÿ Š¯.!  3×H€ÿÿÿ`ÉÁHàÊÖA lŒh9! °Í¸;°AêMPjª7€ÿÿÿ ‰‹ %¿F Å:@òù9  S‹Y-! Èc8€ÿÿÿ`N ‘È= ğuŒÿ  >+! °ñÿC°=H80Y2B  ²†"2!  óQE ?ğø9 0pŒ/!  Aè:€ÿÿÿ~N€ÿÿÿpûTD  ‡kÔ ¯—7€9 áÕC @Šÿ  ¯]>¬G! o(9Ğûü8ğlÆ@  Ï ]>€ÿÿÿœé À N0C¦E@»nC ÀM‹dH `›A D8@›ŸA p1ˆ¯]>m ğ£UNÀÿçC€ÿÿÿĞ{‰7 °o ]>®Ì °=_Ó:@åÎ< poŒÿ  ¯]>» `):=€÷:DĞõ9  LˆC%" 0‰\Nğ ıM  „!   PIŠ6ïG @µZ?€ÿÿÿp^õ9`h0 `Ã ĞEı9î^îîîîãåà^îîîîãåãåîîîîããîîîî3îîîîãUîîî55^îîîîSî^îîããî?îîîîãîîîãã^îîîî>îîîàâîîîîà2îîîîààîîîàìîîîîîîîãã^îîîãîîîî>îîîàâîîîî.îî>înîîãîîînîàîî îîîîàâîîîã>>^îîã5^îî®ãåîãUî^îîãî3Uîîîî^îîãîîîîî>^îî.  x™>»2       S;  z  È  ªŞªUªUª]ªwªWªª]ªßª÷ª}ªõªİªİªÿªßªİªÕª×ªWª_ªUªßªßªõªU    ¨ÜªUªÕª_ª×ªõªıªıªWª÷ª÷ªõªßª}ª×ª]ªıªßª]ªßªÿªİª]ªªıª÷ªwªßªWª×ªwªÕªõª_ªÕª]ª}ªõªUªªªÿª_ªwªÿªÿª÷ª÷ªÿªÿªÿªßªÿª_ªÿªıªÿªİªßªıª÷ª}ª}ª×ªwªÿª_ªuªÿª]ªÿª]ª}ªÕªwªWªõªÕªÿªÕªİªÕªwªõªõªõªUªİªwªßªÕªõªßª]ªwªİªİª]ªwªUcDñ'  €c4Ccôğc¤öñcDşcÔ§ÓcÄ§Óc´ÍcdUc„ècd–kc$Fcô§Óccä¢gc´èc¤ècäéÍc„mUcTùDcDùDcôò'c”Š¤cthcäctEcdEcTEc?•c"cäÃÑc”uc„uc$ïcÔŒc¤¶4cD(Jc´Ç0c”Ç0c„Ç0cts|cTR:cDR:c$Tcä;cD=›c$ëocôVc„œ_cD–ec4”icäcpc”=c4ócócô¢´c¤*4cô¯icÄ¯ic„ßòcD«Hcä
pc„äcTÜc8%c´ONc”ONcDé0c-AcD–@c$H+cH+cÔMcdqcí4cäc´ŒZcGcä³>c„Åctqc´¸zc¤¸zcdLGc4GcDiccäàvcÄàvcäPcô™.c”©cTic´c”c„cT®Bct‘cÛcÔcÄc¶PcÄ½8c´W
ctX¼c$Ö_cäé c¤#cdÇLc»hcÔò c¤Äc~1cÔ£cÄ£c„]cää#cÄä#c´HcdZcä(c¤»ccTUBc$Åôc¤tÇc”tÇcDr¥cl ct«c4û¸cû¸cô°>cÔ8cÄ8c¤ÁÊc”ÁÊc”picTêacZGcä8c$/JcôúcäúcÄúc’cÔ!c”oct¡c„hLcDüctücTücUÙcUÙcôø4c´hLct÷WcD÷Wc4UÙc$UÙcn‚cäY%cÔY%c”gc{6cÄ¼–c„¢cTèvcDU–c4{6c${6c{6cTìc$œ>côëˆc„™gcãªcãªcÔtıc¤Oc”?:ctãc4ãªc$ãªc$öcöcô#TcÄ#TcÔ¬Rc´4‡c„4‡ct>[c”)hcd§ct§c$ÏàcTØôc$Ôscäc¤)hcTŸc4\cÔüŒc”†Yc44ode = node.parentNode;

      if (!before) {
        sibling = node.nextSibling;
        if (isText(sibling)) {
          if (isCaretContainer(sibling)) {
            return sibling;
          }

          if (startsWithCaretContainer(sibling)) {
            sibling.splitText(1);
            return sibling;
          }
        }

        if (node.nextSibling) {
          parentNode.insertBefore(textNode, node.nextSibling);
        } else {
          parentNode.appendChild(textNode);
        }
      } else {
        sibling = node.previousSibling;
        if (isText(sibling)) {
          if (isCaretContainer(sibling)) {
            return sibling;
          }

          if (endsWithCaretContainer(sibling)) {
            return sibling.splitText(sibling.data.length - 1);
          }
        }

        parentNode.insertBefore(textNode, node);
      }

      return textNode;
    }

    var prependInline = function (node) {
      if (NodeType.isText(node)) {
        var data = node.data;
        if (data.length > 0 && data.charAt(0) !== Zwsp.ZWSP) {
          node.insertData(0, Zwsp.ZWSP);
        }
        return node;
      } else {
        return null;
      }
    };

    var appendInline = function (node) {
      if (NodeType.isText(node)) {
        var data = node.data;
        if (data.length > 0 && data.charAt(data.length - 1) !== Zwsp.ZWSP) {
          node.insertData(data.length, Zwsp.ZWSP);
        }
        return node;
      } else {
        return null;
      }
    };

    var isBeforeInline = function (pos) {
      return pos && NodeType.isText(pos.container()) && pos.container().data.charAt(pos.offset()) === Zwsp.ZWSP;
    };

    var isAfterInline = function (pos) {
      return pos && NodeType.isText(pos.container()) && pos.container().data.charAt(pos.offset() - 1) === Zwsp.ZWSP;
    };

    function createBogusBr() {
      var br = document.createElement('br');
      br.setAttribute('data-mce-bogus', '1');
      return br;
    }

    function insertBlock(blockName, node, before) {
      var doc, blockNode, parentNode;

      doc = node.ownerDocument;
      blockNode = doc.createElement(blockName);
      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');
      blockNode.setAttribute('data-mce-bogus', 'all');
      blockNode.appendChild(createBogusBr());
      parentNode = node.parentNode;

      if (!before) {
        if (node.nextSibling) {
          parentNode.insertBefore(blockNode, node.nextSibling);
        } else {
          parentNode.appendChild(blockNode);
        }
      } else {
        parentNode.insertBefore(blockNode, node);
      }

      return blockNode;
    }

    function startsWithCaretContainer(node) {
      return isText(node) && node.data[0] == Zwsp.ZWSP;
    }

    function endsWithCaretContainer(node) {
      return isText(node) && node.data[node.data.length - 1] == Zwsp.ZWSP;
    }

    function trimBogusBr(elm) {
      var brs = elm.getElementsByTagName('br');
      var lastBr = brs[brs.length - 1];
      if (NodeType.isBogus(lastBr)) {
        lastBr.parentNode.removeChild(lastBr);
      }
    }

    function showCaretContainerBlock(caretContainer) {
      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {
        trimBogusBr(caretContainer);
        caretContainer.removeAttribute('data-mce-caret');
        caretContainer.removeAttribute('data-mce-bogus');
        caretContainer.removeAttribute('style');
        caretContainer.removeAttribute('_moz_abspos');
        return caretContainer;
      }

      return null;
    }

    return {
      isCaretContainer: isCaretContainer,
      isCaretContainerBlock: isCaretContainerBlock,
      isCaretContainerInline: isCaretContainerInline,
      showCaretContainerBlock: showCaretContainerBlock,
      insertInline: insertInline,
      prependInline: prependInline,
      appendInline: appendInline,
      isBeforeInline: isBeforeInline,
      isAfterInline: isAfterInline,
      insertBlock: insertBlock,
      hasContent: hasContent,
      startsWithCaretContainer: startsWithCaretContainer,
      endsWithHrA;m ¬ 
@'EˆÌ #€‰Œ	@!… Q”À«Ä ¦A€ ¦† ‡‚^… €â‚YƒF‚Tğa @Yƒ³hÂ CÔ+”ÄÅPQ( Ní€ Â€¬/tğ! („I'N1À1ÀJÔ4*ª¤íe¡1Kıûv¿ø»ïşë.@è>İŸÿ¿ÂÊ/0Ù¿NËù³=nDºí{í–y¨¼z¾š>‹ı·ô0µK~6­â'«à­ıWÿ‡%ê=T?uîùŸíÏıİ>¸òtòsç…üÕk.ß×ñ³ïg}_=§ïºÑû¿ì>n\Ò—šıÎì4ê§¿÷tœsÿÿĞM(å{½o?,×7úåİs7Ú°Ï£y^¿)Ö8ïÏ¹–òµï¸ßÑ7Ö.ìÿ½|ûoßi®}d}Ş÷¿·4¯Òÿñx¿‹—ÓÄ×ï½¿¿ğÿã×îµùzëöŸı+W~µÆ§>ZŸë×ïËı×é;“×ş0ÿìKı÷¿“‘$  ‰‘
Ğ$0x
]iQaÔ&JE‚‚£ÁD„‹`Ë?Ç „€¤$ ¨¨ D@aTª((œÀ`ÀE ƒ„Ó(”V åAÁ¶‡H¥"$ ×èÒ)>ƒeK5ô”xzÂ6Ã&Æ…w@ a˜²„-_ŞCüÉl7EôÖö÷¿ˆ›Uõ­şöv÷½SàÎ}wëïñŞ£9ÿï}síö¦om×ŠBÿG½ó’Ô‹€³·mö{¥ÿ{÷öËÜ%íé«Ï.ox–BZ%¼ïŞƒïï5…ìË=öÿå[º¦uşÏ×s}~ÿn÷}“İ×óçş§ïo»ßÉ×Ü"ˆDY^JÉJ  ~ÒF	IDÈ#ìØqd‰Ì 8†5Äd@ ÀÒ0 &$6VB0`)B€IğZL1G4‚Z‚‡¨02ˆDÒE" a $ €Ş0CH pB%ãØ€Û˜ ¦ P ¤ÂG ’Ä#Q CgX06³	ôˆQP”Sg J–åàˆ@[™J&†!öNB)€†gpa+€@Ñ) Ğb$ Z! ÀpC1’H¤¨BšÄ…É2ê&¢0ÂòÈ1
`	t8I‘RbNš5¡T‚	Ñ&^v}¯öısÿîëÕ/Ïû÷Wõ?å÷´×ßÊ‘½ï{zÿWŠímgı_s{§}ÆßsWıòæÇì÷]M"[x-ƒót}ßA]ïëÇş2§î×lùw3ÓêGæã¿£›ëÓÿÏÖ¾c¿hößÎÇÍÂ3çÿ¤Øû=ó;ß®ÕO}Ç©ß½Bˆ Il€RGH¢PâÈ›-(“$Ì H€€O„¡2 
b À zFzHä bÀq5 	O Q¤"8zl:˜X8r#LEÃà¨‡æĞtÔl0& Ö€c5XA€©ˆ æp(	ÑËşÙşßç¯Éñÿÿ”Çÿâ¹?øş{x¸Îû¾j']¦ŸzqçÈm×;v¹î³ÒkµçŸññAáv_­óìöçæ3§ûQË¶Û¿5£ÿî‘ì¯ù»MÍ¯[ÿû’;oë,½»Ísr¤lYo®şßı©ùøï9ÿsÑ¿Çˆ÷ôõº{o²íÁÊ§óìé|ÆïúŸëG“ÛßYóŞê÷ûØÓşÇ/mqÿÓş+ë·<kİk½zÃş}â¾â¥2¿Ê,uÏx»ıå«êºàÕ]¶%Úÿo8,ÛêğÊ¹Åô{Ì9Bı;?{ ÿ^µ.ZúıD¼şî¼3ÓñO·¦¿ï[…¿{ªë"/œWŞÿ¼·ÒIàÀJ.0!"Pì)-Ñ&˜‰(P•@HC 
Xñ ²h ğŠ@‚£$ à1¥  @M¤QT$¢ƒ‚jH	L(3’ œÂÅ° ˆäjÇ’ˆf€!Ñ„@€Åa’‡$ì6(Äğ3eß¼•Ÿ¿ê\#t#•9üögÿî™¾ÿoï{ózœ»ª‡çÔ\p‡wc?ï¥Üüû3m™5úŸ6vW{!õ(¹¬ŸûOÚ×¾óƒç¿ËOò–ItSıvÔÙ{´wòïúÿk÷ço¯…óí¯÷ş¾í›¿ı{ôŞşöK´Œ(ûõ ‚e\A€2Q8£I
Ù$¤ ¦PD%x”2ÎÅ”‘dQTq F(„ZP¨­ÙHBx$Ã @	Tp„BGÌ`İp b¡B<°Å"up¬*R á†‹`£à9š"Ã0À"Ô W`OJU¡€ àG@C™ *BäÀ0ÊáÊÚ8”Xô ¡eğ#C¥# „! KM  H&‚€QÁ`é†FT;²#Ñ Œ§$\É)PAˆQñ(É$¤! EH ©‚À–0L1‚2]Ÿa€R4ğáÜùéÛ÷?Ïæ×¼ÿ÷{^í7Õk¯ûÒÕİí½¿_¾xöÿïõï\ĞG_½é®¿-VTó¯OŸŸß2WÅ/û3/èNü]G¯Š‰b¹½äû­×ÿ÷¾ßwç_3ø_WÙƒçÚĞ¥÷¿ÖX5JŸvãÛÆÒÛ¡ÜïÚVí§½ŞÏççU*ïÿ{mÿÎôÉVĞ,
À(Ô „!
€4(sÀáñ¯„1¤Áâb MmA2Š‚Â%“ …'@DÅ…d° !Z 7 $¥ÀE(—BºD 0JÊ´å€¤.8rŠòÆWÃJ0’`›‘HÂadrD0²€ °@¾ãıòïıŸ÷øÇúéóõÄ«¹¿ùöøGKI<Òïğ—¿şê:óª|?:~ü]aÓóµú¿LR©Šş;‡Ì=ÏÑ¿·Núìlkdõ]Ë¼tŞõ÷¿Çı?‘¨F+¿7ÊŒ–Ş÷nìì<_3nŒ¦ hËït‡¶>®ıF´¥k¯Ú4ûï¸‹ßök~cşK^/…Ñù=ò.Ïªå6“Ñ¿ª1SÏgúá=ÆîÏbws‰ÏÙÇŞïr]J×½Q¹óşÕ£®Ş·u›ç7›şü¿ïc4»¢7òÿ™ìšÛj>šÑşrmİnÚ÷ßıÆ¿z_ÓÖ}¸šMÂdø¿=ÆïRÆ±ø&0 òa”Å … R  Eit‡§N˜p%(4mcJ!„ĞL ^@DîÎGÅ°XmŠ)KuÇ@!BcX2aA!0BfF¦PÇ%B£B˜¨¤P¡	" 0îŠ€¢‰APª
Ä)Ñ%˜¯ûãÕòú½-‡Cç¿ßì1/ÿŞOımı¾×ë²wºó:í×o~ì:›óa×\ÕŸ×‘,ß÷ÜÓ6ıÃ†×Å\İ_=á½Î{ä[?ø*ég½Ï«Ù›ı>kíõwıõE.ş9ƒ½ûfæëÑNÿï2R§®ø¿ùãÿÍeÿ_tk¯zdï½1 ád ãÄı3".Ù‰W4PF1DV¸H•›JÈ
d‹¢B¯Ü•éB26E#oT8"$ ¬(k’V2bMÓŸ›A’ AB²Ó#PƒAL’‚ê €bJPD `pÌá€ ‚*‘la'ÀCH˜)Yãè-[Úƒ$(’!p„F BÇ„€'2BÕF¤©Æ¸Bg0?NB¢ö‚Øƒ‚‹r€	&(	\@  )'GBh#ªmM)€ (€56) ¥!xN°@Š 8AN£‡“i<¡ 9ìšÀ©¬è’,Á	@sªÊòíŸÛççìãs*S×¾ dÃóZZïZUí¯ÜÓàİ¯{t¶ñşß×Ï»Ÿğñ“ÿ¯Ş­Û„W„<ÎêŸç=ô vÅîŞÛÔ÷_€ıhÉò6Ş«?Lï±éÛÊôkùdvß\¹Î»Ëßõ{F5§ò‡ÿç¬»‹|eşï´²*­J&jm¿|æ4"zšPjQ% c °KÄh«–ô.	) 1<% dßÄÑÆ„ªÖ€DàpD´„Iâ–T€1Å”†·”)†0G@SÑ\áÙJ(´f)‰Ñ4 |€
µ¤!P¬Y‘cIhTD(„˜ÀÅÂ ]4Uÿu•›P=@%øŸoOÚ'ÚŸ$½ëk½óõùßúÙßİİãçWƒù«ŸÃ‘†?ÿş}”ïçş!±ãêßÕö}up›Ûü=ûf®sãv+bµ«ıSıü¾5ûÿ”‘¥v´·[å£Ofyûÿ|ÛU“ïêÚìôõÿæëŞsç‚Ùï¶÷ıfïº·ıöo)r>}N{û·Íïÿÿï7˜wÖ>¾ŞÛVºkı^oÛ‡}úVîïß/øwóûç+¾ŞMwpPî‡w\+íuÛóìÎ¯?¾’äû¶­G÷îöëQ‰“øÅEò/ÿ·Ïd÷s}Öô×g³´Öø[÷øßæÖ_k×êkHAŠYbI ø††Fó¯3ˆÀ
(˜8E‚P1R£ BAÒLO 
À(ÂF("(ÀÅèP¬¢,D'J˜•	!@àŒœ‰ ¢y bÔHÈ2
S7ÆÂ„Š@€3†¢†L°ÀJc`B¼RD<8Ó\4>n½³òïõßÎïm?lÿöQıòË³wŞôË£¿*Kà,v?ığKÿı²îşUíÅ~òÕØÿ‡ß}ÑßJş[šğbúb:U¬ÿşµÔ×{ùô¯¿4='Û!^bû‡¶×ísz—(©¦ç“–Şÿ\«‹ı&¿¾‡/ĞÃ=Ø«½ƒ"PLE	À8à””¡4ä‰"UŒ=!T2/!µ†^RÃ6˜€Ü g°@.: (Ä¡4t‰†©€-0PĞD"`ÌuäÀ˜L(DW#4A	 2cb‘"%T‰…ë5:„Ñ  ¬Ì3ç@Èõ™0« 		ÒJ´ùBXÀ†"øÀ`: Êv0$ˆFac ƒÈBõˆ0	Ia8€”"2Â ±i“Jf  ‚m€Ğ‡ „$$‘Pä’FÈd,, À{ ‹C„ø£… ®œ+ƒD(vB @0(kÙ“ö€{@( UúÛwùÃÂø¿­¯{×û^µ'¥7(ü°Yÿú×?Ö~ÿíóÈqüŸ]İsşğó/‡7ÿ‘ÿ…m±oßß¨»?7Nc»{óºnÉ¿ÆyW÷ŞèİçYı³45—Oß³ìô=ñË&üòÂ§<ÿßu­ÇcŸœ]Î5aşÆî™óíÿ/ZÚ÷ÿê}rÿµ¯­ß_õêæë¾û{ÿK¿ÿÌëbµ»ë]±;ÿı[_3'GçºNsß¿GmîÆëÿúyY÷G[÷›Òù~³O{«}Åî¹º÷o­÷ş}î%{÷çŸ®Óª=u¿úÑã¹3Ûiİ˜õ5÷šïRwæZİ÷ìSë÷ïûï÷–W¿ÛŸıa@ÀY|Z„LDyäB$•ã¦ÏP^çÀ'ğ¾€f˜d¤ ‚‘p‡Æp¢Åî" vU¡˜
 Ñã À)‹[·mp¬° @"ÄPäØi‘´x"ï²$ÔK ë``'¬i¨4° k¤(!‚~)Äš'äKŒ³ğO’t@m[6IgTh£_ÀAÔ™d% ©Cá<Ts#3®€Íñâ	ŠÚ €ò0ß\TL€p †’@n6œX´2ˆZe@_NªÂo4—F
…™\°Šsp@!¼BV&.È„`\æEÍkÛ¿¨Ô¯ùğÁÜ½ÿ¿¯÷÷û=«İşåŞ•Ïş[ı´ŠÜ^º¿ÿºúåŞ6ÿ}ìnV´¿«Ñ®¥÷9Ã?Úÿ»^Õ|µÙûÿ¥\»Ûğÿªóòïõıûï×ÿrb~ß«ÆËÄrıÓûíŸ½şÏ?ÑOóGƒw½äGÏç{QíÚŸ'ÿò»û~-ÔMC…‚£0³T€Üà:€à£ ƒ€!e2€1ê±[B†%K ÕB¢àçpœQä„DLW±¿Àƒ­Z0 +Œ©™Äò¯ ¶'&Ôùæ	`g‡¨ã¨1Òz@°c¶LESP˜'[%½5 †ñ$ˆÒA×¶=Ú»İ+úô­ßßãöï×ú+ÿö©ÿo…x?·½>_në¬şõİÕúÿ®Ï_“Ù^ßiëßr{–·÷ıæw¿»ë½KåxÙ*ıı\ì‹İùÿw©MXï¿gŸß³¿ş–ßóÿÛkóã×ïŞûcÕø×¹Éµ‘«½·“{üş_»å?«·×Æÿöß‹ÿ]çÿùËİ±ûßÁ7½í=¨O=Şeêxõ­ïwÜïûİ¹±]]ı|ÿ+ëÿWìÎŸiÈÕ˜öùÿ—¦çèÿ¯çß¿®ü?øëï½ÿßÿuÿşí›´Gµş¿Ogµá÷ıı¹/³ôúïîÿüÿYm4êøB· ˆT˜€Â@c	à{ÏÒ+(`­@ƒT¬²À‡ğ –" 4(AÅS*Y®G]¤ğáUë6% PB‡$@ Â` Q"Ğ|D[˜!B °c×s	4f„A)2¦’Èáz™¬‚)2¡Ç€$D¥–9˜¶­>kî{2gº~ü·møoû9ÿşû«ù‰nÕw÷ü?ü‡×8³×¼ãÚĞ{®7Õ\­ÿ•~cÇğqöp^›×ÿ¶şVß;ŸôİÛï}v½ûÏÿ•îSÉŞ¿ßú	Ö‰~ˆıß{ÿîŸåwøÙş6yëãá}ŞTùækõéo¿MÏò_çöÁ¸Äƒß¨(*aÙÙB °# ÔËOàÈ¨d
 tÉH²@:‡2LÂĞC .X@©¤â‰!t ÊÌ m8Dã‰¤|aH‰®€3pÄ‚‘¢»!@#b…‘DDË0	‘˜À*D³° Tà ÈŒ2Hb„À€ÍÈ ¶H‰ /ì'0†Ô
Nd±r´ ±c%  …pÊPtÖ¡á“&‚ë¢ ‡w€à ¨ë@ÇÀt8)BÇ˜£AB™³\»’9u©0¨è«ˆ˜©¨–‚JWbıöÏ>4¿j©œ=÷şób½§ÃeûÿûêŸ7â}¹ö;¿¸ÿß^>}üõ_ıÔï¶íãŸ;ùÍØ9¶ş˜ã¾ÿó¿¯ÊÃ5ÿJ9ş±ı}#«ĞççıécÚ;ßå—ó·½Ú×ÿrUÛ¿s­wwÛ·ã‡tŞíÉx÷şÓï˜÷‡õìËYƒp‚Â’'HK°ˆ’‡8(Â„/´Ü ŠÀ#Tê4l¶À˜‰1°$q>š¦Î&pŠI'ÍFĞ,Ì[Œ›,JV³^	ã´2ŒPÂÂMCá&Nä(@P½EŠ˜­“˜#<ö`‚Â…Œ ˆÄ	C” á´Ã‚©!M	ëıe¾½öíïÿŸ}K·ÿ¯GÓÓ¹ßı“švVû¿}õÕ÷eÏ~©Å¹†¹MçU¿¿£õ}ïy¾¾²ìÿwû£–tõm³6ùkQY¿t‘Û/ıûé×­ç»™³ÿ6ußº‡ûÏŸİ}líå9¿~Z_q÷÷ÛïÍıó{¼³»-şO©‡ù‹<ìÿÏêğĞº÷ŒıCËZ³ıëéÿŸqéÿ¹ïsÎ9TŸÆ|OŞùxçönßîkç_~y½ûÜûuYÔ¾w\ŠÜ_ß—ç\ÿ_^ßô8ª}ùÏ_{ĞıìÚ£ÿŸÏßëüÏ¿ñí—ŸK®íÿYÿñåır/ùhW“ÿßùûÿô[q'Ñ ç­È B 1%ˆYR† ÄaØ á¬Ñ,xÇÉ„˜ ]+h5<4’Â¼rÌÅ©Àƒ„ 4ï²À5#$J
‰iÔhAÊï¯HšŒ
ÃYØ5`•@4’€h"¤$Y U’À ùÈt`]¯İg´që[z½ûÔ÷’[ó\y»+»ß}ÿŞHéÿ¼Vøçÿ¡ã²ÿøMÿêÿøÔù£ödcvÿêÇiÅÃíøÿ{éÛõym$·ÿıUnêe­çßåÿ½]½»ó¿Ñ×ügûzŸÿ=Øşÿü¿şuşß½ÛOîÿş¿Uï‹r\Ôº/ı0``d%(œ`qD\„´ÙPŠRO¨FŸAÔ"†‘Ó$ü×Añ°ş·HèS#*< —áÍT0‚¸ Ô(Y	ï€ƒøc@‚•%¨nd"äM‰ áB“E ğ%`™¢5H£…“‡$óÀCvÀ¨“„i¸>¨aÀ$šâ‘+ŞRn fHµ>'+
¤)Gbğ„gÒ0:‰ÙI0Ö
Œ$
À@¥ŠyJO„=(>øŒ:€ 8ÀÀ‰€E È…T„e$?A2PK±§Uó¨ÄA2*Dì‚a¡0dTÃ¢ê›Ù]ÂVNèâ‰Çÿ÷foiµ=Şàƒÿ÷5Í>üµ¿Û<Ø÷¬m÷¼ÿÎ™v}îı´ç]ı¯ïíçõiÑA½sÿ§àÿwÿqëõß÷}7Ô]Ë~¤ÿü»ß.¼‹<ü»ııgÎß/Ëg¯­ûí÷şçªílvõ¿şïoÇ©º¿ûì0´$9Ô+4œ´‚*™Tpa2™ç) óÒƒÃP4‚"„PáD°±¸dKªØ
&SB²C†€€QÌü’´	dA0ÃxÒ+d´UD¶;pá78•,'CøaO0AC|@F(‹EáA€hvA!	!ëÙÑü{öùyúÑİ«ımãÕş|ûô}÷¡Ÿ*şîİ·{9çíçŞõªúŠ¹—¿ôg¸=şçşçÿ~îP¼ıûÿù¸Ïù»ÄF¾yñûÏ¸­Ÿö~ï>™nÿ¢ó?—üûÃ¥öSûq,ÖİbxiïIøğıíñ¯Ì–×ÿÇã_îkkÿäûz«wo÷ïœOÑ¿¿>ÿ®“ø¿=š~]Áwf{í·;‡ğùÿİ»öüòÁúçî.mİO§çÿÆÊşŸ#·ıÿæWı‘ïö§ïºİ·?ø{®º¹ÿµ»áÒîÏâüõáØ×Ó:¢±š;ü}oWÍÿ÷Ïïÿ{_Âÿ;TŞ;õ®z¿ò?SşüKû&Ì xèT±F Ğ(À™ pñ Ù 9ò $Õjà
i9±˜ğV ƒÁæîÒIĞ–’ ˜DÉ¢üÖl…¬A‚°²‹Ò¥|'r@¶‰Âd‘š¥²¢R— É!šàQ‘“êb4b
¸k ë™Ò{HŸK¼´È½~­óÿsY¼·ûÿÿ»Ÿ»?½¯ÿZáİşùû²¹]à]ìıñ%.nÉ=¶Ú÷ú¿¾úÜæŞ^G×ÿyÿn¶¯ßİì;ªøÇûÿŠÛù–Ÿó¬òóuæ¾§ó¿~»ßçßğ®ï_ûò|
ôìÿ~ïàşû—êeşáÔï~ÁjdÒ€ã{ÒTeQ)sNÊ„ªáÙÄ8´ äPÀK:3¢

($’I% ’¦`1Pˆs÷P©X)Ğg ÃK&)  `:Í EÉ¿!$y ”AFBe  REa" JB ¾ú	`ñ)¢ ,íQ8„ƒMj$€”S.lóÅƒ€<t	@rºF!:ñ°Ô,†PPÀEÀ¾ëI)Æ€zED®V5‹ÍØÅÖÀ ¬¨G˜j‘1áQlM€B’	¢c¸¦&\àHòs¼3İ"Ø‚'zPH.¢o·uî>ë·Ÿ»öêŞÿé{ßÿcé¿İèÿÿ?e.ÿÿşïşÛ¿ş³ûÙ÷“=×¿ÖİışòñïÿQw‘ÿÿıå¾µÿÿøg0÷—ßñìÿóõ÷~õµŒç,¿ÔîŸ¶»Ñl”'üÍ¿ş¶Ïµ}Ëáç¿´î×Û¼¶ÿö¯ÿ™ï©ôÛøBÃAd((0©&öº$: JÌöDG²ÄP™Š…ËÜ-G ´&åp©
2ÍêÂàœ+:QÒ	ğ´+fÈ-¬c"!f	€¢¯BPHwHú€°Àl0<‹&Bi!˜õ‚@W\f`€€o9 Ê'ö ”c„F±ã=íÔòíÛëÿ·}ÜŸÇ÷{5 [îÔù¬ëÅ×¶Ùñe™õşú}Ï´[eo]O:äİs‹ß¸#?Oß}ş”po½U®oÉıL«™	ÿ¦\ÉØ=û½¿êò÷ãëŸ¼ØvjítœÏÛÿûùëÛï¸ÿû«|wÿ®5[·ë+7ö¬«ıé÷÷³ÚoıïúÛmşoäÎåı[æ¬ßÿç½û3ü²ÿ²ºëü}ßş”_÷¿ö<ÿòéï}ïuüŞ¹}¿ÿønø¿šá×å¿MS…ş'ÿïÛëßö¿ïô~¤}i»ËÁö´øÍÜåÏ_í¿eèúûËçİ·çGôÒûÎßR¼'›ë×¾ßïşßït4cÙƒ-ˆ5 ŸÊd`ÌH…Ï‘5Rˆr(‹åN[ËXK3R‡TB	Gµr…”\2DÅA8Q@î%€R Æ€¨D@‚á
L ã‡¡0€(BX €LPĞÏ”SÙ„Y@ihÄ È‘×gQ€ÀÕĞ$Š'® @An4›Ó£«”é+ ‘ç*o†Œ€†ğ¤&„»”Q8!’Á:
,@‰-+-1 +X mRÍ" ‡A4#"8ÆDH¸ Y3L,ˆ0ğJr !UD*
(m«>ÊÍ‚B°Hæ ˜€K„ì 
HEU( ÍûA€#Ğ@€ÁoQ¡qŠ‚°€0É	x"„Ğ
û¸hŠàÄ(c¶2J ¼„øÔpX”ŸÙÄ?	$PàPfP ›€IÀ#7 @ˆ .Ë8 ‘¤œ t±Ñ
ğ&„.»"Ğ<(Pz#¡H.+Ai=Sˆ&Ì H1 DŒàúA"/HÀ ¢"öA@	ºLä†ºP¨—'`b2bP ´CE%#ˆ0‚7±à‰+30œ "Á*„€7‚‘1 †S!ˆ¶)ĞeÀ†  È· “ğ$`‹È`šóè€<!_ ú!‚	ˆ× 0
È†Êê†Ä`Œ…H„º9J2!§HH@$ÇÄIŠ¯6  [š˜ò0B<°!À˜Û* D!’2A” p,Rü
3—ÄB,¨hrÁ9mĞ¦’åí`ÀÎ DÏğ=é%‰Ñğğ€€Á* °êÀ6ğ! ‚°NeÁB"°’\™ !t":”„yO!BtÓ‚( „ÄŒR",’S	ÀnVª@É\€ZÑ ’
#ˆ€àª8*CR1ê! ‰e`RàH‡fKDB'H˜u€EPd`TpcÈ,ÂŠÄÁtg8*è…xO ê†’ĞéB8 r›Càn` *Òp %1€"
$  °ş™!T?ESN‡ î³P°"yĞ0DŞn)ÀPsËDÀA‰°f´†Ä††j
U`'"àæC„‚€Ç¡!B L"*#Yo ¡hó‹q È‚À`Í) xâDH(Ğ$®2 „¯Fšñp)–¤é1èå1ÀLXƒõLÃ’œäÄ(âq„¢õH‚w¤cˆ‚B?Èc'ƒ)µ( SVÄ$ùH¡@bo˜"Vñ µ€AŠ ÁhDâ0¨$¨ÀäoB @” qVL)T@Á A&€PÁ(‰P¡ À]àÜD1×]h° Eµˆ–@ Gšt¨Cc[!`‘Rc1"0à†HÉ CP DXL™˜Öğ‚‘º²Í`ØrĞu4LÔH‡£×ˆ¨Hd@ Cf g9=qTµ£A£D-BP"QQóùQ }4‰APwnDÒê¯[„®"{à8xK@»% 4(FM¨#İ(YAÃR š`¡z‰Š (×E€¢”) $…$	`f 5²±ŞŠ (Gè"R¢«aF'AJ™P­¤¤/Y¤AAˆÃÿĞP@´€©Y XÙ@Á
`e¤L¡E’ˆ G½hƒâfà pÖx 2HÅ•H1¦FtÁŒ©À«’ÀB–M8‹™)ÅŠD”Ni­<Bb±ĞÀ‘(Zˆ4H˜ Å È£Ğ DZ‚Ü¸‚Ñ bB…qI$D€„&s`´Ä “ @t‹Ù @„Š³5ŒX	h	YCHP;şŠs @;²€.#–¿¹n½„jˆ='¹µô#¥à©¶`3'¹Uá¡PŞÓ@¨AŒO©73F´&ÀX¥É`V A¨„X pTÁ…pAÂ0@>«` Y…f@HB(•HÆ(Æ@‰æ 1@6€ " ¤ú%zFƒ€‚H*2G0!fÀ"d™P€@™
0é$ ¨« LqjOhLCJœ „xp# Db @
råˆĞ `Q <Ú¨š¥  ¡…Ø£)	2æ —äÃHC N5ØA°`a+BÁÔ@"Äp*Æˆ‚ Â*„‚B1©°@¦5³@		–€/HR¦ Û@×¨‘€ÔJÛ@‡Fá%Ê‰ ³ÊIH($†H”y`¢À×K!à
 «4ä,Ü0
k``)/–¶E0!#„3 A0„&"Ô HCAâ‘ğò3n) O+€Äk Ó<Ì€BT `Í0	FuqU®å~H´¦V…,‘,´Yü •”$-ü‚B¦fN¶ŠàÂiq 2—ÄèLá@‚pP¥–Ì”#ÀIÌ+"²11$4" DP?`Z©%|b¬ÁB|*D$¥Ò‘–€¸ÛD!€ÙÍf@RDPØ A-x&¥Á4ğd ¨ñ$|	ˆ$ T€‰™%F!$€%˜ :ƒˆ¹u(€äp˜HJ%Jå#HN8á‹H‘‚0ÃKù¦(øÀÉÆÊˆ#ÂWÃ¶aBˆR–Ñœ¹p1ìĞ¡lÁ°ÒÅQĞe4¾'!€H˜˜€‰¡˜ ¦_0à Ñá ™…=)l_€!ÄA ˆ9"a1€˜˜±bòLI$²VB#iƒO‘0ŠdÈ¡.U Âbèb T”5@°ITÇÀ˜… ²"X?( ¢¦£*¦Š»‚ç€ADsH Öe'€ÏG]F$Â ²	ªP¤€Z`SDe" Š‹à6¥˜ 0 È0È4 ‰°"é!,‚ âHBƒä@1rî* •ª†Ø‚ª°ª‰ 	†J¡ƒu\D‚‚ 0 ø…‰ x8E‹ ¨`á`¬¢9€îâa àEDDĞp:öŠ c0Á,ˆ8W Mx	‹Ñ‚­PD Eâ( ˆè˜0§•BÆˆ Ô €â*¾DáHhB‚D¢   v2Œ*2 V(hˆO“ÔÌCÈ	†Ì¥ŞLˆ	åVãÂòZ6à„
Iâ€.ÑtÙÁ´PÀ0lRhÌ • HJğˆ¯z_ÇP.¦l°  Tl-½Pr2È(á!‰ÚC€•áªä@z	vƒ'h„ ô$bZ IK¨ì) Œ©hS/Ó@TOc	š¡-€MGÍÙ1²°ÈÒ@€B€ã83» ˆ‚BI$É‚ ‘èĞi”Â ` c€H‚æƒx ¤JC  Bˆ Q¬r¼‘Š00p¹	"d¢P¤¸`3À• Š €Æ<²%Lğ€²0…àJ Ï!å@t#‚aÊ@ç ‹°Öb !;h
˜pLT­#N^ºŠ@&€%h†(E±l$'ğAè1R„ª“fß!ó„3$€øÉSYÓ ä" š@á,[Æ ˆf„ˆ5øB‚• İ‰‰Ò¦ a]((‡  FŒŠiAQÔeçŠf!€Q‰¨PˆÂEÀ‘-@D!Ç‰ş ” ‘Ë"@4ƒ-ò¡i°%!-¼tEƒŠ´0TÄ ‹sPAÅP)İ Y…ÇJ Xéş9cTÑÊï0v=dÄMBd1ak• 
, ©“d?Z$	œ©3Q8@` @ !iBpR`(ˆ˜h@‘€¤E„È D51`Š†—/ÀL`M ÀPh’GRr“+ay‡`‚H †è1¸T TB8*¢TF  @8x•)8”>€hI}3¥+IaÛÅ² Cí	œ)>ğ€_Õƒ IÑªT¼LâIàÀ#âB2SgbsZ" %â0*o	öÎr$¨•¡!lˆ	B  BPYrQ$!@³ ØHG',˜i#A¦¼²ˆ&Š$¦ AJB›32$€’¥
âp²‚€¬
Cà@€Nğ 
ƒá`xa!âP ƒH„p òüÀ´•”‚ä¢lX@K@  ` ¡lbR1%B€@Œ’P ÛH J€PD!à’*s%!,´ ”`	„qĞEğtQ±(¢ @ä' 
êpœÁQ ) 2c(1 AT pj Êh5&L8rT@‹¤ô8ë,€²eAE#‚DÁ)$€R†ŠfÆò@ea ÅŠ" H¬@´qà L@¨@Ôğ‰@6©B„`Q`YE ƒ*›@±¡T€¥ûAU¦Òe3œ„%	Ä¦‡(NBKQhC3ĞÕf8˜R[è  9H¡6c 
R0Á|˜€hĞ
¡ÙURánd"D©°°uH^”Œ$Ğ@…®`QaäbjDÍD $0ˆĞtT`†4âœÈ°"®B ÃÁ¢€“€`™XC0!‚F'N@€JÀ!@D°¢¡b Xº Q itB; €ë Š$@F sV2BA EH †|
hˆ5B‡ pö`C”& *šG²sTƒƒ7GHÄ€Cˆ<ƒ0£c˜QÍ8kX©™Ó¦]J$Vd¡EŠxm°¢Ò†12‡­ „˜ĞX$P€P˜ (²4	ÜZ‚“É+FÌ½İù®’Æ·"ã%™!Ø²D9!€) S!ÁØ)QU@"+6LFbÈ  ²Ä`Aˆ@fO*b ”P#&WÏK}ŒÊ¡@…ˆ"X¼Ed-0 ™ª sAá¡È	Û1!‚("M$WlĞmŒ‹E .É¡ PÀA^
	Gi©N… @R…’E0
¥˜B"Y0Bd#®®T`ŒÜRÊÒÆh€aDŞe0 õ À!´Š&‰°N"ÊÙ7µP.bòa…‘\Æ2P&àS–2A°C3 ‡}¡	à	 ˆ   éÃ ÀLBŠÅ(	 >ëi€ ì2 -ÚÒ@ØD€‡E'C@ €©D	(ñĞ A@    /€DdÌ!ÀÂå
b0E†¨N'ä‡@0ÆC@(#`£@ÈRI,  ´H	 (TE6ğÁ®æ$°0'‹@€Ù€‘‰.Äk¢€†&…1 @ÔĞš@ÙN£,¨„mŒVh/sF[¹¨Âwf³ÈTQŠ$j %EÔƒ$”`€Ğm°Š]ëP, …ÌEzC˜Hä#Ç±TE’°P” €`U`¸4 G‘ˆáVA¨#Å›h%âb@ ğ€¸‹*€6b¿ñBà F\âÑJC‰• ğ(E0E ¢*"~ãC8B(jN(’0CDğåH!™4ä@CÀ>XBbÄƒÅA·„2[ÊM‹	0.†""’€ÙG`•D˜jA—0D
ÅæA§p~+à1%¢¦5špƒ*ÀÅ Á ,ú)$.€ƒ¢ê’>R$#ÉÂ 2ƒ E@7„h€Bì øU: ±¨˜ô"ù±á&Ò ëCk
ñÓlP  Ëxå
„p%ât’€aRA †K #ƒÀ ª05j J‚0 Ã †¢B@	(ø”µ­²%C<@ŞP› †* ¥& TÁØ Ô!ôG¸)—cÑL cÑ>	J `"ÕQ¡"âÈ‚fãCP@’¤ÌYpH¦²‰âh(rTİD
R¸f6|L$€B8HL‘QŠ¡ˆ,¯”  .^x¦F¬8ÜJ1  	˜Uh by¨ $$$¡	0 #$†$Ã6À¦›G`2@¦‚‚9x	pH`'3 ‚ŸQğd‹&òÓà! b$87EZĞI DQPHAÂ^ ^è a„X Y…8X0À-@†Á
ÆÚ@€‚C 
i<ĞCa$BIÍ €dÜ# K Ü<£@@08WP‰¹»R€@0$ÄcAjÀL@7Ù	AlJR JC @2 ĞP€4	a¤€œT²†ÀB\ ¢&	Dİ ´ ‹%D	¡P ƒÙ„‘¡,"0¢ÅxaMÎ€ 0U,=°‡*”,@)ASƒáÓ0#Xn*a”¦£aÄ’VP)$XÀ€³H ¨ M½ÂujVbGB4`€2‚+1„yûà0	”~…mØÈ%	S@D	 •lŒ$
Â‰ d¬¨H…3Â2`dZLL|¦*‡3Ò¸¤P.œ±,"dO(Ì¦ËGtŠ`°r$¡¨ kAr40 “ú‚ ‘
‰F ˆ[É/;KÄAFA@€  –\˜Hh <×2W Ò@$Q*İÀY`%Å€->½bQ8:F„Ã Q…oI!aFe"UÃ˜ 9Ğ‰iF í„‘¦$ÔE% ZÖExY+q	–¸&A4cM'…9r €‡F¤1I‚Ââ/-#«²hÔ¤"e) ¥(Fh€ad®¨"‹`º„‚€è—ø-tŒ@s"aÅƒÌ·Í$t"Y„‚á‚©vĞÒN
QÈ“‰ 0„®9¢0ÒT¢†e®ú´xC	JT$
*`×H¡è  4B"&—İäA"’BR4ùEHDG3eÊU€ 4œ¬¡PÙªP¢ƒ€1å¸hâ€šuj;€ÁÀ^Î$Hù3“N `ÈŠ³P`EÌ´˜¢‰‹Dv€ K1‚ p, €SÃ"A <"¢œ0Ğ QG	$°”€3HH\š‚B
x «‚"”·*–N6‚€Ü´¢>hPGd`	ˆ”,T“T.`Ø‹
rbÒ‘ ³V#à!>y‡Kã"ºPª*©4²oğ ¬ à“´®\ yAhÇ“ã$ËÁ .«%ĞŠH D ˆB ¡Ê4P@	ŒŠ)ãC­ taTD€),t"ª‰C Œ	@4 A TiSE àLºö°Á©!Õ)’¤(Jcf†µBúÀ ÂU@4@†L$1Rüá$²‹Á2ªh¢€Pm
³(…6%ç",‰ŠÒ°)Ö@ Ÿ	‚õ¥Í‘……@<Áe˜¨ U$.¥0Ä AÊ P A‰ ,y0)Y”C¢pP½@T!(e #Ø?BW@ILBB" 
¢")LN
Àà\"XA“<ÍU.	…Ô "€Ñ²ĞH¢A‡Û¨<(š`ËJåf"míPÙ(*‹®-¶&¡SL„4ò"5šˆl¯ƒgNœÌÇ.ö¡$¹Ä
)Y ×£T,„¨”P @I9 †4)PÌOÄ@%($J 4ÈÅ@¢`dC4¢ˆr
 0P@Œ aTE>áâ
ˆĞ¸@”)CÃ«	F1‹   ‰ML´@ Å XÄ{ ˜p&ÓÀ
µ 3Š\Â`é³„  Uë+çlk0D*„LÀH ÌPó|#`0¡E aƒ‚`¥À‘ Dù¤ c§Ñ$J°#%í ÜÚ‚-pÆ†8DT¥\KM`& $(,CĞ$ü¡ƒAtº† e¸ >"¿TÀ )RD„•´/ìÑ$  ‰îDÂ T1L[±*¼€ KYP8¤CLnàC0½‰ZÃ 
f€RpB2„•@’PÑÊƒP6#²5ÆAö[Qd†ÏN.Eƒ‹U<`¤4&Ê¤c¢¡!M1$rà&d Ü\!KX ” ˆØH¸Œ-A Ìi0ÊÒ#b$@¸	(8æDàƒˆ4¨(˜#‚“,øPƒ¸ĞÀJ%#@E Á„sU ‚ @[ÑA¸Jh-°¸@˜@d" T ÄNC8FŒd@€#88² $  ˆ 
V m„à ®£(à“UPÑ@ˆ‚o°6D8²@RmaÁ,—pBÅ¸D6“4¨s.yÆè ÕBk' †Q%	*]D¿+ddKPá¸01ƒµ‹"(LXÀlDE @I,0LÂD&ìIµP^ƒ" & #pÀ€ :Õ…$ğVNA  D=ÊP8*8Bì` !JØ_¡( C8F@2$›HæÈ"B”…Xãw0¶(¤I22Q*X@`I0* €YHĞp8!  ƒè2²p P   “
@1„2F IÀ4€P  IPÀğ`P”±®P@  À"@„Âï„ ‰,…ìH È ‘„„ ÁãĞ`L$Ağpc$€	l! x”8Iè)GÛd™³ @È$	Úb DãI€`*Ià‚@Xâ]@ …*P	û 6T+WÊ ˆâ˜œ; ‚$¯‚V` pZœB±P Ğ`¹œX3 @bq İ¡"³ŠĞ´B€¼aÁèX6€!… Y@`Å–]€	"V9‰¦ğ$
–ˆ˜&TÓË="TB†`'GĞ Òë0§ue	EIÍĞl‚E°h˜,@pî8B.‡„Y„Ë#ãï 9I C"ˆ1H·`àø
HÆÉ#EXG L…I‚,ª¸cÁ<LDƒq	 ¤ ‚ PDUÀ @"ƒ‚ ’€ á`è D¹È@`ã0Y‚@¥$ Òm ¶Ò!=ğ[€™’q0b L€Ê³Â!P™hN‚¢	È 0°™¢L(à¤ÒR«Rš” ¬Èà9qX 5…ÎäBdgèv!L÷,ÕvFÖa·mµ”T>}`@#›Pl«@QC—b Hˆ2! 6\a¥ †Éoğ°‚„[À‡8æ ',QNUWPëRV¤ºGÁAb4ôF^c0ØPÂY@ €A@r3"ˆ€è€ ÷	ÒA²
¥2p6e%@%#ådŠ:TÂJƒ$*Å`âI…‘ )0ıå2GL¼Å­qÎQ]#$Û»bÊ læçÑ€$•á2J’CdÎ© 6%R‹‹!#¢À jœ ˜¨š!1;@aSbDU$mb(Ìpğ"Ë r«^ €	ÄI e’–„Àc FEy)¡–#@À&	"AP€+,ZĞ@ã‚„
hCB"
drˆpªfˆBz…	RóXj,eV  B—	°‚•EÄ nˆĞ…(¢fÁP…8	ÍÛâFXAœ)"§ˆÙ°À«8D<0wlP2`xÆà"@. ¦’ ƒ,H/¨U¡5"°v†$T¼BC¥ å'àÁ€p à‹F¡‰$Œp“ Õ,;+ =ˆ	”'ªÄp!†" ƒ#¦Y¨[)!)Åd!„Ì8 T„ Œ‚Ay˜¸€Î'# €Ğ‚ @.(aRä
„2r„œ (…M%]( $ÓÄG ‰¹WT¤LX…(2 ©ÈPÀóR…øÑ Dí Ğ‚êĞ ‰ Á âR@
€cIDK
‘Br–P	Ô H0€ ŠÑƒ@( 14x6FBY|H0±B¢ˆR €­T@1Í cër!’ 1	À ­¡sü  €Ñ` ÂĞ­Ä&EO0„cõB4!f'Š.’± Å"àĞ$4Q™n.:‡€“p…Ä*J+3¤‘—„ePæ&Êğ
P„s ³tX.’œÀ- 8Æ €ë€F²1 \]%H•ÃÃ 3& ‚ğ–†!%b”‘Ò	0>bF[… !:rmalized = true;
                    break;
                  }
                } while ((node = (directionLeft ? walker.next() : walker.prev())));
              }
            }
          }

          // Lean the caret to the left if possible
          if (collapsed) {
            // So this: <b>x</b><i>|x</i>
            // Becomes: <b>x|</b><i>x</i>
            // Seems that only gecko has issues with this
            if (container.nodeType === 3 && offset === 0) {
              findTextNodeRelative(true);
            }

            // Lean left into empty inline elements when the caret is before a BR
            // So this: <i><b></b><i>|<br></i>
            // Becomes: <i><b>|</b><i><br></i>
            // Seems that only gecko has issues with this.
            // Special edge case for <p><a>x</a>|<br></p> since we don't want <p><a>x|</a><br></p>
            if (container.nodeType === 1) {
              node = container.childNodes[offset];

              // Offset is after the containers last child
              // then use the previous child for normalization
              if (!node) {
                node = container.childNodes[offset - 1];
              }

              if (node && node.nodeName === 'BR' && !isPrevNode(node, 'A') &&
                !hasBrBeforeAfter(node) && !hasBrBeforeAfter(node, true)) {
                findTextNodeRelative(true, node);
              }
            }
          }

          // Lean the start of the selection right if possible
          // So this: x[<b>x]</b>
          // Becomes: x<b>[x]</b>
          if (directionLeft && !collapsed && container.nodeType === 3 && offset === container.nodeValue.length) {
            findTextNodeRelative(false);
          }

          // Set endpoint if it was normalized
          if (normalized) {
            rng['set' + (start ? 'Start' : 'End')](container, offset);
          }
        }

        collapsed = rng.collapsed;

        normalizeEndPoint(true);

        if (!collapsed) {
          normalizeEndPoint();
        }

        // If it was collapsed then make sure it still is
        if (normalized && collapsed) {
          rng.collapse(true);
        }

        return normalized;
      };
    }

    /**
     * Compares two ranges and checks if they are equal.
     *
     * @static
     * @method compareRanges
     * @param {DOMRange} rng1 First range to compare.
     * @param {DOMRange} rng2 First range to compare.
     * @return {Boolean} true/false if the ranges are equal.
     */
    RangeUtils.compareRanges = function (rng1, rng2) {
      if (rng1 && rng2) {
        // Compare native IE ranges
        if (rng1.item || rng1.duplicate) {
          // Both are control ranges and the selected element matches
          if (rng1.item && rng2.item && rng1.item(0) === rng2.item(0)) {
            return true;
          }

          // Both are text ranges and the range matches
          if (rng1.isEqual && rng2.isEqual && rng2.isEqual(rng1)) {
            return true;
          }
        } else {
          // Compare w3c ranges
          return rng1.startContainer == rng2.startContainer && rng1.startOffset == rng2.startOffset;
        }
      }

      return false;
    };

    /**
     * Finds the closest selection rect tries to get the range from that.
     */
    function findClosestIeRange(clientX, clientY, doc) {
      var element, rng, rects;

      element = doc.elementFromPoint(clientX, clientY);
      rng = doc.body.createTextRange();

      if (!element || element.tagName == 'HTML') {
        element = doc.body;
      }

      rng.moveToElementText(element);
      rects = Tools.toArray(rng.getClientRects());

      rects = rects.sort(function (a, b) {
        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));
        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));

        return a - b;
      });

      if (rects.length > 0) {
        clientY = (rects[0].bottom + rects[0].top) / 2;

        try {
          rng.moveToPoint(clientX, clientY);
          rng.collapse(true);

          return rng;
        } catch (ex) {
          // At least we tried
        }
      }

      return null;
    }

    function moveOutOfContentEditableFalse(rng, rootNode) {
      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;
      return isContentEditableFalse(findParent(parentElement, rootNode, hasCeProperty)) ? null : rng;
    }

    /**
     * Gets the caret range for the given x/y location.
     *
     * @static
     * @method getCaretRangeFromPoint
     * @param {Number} clientX X coordinate for range
     * @param {Number} clientY Y coordinate for range
     * @param {Document} doc Document that x/y are relative to
     * @returns {Range} caret range
     */
    RangeUtils.getCaretRangeFromPoint = function (clientX, clientY, doc) {
      var rng, point;

      if (doc.caretPositionFromPoint) {
        point = doc.caretPositionFromPoint(clientX, clientY);
        rng = doc.createRange();
        rng.setStart(point.offsetNode, point.offset);
        rng.collapse(true);
      } else if (doc.caretRangeFromPoint) {
        rng = doc.caretRangeFromPoint(clientX, clientY);
      } else if (doc.body.createTextRange) {
        rng = doc.body.createTextRange();

        try {
          rng.moveToPoint(clientX, clientY);
          rng.collapse(true);
        } catch (ex) {
          rng = findClosestIeRange(clientX, clientY, doc);
        }

        return moveOutOfContentEditableFalse(rng, doc.body);
      }

      return rng;
    };

    RangeUtils.getSelectedNode = function (range) {
      var startContainer = range.startContainer,
        startOffset = range.startOffset;

      if (startContainer.hasChildNodes() && range.endOffset == startOffset + 1) {
        return startContainer.childNodes[startOffset];
      }

      return null;
    };

    RangeUtils.getNode = function (container, offset) {
      if (container.nodeType == 1 && container.hasChildNodes()) {
        if (offset >= container.childNodes.length) {
          offset = container.childNodes.length - 1;
        }

        container = container.childNodes[offset];
      }

      return container;
    };

    return RangeUtils;
  }
);

/**
 * Node.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class is a minimalistic implementation of a DOM like node used by the DomParser class.
 *
 * @example
 * var node = new tinymce.html.Node('strong', 1);
 * someRoot.append(node);
 *
 * @class tinymce.html.Node
 * @version 3.4
 */
define(
  'tinymce.core.html.Node',
  [
  ],
  function () {
    var whiteSpaceRegExp = /^[ \t\r\n]*$/;
    var typeLookup = {
      '#text': 3,
      '#comment': 8,
      '#cdata': 4,
      '#pi': 7,
      '#doctype': 10,
      '#document-fragment': 11
    };

    // Walks the tree left/right
    function walk(node, rootNode, prev) {
      var sibling, parent, startName = prev ? 'lastChild' : 'firstChild', siblingName = prev ? 'prev' : 'next';

      // Walk into nodes if it has a start
      if (node[startName]) {
        return node[startName];
      }

      // Return the sibling if it has one
      if (node !== rootNode) {
        sibling = node[siblingName];

        if (sibling) {
          return sibling;
        }

        // Walk up the parents to look for siblings
        for (parent = node.parent; parent && parent !== rootNode; parent = parent.parent) {
          sibling = parent[siblingName];

          if (sibling) {
            return sibling;
          }
        }
      }
    }

    /**
     * Constructs a new Node instance.
     *
     * @constructor
     * @method Node
     * @param {String} name Name of the node type.
     * @param {Number} type Numeric type representing the node.
     */
    function Node(name, type) {
      this.name = name;
      this.type = type;

      if (type === 1) {
        this.attributes = [];
        this.attributes.map = {};
      }
    }

    Node.prototype = {
      /**
       * Replaces the current node with the specified one.
       *
     €¢€Š< è‘ 0Ag,2(€% kÑ0:ì0ºˆ€,`1`j0H‚pHÉPc`à@IV ‹$B 2­– BóÂæÚ:SB	Ë X™bÂĞƒ#)zHB&b{€¡F„(*’H5@Ba@ÌÄ3¿Ä^_¾(œ÷ó+Ö›å<û¦%jşzÆö1ÔŞ÷¦ù¿ÄüŸÆß;&ßŠ§Ê¹¯÷“ÂŸ¾±ü
ŞLò1‹Ò_ÿ¥ûş·/T!‘Ûß\ÙædyÊÿ©ç®ş3ú›Ä{¾ûóÔ÷Iûîg[öã¬qõ§Àÿß]©å{]ğ¿_MÕ_ª_íïôô?.¸w~›ß=İo8ıÛŸŞ¯ÿºsí;æîñæ.;sÿkk,Ûg‹ëF©2ûgwùgCÃê×ß­¢åµ>á:í¸¬ÏıúÇUeı|z´^Ç~ug?¶¿G]Ï8şşĞEïOFşÏÿos¾¯=}%÷îÅfc“ô×ı÷õåšÏJÃ˜µĞ«“½`µº* OpA6
-(FQ@ÀÀ`ˆDÄdLÌNhºJCRV 4À’‘¥$®D€d ¸ I ¦<8` ‚Â7 7œ&æÉÁ0H…FP¦B8ÈˆEn€80 ‚ #F 	R¸WÍ_÷çµÏÿTÿ¨O;w½?¸vyõ<Ü«—ÖŠm'¼ôç•ç>òÜö;:×s5Ÿ%ßî¢ı¿ß²¾†¥›cÛ,~óŸ%Ä>:^mğ*Ô÷Oå§º¼ŸöğçÅrÇ\&çfõmÆ•]Ñiãn²š7w=g_•ÛÖ·½e·ô›Ô²¾İ­8½ä†ŠDÁÄÊL9` +‡@  3eÚ‰‚‹@€€ğd±Ğ†€FAÖÎà¹ ÌØ@p¯¢!yˆ )ö‰HÏmÂ4N@
@˜‚ˆU‘¶H*ñh@„¿C2Ş‚4@„ „ &|> ±ğ(Bb YÉ ÌM£¤(ÄVIbZa (À-Âd@CH€I `£Ä'PP„(PNÂ¡¦†‹[Â \€ š€@ ¢PD€JA X0C@à Çé@ *Dià  T‚„h „(¼İûRÿ·Îç»¬.ËOòÊüÒY:¥ì¿]°•q®ÿíşo^Vfg9	Îÿ_×'”-ÕÜYZ{÷<y±cS\
ıfÛ¹7ßşï;Z—Lß­ÿÀGöBm‹ê;•«û÷üuŒ^··ê½;ú6Ü“ÿŞü]»¶ıªy¿¿ÕGÍv²Áÿg¹®¾ Db€ÑÅ„@ PG" l€p€%“ ğ“MñM(aFŠ0"€
Q`P M#i@<‹@6+4ÎĞq"ël(0( á¦˜7€0€‘aÉ@ÁĞJ2!«À#!0H`‰H `ŠğÊJ2’€(%€J&Áš<¿|o+|²üOÙÛnğsÑ£×}Çøï×œîÓßGrı[ó¿=>v×ôò¯Ÿhï^x‹÷»O?|?şíø¿äWG¼>['àº=âü»G€„×?ğï}Éíq¾ëõŠÚµº}~VßU[:/omıÿó_ùŸíkç^·ëÙßæ•ÓŒ"Ñ~ãş÷b{ôıò=äÚøW?^[ùŒáOu¯ŞŞçäÿU¾.íÍ¯óß¾¾É=í|û—Ş}÷}şùõ×;öÓ¿ãÕ¬£jï	ğüHÿ¿ŞúÇõk·â^<á­g­ûÛ»/gA8ä•/ó›'GNcå½ûŞù?ùÁzJê¹
"FÔ‚Â1Ğ€H`QRoC 0jvŒc`9F`)RdÄ!"—ã 1 Ä2 ’ ["š 8Å0ÆA~ô±J#Rôp8P@@a’  W:`AÙ„ŒàŒ¢A†D”HF°˜…! †#9BYy4pb"R@Br½¿NÆ³ )»a„¶.0™½÷şô=ÚF­¿rßåÀSÉ:ì&QMÆ¢Í¿ñõVê·„ı×ÿ¿kiİò·—Åi^ó‹og›ß§½™gößîûıZú±ï;·íÄ¡Ÿö·ººçuGü×7Óÿ•_ğÃ­Şåß—½š½~ü¼ì'wíXYwZØ¶„\ "À
@ ÂÀdÅáDf	»0…¨Ä"R a€ĞÉ	AÂ(º’`‹I(P “€,Â"
è€£ @‰+…`G(   ŒÁÑ2šu,Ÿ A
@£x ƒ!1Æ0˜à0d0€"™@î1¥3Á&+ \¡

	Â@*¨¤ÉĞ@m ’2ÀºBIÌ"«ˆ„)5@# †Er$ ¸+ˆE0b
2"
¡ ‹ .[ƒ#
BâÚ°„„Ód1M%
¢U	,qpAg¹‡(RmÄ±KŸ œ! B·yT×ùÔdwyK¯˜?$ûş?ÿë|Wg÷R-Ûò¾t*¾ÖÏğïò:Ğ·%EÂW–ºUÇû.KGo]‘ÿŸg»uüÏ·;É¾Wïş=_lU™ŞwúüSn_ÕWëåÍn5\vı/»wÉÔ[´Û_Û­ãÒ÷1î3¿q<w»ú¯LÒ7åéÎ (	!Œ%		"Ò¾ ÂÂa‹¤á(’ €CÔ+i!"¡8 T  h
á¬H*@!˜°ĞÈÂ ‰Pø‚D$À2ú' À‚H	AH ‚ àd'ŠŒ‚§Â$ÀÈ0`’3 Ô‚wHwV ¥,&€Rd½æ¾;á3ÿ÷Ç÷ÿ¾¦—y¸#°÷Áßy?ÿøl÷é¾®¶ÒÏ›1¯9]ü}Úáüçıß÷ºÿWs²ò¾ş_æÚòßå×}Xˆ³®mk{µáSÛú×=%è,±õşgŸ½Ş¾G¼ÍKÔ?¶z­è÷²öÇî…B“éÿWd¦5g­ïy¿ßSGN‡Îè1åÏßıó¿§vÇ;x?ü¾¯—Û÷~+^Jş?oWÙö·şVİkëPßÿ¿ıï±F6ûovÔTç2¾k+goGÿ}»»ğÇìÿç«±[ÚıRÿı[mmü›{[ÿw]ª½Â§Ï/_¿ğæO®ÚËù.©õïOSÕªÙ@Ã€`º 
¤´‹ÊHj	t,€8P„œ1p ¶=tLƒ–DÒÂP$ˆ¶ÖğD@ $\"¡H Àa‚+›2ğÄH“%6H(!4²&TDDdapP€†DB6˜%K!‚$A-u"(È$Ã  G ¨·¼ywçœ,ùz.õk¾òs½o7{oÓqø³½ÿõÒ>/²QÍÿì_ƒ{º¦®ö5Ÿ×=ªgßÖæ_o¥û–âiXÖ‡~÷Û¶c“;ße7ÿ·®_#}:â[Ëzhu¯ş·şî7¨ïÓ'ü³¥#ùéÏGşs7ÿíw¿ÏkûËÖ¿mùÔ,ğú„d2' …Y zC¢HXÄœ‹£)‚œBª ‚h€H!€À€¢˜@‘&  ¡Z@„
 ¨B® 2Œ$JQ ‹òQ‰ #A$  !Apa,pjB;€ZJH@€3A8B€ÎB'ô`Ä ¦D˜‘ Ği Œ; ™8ƒx:*UE€ „‡°2O¡’xÈK$%¢ªZ˜Œ:‹4!Á ™¼„r‚hÒ¸¦qD	˜% d‰ºw¬A	‘€FUèZ AC |¯0xš T¬È	Q
BKWG÷óví'njÛo¾ÎqKş@#íí×ıŠö[Å?™®½ÛG¶Sÿ¡GËæ–ı»Ÿ[\£ätıı÷}¶cı×æÏ÷~º.‰6zi6^³¶ø]Ú&|ÈWp­·gû}×I[ëÎúÿ°Ïµ?ı}yrß×0õG>ÇÛûô~ßÍ9V¬ AF%!P°Á\C  ĞÈ êDÄ^bN)€Bb	H`H`t %Sª¡$ Á€@@°¢@ˆ’*„ˆAÕ†$!¯ d‘ ˜UA Å–Š*ããF&0“!¤u¨YrFÂX€ƒU+šØ* @T<P„êÕçå~+ÿìì_U}IJÿºğ÷WªıµÍ›Ï®=®Ûn.—ó‡ïSûßö¹¼RgşNæ]üÏïÛ:;·òÈ&lÚs;¯—îº#ø_ù/d+§÷ŸcYüÓïù|‚7ºùpÏ—ü?¿Ş^‰»äŠ–ıVi¯åÿ§ˆ¿eñcÕ’K`µT»õæª¯Ñ_ê?×ëÏn¾ô›åû¯åvÛ¯uªèwã§ì¯	³İJ\ßTŸÙ½Ùü“tûõszı’ê©Á3÷OÜ?¬]ç1×|½}ë÷öûÒıÕÿüüaí.üçûÿÔŞŸığ9Y¯Ûg'½ß:ßw3{7İ]uÓòùö›î7íwy/¿«z/ÀBà Rà˜é1 ”ˆ1qÙB0X ‡!… ‡$†$
–@@Ò1™BËKD¢%sH{cÆhDˆÀ³X2,€ò4’bd Bz;*QÁ‰˜¥8og6
‚`#²R$œÀl¸	A¤"‚`G—ƒê¿{ÆûÿÜ¾©ñ
æû^_sıòä·Û×s¤7ô;6ßp¶ÅëÚt›Ô~¹W×òø–?÷î¿jVıçêı·{®Ş,¿¥7×«iåÁÌá÷ÎŒ}¾É=t³Wï}¹¬v¸ø{~~ğòSú“¯Ã7k%¯¯ÿãOfİ•SÔ±7=×B
P"pP1–p4 B „L D]…¬	"Âä XJ e4Â ™l 
È@@€,¨* Hê " h	‚
’#fœ‡* c €ÇÄ¹xÌ gD (3Áğà(añ0 ŒÂ`ÊqÌèDtÁ&ˆ‰	€p P÷	€BA•è”eiIˆ00– ñ‰, Q`Ğ €PB$A2È›L*‘H’5Y@@  €Â „ÚÓ@ş³4€P91
¦€¥ ˆ0PàH `B.V "	!€ÄÈ0aF8XÒdM#! ‚¹íÿ©.œı.nî/Ôço·}÷dõ»wÈ[w‰”æ¥?ú r›F‰G¼ŠGÎTÔÿÕZé±DÚnïn§öŠ‘òÔ¹¶iÉºæóUùæÏİıÌş?÷¼ş¾™şÔ+÷›Û5¯÷•¹¬2'Ïïmş7‰æÚKÿıí_ıò.ÿ}ÇªÏ&Ô¾ÍúÕtrue);
          node = next;
        }

        self.remove();
      },

      /**
       * Removes the node from it's parent.
       *
       * @example
       * node.remove();
       *
       * @method remove
       * @return {tinymce.html.Node} Current node that got removed.
       */
      remove: function () {
        var self = this, parent = self.parent, next = self.next, prev = self.prev;

        if (parent) {
          if (parent.firstChild === self) {
            parent.firstChild = next;

            if (next) {
              next.prev = null;
            }
          } else {
            prev.next = next;
          }

          if (parent.lastChild === self) {
            parent.lastChild = prev;

            if (prev) {
              prev.next = null;
            }
          } else {
            next.prev = prev;
          }

          self.parent = self.next = self.prev = null;
        }

        return self;
      },

      /**
       * Appends a new node as a child of the current node.
       *
       * @example
       * node.append(someNode);
       *
       * @method append
       * @param {tinymce.html.Node} node Node to append as a child of the current one.
       * @return {tinymce.html.Node} The node that got appended.
       */
      append: function (node) {
        var self = this, last;

        if (node.parent) {
          node.remove();
        }

        last = self.lastChild;
        if (last) {
          last.next = node;
          node.prev = last;
          self.lastChild = node;
        } else {
          self.lastChild = self.firstChild = node;
        }

        node.parent = self;

        return node;
      },

      /**
       * Inserts a node at a specific position as a child of the current node.
       *
       * @example
       * parentNode.insert(newChildNode, oldChildNode);
       *
       * @method insert
       * @param {tinymce.html.Node} node Node to insert as a child of the current node.
       * @param {tinymce.html.Node} refNode Reference node to set node before/after.
       * @param {Boolean} before Optional state to insert the node before the reference node.
       * @return {tinymce.html.Node} The node that got inserted.
       */
      insert: function (node, refNode, before) {
        var parent;

        if (node.parent) {
          node.remove();
        }

        parent = refNode.parent || this;

        if (before) {
          if (refNode === parent.firstChild) {
            parent.firstChild = node;
          } else {
            refNode.prev.next = node;
          }

          node.prev = refNode.prev;
          node.next = refNode;
          refNode.prev = node;
        } else {
          if (refNode === parent.lastChild) {
            parent.lastChild = node;
          } else {
            refNode.next.prev = node;
          }

          node.next = refNode.next;
          node.prev = refNode;
          refNode.next = node;
        }

        node.parent = parent;

        return node;
      },

      /**
       * Get all children by name.
       *
       * @method getAll
       * @param {String} name Name of the child nodes to collect.
       * @return {Array} Array with child nodes matchin the specified name.
       */
      getAll: function (name) {
        var self = this, node, collection = [];

        for (node = self.firstChild; node; node = walk(node, self)) {
          if (node.name === name) {
            collection.push(node);
          }
        }

        return collection;
      },

      /**
       * Removes all children of the current node.
       *
       * @method empty
       * @return {tinymce.html.Node} The current node that got cleared.
       */
      empty: function () {
        var self = this, nodes, i, node;

        // Remove all children
        if (self.firstChild) {
          nodes = [];

          // Collect the children
          for (node = self.firstChild; node; node = walk(node, self)) {
            nodes.push(node);
          }

          // Remove the children
          i = nodes.length;
          while (i--) {
     D¨‰¶ ³—@"y[E€P!°Ê˜„Ä ŠÜÂ Á4i¸'CĞÃˆ1 L…‰ÑQ ´IB˜B¨©4 »±i(…õÌà §0!€L ’„t ²ñeÛ€™'DŸrŒFæÂ `Yô“ -’MH A Kšc!P„B`ó ¢*Ğs@`3Á €hBD"`"´`X @*” 08 Ñá@ñ ‹„ˆÁlO@”A€™¤@Á€¨Â€@ÂDÀ E3 -Cä€ÑT	€i“P Ø  ! Á @‚Xê <@–2 	
A 20 Q
P2 O¨pl5dh%&û DA_Œp„Å  ‘»`†°  "4«ĞD.¢(HH*âX`F%°HÁR	a‰P¬ À  `@&àKC báSV "ÌH
np &,(cx†
R˜î ö…ÁFtF"¤ä«FÀÃ+¢X˜¡ÅÈèñ`JM¤IP@å.2¨¡fy<N ?)`Ú¢	¥f íÙĞ A6ˆ ÃÀ D†è!E8K³O$ %@Ä'h†t<‚Wø @ªB(@fP¢$ƒ#‘•š˜¸
#%
¹‘ĞŒ:€B
ŠHÄaA‚@ƒŒ`Â Pñp.	l$ŒŠ“hBN’€|Z"(e€‘+`   ŒÍN(½ @!¢¡Âl.TÀ4à ". ¹& ¬¡J"°‘Qß	Üo¨Ôe‚NpÈ@‡"¸`T\ÊÀ@(Nz@ÀYTøE`JåD
~—b6È9$6ÀOŠˆM¡„®o\Ä 2ò²ØÑ(EÀÁ°=º6Ø)PR+$¨H” Š`A! FF(³5+[¨UÍAÀ}‹QMYCô6z0P¨¥ÖŸU8Ä#-àÓ0m€%@
ÅWÈ&öœ> ¥fcX@ğ¿0!°@Én•@Ì  ˆ P`ğ@A‡â €„@8¹`Pˆ€@YÒaA I«ĞÊƒ¢Q†PL¤J¨	 ÄÁAàA" 5 * ”):  L@¤ĞÃ5H•Ğ€ˆ1€Š€(ª
²@¨@Ğ( @Q€b| L†$TVxÀ’0Ãà’Ô(ŒšA‡ 
  !!:€dš¢±@UÀ	j	1 7 ±6Uj	. °EA0À‚é "!¤Cò=¼h1b‰D\4gè	b+äBB 2²$¡„¾íƒA¢5(@:×¦ ÌÌ$$´4K ˆ Ì
ä@T$
@D&F†`ÅĞj#"±Fâ\!fD$ ` )ÔE`À¡ìÀ@B°¨",ƒJ8Q @*@d­B)<"@ h‹-@d AÒô¡"^#d€ÀÊf(¢ ^a©B 4]ôa€2”° ‚E8
A…@T	pp
)¸Èêp&rÁ ÒB 1ÛAPÂD-g
 +£|€	åFb	 EŒ
1LâˆË‘+YSáˆ À)ŠB‚À‚	ˆ0¯0Ç" AS€ˆ" @6Bœ
q—@PQ  F¼`Äb%„JÑ‚¥jNBƒê€¤Áà€ªÅ“Ag€ö8Kx‚âx90E Xˆ ÀPsÑ›˜t%+@%°"„eãåø9 C‚‘'.D MÆ / #X¤€FäÆ ˆÑãš`Ê„ÌTk”EHA1P Ù"  ƒØ  ¤æˆ@À! Ap("f Î D]B !	6€@°´
`d`‡ˆÁ(` 0 €	B…4Ê¥„"8B ‘ˆ 
#ÊBà-® ƒà©@=€"#’bà„5l):Š Y€TAP,±4Â0	ÁŠ’ÀĞè$JôÌê!	È‘`ˆUâ€„ÆRù0 Ï iZn@ğb	áhÌs0ÔÁÉv0€2 ,ƒ’ñÑÊ6‚çÜBĞM( bvlQ_'I&.¡ `3Ùæ@’"2ª'6	@ÌAbmx9"Î"Ác<
	Z_Ç‘Ú(#Ò€¢D£PˆŠ–t'88‘ÁLM2â:šfĞE¡	$"ñ†ƒT‰o,ŒJ!#«ƒBH… ˆrÌHNŸ0p†,Ïày\4é$–Z DˆÀO˜ Ğ‚_¡!:0…Geğ ¨!y!À&$´!¡ˆ`bÈÒ€Te I|a¢ÄÃ7 Pu
À„
ã#€DŒà" Î"dâ@‚À‘ T¬, [~	¸€]	#˜ Ä$@‹@06€`¬pŒBå¤E)/·p Â&;Œt ²˜a@C(' "ÖR—d $pú E(#bdÄ´Îµà"yªP ZC€ˆ<ó$s3Y(Ï*Ÿ3@è¥€VÒáA Å   s„Fh+qä‰U’€@r@!›ÊA” ö‚ (*$° €'À„¬âAd„<#À©p‚„ÀÑ¢€ t„	`.”"BA²e¬’‘ A@—´f&@  àÎNfÅD<ÁòŒÜˆ2—	2À’H	A…%80	"P	–ƒÄ
 TÖU58„ Ğ$@0®Q\‘ À$/¶ ÍÀ€8$	p…€!¬ ØB-‰°ÄĞÈ 8M] D"eZH	á°”#$>©@‚¨ Š€
3 »B ;	 
 ÀÍpñ 	L§p8
­ÄQ € †T@‰àh‚@š 4’Àp,`¸ôA'*@ ¯$[`Q ‚ *0ÁBâ @ €"Œá…È5 	R‰ 8 2œ 	A@ Æ
ÑBàf"2  bD#ÌÁH+AÁæ!	PA€ 
à €PPNÑ$ S 0;B  (Dâ…äPÁ®ˆ¸¼$VÖ‘‚0°eASù¢€!ààŒ +¡`”d4
„ 
Bp³Xij43È¼<Nà¨åh•„ ŠD ‘@‰ ÂŒ‚]iğ D  @’‘Àd£$ (.TÑÈ ¹-ø‡AO¥!-›âQ‹“VFôa S@"*	l°, —5B£Æ$‡ ¢*SÃ&•#<ÓRŠº’R$ 4Ø‰£  @Ì:ˆ $F`$$0F	pÒí4C<$ J¢!$±€Ğd+ÁĞ#	á MJz·Tt€ *“œÒš¨BëGÀ!j1‰³j{à‚†¡$!KÎ$pó›+àtÃ¡B*@SqEQ7’S"á- (ø=!†P-† °ÆH,AB .7`T)   ø€H#’¼„8iE@À0@”P |P%@PD8  I³áeœ À0ˆ¤bnBÕ@ ƒ²Á« BÈL0P’¦a$°0Ò(HÕÉ"QC€	X&Œ€@‘@”.H ‹! 0³€`
´Áôàb‚ €á,`¦Ö¼}5> 2¬Á¨BÈÖYÂDR.5$Æ2ŒĞ-'5ö´#È„Ç;!ğEX	FÍ ?À€pƒ¨S,­%hûš‚
0À³ ˆaF©@‘€²"ƒG€- A  †hŠjÊt¥ 9À‘à
¬ƒ˜3ÑL‚Ô+Â* ²8!Ğ` ’x@#S  È
€¨š ‡*‡Œ%–@Â>	¥@& ÀB¤P+p`84TèG¨ÁNÁI Ò*Œ v”¢‡&$ç,®b¨¤JB UvF®‹ÊY$^bB€(‡‚Ô:2 ÁP@ `+L$²2@”\U›(   Š H Ò AAT³ "h $&MÈt+æ¥`@a.  €©@MA€¤4  À=€¤¨À( ¡4³X
#ƒ@Bi`•@ UÉ¯Â  € ®dD0€À1àƒ™ É	<H²!¨¢¡ÀF."² @  HhÂf0 ¥€WGÇ¢(g2@Â )CÅ ˜x„D³B@LŒ@Îœ+@éI MÿD BC$Âšh% Â ¡UDb€@%DÓ\Æw$HP(bL6E,È@ƒAP˜=`Q(n@Æ€\'T”ˆDb	D/D"q6‹üH@D[´ L¢†¹6gœâ ÄC1	 `$¢@èT&L`HÔà1’Õ! PK¤ØQE$P«M ’ÃB:‰!BP£4"[àSˆ…,„À…(#K¤€ ±1´7Xm™0@H‡¢d Ğ˜ˆ”+E²Ğ«ºƒpy=;1ãy0P 	«@jf4hdÁVZ0HÑ3!Q8ÄI0€hbE2D. ‚Â„¢E¶"&!q:)‡Æ!–@*•I2 f¡  €P
ØóA%Äuî'È	d ”Å“PA@h 2ôP 
A€S`²	  ÃPTÈqc@¨Bd 4ÑÃ’ğÉ£õ ƒ„$B“$Dô@æÒ0™êÆB"ˆFhWe, ÂDH ¥F‘„)€€™	Œ%) /Š-€ 9–„@EH(  @’À!xš 09X¨À DV%dûï/¬g<¦·õ­‘øåwïİÍ»ô¯ÒökOÿŠÏ?æ÷ï™¿ªÕRèÙyÛÌ¸ı‘Ş¯—Òşÿºº³\ÛıÎõÙùéæ{ÏÕõ&‰YY&¸ãNíıîlÏ'z=¼çé‡ã<«İo«õ/^^)ïşõ{Rê¹ÁÖşÍ<óZÇ~oİ‹(; #‡@ÂY( İX€HŒU *ˆ‘{
  u4Br@Ï†@$°‘‘>g÷EÄÈB—ªSSì5cIK&3= 
Ã€„µÆ_4FA¸’Ò­pLñŒL–P‘UˆÀ$ r²0ûê:@"ó5H"(”a@N!F‚BĞP@ !	H© p¢@"ºP åPQ¤Ğ,,2œœîNL!˜Á8&È+°Hf‘‚1mR‡á'€Ã #.„ò\{;åâˆ 5@o†Ê$D :&$¥¥(	ùÃHG­æJñNàIC$ÓhnT÷y¾ªÿı×íü¿çÿçwÒ>÷Ì¿zçüûãÿ÷)¶óò«Æğßö««õ3ı¾¶
—9ûÚÆ?7lïÿ¿ÚÿËtn^ùìÚßÿ®äÊïÿ~¶ë»¸Ûh÷â©yû8òìü¿s3ÃŞÏCóLk‹_£ùñû¢éà6î_õhÔÿ¸¾­Â*n4N0ä@`^aSrã%!XA‘ñPp¥ ë¢¸¥WŠÕ P&*‘d´I„Ä°î n à`r`ÌE$Ud†	ÌO*Ïœ€€ £1 fßDï‘’‚„H  1Pcp€U*á€)1C€päFa"2?êı;Î?ùÏ»§ö¦ıËKÏï™×¹ÔàeöìbjºVîwV¿Kÿ¿ıÚ©¹~×ÜúİíšÖèñÜ¹z÷×>_±—SZ·;ù{±/sñìÿ“oÃO?ŸÏûúşëäks§¯Îóÿ­»êßnwÿóñ«ëısŞßüŞŞ½¯'Wø9B÷Ùîï«õúÜ?P÷µŞåÜİß—(q¥Ñ{|¤Î×şÅÿN¿x—ñ¥½_Iî:“úSÇFEëêüšéŞ«ÚØyÕß÷/õöê]«gŞ™×ÙïÙ­FeËı–¯_½ügéü®^ßïïÕö÷ë|µóöÂå½õ¯l‹ı?Úı9F÷¤ß¢jè!‘¤Ğ­&?›¹Š&4QäXF1D«K}wËo‚¥·uŸ¥J†ÑCÀSdKÇF	Ñ ¨Ÿ B:[	"®ØƒÌ"‰°%
.0Úv€R
ĞM‚¦ÁH±+aq4Í6*B„)L‰äR@¢ş(WşùGÔ÷¬õö¿ÃøÊ×¶Şéó¼ªß4]7ó¦çW_çıÑëì¹ôÙwk{ı/!ëâø»™~ºî»îÎ·ùü6³2n¯æ{ÿŸ}'Á¸^Ô³İı{qhß‰ßá|´ÃïW?ÏŞ¿t×ÿ…¿Íê¿çoÚî;Ó´·½KùîSÿw¿Ö ¢şf`ø²ª…Ñ`) ¢ˆHÑ¶¡ôBC*@‘ÛKe‰Æİ€3ª@€EĞ`bªÄç°
õ%!„×eB%¡Aí A®  aË¬'4ˆs!CÄ" BàÄALL §&2Dl¨ˆ’ærH! $”à5òˆ!	õS d r±SBç®bB¨P…  ¨ä1 *!EÆ 
‚Xfa1@Pƒ¢3)ÔDÂSŠGzBl@É°l¡ ˜Ø3@j¡$“Š]€0f8)w‚  mAr0³Ó0!è Â( 1Ø¯÷ûŞEşx·S&ûÅwpQwùpºßÿ{_rıôn/?7|²sA®õÍÈÿWâÿ÷Çù»£¿<ÿo8¹Y¬[+nîo‚Şï™¼=bv÷Û÷gK/Z'÷/tõ=¹ÄòÜ÷öù/ıo†ÊŸ±Ë¯µİ{ú².ØŞ¤ı}½İ÷¿Ë¾]H
“ã™‚†Ü}E%£JV%ÙV(ÃÄ¸!4àCÀb]2r°ÉI
€JT€Tóà¡¬€ü<*P"W"5G’DÄä­N^Cƒ€ãTƒà@ğT@h¨0›,œp‚ b9€„®ìĞƒÚ†Â2€œ †A ÷³mŞ“èªûuÃÿ<zşÿÚ¿×jÉí²ëÿÆÆ[eçÿ÷v9ÍCöœê~ó5ùÂ'³ë?ÜÿhÉçşÿ?ú›{»ãqÛLå®ÉÓõ‡oßÛËßx÷şÿ÷wÎÿ½×G[¤ãÿ¾îúİ ÷†l<¸ÿaü‹ü ›]ßÅıwöqûøsÿœÏõµÏ~ìÛ÷Sç5ÿş¼Ğ·Ov¿î½VÍÿûœ—«åß¢)ú¾ù§Õ×ÛÑ¾nêÿwç¿µO!ö?Ãe—ß¨»¾÷Á{JSÿ÷ÿ¿S/ãO“÷œ÷öõş×ËÎ Ù§ï½·îŒ­oËışŞû>†Ç½?·¥=şÂË2»;4İWŸw‰XşÓûå¿¼{{~kÈÌZÀãr‘ÂY DC¢¼Là–€äÀ  $,dU8bf'  Ã’mFô	Æp+à-ÑÅé­oww¨„&”Ø F«² Œ(lzˆ'Bæ%ìo“Jğ!$D°ÉÜ ÷Š@ˆ`! '’0>ÅrÛÕßïwfó}ÕßÏ¯şî=dúË9Ño|¾
u“_¯é·öşeöÁ¹ÿşá}‡¿…Ï÷ÿó/ŸŸïã¹Kïk¾¯¥½ÿ(ã~¿­÷öÃ}ê×ÿşî‡3ïÿ:mÿûÎ[Õÿ›3Nßá«›öwiïş_sf?{.6çïÓ{æÒÎï·õÚuÌ=+A° €î•ª@›šŠŒ¢„!Œä@5¤‡ ñ@‡ˆ ÓbUéACV×ÈÑ# L’  ˜—@x¢26Y„c- P‚‚†H¨€†ÀÀ0†”˜jW0pé  ƒë)D‘	@(F@'@àÀ¸) `Ä@)è1¢ÌD&MFà“ào`z‹¯€šAñÒ‹KHRf8D*ÅAò)±‚!Œˆò–ÃÒ0VOb2N 	•Ro%a¦L„/åvi'!˜ª ÛŒ¢d$D‚	Ú \K M‰ª;iÚ®årŠ4“Ø-8 í Sğ"­—³Nÿ¿eû_S¿ÏşŸƒW¹ü×¹¿­ºİ’÷r½şÿ^£o¹X‹Ë»
¿àfo·ÿîc3İÿdÇÓNñßOx«~îgcü{Çşõ§wıûÈ#É;õÅÖß)íıõ—¹×Ø§²ü?ÎyÜ7ó÷©Ï÷õëüS1û«ş»îÛ}õÒ·Ş9Ö¯€Tª6ÈY€Thç <‘1˜ÔI@0(y¡h!Ge,Œ T@>¡´b2f†È¯ ¶N$ÅÛÑ0 ´Š‚y©†¦	¯ÓGhARÀ!Z `~¤I
*”£)ÃAbĞÅib±WPš@¡#á„‚3`F˜çı¾tşï÷fÿœ?§©î¯'eïO±ò4äG§R§¿ÿ;{¿súçİ¹7a~Òÿ¿ÿ›AÿôöÚüøŸZÌÓûíÿ}SS},uvºŞs×ñ_åßsƒıïYš×º¿İù^WaŞş¶¼?mï—xñ½Ïçï_ï÷ùİ_ïß™Ò“÷¿½»|§×oßKcşòÛ{jı ıûÖæ“¬®ïÿö÷Š{ô?çtïqÚû7ş÷wx7sûò×õùê³u·ïŞô™ÿÜõÈßØ¦ŸÃİeúşSË5”—;nÿóú¬©qwömÎ]óuöWoeËÿ¶Û{gîç÷ôÿlÍ›—û[ùâ*ÿıòË'ïùåşgö2@WHƒ±É4pWUQN=" ¹¡‰h ´Á‚T€Xê „ä<@dE¤"0’ÍĞ€év À·0‹AÀLÒ˜ˆ(<
@ ¢†t(ÀŒ*$üÅ…ò€:9A¿ ö0¨!EQ°fâ4¶IVëûmmÿ÷y»=ûô_ç—\Ş+ùÑõV	ŠÏÏÿ½}›°k»ñ}Ê]j-ÚŠm_õ¡¾Ûÿ¸ºÑŸg¿ğÍezÜİşìz7İÏ¬ÆëÜè÷W¬o%õ:Ú_Û} )ûùû]şï­çëgXoëG{5ï|Sıó7töÿ›m©şu·Emëğÿ9|" u”®;\‡œ¬ø¦@LÅYµm™,@X8Â¡$‰qå IaÓÍJ®İF)¤“(‹.@JK& $ $ # ]‚4–ñ%ƒ’†Ã«+] !ÁÂ É‡ØtSeÈuª‘c‰4&ŸP’€`‡¶À:8P½
€
4
’$¸	zFàãAX–†"ôC@)úÔÓQ§† 2@rq’Šæ
 õĞ
Ğ6$l·†â8ƒ •9‘%Ú[‡™h‹€9b& 0-€@"%æK–´AfX®dJPL!@ñZ=E4ö6´#Ø›áˆ ™z£¾öşsÎú·‚÷cõªİ½½´óï‰øÕ;Üıãÿ[¸ú{©é<Ş_ÏíkíÎ±û{CWï;ßƒúíëÿıß÷¯»k™NÿY·õiıGüÖì~ûØgjİşú^×w×æÿ_+ßÏYx§ÙôàÃòNÇ×÷+ÿ2Ø6íø’u¬¯\ü÷·øîæùı?0Ä€ÒŸ¡CÔƒ("˜¸H%6O€l—oğ fA`x:ÆRº5ğÂ€=dCAÆVkMJÂ¬ºen2Páqs ˆg†ˆ‰ğ„b”\Í$!§°‡â¤äkÀ€ ¦Ô7Ä2…¶mˆ^"Dı"Bc¤˜Ô·'Šlfoİo™÷-aˆİ÷½=ûõiµ¯¿¾ÿØÿévÙW^·ıí>~ùØõ‡î_µÛÿÚ=šUş™çg®ıãÛ;åïA?ßÍ…+WüÙo»}ëóòû\Ö¿®—çñL3íë•Òß;ú;ïR[øE¼+gÌ2—}UOÿüø?ÕøŠÏoãş»é¿O›{óŠg}qğû}ÏïØÒmöùëî[?ûŞí½U—åoïg­/óç­ó¶{ßÍÿŸölãğî›_¾óÎ¢~_ÿ?÷×i½ÿ´ïã÷µÎ^{ôş®Üõ;ùœyk÷.É®zMwçµQëæçİËâîÿÃ¿ıÎçáàoôèş£ª¨—u¦aG€Â5­‘,ˆy aÈ@B„€ŒqF#ë>ª˜PS<áj@Ìz€µU
ğ Q ŒX`dÁhoO/%Æ–ÆI¬r$È"!»Ğ©\t‚OB¦ÃhDjÒÒôe\°t,F,€Å )J
          // Find position of parent of the same type
          pos = stack.length;
          while (pos--) {
            if (stack[pos].name === name) {
              break;
            }
          }

          // Found parent
          if (pos >= 0) {
            // Close all the open elements
            for (i = stack.length - 1; i >= pos; i--) {
              name = stack[i];

              if (name.valid) {
                self.end(name.name);
              }
            }

            // Remove the open elements from the stack
            stack.length = pos;
          }
        }

        function parseAttribute(match, name, value, val2, val3) {
          var attrRule, i, trimRegExp = /[\s\u0000-\u001F]+/g;

          name = name.toLowerCase();
          value = name in fillAttrsMap ? name : decode(value || val2 || val3 || ''); // Handle boolean attribute than value attribute

          // Validate name and value pass through all data- attributes
          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {
            attrRule = validAttributesMap[name];

            // Find rule by pattern matching
            if (!attrRule && validAttributePatterns) {
              i = validAttributePatterns.length;
              while (i--) {
                attrRule = validAttributePatterns[i];
                if (attrRule.pattern.test(name)) {
                  break;
                }
              }

              // No rule matched
              if (i === -1) {
                attrRule = null;
              }
            }

            // No attribute rule found
            if (!attrRule) {
              return;
            }

            // Validate value
            if (attrRule.validValues && !(value in attrRule.validValues)) {
              return;
            }
          }

          // Block any javascript: urls or non image data uris
          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {
            var uri = value.replace(trimRegExp, '');

            try {
              // Might throw malformed URI sequence
              uri = decodeURIComponent(uri);
            } catch (ex) {
              // Fallback to non UTF-8 decoder
              uri = unescape(uri);
            }

            if (scriptUriRegExp.test(uri)) {
              return;
            }

            if (!settings.allow_html_data_urls && dataUriRegExp.test(uri) && !/^data:image\//i.test(uri)) {
              return;
            }
          }

          // Block data or event attributes on elements marked as internal
          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {
            return;
          }

          // Add attribute to list and map
          attrList.map[name] = value;
          attrList.push({
            name: name,
            value: value
          });
        }

        // Precompile RegExps and map objects
        tokenRegExp = new RegExp('<(?:' +
          '(?:!--([\\w\\W]*?)-->)|' + // Comment
          '(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|' + // CDATA
          '(?:!DOCTYPE([\\w\\W]*?)>)|' + // DOCTYPE
          '(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|' + // PI
          '(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|' + // End element
          '(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\\/|\\s+)>)' + // Start element
          ')', 'g');

        attrRegExp = /([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;

        // Setup lookup tables for empty elements and boolean attributes
        shortEndedElements = schema.getShortEndedElements();
        selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();
        fillAttrsMap = schema.getBoolAttrs();
        validate = settings.validate;
        removeInternalElements = settings.remove_internals;
        fixSelfClosing = settings.fix_self_closing;
        specialElements = schema.getSpecialElements();
        processHtml = html + '>';

        while ((matches = tokenRegExp.exec(processHtml))) { // Adds and extra '>' to keep regexps from doing catastrofic backtracking on malformed html
          // Text
          if (index < matches.index) {
            self.text(decode(html.substr(index, matches.index - index)));
          }

          if ((value = matches[6])) { // End element
            value = value.toLowerCase();

            // IE will add a ":" in front of elements it doesn't understand like custom elements or HTML5 elements
            if (value.charAt(0) === ':') {
              value = value.substr(1);
            }

            processEndTag(value);
          } else if ((value = matches[7])) { // Start element
            // Did we consume the extra character then treat it as text
            // This handles the case with html like this: "text a<b text"
            if (matches.index + matches[0].length > html.length) {
              self.text(decode(html.substr(matches.index)));
              index = matches.index + matches[0].length;
              continue;
            }

            value = value.toLowerCase();

            // IE will add a ":" in front of elements it doesn't understand like custom elements or HTML5 elements
            if (value.charAt(0) === ':') {
              value = value.substr(1);
            }

            isShortEnded = value in shortEndedElements;

            // Is self closing tag for example an <li> after an open <li>
            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {
              processEndTag(value);
            }

            // Validate element
            if (!validate || (elementRule = schema.getElementRule(value))) {
              isValidElement = true;

              // Grab attributes map and patters when validation is enabled
              if (validate) {
                validAttributesMap = elementRule.attributes;
                validAttributePatterns = elementRule.attributePatterns;
              }

              // Parse attributes
              if ((attribsValue = matches[8])) {
                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1; // Check if the element is an internal element

                // If the element has internal attributes then remove it if we are told to do so
                if (isInternalElement && removeInternalElements) {
                  isValidElement = false;
                }

                attrList = [];
                attrList.map = {};

                attribsValue.replace(attrRegExp, parseAttribute);
              } else {
                attrList = [];
                attrList.map = {};
              }

              // Process attributes if validation is enabled
              if (validate && !isInternalElement) {
                attributesRequired = elementRule.attributesRequired;
                attributesDefault = elementRule.attributesDefault;
                attributesForced = elementRule.attributesForced;
                anyAttributesRequired = elementRule.removeEmptyAttrs;

                // Check if any attribute exists
                if (anyAttributesRequired && !attrList.length) {
                  isValidElement = false;
                }

                // Handle forced attributes
                if (attributesForced) {
                  i = attributesForced.length;
                  while (i--) {
                    attr = attributesForced[i];
                    name = attr.name;
                    attrValue = attr.value;

                    if (attrValue === '{$uid}') {
                      attrValue = 'mce_' + idCount++;
                    }

                    attrList.map[name] = attrValue;
                    attrList.push({ name: name, value: attrValue });
                  }
                }

                // Handle default attributes
                if (attributesDefault) {
                  i = attributesDefault.length;
                  while (i--) {
                    attr = attributesDefault[i];
                    name = attr.name;

                    if (!(name in attrList.map)) {
        ¥'b›ª–‚Ò³&
€¿EšddïJ`DSí@¿Ìl!	  @p@ `2—   ˆàE†Â€@R§X P»íJj —$EÂ œHÄüóˆ‘¥†PÒJ@l(¦È©ÂacO4¢!@íLK8)ÀÏİLKBŠT0@$Íc""°kÌ€ÆQ	 BKbaID0„°Ââè$ «FP(xA h&Ñ@ 
š (€A,ğàfPp@‘û‰ ¡‡ ”Eu0D ª ¬€DY.ğ¢@ ›ô(•ÉïB- xQ‰A  „	A¦€V S€Jd3A8U*€€ACn‚ÆˆŸ‚cÔÈ 5˜hº6-+ XPšh(‡ƒ8‚D¶5ho©D-ò$„6¢[ˆr)M!\`AT	HMâdŒKA"D<0Ã¤
bH^€	„€wÔÑ–ƒo@aã¤‰$‰òóÁŒ°"„˜À>‚ê^¢ 	@‚0â0 Ä 3
 Ì”€ÈÅL…D#
Õ"9	'î
„"‡ÜMœíù&fî$ˆ€ã­# M…c‹àÙNb„Î ˆC+6´£ ” Š+æ¥ì99“Ø±#ÖBGŠ@  /HH ‚Z
‹*²Q’¤Å`0$t @p ±,*ˆ NPh6P”H„ä@PaX©°ÁÙ2C"0(   „E  
d ­3£’@|¢B2 >L"‰ª Ğ(Á@ É€	DM¤ $|G"O¤TÅÌHÄ<XŠ²%¬%?¨F”I!òÈ¤D:GCÍc„AÚñ€¼Áˆ Æ$F $‹Ü&ƒb°Ğš
7LDx!Êæ `_2„#
 I€"Â
 ”P  ¹rB†ÚŸ‚zg”’<È`""½¨ ¥DC!ˆu ÖÄB-€›q¼d@æŒ@
eB¥4‘4BşH[=ê0Ğ€@e < 6v°RDÀE	ÔÑ!8‘UD€[Ğ™b$„3ĞfOC LLRä˜’ò.¤!@–À2H$	DáS_„‚Ü&8Å £‰hT0"ŠVxX0€\O!J<ˆB„Å1@	@BBD *ğ	Ô 	 € (+:¸ÀED!~4ÂrJ€„ÁD°1„b¨  ! DÚ0€9lĞ}Dµ!pQ0`‘`AR0Ãğ%i– 3ÏKªfŠ‚ˆ °  ,ƒ Ğ„Ë‚ ã1 ĞşÈŠH2„F×QÀ@¶´„(£<€I¢ŠDGvÂBÀÙî!%Ú&šÇp6Ë³"äa  !Ú@Fè P]ùL(DÕ¨ª@“˜ H…Â!ÀdPŠB0Ê€bY
1FÔŞ0 §1 !p ˜<MJ$’“F¨Ó
À°£Hà ÀŒ(á,È”¨şˆ©dP¡°*  …‘‚àæŸ<3+ }v² ‚Ä¡Œ
cP`ëHÔÁf`jt" DÀëLAbDT 
*¢ŒÀ„u¼  E¢L9HÂ`  4¸Œ€Q(4M* ¨H\ ¸\ ˆí:K¨@ÒIÄœ@0à€¸0J•I"1™	€ $‚€aˆ™€“l ’Ğ4&V ¸h%M$•*s	÷ä5% ¦PÊŠ&17
$ÚËyXyû„#v/`A…&–ŞÀ¤ Ë“ì˜0ah‹¾Eˆ¡Õ)È Ğ%$08&p ™¡=i ,Ñ ‹G™1Fhˆ‚n@ˆ	7>H£„buµ 8 Ì ’“X À«Ğ• DG0 À É HHˆ†‚™Â» 
Ğ  ³ƒ F(¶("”ÀĞ#ˆ¹$HaDR|`l(±¨ ˜9CÊ Å €v,#”NRj
@°^£@‹€@‡!(á	@‰aH"‹‚¨@"Óóç%ÀâRÀf‘…ëĞ	ÈC4BˆâL.RÁ€&Â*%Îÿ% & P.
ZGüRFD2&”°ª©ëÚ¯XC T	ª£½İÒ… dd Bšz"Xø@(Ë×(XòX°ój°5  e‚P¯Âêà(§n‘Ğ€"±LI’   @@’C ˆˆÂˆ Áä¸–Ì¨¡0( %¥¨'ZÄAÒ¤
%è©ƒ Ed€×@,!*L HKêz—#ÂøŒ¤ÆÒàà3h^h¤`ÈË\ŒD0 ÀºA)””Á„Á7 Ë „€”xZ0Ú(	™‚  (5„@P@FÀ ØÀl0&&„ˆè-ÄeM ¨¡à$†(T"h²€r@ÑœÔ$±¤W´ÎD$Ñ%¢¢ ……Z,RR‘Q"0¦:„t"˜Zğ,ô#Ûâ5@sÆŠ D4 ± ÀAbH †™¡bŞFkd„²	ÖX†ÖˆÓ˜÷@b ó+JTT]€²%¥&Â‡D2»hZ´	‚‰aD=)‡0X {4 ĞTdf¡ª01S,	„H2¼% 5bd• A4   
†Ã.D$O©` [(@]‰CÃ0`0B   ’—X[Î€…rJ	 ‡¨à±dB8Z¨ AD°Ì@(Q‹p€‰j8Ä S‡Éˆ8D1™0hÈ  @ª`pÊ@€@y€ €H c"l@ ª€C„±Œ+C Tb¶v"™Àj ­J€É!p„&¹.Úä† : ˜ €*10?v"`pA@ PÈÉ"PÇĞ8!Š  9 éaˆJt PLJô¬¯º3=Ñs%¬‘D2iêŠèGŒ‡"‘#x
ˆĞC! Jğ@Ëm¥‘Ó{º†ÉæKSP“Iœ¡0 (((+bh&Èi´§¨ „¬o²8€š”õfÇ &À5<¥!ÏUBÆŞDˆbSàEB03! P  0
TÀŠàBVQdü”P€`	   †@ÆdQA—(( L *@4
€  ¸A3`aa ©YÂ	/` RBÉ¹„äµ ´€+ƒ“¡¡¤•`›ì@Q E6âHÁa€ƒÚT)("]€€h ÁíP£ÇKd	  Q D|Ò(ÁŞÙepD°7àX@â)‰È(eo
èP´@²˜ T22€FÜ3FáÄ`
†Ç3DÀb–wZğ‘¸E HB €g€"&h¡ÜG0VlQª:ãL@…j†£Ñ•JU@z$-æz#E *á""^š…`
C™C0#që ”‚Ø F ù;Ü ’  ¬­Pjˆ‚M¤’­„$µ  °†.Ê$P ”MƒÀ@ ±E“0#ó!QÎÂĞ Ó25\ĞyVá)0â€@ƒ…c-Ø ´A±•!$@@AQÂ €#Ø#`”êÈá¶ƒfi?Ü¶û   1Q½¢  MlT €0”  àà})u&II" è*a.àSD@-8‰©,Ğ”áA„ä@ª%¸„ #&X ` 1DWÀq"äa@K è‰ŠáÜ¿ WÔÅ$P
C ¡ÄôD‚ +ˆsÚIF%‡bé_MÜàŸ[ÏÀàB¤ÄP’„šÀ´œA‹ˆeĞÙC€‚1  €ƒD2¦b{ƒÍˆ!"'n @…'C D‘4k(a½@ˆ¢àR–cF $ \R0ˆ~=€0P$(Ğ‚
†BÀŠS‘I ¡I€© ¦ ¢C ø°i£9Æ<˜!ˆ @Ê#	 3Ì4
ªMDS 
b—&h%èP‡rsø…XH0/  JBHôÍÀ]D( Œ	¡EAR:\L)E#–ğJ*B—#å|DBB\!#)€Xhõ@Ø00¶Xº!Ç<L @ÃŒ$0†, 0RÜ‚HÖ`Éƒdè‘(ïÔ(0<ĞãjÈA@<Uk
BS!ˆ°IÈb @ŠxF ^Xâ©qÒR¨Äéæ|k€	J<pâ"qU©‘”LEG`‹ ’@Qi¼ '“pú)Í `A0*f[‰ö —P*°äÃÄÌ‘!D©¡–&ğ¯Ñ!3P ¤ á'Ë‚):Aá! RtğI yO\Åa C8€444mABÆ¡D“Ğ F		…N$F4!"„ŠD$HF]  0Ä [(X@— Cù…Ñ°)È3å .vIA€UDG P‰ˆÄ¼†„*À‡"A ¤Å¢‰D‘E˜$ÀÍĞ†3¬€è)0š A&†œ hˆ Ñ –`Ø_^]H¢ö Õ `ˆˆÈAI„ÅDaÀ„B¢!RÉ
S01 ¤a”Hœ,^€A#”b•ÀA°C4hRúÈÃ,#á0€ä)à	&Wå6jÎqh’VD–
¡–E¼Z¥¤¦@]°p‡Aa9‚§& —‚â‰Ád¹†„ÂváC9@’Ü vqj¢#äÙQ$ğÈùz¤ °‚w	H±ƒ !Gõ*\@GÃHÀ~€'…€ùvF¹Ã@Ë06‘0Ô†€4›‚¬b AiP#À–T*É°l"„ƒ£C°¨@ &0&@0	¦¦ 6Ñ#t Ñ¡†V ‚-	¸@ ;”âÎÄn’" ¦ Fe chTÒ ˆp„T Œ ^B8ˆ‰ UŒ‘ˆ.QA!›;²¥F¡$$e ™h (V.K°ÖİÍTqæ;wıçRüßqßRîß}¿Ùôwßíï|Ğ÷¯ óViÿõù¾³Ù{ÙµûûÑqzzx^¶¹ŸŸşúë–ÿÿùB¿Ïé—~Å–¿ıïŞ~>ö'°ØÎNÏw~-öüß|ú.s™_ocÇs÷õ¿Ûé®Œ×İOÙh¯çöCÚ-sù:Ä‰q²PGƒRª2HE $!Š`Œ	Í´9=)L@ÉŠD0¡D” ŠÁ(q$ (2Š $ ©EÌ/ Z¢l’	#“ë–!«`xº4 º	2K™HšÉ,"ä„i#ï*P¦Z°p	¨8$(Ct€ D((JŸ"l;ø‚‘ H§t‚6jH$=(É‰Rh  KDc#a ô8ª„N4@.D$4œ62H Í NmP€¢£S¯¨ he* P  H 0nŒĞ ™ÄR |à„-Q0!\äh'›ˆñ2lotÁùfµ‘Ëõ/ÓÔ­˜‹>¶Ö{öZ¿k_úÒâœëÿ‚´×ïºï:Ó÷b§OõúµéS~æãÿOh×û»RÏÿ¿}÷}ôînÿıÑ;şıŸ}Vø.­¶½Ãg3w5Eöß#ÑooÒú}ß¯‹İàüÚÖÛeEm¦¾;«ešö}o•K, âÅ !f €9 ÒH[…h	#•„"EPÁ  ˆ0Æ!4ÏPVàM„½G†ˆ2*”@ædŒ+˜DPªÄ.
tTJà´˜tÜÚÈ9Ô€`PP a JØ	ä€…@ P&<‰ÀY:=4Ä‘P¨5¾Ôÿ6VcGn>öïÄÿ­“Á_w?é{ngT·×öRü«óó¿yçø›×~óûe¾Ññü¾‘Or«ğ¿»p5nÏß°síı\«gŞîÏlÖ“27Ş™İõºøø®ÇÚíÿº»m}İİ÷û®nş{Zº7÷ıóıyËÎnYË+Ößß™Ìë±?úÛm—•Ó»Åã>Ïÿã^|¿æÇrÛÿÛÓù.ÿÿÜ_÷?x	Ö6è;şD¾¿ŞGÜ¹İŸæ}~ûÿ_ğúß}î÷°› ×O~Íİ}ôŸe¿ÿ.íÔ¾ÊïÃşx]¶6ng¯Ì_ömëõ¿Ô”ÿ½ÿwÃ7^ëï?³ÿüxcdX¨„p |‚¢gºÒ!¨t´ÂMäØ	 ¡c[® 	XBXĞ ÀP ;Lf¸@'A`GˆM"¤e1‚ƒÔY+$‚(È`YÀĞ+1]Y"À	
Ğ4Bnà€  4E°4‘bÂ€	,\×@+(_ïeü.ÿ_Üzş?ñäg¿Zærxß÷õìO_·÷-¿³Ø¯×én÷ÛÕ;£ßzÉÿ{5Ÿw­·û;ûî}µÓŞÙê»÷ÃÕûg.ŸøîØb¿Ìß~<E'ñ3ûİÏßö•¯—@ğ÷ø¸…¶g.­í5Ã•ã§¶§÷¼Ò½ä6îWû·ÿ¡tA¨ QF%P¦Š”C Ú@f†•tAf
/‰$ÀA¤Çâ±£Zb40T¬>Èp r„@‘*AT Å€ !q8!°LàCÖUÎ „ ÃqšD’€2(Ic0`”Y / ®°š h/2TÉƒ¡ XÑdÂ@Î¡`Iî À%•PP² DYa¡@X AlëUhŠ03Ø„@&ƒÀ˜HÛ%”C˜ÀÚ @ r,bæf"Â¤ Õ(L€@„¢€ à3 a9 ( Ù¢ Bí×KTcw"¿ô¾úµ{Ò%¶›gÅ~Bv„·ÿo¼ÿ¶ó•v§–³Öuÿ¶öÿ›o<O÷¸v/çy®ú·wïúû‹Ä¾ÿ×ŒïÎ¾æıÿÇwN)õí~şş´®÷Ÿs¾ŸóO¹jjÿ›‰÷úLı¬•oµ_]¾øİşréõ~¾å¤y¿æWşD€ËD€H‚‘(2&p†‚áp)‹! X(JàD4F§€(&
Á&4!L@’"
 E$‰¸¨`¸B,2Œ&ÈP@##Q1d ¯(D‰5(†Ä@!Œf0 öKcÀ0B†à	‰ 
“€kT©ó½bãØ/•÷•¾qßİf
w2íí
zÈúÕk¹×¯ß=ä»vºâ¿¿íŠò±˜ÿÿªæ{óÁı£\«ï¾œ¯YÓ¹gé·Íãy¯g¿#æùïSú«Ù?óßÿ¿Ş·Îßùç§ëWßÿœÛ¼ôuoî]áuìrëÃcÿ1½WıòTfå[İ¨…é®çúßèœÍš—öÿ8ñ¾öá—öİ³=O?ÊØ3íı–>Ø^øëŞMÿï”GuÃÖşª·ê?±f†Î½¦î§ï{uÆL£kGËïş=öG_GWUWt}ßÇòGîÿ|ùcú·?gÚÿ•Â×¶Oú~WıöÖKño´ïm4³Î@ e 8Æ’„T«€@ú`y:
â2€6a$
!Ma‚‚ŠA ¨ DH	/,c4 d$ÕARG6Ië“HÇÀÃLN ¥Ha²}+)1-€ğˆ1z°‰#À‘‰H€%i‚Ù0³Á Ã)¾S>ÜñoÒ£½¯ïú²=7Msˆoíşf·¿öØocÑ¸OıUWÙê×¿[û¸-ŸLßôG”1Gv„·¾i;Ë?)]3ßÿ{o-·ÄOÏŞşSÃû»¼ŸS7çRïëìç·}øwııù{¸ÿéËşßò¿ï¾­ßwûUóàÌµ„p(sÁl"° 4E@DÀü
 ƒ@’Q)!ÂBà¢„Ä@ ¡dˆb	@…~§±´$HEU@
‘¬B ÆÂ(g=bB2b¤<˜G åàX9HK±è ‚EÊ ‚
FŒJ ˆ) 0	D@2„ * ¡0 „Ã@’©œJ``†–wi‘Ò‘‚’p á\/`ˆ€($@ €
 «bÀ&`DCPÆKƒ fAb$EA0IS’Tì€Ñ‰@!D1 E!–HT
¬@`áXa1™á ¡ ÿİÇœ~ÿûûßõuVı¶¿XÍm½;]_üuSB××<›æş;š“x^ÿŞıá×öó°ö>íë¾Îÿ2Íçıù¿·¶‚{üó­|şæXk½wÑÌL»vÜ}İ¬n÷ÜRükı/ú¾•ïí…9>ÕU{u¾ogOã;u#¿Ñö$HXæ~(A@(™ a€;„xIx4ÌÈábŠ`AŒú6”‡t š¢"8$1 B€  ˆé0M1",I@(àPšÑ#0HªN0ta2†BŠĞT`€"Ï5<“A Ar8
 0Œ“Ö†p‘”Á•„"i ÁIP€0öÒë"sõºkÿôè®{×_òèw)”ÿµÏ·R×úã÷ÊA¾?Ÿ'^ı4íISínğös÷¾ØÃëÙü',šÒÅæ.‡w,Z}5wÕ¿›îçòl¡œ5ûQôwÏ¥a¿O¹±Şåşİgqât[İ|-ºê¿¼ïÿ3ªÌÔ»yşğ^÷eÿ"ï.øµçÖÿ[Úôcïèƒ{>âß½?ÖçÿÖ·¦ïK ‘12¼‹®<¸t;ï´û£¼°Ü•¾S™n‡Öÿ2ëÙÛ>D0ñ‹õİ}Ù'8¼3íô³ÒGº¿:şºÿûM’çï×ë½t“o|g+ïn£¿ûmIÿ×ßõòûòòJH’4‡WMÉ2K Db„!dŒQ€H ·=doÈtÁ&ehp	Jâ "‡’ĞBCíhÁL M€Ñƒl p‡@ [-­‚ˆ&„K…Ê@pC˜ ed	E!Lb€$t}‘"Ù(Ğ8 ”Á;@}ıÉ_åëZósß¿³y~ÿçÜoÿ¹mgüÇğ#Û¦y¾Ÿ!ÿ,y{ÿÚ%½ïïµ¿üûißÂÿ]£ãoã+»‘rqv^^WÙÙ²uó\õ{Åêo·_-NŞøïõéTı>Ö°ê×sw¾zÚúä·U…÷/‡û¯×ÿºkçı—Şõ›÷Õ–„YLk "ˆ0)„3`VRàˆŒ:F˜ l…´‹:ÓÇgpÜD$ IÈ e†È©ƒÄ!„˜=…
ò™$–%LÃ
h˜¢(ğ È TC– ƒ€d`xÂy´FÅ"@ ”~ àBPeA"¢ \„ d„€ _RG¨1¶ ,”@d€LHB ÊB`k+dŠæ*QÈHâB¡¥6@Í*”‡@ A0(à#Ô€áP°¥b H%N( Êivv@pCaª8P XÓf°Jˆ"*)Ã  ØŒ‡Œ>ˆP&G÷ÿ•¿ûı¥*òıoå¨]ïúö»oîêğ;qeÅF<»=å«DäğJîwñŞvıyq=Î÷²‡ÿÿ¶±J^ïÕ­ïW?wğ¤¨şk»Wÿ¯ÿw_ñŞşÿİÏ>¶¸}O{dÍ¼7/İìÿÎ÷öw÷ÿÅú¶òwã„+s?Î×oËÏ¯õ?Ï6B€´Rá€1 ÄbÄZÚ Ô (®HâA@æ"È‹ZY@,åĞLE§ †ğPD¦€"² YìTD‚ÅÆ  (¦D£ª†ÀÆ¢˜,°Ñ‹qÀA€DpÀ‰!
6šBÙê[P@T  . q¤w  M ¡{#¥wÕï„›íMÍzW"›_ÅÒî,Œ¼>ñ—t”ùÖû^¿çÒ¿çŞ·çõûGÖ/å7W ¸/ıö;¶Wª1î?]‹»ÿè˜W]gé¿ÿá¥î•Y1àüÑ¦ó¯¯¿ÖøïÜøŸ «™ó7÷¿Êv“I[-smùìÖÿÏ«?ÛNı.ı“O{ìkÉ·¤µ…»w—;§Qöéø¿æõ_ëıï¿wµ¿ÿ«½?ÓõÍûúoòn=•K¾&ÿüëÿoŞ”I:õ¡ùü‡<?¼ş7}ßŒ‡{‡¿N¢ºû¸ûüò_Ïóoî~*Æ’LŸx²ç­”nóo:ßç¼ƒËÌ&%ÿİR7&¨D†”!L+¹Â l ˆC‚ñ1j% Ğ¬n
¬€p`´àP j(²´„JÒD 0âG€B€h1p QDaŠAÊs 
!A@G
D=dr@Á´`
PelŒaA¡‚£0 ¦ a@˜Aq         // Start cloning and moving children on the left side of the target node
            for (i = 0; i < parents.length - 1; i++) {
              if (schema.isValidChild(currentNode.name, parents[i].name)) {
                tempNode = self.filterNode(parents[i].clone());
                currentNode.append(tempNode);
              } else {
                tempNode = currentNode;
              }

              for (childNode = parents[i].firstChild; childNode && childNode != parents[i + 1];) {
                nextNode = childNode.next;
                tempNode.append(childNode);
                childNode = nextNode;
              }

              currentNode = tempNode;
            }

            if (!newParent.isEmpty(nonEmptyElements, whitespaceElements)) {
              parent.insert(newParent, parents[0], true);
              parent.insert(node, newParent);
            } else {
              parent.insert(node, parents[0], true);
            }

            // Check if the element is empty by looking through it's contents and special treatment for <p><br /></p>
            parent = parents[0];
            if (parent.isEmpty(nonEmptyElements, whitespaceElements) || hasOnlyChild(parent, 'br')) {
              parent.empty().remove();
            }
          } else if (node.parent) {
            // If it's an LI try to find a UL/OL for it or wrap it
            if (node.name === 'li') {
              sibling = node.prev;
              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {
                sibling.append(node);
                continue;
              }

              sibling = node.next;
              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {
                sibling.insert(node, sibling.firstChild, true);
                continue;
              }

              node.wrap(self.filterNode(new Node('ul', 1)));
              continue;
            }

            // Try wrapping the element in a DIV
            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {
              node.wrap(self.filterNode(new Node('div', 1)));
            } else {
              // We failed wrapping it, then remove or unwrap it
              if (specialElements[node.name]) {
                node.empty().remove();
              } else {
                node.unwrap();
              }
            }
          }
        }
      }

      /**
       * Runs the specified node though the element and attributes filters.
       *
       * @method filterNode
       * @param {tinymce.html.Node} Node the node to run filters on.
       * @return {tinymce.html.Node} The passed in node.
       */
      self.filterNode = function (node) {
        var i, name, list;

        // Run element filters
        if (name in nodeFilters) {
          list = matchedNodes[name];

          if (list) {
            list.push(node);
          } else {
            matchedNodes[name] = [node];
          }
        }

        // Run attribute filters
        i = attributeFilters.length;
        while (i--) {
          name = attributeFilters[i].name;

          if (name in node.attributes.map) {
            list = matchedAttributes[name];

            if (list) {
              list.push(node);
            } else {
              matchedAttributes[name] = [node];
            }
          }
        }

        return node;
      };

      /**
       * Adds a node filter function to the parser, the parser will collect the specified nodes by name
       * and then execute the callback ones it has finished parsing the document.
       *
       * @example
       * parser.addNodeFilter('p,h1', function(nodes, name) {
       *  for (var i = 0; i < nodes.length; i++) {
       *   console.log(nodes[i].name);
       *  }
       * });
       * @method addNodeFilter
       * @method {String} name Comma separated list of nodes to collect.
       * @param {function} callback Callback function to execute once it has collected nodes.
       */
      self.addNodeFilter = function (name, callback) {
        each(explode(name), function (name) {
          var list = nodeFilters[name];

          if (!list) {
            nodeFilters[name] = list = [];
          }

          list.push(callback);
        });
      };

      /**
       * Adds a attribute filter function to the parser, the parser will collect nodes that has the specified attributes
       * and then execute the callback ones it has finished parsing the document.
       *
       * @example
       * parser.addAttributeFilter('src,href', function(nodes, name) {
       *  for (var i = 0; i < nodes.length; i++) {
       *   console.log(nodes[i].name);
       *  }
       * });
       * @method addAttributeFilter
       * @method {String} name Comma separated list of nodes to collect.
       * @param {function} callback Callback function to execute once it has collected nodes.
       */
      self.addAttributeFilter = function (name, callback) {
        each(explode(name), function (name) {
          var i;

          for (i = 0; i < attributeFilters.length; i++) {
            if (attributeFilters[i].name === name) {
              attributeFilters[i].callbacks.push(callback);
              return;
            }
          }

          attributeFilters.push({ name: name, callbacks: [callback] });
        });
      };

      /**
       * Parses the specified HTML string into a DOM like node tree and returns the result.
       *
       * @example
       * var rootNode = new DomParser({...}).parse('<b>text</b>');
       * @method parse
       * @param {String} html Html string to sax parse.
       * @param {Object} args Optional args object that gets passed to all filter functions.
       * @return {tinymce.html.Node} Root node containing the tree.
       */
      self.parse = function (html, args) {
        var parser, rootNode, node, nodes, i, l, fi, fl, list, name, validate;
        var blockElements, startWhiteSpaceRegExp, invalidChildren = [], isInWhiteSpacePreservedElement;
        var endWhiteSpaceRegExp, allWhiteSpaceRegExp, isAllWhiteSpaceRegExp, whiteSpaceElements;
        var children, nonEmptyElements, rootBlockName;

        args = args || {};
        matchedNodes = {};
        matchedAttributes = {};
        blockElements = extend(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());
        nonEmptyElements = schema.getNonEmptyElements();
        children = schema.children;
        validate = settings.validate;
        rootBlockName = "forced_root_block" in args ? args.forced_root_block : settings.forced_root_block;

        whiteSpaceElements = schema.getWhiteSpaceElements();
        startWhiteSpaceRegExp = /^[ \t\r\n]+/;
        endWhiteSpaceRegExp = /[ \t\r\n]+$/;
        allWhiteSpaceRegExp = /[ \t\r\n]+/g;
        isAllWhiteSpaceRegExp = /^[ \t\r\n]+$/;

        function addRootBlocks() {
          var node = rootNode.firstChild, next, rootBlockNode;

          // Removes whitespace at beginning and end of block so:
          // <p> x </p> -> <p>x</p>
          function trim(rootBlockNode) {
            if (rootBlockNode) {
              node = rootBlockNode.firstChild;
              if (node && node.type == 3) {
                node.value = node.value.replace(startWhiteSpaceRegExp, '');
              }

              node = rootBlockNode.lastChild;
              if (node && node.type == 3) {
                node.value = node.value.replace(endWhiteSpaceRegExp, '');
              }
            }
          }

          // Check if rootBlock is valid within rootNode for example if P is valid in H1 if H1 is the contentEditabe root
          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {
            return;
          }

          while (node) {
            next = node.next;

            if (node.type == 3 || (node.type == 1 && node.name !== 'p' &&
              !blockElements[node.name] && !node.attr('data-mce-type'))) {
              if (!rootBlockNode) {
                // Create a new root block element
                rootBlockNode = createNode(rootBlockName, 1);
                rootBlockNode.attr(settinnµŞ~Œß®¿Ê»>«Õ<óµ–«¿ªüÌÔ?Sóüııæ·éœíÜ³-ıß÷Õê[ê?´z¿¿›õõïã×_ıÓ·¾LŸ§—iLÙòÍÄ(mo÷Ê»Ùl×j˜í“×|¹|˜^à¨„ÏßûN»~ôÜ¬¦§z9ã_Eèÿr»ËÇïfé)T´H dá0 e€¼D!S ‡I’	”  å, Ğ’€Ã¹@X™C$”HĞ`PeI, ‹ 61 I$‚GĞ*#
‚@Pë¬¢Ü! gÈBDÔ(qrâ|" Bò *˜@Í„<¨>‡=HtPÄÉƒéÀ  _ !8dp‰¤aGî 0tÙ
È@“h­8!¤“¦x#@ˆÙ   AA‚
€@èˆ¢™©%	j& àd€2elæ)Hb@!:Aˆ@D è„¤‚ 'Ğ•((! P-Å˜ì ¼ŞZûqŸëÕò¬4Ù§ÿp—×z–—½ÏµEÒö'çzà{ÿÎß»ç‚ıî¥İŞò—Ú›Ş»y_·¿òİıëµ!~J™,Â=—¯~ãıÓ»‡S^Şàô“¶'£šß®ßûî§üûæ[òãû_¿¿=éğw¼ëä×ûïıoÃg)9Õ¡´é "‹;øâà7¢E†‚ú*‚ú„AÀ)°BÛBmR‚,ÚxPZ5F¦'€'!é€¢6D% ´$fV’  p 2 F‹
öD•6 HbDÈ@DP) P`,è€ƒ€•o…©P[÷àÒ]¯úxEoáüû,ßwÿ÷]/Ÿy_ëæyŸå°]âñóß»÷3,ˆüß¯·Ğû×ö¿ß}ó„×J¾Yı‹øøwìËoÏ¾ıÓl®¼×ùæşó—¯O¨¼7®Æmÿ¿û?‡îÑ4fı}ÔıÌvî~‡=¯ÜıooìÿŸsµø~{ÿ”VŸÑøêcH—TÙôHéûÛÿª³ı¦râ¾{—ßM¸z.;Sgß=}Ÿ3ÛcØöÛı‹üÁë>~ğñïmšÅ=õWÌZgë{ØŞ&kïşû÷böe/t÷wêµ÷ÿ”ş7ÏJs~Úõ¹{©Å÷Mÿb‚#½ôwšò·£qçŸ¾ÛÜ7÷C*¾ÁĞ1`âÄÏ	Iƒ¡8$%d ² ¥½# 8 ¼„qN ^¨fÔPaÈæj@J¨ S @	f!p¡H.M
¥TŸ2F´ĞÁÊúÒpe6i‰h$†F:DtC”ED "Ô…œ¥²(Dè,0»òÇ	lİÑ€hÿ;ß¯úV‘—õ£¿iİñşõû[°mjëÓ³vªõ~%¿ö'şß%¸èZ~êóÓŞ«>‡˜.~±íêïöÃšÖÜİè!7ışû…Ë»{¼¹Ôa•Áwz.C;†óëğ•ú·WÇ«›øÅÇ•şM°ÍeÁè´ÏKòR²B0¨V `@¦ò]HÇÀ!0¤}áR° -¼R8‚PVşFBfb{› h  ‡'@n¤²A(„ L)4€i	jBAY5 %iBu‚+ ¡3ğiFĞ ‘óPD zèï±\ (E¶"(Láy™H   &H0D	ö(T…( ™˜´Xp BFƒ¸Ú ï
pY„¤ ‹+#±–æ‘R0• BA 	9À‰€	

™ 0©sƒ€( œ‚æQQ:8'%„#Àüfÿêİ÷ÿ—;CrÛ˜ÉÊ"²-Ëÿ­`w´eİ±»ŸaŞæ»ûKøş¼z±¹ÍısJváûŸ½ù†İ\ï±oŞÖñÖƒåÙíÿ?‘;“wè?şÿëûİOçıí×U˜îúâ·tÒÙ
{¹Ÿ§«÷íòÏöëº~i;Ü½Lñ«ç ` £™ À $¦0Vù$ƒ$'p	@ë6ˆ P3	„"M°!@’S` ˜¤ \ÄÀq "µ†T 	=b™P"X€ ¿’PBá€FMˆq
´"! (ÓÚ6¸9,~À"8 ,r0ˆL+>ûæòâ{3Ş··¿ùl)wùôé”ZY;³a7WÇÿéİ¢¬æ®Lñj:ç9Í±¹ş­/|NJûÿìş¬Î_9²wÎİ¨vÏüî¦=µç¡kºŸ3ëİêğ—?½ÜUâÛòŒæú=´û?_$*WÉFûÇjú¾N•íŞÿ7(ÉßïÛ_‡öÒîŞÖñãŒ²·ß?Îö×	:§ŞŸØ‹_2î§wöÿc{ûê>¹½âóÚËo+ØŞêï›±m½H“‡Oñíä^Ü¥ö±%‹{«U"¿Õï;ØÇâ½ÑÒ¹íùÿó™y}±¿¿~üÅæ~İ–ïì£Íö?÷,^‹ıï°ÿ´{öôŒíwZæ$ş8/0Ÿ&Ù`T‚.b¡	—eXùˆL1-¸6œ(( æ d t0.0 † ‹„ ¡Ä#\
 ² …D  XR$ÆjH9T"•I°€K.R  Ø‚İP… BŠ E@M¨Ç!L5Àv"˜Ã¨a¯¥õµ%ÏÏå××=ãBèë°Ìc»ùö÷Po÷çm§K¢Ÿf'şŸxÙßŸ÷ÏÕşù%Mö„wõïwXØ7Ç›ÊÇWı•Y¿¾^^ı®ÖÑ×húcƒ¿Oı÷¯ö¿îvE¯p¾n{ûtÈ¨ìÛZçØWëŸQw]c–ÿMö—ºĞ½e¨,©(SÁÁÌá%0äƒU“Æ*!C  0 „I&Åˆ5P¼P B„`}»A(ÁZQƒJ¼ ¢#0À Æ\+ ‡¤2ìğ1Ì2Ö¶TPW
“Ğ` p EÏR, E”œéU…$ØÂ,6q”Ë¸¤XItÁ@FÈ'ò)>°D2bÈA V R¦`Ä‹DŒ0R	ò)S@È‚Ê€c
ìˆ°AT…@$}ƒEØB]ŠËX)ğ((¸ÂX1L:!Ú€„¢‚0ŠÁè"Û#ˆ“D#¤aŒ…R Â‡HR6óXòï÷Nï7Šzß+ïtF=|²^ócôÃùKß46ù›SİÇŞ«»îµO—›-×gó?ßw{ğïş¶¾ê^¼qgçAñ+¦ùû}Kı¹}Ï³f·Ê9ıú¿ûf;UsGı*×§?ø»î?Òm­Dy_dºå¥ô>û§;/ç¼ÚıD^j ğïA~À ¥”„c’„ @è†$€ LŠ¢(J‚ÑV„€ôÇĞpÍI(•Ë°¾*ô50X¬G` C|ˆ ‚´	7$"‚™ 
¸PHP( eœ°DÁ dˆ'Ø¦@(‡’ 8¬>Û"V½Û8öâ9í7{Ãíú°—æw~É_öÛúmkkzñøîÛ³XÔ&ğ—\78à«m|_y#ã+¶ñòûÁÒªÿı­9üû[‡¿ó‡ö¾»»»mÛHk«ìÿnÏsHĞÎ§ÜèÚ~Ïõ´ñW×O—Y|¹vydcÿ\ÿ./¶#µÍr}÷ø>ßÍ};ÿç_÷â=½…GÿÿGÎ:]_|m»/m'‡Ïö·¶İ¯ß÷äşúwqÏ¬s~×Ÿ|xï¿uózo%ºài'ØóŸ'­FÂ^Rïaãî?÷ı…[oøÅòU_ï†²-êö~ë¤æ–Â»]÷ş§×f:öÏ]2®ÍVŞvÿÿ>q¶×0˜!‘JZÂ,@ğ‰B€â  ôˆ; „8A!ò'p€pÔ4P–B'ğ@‚0¦,”‚PÙŒd£B*&¦0  t au‚–¢øĞÂVcdà¡¸ Ø  €NB¦"bI ÁN Pğ¾xpO‹w§–z¬[/Ò3ïJTnïçÿÙxíùß}
$Aı'w1/às~¿ßÛ“:×û¿şç^şÑÍ/şı°0½ßV{uGOA\ßİ÷LTşcÿìyô/aW_/½£ÎhtÿœÓ7Ê^é¹´$4Gš¯×—ÿç7Gól5%øSObÛ1	A q
A"D¬{EV?„@0)È…p
 DL *šU€V'À€hØ<)JBD7„ 'K ±Ì0[IH“	vŞ	 	¡€HLp$¼¡®a4êH’èhÀdE(¯]ˆ((A€ ‚Ø|am¨ P"j€y™€BîÇÆYĞ#H‘ˆ$ xNMŒ,#L”Šô„ŒTÎÀQ§‚0fÁp  Š€LÔÉÄ…ò@iÀŒ ĞME.„/( PNt…pŒƒRŒ „½  U$U,gRÈ¡<Àm^EU Àö #Öñ–÷0ÊGµíç¿ù:Wİ÷İ~/íÍÏ~üëİ¯ö4ïÑîßÍ}ø_/Ç½Ì·
.›U7Ã¤Ÿî¿odÿ¹—Ş»ôJÖBVı§^º°û½Nç¸ÕÊ;|yøçİ~›ÿ»ÿÿ	¤rÏYó»ùŸ²Õáï{][¯³ÏQŞûÿ[ŸƒùëÿûÙC¥Á &@Ò@R,U„¢8””©0(HÀˆÊˆ€ H À0ÉEá#0d¬@ ,…€0ªNØ  ª8b&8DÄLD‰ 0Í/×’D@¬© * €$07$`¡ ‰Û&æİÈ0p‚jk¡Ø…Ô³ıWê¿ÿÿÿæºvmúîfmõŞeg{mO§fgRO4ûŒSŸÏz	ş?zVÿ®¼Àşßò¥_|¶î/mÔ__äÏ(ßoÜKÿíäúı¿Q?3Ë©÷ÙöÍõ™Úİœõ›ŸßBæö»ı|÷³ğ.ç¿ùàÏ³îŠï·rs§/?íGv;şÁ/}–›wz[ìw¼şışÆmÿGŸwö×õŞ×§ê—ŸÙOuMÙ[÷~+ş?eÿjUçÏöÓ»·ys6~v7¿çıÌã×è·Åß^ûĞü2YıíØxªàv¿·ß<ÏOïË_Ò;ÜM³ù~{~IòMÏü“ˆ7_Õó¸øêöï¹uïEõ?í2ñ~÷¨§.„ÄbhS‚L N@éz0ÀˆÑ$ ÛÀ"Ö#„”F” á„Ğ 
DLa „X6‹?z<q@´
 b €ÉLp@„„Ê0%, „ ôd c" xpG(¢IrÄÊ * !ˆX¨J€ˆ¤„l9ï/İ~Îbw/nŞïÉY¿ï¼õW·¿GŞıË_¿ï o¤ü­ÏSÓİ¯ëÿÿÿà£÷Î¸Oô¿—Ò¯í} İßßÊ;ßuÿÎæg»m–ß[ÏÔnú+±ÛÿôU¹7Ö{ßŞşÙ_Õß/ü^ı]_&÷¼/égÿ¹ünûø—¯Óÿã;×±>oØ§è¯}—=Sş\îÛTŸ=µ÷°~ü½vxäáÌF¦îß¯š‡¾xûp†àÛŸş?²¥†ÎÍğŸrhFpÛ˜>ós7=ÿÒy]v'÷ÿÚækwöŸZwÿå{Wzş×yU]ÒÇ‡¾{³_…PßÿÕ=¯eë^+¹mIjvêëjÎÿêù~O^Èx¾Rú7ıÖİ·W¶o=ßÚ÷§"^V"çgw¯n{'usl•¼ınE©Z6?SİY|›ı[mS›¿~¿Ùw¶qÿ{?ÓùGoÛgû[–ï€g»ûU•ÖğMı7´2…ş×şt¾›g«ûş7Ûşÿıãí±ır­{>ç¹ıŞÏ9ÿw].«š7ÿûş¾ô­ûÚ¯–u_?Wõ‡»ªoZşxÅZ‡ª/ëjkùÍâëîõü·zîò—ÇöV\_¶\µ÷×Øüî}ñ“Öñ¿_Ÿç<²û{ŸÎÏ_úÿñ|İÿé{òO{q÷Í]ñıéŞn5ß5¢{ÿOİAfü­}&K»mßÇõÿköYCîÿ±×Ïí§_»SBNßj[JÕ‡¿ÆŠèWå~öÒ…ã¿Ûœì÷—ï±íäè¿òÖs¶ßÒQtUï~ı¦?o_Gñ¸—öo‚/Ÿ{“RÕ\ìí±Ğ_ÿ}òßñ_Ô×Oíßo¹›×Mß‹¯ûS[-ÃUòòv<ÿmË×û?ì+ŸÅşïßıÍõİ¾û.ö¯‹m—Ôm³ŸeæSínßkŸü¿ìçÇÍÏ¯yïßä8ßj÷öïÿ{›v¾[õÿÍıõ©èÖºm·ü{÷§×_·kæo÷ÔX×ûùïÒı×ï]ÿ›îşÿÎáÿósî¾åvÛÔşä¤ìÍûıZÀÿOíß{–ov7·<÷ßÿñ¥OÇ,÷q0Ú—|¿2úüÿŸmø•ö¿¿×Ş·g>~ß_ÙŸ±İ+şy¾¿Ô¯ÒçSİõıëÿÉ_ªiß¿×şøå·'Fÿ®÷z·ã9úûşŞRz¬ïúòßçøë¢¿k^Çïì.·ÿ×oè9¿|•ş7cñÅıNµjjøŞ%táwæ{vÿ[Ï3zlŸÕÛÊı÷Kïq±\K=ßŞô–3V×Ÿÿ÷ı×Suµ¿¼YMƒ_îßz;ó¾‚OJ×¾İÿç/ß^ğ?}¤Õ¦ê«t~XYß•Íw÷'s®VŸ§C
ğ]½ÜGò7w÷ùWŒóıöŸÿ\ÿ»öw•Ÿõ{ÿjûïVwûû¥íİ^÷ûÕìºOî•Ôö¥ÿo|«]Üÿü×Úá÷¸ø?şıâ¶¬İòÛŸ»[ß>ãJ5?ı\şdò/Çµ·â²Îÿ·né:³şÜ/ÿı9ıÿ¶Î{‘_ˆ×ùúîßŸw{7~÷ÿÛúpêY•ş“¯—ò³~ğÒµİç‡NgƒÛùô©?şÿOxíªi?Óã+ıšÿoõâ·ëOpıoûmÙn›O¦¼CÏûÂê»¹œóÂãÛŸìÒ¶:ìÛŞø¾·Œ5¿—M\/oı½øZÿ:Çíşÿ{’òtnû÷§Ëœı×z…ë=7ß;ıÿÚòÑÿk¬=Ë&Õf²'8NÑÕ§aª}ìü™ÜôŞÆ{ùİÇ·ÓSØ¿ßóŸ}şjNú_¶ı~¯Zü/÷Şı+Wbû½:ì­‘-·ıô>ßkNâŸReÂßÒ'¿ÿ·.Õ÷_òËË»bÀÎ‡2ÛoÅ›·æ¼!?ëuÏRúåOûşâßû÷uYÏ’ßNô·šŞÏÛİ×İÿúû¾ú×ëÿ2ÿüÿg£Ï¹ıTıç¿¹ıÍµ>o-şüon×ìÄ½¡¾vï}ßÙº,vıUÉG¥¼÷ı¿ëNMûßÏeYì>ì7^|çep³sêüÿíüê™¯ÿ÷íŞş>ø?ßíÿRv³³¿ûèZòwª!õVİò|Çû2Ã¾¥]ëñé>Ôü»LóŸÇë_¯7ÎÊÿğcÏc×üµú¿Súûåê¶ÿ6éïÓ×«<©~´-øYûßİWëÇX¯m,õ·³º}ü>÷»@İúO9İà«7¿çoOİå§ ×óÿZİóº³ãş³ş²óïU^ûWm£vÿş¼¯ñ;Ñ÷ü9‡Æ—Cïúÿÿ÷‡ûşÓßÓ£Z=ò¼¾¿ûõsJ÷,öyK^¿„¾ğokàª|÷Ñùùó®ıÿÿ¦3tŸÿI¼ıöÿ^w›/á÷»8Õ÷¯ím6«oÜµïü;èå…¿ö·¬¹ßşÑ{_ÿõôÉwËÿi^/Û½ãÜ<Û6º«ö92:Õ=õåwºoö}ø~ırÿ}íıño½×ı­ıoìÏøŞöâ/Ü·Ï}ônÌÇ=İşÿºŸË{úÌŞïñ¯wfm¿~YñGöe¼ßûßæíÜ·mÛ¯û[ùïõeşêëg ÿ÷3»oÛg?ÿ÷JNkú?ÏyØ/?ëıŞ×WåRÿtÿïîßSKã÷ÿã¼?´¼¥os¿oR<Óßİßåîé+ÊûËªßË_³ü[Fßw×Ô°ìóŞúÇz?»{=Ç®´³û0§lYıowÖåõtÖt§¿f'®ù&Õ/~÷’}}S¼õÿ>ïòÊs]zú}8µuÓıŸı~~]÷ÿğı‰»úÄº4sGd“u{Ëéİo/?;ÏŠ½ÕÃïzÏÏŸşÿy8Ñ}{Éì?¤—çùû»¯¼>¯úÿÿ±Ø/¿ï<NÏºÏ/?¾½ö¦úÿ^\_ş6ºª3ü?óİ—_œwóï‘Ä·Üøf~ch.ÿñîúŞ¯a}öµ¥ûOû©‚%Ôæé,Ÿùo¼ûËÿù­òlo»¼ëŞş•ğu¿6qéI»¾²Û¿½uÿß>÷uırO?ÿ~ïËd[cçW}ZÒë†<^ûd_5õ®Ïî¦Õ¿Âwkš­ìXs İúş…÷”õ¢Ÿñ|ûÿt-¿ßsUsç‰>>û	uïSëÁº³³?åö~“–¹ÿ}Ó|óé¯ì­x_íşzõ½VÜÛ­vFU¿¿‡±ïşï)ûÜ:÷ß×köñå#ÜúïÃzÿÿm?}]¶ÿøtëíï\I‰¾Ä^¿ô‡ÉÿÍıv÷ö®ı âõúÎûı;¹w­û—eOÿFCßCWûë†œüôoòKÖUho[»wöœzníåı]Ëÿşİô¼oıÛf|2¾»ÿšŠåoÜûÕ-ÙU7]şï<ï÷swª_w÷îß›úÏßó³=¯ÿênËşÏ¯qŞšÎ…¾÷ıî{L×£ÏO+İÏp½ÿøN,óôÿ-IjİŸÛj¿şşfÿ÷Ô³î»û¿³{ÿû{hwcçïo~Ü>ƒ³+Ï_¦Ş[Õö—ÚJâ´oíµÚs“Ÿ_'¿?µ+=;ß}æ_ïôïëï×f”Å¾÷‡l–ï>ú‡T<Ïê¯Úç„N>E¾™ÉûÇy¯¤~ş£S=÷·w·`¹wÍ‡úÅ~‰×oökõÛßnƒÕo—ßıÇ÷7ø¼iÃx$şÁëÈü¶şï…÷Ùûÿó]‰^Ş÷ëıÿİwxñ"í¿]Ç|üŠí¿Wt»õTƒ©ÿ-£ó×¼ÿıı?â§¼æbmûEÖ÷¸|œC|'N¾?íî¯ßÙ¿˜ìÛè±·ëé.›{ù{wÕÛ'öŞî¯x6÷¾ğt¾Y£Ş¿×ßâ·ù|ğuå¾ÿâzŸÙvÉş-*}¹ÛìÌnçü¿¯}<ÿ¼ßç¾Ÿ§ï×VgÃùßÖ“»§{ıÛı»İwü¥êÍµÛ^Z¡ı?ûŸ¼»¹µï›ÎÎû\ırÿ~ÑìwJs6g¯Ë­’›}x¶îºŞkçŞôà½g_qÿÓxÿïä·rÜŒßºp¥sšß¿İN?³³‡öiÿô¿ÿíÂßÏ–ytåïêË¢ù×ñÃoà¢¹ó×]o}§úãç@égÿæ·=ı]øö×[J}ªí‘ãßıüù*Ûô'C‹sëÈWu=ÛéâïâÿÂoŸšOáÙ}ïîv¯‡õñß/Ékâ»¯¿qïù~o>ò_”Éó³ûÛw¶?â}Rêïf÷û§Ô†°Ûú?ó·Ò~ß~†··¾íG-O~³çëí5³í}Õüó·9s¿wÿ»Ìvë{¿zŞÇîæıví÷ŸUGµ<ÕIÏú]-Õêùı}´†ıqw>ù^Ã&ør¦ëşr÷ıŒÈÕ~çö3İs¾õÀ¢Óöw¼S·|ôÇà~ıß{ì¼hşî8¾Íß¡ç-Ÿşæ²Öíßì_ºñÿÊU×Ø>UÜåÅàWıG_ÎıËÜİ3ÿ<´ÚUİ­¿^û7tZŠc2=ur÷±şÎŸ#•ëõ•ß¾~Ü›œÿÿ¾ãxë[~]Ç_»÷/ÛüÛ¯ÛøÑét7Ï–´}BÏ¤æÛœ–o»õS²^v¯µGKşÁö»·]ÓÿæÇ®çsãÿócöÆóRß¯öşöŞ¿§ÍÎ)í{ïï¹†GÅû¹ŸÓÚÁ¿Û²ÏÊv^o¶Í7íã?Ïû¯çËÿşÿå}}ı="ìÿnÓ~Ëÿ«.*ïÖãç;?ß·W?ÿ[¶şùú¯âÓÿóì³üúşÜZşÄ¾¿Ïş/ıfÔ…Ÿ.İÜÉ»êº½ë÷Şá§Ÿ÷şêK»©ëíÿ¿èD¸z~u?Û_ŸuŸê÷Ú§ÚJÙŞ>¿oõ¬ışö¿ô—y›?ºì&µnïü_;ù±Ûö*»©>nÖ=Dìâ?]sV#T;ëqŸk÷>W÷×¶÷Ssû÷}Ÿ}ÚìßöïßZõŸÔ¹U}%Zê©•ı/íX6k¿°S?yëßßpU_c=Ÿ;ä¥Òc÷ÿüÿ¦Én¿´Oò[÷çÆßu¨şŸ×qû•û‘mßÅwìßz¿ÕŸYÜÓşî¿Ÿª÷»Éûæß60µñşş¥Ïšÿ‡ôï±”ÿé–ïlÇ÷/Øşóş»Òîço+W›Ï—Ô`¤NÍÖïÿæo}¯äÕ{ª_Ù¹îÉï¿ßÓ}õû½m›Wúñ~-ÿöÿnÿİ»şoÆÑyzö‘¿lZïóOŞ‹/Ûm}ùÙpÿ6÷Î~ß2mÏü?¢Úş§ÿ:'[y¬¯=Í(ûî×gŸÑÏwm¿¬‡ßõë¶§ÿHó·Ïæ½Š|¾ÿ{úÖ=ûßş·?õû×ÂÛ²õ~wøí¾ßË¯üòÿşú÷Æÿ=V}şÿA¯®ı¢æWûÁ”åİ÷Å­ïÎóG—Yëêw>»Õ^Åİµuíæß³:ñ]}ü´/£üşû|·7«>·Íï¬Ï¾çÃ•>Ÿ·7êBmcøÅİs	l¿÷×}¦tÉú‹ÔßÛußÈëmx¦^¾¿íÍ­ûÒÃ¬Û÷ï«LÛçœÚ}+?¯©Á÷PNµÚå>§¿ì÷şv¹§ıùî-«Ëz%çª            textNode = sibling;
                      }
                    }
                  }
                }

                // Trim start white space
                // Removed due to: #5424
                /*textNode = node.prev;
                if (textNode && textNode.type === 3) {
                  text = textNode.value.replace(startWhiteSpaceRegExp, '');

                  if (text.length > 0)
                    textNode.value = text;
                  else
                    textNode.remove();
                }*/
              }

              // Check if we exited a whitespace preserved element
              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {
                isInWhiteSpacePreservedElement = false;
              }

              // Handle empty nodes
              if (elementRule.removeEmpty || elementRule.paddEmpty) {
                if (node.isEmpty(nonEmptyElements, whiteSpaceElements)) {
                  if (elementRule.paddEmpty) {
                    paddEmptyNode(settings, node);
                  } else {
                    // Leave nodes that have a name like <a name="name">
                    if (!node.attributes.map.name && !node.attributes.map.id) {
                      tempNode = node.parent;

                      if (blockElements[node.name]) {
                        node.empty().remove();
                      } else {
                        node.unwrap();
                      }

                      node = tempNode;
                      return;
                    }
                  }
                }
              }

              node = node.parent;
            }
          }
        }, schema);

        rootNode = node = new Node(args.context || settings.root_name, 11);

        parser.parse(html);

        // Fix invalid children or report invalid children in a contextual parsing
        if (validate && invalidChildren.length) {
          if (!args.context) {
            fixInvalidChildren(invalidChildren);
          } else {
            args.invalid = true;
          }
        }

        // Wrap nodes in the root into block elements if the root is body
        if (rootBlockName && (rootNode.name == 'body' || args.isRootContent)) {
          addRootBlocks();
        }

        // Run filters only when the contents is valid
        if (!args.invalid) {
          // Run node filters
          for (name in matchedNodes) {
            list = nodeFilters[name];
            nodes = matchedNodes[name];

            // Remove already removed children
            fi = nodes.length;
            while (fi--) {
              if (!nodes[fi].parent) {
                nodes.splice(fi, 1);
              }
            }

            for (i = 0, l = list.length; i < l; i++) {
              list[i](nodes, name, args);
            }
          }

          // Run attribute filters
          for (i = 0, l = attributeFilters.length; i < l; i++) {
            list = attributeFilters[i];

            if (list.name in matchedAttributes) {
              nodes = matchedAttributes[list.name];

              // Remove already removed children
              fi = nodes.length;
              while (fi--) {
                if (!nodes[fi].parent) {
                  nodes.splice(fi, 1);
                }
              }

              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {
                list.callbacks[fi](nodes, list.name, args);
              }
            }
          }
        }

        return rootNode;
      };

      // Remove <br> at end of block elements Gecko and WebKit injects BR elements to
      // make it possible to place the caret inside empty blocks. This logic tries to remove
      // these elements and keep br elements that where intended to be there intact
      if (settings.remove_trailing_brs) {
        self.addNodeFilter('br', function (nodes) {
          var i, l = nodes.length, node, blockElements = extend({}, schema.getBlockElements());
          var nonEmptyElements = schema.getNonEmptyElements(), parent, lastParent, prev, prevName;
          var whiteSpaceElements = schema.getNonEmptyElements();
          var elementRule, textNode;

          // Remove brs from body element as well
          blockElements.body = 1;

          // Must loop forwards since it will otherwise remove all brs in <p>a<br><br><br></p>
          for (i = 0; i < l; i++) {
            node = nodes[i];
            parent = node.parent;

            if (blockElements[node.parent.name] && node === parent.lastChild) {
              // Loop all nodes to the left of the current node and check for other BR elements
              // excluding bookmarks since they are invisible
              prev = node.prev;
              while (prev) {
                prevName = prev.name;

                // Ignore bookmarks
                if (prevName !== "span" || prev.attr('data-mce-type') !== 'bookmark') {
                  // Found a non BR element
                  if (prevName !== "br") {
                    break;
                  }

                  // Found another br it's a <br><br> structure then don't remove anything
                  if (prevName === 'br') {
                    node = null;
                    break;
                  }
                }

                prev = prev.prev;
              }

              if (node) {
                node.remove();

                // Is the parent to be considered empty after we removed the BR
                if (parent.isEmpty(nonEmptyElements, whiteSpaceElements)) {
                  elementRule = schema.getElementRule(parent.name);

                  // Remove or padd the element depending on schema rule
                  if (elementRule) {
                    if (elementRule.removeEmpty) {
                      parent.remove();
                    } else if (elementRule.paddEmpty) {
                      paddEmptyNode(settings, parent);
                    }
                  }
                }
              }
            } else {
              // Replaces BR elements inside inline elements like <p><b><i><br></i></b></p>
              // so they become <p><b><i>&nbsp;</i></b></p>
              lastParent = node;
              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {
                lastParent = parent;

                if (blockElements[parent.name]) {
                  break;
                }

                parent = parent.parent;
              }

              if (lastParent === parent && settings.padd_empty_with_br !== true) {
                textNode = new Node('#text', 3);
                textNode.value = '\u00a0';
                node.replace(textNode);
              }
            }
          }
        });
      }


      self.addAttributeFilter('href', function (nodes) {
        var i = nodes.length, node;

        var appendRel = function (rel) {
          var parts = rel.split(' ').filter(function (p) {
            return p.length > 0;
          });
          return parts.concat(['noopener']).sort().join(' ');
        };

        var addNoOpener = function (rel) {
          var newRel = rel ? Tools.trim(rel) : '';
          if (!/\b(noopener)\b/g.test(newRel)) {
            return appendRel(newRel);
          } else {
            return newRel;
          }
        };

        if (!settings.allow_unsafe_link_target) {
          while (i--) {
            node = nodes[i];
            if (node.name === 'a' && node.attr('target') === '_blank') {
              node.attr('rel', addNoOpener(node.attr('rel')));
            }
          }
        }
      });

      // Force anchor names closed, unless the setting "allow_html_in_named_anchor" is explicitly included.
      if (!settings.allow_html_in_named_anchor) {
        self.addAttributeFilter('id,name', function (nodes) {
          var i = nodes.length, sibling, prevSibling, parent, node;

          while (i--) {
            node = nodes[i];
            if (node.name === 'a' && node.firstChild && !node.attr('href')) {
              parent = node.parent;

              // Move children after current node
              sibling = node.lastChild;
              do {
                prevSibling = sibling.prev;
                parent.insert(sibling, node);
                sibling = prevSibling;
              } while (sibling);
            }
          }
        });
      }

      if (settings.fix_list_elements) {
        self.addNodeFilter('ul,ol', function (nodes) {
          var i = nodes.length, node, parentNode;

          while (i--) {
            node = nodes[i];
            parentNode = node.parent;

            if (parentNode.name === 'ul' || parentNode.name === 'ol') {
              if (node.prev && node.prev.name === 'li') {
                node.prev.append(node);
              } else {
                var li = new Node('li', 1);
                li.attr('style', 'list-style-type: none');
                node.wrap(li);
              }
            }
          }
        });
      }

      if (settings.validate && schema.getValidClasses()) {
        self.addAttributeFilter('class', function (nodes) {
          var i = nodes.length, node, classList, ci, className, classValue;
          var validClasses = schema.getValidClasses(), validClassesMap, valid;

          while (i--) {
            node = nodes[i];
            classList = node.attr('class').split(' ');
            classValue = '';

            for (ci = 0; ci < classList.length; ci++) {
              className = classList[ci];
              valid = false;

              validClassesMap = validClasses['*'];
              if (validClassesMap && validClassesMap[className]) {
                valid = true;
              }

              validClassesMap = validClasses[node.name];
              if (!valid && validClassesMap && validClassesMap[className]) {
                valid = true;
              }

              if (valid) {
                if (classValue) {
                  classValue += ' ';
                }

                classValue += className;
              }
            }

            if (!classValue.length) {
              classValue = null;
            }

            node.attr('class', classValue);
          }
        });
      }
    };
  }
);

/**
 * Writer.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class is used to write HTML tags out it can be used with the Serializer or the SaxParser.
 *
 * @class tinymce.html.Writer
 * @example
 * var writer = new tinymce.html.Writer({indent: true});
 * var parser = new tinymce.html.SaxParser(writer).parse('<p><br></p>');
 * console.log(writer.getContent());
 *
 * @class tinymce.html.Writer
 * @version 3.4
 */
define(
  'tinymce.core.html.Writer',
  [
    "tinymce.core.html.Entities",
    "tinymce.core.util.Tools"
  ],
  function (Entities, Tools) {
    var makeMap = Tools.makeMap;

    /**
     * Constructs a new Writer instance.
     *
     * @constructor
     * @method Writer
     * @param {Object} settings Name/value settings object.
     */
    return function (settings) {
      var html = [], indent, indentBefore, indentAfter, encode, htmlOutput;

      settings = settings || {};
      indent = settings.indent;
      indentBefore = makeMap(settings.indent_before || '');
      indentAfter = makeMap(settings.indent_after || '');
      encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);
      htmlOutput = settings.element_format == "html";

      return {
        /**
         * Writes the a start element such as <p id="a">.
         *
         * @method start
         * @param {String} name Name of the element.
         * @param {Array} attrs Optional attribute array or undefined if it hasn't any.
         * @param {Boolean} empty Optional empty state if the tag should end like <br />.
         */
        start: function (name, attrs, empty) {
          var i, l, attr, value;

          if (indent && indentBefore[name] && html.length > 0) {
            value = html[html.length - 1];

            if (value.length > 0 && value !== '\n') {
 ¿»^ú×s›ÿûİ¤üó×Ì²µ½¸¯­¾S½_¬íõ/ığ~ÿÅ·G)}_çú_¾öÿß¿Úéÿézw{ÿÖ»êÆç<y¯=–¿,v¯#÷·ş?¶Â÷×ç¿«ğï—ÖÕ¤Ïéó¿ùêèşÎıüÿëÓ?|¯ôúô?í}u?}ı[-cŒ•– É;[]£ÆA#„öê=;BÄ!œpÑÆÄÔb°í™0“f­¡0
™ÈBæŠ@8ƒ5ÒA ¨mD„a™’dBPiÁá@„Â Ù"†Å¡o˜[…Ø1ú’¥äèd €˜ p€&’€fÄ±˜F2@ŸOPiD¢É+¼ZÆ&L€†>C®	„6²MlúPdMk€œ¤4(  ³¥XDwŠØ¦†Õ@BD&aùaÂ“Ë§$ UC ®D¦)ğ€œMcXâ.’P ( Lª 0 TAÆ¸‘	ÀB Œjƒî½ÖæEúißîàúÉO-¶æİ×úœó¿CaÛz¥¯¯û¿oüş÷=Ğ9»ısûUîï?Ê§õ»§nåğÂûóÛ.W-=üw”¯éw®î«=¯è­+ÿ_.½ß¶}Úêgbm›üÿ·ëßş×_Á»7«ôË¶×½ŞOq=½ïÚç­‹|}Ù¤˜-ÒšA@ú®·ü/T9ø?œ%™§  Iˆ>ˆœâ¹šK+‚F	&ç„ -‹i"Ö6\„‚ÑRª ¿ôAê.Î×$—(’H	 Œ_@|Á?pªY’i Ÿ‰u$p‚Áo ’ˆ"£$2D¡îX»ù¯¿“íüïûIª~ıfc‡7ß[}¿ãèÿkÿw[÷7;ËÙÏ®öïúô³™}¼Šõ®?ıßYúÄÿïÿ¾!ïŸ]?ßÎè`ıo¼Uµ¾÷k–|¿Vé»k-½óıwŞõ¦óÏ-ıú~v¢ÿÖıÉúßOÖÏYÜÛÿ÷[½¹ôìñê{¦]=Nù=ı|ªä¼¾]óÿ<õÌŸÿ¿ïc?ßê½[ìˆ˜#öwçÕKºş÷ÿywr¡Ş£û4<¹ıŞ×ùŸÿ÷·W2óœDì\¿Ÿ¿äkóoîÿï_‰Û*ğ÷UL¢ÿ—ğã·û<=ß½şõó?Òû¿¯—¼µû»ˆüG·ó‡
Á>zF  '<H^˜AHbĞóa" GX‘õf(1` 0–x„0D“ÀÙ¬A¦–ágÀIDdFÒKBÂOLZXÄ,eƒ‚G²’>– ¹2FÑB	€Y˜ÕØØ<Ma·‚ Ke¶ÑŞ!)f4:1¬
‡	)DÑL•,!AxñíÿÆZoŸõ÷ûF÷â;¥~ú.õy5wşÚŸÿÛüÏû÷Ë>î›ë;b$Ûßñ.ëWµ/¯œãÙşÿomçÍ•Öş£şÿıÓ¾ÿŞêıKá÷ÿëô}v›zÕğüéÿ×Ğø»÷¾tÿ¯Soú+ã?³åÉöÿ^ÑëÿRÛßèS0WşQï ¡Ä Ä0
XmX€ÄnìT`@ ” ±6ì¨Q†£èb‹rDÍJr
 h!HH$U 6#*?T*`Œá®ÎbÈ/@g;Áäˆò"GÒÒ2â^q8¸1ğ§³’0ä‡C	0ãg}2ğm% aşêÙ0•Íÿ5«s6C'€¤:KE\DË@”T
)BD *2JÈº "1SØN‡u1ˆJ6.GCf¸Tlñ$1°lˆ‰^áW@< µB(bĞİ©ã¶8ç@rf6 @°t*£pP0 t?µ>ÓôİÁßq?:rVGLÛ±}}ßJ_·‘$íï¾?;®·ıïuş–ì^ª]ÊÇ—÷Şs{ócèïŞÿûëªÆ¿Øóÿ½şßï¹ÚùéşÊ]‹üï÷ôíÓù;¾]½ïöşs¯¸{{¥|Ü¯şÏíµ÷›íÿª˜Ö÷Oí_Ãıéÿ0Ú=Z¡~¡ô,a+gğzs‡ î1òCÀ0É`¤0ŠXH?ğÀ7 IPb$ ¨JI" 6]IIQ"Ï+D ÜÈIÂØ
>‡ˆ„A'»À AØ&  	,	icˆ ACÒĞ˜9råLXH1ÖCoì6w•ş{¯=RÿÅêo=ù¯¿ø[ıvßíù/ùïWÃÊß)šÎb__ÃWıF‰Î¯ûä]¬çUî?Íûí4ûúà;KïæÇ—[ş¹.Şï™«¯øÿŸÛü¯{¹¿ÿäöÛ~ı»ÿ_÷êùîû÷o¿]úû§kë—¿×»İ÷Óıù~÷ß^îşÿØùl{ùÿ×²}¾Ë{Ïg;ú¾yı7×üª˜2nŸ·–|O:ôwÎö½?ÏS}?ªô¯jü.ııõçOøşÿjë¿æ=ÏãßsİºÏKh÷ÙËmIÖåõİÓß¼ñG>ßñ‹™ïÓüÛ_¿Æí”$³~¶¡_©vûm[­û)ûùüÍî[ ÀÖ) 0Ñs€PÚ®%:k2‚ŠÆak@A+3”.ƒ&.4²HUíDB¤ ’‡¤úQ¸4C2Â¯ÏQ‡U¾~½@‹˜Œ€ éKDÎ°8P LJÀ
Ub4z?&b"Œ´·Ê‹:ƒØr² ŸµT°L¸I/?~kûıªñÄø}'{ûü¼óŞœÿõê9#ÿ}ëßÚÿzëVpõüi{÷Tÿ]ö\7öëÉH}şúoëèøOı4<[÷şı½nvŞß­ıÿÿ;îëü¿ñõ³~ğù/­ÜÒù­:­»k}ÿù;½ı7ˆ–Óşî·ÅQ‘_QÙıï{Õ	A˜±Ó$&!ÄÇš<,° Dœ @§ÂN)Š`yWãGY†^P 
Û@Np©%y"  ò Ä‹[ğ,í•„²¨5†dTõ¶M¢É0ëñ5t¶Aöy‡7`¨…BÀ0wQ@ê.‚Q·UÂş2æ
êTGFmÖ"Œ†xƒÃÎÙ§A£Ï&@/4P(Ø îÆÃX©D+Lq€•Jš’ús(ÖÀ#n’Ïº’¢CºC¥TRÂ ”âæÜRÀ#@ÀöÀ=8ƒæ/W‚)Êº Hla„H…ışî^[vióé¬×]Õo-;õï÷Xıì¯?÷ª<p7ıöŞŞƒÇÕ|ŞûÉ¹öîßò•Îí|ş›Ç_ÿ_¬şøõgÿß÷b§¿=ÿÛûß÷F÷ÿ%gwº—ÙÒ{ŸfÜ™Zíóëş?Ì÷:¿Ì¿íşı}y=ß¼MŞ—MïßÀ€§YAÀ”Å!†‹íq„ì9Ø(Äƒ.¤ (Æ@“l¥InOÊ ÙT((h†´#Fš0‚7ƒeÖ¦µ€‚H–8¨QZ‚4	d´0S] Wz ˜Êq_@(’4AŒ
£HbãC @4XlÒ8è,¤CP~•|ùëï_…úïo6Ïÿ=¯-gáë/Ú¾î=»õ»‡ıe™û®ùWÕ«?Ï}gÇw¶g^Sÿ¹Ï›ıÏŸÙşvùfõû»üs)s÷;ú/ş¿6ûÿÿzsÿXïmcÕß»ıİ¿¹İı<ïzßïöÏÿü¯Èoòo|üVOÏğßfÅß­>ö­Í¯ôÿ÷.û‘?_åv×ëëİVİ¯«·ûeøËî½ÿ«k¶kfçÌ,òi¶:z÷u{÷w¿Âé ³|Ÿÿ›ô¯üïÿ¾ıÿìO²¿$û~ôúL^?ŞØş¬º~êßk¿ºÊÍk\ıW×ìÿëÛ×ïlÓÆúü~\vxP97mÏù›ÛÛƒf™"TT,n€ ¶E$Bñ0¢H“Œ¢ĞÂDlŸ3R,­ÃléËpÔfdˆm™C±¼4ù²â¡pn‘&hƒŒãˆLh¬$ŸK B¤c¢ÊÙ­¼-ØĞ$Ğ!ŒÙ(ÇX3à é
$ÁˆçÏ×¢õÿçV¸>õöuíÿ7¬àÖŞ¾;Iw¶0•ÿ_•ïËÛËÕSÓzßó~ÿûN_ôGçæô¾ùôoÅ&Ÿ÷ßvíù8æwŞÎã°Í«ôš½íNFß¾zŸø;ÿ¶Õ»œùûw«eç¯ûÈ{?íïµŸşì¿ı>7¿µÕŞ+=ûfù:b
ÄĞÄ Ğ¥ XôPgø‰ÓèçV"…-Q‚@ĞSØT¾DT¸2…ÀÒÀ„#C†PÀ´Es@ÀF¬†Hà˜pˆ`¤3hHÅPV”1× Â0†RÀû1#^)TÖ–%ÜE/$š"{’Ú
3£èä±Q¨€€xBõál³Ød:U%HÆKRxrÖ˜2ò·8‚Ët 
%×ã„‹¬…3óğuÚ@ Ğ…™Ì b€d!sõ‚lL°s/(r\MhAQÂ‘	ÉdÒZÁÆ*]ÂEDõê1»„ECt‚ óÿİNÑÿ÷²³î~aÌîRòü}²Ú¿ü}Ä£ı¿/şıËå÷Oßâã\oäw™ÆÓ½ktV~úı?'ˆşïú^9´ùÿÿáÿÎÏş‰ûçÿı^ß1Éö4O×¿÷ûî¶üøİêkÿMşî^³KÙ¦ÿ_zOw¸÷·ÅëW,züí“àLŠ,´™-x“?¬@¬(3dúD¡h,4IÑ
„ ø>ŠA°ŞxÍÀ-	2³›E5!@Æ¡)ğÊ9ˆeÌSğ²€ÉYøA‡YĞì Åa9EÓh+³AÕ­á5dV&½Ç¬U±H3à˜ÉJ@P6Â,óbùŞ÷ÑÓeÿúæM÷[—~ŸË÷ö{o.ßÿÇ{™û»œúÖŞáh'ÿÓÒÙ÷
ÿÇgöj;¿sŞ÷ÂYœĞo”ı|·çïßeÿÕºïï'ıÍõş¶çé(Û¸¯¦úêœ­ı_óäo®½Òß]sßC3¦õü¿ù—»~õ…şn<Úo×ãß¾ÖêûiöÿÏû¯ú÷ot=æóùwş?}ggÿ]ÿŸ_r÷´†é}8Íü*¯wk›¯õ¿“½şŞì÷ëéë¬÷_o~kÒZïÁõÕÆë¾û.ï}×]¹3ÿİ©ì­ê÷|µéÛûÍÿîM_¿ÿ×ıëşŠµïéİ¯mûÿôïßñ^özĞb‘ÁğŠ„&³€|•2á¥SŠcQBëŒZÄBp¡ ¾Ä  *D•b"$$%ˆÁJ"R4±İ ?m3JŠ‘3¢²àˆÀÅĞ
“].i¡:‡”i q	 €[Q±M¤¢ƒ"gH(”©Ã*z©’Šã*b`Rbq‡=Á¸R B \0DĞW (€ &(U5¦MN í“DW@s¼(F )&n Æ  \®F@@!Ò D€:0tĞwSW … 2
)3²Ì	91QÑc7äÁ„EuPÖÁ,\a(P…°‘I‰ŒwÎ÷Şïê}û~yËÖ;ïdÇéîGÕ½ºmï^T¹åûğÜïŸ~ïÿş÷ö¾şïú¥yo~z^éíË¸y{‡Ín¯/òÙı¾ÅíÍŞ§~íºÓş]¹Mş™ûßäÿ/—Úlşø^·ş`Şà'^‚¿§îKôí‡ª»å¾TÙÏü;ï¨Í÷ÿ½¯M·øw<ÿ­î_ç'Ù¼ï÷ïG>üQÍÓ7ùÜ}ÿ¾·¿ZÖøy¼í¾¾#qoö¶ëÃ%>òíŠ_nıwò÷Úÿÿü«¶òşnnªv)ìÏüÿ=—Ÿî~Ù=ımo·{úÿ4Øİ‹ıoõ?õÆÿŞ×g{ûˆÇ­æWûßWø»`¹å¿SRyéœÑ5°Ä’ø@i"–ŒµÃEd­áh‘+‚ ˆQ’Zã4›‰€Q¦ëK™z« Bàd()‘…Ñ  `x"£T ¾(°byT$$[H&ˆB@õ0İ€Íì…(V€˜³hN –E¯'†RF&‚S eq<íQgŸìÇÿi<æ›ıßğöåúsãß¹¹¿œÙêç×ªßU†3¯ïò¾ïó—¬t_÷öü«»ßúmìüû½÷÷½³{wş¼øßW{N¿wiô;ÿµßİ¿±Ÿ[ı÷ş»ó}™O÷+¿çö_÷ÿ÷¿ÿ—õnÿóıê?ş~~[ûï´—üñ%y
ë;%Bóu6Ca$5A(³‚FRPÆ"Ô±’-Ô Á„ÚOŠà’ Ô:aí(ĞHX!ˆ™°…H ×²…T ( 	W£p \@’¨âv-#™À—¯Ì§ºc^9ªà@4yœ­å?Â4 $Ş	‘¯¿° 'DA—ş$<ª3±³NÖƒ³.A$²võÊÆ¡‹F[¤ƒ¹$
4t¡OƒpŒJ†š3€`,ØhO@40ZF€@Ã
% F$ÈAÀdÁ`ÄÛ!G1I˜×ÉB¥8E’yÕrOŸçÕq¥&4WkÎj©O·-7wïÕgÿ~ƒ/3¯&ïOŸí£ç}¿¥©ı\õwı}ñ2özÎöÿ/îŞWHËq,íİø1iú+uùÍ¶<õÿáøıS¨=óç_¾¶ø¬ßÒÿÿn¯aÿ»­‚Ç¦ûÿ÷Ú_ë?É¯>ùfşÎká:ú»}”§RÈ..¡ä
';ª^P¨	,VMsË±5¨ p"º`FAÀÕHĞÂh’JM”Çã˜FœNB%R E@äi¹ĞD˜› ­’‚¶"E±­˜GrĞ•@’¡«2¸WTBPÌ˜4FÀ€D!:XEˆN‹HPÖT
®úw®¶Ûÿbµ©¿îÖ°ößwKôúş„eŞgv÷ÿÕVúû{œ´z×ö®zËgßÿÆÊÿ»ié¹ıu'?êÿc!ù]Ë-½ücÿ=FÚ<ÿ»Ñoôyò•ÿ?SÏùóß¿æŸ§ëşeÿøëıöß¼îËSä‡ÕõËıT{çÈojxÏ}½-÷Âº}‚Ö>Ç¿ÑŞ´yş=|}¼õÛØ¨rüû×ç5|ÿûÖ¿ç·ûõ=„»Òı¹İßw×Ç?öjşwúZík²¦;¯Ü¼ö›÷¿ëÿß¿ş—]úWv…ïñC¯Ì»ô÷ÿóû/‹ó[x.ù{Óß§·÷w²İok¶¶U~ø÷+¼ÿ¿şë×ı>YÚ¢/V¤,…’RC@ ğ¤d‚0Ä€šØÄ
Q_$XÔT´ƒt°1„!eğFÄ$A‹Iš€qQí 0)q
°Nˆ Jµ €İUBÒ´‚ı˜ XB˜·¸› ÁšXƒD•K‡FåI0´aÌl)¯YëÇ®İü|ıòLsG·õEg¿wş•ökÁßÍı{ M÷Ù{ıkÎ"oOÿ¹Íôòçó™êìÿ>TÏ÷Ş\{ò¸§şÿ]÷nİOë?İî¿àÕ?ú-óıÙŞ±SÛëùIüñ¯Äu¿e\•]¿öİÏµşÑ¾Şü´çîDoú]õúúÿÊ“/e)JgNÜ1½ˆÒ‰¤L …œ@…?`e³"	Ø!H	òEfM„$¼Ó¹ªĞc9ÈÔĞœ¼Ú$@+"- •"@@/Ü„Ô È#0#:F È³ÛÁCÔoÌÄ0¦XÑxÎ ‰®H^h;†texDR‚µ	 ,IÀY ®ƒLj;Ã@èo ¦D¤#B0oZ@àBˆ|¤h…Ä* ¢Å1¬ĞE€@ !6 
`rXB	õ…0ÑPÀGÄ}­¢XCP‚ÊD"‡0°DDˆJ¥…@$€‘ÛŞÿ·	]›å×ò,Nï_¯jã;éjmuËÿÎ{±{üÏ>;ùUû<ãÖoõùšKrİıï»Ş¬íÿ»ßw‹÷µk÷htüÜ¿†ßµ}.ÿò¾Ìk]w°ÏÏŞÇ{ÜÈ{Kß~­¥>Î/ÇÑ~Ì=÷SÔô¿Ÿ•1}{³RÚÆï·ıßß?9ø2«AÀÈaèÖ
	 œÄFˆ
 †dEBu Á¢¤ u¡‰`ÄÒ˜«HIÀ ( [°ÈÄŒ0¸ĞÀ*FU¶ğä`/µ4²M ,
€’ K(‰ÂY’ğT­nÀï+P ¢‰ˆ/€N›€*c(O#ì ºŒ°È¥Sxc}ïù¶ïıÿ¡/ÌÏÏ¶ïyÿÑûÿ{¬ÿÿ¯÷Æ¶ı×ëÕóŞİ[>Ä7WhØëÎë¾¼sò*ÿúÿz÷à–¾£ß÷³Í÷êî·³®;¨ÌóK2~GjÏÿÿyÕ|ş_ıı˜›=scW×üWõ4>|xÿ©ó}ıû›Ñıû}ÛÏ¯÷ç²íÓóoİjë~Nî÷ßzî>î¾wï{zùfİ~Iùçüó»G¹iÚ_Çy·]\ëûÏ÷Ñúÿ¿Ûîÿÿ¦{W»#ïüW÷®o÷u;ıÖóôŞ}ı×@ü¿ûíøù¼ÚØşÿwŸO“}gêå?÷¾ßóøûóûóşïŞ÷{œcè7m5¥¢ (‰,çXFX)0ÑTjÎQiŞP¢3ÁB8à!Fa‘:ÔÌf ‰€‚†|AP
'~Nà¡{‰D˜æ Íƒ8Xî ÁC¸$âjİBâÖ0 Lé{G£ŞØS `ˆòî³ìããß®Úú}ı+ÿ÷oôKË­¾·èÿÑs×ù66Éešœ~çÿá•}/«¹Öo_šişÖ²»~Ùmì`·ßºWøïöİK_ûSµêadªÿÙ'û¹×í[×ÿËäMòºënĞïöü¥÷î¿ÜÖÜÑí§½·Üÿ—¿ÿ»®üÿúDÉ~ÉÎïP@„™¡W
 &˜±Ò„G¢˜Ã)pZF±-‰H%ğR’B!¶{\b.ÜMÊŒÒULQQ*p7”Š^hnÕ"µjBˆƒGø«Ò,Ä%ª JŒ·O#òEˆpLĞ†‚ÍC›,b¯ƒ çğ-ñ£D•`˜Ç² Rÿ‡B î p*¼!céÙA¨N»À§÷@ ]DŒ'áq±oP!MaÚE—P™ D¦{²©34%Z@G,!Ø$6’(8Ó3Yä ÚVJ'#5†¢E¥,à	"°Fb”á
œwûoİ»_¾º÷»Ù™[æ®]Î;Üù'Î7[÷Şí»=ïïÿtÛwòïµğt•KoÖù9šõù¶û±5õÙ·üèëGö¿÷©9¦j}ûÏö`)}Kg}ì¸Ç}›fmÍ÷¯]üõ½öß½íé/Öİ¯ß_¬èn¯îßïêÖï¹3ªÓßâÿù¤»b@"‰æ•h UW¬†)J $G[  pÃ”a+\„T,¤£˜§àØ5)ÆRk, ¦8`é«®÷º2‘R"„R©uaA#Ó(…Ä‡´—9'$ ÀE¤Š¢ÇğQ0vIªù3ŒX:¸#–š9¨ap­.ë¯“Óó¿·ß&äkïeŸ×Ô¹ÿuıEßõ¿Õwì'íÁşWZng~¡Ş;Z®Ÿo¸Áö¸½»ØèŸ­ï­?¯ó9ÿÿ—¾kíuöì]—õÉ©¿n¤ÿ3^ı®ŸÙ~ğ-ÏÜŸ¯Î³>ò­×m½êï×§eşÿO"î¯Ó÷«>³ı³ëç‘é‹ıáñzş§YëØùëg—~?Ü0—Ú·&µ¾úfşÉewéŸïÓë½ğ÷ÿ²P}³_ÿş)û©ımõX÷ëWğjşíÖ/7×l¯?cÛÏ¶Ö¯{C–Küü-®WçÿÛWß7ŸÛ_¾—ŞBßßôßıÚDG¥·_ûWKO<×³7©”HZhÊ†J3“0 ÏÈ JA»‹(i Û /Êl"‰¡%U˜Hƒ	€„)  J\h´ÁË	RI4€ŠÒ€4€®ı('RÎ«J ÑAÿdA°TbHTk¥ø2 \`D€î)cDw«€ı¾Mwõo{Ü»×sÇ¿yoÛö_}şºİï¿ùMgcÛãlÍúqÿõ¿Lÿ´Õw6¾ÁúëÙßúv7×Eæ}×óÇÖ§o4÷õZ‹wŸ;™Ù}z»÷ù'F£ÏÙió¬óõ—ÿİ±¹¤~ış÷×ıËµO»kŸ¾{¼ÿ<¿ùşl÷¹§ßŸ¸Ûğ0P¢æV$XÔ(‚
P2+›Šî°(¤HAUj—ÆHqì3BXÓK—UPUÀ *	#€L`-¾ Å4€A9«È4Re²‡[oF‰€Cj (,äC™c…h0JyFB°7Å ‚*¤‹€EÀ€îÏ‚@AŞäIÀIJ(ºMÁc}ÈªJ$%VPV&Ñ‚Ø£QNokò\Pz(sº_uÂiÜ b–Jà‚G—«FZ^ ¹%0€ËÈ£*ñ¡M4J‚r¢Åoq‚Ó5-ìrpÁÂ8@‹¸ƒ¸4Å}€~'êïªÖQyêÿüg^l«Ôíïï{œÿ÷²¿·m=¶ôÛëïwgÿûéõéíŞ¿?ËúUûûl†2?Öi›³Şô^×ßùì'¿æû®kÿüs½>i‡ìÿvò»{§7v·¾Ëó½öÍÿ=ÛM7½÷ş¯ıuÖ·ùÿm÷íÛó?úÏ’\ü³GZçıü¨×4î™~C\êvß7Ÿ±úı>ÿÿ¿İÿİ~+FŞü/àäWî¿»3võ;•õı»¿}ı[WÄüî­÷0ü9ëOîêëoûÿêë:şk_ë{ş¿ß>ÿİ[^¯mrùÙyü|ÛĞ¿İGıë9çÅç_şı«ıGz}ûü½=Ü‚rÁ€h¢@±LåˆoÈÂII{+RºeÃ:ƒQàØ)Œªiº“ÛàNj« ©Ú&Rq¢Ì€ògc@¸GM2B äDyaYáÄD¥ÌT häı´('ùñF x3@šfn¹Z5·K’¢FÊ¦«SâƒFÙ“3.¢@Ğ@‡ŠÉp 0J…A€ Âwİc	D,B˜k Íf5Ln1=BC ”_:11fCT!V'‹Áól b€,
R‰'b¥Wy/X -z˜3‘@…À)VGŠZıä2Ç”€õåœ”QÕÉ¥„WçÏ’³;7?ºu*ÿnGÖÿõ|ÕŞÕÙµoóúZÖ[g-¼ÿWÿûgïtıº¤q÷o-wâsÖ›ë4ÖşÇ¾<ö›oú}+s…3ß7ë¿ûşª»À|2Ÿ¯Ó’óş›nîßßí?ÄİéŸÿïoœë€°Åö_nı¾ıl»ígïvë}óÅf; 1Æ*ÒVİùTs ‰¨c‘%€v=™	\œp ²	šRÃ ÚøvÑLKRÓJ¢QiÀPCØGr Õ
ŒÄT)J( d@àÉ#)Œ
H`•B }ÅË	]q@†ğT:GH…»~:ÿ³¿şQş=~ß'ÒËQÆæU~>û­íıûºé6ÜŸËıûßJ¾ÎŞûÿûyº=êØ÷÷Ó÷{½|Û>ûŸM³úí`ñşI|üôl³ÏSÚ·ÔËÏš¶;çlr·_o=²^ËîıO/êúçıÏ‰_Ù½¼o{î¯~·©¿çêû½äkë¿¬õŞ½Ê†¾ÿìæ°N·ëg¬KSªß[öï¶.İõ¶Íÿb+ëÕ¼÷mÿú*C+œÍñŞç³¿Oôíİ­½¯ì’óï±)¥Ş½šÔûÒµ¼(7úá»7õŸÛşv³—òó™ûğúå¶g-óO.ïÍìÜùtzïN×k{öoåçşõh‹¿‘`’ÄnÀÉtX.`–:(´pèÆ²qKì šd0B2òC@r[`d˜`!¤ B‰ 
8AÀ0R@õW†²©BtB1Às¹~¥„É(ï	 a£-ÇíOU*p÷`;kà†AUY  l}»å2†Å „vA[z–w—Û^»İeŞÿk¢z/÷õ~‹¯hùç‡ÿ½/×ÎøówöÏ£úïßÿù}ÕÏõõk-RÇÓşñ_•ÿúö›ëmÿïµÛºïÿúÜî}É×øşùİïÜqmeÿšöz6ûÙ·çñ÷oŸ~ö†×şØıTşé‰ğ¾~_íáèŞcÏ2A 3tY‚š¥’“°ÒI2€4 ë@Á´R1„H‰ØEŠ•œm ÖÍàˆ§ù Ğd10Á@!œG!æ`×kõ5ŠqÁ
q‚èF¶¨±Æá¢d€„ vd@–"€¶'˜lÀÃC ‡8@Ä­rBa’)Tí&1Å'$5´VIá ê‹A_<“ğ!U.*LD¸Ä&ˆRª  Ø% œ… †¢”™" ¢$µd6pLL°—‡@å°Pân±€ò Ä ABcÙ`¤G`ÏÀ2â<Î‚qj…1ØÑXYPCe€İğ2×#ÓV%¿ıK¼¿ÁÕw¯ó÷#~Üÿ²l(¯öéoçı5ık¾}Ùp}ÜÿyÁ»º¨°Õ¿…c°ßÓ?ßn9Û?k»ü{÷MÅïmıõÿûşö:ò|^ŠÓ0çF-¯¼ÔO¿ÔŞ[u*Wº_şş;nÜÿ]»Ôö^lüÿ¤ê{õ}K9òvßçòD$ÜV±ÙÀÁRB£Œœtƒ|ÁBUY™ F:P†`Òk7@Â6€	ød@
89‚A=ª@Àº†”(ÔÃ¡¼(J€ šñ —ğ‘VŒ(:±ÏFBHÈq*ƒ<!xÈA`Àyª 
hOšåïúõ“{=Ûn¿ÿ_]õËû¶~mOë?ó«cêïÿş¿½ëı÷?WÌ+^ú·×&D?‚Ç×ÿ?‰gØåãæş[ıëöğt;u†Oıw×cô­«<ı¿«íûü;wÛw÷Ïıñÿö¶éó—Çw¿|«?—íş»şoõÿÕÿşşw³xÛ[ußŸSÏ×÷Ÿ¶oækï>æÙü·—ÔÒ'ì“ûıaì·?=ÖëÆ;=êáße7Ÿû÷¹hõşÚôş/~»»¹ÿaÿóK=y~ûÿ×µ×ÿˆîR÷nñ½ı^Ge~Íÿ­»¼}îzîwí¿ßí£f×ü<?<nŞ«şş·¿ıæ£µsñÏJx‡&H€*º5…”?Ì€ zU­®j‰†™ªİ‚˜GĞ!¤ äà†€_ bU/kZ€ì_3%;S~ƒ&Äø8}B!'2‚ŒQ "ÄQšH *Ä¡…cbºy§´gè]UEr*†v®pÊóGßïß›¯û<™ú­Wìö·Í±Í—È¯í•Ş;¿½hìó}RÏÙ¯%ş¿ëÛ¥ÅÙoN±]9û­yËâ·óÑÿ{Wş©:ßïş´ÿ_ÈÇò›Oùû}é¸{¶õû¿íÌ¸¿õèİé©Ïövo¦¯Ëà?»³·ŸÛå×Ûÿa~Ødñúà$’ão€úähhQ‡ —ó‰a&‰n- · ²ÁSƒ« ËÑ
3XD-› ±:Šn)—lR+ÌĞ/ª¨Àd¦W€[°.mäš&€—¤I ƒº<©@ ©Š"®©	1dà€**¨­
Œ©DD˜ù28’BHY`H}Â0BàÀ6D'6Ğ€ ”&@ŞP)ëĞnDàµ” À3HÅk¥FñP4-…p²* ü‰b¦VÛ ‘É[@ D.ÂB€S…Ë ©¥ò€£©ÈV Pˆ @6S.`;¿!P÷=Ÿsß~·zù½:¿ÿÙówí5sı¿³ÿùŸg7ÆIùÍÏZ=×ùõõÃ«c½şMwØ¿Ş^6»|¿ÿìşÛ›jÏ»“ıŸvßËÍ¹íîƒıûë$?9_ÿŸwşjWö¿ú¯şıß½=şßÀ·núä×Ùû}sİºîÿçÿwıßûÿÇ·û¿¿*¡™•³¡@jª¤%µ–F) œ)bâàû°'/…Nô°°üÙ«'‘	PĞÂm¦O-™dê¦]” P€˜À)´„Kfâ¬¹Ü#íPZv‘Ç€+d8RÉ'PSpa	K.Ç^L¢ÍÉ…ñ€@Ğ%–ˆ… ğl€Ü¸î½ÿo¶»ß¯÷[wúÅÿv¯ù-zûûß×Æk–/~»şğt{ğşÏ¾¿j‰|ÿb½×-o÷®Ïn½Z~=ºÿö¹œz¦÷ûŞø®–¿â¾R{œÉ`ŞO÷îşş¼L©†Ú~æóş‡wc×†_s{w¯zSÿ}]?¼†ÿû"ù½½»›~owuÉ·aß?±õ×ŸîıÒ÷46e»"Øw|§ºíh“Úmõ)¯û?«sÿïÏÿöåÙOÿÿîízïû6ÿjøœwßîŞ·ç=‡õ^ÇóıÉGß[şÌŞÿk!ÿş‹PÒÿßÙù¤÷Õ·'œ¼;÷Ìãíí­—¸IJşÀçù­ş/ï½¼Sï¦À& Œ$	‚*QaÁ.®ËX2Ua2àDJ	8`  ş €Œ#Ñ©»y@¸ƒ„31­ Óî?“ÀŒ(„ZM`ıÑ‹ÁR`Ç D,õ'hG`@³B!Q‹¢— ÜÌ‰†®A%!ğ‹¢%iÔ
×ùïÇxÛ»6ÕOü5{÷·÷çÇ®Öó»Ó~oô?{ÿûâtkïùç.ıqä÷¿ûïÛó¿öŞOÿóªÒW_Ÿıòë_Ÿ‡ï­Oşÿ÷~·ÿñzùï›³Œ^•“÷¥ú–Şû×uŸøş<úşæñå3¾ÛÛÿüİ}ìøµßÏİí{ÿëV×î×z` ×±h dl$Uo¨Æ…BƒhœTDA€U˜REÉÑ œ0vpÇ‹!L ˆ	ÇIQc€;È)? ‘á…kC%‹X@4SØfT##BB‡n±	Ü¶†Šà§pF"ÄDœÄÃš0…ÍôcT¡Kõ¹Û˜Ğ B pŸrƒ\î¬…O4;N¸Œ+e §¨3BĞKÂÀÊñE#C ¦< oˆ&x¡ynzp‚†l@6ˆ€r‚°ZÄ›%Éd	je a'úOÚÀ—ğĞ xá.wfÈ%FÿöKÖşüëßğu{Ê×«÷¿îÅÜÿ>şú™µ=¾ï½¯Õƒ•üßŞçÏ÷ìşõ÷×ƒboÎ÷}ÅŸÏÃú‡oñmòÿ³ôeO9PíÿÛßø}ºÛîËø54–ÿ½ùËŞü¼)SÙ^ùw_rŸéÿnÿ‹Qån÷6ôoöúƒí¤¶1ÿëE€„/Ú/rp…\hYW€JB)$l$9° Ê+9¡¬Â´€I$AØ[h¹ ˆÅe¡% ”
$t(è@”ØÈèğø59¤vU!&ì{@#\®æ>˜€4Ô­Ş‹’@ğ1mÃ¼0€¢"OÁ¼s³$’"IîUé÷£³Såß÷õs‘ìÛ­üıíî¹Í½3Üª•Şÿk¤÷ÿö×ıÇ}ek×Şÿï»¾àÿËh{?ıÚ»ü}V”Ùï¯rßıß‰ôÙ«ı«vûÃ·vkÍ_¯'zø÷ÎïûÛE{:Å_ËÅûÿs>Ú³îıîÿ/ëwÍ,§¾[³oô:{»ûğ>ÿßò}>ã[-OSì_Äá‰šüİÚæ?üºÄİñï×5Ûv|ÿÖ¯ïlçqwóşÿ—í—j‡üyn÷¥·ÿtíïoÚoûïÎ?÷utÿyØoÚÕû6ï[_¿Ô¿ŸıOÿrıÜÿïy×óş¿{ßjÏnÿSrgíß<×)ûgù¿d(ÒbÉ    nM ^ŞÂÒ dE€!…‘D\é#npT$úbŠ*ëdQD1 TÜµ*¨Ìª $Öš„pRÃ	™Ra *Â@¶*Ú§q™$ô Œd • Rá!Á•ÓğœÔĞ „ƒ(Ü€èçÑáábQBd  RAÁ	¼C
 †y&a2AÁD%µ…A‚D#Ïq,ˆÂÇ“€ MöPD¢BĞ 	I‰(lS‚j%Ğ"d0A®Vâh8§µ4d 
‹Â€
L^´ŒÂ"„çÈ²´) ÉÀƒedÔE$ $‹¹§f?÷¿2®şÿÿ÷ôó.Œ¹=ı†tÿ{êÿÚÿâ/×o­ÿ—v…ŞÿŒÒîùñ=Çò~çÿ±ıß>ğêı±ùq¶¼Ù§ıı—Õ¹L)7Ë÷ûÏüoûê»w^Oy×Şñ×yÚê¾k}ÿşişå³}sı¿‘ùøü[	ºß¼Ïæÿ÷ÿ75«sì}pÿú=OÇßl¶·×ß[kğ©-óïßÖûÿ¿mzé«û¡,ÿı¯ß‰í×İŠYœ²ê;À&ºm½ÚÇç«ëğş÷õ–o=ÿóò{]wJ®±}ıóïÿ³öşüë½Ÿ0ÿ»Wıßü9ÕÁák»æûsıŞó^¶s~·½–lŠ£ b *ah÷‹‚@2vaË@
K9™(ÚKV ,P*V*›¥hP†ø e{Jpô	€qéV¢ k€Ñênˆ 6Tâ˜’x`„­ kÚ(X%Oh]I|m€!Äî„(ä‚3C[hDóf`”¥$(…ë?ñŸpó—ùûö_
6û~W÷¶Ïÿı¶ë?í^!ïÿñëfÖv«Átûïœõ/ÛOú{—>ç~ûô‚ô?Ìöw¾2~O³ŸçûëVçp%æ¿ÿºÿ©äm•ï9Í<¿OşÏÏ¿ì·ÈÆñ_ŞòŞ÷%}›ıPÚ¿÷oµ›ø´×Å×òÛãbŸû X8Ìá$†0§ˆd¦(DŒÑ¨ŒØ&fèÆÔ€†Ü%ß)VØV°Òc%†xÕğ!€æ±˜RåÄ
åÊ x(˜Iv!™‡Ğ.Ì À „|`ªÑ2&(€AÇ¹ˆc2*”e2Ü¢€»sUŠ&êÊà-ŒIC`h*A}"fŞ±+  ÂÖR¡Ì0³‹T!!HÉP ÜÓAq7$²â†ìaòÅâsR.ÚAAã¯€e‘6
="ÁøAîcli€w‘VàQzçÃyå*FQq6
”±#IE5"Š& RßB SkÏŸı¼ñowùß¼æEıóú+â\ı>Í÷Êıûùwjí>o›ßÚj›Øòg’±AãK^Ûûûûxç¨¨mûßE¶~Éºçùò/ù'_åûw<Ö›u¿ÕŞ3èåÿ÷¿éşû¯¬¿H=xïw‡Ò¼wê×Ú›ùùoLï\Ñ[}¯ßç³¼û~f	Œ€cĞI5B"˜RaEÁê| SÄ vĞ +KÈš%¨’×HZ*0ig,£bdtAÈPQ¢Hê…HôÇ@ÃBH4b”BĞèfDBêÃM‰ Ç¨Ícw L4BPË-—8€Fû°F±Ü<.”s
ÀZ^ÉóşÿôßüÛğş§ìTcüãOî›¿yûËÍç²ßkè1?®·ş¢¼³•½z­YÕŒ¿“îE×Ã¿ÿ¾yşö3\şoşmÿOş-¾ñş×]Ëé]t®3Föú‡ôÿOóSosçŞ¿kõı$bµıŞŠÏ»5¬ø›!ßôÕíòùùÿŒèÿL‰íçÊäyõZ¿gïìşß×ÕoÛßO¿èûû-íÿ_}êÿÜ³tŞ3ïågœÜİîÿwúùü‰û?ßä–[¹yº¿ñ%éfë}=w~×¿:îü	ğÿ¼Z‡O›©;ÿWÛş·.ôşË/Ú[7şÇ­¼Ù×¯:–¢»üÿ@şlZòäåêx…0V8jà÷Š=¢µ €UÄÙ(%¼O<P€ ¤…ş©)˜±e4[ÀÕ’*PÆ
Á0Rq’FqTÂ@B½ˆíó 2Ä²WêD¨*ÅÄ Å¹˜|ÂÄ"ü¢ ˜QV¢" QH"{XV Ğà’R?åÿ?·zé÷ßÊOwû÷ıÙŸŸóèeû{¾ÿw³ó¾û÷f^Ù|uóßßüüÊXwŸé2¼İúÓ_ÿ‹küR5şêÿ½ç´‰ıÿ[¿Šûô×¬ú_wşmDşÿó;¹}øë¤ûÿçOô³_ãæıwn¹?~¿•ïÛ­÷m4ã¯7O!ÆÀZÂâ,“öÜœ°dH—^HˆaLc(¡¸€håŠjáæJcD³ú£B("¢C÷[Õ,Á“Ó®Ş&æ±|VRÄÓŒ‚BÑ ”.²á
ŒåµŒ³‹I"µ2õæƒÅÀ|¶2×@b ÓûÂhãC¤$®ÓAA.	(­­c‡†!D|!«˜v“%‚±F“ê e %8a£Ç5ÉHQDLu ·\Œ„U–æLh‰Œ³äo¯¸.—Ù"Å
”8ŒP \ "ˆ–÷N^ˆdH LMoG… G	Öß}_şæ¶û¹_»·–GÕïPÿÃş}æ_Ï¯¿ıİ­³böÿáWĞ×}’D¾}oèïKmßÿ¿=1ŞC¯>ûµëÚè»ä»ÿ¯^¿FíşÏ¿Òoÿ¿¨{ıôu¯Öÿÿµı©ñÎŸûùÛ¥¾A¿ú·ï¾ÒşŞ]ÔŞ?FkÿJ7ºO×;¯ßq·¤‚&2Lƒ–
F)!J ’"4ÂŠ@%Ÿ cCÊD¨æ¾  Ş-R AFZµ”$ˆ&†:KÆ Í!0#Ô©šãğHİi[­’@EPˆH7 ”0—~@ \°ÀB‹	j@ 7±	Ğª3+NÈœ"g}íÎ2ë¥ıÿ¾sÿ¿;/ÿÿ6ŸÿZû«{š­R¿ŠïLîï?Ûë^oîŞ[«twO­ÿvæü@<l‹ğ}ùœùç¯+ûÇO$ß­ñ|ÏWë<éõœÿ’êß.õíŸ¼÷ä¹güÕ¯9îÕDûÓ}Ñ_¶İ³ùŞ½ÿÿåz^¼¼ïÿ®—ßôâhå}ÃvIûıåçŸ÷õOÍùíg³;Ÿ:ºŸŞ}»ç~?½û×ÿıSE~¯?×ş/—ÕiØfüâß¹Wÿ|ŞúüNÍ½î}µ®§o÷_kÔÿæ½÷İ·4ã-ßüÛıûù»ïıïúœî\ßİ{²Ÿï¿Û×ç~í/OëŸb¾ÿëkáßíiñ²÷  ÈÆš øğ,‚B@ÃFÑ›°İrğ0	‚+"3Ê@ ¥Ğé„D!F´UÂÀá†RsÇ`¡6R©@se¥ÍI8 "ç€ÀkkÂ0A	$Kğ#(Š'Œ¸v”)€^ÀrPyôTÃV€ƒ¤h‡ı•ıß÷VyuÿşºÛ“zçıÕ‰KûıO^I-?–óOA›ııüûÜ7ÿuÜ?Şİ¿}ÍFùªß|ÿ{óíş}XÏº}şÿ>®»¿k¾zï<)ïï¹}·N7î¿õñÕ>·/8y¿|ş½~Õw¹îúï_UùzÒNŸ6·İ{7İ™÷±3*Š1*èàì`„â" &^’F™,Bª)U4ç Ñ¹f³áš ¤01’æÀ ¥&Îè`ˆ2,İbY‚‰¢hyQ‰jÕûUC‹Ê€ò DÂ(H9JQºĞHXÙ#À´šHX¡'c d™D•‚E‚„1µ9ğ¢D@1Ğ8ÀêC‘ˆC&ÁYÀht$LD6À ""œ¾–€”µŠv"o"*ADÁÙF0 \.
ğ0%*ä‚ Dò‡Ô!7‚˜ 0ÕzhêpŠBâ‚B˜ı€@Î…©‘u2@!÷ÿî½öÜ•­ù|.gïó¯÷QKgy¸Õ|ífÎ.}ô^:íÎµûüÿ›ß?µ?1yÿÿ¹Şó¸×«wpIvÿî_¦îÏİÿoOß•»™ß¼UpîßV˜}}ÿ«ßoíwïÆŞ5¦ûüıaá¿w»§×ÿ§öŸnëø{ƒå¶óoîõ°ûü#%,La Ñæ˜9U ƒ7  ÅÑ^0“á;4x0`8 	&ş JH(irÀ7ÛlP– LjBØ©f 6ƒ ›€ğ6($Ä ¼D‰€  Ã€%Š,¤pI ²‘Œ=ÑÙp„Å÷QöÈ¢’!IOØ	ü²8÷ş¿ÿîmïšşîö>8şïîş¿.Êÿ¬~wû·ZlşÏ—øÿ6?Ù—î=çN“Ëwúåéî­ÿ|Şş¼~¹ÿıÿçõ«Çî÷êıõeãŞoÍûc]'»Ú;û§ıµœ»3ûÿİîW·?ßëÿş\]Õúßæú?¾÷³÷wŞ3ûé÷«ıöÿbúo÷ûOñÙÚ÷Oß®úÙ¸Îæ7¿u¹îy®¿ÿóstöïêşÿòİà=÷5ïå÷rÿ¨ßüúıïû¿ÿÿüÖñö÷ç>çöıëÑËVE‹®ôñ^úÿjêmŞ®ëï-[íoçséŸglÎiŸ]ˆÙ²ÿzĞÃÿËîª×~<K¾"`NP Wb  ù$(¢h ­0)…€  `QJ!ö=pbSÄ†P'³‚$Ò<áúĞ\F%¤2	ş +&£À¤iW¢Va%ÕÒ
°• V‰¢0i8{ k ¦g¬â@â‰.à”  •At
\êŸxë÷ïıŞ·i¾‹#£×¯Ï¥¾§M³ÿıïù®½ù½~ÿ»wºe_÷üŞÒ­_iP¯ÿ¥Ok§ÚïÚıÏµØqVïò®î¡­ö/¯ŸöÿûMÕı¿¿Î¯ùv³o·~ÿTî§öoÇJw7¼²Éõ[İ—§³{ÿ÷Ïş÷ë…–o±èñP G€Iòj‡k/¼Ä8”@@È	' ÂWXÓU?¥À RÕ(@ˆjĞËå“%t}J‚‰ğ°Ñkû KpHó¥‡9,0ŞtNCd Ø4Æ È´¡PÌ²<Ş+Á€| )‰ aÙ8 ÚğÀD•*ˆ£ Â@)ª3Ù‹v”ó\>!årÆÎ9ş‚…€Wğ®’(È›P îÄBQ—»GH0ì(#-,H¦Á #h(R‹@D¤à(l´ `Rb!FÄ„f €0ÇˆLä2…@Gœ€ÏHB\Ò` N²Èa‘K­{¸ùè{¯»Kí»ã¿úşî¹—wu4½ùïÛ6¾ñíó£÷ë5XåÏëS-ôşÿ~îyëgÿçßùİ3Ô=ûh—ÿöu~û}ôç¿÷<Û>ÿü2²Ïó¯ùãí{2İï5ô*xìíıßÏÿ¯~Ùo>g7/·õ®ßÿÒ~û5ÿlßßÚÛw*\s*<!--\s*\*\/)\s*[\r\n]*/gi, '')
            .replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g, '');
        }

        while (i--) {
          node = nodes[i];
          value = node.firstChild ? node.firstChild.value : '';

          if (name === "script") {
            // Remove mce- prefix from script elements and remove default type since the user specified
            // a script element without type attribute
            type = node.attr('type');
            if (type) {
              node.attr('type', type == 'mce-no/type' ? null : type.replace(/^mce\-/, ''));
            }

            if (value.length > 0) {
              node.firstChild.value = '// <![CDATA[\n' + trim(value) + '\n// ]]>';
            }
          } else {
            if (value.length > 0) {
              node.firstChild.value = '<!--\n' + trim(value) + '\n-->';
            }
          }
        }
      });

      // Convert comments to cdata and handle protected comments
      htmlParser.addNodeFilter('#comment', function (nodes) {
        var i = nodes.length, node;

        while (i--) {
          node = nodes[i];

          if (node.value.indexOf('[CDATA[') === 0) {
            node.name = '#cdata';
            node.type = 4;
            node.value = node.value.replace(/^\[CDATA\[|\]\]$/g, '');
          } else if (node.value.indexOf('mce:protected ') === 0) {
            node.name = "#text";
            node.type = 3;
            node.raw = true;
            node.value = unescape(node.value).substr(14);
          }
        }
      });

      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {
        var i = nodes.length, node;

        while (i--) {
          node = nodes[i];
          if (node.type === 7) {
            node.remove();
          } else if (node.type === 1) {
            if (name === "input" && !("type" in node.attributes.map)) {
              node.attr('type', 'text');
            }
          }
        }
      });

      // Remove internal data attributes
      htmlParser.addAttributeFilter(
        'data-mce-src,data-mce-href,data-mce-style,' +
        'data-mce-selected,data-mce-expando,' +
        'data-mce-type,data-mce-resize',

        function (nodes, name) {
          var i = nodes.length;

          while (i--) {
            nodes[i].attr(name, null);
          }
        }
      );

      // Return public methods
      return {
        /**
         * Schema instance that was used to when the Serializer was constructed.
         *
         * @field {tinymce.html.Schema} schema
         */
        schema: schema,

        /**
         * Adds a node filter function to the parser used by the serializer, the parser will collect the specified nodes by name
         * and then execute the callback ones it has finished parsing the document.
         *
         * @example
         * parser.addNodeFilter('p,h1', function(nodes, name) {
         *  for (var i = 0; i < nodes.length; i++) {
         *   console.log(nodes[i].name);
         *  }
         * });
         * @method addNodeFilter
         * @method {String} name Comma separated list of nodes to collect.
         * @param {function} callback Callback function to execute once it has collected nodes.
         */
        addNodeFilter: htmlParser.addNodeFilter,

        /**
         * Adds a attribute filter function to the parser used by the serializer, the parser will
         * collect nodes that has the specified attributes
         * and then execute the callback ones it has finished parsing the document.
         *
         * @example
         * parser.addAttributeFilter('src,href', function(nodes, name) {
         *  for (var i = 0; i < nodes.length; i++) {
         *   console.log(nodes[i].name);
         *  }
         * });
         * @method addAttributeFilter
         * @method {String} name Comma separated list of nodes to collect.
         * @param {function} callback Callback function to execute once it has collected nodes.
         */
        addAttributeFilter: htmlParser.addAttributeFilter,

        /**
         * Serializes the specified browser DOM node into a HTML string.
         *
         * @method serialize
         * @param {DOMNode} node DOM node to serialize.
         * @param {Object} args Arguments option that gets passed to event handlers.
         */
        serialize: function (node, args) {
          var self = this, impl, doc, oldDoc, htmlSerializer, content, rootNode;

          // Explorer won't clone contents of script and style and the
          // selected index of select elements are cleared on a clone operation.
          if (Env.ie && dom.select('script,style,select,map').length > 0) {
            content = node.innerHTML;
            node = node.cloneNode(false);
            dom.setHTML(node, content);
          } else {
            node = node.cloneNode(true);
          }

          // Nodes needs to be attached to something in WebKit/Opera
          // This fix will make DOM ranges and make Sizzle happy!
          impl = document.implementation;
          if (impl.createHTMLDocument) {
            // Create an empty HTML document
            doc = impl.createHTMLDocument("");

            // Add the element or it's children if it's a body element to the new document
            each(node.nodeName == 'BODY' ? node.childNodes : [node], function (node) {
              doc.body.appendChild(doc.importNode(node, true));
            });

            // Grab first child or body element for serialization
            if (node.nodeName != 'BODY') {
              node = doc.body.firstChild;
            } else {
              node = doc.body;
            }

            // set the new document in DOMUtils so createElement etc works
            oldDoc = dom.doc;
            dom.doc = doc;
          }

          args = args || {};
          args.format = args.format || 'html';

          // Don't wrap content if we want selected html
          if (args.selection) {
            args.forced_root_block = '';
          }

          // Pre process
          if (!args.no_events) {
            args.node = node;
            self.onPreProcess(args);
          }

          // Parse HTML
          rootNode = htmlParser.parse(trim(args.getInner ? node.innerHTML : dom.getOuterHTML(node)), args);
          trimTrailingBr(rootNode);

          // Serialize HTML
          htmlSerializer = new Serializer(settings, schema);
          args.content = htmlSerializer.serialize(rootNode);

          // Replace all BOM characters for now until we can find a better solution
          if (!args.cleanup) {
            args.content = Zwsp.trim(args.content);
            args.content = args.content.replace(/\uFEFF/g, '');
          }

          // Post process
          if (!args.no_events) {
            self.onPostProcess(args);
          }

          // Restore the old document if it was changed
          if (oldDoc) {
            dom.doc = oldDoc;
          }

          args.node = null;

          return args.content;
        },

        /**
         * Adds valid elements rules to the serializers schema instance this enables you to specify things
         * like what elements should be outputted and what attributes specific elements might have.
         * Consult the Wiki for more details on this format.
         *
         * @method addRules
         * @param {String} rules Valid elements rules string to add to schema.
         */
        addRules: function (rules) {
          schema.addValidElements(rules);
        },

        /**
         * Sets the valid elements rules to the serializers schema instance this enables you to specify things
         * like what elements should be outputted and what attributes specific elements might have.
         * Consult the Wiki for more details on this format.
         *
         * @method setRules
         * @param {String} rules Valid elements rules string.
         */
        setRules: function (rules) {
          schema.setValidElements(rules);
        },

        onPreProcess: function (args) {
          if (editor) {
            editor.fire('PreProcess', args);
          }
        },

        onPostProcess: function (args) {
          if (editor) {
            editor.fire('PostProcess', args);
          }
        },

        /**
         * Adds a temporary internal attribute these attributes will get removed on undo and
         * when getting contents out of the editor.
         *
         * @method addTempAttr
         * @param {String} name string
         */
        addTempAttr: addTempAttr,

        // Internal
        trimHtml: trimHtml,
        getTrimmedContent: getTrimmedContent,
        trimContent: trimContent
      };
    };
  }
);

/**
 * VK.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This file exposes a set of the common KeyCodes for use. Please grow it as needed.
 */
define(
  'tinymce.core.util.VK',
  [
    "tinymce.core.Env"
  ],
  function (Env) {
    return {
      BACKSPACE: 8,
      DELETE: 46,
      DOWN: 40,
      ENTER: 13,
      LEFT: 37,
      RIGHT: 39,
      SPACEBAR: 32,
      TAB: 9,
      UP: 38,

      modifierPressed: function (e) {
        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);
      },

      metaKeyPressed: function (e) {
        // Check if ctrl or meta key is pressed. Edge case for AltGr on Windows where it produces ctrlKey+altKey states
        return (Env.mac ? e.metaKey : e.ctrlKey && !e.altKey);
      }
    };
  }
);

/**
 * ClientRect.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Utility functions for working with client rects.
 *
 * @private
 * @class tinymce.geom.ClientRect
 */
define(
  'tinymce.core.geom.ClientRect',
  [
  ],
  function () {
    var round = Math.round;

    function clone(rect) {
      if (!rect) {
        return { left: 0, top: 0, bottom: 0, right: 0, width: 0, height: 0 };
      }

      return {
        left: round(rect.left),
        top: round(rect.top),
        bottom: round(rect.bottom),
        right: round(rect.right),
        width: round(rect.width),
        height: round(rect.height)
      };
    }

    function collapse(clientRect, toStart) {
      clientRect = clone(clientRect);

      if (toStart) {
        clientRect.right = clientRect.left;
      } else {
        clientRect.left = clientRect.left + clientRect.width;
        clientRect.right = clientRect.left;
      }

      clientRect.width = 0;

      return clientRect;
    }

    function isEqual(rect1, rect2) {
      return (
        rect1.left === rect2.left &&
        rect1.top === rect2.top &&
        rect1.bottom === rect2.bottom &&
        rect1.right === rect2.right
      );
    }

    function isValidOverflow(overflowY, clientRect1, clientRect2) {
      return overflowY >= 0 && overflowY <= Math.min(clientRect1.height, clientRect2.height) / 2;

    }

    function isAbove(clientRect1, clientRect2) {
      if ((clientRect1.bottom - clientRect1.height / 2) < clientRect2.top) {
        return true;
      }

      if (clientRect1.top > clientRect2.bottom) {
        return false;
      }

      return isValidOverflow(clientRect2.top - clientRect1.bottom, clientRect1, clientRect2);
    }

    function isBelow(clientRect1, clientRect2) {
      if (clientRect1.top > clientRect2.bottom) {
        return true;
      }

      if (clientRect1.bottom < clientRect2.top) {
        return false;
      }

      return isValidOverflow(clientRect2.bottom - clientRect1.top, clientRect1, clientRect2);
    }

    function isLeft(clientRect1, clientRect2) {
      return clientRect1.left < clientRect2.left;
    }

    function isRight(clientRect1, clientRect2) {
      return clientRect1.right > clientRect2.right;
    }

    function compare(clientRect1, clientRect2) {
      if (isAbove(clientRect1, clientRect2)) {
        return -1;
      }

      if (isBelow(clientRect1, clientRect2)) {
        return 1;
      }

      if (isLeft(clientRect1, clientRect2)) {
        return -1;
      }

      if (isRight(clientRect1, clientRect2)) {
        return 1;
      }

      return 0;
    }

    function containsXY(clientRect, clientX, clientY) {
      return (
        clientX >= clientRect.left &&
        clientX <= clientRect.right &&
        clientY >= clientRect.top &&
        clientY <= clientRect.bottom
      );
    }

    return {
      clone: clone,
      collapse: collapse,
      isEqual: isEqual,
      isAbove: isAbove,
      isBelow: isBelow,
      isLeft: isLeft,
      isRight: isRight,
      compare: compare,
      containsXY: containsXY
    };
  }
);

/**
 * RangePoint.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.dom.RangePoint',
  [
    'ephox.katamari.api.Arr',
    'tinymce.core.geom.ClientRect'
  ],
  function (Arr, ClientRect) {
    var isXYWithinRange = function (clientX, clientY, range) {
      if (range.collapsed) {
        return false;
      }

      return Arr.foldl(range.getClientRects(), function (state, rect) {
        return state || ClientRect.containsXY(rect, clientX, clientY);
      }, false);
    };

    return {
      isXYWithinRange: isXYWithinRange
    };
  }
);
/**
 * ControlSelection.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles control selection of elements. Controls are elements
 * that can be resized and needs to be selected as a whole. It adds custom resize handles
 * to all browser engines that support properly disabling the built in resize logic.
 *
 * @class tinymce.dom.ControlSelection
 */
define(
  'tinymce.core.dom.ControlSelection',
  [
    'ephox.katamari.api.Fun',
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.RangePoint',
    'tinymce.core.Env',
    'tinymce.core.util.Delay',
    'tinymce.core.util.Tools',
    'tinymce.core.util.VK'
  ],
  function (Fun, NodeType, RangePoint, Env, Delay, Tools, VK) {
    var isContentEditableFalse = NodeType.isContentEditableFalse;
    var isContentEditableTrue = NodeType.isContentEditableTrue;

    function getContentEditableRoot(root, node) {
      while (node && node != root) {
        if (isContentEditableTrue(node) || isContentEditableFalse(node)) {
          return node;
        }

        node = node.parentNode;
      }

      return null;
    }

    var isImage = function (elm) {
      return elm && elm.nodeName === 'IMG';
    };

    var isEventOnImageOutsideRange = function (evt, range) {
      return isImage(evt.target) && !RangePoint.isXYWithinRange(evt.clientX, evt.clientY, range);
    };

    var contextMenuSelectImage = function (editor, evt) {
      var target = evt.target;

      if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {
        evt.preventDefault();
        editor.selection.select(target);
      }
    };

    return function (selection, editor) {
      var dom = editor.dom, each = Tools.each;
      var selectedElm, selectedElmGhost, resizeHelper, resizeHandles, selectedHandle, lastMouseDownEvent;
      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;
      var width, height, editableDoc = editor.getDoc(), rootDocument = document, isIE = Env.ie && Env.ie < 11;
      var abs = Math.abs, round = Math.round, rootElement = editor.getBody(), startScrollWidth, startScrollHeight;

      // Details about each resize handle how to scale etc
      resizeHandles = {
        // Name: x multiplier, y multiplier, delta size x, delta size y
        /*n: [0.5, 0, 0, -1],
        e: [1, 0.5, 1, 0],
        s: [0.5, 1, 0, 1],
        w: [0, 0.5, -1, 0],*/
        nw: [0, 0, -1, -1],
        ne: [1, 0, 1, -1],
        se: [1, 1, 1, 1],
        sw: [0, 1, -1, 1]
      };

      // Add CSS for resize handles, cloned element and selected
      var rootClass = '.mce-content-body';
      editor.contentStyles.push(
        rootClass + ' div.mce-resizehandle {' +
        'position: absolute;' +
        'border: 1px solid black;' +
        'box-sizing: box-sizing;' +
        'background: #FFF;' +
        'width: 7px;' +
        'height: 7px;' +
        'z-index: 10000' +
        '}' +
        rootClass + ' .mce-resizehandle:hover {' +
        'background: #000' +
        '}' +
        rootClass + ' img[data-mce-selected],' + rootClass + ' hr[data-mce-selected] {' +
        'outline: 1px solid black;' +
        'resize: none' + // Have been talks about implementing this in browsers
        '}' +
        rootClass + ' .mce-clonedresizable {' +
        'position: absolute;' +
        (Env.gecko ? '' : 'outline: 1px dashed black;') + // Gecko produces trails while resizing
        'opacity: .5;' +
        'filter: alpha(opacity=50);' +
        'z-index: 10000' +
        '}' +
        rootClass + ' .mce-resize-helper {' +
        'background: #555;' +
        'background: rgba(0,0,0,0.75);' +
        'border-radius: 3px;' +
        'border: 1px;' +
        'color: white;' +
        'display: none;' +
        'font-family: sans-serif;' +
        'font-size: 12px;' +
        'white-space: nowrap;' +
        'line-height: 14px;' +
        'margin: 5px 10px;' +
        'padding: 5px;' +
        'position: absolute;' +
        'z-index: 10001' +
        '}'
      );

      function isResizable(elm) {
        var selector = editor.settings.object_resizing;

        if (selector === false || Env.iOS) {
          return false;
        }

        if (typeof selector != 'string') {
          selector = 'table,img,div';
        }

        if (elm.getAttribute('data-mce-resize') === 'false') {
          return false;
        }

        if (elm == editor.getBody()) {
          return false;
        }

        return editor.dom.is(elm, selector);
      }

      function resizeGhostElement(e) {
        var deltaX, deltaY, proportional;
        var resizeHelperX, resizeHelperY;

        // Calc new width/height
        deltaX = e.screenX - startX;
        deltaY = e.screenY - startY;

        // Calc new size
        width = deltaX * selectedHandle[2] + startW;
        height = deltaY * selectedHandle[3] + startH;

        // Never scale down lower than 5 pixels
        width = width < 5 ? 5 : width;
        height = height < 5 ? 5 : height;

        if (selectedElm.nodeName == "IMG" && editor.settings.resize_img_proportional !== false) {
          proportional = !VK.modifierPressed(e);
        } else {
          proportional = VK.modifierPressed(e) || (selectedElm.nodeName == "IMG" && selectedHandle[2] * selectedHandle[3] !== 0);
        }

        // Constrain proportions
        if (proportional) {
          if (abs(deltaX) > abs(deltaY)) {
            height = round(width * ratio);
            width = round(height / ratio);
          } else {
            width = round(height / ratio);
            height = round(width * ratio);
          }
        }

        // Update ghost size
        dom.setStyles(selectedElmGhost, {
          width: width,
          height: height
        });

        // Update resize helper position
        resizeHelperX = selectedHandle.startPos.x + deltaX;
        resizeHelperY = selectedHandle.startPos.y + deltaY;
        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;
        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;

        dom.setStyles(resizeHelper, {
          left: resizeHelperX,
          top: resizeHelperY,
          display: 'block'
        });

        resizeHelper.innerHTML = width + ' &times; ' + height;

        // Update ghost X position if needed
        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {
          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));
        }

        // Update ghost Y position if needed
        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {
          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));
        }

        // Calculate how must overflow we got
        deltaX = rootElement.scrollWidth - startScrollWidth;
        deltaY = rootElement.scrollHeight - startScrollHeight;

        // Re-position the resize helper based on the overflow
        if (deltaX + deltaY !== 0) {
          dom.setStyles(resizeHelper, {
            left: resizeHelperX - deltaX,
            top: resizeHelperY - deltaY
          });
        }

        if (!resizeStarted) {
          editor.fire('ObjectResizeStart', { target: selectedElm, width: startW, height: startH });
          resizeStarted = true;
        }
      }

      function endGhostResize() {
        resizeStarted = false;

        function setSizeProp(name, value) {
          if (value) {
            // Resize by using style or attribute
            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {
              dom.setStyle(selectedElm, name, value);
            } else {
              dom.setAttrib(selectedElm, name, value);
            }
          }
        }

        // Set width/height properties
        setSizeProp('width', width);
        setSizeProp('height', height);

        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);
        dom.unbind(editableDoc, 'mouseup', endGhostResize);

        if (rootDocument != editableDoc) {
          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);
          dom.unbind(rootDocument, 'mouseup', endGhostResize);
        }

        // Remove ghost/helper and update resize handle positions
        dom.remove(selectedElmGhost);
        dom.remove(resizeHelper);

        if (!isIE || selectedElm.nodeName == "TABLE") {
          showResizeRect(selectedElm);
        }

        editor.fire('ObjectResized', { target: selectedElm, width: width, height: height });
        dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));
        editor.nodeChanged();
      }

      function showResizeRect(targetElm, mouseDownHandleName, mouseDownEvent) {
        var position, targetWidth, targetHeight, e, rect;

        hideResizeRect();
        unbindResizeHandleEvents();

        // Get position and size of target
        position = dom.getPos(targetElm, rootElement);
        selectedElmX = position.x;
        selectedElmY = position.y;
        rect = targetElm.getBoundingClientRect(); // Fix for Gecko offsetHeight for table with caption
        targetWidth = rect.width || (rect.right - rect.left);
        targetHeight = rect.height || (rect.bottom - rect.top);

        // Reset width/height if user selects a new image/table
        if (selectedElm != targetElm) {
          detachResizeStartListener();
          selectedElm = targetElm;
          width = height = 0;
        }

        // Makes it possible to disable resizing
        e = editor.fire('ObjectSelected', { target: targetElm });

        if (isResizable(targetElm) && !e.isDefaultPrevented()) {
          each(resizeHandles, function (handle, name) {
            var handleElm;

            function startDrag(e) {
              startX = e.screenX;
              startY = e.screenY;
              startW = selectedElm.clientWidth;
              startH = selectedElm.clientHeight;
              ratio = startH / startW;
              selectedHandle = handle;

              handle.startPos = {
                x: targetWidth * handle[0] + selectedElmX,
                y: targetHeight * handle[1] + selectedElmY
              };

              startScrollWidth = rootElement.scrollWidth;
              startScrollHeight = rootElement.scrollHeight;

              selectedElmGhost = selectedElm.cloneNode(true);
              dom.addClass(selectedElmGhost, 'mce-clonedresizable');
              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');
              selectedElmGhost.contentEditable = false; // Hides IE move layer cursor
              selectedElmGhost.unSelectabe = true;
              dom.setStyles(selectedElmGhost, {
                left: selectedElmX,
              ûgÔÓû^÷ø¾²ÿÿe÷ıee×ı[÷ûô/íöA±ıß_¿»ò<ûó~ßÊ*ò¾¶7FÎ{¹mø÷Ÿ‹ïúäWå¶y®/Û´zõöô¾öW?çqo÷şnWûgûûgÏÃŞÚÖu¿çø=òÛsÇıÇßüE[2pr]şØÇı¹ŠÓÑ¾ysymQp>–úıëîßüı_æôıÛŸZoı:¯şdİÔ÷|í5OóïıíùöªŠ^ÿOütÿúäşşk¿œşî4§??Ãsıß·ùç¿í¦GWîï»ßşÚu.şıÙ¦Ënÿıª÷ã¿ïš÷ßï8ú×›Ø<3©ç¾ô¹{?Xÿ××ã˜óÿïë&O¿v®ÿ®ñüêÏû®Oíëç‹zÕ#ç‰Î´éÿáûå×ùR)¾óû›ßû÷wsû2ºìqk•üo—ÏnóÚÏ¿xÿê o*~¿»»oışÃ¾õ¼ßÿğÿÑ¿¿ó“	ã{šo_»½Ïıÿ±ù~çûßÉ…‘›ïÿËüEgjş¼?¬äåµ®U]ÖÙØ÷öi?õ}µû|VwÇ÷WÓõ©İn*Î×Áæø÷1û¨Şõûoÿß2ÔÛßïgunÙ¯–=sùİfİú¯pêvŞó6_'[ew–Nmú?»¾ş°dŞl¬næ×è’^¬k‰äsíÖsuïÏŞ2ûó§F¯oşîıùÛ[OºòŸ­ôô>ätÚ?ùÜ¼û!ßë»İı¶9¦}æç½÷s¾á|üïféûÛWÿÿ÷¿Ùk§Ã·‹'.½Ÿ·¿{×ÿü}’ßº-‡ºô¹ÿ»ç¯½§?å¾Ç¶}Ëºtãùm§5ï“_ÆkıÿXË¶š×üoó=™êíïewÒ?œÂû~»ß»ƒÃVµï¿»ö[õÛ÷ê{ä•÷ÌùİpyØmşß1ãçÑıwi¬Ooæÿ£>ÿÓ<oñï¿ûÏş6è-ÎÑ—ç¾»×wvŸåõíÒşÿÿŞ–y÷€ı}íå¸Ûı)ü÷ÛÕŸ¯¶÷­ÿdáõ}ºì¾'—7ØNÏ¢ñY¹]ğŸëúâi-]vïWxŒàsÿrY»×ô>ûöã·²¦P?øFİ$³¶ûÓ+ø6xş¯šöU£ş¿h³¿Nõü‹¯ú¯±yô½¥¾m“Oçßæî
[r{÷úïù^kºÓØ«yŸ÷:5Úëİéæ,àïÛñŸÖßçÈ¥µ½ÃúÛÅÿ±ë÷ÿÏßêu¿yŞıï•ö§ÙÿôŸ^¾~÷û~Ó^gÏÜ2_ÑÁ×à÷vÜÿõ^-óV•ü×ïó·—™"ßg~rÿLëøYÚº5ƒ¨¯Å?½ÿ±¿:­5×[UÇ{v¿õÿ{­Å^ö×rºñzÏùÓõ"·î§wk|?®Î´øBwM~×áëııñı­Ÿ¿úÖë¯Dø^ç]Õïéœ½öá¿à}İûŸ<ªù~ùû6ß+ÿ{é/åÖéã&ïõÿ¶íùûôö{ö½÷óEŞÿe-Ú{op«Şhùùëïâöú5iŞ³KÏÏÇâé-ÿ;ÿâ÷ïúmŞñınµtÿû·Ô|§ùUO{Ï~şÿïû~ç¢m_WOÿxış×h™—ºŸ_Õ¾Ïïë;ø§œİÇ¹÷şµÇõÿ=½o·µÕÆüÎí¿úÿş[ö½{×7Îü´çm¹ñş7¿Ûwîõ~3¼ßÚ}µ¾ìÆ¾}kíİ6¼·®Òßö¿Şõ_w:|súıf+­·Û÷ıı7ß¹û¸Ûü]ûÛ>ÿx~yÿO²îC§û«_w»Ÿ>[3<ßbıã#õiWv_ÿşzÏ[ö—ÈöïóîÑ[¿DÊ´¾K¿ç×¿üªÿşí½ë}ù{û¬wvîá¥¯ÿsñİ|¬×®¯{Œ?¿ùjşyX¯‚“Eòÿz­şWø/ÓuúLí[Ïÿñ¢ú¿ø"ìÆâ~ú¹ßßÓõ­üÿìçÜæ>ôş¾ÿ÷d~5ãøŸÜ^¾ûòåeÿÛÿg;Ôüÿ'õíß¯Guí?{]şå•Äkßê—Íû—¯Şºßÿ×ºŸ‹/Ó5jüõÖõ71o‘Íš\7¾‹šÇmßŸKÏÚ—ÿk÷/æëğ¶¹ÿmÚÎÿ¹­ã|¾AıTúËOM¿Å=×üokÄ»ËöõO£kîçÿÿÈ¹o–W6ÑåÛÏVì¼Ì×{ÇŸïLûg__}äOßíßÇu¬µ¶_÷dîùÚU·ºÍYıüƒëæoùŸóÿñ¿o~Ó?r½„Ş—ºëW9şß?ğü|¿İ¼ş{oê¨Ööûrß÷ø^Õ­vŞi×òóô—ıÒ²ÔlÚÚë7ëşşHØ†6_ï¿×Ï_Óôüh§ß·M~·ƒÑ¿~§û}Šsí:ŞÜ¸WS«¥ßIì½Êo¼,¿İŞ‡çì|´ÿÉçşçÿûİòß_÷ŸµÚõ´ò·:±OË>o¾yÿîŞÁ˜súvß|Tz¿ÿ§;·vÄÇ¡w!|{4ıß»§øñ°šoïwŸ)1¿Û\º¯·Êz¬»Û?Õ)Ê~7ÜË{/ºöOy››¿ô÷ük'ŸìM^_c=ÛÓşóãùÃ»»-øïŞß_ïùı2Çüß¶ôWUókë¿Òİşô§‹®ïÿÎ®5ş‹u/ëİ÷ÿóùÿL5s‡ñó÷'8o¯\ÿßLeÚşJïï‹Ûë£ÿæşMßÍöÒÿÆ”}Mó³ïÿıCbXü¾fç½-}küÿ‘Ó“=ôæ6İü2Ùİó~i,³Óå¶ºgWßo»¸Şœê_¹ÖòXú÷¶ûöøùÿ…¿¿÷ú³]áÑíş5Ñşï5¿/õ]ı~ÿ6÷µÒÏ4õğ¿çÅï^Iw³ıˆ|ÿÎê÷f÷Õtgùü?ıÉiÿ¯Åøöeık[ÇûU›.ã’w\=ßx]şvìÏ»Vı&õ7Ş}åo£µ÷¹÷|Ç[ııwßïñ¿?M¸ıÿ»÷¯ùßòyı÷wûŞµéò›ÕçõëåBdíÓº‡õ}åo¿|ï™µÆú»ÿ§¿–öOß§NŸß¿Ä/£´Cç?zşj·Ü¥nû«¸ín7÷§ş÷ßïg¯j¿½ı¯¿ÓÕ‰®ú?ïû5ÒóRñJ÷¶·§Á¾s9â·ŞõqíÓz^;mes]R»ïÿ—5ãÿıõıÿÿİVüµÜuìëù¾ó=ekÚ§zú_ÿ:Cb~ô7y»–ã×÷nõİüşnô_‰w¯}şşdËû¹¾ızÿ?ùÿÏöæşÓXîÌÁïš¿ı¼Ö³ßrøïß=±ı~‹şj‰é†÷—Úæãÿş|şëæû_Ğºñ¯Ÿ›{‡ÿoöŒ¯}vW>#m^Ì»ïÏógñ«ïÿ®–Ò{Šßíäõ¹´ÿöÓã“HÿÅÎO#ÀüîìnÎšıõ4í#íı—gâi¿º_İïúDş~oî÷ô_îiöŠşñßG}ÓOû»øËWlõÌÿûÿÿßÉ·»ôò?û¡ºæèVµµ»åŸÕyKˆ¼ÍÛZ'fİßî¤îÿ·§ëï'şùşîe_Ï]}çûÎY¼´d¿ë¾}î?úza¿=nk…@ûİL°š'gü×{ğåi[¾Ó?Ÿş]/Å“½WŞùä·k÷½e×ßBíî¡ùšVıòŠÑ~oÙï5[ä9ûîAş=;Wk=şšË¯Â=8ÿûı#¼súîÆ’Ò+"¶íÖûë3İgYj_öµóştsÚ1ıÔ8jùşyïîBtİì{ğ=%ÛÚŞYNsßû;sóÿË¥ÛŞşß?ãªìö~ƒÿîËïwmrmòEî;qíÖàï>õû£ï'ë¥Ívşşœõÿg—ëş÷øÿÏÉõïÿf¹úş>hî{3+~Øò{4T¯z´ç3?ú‡íİÈı¿Ô¿MŞœ³¡óuuºGïûÛÿB1úãV^ú-³¿÷êûòßu»¾t÷"‹îÅóëÛÏ¿#×õèJıue~î­U\ı:íÇ}Jÿÿåõ_šüß¬ı½}×P—wq]IN²ú?¬<Oz·Í§—ågîÛy—±îG÷«ªêÏºd.†ö×±k‚ymä¯¦÷úûdµ&ÌÓïÖç¸öÏŞ¿·ÅŸóÿÒÓí¯ò÷î÷k}ıºS^F»}›?ğõ{ø¯ı¹]¸æKıë1m\ç}ùÚ”Ÿí/øşŞ+±;ä§;ïİûª»yş‰¬zOï”ÓáoÍ¬jä>`Mç×ñÿ}3ı’»;v/zèõîÃ%íÕ÷·ßå‡#}ı2§vUÖè·´Ë¶/\¼®y¶Ûj7>½òöÓw·­õ_w—ñó@çZ&ÿÓùz“¤¿ñö´gÜëş›ëÍóÎùü«o3ÿ¾ÿx÷İÎ;æşwİø7_;ï÷İı¿ÕÛİ¾íıÿqÿOŠı4£+¿÷ ¶Ü?½Íÿ—ÿÑûh³sÿÊ'´ï¿K_í×7ÿş³ÿW¿ïOéÍ¼û?´ı{×Ï·{¿_Ş?íÿã½Úñ¿9oX#Íù_ò¯º£îÿ»WÕ©o3{ô_·şëş}Òÿƒü¾9{½ì–Clö}`²ù¯şûÒh÷«ßŸşqİ+ï×û¸©E‡ÿèÊ²ÿîlÿb=6Íkßİ¾SÛnİçÍuÏwß·~ı¶ÿWİÿ~¾ç0©ßÙ{ı—­şï´ÿÍO‚úöïW½ÿïÎ¨ÜÈîíÖ©çúÛdÿwÓÛäüç™÷$óœgWÿÔõûo«ÎNĞ~qáøÙe{¹ı^÷}Ñğôÿe:­ûõfù¼-ÄKı½²göÎ£VùÿÈS.H×Ö­¶ÛÌ‚Ï—×¿£¿Ã#ş¦ÍµôÉ¢ókÖ9¾ùÑ*û»ÿÿ}Ùvº–ÉûÙØi±ù|öI\şßİØ?c¸óËØsÿÿ«–şÍwø¿ÿşúwÎŞf÷ó¯ïÛv÷_ÿöÿşÃw½ßwíÃøuÿùşëú§wúôÿßßùûQ5×®‘•Ÿ÷}côÎí÷¯ËíM§g¯ãÊwî©t«ŸÕhşÛÏï“»y¯ö£¼vş‡lõß·ÿ~ã¶ïlgwÔ÷aM¿;ßÑxNºõíúŸ»3öñê10·Íüÿƒüû~Õã1ÿøvµW]è‡.Ø’ù}®ÿK_Üáé­=vèÛÔ¦»ø?…ÈüW²ôfµ½•oøvj÷½ßùüu3ê·ïÿÒ_Ûk‡{onÿ·ğjé2»öÄoğø®Vöûşµ_®¯5ş<Í÷
c~GŸØõš°ÛzşUë)£ÏøÿÛ]÷zÅ½ò®|ºóç—)şóä—äß²¯{[óÿ¿~»^~»¥x4­S<éÙ¯VwûÃ¿ü÷ßïõsŸnyÑÿÍº'ßÿSó´ìe“èÜvkBìıO¿ïÙ½·	ÜK»æŞıiŞó÷»6¤lmu§ûş×»–ïï&ì>_Ş³¿ï”AÏáøi?cü“Úÿw$·ÿû­äõ¯åíşïWö^õSüÿ¿ïh÷Òıëİ™ÿòìrgø¿½èm{&óê¼ÿÓûßwÏş÷óW~æĞÏİªõĞô;¼ĞÇ½ò½í^Õè?;ş×ôn—>çÿ©étion attachEvent(elm, name, func) {
        if (elm && elm.attachEvent) {
          elm.attachEvent('on' + name, func);
        }
      }

      function detachEvent(elm, name, func) {
        if (elm && elm.detachEvent) {
          elm.detachEvent('on' + name, func);
        }
      }

      function resizeNativeStart(e) {
        var target = e.srcElement, pos, name, corner, cornerX, cornerY, relativeX, relativeY;

        pos = target.getBoundingClientRect();
        relativeX = lastMouseDownEvent.clientX - pos.left;
        relativeY = lastMouseDownEvent.clientY - pos.top;

        // Figure out what corner we are draging on
        for (name in resizeHandles) {
          corner = resizeHandles[name];

          cornerX = target.offsetWidth * corner[0];
          cornerY = target.offsetHeight * corner[1];

          if (abs(cornerX - relativeX) < 8 && abs(cornerY - relativeY) < 8) {
            selectedHandle = corner;
            break;
          }
        }

        // Remove native selection and let the magic begin
        resizeStarted = true;
        editor.fire('ObjectResizeStart', {
          target: selectedElm,
          width: selectedElm.clientWidth,
          height: selectedElm.clientHeight
        });
        editor.getDoc().selection.empty();
        showResizeRect(target, name, lastMouseDownEvent);
      }

      function preventDefault(e) {
        if (e.preventDefault) {
          e.preventDefault();
        } else {
          e.returnValue = false; // IE
        }
      }

      function isWithinContentEditableFalse(elm) {
        return isContentEditableFalse(getContentEditableRoot(editor.getBody(), elm));
      }

      function nativeControlSelect(e) {
        var target = e.srcElement;

        if (isWithinContentEditableFalse(target)) {
          preventDefault(e);
          return;
        }

        if (target != selectedElm) {
          editor.fire('ObjectSelected', { target: target });
          detachResizeStartListener();

          if (target.id.indexOf('mceResizeHandle') === 0) {
            e.returnValue = false;
            return;
          }

          if (target.nodeName == 'IMG' || target.nodeName == 'TABLE') {
            hideResizeRect();
            selectedElm = target;
            attachEvent(target, 'resizestart', resizeNativeStart);
          }
        }
      }

      function detachResizeStartListener() {
        detachEvent(selectedElm, 'resizestart', resizeNativeStart);
      }

      function unbindResizeHandleEvents() {
        for (var name in resizeHandles) {
          var handle = resizeHandles[name];

          if (handle.elm) {
            dom.unbind(handle.elm);
            delete handle.elm;
          }
        }
      }

      function disableGeckoResize() {
        try {
          // Disable object resizing on Gecko
          editor.getDoc().execCommand('enableObjectResizing', false, false);
        } catch (ex) {
          // Ignore
        }
      }

      function controlSelect(elm) {
        var ctrlRng;

        if (!isIE) {
          return;
        }

        ctrlRng = editableDoc.body.createControlRange();

        try {
          ctrlRng.addElement(elm);
          ctrlRng.select();
          return true;
        } catch (ex) {
          // Ignore since the element can't be control selected for example a P tag
        }
      }

      editor.on('init', function () {
        if (isIE) {
          // Hide the resize rect on resize and reselect the image
          editor.on('ObjectResized', function (e) {
            if (e.target.nodeName != 'TABLE') {
              hideResizeRect();
              controlSelect(e.target);
            }
          });

          attachEvent(rootElement, 'controlselect', nativeControlSelect);

          editor.on('mousedown', function (e) {
            lastMouseDownEvent = e;
          });
        } else {
          disableGeckoResize();

          // Sniff sniff, hard to feature detect this stuff
          if (Env.ie >= 11) {
            // Needs to be mousedown for drag/drop to work on IE 11
            // Needs to be click on Edge to properly select images
            editor.on('mousedown click', function (e) {
              var target = e.target, nodeName = target.nodeName;

              if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {
                if (e.button !== 2) {
                  editor.selection.select(target, nodeName == 'TABLE');
                }

                // Only fire once since nodeChange is expensive
                if (e.type == 'mousedown') {
                  editor.nodeChanged();
                }
              }
            });

            editor.dom.bind(rootElement, 'mscontrolselect', function (e) {
              function delayedSelect(node) {
                Delay.setEditorTimeout(editor, function () {
                  editor.selection.select(node);
                });
              }

              if (isWithinContentEditableFalse(e.target)) {
                e.preventDefault();
                delayedSelect(e.target);
                return;
              }

              if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {
                e.preventDefault();

                // This moves the selection from being a control selection to a text like selection like in WebKit #6753
                // TODO: Fix this the day IE works like other browsers without this nasty native ugly control selections.
                if (e.target.tagName == 'IMG') {
                  delayedSelect(e.target);
                }
              }
            });
          }
        }

        var throttledUpdateResizeRect = Delay.throttle(function (e) {
          if (!editor.composing) {
            updateResizeRect(e);
          }
        });

        editor.on('nodechange ResizeEditor ResizeWindow drop', throttledUpdateResizeRect);

        // Update resize rect while typing in a table
        editor.on('keyup compositionend', function (e) {
          // Don't update the resize rect while composing since it blows away the IME see: #2710
          if (selectedElm && selectedElm.nodeName == "TABLE") {
            throttledUpdateResizeRect(e);
          }
        });

        editor.on('hide blur', hideResizeRect);
        editor.on('contextmenu', Fun.curry(contextMenuSelectImage, editor));

        // Hide rect on focusout since it would float on top of windows otherwise
        //editor.on('focusout', hideResizeRect);
      });

      editor.on('remove', unbindResizeHandleEvents);

      function destroy() {
        selectedElm = selectedElmGhost = null;

        if (isIE) {
          detachResizeStartListener();
          detachEvent(rootElement, 'controlselect', nativeControlSelect);
        }
      }

      return {
        isResizable: isResizable,
        showResizeRect: showResizeRect,
        hideResizeRect: hideResizeRect,
        updateResizeRect: updateResizeRect,
        controlSelect: controlSelect,
        destroy: destroy
      };
    };
  }
);

/**
 * Fun.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Functional utility class.
 *
 * @private
 * @class tinymce.util.Fun
 */
define(
  'tinymce.core.util.Fun',
  [
  ],
  function () {
    var slice = [].slice;

    function constant(value) {
      return function () {
        return value;
      };
    }

    function negate(predicate) {
      return function (x) {
        return !predicate(x);
      };
    }

    function compose(f, g) {
      return function (x) {
        return f(g(x));
      };
    }

    function or() {
      var args = slice.call(arguments);

      return function (x) {
        for (var i = 0; i < args.length; i++) {
          if (args[i](x)) {
            return true;
          }
        }

        return false;
      };
    }

    function and() {
      var args = slice.call(arguments);

      return function (x) {
        for (var i = 0; i < args.length; i++) {
          if (!args[i](x)) {
            return false;
          }
        }

        return true;
      };
    }

    function curry(fn) {
      var args = slice.call(arguments);

      if (args.length - 1 >= fn.length) {
        return fn.apply(this, args.slice(1));
      }

      return function () {
        var tempArgs = args.concat([].slice.call(arguments));
        return curry.apply(this, tempArgs);
      };
    }

    function noop() {
    }

    return {
      constant: constant,
      negate: negate,
      and: and,
      or: or,
      curry: curry,
      compose: compose,
      noop: noop
    };
  }
);
/**
 * CaretCandidate.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module contains logic for handling caret candidates. A caret candidate is
 * for example text nodes, images, input elements, cE=false elements etc.
 *
 * @private
 * @class tinymce.caret.CaretCandidate
 */
define(
  'tinymce.core.caret.CaretCandidate',
  [
    "tinymce.core.dom.NodeType",
    "tinymce.core.util.Arr",
    "tinymce.core.caret.CaretContainer"
  ],
  function (NodeType, Arr, CaretContainer) {
    var isContentEditableTrue = NodeType.isContentEditableTrue,
      isContentEditableFalse = NodeType.isContentEditableFalse,
      isBr = NodeType.isBr,
      isText = NodeType.isText,
      isInvalidTextElement = NodeType.matchNodeNames('script style textarea'),
      isAtomicInline = NodeType.matchNodeNames('img input textarea hr iframe video audio object'),
      isTable = NodeType.matchNodeNames('table'),
      isCaretContainer = CaretContainer.isCaretContainer;

    function isCaretCandidate(node) {
      if (isCaretContainer(node)) {
        return false;
      }

      if (isText(node)) {
        if (isInvalidTextElement(node.parentNode)) {
          return false;
        }

        return true;
      }

      return isAtomicInline(node) || isBr(node) || isTable(node) || isContentEditableFalse(node);
    }

    function isInEditable(node, rootNode) {
      for (node = node.parentNode; node && node != rootNode; node = node.parentNode) {
        if (isContentEditableFalse(node)) {
          return false;
        }

        if (isContentEditableTrue(node)) {
          return true;
        }
      }

      return true;
    }

    function isAtomicContentEditableFalse(node) {
      if (!isContentEditableFalse(node)) {
        return false;
      }

      return Arr.reduce(node.getElementsByTagName('*'), function (result, elm) {
        return result || isContentEditableTrue(elm);
      }, false) !== true;
    }

    function isAtomic(node) {
      return isAtomicInline(node) || isAtomicContentEditableFalse(node);
    }

    function isEditableCaretCandidate(node, rootNode) {
      return isCaretCandidate(node) && isInEditable(node, rootNode);
    }

    return {
      isCaretCandidate: isCaretCandidate,
      isInEditable: isInEditable,
      isAtomic: isAtomic,
      isEditableCaretCandidate: isEditableCaretCandidate
    };
  }
);
/**
 * ExtendingChar.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class contains logic for detecting extending characters.
 *
 * @private
 * @class tinymce.text.ExtendingChar
 * @example
 * var isExtending = ExtendingChar.isExtendingChar('a');
 */
define(
  'tinymce.core.text.ExtendingChar',
  [
  ],
  function () {
    // Generated from: http://www.unicode.org/Public/UNIDATA/DerivedCoreProperties.txt
    // Only includes the characters in that fit into UCS-2 16 bit
    var extendingChars = new RegExp(
      "[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A" +
      "\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0" +
      "\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C" +
      "\u09JŒ@	ôMadĞ€(" $0KYâI	^¬€0%p<,5€Tp¦ÀÄ1&RRc†]‘Ba€¤4ŠÀÔš D)Ğ¸ÄC20ÊmëÀ*â'éR8/ñj¹épü
¸ƒàš¬(Â@2‚	- Aâˆš€"KïzÖê½=ç½û¯í<§¤æıC'‡ßûmô¿½Lıëv·=_ÕSX|ns_î¾ü=Âw¿¿~‚>|Wy§ïÂı½ä1½µW•áŞ}Zt®myø”ßîÕŞüiİ6¯ñ?íXÓßß]æ=ÍjÃñÂİCÅıíõtÿqıx4û×{ıı¶/¼Ÿïqõ¾Ï;Ş›ZÕuç¯óßkµÖğ‘ÂëŸîa¹M=» ódÄS&_ûÏRŞ×?Úï;ğ^ÿÏµìışµÛzÙe¿e{ŸX¯ÏéÛë~óÏ­ïY÷anï‹ïÿ§v»ß¶6™úë N¹öüŸÿM_7ù÷[ò£sOÄ]}¿
€Â'ŞÃ‹1˜ßÔ+8Ğ ‘ ¹T*±ˆB PÁÔ
b!Ğ D´MÀâ0(Ğ0H²åÑĞP#” F@cîŒ„(µ°H4	*h 8AE -	M± 	F|ø BmJ -yˆ–hH)¢!ëgœOšœÕ6×y¿áu¿ûİ×rİ¿‚ÿöqÔØ2{:<Ëıø!o™s×S‘ï~?Nêšëøõ²_ÜØ÷¾o!zÌWv¹?ÿù}œ­³§ûjmVMyõ?çîÿøwsşÃzÚÿ>óºê·ºñ¶“>{¢_‡øÙ»=U‹‹ïæ5J6rŒ†$@P5‘ê"Ä.„ˆe‚CX2‚°@%nA#Àa¬J¬ ¤E¹`t&` Ñˆq@“B—Ğ ¸ M‚€¤B` ¨3íA# pxù FV˜P´8j€'0(CğÁIEH #PD ”ÀŒ³Ä 	@BÌ¬(›º À¨2 €€B„-vƒï° P 
âyTñP@%’(ZJÏp! Â2öa
Å¢R  ¡Â2Å;0 @J4è Æhh%AÖ(2ìŒ¸ “$ :¨ğL´d¨€<PœJVÔ‰€ĞX¯€¬4’Lö, ¡ÇŸïcñ®ş³‘w§ïö‰¯ÚİûU¸ÊòÛáÃâ7ŞµBeùóä6ı´GUôßOåÕ’“Vùÿâfßg¿§ùá%¯sÏ÷‡›úOú¿/ík;tİmŸ7½ÛÛxİg¦qı<ÓÛ-¬Ûm·ş}ëtëó<²Wóß©ïçïøÃr€xso„€†T @%¢!°H@:7p™` !‚0$!™I$NauA (5 #4 ^¤b°A‘`0 Pz! º! ‰“* (ˆ#@@ ”ƒÈU@¨'B   Tht Á ‘ ”QT£ P€Oq ÄÍà¸k€7½6c¹÷}.uñü™ıúµòoróÖuµéÏú~×Û1İ´O8,èé™ôÀ¦"›™gç«r¶Ü_í¾s·çÿË½û_6ƒ[>½İò›Ì‡¹z$÷FÁN<7¿iõGdû»ç_›Küg÷ãítÛ‰#åß¼Vßß3äÎíœMÔ»ãv›–xv·ßù÷í»şíû{}»¾í<üÎ÷»¿Ç:¯ÿõş÷™ÃŞÛ9ÉµjïÛ2Ÿb'ñíä~Ï{ÿıĞOÅş’«vâÍ)·¦mA³¿—sîß¡kò;³/ü8Ñ÷h÷ô
³TKîïro>l˜¹­µd©FW·üï4-Øš`\“±¼>nïtÄ¤È#/ 	–#b¤ p ©
Pˆ“‡´	h+€¢¬KQH<§`0eWll™3: $?@(YUåB7¢Hğce0Bóá2„LX0-s,‰#¥B d A¥!5´QBŠ\ “0ìÎˆ £…¾°Ï¥HM¢ˆö6o
ıÒİßÚ£ÿTûŒş
ı{Ô ^İØìeæ÷ëÇ½”–×÷w>ûïŞoËmØ5Ñ¨İİßüîN/eŞôDÚŞvõÏŸ×‹‡ÜGù£^løt5XœõO¯¥ıg%ŒøîÏŒÇ/şÊÛTıŞ6÷ÜÌàøŸäiN5Á½ô­`Êo¯Tìt™`zlBP< ò¥˜5 4(A¤4<™*‚a E ÒŠÇàH8©L@=€RoÆe*,ä´8<JI‘HÂ	ò‡Ÿt1(Ò @æ@@A@… ‘·p  Vd  @c±1 74šrÀƒyA
À´¤³AÀğ€È`°€Q;F
 !¥€ H"1A7PÇ	”  j%íC-òÖ<A±´&@SÂ!rDˆ$ Ô †† $†¸8M `€4 I€5PhÆÄ@A€Š„a" 7 é‰"¤¨¢¿º³öòî­wó_6ûüSôËù;n2¯áïfö_ßºÛŞÛø÷3ç^öK¿¿nä=m¿¿ä{çÜi¯~¾ıÇgõ?¹×ë]ß„Á¶ÿõİ/sï7ïTû\~‡;Ûoîï}¯sÖ47~%Ô–$ü»÷ÃÛó·øï!·Sï÷Îv‹âÏÍ\–îiF!è¦TH@7š c4rªÀÏ€ä	B‡5L@$c%T È0õQ¶d Z°X€ * Ã‹0a(Æ  ¤Ãš‰‚
  jHˆ%qM‚tH ˜Vº ¥@ÀX(ˆ×ÛcÀ8‚D¿¸ölùß¬ô¶÷ª»—ş ¯÷ßşüöJg³šòÏşõ¼ìÙ;œ´ã_Eû+°sú³ı}ÿş¸ßå^·
î9ü*ÿªşÕîqùşÏ½ùy¿Bgÿ:ø7­râÿ„û9_ùÖ×çu}]ğuÉ•ükÙİÆ¥ªõ¦)Û¿ßjŞëÍoot|ícŸŠò÷~}şÓ?U5¾¿¾Ÿ®¯9ª;İş¦ÍîNû¾ùÖVˆæ?‡)¯×bı†óƒÑœê{Ûße{{aoëŸÉó=ïïÕâr[êÙÊ}øÖë«}Ö­W_ÓwÖ½eé¸©'dí×$¿ÕÕû{ûİí—»s‹3µéh JEÂ¡<s4	n’¤¢	ÄTC0„ËˆHTB˜‚¨ ÀE0c3Í%3´´”	À"€rrGl DÀCJ
$ R¡ ™z ˆ òDĞA”" ¬P BZ E‰ Áf@!  ÍÂÚ`òÿ;¨§Ú5{ÅËoŸ¿Õ©æ»ÉñêâOzÍıÿÿ\w~g±Üö^ø÷]Íüj®g¬¸¥,Úöª}>ŞëŞÍ&%WEºüÍfu×ô¿ÑÔ]¯{:w¯¾‹ê°¿/ôOÿ,&¬÷o^{q;/‡ûş?åö¬-÷ı¿ÃO=ñöS0¨E(„!$""  „l` pøZ1…ˆ¥`Ó1¡	p‡, Š„…@®X(RéB<ò
q@ˆº  &(¢™QG P‰È‚è
ªÂ3Œi ä'‘%~Å5À	J
  ˆ¤à·BB` DX‚qˆHA"@Äø1f*@À°ˆ^² 4FFºb !!B B 9D7*! Œ,¨@  -c+üğ
€é 
 †8€"5	 â"
À+hà¡8@"=E>w€© Pe ÀDLGø”€UÓ²æ	[ï{~¶m·İ?bS”}Y+|[úış³ı²ı#v_×¤z•·9ƒYÃO’]f]<ÇL^í†zóß{8JŸœ÷æíÿùÖ³±äûŞÛ~w÷ÃÚçîxv×uÑşíõÿov˜ó.|Œ¿Û½ÊÛ—½÷	®Ïş­ëùæ­üó•Ë>ÜV²(HH(Ü!	8!`­MBŠ ,ˆ(€+ ©9©cAJA8ˆ’`3àL&	p…*„80d¨&,Œ¢$ …)‘´]("H4€ Z	f‡$Š„À ‚°˜Ê¨ÏAH‹'PGEÙ  Ä™@5PD¥jr¬4 ‹Œ‡¬öÂıy»ïåsK®—¯sõoá§5;mï»YŒ÷nèï¾Í[vükÖ»ï“MIğ;¸önğíÜ¯K»d/xÿé‹·2'çû¹O¨µİŞ»÷{ö³{»å–¯ÓûÏîŞì7ÿğ&Xºö©Õ†O§;ëøg²×¿íÆÙºÿE/Œ"óß3¾ÛœÌœ—WFêx.çÏÂ=MªtÁVÿûË·Ñ@Vÿ—o[ÿW®\&Ê»üÿØ¯oHg~¼{ù&oïõö~Äëûq²{w˜×Û9ûÿ‡İ|yWîôFeÉ>ò=ïîz&Ğ™s{ì§d8Ñ²Æs?ÛQì>úŞ½—¿ùó÷êÍ>¬  €Ô¹ :¢³0€MH"0PøˆZ0b`UšKh°%‚3K†PdÁl„ •@Á€˜@Û“ƒ£bPÑ`  Â&0 c€
ÂBP7,©d‘¦Ä¸< H„âd¦ˆ%"Ú€ˆ
4 x7b¨mß‰YS÷àçæ=–q¿3^¥¿Õÿv?¾Ã÷´“®<ı§æv}oeí7“jaÓı'½ßókvßf¶mßÎãS/÷Å~›Z÷­¼Ktö×<Õw_=ûVŸo²m_G¶³ÿÖ>Ï“kòòÒ×÷ÿÌ_öÏœ>wkYşîZ²ÿâËæØ'[+Œäv@……™„ä €(– …¦C‚É€"4A`© Pa+BHF¨ª! #°8«!1h…Ê‘\Ÿ*ê” ‚EdƒF1¼Xˆ)-BÀ† ( Y° ğšt¤H¦@° T„Ã ’TQ˜€¤ˆ8NDøÿb 0]P@pGJ :Šˆ®#™"RØSŠ$©Àä³* $ @˜fAHI@‘c†¼Ñ#¬3¢Á:
 ’ãˆ·aà@T–r
 É`24‰NB@A®C`‚AiIE!ˆC8ù¾¯´ÿv]~Ù><où¿­>Ûíœó÷-õêÄ©êo¿o>ºµÚQ…÷ıã_êÅ ûÓàGÿúú¾wN¸îøGó÷kbÛöáÎwvvQ³~û‚úNûóÏO÷7×ïŸ»m·Ù¾Ëm‡§çÿ;z¹ùÍíÆİ[ï‹ìQîïv»üÍÔ?~}ön?¿9¿7şùyq»ÿì?Ïù¿òIÿí‹›·v¼÷‰m·ÿ;¹õ÷×¨ß8ùÄ¼ßûëşùÿ÷ı~XÿûéÔ¯ã?ıßpèÿ¶8WÖTKş™íîù¼?Şxmêzwï†Œ½ÿùıû©î×7ıíş^ºÛŠı}<~ÜıFwû¶Jhôa0ŒÌ .Êv¸2´pˆ³Æ„!ù „è'Ìeq¢@é3¨•Ò`¢B%Q¿ù*€æ‰,…;H‰ Ì»åÎƒ4”ğÆÄ„ĞÃ¨é‰LQø0>
2ÀKø¼:6ÜS QD1rı‰6´…­Z\ô LÂ˜ê%°şˆL¾ùĞo*6Ø
*îĞFjÔHØH€ø%mğI•à%‡A0 ‚tÌ–‹:4)¸fØA 3HA‚"‡<¶"x–àQ-Ñˆ¨¢eC™Ÿp‚:‹éB5R,‚‡´E¡8T"¨“Qp!¥
¤0"! åßÿG%¯ı£w·Ş´‘iş§?síïMu\û}é5?¼ïåÕŸiûyÿzÎÿ¦K¦{ øÈeøÚ‹ÿj;Ãßÿÿù¼ïDïó¡yÏşëkîİªwş‹£_»¯şµ¼ÿYz6ãÆéw7ûïöóÖ®g]¸fæóñígóßÂCÊëÏ¿—LşlàF8‡U„²Á”[»`	Ö$BT ˆb/!(Q\¬%°¨*êL³!Qá*-5rB æÈCĞdC¦š~²_€RM¡&ğFQ¸TÖ‚ÙJ„M:†,0 A-Ô	è©Aø–EÈO9wÕÍuÓy!÷½l¾‹8së£?¦ş½¾úóï>şÎã¦XÎK—{¿½^æ›~}£³×ùøï›ùíï¾gmõŸx)o>¶0ÿ„jü›Ñú=øgoãîwGòŸ©Ÿıÿ««}şŞ¿ïüÍ*/ÿV»É=ºÿ?{¯ûïz?r‚ßSëëõ"ÿı_×öV®=‹ÖİË*ß®GWÛ×ú©ïív~w´§Äá²Ëÿ>úõË½İå¿¿û?÷§>~»ış{÷•?_e­ã/ÉûşNºüçğŞ¾òŞ^¹VßûsíıúÇõNÑıëóÑÿòõ´ûxn×:¿çò×ùz··?ı\ıëÕ—úÓ¹ÿüˆëöÏW	EÙ£¦7Z¸ü„BÁ5€62,jİuğ×ŒN‚A*0v)¸WEK&F•\§È`
.(Jæ(RÌáPc9(ìÒ+‚
)#erš·Ç ®B ßAô°šF¨@õ†W	¾3¡@ÔÃà*J ÀI1z8"/ R€n 0¼İày’·õõ}ƒ_íÇ¼íÿû¯÷ÿŞu<ÿÕQ¦_›C<»¥-)Ş¿Ç«;çÕ¿vx×ùü¿ûß7ß½Ÿãÿ›Ì}}î«½·†ûúÿöë{ôöÚgğûŞÿT¨vß½·R7jò}¯oïÛì÷VñÿsÛÿÿÅ8ş}÷ï·xøí¹ä—Ÿîj
9­³¢¼Ä™Ô°	umx-H™@Pºá<d(p¡	Š‚–#C0£¸*:Øµ“;@(!ç@!ºbºnT–‡¡ 3!F €$f O$ 0ZDA4iF,A•“·äIC‚R 5AĞ"<º@#	e5Ò C¤ø… Àà%£ĞXƒÃ¸‚%ê¤pˆJ™ÛQÆEqˆ™è„ŠXÀ™ ®&£€)£˜90'=@„I' Q5ü#$ ‘fGÈ5&  3a‡ƒ¬”ŞÈÂZà°	¤´¡$‘TpS	QBA¶€ÏO{zï=ùï}µkk¾Ö÷é]­e÷+æWÏS¯¾÷?Kgú½¿ö×û·øø_ÍàIßãşGmÇüóÊ¼wÒïëùş¯şõúŞîoşú`¼Û×<y—¾úO_ßŸşÿÏéÿï;o¿T}´.ÜÛ®}ù}¾‰;;¶]:•Î{&{³tó%f€0 ."ğŒR“AZ±ı$ƒ=	’Ö6”¶ Y0;ôÈ Óƒ3
Ì	PY“r(`qH#J½ÇP@uhc| #€D¡f*2°1b$1 `€W4 Á‚JŒ±¤…Dòæî¤@²‚úÒ—HŒ^œB„è®°‡sÿšj5sŞÅÃOêıšf]õëº¼Ï~=ÿi}÷;M_ıWûüùrÔÛïèíı[Yßî*o÷‹7¾WÖÙzoÍßÏè/ÃÓ½ü¾¹îÏö;¿[ìvãŠîÊXïºosÎ{_Ë'±·7Šjşó'¥yo×ü|ıwm:ıºkî¯šûßò3À÷í~WúSÿûÖßyı|Ù£aô|½Ÿ]³ûïõ•Ÿl×çæ¤ëİ¬Óİ™jgñÿYoÿïÿ÷ÿ~ıß¨Ço«¾è×Çew`íùı‡¿[ío!ÿÿzÿ/Íé…ÃüßÓ'«Uİ©ç¯‡–ÿÍ>·am]Üß»Ûõş¤Í†¯+şún6}ŞsÔ@ÂîP €H3Ô¦Y4x1ğ8Òœã¬ÄVx™±5P„òˆvaâ0m+ `(æ"”“d%ú£+6cùS3ş'!˜‚Ä‚¤a”&ZP€
fäAÒˆT G×DÃ˜¥X¦%Vh%²@AÃB’ Á @ "Bqmzƒ ÚÿtïûïÑÛ¡3Üú7ØııX­üô[Æÿ¹½[¿oïoò¿:÷¾¿iÂK¿ûûâ¤„«ŞşûGß—û|·½ªNîéÕ²é³×Ù¼tyï:Súğ¯›ııÛÿ¶Oû]2­Óå+ıÃõÜş'ü¸mß«‡Ş_~ÿÿ×¶üÓ¾|Zß~ÄH†Å3yÅšmÂÂ8@²Td;× Èä <DÀƒ¾}€ 6èèRğ°q	‚° RA
€4Áo·Ïû#M
ˆ' ¢uˆ˜ÈhYwìÛ‚Bªa 2dT“2xN	4Šf’c8Ã¢§&2|ÃdxÀ«j-™ aIà‘‘yj `Š‚:®Á‰êm¡O¦HªdHi(@‰A†“.Î5›fæúHV9WCˆq<,VüqD#	€¶>Ñ‘ % ã@[¸Œ„I6MA—`˜¯@ÀLœÓp5¨pË|É—íİ7ï¯çßúÛùoçËÈ7íœ}cÿ~wï¾š~÷oóó_\Şşö¼o_óïß¶øüØÏû½~œû=Íù×øKüİİ÷®?ÿ=gşÂ¿{­ßş}÷¿ÏÁ›kñ›)»>ßWûepÁçºÑ¿Ùïåğ÷Ø»¾×O~Ú½xu—£_ışœüEæ@7­AAÁR÷£ Ñ$“p‚ˆ I}–D¢˜ªXÆLPZÍj.„C£Æ*Ğ'ŒEÍxÒı U#_MéKÂ@pxä ’(`àIĞ„…Îá2 ñp•ÄMá Ğ©’â:‘˜,Ø‘” â0	·ÃíŸ·¿ŞµhŸ¿]í~¯Ùù;ÿN/gg§u¿¹¯{üÿÚßŠáû§;µÎíäúw·õ;|=ÿ—ßİ™ÜÍ>¤õ×ÿİ¿~ÿ>ë³ºõ=ûÓiíYÕ_{ôæ|gM–Ÿ37ùÉ?Î-ö=Ï{ßûÏ¿)ó÷>2ß÷ö›vúO’±Æöÿïõ­ÙRŞgı~OM,wõ<yıëüµxÜÃ³­íZ_·=şÕûoÓ³ÿóíÿÅæüûm´¯è†wÿ5Wã?)ÿÏíîóï0wÁªmÈ™Ş­÷wı÷¿É×ûß~¿_6Ï’*¶ñİñ©şş¿?ÿÿ`k½wæw?Â†îšÓ–ßíùï§ÒE¡˜#2%l€Ei’âÊÚFŒûFİ  Kf„D"<˜ô
º+GÜÍÂd,Mh¤‚|C$¦†00±nHŒDÂ€€!Z†’…@ÚéÁáğ¤4bAMcASb) Ø‚5¤Aƒ 
 ‰#P4ıïôOõ]ú¾›ÿ×İşÙ!ÿŞï÷×ÃıÒ'ßû×¿ûûpmê¾~oÿiì¯û×i·ıë?ùßıÊCô÷Ÿ?ªÙö?<øûÿ×aÏyµïÛúfÏü-›øŸwFÿ;~ı‰ıÈR]çÇ­Â×q­§Üõ³Ùùïég¿y6ï?×óû=µâŞ¯iõÉ` Ö<b‚öÊÌWK X @6à2bT4yHd[jÅBrÖ´ØÂP¤œ‚Œ!Ò°Òkªà„ tˆÆF:M
h³Në5©ˆĞ´Œ¢‰5qäQ»É¡7réÃ I‹¢B”x‹€2—‡ @L`,°bSP®›PFÍ°R*§òUHèˆ_ä<ÂDt„Yo4 ¦Õ0¢LĞÖ¢är°`'€+Eù4Ä®mF;‘^00–qÄˆ r£v0qV!2ˆÌÚXfi:‰š"Ãd@DœfÁTœHfÇZÃ*uäµê^ßÏ²ï˜_¿¾‡ìëê÷û—n2Ò÷•ßŞ„§ò}/ßkTÆ½¸àß¥1«wwŠŸ”Ÿ¥{-}´İÜ–&eèüõ~óW‘ûßÎ‘ mWŞ¹_[çtàœïÿ_ú¹ü™t>çú¿Ÿ•İcûõæ:Ÿoå{ÿÃ-!¾ùı¾ûÎ›K?i}P€¶`Q´(à/
r•G :hkdÆB> £T‡£³ ĞÆ%!€ÜJ ˆ¬\äi|$t š²  _ĞyJÑQ ¤ÚŸTdÁD$	É@`£k ˆ£Å©µK°‰EÜ„ '<¸eØ˜A”-ÄºÛ}ìuó$+ÅnõzûßÃ»‹Ÿïös~å®ûé¯5S²õƒ³=ïwÿ§çŸ˜ÿ–¾ÛG^|ÿÚ±Şÿy›šfo{Ÿÿïûğı¯¨Õê’?™¦öùu‡¯ú=¤ıæ¿wş¯íõÇÕû;o›tÜ7v~ïÂçòNÛÿO÷«·îûû3ÛôL¿ë¯—êuÙ˜v¯[Ò-ûV»÷}CÖÒ<8›?=‘¶ŸuÇ¿ş=ïşéË:ä}ûíßÕêşï{oúûçÅí÷îıÿ¶ıˆóÛóÿö^7Õ·„ÿîıÀúşUÿÕzÃìßkı¹¿ŞĞ5ÒüÛ}=_Ï÷¯ŞÂí?ïçUıöV‚™–Tà&P<G‰kâœ„dŸx%†Ù¾}é#À¥TñuFŒDLA¸¤ ¸È€5„(jAß0•Î”‰â` ĞÄGé£"¦ B"İ
cy!„ü s ¢ò.BÀ1Nr"‘4@Ä¸à†@B2+)) {
            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));
          }
        } else {
          node = resolveIndex(caretPosition.container(), caretPosition.offset());
          if (isText(node)) {
            addCharacterOffset(node, 0);
          }

          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {
            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));
            return clientRects;
          }

          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);
          if (isValidElementCaretCandidate(beforeNode) && !isBr(beforeNode)) {
            if (isBlock(beforeNode) || isBlock(node) || !isValidElementCaretCandidate(node)) {
              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));
            }
          }

          if (isValidElementCaretCandidate(node)) {
            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));
          }
        }
      }

      return clientRects;
    }

    /**
     * Represents a location within the document by a container and an offset.
     *
     * @constructor
     * @param {Node} container Container node.
     * @param {Number} offset Offset within that container node.
     * @param {Array} clientRects Optional client rects array for the position.
     */
    function CaretPosition(container, offset, clientRects) {
      function isAtStart() {
        if (isText(container)) {
          return offset === 0;
        }

        return offset === 0;
      }

      function isAtEnd() {
        if (isText(container)) {
          return offset >= container.data.length;
        }

        return offset >= container.childNodes.length;
      }

      function toRange() {
        var range;

        range = createRange(container.ownerDocument);
        range.setStart(container, offset);
        range.setEnd(container, offset);

        return range;
      }

      function getClientRects() {
        if (!clientRects) {
          clientRects = getCaretPositionClientRects(new CaretPosition(container, offset));
        }

        return clientRects;
      }

      function isVisible() {
        return getClientRects().length > 0;
      }

      function isEqual(caretPosition) {
        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();
      }

      function getNode(before) {
        return resolveIndex(container, before ? offset - 1 : offset);
      }

      return {
        /**
         * Returns the container node.
         *
         * @method container
         * @return {Node} Container node.
         */
        container: Fun.constant(container),

        /**
         * Returns the offset within the container node.
         *
         * @method offset
         * @return {Number} Offset within the container node.
         */
        offset: Fun.constant(offset),

        /**
         * Returns a range out of a the caret position.
         *
         * @method toRange
         * @return {DOMRange} range for the caret position.
         */
        toRange: toRange,

        /**
         * Returns the client rects for the caret position. Might be multiple rects between
         * block elements.
         *
         * @method getClientRects
         * @return {Array} Array of client rects.
         */
        getClientRects: getClientRects,

        /**
         * Returns true if the caret location is visible/displayed on screen.
         *
         * @method isVisible
         * @return {Boolean} true/false if the position is visible or not.
         */
        isVisible: isVisible,

        /**
         * Returns true if the caret location is at the beginning of text node or container.
         *
         * @method isVisible
         * @return {Boolean} true/false if the position is at the beginning.
         */
        isAtStart: isAtStart,

        /**
         * Returns true if the caret location is at the end of text node or container.
         *
         * @method isVisible
         * @return {Boolean} true/false if the position is at the end.
         */
        isAtEnd: isAtEnd,

        /**
         * Compares the caret position to another caret position. This will only compare the
         * container and offset not it's visual position.
         *
         * @method isEqual
         * @param {tinymce.caret.CaretPosition} caretPosition Caret position to compare with.
         * @return {Boolean} true if the caret positions are equal.
         */
        isEqual: isEqual,

        /**
         * Returns the closest resolved node from a node index. That means if you have an offset after the
         * last node in a container it will return that last node.
         *
         * @method getNode
         * @return {Node} Node that is closest to the index.
         */
        getNode: getNode
      };
    }

    /**
     * Creates a caret position from the start of a range.
     *
     * @method fromRangeStart
     * @param {DOMRange} range DOM Range to create caret position from.
     * @return {tinymce.caret.CaretPosition} Caret position from the start of DOM range.
     */
    CaretPosition.fromRangeStart = function (range) {
      return new CaretPosition(range.startContainer, range.startOffset);
    };

    /**
     * Creates a caret position from the end of a range.
     *
     * @method fromRangeEnd
     * @param {DOMRange} range DOM Range to create caret position from.
     * @return {tinymce.caret.CaretPosition} Caret position from the end of DOM range.
     */
    CaretPosition.fromRangeEnd = function (range) {
      return new CaretPosition(range.endContainer, range.endOffset);
    };

    /**
     * Creates a caret position from a node and places the offset after it.
     *
     * @method after
     * @param {Node} node Node to get caret position from.
     * @return {tinymce.caret.CaretPosition} Caret position from the node.
     */
    CaretPosition.after = function (node) {
      return new CaretPosition(node.parentNode, nodeIndex(node) + 1);
    };

    /**
     * Creates a caret position from a node and places the offset before it.
     *
     * @method before
     * @param {Node} node Node to get caret position from.
     * @return {tinymce.caret.CaretPosition} Caret position from the node.
     */
    CaretPosition.before = function (node) {
      return new CaretPosition(node.parentNode, nodeIndex(node));
    };

    CaretPosition.isAtStart = function (pos) {
      return pos ? pos.isAtStart() : false;
    };

    CaretPosition.isAtEnd = function (pos) {
      return pos ? pos.isAtEnd() : false;
    };

    CaretPosition.isTextPosition = function (pos) {
      return pos ? NodeType.isText(pos.container()) : false;
    };

    return CaretPosition;
  }
);
/**
 * CaretBookmark.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module creates or resolves xpath like string representation of a CaretPositions.
 *
 * The format is a / separated list of chunks with:
 * <element|text()>[index|after|before]
 *
 * For example:
 *  p[0]/b[0]/text()[0],1 = <p><b>a|c</b></p>
 *  p[0]/img[0],before = <p>|<img></p>
 *  p[0]/img[0],after = <p><img>|</p>
 *
 * @private
 * @static
 * @class tinymce.caret.CaretBookmark
 * @example
 * var bookmark = CaretBookmark.create(rootElm, CaretPosition.before(rootElm.firstChild));
 * var caretPosition = CaretBookmark.resolve(bookmark);
 */
define(
  'tinymce.core.caret.CaretBookmark',
  [
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.DOMUtils',
    'tinymce.core.util.Fun',
    'tinymce.core.util.Arr',
    'tinymce.core.caret.CaretPosition'
  ],
  function (NodeType, DomUtils, Fun, Arr, CaretPosition) {
    var isText = NodeType.isText,
      isBogus = NodeType.isBogus,
      nodeIndex = DomUtils.nodeIndex;

    function normalizedParent(node) {
      var parentNode = node.parentNode;

      if (isBogus(parentNode)) {
        return normalizedParent(parentNode);
      }

      return parentNode;
    }

    function getChildNodes(node) {
      if (!node) {
        return [];
      }

      return Arr.reduce(node.childNodes, function (result, node) {
        if (isBogus(node) && node.nodeName != 'BR') {
          result = result.concat(getChildNodes(node));
        } else {
          result.push(node);
        }

        return result;
      }, []);
    }

    function normalizedTextOffset(textNode, offset) {
      while ((textNode = textNode.previousSibling)) {
        if (!isText(textNode)) {
          break;
        }

        offset += textNode.data.length;
      }

      return offset;
    }

    function equal(targetValue) {
      return function (value) {
        return targetValue === value;
      };
    }

    function normalizedNodeIndex(node) {
      var nodes, index, numTextFragments;

      nodes = getChildNodes(normalizedParent(node));
      index = Arr.findIndex(nodes, equal(node), node);
      nodes = nodes.slice(0, index + 1);
      numTextFragments = Arr.reduce(nodes, function (result, node, i) {
        if (isText(node) && isText(nodes[i - 1])) {
          result++;
        }

        return result;
      }, 0);

      nodes = Arr.filter(nodes, NodeType.matchNodeNames(node.nodeName));
      index = Arr.findIndex(nodes, equal(node), node);

      return index - numTextFragments;
    }

    function createPathItem(node) {
      var name;

      if (isText(node)) {
        name = 'text()';
      } else {
        name = node.nodeName.toLowerCase();
      }

      return name + '[' + normalizedNodeIndex(node) + ']';
    }

    function parentsUntil(rootNode, node, predicate) {
      var parents = [];

      for (node = node.parentNode; node != rootNode; node = node.parentNode) {
        if (predicate && predicate(node)) {
          break;
        }

        parents.push(node);
      }

      return parents;
    }

    function create(rootNode, caretPosition) {
      var container, offset, path = [],
        outputOffset, childNodes, parents;

      container = caretPosition.container();
      offset = caretPosition.offset();

      if (isText(container)) {
        outputOffset = normalizedTextOffset(container, offset);
      } else {
        childNodes = container.childNodes;
        if (offset >= childNodes.length) {
          outputOffset = 'after';
          offset = childNodes.length - 1;
        } else {
          outputOffset = 'before';
        }

        container = childNodes[offset];
      }

      path.push(createPathItem(container));
      parents = parentsUntil(rootNode, container);
      parents = Arr.filter(parents, Fun.negate(NodeType.isBogus));
      path = path.concat(Arr.map(parents, function (node) {
        return createPathItem(node);
      }));

      return path.reverse().join('/') + ',' + outputOffset;
    }

    function resolvePathItem(node, name, index) {
      var nodes = getChildNodes(node);

      nodes = Arr.filter(nodes, function (node, index) {
        return !isText(node) || !isText(nodes[index - 1]);
      });

      nodes = Arr.filter(nodes, NodeType.matchNodeNames(name));
      return nodes[index];
    }

    function findTextPosition(container, offset) {
      var node = container, targetOffset = 0, dataLen;

      while (isText(node)) {
        dataLen = node.data.length;

        if (offset >= targetOffset && offset <= targetOffset + dataLen) {
          container = node;
          offset = offset - targetOffset;
          break;
        }

        if (!isText(node.nextSibling)) {
          container = node;
          offset = dataLen;
          break;
        }

        targetOffset += dataLen;
        node = node.nextSibling;
      }

      if (offset > container.data.length) {
        offset = container.data.length;
      }

      return new CaretPosition(container, offset);
    }

    function resolve(rootNode, path) {
      var parts, container, offset;

      if (!path) {
        return null;
      }

      parts = path.split(',');
      path = parts[0].split('/');
      offset = partÿ+LL/¤àü„ì }Æ Pä”>Ô¼ƒ]"P#Å±":d§34TW±$œV,xåÉmWD A´&ÿ.6ú#0‡(AJj½N¼!RqM $ˆ3UCRg1„cl#ÔñÊ,Ò• ™Â„p©€	Š("Á‰†Z‚Û“Q¼ ÃÈ8 4ˆŒ°B€T„@è¯4)8\†âƒ"@  C  Sâ-8€X¦À	@ªqÆd UìU¡•€ À`B%º@© K€ ŠÄ ,Á.XÄ‚€	X…5Íâ€¨H˜U2	2V¢E†ENBƒppAƒ@İD@  d\€ PÀ íhÃ2‹‚r.™D)È ´BpYDBD @ Byê”b”<¨’ˆŞP’Â ¤ A<ŒQ",PRX½
\" š$9…àò&Â(“ˆ°"P€ŒŠezgHq!Ç;°É	 [-!U ïµ©7}‰ pCa,µVzì!mw4`Gš@TC+#:–ÁT:#8”apW¨p‹À+Ò]rº ü/ô”©a
°¡ä!N•Zƒè ¢àB*~Rf²%!ÇT‚ 1`¢a‘ĞA›ˆÃ ¡ŒXSŒ &ª	 /Vø{·‚U¤à	ˆ¤U*K	^`ğˆà€Pp í S@pAÖ€à4ê„<@ €Ğ„#ŒB@Z@Ğ%B@°(2à%A ÁãiCšĞUœÒ TÃ ;èÚL"2Ğ@CÛ	Ğ¢ÀBBz&‘’\	JüÒVˆc¬@V228 bÄ_ğÈY:ÔbÊˆc5´‘¥×`æ³cB	%AC¬}d‘@·ùš$M8İ®²AEX²Rè­PÂÂM¾-[ 9KTĞ°Y€íZ*XEHña³!å¾L„¨k8$2[2P@	½l–£À1#+êtİ…ÔÛX Ø"Ñá2U ‚k7…Â“€5fb¥ÀKòÚ72Øãğ
 Zd‚00¢"Fo Ö fa±=1F„!€dŠp;0Tİ B XV0J	Á”$2ØB¨òX F‡‡PÒ!=$ì@U2ƒ T§c³ˆ`¢,ƒªj(€2Uu_ ²H Åq…è8$ kÈ jâ¸"ò@ “Qa…€ÆF $ ¸I`"
B„ Dä¡¨ Â~0Ì…Ê„µ1‡Æ¡ˆ„„ØNQœbÔ gR,7H€Ç‚*ˆ Dƒ 8óÖT¬ Š8„KT(Ë=äà(Ì+şP"v(ºÂJ}q `Ğ	H*?Œ1FŠygô¼  V`Ì!‚ lÆT2G4`¤Å_ê…Ä&·–”‘Š&‚‚¢j ˆbœ  «Â „S¾¤¬Œ²i  p£€@	a ’5PIzQ ND‚hÙš ¨,Da¬ˆ0ˆ 	$¨…’CXBPIæ  ‰bé¤
 	0 ©Êà`À(Lr)},ˆÊÌ	'Ğda (dL¢ © öâí‹	¤äOŒ€óq Aˆ—1GˆD0I…Ä1a= j2D€àWœehu
ÄĞ2ÈWO" ™!@È,‚* !€“0„R	tœrs©Š˜%# 	óÒˆ–Qi2€ˆĞ),”š³—E?p†ğ¢
4… +¤7*g4°HC‰$5;o O–#FQC$H€¥«Ãµúƒ‹cjrèTD Rx€jÑ!¢9b è‡ìá#š)¨„àói ´ÛH<†É0ëĞ§&ø&b {$°àT
@Y r"Y\
 ŒÜ	G„
zR ±  L.0£AÏ€1-) µ*)Š˜	¹
:NÍ„ìpDáò†0¨,@õD1@¨IÑäX!ˆ Áb!C`^qv
 ˜¤¬ C¨RÈ€Æh€ÅHfèÂ´cAB „ ìÄ@c)`€±‚cû#£tHeFncÔôq€ Ìßš  p¨0€©Hô¿IQ'Œà'ÈNi W:“ €ôŠ!3Æ5C€t	M•”) š
~¸Òõ‚)›@!Éb$¶„`
lŸK4ÈHOÃÂ 	Æ 4@ÃÛÔ<‰QÊ€^lq qHÅÇ•0E`¡„h„X“‹bRU~Ã…³âŠù`3Á%	‡ƒbˆ	 n…0SÕä5Òà,D"•B?pÈƒ¬ˆGL!ZO`™¹·Ì-ôvdBX%ŠºCÉÀ,ÎP¡0fR…5ªcT n@hüÙàA>„		qB83C@ ¬„I£Äˆ†@%X	‚É2Ã8 D­hÇ 3q0'p¥£‘†@„c å¦ÀV0(l€„
)§+ q‘8(.½Êtğ àÀò	 (±JG1šÃ P „ã]qBA@‚`Ğ,ø4ÅŠÀÈÈ	Ä0Ä‚àuDHŠ$#"È‘†´ È`€èB E …¡ÑB6²Mãk¬„Ù‚±†ÃI 50L–!ÃCc•#a2Àğğ1B2Ø[›˜WÙ C D!r80FŞĞ":M	"×E@´BH€:`!H$hPCK P‚2`
Õ#%I@ &6p˜¸æ I‘	DğŠ‘@˜•Æ‘…‹²]&	¤D`0ã„(Æ‚p#À › *€( $•Ü¢¡A x#p¦¼ H&¡Q|@(„dR3
Iy‚¨°$N Uk”€ú Ä]Xô úÈM8%§	()§–Z›+ µ#´„¸Ù""_M…º„¼À$AA"*$UL¤×76@ò3MÑ H €JBğYä8E%¥ór8Ç«™JrAd€jë
Àœ`é%Á¢‡”¶@„TÄ •`ÀE`$ïA!ÈËTI­W¡P‰eRÙ A×Z€+]
Š ô 	  „¢ÌVI ŠB%}ƒĞr	ğHˆ(p˜ ‚èlÃ’ !P L% Æ„Â4ØÁ‚q„Å d Ğy´&M	€« \‘O,€tˆÈH€lP,A¬ƒÂJ³ é…q€¡q °"%œÄ7ÈäAA‰&K)r%ˆfãN€X IÁíä¬€æèé*:Œ
òSeÓB¶N@ÅT „Àz„„´¼‘€(MêÄ"â¼ñ Q#¬tpR'BR€Q´QR ¸@ ÀYŒ!?Š(šÊA ×€4@A$  ïÕOÅœ%*#°&¦À´
Ah #Î˜„8S ®¬°C€f8æ AC ”Mê@†Ùä3F˜41¡RPp…¡@ d!Úü€¥(rwø“¦ø'¸ 2ˆk…" „|‚) ü„ˆ¨€^PK¡„¨0ğ!è‘ŒÂ
ˆÁt€< :ÔE 8“
†8JPÁ|d	Â!ÄDbĞÁ8ËT„u„ğÌ’ •	 E`  TÃ¨D@Æ b±Éch‚Nz¨ @ä*†R(èy  \#‘&“B¥€ ŸdC H@„hq¤"IdÀĞ[ Š)IŒ!%C;è„ğÁÅ¬ÔukUM—0õ·D„[ğÂ¨ªpaiİ!#¶#fá†bÿR ĞB‚ÈP@ƒP.AÔ0¡ÆBÁÑ’Ê`«±x ¸ *ç$•ğÄÊ‹´« BAB9)$
râî@íP" ¡P"lbà"ÀÄ$	  0ÀP4ht˜…¬HD{–´J8™T†£† IB±DY” $H"(n4	á)!z  ***ˆ€Ç*D¨R€4-Ãñ>	FTaD€P b)‚M   1]BX¦‹
	h‘ƒ¥=HD”(ÉPL©¨ U*‹  ˜2=5P’ ï+h¸AL.'Ğ€ ¸G6ŸtÀ‹£Y0I@‚Šê@@¨P$P@X ‚±DA@µ8"
­±SÊ~–YB ˆ É 
Ã uFƒG7LH" À qÆ‡°šàhI !€Ä¤Ef&—.„8Ü5Ô‡PIEJ‡4
iBE K;@Dfˆ…£Œ"Bˆ "C¤«6….Ê	~Nå’ €RÑ"dÂmÂ€Âš`IT˜Q˜E‰ (R@Ö­ÇX®œj“ 
 z¸êCÁ4‹í€¬œ1(ã\(ã)„ˆ !1@JÓ[QCÌ Uk¥p£	ƒ œ€
$"İ(a‘ b0òş""¤À®ÓÜ b`”p¡à…9A  ÛÑP@¢ .D…B"ÀüÊ—°öÒF‘İ´b=ÑÈCŒı`J€@P¬BF›E>@@a6ĞÂ//¨Ip1q«aHPH6Àn! ‘Õl‰;	N"G)“ŸC`ıÆpI£,€GPxGŞ	
òÔºD´
š±!€ V„`MíEÖœBFI´‹$$L ?äŠTJ¡ä¤„GA@¤Eá@#h ¡ (gB_P]¼XMƒ:!±\0‰ÄA ×5@ 9¥° 4Ñˆv3©Ã0‚PT £åLä˜E0â¡ ai%à8bFå„8CH‰ÄÁ±3†ˆ‚	Ši 0€({°¡µ 8FbÈt`<@Ğ„€ÂÑ,À°BH„àœø ‰0„%IìÙ Ó€á Ô!N@h 	ÓSÒAp@Pš…QC !Jd ,Uæƒ ƒé%•%!a,ì0	hapsed, name, element, chr = '&#xFEFF;', styles;

        function findIndex(name, element) {
          var count = 0;

          Tools.each(dom.select(name), function (node) {
            if (node.getAttribute('data-mce-bogus') === 'all') {
              return;
            }

            if (node == element) {
              return false;
            }

            count++;
          });

          return count;
        }

        function normalizeTableCellSelection(rng) {
          function moveEndPoint(start) {
            var container, offset, childNodes, prefix = start ? 'start' : 'end';

            container = rng[prefix + 'Container'];
            offset = rng[prefix + 'Offset'];

            if (container.nodeType == 1 && container.nodeName == "TR") {
              childNodes = container.childNodes;
              container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];
              if (container) {
                offset = start ? 0 : container.childNodes.length;
                rng['set' + (start ? 'Start' : 'End')](container, offset);
              }
            }
          }

          moveEndPoint(true);
          moveEndPoint();

          return rng;
        }

        function getLocation(rng) {
          var root = dom.getRoot(), bookmark = {};

          function getPoint(rng, start) {
            var container = rng[start ? 'startContainer' : 'endContainer'],
              offset = rng[start ? 'startOffset' : 'endOffset'], point = [], childNodes, after = 0;

            if (container.nodeType === 3) {
              point.push(normalized ? getNormalizedTextOffset(container, offset) : offset);
            } else {
              childNodes = container.childNodes;

              if (offset >= childNodes.length && childNodes.length) {
                after = 1;
                offset = Math.max(0, childNodes.length - 1);
              }

              point.push(dom.nodeIndex(childNodes[offset], normalized) + after);
            }

            for (; container && container != root; container = container.parentNode) {
              point.push(dom.nodeIndex(container, normalized));
            }

            return point;
          }

          bookmark.start = getPoint(rng, true);

          if (!selection.isCollapsed()) {
            bookmark.end = getPoint(rng);
          }

          return bookmark;
        }

        function findAdjacentContentEditableFalseElm(rng) {
          function findSibling(node, offset) {
            var sibling;

            if (NodeType.isElement(node)) {
              node = RangeUtils.getNode(node, offset);
              if (isContentEditableFalse(node)) {
                return node;
              }
            }

            if (CaretContainer.isCaretContainer(node)) {
              if (NodeType.isText(node) && CaretContainer.isCaretContainerBlock(node)) {
                node = node.parentNode;
              }

              sibling = node.previousSibling;
              if (isContentEditableFalse(sibling)) {
                return sibling;
              }

              sibling = node.nextSibling;
              if (isContentEditableFalse(sibling)) {
                return sibling;
              }
            }
          }

          return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);
        }

        if (type == 2) {
          element = selection.getNode();
          name = element ? element.nodeName : null;
          rng = selection.getRng();

          if (isContentEditableFalse(element) || name == 'IMG') {
            return { name: name, index: findIndex(name, element) };
          }

          if (selection.tridentSel) {
            return selection.tridentSel.getBookmark(type);
          }

          element = findAdjacentContentEditableFalseElm(rng);
          if (element) {
            name = element.tagName;
            return { name: name, index: findIndex(name, element) };
          }

          return getLocation(rng);
        }

        if (type == 3) {
          rng = selection.getRng();

          return {
            start: CaretBookmark.create(dom.getRoot(), CaretPosition.fromRangeStart(rng)),
            end: CaretBookmark.create(dom.getRoot(), CaretPosition.fromRangeEnd(rng))
          };
        }

        // Handle simple range
        if (type) {
          return { rng: selection.getRng() };
        }

        rng = selection.getRng();
        id = dom.uniqueId();
        collapsed = selection.isCollapsed();
        styles = 'overflow:hidden;line-height:0px';

        // Explorer method
        if (rng.duplicate || rng.item) {
          // Text selection
          if (!rng.item) {
            rng2 = rng.duplicate();

            try {
              // Insert start marker
              rng.collapse();
              rng.pasteHTML('<span data-mce-type="bookmark" id="' + id + '_start" style="' + styles + '">' + chr + '</span>');

              // Insert end marker
              if (!collapsed) {
                rng2.collapse(false);

                // Detect the empty space after block elements in IE and move the
                // end back one character <p></p>] becomes <p>]</p>
                rng.moveToElementText(rng2.parentElement());
                if (rng.compareEndPoints('StartToEnd', rng2) === 0) {
                  rng2.move('character', -1);
                }

                rng2.pasteHTML('<span data-mce-type="bookmark" id="' + id + '_end" style="' + styles + '">' + chr + '</span>');
              }
            } catch (ex) {
              // IE might throw unspecified error so lets ignore it
              return null;
            }
          } else {
            // Control selection
            element = rng.item(0);
            name = element.nodeName;

            return { name: name, index: findIndex(name, element) };
          }
        } else {
          element = selection.getNode();
          name = element.nodeName;
          if (name == 'IMG') {
            return { name: name, index: findIndex(name, element) };
          }

          // W3C method
          rng2 = normalizeTableCellSelection(rng.cloneRange());

          // Insert end marker
          if (!collapsed) {
            rng2.collapse(false);
            rng2.insertNode(dom.create('span', { 'data-mce-type': "bookmark", id: id + '_end', style: styles }, chr));
          }

          rng = normalizeTableCellSelection(rng);
          rng.collapse(true);
          rng.insertNode(dom.create('span', { 'data-mce-type': "bookmark", id: id + '_start', style: styles }, chr));
        }

        selection.moveToBookmark({ id: id, keep: 1 });

        return { id: id };
      };

      /**
       * Restores the selection to the specified bookmark.
       *
       * @method moveToBookmark
       * @param {Object} bookmark Bookmark to restore selection from.
       * @return {Boolean} true/false if it was successful or not.
       * @example
       * // Stores a bookmark of the current selection
       * var bm = tinymce.activeEditor.selection.getBookmark();
       *
       * tinymce.activeEditor.setContent(tinymce.activeEditor.getContent() + 'Some new content');
       *
       * // Restore the selection bookmark
       * tinymce.activeEditor.selection.moveToBookmark(bm);
       */
      this.moveToBookmark = function (bookmark) {
        var rng, root, startContainer, endContainer, startOffset, endOffset;

        function setEndPoint(start) {
          var point = bookmark[start ? 'start' : 'end'], i, node, offset, children;

          if (point) {
            offset = point[0];

            // Find container node
            for (node = root, i = point.length - 1; i >= 1; i--) {
              children = node.childNodes;

              if (point[i] > children.length - 1) {
                return;
              }

              node = children[point[i]];
            }

            // Move text offset to best suitable location
            if (node.nodeType === 3) {
              offset = Math.min(point[0], node.nodeValue.length);
            }

            // Move element offset to best suitable location
            if (node.nodeType === 1) {
              offset = Math.min(point[0], node.childNodes.length);
            }

            // Set offset within container node
            if (start) {
              rng.setStart(node, offset);
            } else {
              rng.setEnd(node, offset);
            }
          }

          return true;
        }

        function restoreEndPoint(suffix) {
          var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev, keep = bookmark.keep;

          if (marker) {
            node = marker.parentNode;

            if (suffix == 'start') {
              if (!keep) {
                idx = dom.nodeIndex(marker);
              } else {
                node = marker.firstChild;
                idx = 1;
              }

              startContainer = endContainer = node;
              startOffset = endOffset = idx;
            } else {
              if (!keep) {
                idx = dom.nodeIndex(marker);
              } else {
                node = marker.firstChild;
                idx = 1;
              }

              endContainer = node;
              endOffset = idx;
            }

            if (!keep) {
              prev = marker.previousSibling;
              next = marker.nextSibling;

              // Remove all marker text nodes
              Tools.each(Tools.grep(marker.childNodes), function (node) {
                if (node.nodeType == 3) {
                  node.nodeValue = node.nodeValue.replace(/\uFEFF/g, '');
                }
              });

              // Remove marker but keep children if for example contents where inserted into the marker
              // Also remove duplicated instances of the marker for example by a
              // split operation or by WebKit auto split on paste feature
              while ((marker = dom.get(bookmark.id + '_' + suffix))) {
                dom.remove(marker, 1);
              }

              // If siblings are text nodes then merge them unless it's Opera since it some how removes the node
              // and we are sniffing since adding a lot of detection code for a browser with 3% of the market
              // isn't worth the effort. Sorry, Opera but it's just a fact
              if (prev && next && prev.nodeType == next.nodeType && prev.nodeType == 3 && !Env.opera) {
                idx = prev.nodeValue.length;
                prev.appendData(next.nodeValue);
                dom.remove(next);

                if (suffix == 'start') {
                  startContainer = endContainer = prev;
                  startOffset = endOffset = idx;
                } else {
                  endContainer = prev;
                  endOffset = idx;
                }
              }
            }
          }
        }

        function addBogus(node) {
          // Adds a bogus BR element for empty block elements
          if (dom.isBlock(node) && !node.innerHTML && !Env.ie) {
            node.innerHTML = '<br data-mce-bogus="1" />';
          }

          return node;
        }

        function resolveCaretPositionBookmark() {
          var rng, pos;

          rng = dom.createRng();
          pos = CaretBookmark.resolve(dom.getRoot(), bookmark.start);
          rng.setStart(pos.container(), pos.offset());

          pos = CaretBookmark.resolve(dom.getRoot(), bookmark.end);
          rng.setEnd(pos.container(), pos.offset());

          return rng;
        }

        if (bookmark) {
          if (Tools.isArray(bookmark.start)) {
            rng = dom.createRng();
            root = dom.getRoot();

            if (selection.tridentSel) {
              return selection.tridentSel.moveToBookmark(bookmark);
            }

            if (setEndPoint(true) && setEndPoint()) {
              selection.setRng(rng);
            }
          } else if (typeof bookmark.start == 'string') {
            selection.setRng(resolveCaretPositionBookmark(bookmark));
          } else if (bookmark.id) {
            // Restore start/end points
            restoreEndPoint('start');
            restoreEndPoint('end');

            if (st4S@Š27@ ¶((Ü¢‚µ«…Â
DÑÚH*²"H<ÅlcH88ØÆÏÌHŒFÌQ¡Ü
X0À
_P\3@\ /ÔAŞäÌ	
P\Ä-V8q PÇ€3€h´#²ı4@H áüh|  D!Î¥à ÷Ôûw§tûkÙÆí?ßÎ÷wé÷Úãë·9ç³}Ï|Ów›Iş{µIõõRşÛcÃÛ6|gkïïßæ–»¦~z¿İx=ÑÏ¸Šÿn7¿nß˜«Koí{·~ôx±¼ûıç+ïüşe—ÿzÿ}ï§Ûôøÿæwÿ¦;.şû¼§¿*ú›÷~÷ÿ/ÿ·?õï„÷ıùû¶õÕ¾ß2ÿS¼½¿ò«SÊOKÿş|7Š÷4ÿßòIß>İö?øOï¿Ô†=Ş±¾Ÿ_ûÛş<n|şüq½õe;ß?âûµÿõ6g»óñ×úĞÕhù¥{ÿô¿.|o†yüòıßP¿›Ûÿëuıw
Â¨f!j`áĞí ‘˜Š8çò9€¡zV`ûãT0g…ÓÏ áĞsp@'@ p•½Am4 0Ô#-„À›ª$TRa X‚‚Z DzL
$K´2 n„5K$¦áfH ‚€„…-_'ÿÿÿÌüh÷ºéÿ»ÿ<ıŞëG~ô
ÿf{ÿ[}ïöÕŞ?Oß¯³)J~ÈÇ³ó¼Ç]'Ç×´VÏÿ^½üoåëù7V¿~7?‰ûÏÉü«vûï4{æ:ß*Çı§kæİ³óû/çeûûı¦¼vé÷æï½}şÖòÙÏL»ïö÷ĞBHHˆá`$
•#”…* 0¥±ŞQ ”Ûö-@M(‚ 	L\‚Bz
à˜t
J2¨$	=Á0QX0=ª`©X-bpQ”€¨Bø %$(DQ†l ğ	6"£+@ô0qì]
"è€@ *"šå‡‡¨ ã&”«ª÷@M¤ÁòAb‚0"	„ÙºS@€Rü†B00’L0˜@r•Vä*p52~‘v`Ä²€„$hñJ¢Ô-¢P´ÀBÇz!cH´`’Š…¸ñ`›Êp”È5< ¯ôÕ¼İ6ª}çóÿù–•›_ƒ›Ûö÷ÿŸÏÁÿ3¾şçoüRÏÿç÷»rïÒÿ{oŒäïÿûÛğVú—k¿ÖÓ;ûûŸí÷©tª¿›õíûŸëü~ÿMöô}ıø›ö¢ÛôÉîîzvûş¾Oäo•¾íwöÿØ¿•£Î p¦_‚Ã‘”…AÈ”MÍ2dfˆ€ú  &8L“tëóM.ApPe2¦àP6¢ å(! 3½“•6!%ÖÃ‘´$„Pô‡Ô€FUI Ş€Š[BÑw©hş  H.’$&EB=Ÿ…@Nç/‹¯ú«ÿÿşÿ—ßç¬ãõŠÓ¸|¬Şî=İ/¾¿ÛŞ»Øk~oûÕûw¿ıûìßı×Ñöv@Úšûûİ÷¸a×’¹èÕû|êiIé=gOÛ {¿o.íÿÂõ?÷ÿïÎıkøÇêÖ¸+{¯eÜŞŞ~½NÜ‡û÷ÿAÛõÌï${¿Óâùú½ÿöõç®ñÿïı›¯Ûm¿ÿïW÷ÿî‡ûø¶î¿ı6?şO×Dÿ&ìñ
_ıWõ¡/·yÜ’ş÷}r7rû?©7îêz«¾ıÚ÷íÿúëÇæ‡â:~üştıyÃ/øÿx&/YœÆÛºµ¸›5ŸÏŞæÿÍ›ÿ_-¯Úù}ÿİêKâù5ÂA&@IvHDƒñ°8ñÄS±Œ‰#ëG¸@qRdbÊZ j„8È‡¨Š¢b@ÌÍXÌÂ!)Ä(p±@²=„B à¸¥ù  »ÌA!´AÍ2,€ Á„‘B?(‡¬‹@BùFJÀUP

ŒJ	!B( ü¹ü,¿ıûôşÍlöú;úüóÕÿ›+}÷·™Né®×ZæÿßÏÔÿj¿5í¿şk[³‚TŸÒ—>±û?î÷ïxîì×tõÛ¿?ûGuá×Y½÷Ûãßìyæùßô-{çˆı¿£Ïÿßp•Ióşö£K_­
ú¿öİ?›Ç´Õ›ï­Å4î	MQÈådB„%CV™4Ğ¢ J #éDsˆ0 ´D<pLJ¤Y$4€ DGa
ˆ K„Q“ªâ"™ ãR4&n) K0€Æ™Š&¶¢ç@Ñh§Ú€Á ø‡àÚD
›,bm’À*FƒË²Èsƒ$NBÏR	eQªŒ`q “’â6(í‚‚ G`#\PF~™±le„-ĞF‡‚hLh˜Ğ±‚4…Rxi ˆHJHùEÂ°’JA¨f#98ä8à:ø$ÔœÌ$ @	 €pC€ğ+ …©((€Šöóİİï~üÿûß÷ßû«­éóCÙ8ŠßŠ›_åûxÿ¿ûïÎ§Ÿï·ı>ÛßşËßôûcÿ·ß{§–Ÿú‰ïwZkY»5ÿËû•gı}}­âkh©şYì¿CÙrksíÿëíóÏÿÑ>½ŞëéÎÜ•ÄßÚçß]÷?yïiíùô—7ÕõÏ‚D  ÀRÉÀ#@Y!7 7‹HÀAª’ÁxXƒ ¥$4Àfu) – "T „F‚IØEpA	òPb5¥£PÈ4F„UD9Ñ(PEc…áb‘¼ i ÄMÑãÎ² [mw HA¥HQ ˜†×>ü¾ŸïsÏÿüÏî÷|ÈÎï‰í_¶ñ÷•Ïÿıö«ÿ}çİïÿöï1Ñoùìİí¤ìÿß×ı>ïı·Gş>]\ÆÿY³Œ¾ßïò6.øßmœfôÕ·å¾E¯ÎnwîñZÀ»½\¿ºìç×»ÿ˜µÎõ›¾ËÑÎÍ<_ßMóùkøñ¶\SÖ÷¼{Wç{î¯ÿÍ{³}ù÷óÙç¾gOĞ_¾õÀ³ï=lğ“~fû2ßÆÿ÷jÔúò—Ù}şûtúÕfºÿgyÿ÷Î÷µû¾Î=¸«ó~Gkÿ±ÿÜ×7ÕßÿßıÎù¾êéíí}ÙÿÿôıÿgÇ­ÿ==çäVİ{¸«ÇìsŞ¯ıéOÿrÈaA Í–^†UˆÂñ&ĞÂ ĞBQ†XRg a CP F $0 ‹Æ'”ş`Y‘@Q %›rädˆ830JÀ Íba,#ƒ„Xa€€" !`	•<1P lğ‘-bl`4SHB%ösù~q¿¹³Ÿó[o—=«ÓßAÌo^qsŸËg³Êª~ß÷ëx¾yÛÿ×ıuŠ÷éû6ş¯v/ï.‹¤Ö’ûOó}™ÏüÉË’ºnÉşÍ«·‡¾ÿWŸKÖ¿ïßıêş÷ÿí¿ŸoóÜÛ®jh5oşW_>;o÷_éÁ¶¹ø\-ƒĞçyä°CØZÆ +ˆÛPkJ†hH  MÓ àXÒ#s’P‹¢,A!„:ÁÑEÙƒÑ@[°0.œ*˜Q0$Âô† "d N4±0?ˆ2G* Å¨À#LäRrÕ¯ƒEĞ Ó yª‰¥@@@‚ˆS)YxÖ(&	ÌêpP†$ 2ˆ`-JdSF™xÀ©d
˜À@A€¤€ qÁÁŒ(”^‚@êŠ Q
;š	„@`QÅ‰…Ea€*VH9H¦”ıHÎQP‚A ²6hòrÛû¸ã±]mÁ
%Ê^'Ù 8"a—Sÿ~ï·Ó½7Kò¯ïØ®°¦3ıÉ¿¶ï÷®Åÿúëşñ‡³œ=Óôş_®_¿G}wg=é´ş¦Nşçõô¿¿_í»ø¸ÒD¸»½·^ÿÕÑÊ.şëîn¿şñÏíIÿuç¯ßïëjûr»9?ß:Ÿ¯ø+úù¨:ık[g!²3G÷ÿ%²3D€8c”³ãä§rDàD˜’Çk) 
€dD è”4,Ği£“ÖÂDŒh
‹ÀŠZdà#@Øê¸>|£
×Á&‚@‰jà ’,J’	”Á)3) šq!Ô”„5  + 0pß”¯òüvg©ºWÛöºî÷RLm³íSÏ_ƒŸ{ÿÔëÖ·ùöí¯ïãmş·¿½òı}¼¾×£V{ş5í"öó¾ÿ{ìŸû9ÏKİWøõy»dí½—¿şÕŸËı?İÇös¯Ÿ²}àó¤=ÿÛß<lü/ÏğO¬ç³.ıçŒ¿½Oûûú–æ=ïßbÿrô×Fİæ•ÛÇıŞòSòç:=wşq)‚]sÊy¯¾ïûß|øİ—}»?î}æF=êßŸs*ïëùqÛ¾o/ä?êvWë²ÿ|'ı¬‹çjã:õ÷û1ê÷~*ï_ß%Úu¾À¶»…ïŠ™Îİ>üˆùŞÿşÊşkùg'úŞÚï] Èƒå$Me< @ g`”ò@­^3ö‰\R)‡¦‚a›ÂCrp(³ÁR ”ĞÄÑ»ÄYÊ©î¡ C†Bİ «6 Q£"™„nÕ$PH6ìÄªÅ@Ö°4ÀVT8"aP	ŠaHÈs	/X !(7ı{µ?ïÈj÷·¾óÿõÿƒ?¿ÿù*®İµşÿë±Çßü«úâuıïı×Õz%óöì»]Üï©8öÖ½†}µ±ÛyíëºkGóÓÿß¾š×vîõ¶¿¿Ë<¾Ïùáûú÷ï{ñ/óúa¿ö€N#÷¢oi^>«ÿİîwº¸øŸßVf·ış¿[»ïˆ bfI˜A H@³ gA-ªcK@m“&nB@¬:4diĞH 4¡ŒĞã¢B„	Ô XÆÁ¡ÄB˜F¦é«F"M „ ˆ”5ä€(3Èy (éâ–†„’N ÖØ	D™§!aŒ¥q’ÅB`@ÈÎã#ñ
&# ‘@‚˜™´…P–  8PG ªšP¢¢ ã1W€0ÔÁ´ÍB€nÀè`$¦*!/~ÁÙíÀ‘^(€á£İ1CŒ !cF -ÃxÜ' ä†ò4"J a¬h™µÔ0°ñ,QµFÅøp¡äïß¹á®½ï³”—àÖNÿÛuo¶üşñd¾÷÷wÓ~çıŸwã^íw_¿o>_ûWéûvÚíÈë5~ìö®¿ÓrßÿïÊ¦KãÔşÆ7şÄÿí¾e·|[»½¹Ö‘«±w—ÿ×÷ó½ßÛ=ÇÅ·ãóüï°Uœ½÷§ıŒu/[4¾ú·¿=q‹•§ÅOİ¿ß}çúÕı·îù÷Î¸N÷£ÿ§ßışÔ3K÷	¼3ÿßı¾ÏÑıüïó?kNÒ¤÷ÀïâÏÏvöï{tëêu¼½mGÏ»0Ùy¯íÕ}Íu{ÿı,½5-y÷×Ü·óûı¼ßÚ?ö=ï/ìÇ¥rùÔ¾ëÎû¦ÿß€/ç›ó—Å·B ! CÇ1S•op“!3'Ùk‡´«gòû€G	²‚ˆ‘	Cİ$ÂQ/WR p ¡ \‚A2„`)n*™ÖPÚ h%  p=4ña"BO5€Àì4a8!#†WŸHìB]@P<Ğ  ~•	
‚H ‚"N0/ˆ` €F’<) ‹jÀ1BJ$  @Æ†DÁ„Bvè#ËA€„În(4BLg¥ú¬Ip7'0Iö 
€ CH¡ô±fFË<½.h¨à)*¡hƒ@áZ ‰À ¡¯¦`Œ)@JÅ! Ö„\¨6»ş·s¬íó»¾¼çöçš÷õÏü?ÿì¯ûİÈÜÚhÎ·½/Ã{¥ç_Ü½7Ó¿ø:kø´½¿òŞ¾zŞÓN{?~ùûèûÜ×k/NÿlÅyİÏÖ…‹íõõæ)ùò«>?÷½ü=×ş{q—ï¾é.gíÒ®v÷÷ï8gü¼½í‡G~÷
À 
D€	ˆ„#€èã!à èÙe¸+ˆAT,¸´@Ã­'€;I;W¬	)0ˆd¸PÊ”äVõfå—
ah{ŠÂ`!F„6¤Ë¢¨ DÀlAB Àâc*£æH`*PÆ¦ Ò_÷¸_Õ·ÿü¼›y?ŞÖş»çûëˆƒ7úÅÖ3_sWışhşv†-1ÎòèÿßßĞ÷ëßï)óÉ>:¾ëd?Ë­ëóµ÷eş?~zmıoßÈ§ü9){›7nÿµå»z[ß]ûË÷çıÿé¹¬~=‰úğÏ‡ıï>zÙè˜‡ÎÏİí²<»>õ>ŸüâÛñ{zô¿ü››Nr–vß·yó¹4½ºí‡ê½xÍö¼İ½v³ö™Ÿÿµ×Œÿ¾­“¿Õü:øşÙ½­òşŸ?ï‡¼İùj¡ã/ñ}o÷õM¯½'Ûğ¾ëÎ<şÿŸëğÖ2_íÙxÏÓÓÖù–]/Çs0TŠ°U!8 R¨ ¥jÔC±€£#,+"	!ˆ-
 º) f81 ‚hq!!  q # ±  @‡ÂÈ^À)25!5€Õ+ÈŠ1j €ƒ*˜˜9`À†\I’¡P|€21)1(È&‚ ! Š=¶»šı·û5“Â¹šÃæú›ùÕæÈ­>ıô{uı–ÿøzún|ëªÇÑïóá}Óòêõßöâİı¦»æ3îl{ó¯˜ÿóbÛãïı_62ıÛ}ïş¿íôĞ¾Ê:ıûÍîCòG½Ijİüù¿yÆ‘´÷Ã]Ñ>·hfóá½P±ÿñ?ÿè 8ˆ:²ƒ’Ğã…#6*@u¹ tæ°M<H‚L¡‚ğe€x†CJŠ– @ ¡ „l!N€	ŒE£Ê—dÂ†’ÁJ‰¨Š,H$:äh¸T1cE>ë Q)2r©„p À²»
	’¤¬%cX$ÆçHYQBHâxô’!)`› ˆ@[ô¤„FO§ÉTˆAH(²°*” ¬A²™N !N¬¢c2¸¡AÁ½Q¬“ ` KQV
’€°ˆx¡Š5(p@¤/A‹`á”pJÈARˆ#<ÑFñÕ˜AÁ	áÚ¦ÿN„Syï¦ûwÃì‡¹tïX½ê¿İmmï›eş“j×µ]sw¿¶-‹ë×òùş(Ï¶}ö}z?ïüÖı×§¾g.¾ä×ü~ùÎ=ßB>şé|«—İ§f5ÃİîõÚ?İµÁ÷vÛïwŸÎåşş÷ï·ú×¿ÿÛŞÜ4ì¿¿¼ğŸõvnf÷’'2TNƒ $“ÆÒ`€ŒT‚
ZŒØt¢Px‡evF-X
—Xtx¤qÊˆŒ’%¼’l£æ	Ê P® Å!!@à‰"’$‚‚{…*	!`Bv%„ NFë€k &°‘‘f   |K€©I9õuŸzZmÓçÿ½tµó¾}ïÿ{øş¯fÖş>ët‘.ù~·ÇFlÑf7góşo½õÿ½ëó_PÏ÷/Şù–üîû_§Ü»¾§¾ÏòŞì>ø¹b_¤÷ç½§ÖZŸz¢ÿêÃï÷g¿ó±»…ÎwŸ^©¯œU?Ş÷ëW¿ù?şİUõüŸıËã_S¾ùú®Ïçÿ¿*¿k/¿ºîO›_¯Q÷¿îöÒoßö¿§ŸŸç~ß›¯şÿ}ÎÁß=‡ş×_½¾òùº¾}şÖdù;ç=t³½-‡5“õwú'=ıçİY×§S÷mú¿1´ÿz–-g·¯?÷ıÿ—3ü=_çÿ`a$CA¤Î€„$d(úp"àvXHL¨hE&¡Z@ ğ“‹‚-@EgNV"0¤˜OÆ•£"èq£à‡sÅme4 P’³s"ÔòTş’ibu@¸„ŒÔ•BJÈ	%fQ‘B*ê0PT)NF	C‹ã#âŒª‚$¥“Ï[¹ù|&Ï÷úûğy5îÓªú}Ÿ³w¿¿ëşßéuä­ş|Ejµéüß½Ua3ûzÛ¤‡ßòoÃ—©ûOU×Ïºö÷Ósôú»®íOÿ{÷ÛŸ­?¾èúVVÛ·YÊåücÿıkï~¯w´îüşŸÏşÚ{Ôå}Í÷ı’¼Öø¸ÆÃí§P¨ÅÅ # D‹5D ¤Ö² Ô¢$hìè2¤Â¶‚$Fà
 ¥ÆWn¦‡‚
ÀÍÊAø—ÈN8€Ÿ!$O ôUÑˆbòPğJ”caIRE€Eºn¢‘ËB™Ô¸*¢&“œn„€r‘ :°JÊ!B€!Qa2:¨’È«€"tìÆ˜Ã ªY=G!4HPmÆ £Ç tF@@£ğ“z` m“°jQ0˜È|Ë0 $Æ×bˆ	 J¦×BbBpÈ"œ…a,±È¤N@(9ğˆHè`±à„€8QprÑÊ’°X7Î\«¿ü¿õ¿÷ÈOáÿúÛszãV?ÜâµOít¾õÆgûlò^Í?¿FÅÿÊOşş¿ø€ïÏo¿öşïŸº}õåªï}ÓêıÿÿâŸİËÿßíÿüêú®ê›}gîôÎ¿××tt‹~½Ï}_wÊ¿÷÷ïr7¿”úŞïš.nU_ñ^
Ğd„J ÂD²8Là@8ÄQ$Ç•í$'3@§eI‚$šİ § òB-Y„Ì)V46@ö®(€ª 	$ôÂ Qai†!BB9@S2U>)‰ ê ]F2 .‚ÈA„– ÒºˆÔ4ÂJJ„„
«B° ñt< Äãïİ»ŸKß•lúŞçïÒyñ õÿ‹/zãu–±?ÇŞwÿÓÿó¿½Üæ'Şİç^úß¿ßÊ*µşY'Ÿ/û~ßüYÿnkÑïûó›ı·ç¯ØVß¡­ûñ¸¿ñÙ6Êõ~î…}f¤ëÊâc{«ùôwzşYMwî÷gößMföız—åÿÏ÷Ÿİ¿¿ÿ«¿ªŸ—ùèï»ıï-_J÷¿mËk;?ïıíèÿO¯Wnı6î¾çûêX·¾M{–r¿½ıÎxÏ–ÿOïüÏğ@ÿOwòãştß÷ïWŸ{î­»å}ï~rÿœû]wõúŞ;?üv}ßÿë<?'=»ş´Ë>Ûÿ¾:WÕ¿·fğß€Ò
­m6%
”¾KpI/
LlX ‚•¡ÑÉ°úÉ.Ë³¸€˜ĞÉ²
pni§“•HA¹Ø˜ pQD)\D¤BIP‘3–$A2ğ"É˜AİøªT¤†À*bXA: H¦,'æšäjø4¨¹ßÛ~ÿ6íG¿sıã=ôçÙçé÷O?»ÿ÷Ü×“ş}¿ÿêIúU¿÷eöfòŞó­soî^ü®ºÏû·½Õ×æ]Ë¿Vgï¶¯ÉØ~ã¾¿{íÓÈõNùßÙNş~¿WŞŞ“úFwåû½õ}g(ÿıÍ÷xğnÛ˜}ÏçqãûË8ÿÿ×û/[rÅH
²!`,•™<FQªdš
Ua vÒ	’Eh!©?†¯! 
F€
ğ`bÑDÉˆĞJ $,Å ÉN0w‘#"5 †@Ä¡‡f$@ B 
¨°² […‚K$(r@¦')x	€ĞT*¨Œ” ‘AM9Uà‚À…£D	ó^´[•ÀŒ‚¤Ğ’b„$U@ñ`]!ÆT
i %+—A¡«ÎÌ@‰ƒ"œ(¶(#Â¡d”,„aˆ"³$˜‚0Ø §Aˆb¨|’×	"hùâ E‡ÕB™Ú½H~ßÿ7·unüŞò•õ»úFw×XM»x>&ÿ¿o{èË‰¼ú›oî÷wÉ”ß3ûßÛZd¥ºë×3yß†ìŞ{­Ù¿ÿÊïèuŞãm«û‰ıûx¿Ğí;öÿÎÿŒËJúïè¹«ÿm–Ş^Ë¿¢Ç|¿øğëôıl¢~û9yçç×Ó’ÃìÆ`ÿGÔT5ÄF0" DŒåCùP€WH`œ~bdD3 .!…)H>¤)dá ÚAH ¡ J7TõÔ˜€‰1i€9‹OT_¢¾­ £KAmª1Æ{h«—lM±“ÌJˆùjóÿÒğ-û5óáÜñÿÉëšÓk³}_ñOöÛû¿­ıës{û~¯›o÷áø¿Fxïw¼¿e÷ë•ÏW»ûdÿË¿º¼äÿûì6¾é«næëöÿ£î~´õ%úï²½÷óõß¿ìSXÿ56¦¿Ï|?¬–Ï:ï×Oñüõkõù±¯ş¾ıFÏíóùåşÓrq¸£úõ(A%‡;¯¹ß®1>ë´ízÓ½oÿtıëÿşß“ó°?}õÿÊö/ú{kù¾Şş¯ñç¿™Ó¾¯ùÛıÛŞËí8õ«[ş}íc¯½÷o¿Wİ°6óû)Õ_ÿ¾9o]™•Æ®ûınşwëşıûlß_1*JÀƒHb“°IiDkL0¯œ“¬ñŠPS9Å!¬ $B`„è 'YFP$„ 	aP)€Á¡W {T’o•!Tö4	
b(“K ¨ıŠ!9Ò„# 8Á @a¨Ha	&¢À”À Z’Linux: isOS(linux, current),
        isSolaris: isOS(solaris, current),
        isFreeBSD: isOS(freebsd, current)
      };
    };

    return {
      unknown: unknown,
      nu: nu,

      windows: Fun.constant(windows),
      ios: Fun.constant(ios),
      android: Fun.constant(android),
      linux: Fun.constant(linux),
      osx: Fun.constant(osx),
      solaris: Fun.constant(solaris),
      freebsd: Fun.constant(freebsd)
    };
  }
);
define(
  'ephox.sand.detect.DeviceType',

  [
    'ephox.katamari.api.Fun'
  ],

  function (Fun) {
    return function (os, browser, userAgent) {
      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;
      var isiPhone = os.isiOS() && !isiPad;
      var isAndroid3 = os.isAndroid() && os.version.major === 3;
      var isAndroid4 = os.isAndroid() && os.version.major === 4;
      var isTablet = isiPad || isAndroid3 || ( isAndroid4 && /mobile/i.test(userAgent) === true );
      var isTouch = os.isiOS() || os.isAndroid();
      var isPhone = isTouch && !isTablet;

      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;

      return {
        isiPad : Fun.constant(isiPad),
        isiPhone: Fun.constant(isiPhone),
        isTablet: Fun.constant(isTablet),
        isPhone: Fun.constant(isPhone),
        isTouch: Fun.constant(isTouch),
        isAndroid: os.isAndroid,
        isiOS: os.isiOS,
        isWebView: Fun.constant(iOSwebview)
      };
    };
  }
);
define(
  'ephox.sand.detect.UaString',

  [
    'ephox.katamari.api.Arr',
    'ephox.sand.detect.Version',
    'global!String'
  ],

  function (Arr, Version, String) {
    var detect = function (candidates, userAgent) {
      var agent = String(userAgent).toLowerCase();
      return Arr.find(candidates, function (candidate) {
        return candidate.search(agent);
      });
    };

    // They (browser and os) are the same at the moment, but they might
    // not stay that way.
    var detectBrowser = function (browsers, userAgent) {
      return detect(browsers, userAgent).map(function (browser) {
        var version = Version.detect(browser.versionRegexes, userAgent);
        return {
          current: browser.name,
          version: version
        };
      });
    };

    var detectOs = function (oses, userAgent) {
      return detect(oses, userAgent).map(function (os) {
        var version = Version.detect(os.versionRegexes, userAgent);
        return {
          current: os.name,
          version: version
        };
      });
    };

    return {
      detectBrowser: detectBrowser,
      detectOs: detectOs
    };
  }
);
define(
  'ephox.katamari.str.StrAppend',

  [

  ],

  function () {
    var addToStart = function (str, prefix) {
      return prefix + str;
    };

    var addToEnd = function (str, suffix) {
      return str + suffix;
    };

    var removeFromStart = function (str, numChars) {
      return str.substring(numChars);
    };

    var removeFromEnd = function (str, numChars) {
      return str.substring(0, str.length - numChars);
    };
 
    return {
      addToStart: addToStart,
      addToEnd: addToEnd,
      removeFromStart: removeFromStart,
      removeFromEnd: removeFromEnd
    };
  }
);
define(
  'ephox.katamari.str.StringParts',

  [
    'ephox.katamari.api.Option',
    'global!Error'
  ],

  function (Option, Error) {
    /** Return the first 'count' letters from 'str'.
-     *  e.g. first("abcde", 2) === "ab"
-     */
    var first = function(str, count) {
     return str.substr(0, count);
    };

    /** Return the last 'count' letters from 'str'.
    *  e.g. last("abcde", 2) === "de"
    */
    var last = function(str, count) {
     return str.substr(str.length - count, str.length);
    };

    var head = function(str) {
      return str === '' ? Option.none() : Option.some(str.substr(0, 1));
    };

    var tail = function(str) {
      return str === '' ? Option.none() : Option.some(str.substring(1));
    };

    return {
      first: first,
      last: last,
      head: head,
      tail: tail
    };
  }
);
define(
  'ephox.katamari.api.Strings',

  [
    'ephox.katamari.str.StrAppend',
    'ephox.katamari.str.StringParts',
    'global!Error'
  ],

  function (StrAppend, StringParts, Error) {
    var checkRange = function(str, substr, start) {
      if (substr === '') return true;
      if (str.length < substr.length) return false;
      var x = str.substr(start, start + substr.length);
      return x === substr;
    };

    /** Given a string and object, perform template-replacements on the string, as specified by the object.
     * Any template fields of the form ${name} are replaced by the string or number specified as obj["name"]
     * Based on Douglas Crockford's 'supplant' method for template-replace of strings. Uses different template format.
     */
    var supplant = function(str, obj) {
      var isStringOrNumber = function(a) {
        var t = typeof a;
        return t === 'string' || t === 'number';
      };

      return str.replace(/\${([^{}]*)}/g,
        function (a, b) {
          var value = obj[b];
          return isStringOrNumber(value) ? value : a;
        }
      );
    };

    var removeLeading = function (str, prefix) {
      return startsWith(str, prefix) ? StrAppend.removeFromStart(str, prefix.length) : str;
    };

    var removeTrailing = function (str, prefix) {
      return endsWith(str, prefix) ? StrAppend.removeFromEnd(str, prefix.length) : str;
    };

    var ensureLeading = function (str, prefix) {
      return startsWith(str, prefix) ? str : StrAppend.addToStart(str, prefix);
    };

    var ensureTrailing = function (str, prefix) {
      return endsWith(str, prefix) ? str : StrAppend.addToEnd(str, prefix);
    };
 
    var contains = function(str, substr) {
      return str.indexOf(substr) !== -1;
    };

    var capitalize = function(str) {
      return StringParts.head(str).bind(function (head) {
        return StringParts.tail(str).map(function (tail) {
          return head.toUpperCase() + tail;
        });
      }).getOr(str);
    };

    /** Does 'str' start with 'prefix'?
     *  Note: all strings start with the empty string.
     *        More formally, for all strings x, startsWith(x, "").
     *        This is so that for all strings x and y, startsWith(y + x, y)
     */
    var startsWith = function(str, prefix) {
      return checkRange(str, prefix, 0);
    };

    /** Does 'str' end with 'suffix'?
     *  Note: all strings end with the empty string.
     *        More formally, for all strings x, endsWith(x, "").
     *        This is so that for all strings x and y, endsWith(x + y, y)
     */
    var endsWith = function(str, suffix) {
      return checkRange(str, suffix, str.length - suffix.length);
    };

   
    /** removes all leading and trailing spaces */
    var trim = function(str) {
      return str.replace(/^\s+|\s+$/g, '');
    };

    var lTrim = function(str) {
      return str.replace(/^\s+/g, '');
    };

    var rTrim = function(str) {
      return str.replace(/\s+$/g, '');
    };

    return {
      supplant: supplant,
      startsWith: startsWith,
      removeLeading: removeLeading,
      removeTrailing: removeTrailing,
      ensureLeading: ensureLeading,
      ensureTrailing: ensureTrailing,
      endsWith: endsWith,
      contains: contains,
      trim: trim,
      lTrim: lTrim,
      rTrim: rTrim,
      capitalize: capitalize
    };
  }
);

define(
  'ephox.sand.info.PlatformInfo',

  [
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Strings'
  ],

  function (Fun, Strings) {
    var normalVersionRegex = /.*?version\/\ ?([0-9]+)\.([0-9]+).*/;

    var checkContains = function (target) {
      return function (uastring) {
        return Strings.contains(uastring, target);
      };
    };

    var browsers = [
      {
        name : 'Edge',
        versionRegexes: [/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],
        search: function (uastring) {
          var monstrosity = Strings.contains(uastring, 'edge/') && Strings.contains(uastring, 'chrome') && Strings.contains(uastring, 'safari') && Strings.contains(uastring, 'applewebkit');
          return monstrosity;
        }
      },
      {
        name : 'Chrome',
        versionRegexes: [/.*?chrome\/([0-9]+)\.([0-9]+).*/, normalVersionRegex],
        search : function (uastring) {
          return Strings.contains(uastring, 'chrome') && !Strings.contains(uastring, 'chromeframe');
        }
      },
      {
        name : 'IE',
        versionRegexes: [/.*?msie\ ?([0-9]+)\.([0-9]+).*/, /.*?rv:([0-9]+)\.([0-9]+).*/],
        search: function (uastring) {
          return Strings.contains(uastring, 'msie') || Strings.contains(uastring, 'trident');
        }
      },
      // INVESTIGATE: Is this still the Opera user agent?
      {
        name : 'Opera',
        versionRegexes: [normalVersionRegex, /.*?opera\/([0-9]+)\.([0-9]+).*/],
        search : checkContains('opera')
      },
      {
        name : 'Firefox',
        versionRegexes: [/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],
        search : checkContains('firefox')
      },
      {
        name : 'Safari',
        versionRegexes: [normalVersionRegex, /.*?cpu os ([0-9]+)_([0-9]+).*/],
        search : function (uastring) {
          return (Strings.contains(uastring, 'safari') || Strings.contains(uastring, 'mobile/')) && Strings.contains(uastring, 'applewebkit');
        }
      }
    ];

    var oses = [
      {
        name : 'Windows',
        search : checkContains('win'),
        versionRegexes: [/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]
      },
      {
        name : 'iOS',
        search : function (uastring) {
          return Strings.contains(uastring, 'iphone') || Strings.contains(uastring, 'ipad');
        },
        versionRegexes: [/.*?version\/\ ?([0-9]+)\.([0-9]+).*/, /.*cpu os ([0-9]+)_([0-9]+).*/, /.*cpu iphone os ([0-9]+)_([0-9]+).*/]
      },
      {
        name : 'Android',
        search : checkContains('android'),
        versionRegexes: [/.*?android\ ?([0-9]+)\.([0-9]+).*/]
      },
      {
        name : 'OSX',
        search : checkContains('os x'),
        versionRegexes: [/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]
      },
      {
        name : 'Linux',
        search : checkContains('linux'),
        versionRegexes: [ ]
      },
      { name : 'Solaris',
        search : checkContains('sunos'),
        versionRegexes: [ ]
      },
      {
       name : 'FreeBSD',
       search : checkContains('freebsd'),
       versionRegexes: [ ]
      }
    ];

    return {
      browsers: Fun.constant(browsers),
      oses: Fun.constant(oses)
    };
  }
);
define(
  'ephox.sand.core.PlatformDetection',

  [
    'ephox.sand.core.Browser',
    'ephox.sand.core.OperatingSystem',
    'ephox.sand.detect.DeviceType',
    'ephox.sand.detect.UaString',
    'ephox.sand.info.PlatformInfo'
  ],

  function (Browser, OperatingSystem, DeviceType, UaString, PlatformInfo) {
    var detect = function (userAgent) {
      var browsers = PlatformInfo.browsers();
      var oses = PlatformInfo.oses();

      var browser = UaString.detectBrowser(browsers, userAgent).fold(
        Browser.unknown,
        Browser.nu
      );
      var os = UaString.detectOs(oses, userAgent).fold(
        OperatingSystem.unknown,
        OperatingSystem.nu
      );
      var deviceType = DeviceType(os, browser, userAgent);

      return {
        browser: browser,
        os: os,
        deviceType: deviceType
      };
    };

    return {
      detect: detect
    };
  }
);
defineGlobal("global!navigator", navigator);
define(
  'ephox.sand.api.PlatformDetection',

  [
    'ephox.katamari.api.Thunk',
    'ephox.sand.core.PlatformDetection',
    'global!navigator'
  ],

  function (Thunk, PlatformDetection, navigator) {
    var detect = Thunk.cached(function () {
      var userAgent = navigator.userAgent;
      return PlatformDetection.detect(userAgent);
    });

    return {
      detect: detect
    };
  }
);
define("global!console", [], function () { if (typeof console === "undefined") console = { log: function () {} }; return console; });
defineGlobal("global!document", document);
define(
  'ephox.sugar.api.node.Element',

  [
    'ephox.katamari.api.Fun',
    'global!Error',
    'global!console',
    'global!document'
  ],

  function (Fun, Error, console, document) {
    var fromHtml = function (html, scope) {
      var doc = scope || document;
      var div = doc.createElement('div');
      div.innerHTML = html;
      if (!div.hasChildNodes() || div.childNodes.length > 1) {
        console.error('HTML does not have a single root node', html);
        throw 'HTML must have a single root node';
      }
      return fromDom(div.childNodes[0]);
    };

    var fromTag = function (tag, scope) {
      var doc = scope || document;
      var node = doc.createElement(tag);
      return fromDom(node);
    };

    var fromText = function (text, scope) {
      var doc = scope || document;
      var node = doc.createTextNode(text);
      return fromDom(node);
    };

    var fromDom = function (node) {
      if (node === null || node === undefined) throw new Error('Node cannot be null or undefined');
      return {
        dom: Fun.constant(node)
      };
    };

    return {
      fromHtml: fromHtml,
      fromTag: fromTag,
      fromText: fromText,
      fromDom: fromDom
    };
  }
);

define(
  'ephox.sugar.api.node.NodeTypes',

  [

  ],

  function () {
    return {
      ATTRIBUTE:              2,
      CDATA_SECTION:          4,
      COMMENT:                8,
      DOCUMENT:               9,
      DOCUMENT_TYPE:          10,
      DOCUMENT_FRAGMENT:      11,
      ELEMENT:                1,
      TEXT:                   3,
      PROCESSING_INSTRUCTION: 7,
      ENTITY_REFERENCE:       5,
      ENTITY:                 6,
      NOTATION:               12
    };
  }
);
define(
  'ephox.sugar.api.search.Selectors',

  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Option',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.node.NodeTypes',
    'global!Error',
    'global!document'
  ],

  function (Arr, Option, Element, NodeTypes, Error, document) {
    /*
     * There's a lot of code here; the aim is to allow the browser to optimise constant comparisons,
     * instead of doing object lookup feature detection on every call
     */
    var STANDARD = 0;
    var MSSTANDARD = 1;
    var WEBKITSTANDARD = 2;
    var FIREFOXSTANDARD = 3;

    var selectorType = (function () {
      var test = document.createElement('span');
      // As of Chrome 34 / Safari 7.1 / FireFox 34, everyone except IE has the unprefixed function.
      // Still check for the others, but do it last.
      return test.matches !== undefined ? STANDARD :
             test.msMatchesSelector !== undefined ? MSSTANDARD :
             test.webkitMatchesSelector !== undefined ? WEBKITSTANDARD :
             test.mozMatchesSelector !== undefined ? FIREFOXSTANDARD :
             -1;
    })();


    var ELEMENT = NodeTypes.ELEMENT;
    var DOCUMENT = NodeTypes.DOCUMENT;

    var is = function (element, selector) {
      var elem = element.dom();
      if (elem.nodeType !== ELEMENT) return false; // documents have querySelector but not matches

      // As of Chrome 34 / Safari 7.1 / FireFox 34, everyone except IE has the unprefixed function.
      // Still check for the others, but do it last.
      else if (selectorType === STANDARD) return elem.matches(selector);
      else if (selectorType === MSSTANDARD) return elem.msMatchesSelector(selector);
      else if (selectorType === WEBKITSTANDARD) return elem.webkitMatchesSelector(selector);
      else if (selectorType === FIREFOXSTANDARD) return elem.mozMatchesSelector(selector);
      else throw new Error('Browser lacks native selectors'); // unfortunately we can't throw this on startup :(
    };

    var bypassSelector = function (dom) {
      // Only elements and documents support querySelector
      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT ||
              // IE fix for complex queries on empty nodes: http://jsfiddle.net/spyder/fv9ptr5L/
              dom.childElementCount === 0;
    };

    var all = function (selector, scope) {
      var base = scope === undefined ? document : scope.dom();
      return bypassSelector(base) ? [] : Arr.map(base.querySelectorAll(selector), Element.fromDom);
    };

    var one = function (selector, scope) {
      var base = scope === undefined ? document : scope.dom();
      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);
    };

    return {
      all: all,
      is: is,
      one: one
    };
  }
);

define(
  'ephox.sugar.api.dom.Compare',

  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.sand.api.Node',
    'ephox.sand.api.PlatformDetection',
    'ephox.sugar.api.search.Selectors'
  ],

  function (Arr, Fun, Node, PlatformDetection, Selectors) {

    var eq = function (e1, e2) {
      return e1.dom() === e2.dom();
    };

    var isEqualNode = function (e1, e2) {
      return e1.dom().isEqualNode(e2.dom());
    };

    var member = function (element, elements) {
      return Arr.exists(elements, Fun.curry(eq, element));
    };

    // DOM contains() method returns true if e1===e2, we define our contains() to return false (a node does not contain itself).
    var regularContains = function (e1, e2) {
      var d1 = e1.dom(), d2 = e2.dom();
      return d1 === d2 ? false : d1.contains(d2);
    };

    var ieContains = function (e1, e2) {
      // IE only implements the contains() method for Element nodes.
      // It fails for Text nodes, so implement it using compareDocumentPosition()
      // https://connect.microsoft.com/IE/feedback/details/780874/node-contains-is-incorrect
      // Note that compareDocumentPosition returns CONTAINED_BY if 'e2 *is_contained_by* e1':
      // Also, compareDocumentPosition defines a node containing itself as false.
      return Node.documentPositionContainedBy(e1.dom(), e2.dom());
    };

    var browser = PlatformDetection.detect().browser;

    // Returns: true if node e1 contains e2, otherwise false.
    // (returns false if e1===e2: A node does not contain itself).
    var contains = browser.isIE() ? ieContains : regularContains;

    return {
      eq: eq,
      isEqualNode: isEqualNode,
      member: member,
      contains: contains,

      // Only used by DomUniverse. Remove (or should Selectors.is move here?)
      is: Selectors.is
    };
  }
);

/**
 * ScrollIntoView.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.dom.ScrollIntoView',
  [
    'tinymce.core.dom.NodeType'
  ],
  function (NodeType) {
    var getPos = function (elm) {
      var x = 0, y = 0;

      var offsetParent = elm;
      while (offsetParent && offsetParent.nodeType) {
        x += offsetParent.offsetLeft || 0;
        y += offsetParent.offsetTop || 0;
        offsetParent = offsetParent.offsetParent;
      }

      return { x: x, y: y };
    };

    var fireScrollIntoViewEvent = function (editor, elm, alignToTop) {
      var scrollEvent = { elm: elm, alignToTop: alignToTop };
      editor.fire('scrollIntoView', scrollEvent);
      return scrollEvent.isDefaultPrevented();
    };

    var scrollIntoView = function (editor, elm, alignToTop) {
      var y, viewPort, dom = editor.dom, root = dom.getRoot(), viewPortY, viewPortH, offsetY = 0;

      if (fireScrollIntoViewEvent(editor, elm, alignToTop)) {
        return;
      }

      if (!NodeType.isElement(elm)) {
        return;
      }

      if (alignToTop === false) {
        offsetY = elm.offsetHeight;
      }

      if (root.nodeName !== 'BODY') {
        var scrollContainer = editor.selection.getScrollContainer();
        if (scrollContainer) {
          y = getPos(elm).y - getPos(scrollContainer).y + offsetY;
          viewPortH = scrollContainer.clientHeight;
          viewPortY = scrollContainer.scrollTop;
          if (y < viewPortY || y + 25 > viewPortY + viewPortH) {
            scrollContainer.scrollTop = y < viewPortY ? y : y - viewPortH + 25;
          }

          return;
        }
      }

      viewPort = dom.getViewPort(editor.getWin());
      y = dom.getPos(elm).y + offsetY;
      viewPortY = viewPort.y;
      viewPortH = viewPort.h;
      if (y < viewPort.y || y + 25 > viewPortY + viewPortH) {
        editor.getWin().scrollTo(0, y < viewPortY ? y : y - viewPortH + 25);
      }
    };

    return {
      scrollIntoView: scrollIntoView
    };
  }
);

/**
 * TridentSelection.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Selection class for old explorer versions. This one fakes the
 * native selection object available on modern browsers.
 *
 * @private
 * @class tinymce.dom.TridentSelection
 */
define(
  'tinymce.core.dom.TridentSelection',
  [
  ],
  function () {
    function Selection(selection) {
      var self = this, dom = selection.dom, FALSE = false;

      function getPosition(rng, start) {
        var checkRng, startIndex = 0, endIndex, inside,
          children, child, offset, index, position = -1, parent;

        // Setup test range, collapse it and get the parent
        checkRng = rng.duplicate();
        checkRng.collapse(start);
        parent = checkRng.parentElement();

        // Check if the selection is within the right document
        if (parent.ownerDocument !== selection.dom.doc) {
          return;
        }

        // IE will report non editable elements as it's parent so look for an editable one
        while (parent.contentEditable === "false") {
          parent = parent.parentNode;
        }

        // If parent doesn't have any children then return that we are inside the element
        if (!parent.hasChildNodes()) {
          return { node: parent, inside: 1 };
        }

        // Setup node list and endIndex
        children = parent.children;
        endIndex = children.length - 1;

        // Perform a binary search for the position
        while (startIndex <= endIndex) {
          index = Math.floor((startIndex + endIndex) / 2);

          // Move selection to node and compare the ranges
          child = children[index];
          checkRng.moveToElementText(child);
          position = checkRng.compareEndPoints(start ? 'StartToStart' : 'EndToEnd', rng);

          // Before/after or an exact match
          if (position > 0) {
            endIndex = index - 1;
          } else if (position < 0) {
            startIndex = index + 1;
          } else {
            return { node: child };
          }
        }

        // Check if child position is before or we didn't find a position
        if (position < 0) {
          // No element child was found use the parent element and the offset inside that
          if (!child) {
            checkRng.moveToElementText(parent);
            checkRng.collapse(true);
            child = parent;
            inside = true;
          } else {
            checkRng.collapse(false);
          }

          // Walk character by character in text node until we hit the selected range endpoint,
          // hit the end of document or parent isn't the right one
          // We need to walk char by char since rng.text or rng.htmlText will trim line endings
          offset = 0;
          while (checkRng.compareEndPoints(start ? 'StartToStart' : 'StartToEnd', rng) !== 0) {
            if (checkRng.move('character', 1) === 0 || parent != checkRng.parentElement()) {
              break;
            }

            offset++;
          }
        } else {
          // Child position is after the selection endpoint
          checkRng.collapse(true);

          // Walk character by character in text node until we hit the selected range endpoint, hit
          // the end of document or parent isn't the right one
          offset = 0;
          while (checkRng.compareEndPoints(start ? 'StartToStart' : 'StartToEnd', rng) !== 0) {
            if (checkRng.move('character', -1) === 0 || parent != checkRng.parentElement()) {
              break;
            }

            offset++;
          }
        }

        return { node: child, position: position, offset: offset, inside: inside };
      }

      // Returns a W3C DOM compatible range object by using the IE Range API
      function getRange() {
        var ieRange = selection.getRng(), domRange = dom.createRng(), element, collapsed, tmpRange, element2, bookmark;

        // If selection is outside the current document just return an empty range
        element = ieRange.item ? ieRange.item(0) : ieRange.parentElement();
        if (element.ownerDocument != dom.doc) {
          return domRange;
        }

        collapsed = selection.isCollapsed();

        // Handle control selection
        if (ieRange.item) {
          domRange.setStart(element.parentNode, dom.nodeIndex(element));
          domRange.setEnd(domRange.startContainer, domRange.startOffset + 1);

          return domRange;
        }

        function findEndPoint(start) {
          var endPoint = getPosition(ieRange, start), container, offset, textNodeOffset = 0, sibling, undef, nodeValue;

          container = endPoint.node;
          offset = endPoint.offset;

          if (endPoint.inside && !container.hasChildNodes()) {
            domRange[start ? 'setStart' : 'setEnd'](container, 0);
            return;
          }

          if (offset === undef) {
            domRange[start ? 'setStartBefore' : 'setEndAfter'](container);
            return;
          }

          if (endPoint.position < 0) {
            sibling = endPoint.inside ? container.firstChild : container.nextSibling;

            if (!sibling) {
              domRange[start ? 'setStartAfter' : 'setEndAfter'](container);
              return;
            }

            if (!offset) {
              if (sibling.nodeType == 3) {
                domRange[start ? 'setStart' : 'setEnd'](sibling, 0);
              } else {
                domRange[start ? 'setStartBefore' : 'setEndBefore'](sibling);
              }

              return;
            }

            // Find the text node and offset
            while (sibling) {
              if (sibling.nodeType == 3) {
                nodeValue = sibling.nodeValue;
                textNodeOffset += nodeValue.length;

                // We are at or passed the position we where looking for
                if (textNodeOffset >= offset) {
                  container = sibling;
                  textNodeOffset -= offset;
                  textNodeOffset = nodeValue.length - textNodeOffset;
                  break;
                }
              }

              sibling = sibling.nextSibling;
            }
          } else {
            // Find the text node and offset
            sibling = container.previousSibling;

            if (!sibling) {
              return domRange[start ? 'setStartBefore' : 'setEndBefore'](container);
            }

            // If there isn't any text to loop then use the first position
            if (!offset) {
              if (container.nodeType == 3) {
                domRange[start ? 'setStart' : 'setEnd'](sibling, container.nodeValue.length);
              } else {
                domRange[start ? 'setStartAfter' : 'setEndAfter'](sibling);
              }

              return;
            }

            while (sibling) {
              if (sibling.nodeType == 3) {
                textNodeOffset += sibling.nodeValue.length;

                // We are at or passed the position we where looking for
                if (textNodeOffset >= offset) {
                  container = sibling;
                  textNodeOffset -= offset;
                  break;
                }
              }

              sibling = sibling.previousSibling;
            }
          }

          domRange[start ? 'setStart' : 'setEnd'](container, textNodeOffset);
        }

        try {
          // Find start point
          findEndPoint(true);

          // Find end point if needed
          if (!collapsed) {
            findEndPoint();
          }
        } catch (ex) {
          // IE has a nasty bug where text nodes might throw "invalid argument" when you
          // access the nodeValue or other properties of text nodes. This seems to happen when
          // text nodes are split into two nodes by a delete/backspace call.
          // So let us detect and try to fix it.
          if (ex.number == -2147024809) {
            // Get the current selection
            bookmark = self.getBookmark(2);

            // Get start element
            tmpRange = ieRange.duplicate();
            tmpRange.collapse(true);
            element = tmpRange.parentElement();

            // Get end element
            if (!collapsed) {
              tmpRange = ieRange.duplicate();
              tmpRange.collapse(false);
              element2 = tmpRange.parentElement();
              element2.innerHTML = element2.innerHTML;
            }

            // Remove the broken elements
            element.innerHTML = element.innerHTML;

            // Restore the selection
            self.moveToBookmark(bookmark);

            // Since the range has moved we need to re-get it
            ieRange = selection.getRng();

            // Find start point
            findEndPoint(true);

            // Find end point if needed
            if (!collapsed) {
              findEndPoint();
            }
          } else {
            throw ex; // Throw other errors
          }
        }

        return domRange;
      }

      this.getBookmark = function (type) {
        var rng = selection.getRng(), bookmark = {};

        function getIndexes(node) {
          var parent, root, children, i, indexes = [];

          parent = node.parentNode;
          root = dom.getRoot().parentNode;

          while (parent != root && parent.nodeType !== 9) {
            children = parent.children;

            i = children.length;
            while (i--) {
              if (node === children[i]) {
                indexes.push(i);
                break;
              }
            }

            node = parent;
            parent = parent.parentNode;
          }

          return indexes;
        }

        function getBookmarkEndPoint(start) {
          var position;

          position = getPosition(rng, start);
          if (position) {
            return {
              position: position.position,
              offset: position.offset,
              indexes: getIndexes(position.node),
              inside: position.inside
            };
          }
        }

        // Non ubstructive bookmark
        if (type === 2) {
          // Handle text selection
          if (!rng.item) {
            bookmark.start = getBookmarkEndPoint(true);

            if (!selection.isCollapsed()) {
              bookmark.end = getBookmarkEndPoint();
            }
          } else {
            bookmark.start = { ctrl: true, indexes: getIndexes(rng.item(0)) };
          }
        }

        return bookmark;
      };

      this.moveToBookmark = function (bookmark) {
        var rng, body = dom.doc.body;

        function resolveIndexes(indexes) {
          var node, i, idx, children;

          node = dom.getRoot();
          for (i = indexes.length - 1; i >= 0; i--) {
            children = node.children;
            idx = indexes[i];

            if (idx <= children.length - 1) {
              node = children[idx];
            }
          }

          return node;
        }

        function setBookmarkEndPoint(start) {
          var endPoint = bookmark[start ? 'start' : 'end'], moveLeft, moveRng, undef, offset;

          if (endPoint) {
            moveLeft = endPoint.position > 0;

            moveRng = body.createTextRange();
            moveRng.moveToElementText(resolveIndexes(endPoint.indexes));

            offset = endPoint.offset;
            if (offset !== undef) {
              moveRng.collapse(endPoint.inside || moveLeft);
              moveRng.moveStart('character', moveLeft ? -offset : offset);
            } else {
              moveRng.collapse(start);
            }

            rng.setEndPoint(start ? 'StartToStart' : 'EndToStart', moveRng);

            if (start) {
              rng.collapse(true);
            }
          }
        }

        if (bookmark.start) {
          if (bookmark.start.ctrl) {
            rng = body.createControlRange();
            rng.addElement(resolveIndexes(bookmark.start.indexe•dê! õ”r@4Pé
)©  ©4"EÆ e¤ @ ’¡ À€ ĞP¡P€D(L!@¸'@Ap#EO ƒB:ÑQ0ÓtB(­4	Ø$ñ€ì`Ò`qË[„@Â —²lÀ
wpb0…#@ÈW *¶>A“€2%"E¨Œè("¢Ğ§I±,”LCÀË@3¡ƒX!úÛIœ©¼´ñ!}Ä¦‹ !9u D’A4@|0¦#Q­ ,TÑ ’Üâ-  ¨WH Ğ‚#LŠÎ6‰À¶ EC `‰(´Li€´‚ƒ°ˆ´5@#äxJ" ŠMDğH,VX)GĞ C? „FMi:u`*¼“1‹¨K`ƒ!„ ·`˜Ê¯°@W €PÒ„( €!
b@0$Âcä!Ğ@åTM ^¦P^Ë 4 œ®Ìó"ˆ \BDÂ¼–!ÄÑ,ÈqECï8Fù¤A@0”*Íeµ	5@P"Ø¬RÀª>1&™‹z‰[‘F‘¢0Hˆz/=´RÀˆ2‘Dï„#Z"6x×pyĞ!˜8LX 	Ò0e"4µ"´rÊ\' (ƒZ(‰@Y8A«¤!¶#8(
ğ 4HÉb]ÊñàB#x,(¡¦E%	"€’KµÂ("C‘…€
	ä È€` !™„†‰2¤‘ S@B…¯@b€-`;—h¡„$¢m’(£¢Sæ$&‰˜ö4 "- 0J†ì$€!9NÀÉ
cQÉdƒ
R}Rb„³4 >:´PDˆ 
‰Ä"E €Z“ùàW€P –! 9p€4HÙ¸Š& šV€GB$4œ¥¬ à ò¦€N, ‘Ss¢‚ô a`jˆˆ‚!QY ME‘Èv‰bBa2 
ä:?ÀÑ%‘pìÛ€B–˜“Ä@4*Ái("H&M0&SäJd ÒA&I$Qí  ¢*›©‘@ sQ¡h2–Àˆpñ€ÂQ`3Z!ˆ’BÀCÔÚĞ0eBn$=YD‰¸ ( ¡	6IÁª[¨J6  HCÍŒ €8‡ Py	 ô`’L©8S.h3!°ï
ØÅ)Ã`C]ÑˆD€h6 P|X¼'PLR…D5 Ô?dHNch"
*@¢‰ĞO@À(@80	ˆ·p€Ğ2hÀ†H^€c H•„(OË	è.*Áƒ@Ô9ª(‚y& ğ(Dˆ,(Tğ)ÌÄv‰ƒ	 …‘(" ¢Â‚B0Â(’2Iˆ="À$HÌ	K†rHQ >Âc0n¨AY°3„ÌQ˜&”BÃqq U
ˆI™·@ ³EGdA“†:@  …"` ’gÒğ °çJ-àÂ1†…<ğ¡P²‰§‚A@@PYPÔ °¯P«”àPL€›á€hI@EˆÄàşÈ@0yxÀpÜ˜
h 8ÆBH€4QB‹Œ CÓ‘ %EˆMí  AAP‚,Ìy ’†pˆ%àDP $‰.Òzàan.ÈÀÀfHÄ
G0n$+P¡• 5r,P œØ…?‡­B%]hà  „ Æ2  €ô¡  ÁŒc’ Ñ# IÛ" 	q€$B–óB$HIˆ¤Es€ Ç‡á>J ¤I!I ²E$Ná+ …¤ AqFˆ aiÀÀD ø”Q€ÀŒK˜F ¦nú@à0@„ÑD!"n•ÀAÀZd)N,
BP@ÀîHa+•#&r	0%G“K3¼â©¦`9‘P€ÆR&TÎÑ9P‰¡šy‡,â3ˆ1‚jA°	Ğ  =DM™$B&È¿ Ç‚Á µÒ#€G<&  ÁqD‚EY 0*+EF41 £™@B"h*fZã¨&ºèQà¨ 84PB@:P `¶›,\  ×¢€"tBt„À‘¤-ÂğˆPŞVJ¢<AFÄBÌ% ­&‚Œ$…Â Ö¸
HÁIÅˆ+b ": ©!ˆªH
·L@4@ ¥"O"h‚™8Æ	òD@+$ê  ”À4’ €ê,‰€$%A!-$jP)u"UáîC±‡ F„C†% 	¤a,	3–Ú†`Ú`V€*vªˆ¾)ZH4¥¨L%c ÈDâ ‚‹á~Øˆ,aA!1
9BÂÀÑ„  ‘ÍÁ	à]! Øº€ùÓkî@AAÀ¥ ×„!©€‘#«e	i©@X¡?`QlAË  `7!^Â–E`\IÉB€  2È0Ò`„(D‘FA`±PÎE%HH€!I4Q_
À b¨cv„ÁËpÀÆÌû ä!„U¤ÑDPX$ÂÌa"Ôğ $å=ÓA0Ù¢²‚	ˆbñ>Aä#éQ ‚Àa!Œ`¢¬$„ M¢YMÈ^„NÈAp!E„Z„cFB+†’À(ˆbˆÒJ!  ˜´*aX« E6%L€
$@Rh@$`$¨‘:P!Jœ”1ˆ¢0€Bàd,f)ˆ@Ãay<@ˆnc¯ Ì òHsâ
 $­ÏqÖ"$8œ:²C ä7ƒ&À….”C°a’ÁM0ÿ8‚3@H•RZ°VÈ ¾›ÑŞ 	A€&ÅHÌ'®>›Jé(#B
r"‰i ÖKÂ4ìˆ –&™-*8’œI!x¼èÆ2Á() ™ >.DJá° €¤  Be0f€Å.U0 ñ‘KÀ0fµmàÄH	‚l€¨ğX #,\	™ƒDP*Ø½I  èLXØ 1°«”RÍ]  …€R˜ƒYFÒ Šs@`«
\Î¢”Æ( (B µ’Àó:ğ #B € !J´‚(I€JL¨PâY@’ …0ˆâ À[‚@’&  3APŸi0}X³@$Øc @ k#‘ÑŒ P b -®j@ˆ" i˜Æ&.uB% £˜'fé@  `Zú$xCgAH	À'(¯ƒhp‚ ”B9Ì  Ù$ÙˆY 0F˜…DÊ",2 ƒ@’E©„€@ô ‡5D”A€¸’!è‘€£PQP¸¬DCc±6ƒ`T	9ƒ<ÅRÀ@CjM Ò  S~â*  @" p$•¥Ç$A2
&„àAÈ(j|ÊX8¡BƒJH„?T‰®(Ô7I*ƒMnU!
HÄ`Q
`D!0%b@€Ğ,†€R U2â(”lğ(„4€²%ETRÅ˜@KHàŒZÂA€Hšp Ü  
ä (¬"åŒ¦ª `  ‘ 4`	 „¥I€îñÊ.1M(²Â(	H
èV‚ ©ya/]AŠA%¤ÇOğ'¹€j`Ø$ ¨7p1’©‘ĞI“AR/”2íG‚H J“!à#XPZH§j &t@.(( Hd(ÀKÆ!Zô[0äCw1 ÀÀ^Â2C"w Æ\"j€H€fPÂôÅÀÉÃ7.°Œ"Ò„€‚ áIA†)c@&Ï$Ô ‘±‡ÇiŒa è²ÊL¸a†8Á²¬˜ °LGÇ
ŠØP9€)C%8	È/P”‰HË½@ ¥!—‚gy´à«	E4i¥xµ¦r!sÀa!p¤¸Z˜	šr/Ó¦@dT€	‚ÁQ)F Œ) $hE¡"UXÃ¡A U%ÎxéÁ…„r$àD€pÁ—"€›d À "A*‹¥ Š¡ lÂ ŒGr$  ¤ ”¦‚BÈ
ÄŠã‘;Ê#I€XÓ…  PÙˆÀÎÈœ$ˆÀ"Ã°V„BA=”3Vƒ@ª&	à ŠC1Ó`ÀP àqC\0 AB"°4HR!Ô+ˆ ,‰ÉHá  @h7PBše*ôD†XàÂªnM„„È()±ÂH9µ&P`  o`vä@bŠWD€èd„ 
0Rˆ®Œ" 4= 	&`qC„ƒD@s V"å„#¦Ğ*Š@UáDä	ƒ2Ó? °`’¶M`$Äuú
ÂF ƒ'†ôiH µdPQÀÄ‘:ºÓB|4é˜lÒÈ0T G
arMkf„„¯A	‰$±…˜¥$&46Ó¬: P´‰ÔE…1Ğ`b’’‡‘j¶BĞ#‘$	H€`Ô€ ‘ô2ğ€R)‚‘`)DQÇ"g d‚Pº#,ÂÉ‘› #W‚ucJ†£d6D„

0R†€BD˜`)$ÀINI¬U'*ˆD	äÂ‚>MÒó1(xœ‚ÊQ‘†¤ˆQ€+ €)e‡	˜ #8¬ á!lF°‚ƒR‰ƒ E‡"“
È
_—ÀT’¤ ™‡¡Àr°"$ B$4H–3 0 ˆb™¤…Á@+ˆ¢Á®–ÉLÍL@š1 	„!3€r¨EƒuƒP""8T[Lˆ88(k°š¶ ÆF	B³äâˆ	Ã,ˆ³˜'J0P 	‚@ °@PÇÁ¢3bĞ'š$'0hÄä‘œ ƒ½€%	>ğ 1‚õPËA¨(  àQ`æ¹8lA#R4Y ‡'¼{DÙKœÑ—h$Ø*$
ıÂ†Y"Æ$	ÀB‡y–°Ä‘&‚®‘ñc$`l`$²1 á’£’+P!
±„“‚	Yåò Á4Úà ƒ 1
÷Cc €Eô¡r*U50Ch–¦EM¨	È„ADQ'%„àG[†ˆ• 
Â@  `-b%, ev…*E€Ap=qIPGâ§C‡Åôˆî)%k (•£0Kæ@lB äÒP¬váÄÈŒšÚ¨p‹P
	! CˆITÀˆ „
ÈAã.ˆ‡	0 ‹`6´‚€Š	ˆ   Ê’!` p@á0ƒÅ˜ŠØ~2 1w±@ 8
Ve€ˆêïèHhÊ£"²H #¨H‰§D˜QAXŒ2ğ
Eƒ	0&³! À† ­\
H@[\Ö‰€# ! V›‘ŒĞ +¨)Šcè!@p¥)aé… G %`xÌ…’ÔPE$Îm$d<ªO+Nâˆ
â.8-I˜d<‹Àh1ÀœL$B!pN ‡PĞ €¶ dÄQ €Ñ€/'`q%’ PCâÄ$¢c €0¢:.LkU	`ğ„ñ €Â„€‹	‚",†H’ˆ‚¨G€``@²€B‚d\l÷RA¤ÇD(yƒ”0Â‡‡$±”’B À Z1£ ‘(°>3Ûf†‘° ¬‘m‰ €Š.ïv„@ H(()!	H kˆ‡Öé œ ID§4$PÔÂ4/
@p("Æ!C"
§@°89(RnH‹óE‚ö›Å
 RPª€æÊBR©bF1ªY,géGj âB9\	Ì ˆEE$pJ0R-$§@4„!6ø q6(š"  C@+ '„°ì/¤”-RP©[
€êŒ†	 Ú`æR.vÈŠ‡«àp ®A Ò L0Øğ!	D„©	`
 G £Ü¤
Ä$¤À2b‘ sf»€ük1Ì‘b9~F"GX@'?áØˆ˜ ~5C|/„Â(ÀÀ
y (€ZĞ–£ıdb1 l*¡ ˜‚œ—l‚…`
‚óXhÖŒx2L„DÙ€Í<{ŸH@.% €ÀQ PV4z‹B3«AH ¾Œj€KA*y¢@A˜V#~‘ÀT2´€'LAÈ ´ÙC7Äæ‚E  –$$¹	Z¡²eœ@L G
º ¥Ø'AIÅˆ¨bD¢.9Ê0¶"	¸¡‚‘9 ! #(C”¬bÎÓt‚°rx‰ÂäE¸  0a–5 ‚h(- ´AàP`&B‚¡P8â4Õ‹Q¤ÄH@"XV`€]
‚:m@Ü•¨2ÄfP6)40è@Š+à±!@\OÈøøB µ0”HK`ä—PÂêlËKÅ‹@6 ‘Ú€ğGLbh—Øèl=& 	I°†;å…
  ¸ÕP	„ò 
¢ÀI&9ŒúÈ()@*‡"Nu<!D£1”	òˆ‚PZCpˆ‘‰åNš‹2JD,¸ $(ÂBd!D†4Yá`!Lra™1	(D	ê(Z&Ñ$J‹ÅA,©)A f>E #	E‚MäX
#ÒâÀ7 0<È„ˆÆGñ1ÁzPBX  ”H§İ

@EPCàA%`… BÀÒÃ!lÄ% Ih@.:)k¬«%l"ê0á$@İ	( !@„B~HÚR2²P	@Ô„ĞÄ Q•Â! 5 …l.@jF(@#z …P(DD9½"(  ^Ö<qğ€"13R4 )Cûqİad	 &ÅF!äD£	«ä˜C™‹Ò ÀeG0ŠŠ •'$‰±v	á
BŒ!Gd0ÈsS’T!hh7ŸP$,ÊKr ¦d+—›d8¢ØÙ†  ˆ„ å˜'Õ„(ÁTB½BQ ª‡²4ØĞ'€H†¨œ°«Z‚ò×Œ±m3"ÔÏ‰P¯ ¨$e‚[à„3i|Å¢ Ä„ùQAPqB( ƒ2"° èÂpv †JI±€‚T¥ €
Ğ®AÄ¢*¥9CrĞ„?Š l˜ X•‚‰ß%`I@axƒ4¢´QÃ&2B1²‰¤$D„‹DMaAƒBÂĞ€ @¡˜C2sP@BPÅ›V
 SHÑªª~(

©0Œ•É`O¤LP*C@ä$Qƒ7àˆêú4´	Á„‘(rÁÊ` 	DXH02  P *•	ªÿ‰Ùâ„Jl¡D{hÌ! P- "@ Ñ:P.Àx64°!e#@@À ‹ôZP$KƒxPI
è•fzŒˆJL19G)#&ßdC:4æ^HˆRÁ„4Âÿ…F
ƒa'%G€TB€ R•60âU6Š 1DÁå#¢¦3@J&ô(C†`4‡ƒA ˆ
K¦Jêz¡‰WBx¼€Â! p !)&BtB ±- e L…F XPbI
$„40ÑÍİğ&‚Ô0im@ $EÁ=€DK(eI` @RQU!",ƒJ„,  Ñ.l €2è2ê¤IÜìˆ€ç'cÀõJ…0 ”LÎ èè1’à(Á À¤`D  ’Í¤Â¿0ÍÀ‚ È\¡Dğ"Ñ”!DI‰%ÖäÉÀ,p‹a Àfa"H9Å U‚D‚gU£$*@Håñ!(ˆ-Šõ€	@€§éˆ«DBƒ@MÒ@QäªÀ°@"ìH$¥
•¢$€,X7Ğp@e‡	¸HABˆÎø™$¶*±ÙÒ°Bx$*a .p0+H
©BáK‘¦„
 ’”˜RGKDæ‰ ‚â®iñdDxˆT,Xˆè](¢`¸A'ÄH5ÖI0ô&DòD :Ä³0eª¶€Hb‘ÕÑ.İgq‰$A  n pàcäEË9‚ ‰V”„BŠÚ<B ¢ÍP- €[FX Àˆ¢Ìè„%Ê à‡õĞPÀ²­¨‚1ÅĞE9Â C@ĞŠ$j ˆQÙj„FT€JÂ¶‰&,V%Hs	39€˜W°iˆ	ĞqãAĞĞ·Ú§
PÖ1`ˆ0 Ø&à‘n@—!¡Á#°†¡¥€UZ@Ä$ÄYBTT8D$€–µÃ\a‚(Ç‹pVü &àˆ8¨µ`VFR (âà5@ª G'ª 8W…¦!AXCC‚*!ÑŠ©ø@‘ˆ,ä 0Œ˜.´„:¢d( b	´0ÁH81+m¥ÓF! si5,Ø  à$„Ò*òÓB(xÄ‚˜
R1$Ğ¥ÖJ†9‚ÙÅ(DXÊLb‡¡y Ø#ËdÆ°#¤R‘Š‚0ƒ(€À° şWj(3‰† H–Jx“9@(†*@(ZÁ)H¢ÉI£É'Â uğ- !%¥BÃ!„yÀ©4aLÕ£lJ Gàà("È@Ò„#@€  "d4.Hµƒe…!UÀ!]šE $’ x;$§. D’PÊ 9N£! Rw‡ X"3)âÉ”*tÂÒ …TV ÂßUdä!NAš7õ
²R;D h"Â7 ,Å¤ƒ‚#—dF(åN*	0¬	’8€
 )@ € U´L4Zš 83 ØpM ôƒdœXˆˆ”@`ÿHs x6 ‚M$´Ï+".É‚° ¸À) <1$I$JH@ nQ.ˆJšˆA×!'Ä–d‡—\øE€Cx‚ãP
	U@ J‚› ° ˆô\FÒ…@B’AÂ^ÀS"Í‹ÕgH èSÓÍ	4ğÁ€Ç€",	’ä® !‹‰€„hÄÈÀXLa(P!€p &j‡,ultEĞ`“Vƒ“Ú†š(%¤t/¤)‚ˆ´ € 3
è¨¡«%`5Š 4BÊ1n*„*
µB€À“
ªD„ÀŠ6àb ˜P@rö°}ÍBÂ
 âĞƒBC5” h"PdK‘áÙD¨š„ÍĞb…Â›°$D…P‚ €â³Q	P#‚€Ó R¨À42ğ   è7š€qD–‚d¡
C@¢M °(QÈ47¿IC$4áDaˆÔ¤	 / {
 pfÄûè° … TÈAeÅÓ‚Ô‰,0x¸¨MÉ] k Pj”€$‘ Â)_‡"hkEq`"  ‡	åHˆhEE@dI
™qQ *´À^,²(5 $Õ°°S“‘
X)aO €•¤&„×		TÉr4bs PP 
Mr({Œæ2¹h€‰¥EÀ0eÁ&`¦
ÁWd €PÈa3Hm@ `@6 ^â P!À@qø‘ñ‹( NV6ÈDD+')BW‰A‚ ÍàMˆD\H
Ê„í‚Ÿ¤<ˆÀ ¦:ˆ«†73ˆU([àÑ_ƒb¹ ÒPÎ”ÑPLŠ,ˆxFÇ@Aq°‘T " ‚rX kp$$K`T=ò\Šd} P°`ĞPÁˆP<,Šrò*P×ÅƒD”vÛb"D–Â € Š§p9	øáU‘‘7­
ˆ¦b’ ‹ p‰Àd¬hWÁ“„HÀÌÑX¼ÂƒB)ì%ÉY¡\HE%Å tuple.v;
      });
      return r;
    };

    /** bifilter :: (JsObj(k, v), (v, k -> Bool)) -> { t: JsObj(k, v), f: JsObj(k, v) } */
    var bifilter = function (obj, pred) {
      var t = {};
      var f = {};
      each(obj, function(x, i) {
        var branch = pred(x, i) ? t : f;
        branch[i] = x;
      });
      return {
        t: t,
        f: f
      };
    };

    /** mapToArray :: (JsObj(k, v), (v, k -> a)) -> [a] */
    var mapToArray = function (obj, f) {
      var r = [];
      each(obj, function(value, name) {
        r.push(f(value, name));
      });
      return r;
    };

    /** find :: (JsObj(k, v), (v, k, JsObj(k, v) -> Bool)) -> Option v */
    var find = function (obj, pred) {
      var props = keys(obj);
      for (var k = 0, len = props.length; k < len; k++) {
        var i = props[k];
        var x = obj[i];
        if (pred(x, i, obj)) {
          return Option.some(x);
        }
      }
      return Option.none();
    };

    /** values :: JsObj(k, v) -> [v] */
    var values = function (obj) {
      return mapToArray(obj, function (v) {
        return v;
      });
    };

    var size = function (obj) {
      return values(obj).length;
    };

    return {
      bifilter: bifilter,
      each: each,
      map: objectMap,
      mapToArray: mapToArray,
      tupleMap: tupleMap,
      find: find,
      keys: keys,
      values: values,
      size: size
    };
  }
);
define(
  'ephox.katamari.util.BagUtils',

  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Type',
    'global!Error'
  ],

  function (Arr, Type, Error) {
    var sort = function (arr) {
      return arr.slice(0).sort();
    };

    var reqMessage = function (required, keys) {
      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');
    };

    var unsuppMessage = function (unsupported) {
      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));
    };

    var validateStrArr = function (label, array) {
      if (!Type.isArray(array)) throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');
      Arr.each(array, function (a) {
        if (!Type.isString(a)) throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');
      });
    };

    var invalidTypeMessage = function (incorrect, type) {
      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');
    };

    var checkDupes = function (everything) {
      var sorted = sort(everything);
      var dupe = Arr.find(sorted, function (s, i) {
        return i < sorted.length -1 && s === sorted[i + 1];
      });

      dupe.each(function (d) {
        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');
      });
    };

    return {
      sort: sort,
      reqMessage: reqMessage,
      unsuppMessage: unsuppMessage,
      validateStrArr: validateStrArr,
      invalidTypeMessage: invalidTypeMessage,
      checkDupes: checkDupes
    };
  }
);
define(
  'ephox.katamari.data.MixedBag',

  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Obj',
    'ephox.katamari.api.Option',
    'ephox.katamari.util.BagUtils',
    'global!Error',
    'global!Object'
  ],

  function (Arr, Fun, Obj, Option, BagUtils, Error, Object) {
    
    return function (required, optional) {
      var everything = required.concat(optional);
      if (everything.length === 0) throw new Error('You must specify at least one required or optional field.');

      BagUtils.validateStrArr('required', required);
      BagUtils.validateStrArr('optional', optional);

      BagUtils.checkDupes(everything);

      return function (obj) {
        var keys = Obj.keys(obj);

        // Ensure all required keys are present.
        var allReqd = Arr.forall(required, function (req) {
          return Arr.contains(keys, req);
        });

        if (! allReqd) BagUtils.reqMessage(required, keys);

        var unsupported = Arr.filter(keys, function (key) {
          return !Arr.contains(everything, key);
        });

        if (unsupported.length > 0) BagUtils.unsuppMessage(unsupported);

        var r = {};
        Arr.each(required, function (req) {
          r[req] = Fun.constant(obj[req]);
        });

        Arr.each(optional, function (opt) {
          r[opt] = Fun.constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]): Option.none());
        });

        return r;
      };
    };
  }
);
define(
  'ephox.katamari.api.Struct',

  [
    'ephox.katamari.data.Immutable',
    'ephox.katamari.data.MixedBag'
  ],

  function (Immutable, MixedBag) {
    return {
      immutable: Immutable,
      immutableBag: MixedBag
    };
  }
);

define(
  'ephox.sugar.alien.Recurse',

  [

  ],

  function () {
    /**
     * Applies f repeatedly until it completes (by returning Option.none()).
     *
     * Normally would just use recursion, but JavaScript lacks tail call optimisation.
     *
     * This is what recursion looks like when manually unravelled :)
     */
    var toArray = function (target, f) {
      var r = [];

      var recurse = function (e) {
        r.push(e);
        return f(e);
      };

      var cur = f(target);
      do {
        cur = cur.bind(recurse);
      } while (cur.isSome());

      return r;
    };

    return {
      toArray: toArray
    };
  }
);
define(
  'ephox.sugar.api.search.Traverse',

  [
    'ephox.katamari.api.Type',
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Option',
    'ephox.katamari.api.Struct',
    'ephox.sugar.alien.Recurse',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.node.Element'
  ],

  function (Type, Arr, Fun, Option, Struct, Recurse, Compare, Element) {
    // The document associated with the current element
    var owner = function (element) {
      return Element.fromDom(element.dom().ownerDocument);
    };

    var documentElement = function (element) {
      // TODO: Avoid unnecessary wrap/unwrap here
      var doc = owner(element);
      return Element.fromDom(doc.dom().documentElement);
    };

    // The window element associated with the element
    var defaultView = function (element) {
      var el = element.dom();
      var defaultView = el.ownerDocument.defaultView;
      return Element.fromDom(defaultView);
    };

    var parent = function (element) {
      var dom = element.dom();
      return Option.from(dom.parentNode).map(Element.fromDom);
    };

    var findIndex = function (element) {
      return parent(element).bind(function (p) {
        // TODO: Refactor out children so we can avoid the constant unwrapping
        var kin = children(p);
        return Arr.findIndex(kin, function (elem) {
          return Compare.eq(element, elem);
        });
      });
    };

    var parents = function (element, isRoot) {
      var stop = Type.isFunction(isRoot) ? isRoot : Fun.constant(false);

      // This is used a *lot* so it needs to be performant, not recursive
      var dom = element.dom();
      var ret = [];

      while (dom.parentNode !== null && dom.parentNode !== undefined) {
        var rawParent = dom.parentNode;
        var parent = Element.fromDom(rawParent);
        ret.push(parent);

        if (stop(parent) === true) break;
        else dom = rawParent;
      }
      return ret;
    };

    var siblings = function (element) {
      // TODO: Refactor out children so we can just not add self instead of filtering afterwards
      var filterSelf = function (elements) {
        return Arr.filter(elements, function (x) {
          return !Compare.eq(element, x);
        });
      };

      return parent(element).map(children).map(filterSelf).getOr([]);
    };

    var offsetParent = function (element) {
      var dom = element.dom();
      return Option.from(dom.offsetParent).map(Element.fromDom);
    };

    var prevSibling = function (element) {
      var dom = element.dom();
      return Option.from(dom.previousSibling).map(Element.fromDom);
    };

    var nextSibling = function (element) {
      var dom = element.dom();
      return Option.from(dom.nextSibling).map(Element.fromDom);
    };

    var prevSiblings = function (element) {
      // This one needs to be reversed, so they're still in DOM order
      return Arr.reverse(Recurse.toArray(element, prevSibling));
    };

    var nextSiblings = function (element) {
      return Recurse.toArray(element, nextSibling);
    };

    var children = function (element) {
      var dom = element.dom();
      return Arr.map(dom.childNodes, Element.fromDom);
    };

    var child = function (element, index) {
      var children = element.dom().childNodes;
      return Option.from(children[index]).map(Element.fromDom);
    };

    var firstChild = function (element) {
      return child(element, 0);
    };

    var lastChild = function (element) {
      return child(element, element.dom().childNodes.length - 1);
    };

    var spot = Struct.immutable('element', 'offset');
    var leaf = function (element, offset) {
      var cs = children(element);
      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);
    };

    return {
      owner: owner,
      defaultView: defaultView,
      documentElement: documentElement,
      parent: parent,
      findIndex: findIndex,
      parents: parents,
      siblings: siblings,
      prevSibling: prevSibling,
      offsetParent: offsetParent,
      prevSiblings: prevSiblings,
      nextSibling: nextSibling,
      nextSiblings: nextSiblings,
      children: children,
      child: child,
      firstChild: firstChild,
      lastChild: lastChild,
      leaf: leaf
    };
  }
);

define(
  'ephox.sugar.api.dom.Insert',

  [
    'ephox.sugar.api.search.Traverse'
  ],

  function (Traverse) {
    var before = function (marker, element) {
      var parent = Traverse.parent(marker);
      parent.each(function (v) {
        v.dom().insertBefore(element.dom(), marker.dom());
      });
    };

    var after = function (marker, element) {
      var sibling = Traverse.nextSibling(marker);
      sibling.fold(function () {
        var parent = Traverse.parent(marker);
        parent.each(function (v) {
          append(v, element);
        });
      }, function (v) {
        before(v, element);
      });
    };

    var prepend = function (parent, element) {
      var firstChild = Traverse.firstChild(parent);
      firstChild.fold(function () {
        append(parent, element);
      }, function (v) {
        parent.dom().insertBefore(element.dom(), v.dom());
      });
    };

    var append = function (parent, element) {
      parent.dom().appendChild(element.dom());
    };

    var appendAt = function (parent, element, index) {
      Traverse.child(parent, index).fold(function () {
        append(parent, element);
      }, function (v) {
        before(v, element);
      });
    };

    var wrap = function (element, wrapper) {
      before(element, wrapper);
      append(wrapper, element);
    };

    return {
      before: before,
      after: after,
      prepend: prepend,
      append: append,
      appendAt: appendAt,
      wrap: wrap
    };
  }
);

define(
  'ephox.sugar.api.node.Node',

  [
    'ephox.sugar.api.node.NodeTypes'
  ],

  function (NodeTypes) {
    var name = function (element) {
      var r = element.dom().nodeName;
      return r.toLowerCase();
    };

    var type = function (element) {
      return element.dom().nodeType;
    };

    var value = function (element) {
      return element.dom().nodeValue;
    };

    var isType = function (t) {
      return function (element) {
        return type(element) === t;
      };
    };

    var isComment = function (element) {
      return type(element) === NodeTypes.COMMENT || name(element) === '#comment';
    };

    var isElement = isType(NodeTypes.ELEMENT);
    var isText = isType(NodeTypes.TEXT);
    var isDocument = isType(NodeTypes.DOCUMENT);

    return {
      name: name,
      type: type,
      value: value,
      isElement: isElement,
      isText: isText,
      isDocument: isDocument,
      isComment: isComment
    };
  }
);

define(
  'ephox.sugar.api.properties.Attr',

  [
    'ephox.katamari.api.Type',
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Obj',
    'ephox.sugar.api.node.Node',
    'global!Error',
    'global!console'
  ],

  /*
   * Direct attribute manipulation has been around since IE8, but
   * was apparently unstable until IE10.
   */
  function (Type, Arr, Obj, Node, Error, console) {
    var rawSet = function (dom, key, value) {
      /*
       * JQuery coerced everything to a string, and silently did nothing on text node/null/undefined.
       *
       * We fail on those invalid cases, only allowing numbers and booleans.
       */
      if (Type.isString(value) || Type.isBoolean(value) || Type.isNumber(value)) {
        dom.setAttribute(key, value + '');
      } else {
        console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);
        throw new Error('Attribute value was not simple');
      }
    };

    var set = function (element, key, value) {
      rawSet(element.dom(), key, value);
    };

    var setAll = function (element, attrs) {
      var dom = element.dom();
      Obj.each(attrs, function (v, k) {
        rawSet(dom, k, v);
      });
    };

    var get = function (element, key) {
      var v = element.dom().getAttribute(key);

      // undefined is the more appropriate value for JS, and this matches JQuery
      return v === null ? undefined : v;
    };

    var has = function (element, key) {
      var dom = element.dom();

      // return false for non-element nodes, no point in throwing an error
      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;
    };

    var remove = function (element, key) {
      element.dom().removeAttribute(key);
    };

    var hasNone = function (element) {
      var attrs = element.dom().attributes;
      return attrs === undefined || attrs === null || attrs.length === 0;
    };

    var clone = function (element) {
      return Arr.foldl(element.dom().attributes, function (acc, attr) {
        acc[attr.name] = attr.value;
        return acc;
      }, {});
    };

    var transferOne = function (source, destination, attr) {
      // NOTE: We don't want to clobber any existing attributes
      if (has(source, attr) && !has(destination, attr)) set(destination, attr, get(source, attr));        
    };

    // Transfer attributes(attrs) from source to destination, unless they are already present
    var transfer = function (source, destination, attrs) {
      if (!Node.isElement(source) || !Node.isElement(destination)) return;
      Arr.each(attrs, function (attr) {
        transferOne(source, destination, attr);
      });
    };

    return {
      clone: clone,
      set: set,
      setAll: setAll,
      get: get,
      has: has,
      remove: remove,
      hasNone: hasNone,
      transfer: transfer
    };
  }
);

define(
  'ephox.sugar.api.dom.InsertAll',

  [
    'ephox.katamari.api.Arr',
    'ephox.sugar.api.dom.Insert'
  ],

  function (Arr, Insert) {
    var before = function (marker, elements) {
      Arr.each(elements, function (x) {
        Insert.before(marker, x);
      });
    };

    var after = function (marker, elements) {
      Arr.each(elements, function (x, i) {
        var e = i === 0 ? marker : elements[i - 1];
        Insert.after(e, x);
      });
    };

    var prepend = function (parent, elements) {
      Arr.each(elements.slice().reverse(), function (x) {
        Insert.prepend(parent, x);
      });
    };

    var append = function (parent, elements) {
      Arr.each(elements, function (x) {
        Insert.append(parent, x);
      });
    };

    return {
      before: before,
      after: after,
      prepend: prepend,
      append: append
    };
  }
);

define(
  'ephox.sugar.api.dom.Remove',

  [
    'ephox.katamari.api.Arr',
    'ephox.sugar.api.dom.InsertAll',
    'ephox.sugar.api.search.Traverse'
  ],

  function (Arr, InsertAll, Traverse) {
    var empty = function (element) {
      // shortcut "empty node" trick. Requires IE 9.
      element.dom().textContent = '';

      // If the contents was a single empty text node, the above doesn't remove it. But, it's still faster in general
      // than removing every child node manually.
      // The following is (probably) safe for performance as 99.9% of the time the trick works and
      // Traverse.children will return an empty array.
      Arr.each(Traverse.children(element), function (rogue) {
        remove(rogue);
      });
    };

    var remove = function (element) {
      var dom = element.dom();
      if (dom.parentNode !== null)
        dom.parentNode.removeChild(dom);
    };

    var unwrap = function (wrapper) {
      var children = Traverse.children(wrapper);
      if (children.length > 0)
        InsertAll.before(wrapper, children);
      remove(wrapper);
    };

    return {
      empty: empty,
      remove: remove,
      unwrap: unwrap
    };
  }
);

define(
  'ephox.sugar.api.dom.Replication',

  [
    'ephox.sugar.api.properties.Attr',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.dom.Insert',
    'ephox.sugar.api.dom.InsertAll',
    'ephox.sugar.api.dom.Remove',
    'ephox.sugar.api.search.Traverse'
  ],

  function (Attr, Element, Insert, InsertAll, Remove, Traverse) {
    var clone = function (original, deep) {
      return Element.fromDom(original.dom().cloneNode(deep));
    };

    /** Shallow clone - just the tag, no children */
    var shallow = function (original) {
      return clone(original, false);
    };

    /** Deep clone - everything copied including children */
    var deep = function (original) {
      return clone(original, true);
    };

    /** Shallow clone, with a new tag */
    var shallowAs = function (original, tag) {
      var nu = Element.fromTag(tag);

      var attributes = Attr.clone(original);
      Attr.setAll(nu, attributes);

      return nu;
    };

    /** Deep clone, with a new tag */
    var copy = function (original, tag) {
      var nu = shallowAs(original, tag);

      // NOTE
      // previously this used serialisation:
      // nu.dom().innerHTML = original.dom().innerHTML;
      //
      // Clone should be equivalent (and faster), but if TD <-> TH toggle breaks, put it back.

      var cloneChildren = Traverse.children(deep(original));
      InsertAll.append(nu, cloneChildren);

      return nu;
    };

    /** Change the tag name, but keep all children */
    var mutate = function (original, tag) {
      var nu = shallowAs(original, tag);

      Insert.before(original, nu);
      var children = Traverse.children(original);
      InsertAll.append(nu, children);
      Remove.remove(original);
      return nu;
    };

    return {
      shallow: shallow,
      shallowAs: shallowAs,
      deep: deep,
      copy: copy,
      mutate: mutate
    };
  }
);

define(
  'ephox.sugar.api.node.Fragment',

  [
    'ephox.katamari.api.Arr',
    'ephox.sugar.api.node.Element',
    'global!document'
  ],

  function (Arr, Element, document) {
    var fromElements = function (elements, scope) {
      var doc = scope || document;
      var fragment = doc.createDocumentFragment();
      Arr.each(elements, function (element) {
        fragment.appendChild(element.dom());
      });
      return Element.fromDom(fragment);
    };

    return {
      fromElements: fromElements
    };
  }
);

/**
 * ElementType.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.dom.ElementType',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.sugar.api.node.Node'
  ],
  function (Arr, Fun, Node) {
    var blocks = [
      'article', 'aside', 'details', 'div', 'dt', 'figcaption', 'footer',
      'form', 'fieldset', 'header', 'hgroup', 'html', 'main', 'nav',
      'section', 'summary', 'body', 'p', 'dl', 'multicol', 'dd', 'figure',
      'address', 'center', 'blockquote', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
      'listing', 'xmp', 'pre', 'plaintext', 'menu', 'dir', 'ul', 'ol', 'li', 'hr',
      'table', 'tbody', 'thead', 'tfoot', 'th', 'tr', 'td', 'caption'
    ];

    var voids = [
      'area', 'base', 'basefont', 'br', 'col', 'frame', 'hr', 'img', 'input',
      'isindex', 'link', 'meta', 'param', 'embed', 'source', 'wbr', 'track'
    ];

    var tableCells = ['td', 'th'];

    var textBlocks = [
      'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'div', 'address', 'pre', 'form',
      'blockquote', 'center', 'dir', 'fieldset', 'header', 'footer', 'article',
      'section', 'hgroup', 'aside', 'nav', 'figure'
    ];

    var headings = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];

    var lazyLookup = function (items) {
      var lookup;
      return function (node) {
        lookup = lookup ? lookup : Arr.mapToObject(items, Fun.constant(true));
        return lookup.hasOwnProperty(Node.name(node));
      };
    };

    var isHeading = lazyLookup(headings);

    var isBlock = lazyLookup(blocks);

    var isInline = function (node) {
      return Node.isElement(node) && !isBlock(node);
    };

    return {
      isBlock: isBlock,
      isInline: isInline,
      isHeading: isHeading,
      isTextBlock: lazyLookup(textBlocks),
      isVoid: lazyLookup(voids),
      isTableCell: lazyLookup(tableCells)
    };
  }
);

/**
 * Parents.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.dom.Parents',
  [
    'ephox.katamari.api.Fun',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.search.Traverse'
  ],
  function (Fun, Compare, Traverse) {
    var dropLast = function (xs) {
      return xs.slice(0, -1);
    };

    var parentsUntil = function (startNode, rootElm, predicate) {
      if (Compare.contains(rootElm, startNode)) {
        return dropLast(Traverse.parents(startNode, function (elm) {
          return predicate(elm) || Compare.eq(elm, rootElm);
        }));
      } else {
        return [];
      }
    };

    var parents = function (startNode, rootElm) {
      return parentsUntil(startNode, rootElm, Fun.constant(false));
    };

    var parentsAndSelf = function (startNode, rootElm) {
      return [startNode].concat(parents(startNode, rootElm));
    };

    return {
      parentsUntil: parentsUntil,
      parents: parents,
      parentsAndSelf: parentsAndSelf
    };
  }
);

define(
  'ephox.katamari.api.Options',

  [
    'ephox.katamari.api.Option'
  ],

  function (Option) {
    /** cat :: [Option a] -> [a] */
    var cat = function (arr) {
      var r = [];
      var push = function (x) {
        r.push(x);
      };
      for (var i = 0; i < arr.length; i++) {
        arr[i].each(push);
      }
      return r;
    };

    /** findMap :: ([a], (a, Int -> Option b)) -> Option b */
    var findMap = function (arr, f) {
      for (var i = 0; i < arr.length; i++) {
        var r = f(arr[i], i);
        if (r.isSome()) {
          return r;
        }
      }
      return Option.none();
    };

    /**
     * if all elements in arr are 'some', their inner values are passed as arguments to f
     * f must have arity arr.length
    */
    var liftN = function(arr, f) {
      var r = [];
      for (var i = 0; i < arr.length; i++) {
        var x = arr[i];
        if (x.isSome()) {
          r.push(x.getOrDie());
        } else {
          return Option.none();
        }
      }
      return Option.some(f.apply(null, r));
    };

    return {
      cat: cat,
      findMap: findMap,
      liftN: liftN
    };
  }
);

/**
 * SelectionUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.selection.SelectionUtils',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Option',
    'ephox.katamari.api.Options',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.node.Node',
    'ephox.sugar.api.search.Traverse',
    'tinymce.core.dom.NodeType'
  ],
  function (Arr, Fun, Option, Options, Compare, Element, Node, Traverse, NodeType) {
    var getStartNode = function (rng) {
      var sc = rng.startContainer, so = rng.startOffset;
      if (NodeType.isText(sc)) {
        return so === 0 ? Option.some(Element.fromDom(sc)) : Option.none();
      } else {
        return Option.from(sc.childNodes[so]).map(Element.fromDom);
      }
    };

    var getEndNode = function (rng) {
      var ec = rng.endContainer, eo = rng.endOffset;
      if (NodeType.isText(ec)) {
        return eo === ec.data.length ? Option.some(Element.fromDom(ec)) : Option.none();
      } else {
        return Option.from(ec.childNodes[eo - 1]).map(Element.fromDom);
      }
    };

    var getFirstChildren = function (node) {
      return Traverse.firstChild(node).fold(
        Fun.constant([node]),
        function (child) {
          return [node].concat(getFirstChildren(child));
        }
      );
    };

    var getLastChildren = function (node) {
      return Traverse.lastChild(node).fold(
        Fun.constant([node]),
        function (child) {
          if (Node.name(child) === 'br') {
            return Traverse.prevSibling(child).map(function (sibling) {
              return [node].concat(getLastChildren(sibling));
            }).getOr([]);
          } else {
            return [node].concat(getLastChildren(child));
          }
        }
      );
    };

    var hasAllContentsSelected = function (elm, rng) {
      return Options.liftN([getStartNode(rng), getEndNode(rng)], function (startNode, endNode) {
        var start = Arr.find(getFirstChildren(elm), Fun.curry(Compare.eq, startNode));
        var end = Arr.find(getLastChildren(elm), Fun.curry(Compare.eq, endNode));
        return start.isSome() && end.isSome();
      }).getOr(false);
    };

    return {
      hasAllContentsSelected: hasAllContentsSelected
    };
  }
);

/**
 * FragmentReader.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.selection.FragmentReader',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.sugar.api.dom.Insert',
    'ephox.sugar.api.dom.Replication',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.node.Fragment',
    'ephox.sugar.api.node.Node',
    'tinymce.core.dom.ElementType',
    'tinymce.core.dom.Parents',
    'tinymce.core.selection.SelectionUtils'
  ],
  function (Arr, Fun, Insert, Replication, Element, Fragment, Node, ElementType, Parents, SelectionUtils) {
    var findParentListContainer = function (parents) {
      return Arr.find(parents, function (elm) {
        return Node.name(elm) === 'ul' || Node.name(elm) === 'ol';
      });
    };

    var getFullySelectedListWrappers = function (parents, rng) {
      return Arr.find(parents, function (elm) {
        return Node.name(elm) === 'li' && SelectionUtils.hasAllContentsSelected(elm, rng);
      }).fold(
        Fun.constant([]),
        function (li) {
          return findParentListContainer(parents).map(function (listCont) {
            return [
              Element.fromTag('li'),
              Element.fromTag(Node.name(listCont))
            ];
          }).getOr([]);
        }
      );
    };

    var wrap = function (innerElm, elms) {
      var wrapped = Arr.foldl(elms, function (acc, elm) {
        Insert.append(elm, acc);
        return elm;
      }, innerElm);
      return elms.length > 0 ? Fragment.fromElements([wrapped]) : wrapped;
    };

    var getWrapElements = function (rootNode, rng) {
      var parents = Parents.parentsAndSelf(Element.fromDom(rng.commonAncestorContainer), Element.fromDom(rootNode));
      var wrapElements = Arr.filter(parents, function (elm) {
        return ElementType.isInline(elm) || ElementType.isHeading(elm);
      });
      var fullWrappers = getFullySelectedListWrappers(parents, rng);
      return Arr.map(wrapElements.concat(fullWrappers), Replication.shallow);
    };ˆq\£~1DPóP„t9¶¡ Sfú€XGB|’+Àg>h Àƒ…v©0€DL=¡XÂZÁ©¢
Z1GÊÃ¶ª»¯>#é‹íğa©á„ €‚PL­²z€Kha 	Ôˆ(U." %i×ƒ€gbMÀ@
 T…e “ @ä †Aƒ¨Ä98¬æd$ :! rü‚¢
à¢ à&ÊàPlD Ä*0 (cH!+1…7 ±ÎÜ" – @ 
•%€4 !P`ÔÀÄÑd¢¡"â9@)   i$À j“'Bi=GÈ¸€ã4o€$H€ Œr	ìÀ§Ÿ%³J¤	Ñ’Â )„!c a …ƒ4V `Wp (_2`™ !© ”C‘¤‚*€0—RY\@2@ÂÁpÂ,°é0&È(²€0^Ï!C°"Z’p,ˆTˆDD	 :èQLóH‘	2pÊ² 	ULAtj Ÿ`D°›&H` h FÒEˆ‚³€E”Ó±lù 	DÑ*A Hà`¼\HE`Ô#Àå
`	A€M6ˆt4ì5%°Œ9Ô O…#* –
 ‘PCLÈ‚0pdPÂ1ŠÙ˜4ò@ Ó¡ÆĞ¥P€²#b0`@cñNª>*hT.âÊ |€({Ãp	h‰HaMT¨£´R Ã0€E‰€6B ^Ë2 	F‰(àÄ‰È™âx	 "H`Fdğ„4	¡,b%O" $$ègbI:˜ÛâºAf‰ThÃ1 ‡Wã$*ÒÄ	£PĞ@‚mììIJp*„¦a®ŒXàX0‚N\»à(H‰™rzf:rC¨°»IPËÄ4Ç°4T€œQ#&f>C‘ •Z#p„+şÙóƒ¨nÄ…E2ŒDŠ@c3ğL@G˜
¢J$´m„H¡…P(O’Ô01`²¥T@ ¸³ B˜IU[ Œ0 ğ4v‡—nÀ<MàR4›&€!™	$!Dù p†¸0ÿ`dp</ƒLÂ¨±H’ ÄFè¯ªlÀ!‰ ,°Bè©-
¨ÈTYvİ!İá2 H4D€œ)L3€Xß!À@4]8K€K¡Fˆš­ª¨CÁ˜2’ò qÀŒÒ)L( Kğt 8€KYÇaÒ
§"ªŠT@,)•c.&X‚ 1 nˆM†9 Æíe	HJF`PÁH J²£	r:2F 
	c
’|: ¯˜3°„"N€$¸ `! h @b€ˆ ˆ€Ä $?S˜¨Y 1 ‘BQPT'NFQ$ã	”aH.ˆ°Ën€HD¶¢È%kI ö¤@ŠšAe¥ †P˜ˆ Æä“cà!"ªÁ À£Šƒú Â¸ˆ˜~Ì˜	Wápi   IZ`(IMtS† 8pã@ˆÄˆÁIâ¥T|DÀ9T(††J'ğ‚€ñmv ñ=¤€üá¾K
x¢"S‹% Ó!5F`d'"k¤ T³€¯4¢@#†¶€„I øa0HdDlª jğ"ğ?0[‚¥eq§S8€ ¤*€¢f`„@@T1@ÂEPä`)ˆæ†7”¨{
á@‚Z¨…AèLğ†Gdö,8B2  ¸K‹€‘º 	€¡ÖLÙ.€£´	À	PB<À9a	%€@*Ğ—F¥Àdpâ ®æf'
L€8¼a¸PŠ–$„Œ
™P ÒP
ˆF0s © °!]Ä¨‚(%F°†tEê@€ T	'SDØ€™gD@Øc(ÓêBÜ ¬S€@ Œ3±€MA ê ‚J @H¥<à›Şª@àY*%5 **$€¢L’£
!~¨ 0@á<*¢DQ$$T‹ãPÂ+2ğ:
Ê0Ìáìq=TA
 ×ÒWÂ4eÒ€ŒM«rêT2°A²
	ü@D`4ûå @e#€ˆÀAb$3 Œ¤‰ñÁ0¨Ÿb€ ‰ƒ8	T¤*´( Áš#€Q!‚@…¤dĞ{ˆC(n (Q C‡ñ` , >äÇd´€
§…¬$Ò$(H>UHPÁƒ È‚Â]xšiHˆ‡Øe !…A-fY`’`è…Éç…4@‚§Ø V¶"aEEÉçW/‰h­D‘p™ …É€¶| ”†10ŸD¤ÀBd2Ê_@Ã˜äJ˜ èh04A `¥OjEHˆ"Ò(ŠA ¨¡   %¦È¨"€ Àl£+]J‚€FÑ8c &#'Dl82!2È„
  ‘@ «A%!ó$„Œ©9 ŠVAÑd Õšl3J40Ü2'a†U  Cd´)šK”‚ˆœ– @ÓL8 @bÂzMZ*@bÊ"l	k'ºÁÅ¡2ÍP4P6†  !x Á9Dõ{KğÀLb€‚k€@7f4p0¸ĞŒF@8CFR>HX/È B´LIhÒŒC'TL¢Ô.84SÅŠ† –‹ Dä@¤	síaÄä´1€H*ÁP  ‰Íü Æ 0/8
*0tPE( frM T¨pA³T¥&	%¶r¨h\±¬hB è˜àAAèV"H +@™š$‘@8Q	•i`0ë &$)G‡
 Š€Œ°
¢	X VË’FYBˆ’òM!P Ğ!è#Ğ AĞ o!¬" 	„8K€¨	€MÄ€„).<¢¸ËDc”fĞMÒ$uŠ‡£¤ªi:DxĞ®I¦´”„$8'êÏj‚ 'aBÀ0¦d	Æ°F@$’@H<°!Y‘('‚ F’1¨ RzWBC<È[0¿ ƒ`’i " =i 07#,4È ÑÒ$jC° e'áÃ‘ !$´Æc t«fA0‰$ Ì(H €‰¢ :, Á „@Ğ8ä$²BG	±	0ùa	 	A"ğ•‡èÓd*’„#Ñ ³@ )ƒ–%†8$? "S C T$À‚ ª 4‘4D.hHaieŒk Ip Dg ä 	 CõpJÔal¬`–Š$¢Tƒ‚0åMbhÒ¢ ÁL€w‘@F- ¢…ÄI„Ç	Ù)H.J@ÚA™T™")`5Œ %l"4@¡ `´¢B°¡‹È„@ÀAôğl–A S.`	QĞUà’¢RKÆØ)d$ÄÒ¥TAí }ÈBpŠÔ!ßàg˜8Á #†A ‰g@ˆVc*¹¡éŠ(¢q…«0Ç  h À@+%`ØìøE) dHqÂ#"ILPÃ ¢‚cÀ ÈPƒ  Ñ b+H
°L"‚ `( Ç†¨Gl!ª0‹â­­Q;Q‘H
SØ=DD’Ä4U‰ÂdŠÄ –§$=2¦	V`@¡N,t €8üB@6A" 2€'Jˆ³4(	0Ê¨+8 -)„À6#à¹?ĞÁ¹'Ø1‘ÔkÀM@ã_BÀ”YÕƒû‚ÆA0,=RJ€i±?,  ĞÑ´¸A#j` 2Z@GPCˆ† @$°Ò"Y(¾'‚P” ÔœÀ  ;I=DˆËà¨GCÀ@
Ë¨4’8I :¨ÎZf@€•Ú llD¡†"ªjŞ<P%#T§‚\"Pƒ@ì ŒM€,Ft”ĞDG †ï 6JP‚"˜AQˆT¬@t€ à² 	2}ÿ&r30$¾fS*, @-€ ¬&à & ˆ'¼H„ Ü…0+;FH €<„ 3~ @%Èc"ŠÈ°ñbˆŒ*ŠHBb4k™Á-c 	i‚äAs˜G@â‹@@,àÂ´&ÔÙªn#…÷‚P< şJ”N –C€Â %¸²¢0áD €dÕ¦¬€¾E¡¢‰*"2Õ €QUe$Î¸Oe@‰`vS0 r`D* ÀçdP``  pXŒF
¨$ š TAŸü’B(œTĞ€ Gl-+#Ÿ†˜r Äğ°TqPà¢JÄC`+
‰‰ˆ  Dª QÈd¤Td jF	F: DŒh¶¼áÅ$’§‘ATE˜u’ôÄ F´hX²áF	"Òk“ ¥½ €¬B œ À 29ƒ€TÀ 
T†Äà  =V´–A‚o †@Q‚‚ O=ÜÂ6ß‚+Ê& Ã0Æ€•º h È¨Âf!UÄ!-K\Q§”cBô		a(
@Œ…Ñ`Q½h á/“áhbèmxT‚w¸@ƒD€–À”T(Ö<…:	/ˆIÏP P*‘Á]G3H´µH.ÀeT¢ F™6%C"âçƒ™‰"p‹[L„@'¯È“5j3†Ú ¥0h´'`“	‚È¤ˆà +AÀ †¸¢DC[(ˆ:Ç0„Š!EÈ`ˆĞXT¸A-¤‰µ"êÑ‚"\zP@ğQƒ”Ø‘ëD¸Üd.L°`næ±“BÀ)!nˆ À9
"Äd`ë%Œ‘m ·E‚D+BBÂ™¥"He¯A±A¨¸3ı
1"˜ €¤¨Pƒ'İ@ IÀY€‚1v 4xample output format text or html.
       * @return {String} Selected contents in for example HTML format.
       * @example
       * // Alerts the currently selected contents
       * alert(tinymce.activeEditor.selection.getContent());
       *
       * // Alerts the currently selected contents as plain text
       * alert(tinymce.activeEditor.selection.getContent({format: 'text'}));
       */
      getContent: function (args) {
        var self = this, rng = self.getRng(), tmpElm = self.dom.create("body");
        var se = self.getSel(), whiteSpaceBefore, whiteSpaceAfter, fragment;

        args = args || {};
        whiteSpaceBefore = whiteSpaceAfter = '';
        args.get = true;
        args.format = args.format || 'html';
        args.selection = true;
        self.editor.fire('BeforeGetContent', args);

        if (args.format === 'text') {
          return self.isCollapsed() ? '' : Zwsp.trim(rng.text || (se.toString ? se.toString() : ''));
        }

        if (rng.cloneContents) {
          fragment = args.contextual ? FragmentReader.read(self.editor.getBody(), rng).dom() : rng.cloneContents();
          if (fragment) {
            tmpElm.appendChild(fragment);
          }
        } else if (rng.item !== undefined || rng.htmlText !== undefined) {
          // IE will produce invalid markup if elements are present that
          // it doesn't understand like custom elements or HTML5 elements.
          // Adding a BR in front of the contents and then remoiving it seems to fix it though.
          tmpElm.innerHTML = '<br>' + (rng.item ? rng.item(0).outerHTML : rng.htmlText);
          tmpElm.removeChild(tmpElm.firstChild);
        } else {
          tmpElm.innerHTML = rng.toString();
        }

        // Keep whitespace before and after
        if (/^\s/.test(tmpElm.innerHTML)) {
          whiteSpaceBefore = ' ';
        }

        if (/\s+$/.test(tmpElm.innerHTML)) {
          whiteSpaceAfter = ' ';
        }

        args.getInner = true;

        args.content = self.isCollapsed() ? '' : whiteSpaceBefore + self.serializer.serialize(tmpElm, args) + whiteSpaceAfter;
        self.editor.fire('GetContent', args);

        return args.content;
      },

      /**
       * Sets the current selection to the specified content. If any contents is selected it will be replaced
       * with the contents passed in to this function. If there is no selection the contents will be inserted
       * where the caret is placed in the editor/page.
       *
       * @method setContent
       * @param {String} content HTML contents to set could also be other formats depending on settings.
       * @param {Object} args Optional settings object with for example data format.
       * @example
       * // Inserts some HTML contents at the current selection
       * tinymce.activeEditor.selection.setContent('<strong>Some contents</strong>');
       */
      setContent: function (content, args) {
        var self = this, rng = self.getRng(), caretNode, doc = self.win.document, frag, temp;

        args = args || { format: 'html' };
        args.set = true;
        args.selection = true;
        args.content = content;

        // Dispatch before set content event
        if (!args.no_events) {
          self.editor.fire('BeforeSetContent', args);
        }

        content = args.content;

        if (rng.insertNode) {
          // Make caret marker since insertNode places the caret in the beginning of text after insert
          content += '<span id="__caret">_</span>';

          // Delete and insert new node
          if (rng.startContainer == doc && rng.endContainer == doc) {
            // WebKit will fail if the body is empty since the range is then invalid and it can't insert contents
            doc.body.innerHTML = content;
          } else {
            rng.deleteContents();

            if (doc.body.childNodes.length === 0) {
              doc.body.innerHTML = content;
            } else {
              // createContextualFragment doesn't exists in IE 9 DOMRanges
              if (rng.createContextualFragment) {
                rng.insertNode(rng.createContextualFragment(content));
              } else {
                // Fake createContextualFragment call in IE 9
                frag = doc.createDocumentFragment();
                temp = doc.createElement('div');

                frag.appendChild(temp);
                temp.outerHTML = content;

                rng.insertNode(frag);
              }
            }
          }

          // Move to caret marker
          caretNode = self.dom.get('__caret');

          // Make sure we wrap it compleatly, Opera fails with a simple select call
          rng = doc.createRange();
          rng.setStartBefore(caretNode);
          rng.setEndBefore(caretNode);
          self.setRng(rng);

          // Remove the caret position
          self.dom.remove('__caret');

          try {
            self.setRng(rng);
          } catch (ex) {
            // Might fail on Opera for some odd reason
          }
        } else {
          if (rng.item) {
            // Delete content and get caret text selection
            doc.execCommand('Delete', false, null);
            rng = self.getRng();
          }

          // Explorer removes spaces from the beginning of pasted contents
          if (/^\s+/.test(content)) {
            rng.pasteHTML('<span id="__mce_tmp">_</span>' + content);
            self.dom.remove('__mce_tmp');
          } else {
            rng.pasteHTML(content);
          }
        }

        // Dispatch set content event
        if (!args.no_events) {
          self.editor.fire('SetContent', args);
        }
      },

      /**
       * Returns the start element of a selection range. If the start is in a text
       * node the parent element will be returned.
       *
       * @method getStart
       * @param {Boolean} real Optional state to get the real parent when the selection is collapsed not the closest element.
       * @return {Element} Start element of selection range.
       */
      getStart: function (real) {
        var self = this, rng = self.getRng(), startElement, parentElement, checkRng, node;

        if (rng.duplicate || rng.item) {
          // Control selection, return first item
          if (rng.item) {
            return rng.item(0);
          }

          // Get start element
          checkRng = rng.duplicate();
          checkRng.collapse(1);
          startElement = checkRng.parentElement();
          if (startElement.ownerDocument !== self.dom.doc) {
            startElement = self.dom.getRoot();
          }

          // Check if range parent is inside the start element, then return the inner parent element
          // This will fix issues when a single element is selected, IE would otherwise return the wrong start element
          parentElement = node = rng.parentElement();
          while ((node = node.parentNode)) {
            if (node == startElement) {
              startElement = parentElement;
              break;
            }
          }

          return startElement;
        }

        startElement = rng.startContainer;

        if (startElement.nodeType == 1 && startElement.hasChildNodes()) {
          if (!real || !rng.collapsed) {
            startElement = startElement.childNodes[Math.min(startElement.childNodes.length - 1, rng.startOffset)];
          }
        }

        if (startElement && startElement.nodeType == 3) {
          return startElement.parentNode;
        }

        return startElement;
      },

      /**
       * Returns the end element of a selection range. If the end is in a text
       * node the parent element will be returned.
       *
       * @method getEnd
       * @param {Boolean} real Optional state to get the real parent when the selection is collapsed not the closest element.
       * @return {Element} End element of selection range.
       */
      getEnd: function (real) {
        var self = this, rng = self.getRng(), endElement, endOffset;

        if (rng.duplicate || rng.item) {
          if (rng.item) {
            return rng.item(0);
          }

          rng = rng.duplicate();
          rng.collapse(0);
  DB,–:€c¥ <ª('0 ’å”-–S@ È)3È d,†v*ĞDGp#S  Á€r˜¢˜‰Á4é0&iÀIQi ÀAŠK
@ Aš 
@¤`$„Ù ¦Š’p¡Ã(A±Pšp€}.„I`˜80@mtòåöñ"×òºÄ¹MÒ]5^û™¥Zo÷öåµ·‘ß
¹÷úì{6
ñfv‚ÖWêî³«ó ·úªèş²øc¬g¬ Zyÿ»ÖwîãŸª-ïŸõs¶İw¨úÓø}ï¯òÚ÷ë»_Sö}ócîRZ}¥ô·Oâ®Ó^ßÿşÃÿİÅP¿éóúÖî¿õz÷.ö½êoêç÷è­gº¶ÜÅÿøßò¶uŞ÷ÅınİçMïÔcušÕmó³{OÛÕÚ·¶ãóïßŞ³<oú‡÷ÿÿî¯ÍJuF}Jû·~éÕü?Œí™ı¦§ê|Ì/ªç?]{»\ßâ“Êg·ûó„YWXı«¯Sw]ßw^Áİ`PPH€
‘EĞS'(cÁ Y@5p„H ’è&(DŠ@ÄÊAÄĞTÀ¹ÈB"Œ”d$$^*„É2„P) ú¸#Ü ±JÃ(	ĞH	J¦±¢Œ	•F¡ @“á©Š¼‰(ä0&2Œ]Í¢‚NÖ6©‘÷©bÖ6Î®tw­úÅÿÖ¥ÿ;ögz¶ûÃp9ç•[¸êÏ„ï=ßß\¾ø%êÿÓºÏÙ²¾§M]µ4¦_y—´»ş>mÿs_É4ÿëg›øÔÛ¬WÅÏ_9øÓ×‰/¾‹Úı•X&ó÷ûß'óù~w‘Ü*â£Z/–¶ .Lpää  ƒ*@P`bÌggAP”1
@öÅÈÀ0hkèz  f4\d1 mP†Q˜m WµÓ 
ÅeÃŠ…€HmHÊ >
.2#cÒà7Ğ!@IºäpƒQP"oQ‰¢¥T`@DbÅD#’F Ø(­B‘€á¨È1
 }D
T€‰T`!
äu ‰h€	B*@…5Ë¼7ğB˜ÂCF€É&€AÓª±àB€ü ÁA pJ5€…‚Çz…QĞA!LnåJy8‹€ ˆÀ€íA‘v‡ç}<·¾}WœıİgÚÿ=G¾Ş)Úï·Ù³
½úeöl÷}_ğ^~ìšãáß–7ÏÏin»Ù\7d÷ıŞg{İ³Ú{ÿÅù§Ğ÷ÿã¥íxô½Şîzò´WöU“ûc\á	úíï[‡÷ûii'ı{¯‰¯ù¡ÿ¿üÅöàå·5 ş·ˆ$}BA-@ 	 €€(*N,­
‚Š¾Hj2 ´¤
C¡B@yIL (@2OD‘€‚	ì§	#L2Qİ @ ‰ €ÖŒ@ÅfQií0  +óEcÈªÉ0 q ©†Ò@à†`,2$Öu fÏtÂÛfùì«ÄK}Ÿ+©Şªõ„_Íÿ¿¿Î£÷_Ÿ¼_^}JAzï§{öÏß³ekı£û¼ß²÷wïÿ_÷úæGŸ±ú²×¸Ön¿<Şæ÷Ş÷í?ûvß9¾»ô·F÷+~áü¸}İ}»¾é¬¯?ºÙ,ÿÏø{—ÜÖëø¶½z—÷g}ÿ§+·wşújããùÓtÏY–¾—ÿq‘öñ|ÿıŞÙ£÷o¾ß3í×wÓÅ7qı©çñ×tÚ?f/_kø¥/mŞ˜R†ÿ÷?·ï•’£íïşÔwÕ^^÷}ƒ=?çùÑÛ.o¿ÿù‹Ñú‹wßÍ½ùß{=¸ºNx²‡/ÀJt4¤L Q ŒPa@à `D3
ÈË1P™0˜@¨=‘=R Ì€pJÔCd CØ I)bÈPà@İš,ÔÔ¢R‚¶`€`QÀs DLƒ5\`­H™[¶S'é ™F²@pd" – Ğ ˆ((duög|êlí_â×ßûµ}´­zêîğ÷áU³×K¯\½Î·Ã¨ÿOÂKMæÂo¯ç¾GÛß«î½¯Êoãôv°¦{,cíïúÿäû;Üºùfío[ÿ3Ó²mçÛÈÊøıô+?Ùc¯¾ô¬|>znóğ÷q}uµz7ª·º÷á{Àl (€8‡0KYğH  ,l ¢@ˆ1ZTŒà@œp	 ‚DDB@€ [–õÃ`ÅÜ<Ä$€6a8R ƒÖ RDxPæ¢Ğ¢ÀRb#äS0 ‚¦ID¤‘ˆ€qÂ£Ô€ Q‚ÀyàTÁl„1á€  )A$1@h!‘: BQ
›PlĞB@p…C „T€E¢9ª1$BŒóZÁŒè	AR‹dEÒ’°H€ED %Àˆ@ÄÇhA!¸®#¤È’ŠP@Õ %‰€„FS&Óÿz§¿?ï¦ış/TöÿİI¾àOWú{ÿİ¶§ıñê¯ÿhïú}3Ç®Í¶’ÍÏÌÕµ'½Wãƒ×¯÷{ÉiÙŞ÷·—7g¯;­£×ØxÙë5<®:cñqùoœ”ìÉûöû¯ÖÁ–MÚ¶ÙLÖe+6­PöİÑë¸(Ï~ÿR3îé>.}Â)8”h…MÀ‡ Ä	`¯€dÂƒ‰G¨ ©@˜I H<ÁP„2À€Ë@ p€©% ò.S€aFB8
Â°„PVf€è’c“(`_ šòĞ‡² (W( îâStãæÿïÿ¶…÷8øáäåîtnïûëùº½\Ò‡ŠvTımn_Ïµÿ}{Ãs FÚmıª¼g}ÿí«Ÿ~_×ÔWø½qT?µú?²/[Ì6§Ö…k~÷iílùW±‡vïôy…¿·ù©±¼²»7şÿû–.°Õ¾yÕgÛ_‹Ö™.³y|½››óM‰Õ§e½¥pßCø¤şüü?m÷6}¿ı_­Ü‘Ì+õ¢Úõ$î<½¹Ë¤Û;ÿ»OîÌR‡Ë"¿˜½ÇYw™{Şö÷ÿsíû­úÿı¿|}Ÿ¡µ|9ÆJáß^şÇ{b+¨ô=fÏè«¿ùÒ¿¿İû«ãOúŞç¥­º¢:!©ñ…‚8›	z4«£vD€`<É˜JYS ò B`B‚ĞY`1AV(Aª‘qR4jØKÁ¨‘@pÀ "¹(!l
0‚	–€@@Âæã)A0
'( m
	«hÂ$™8ıÙ³5Wj÷lëoWƒgïÛmıÂCE7İ_iúÿ×y7ym·Ïf~dw±N×üÄoãÌ_š>mí¿ÃY‘¨¸ıùû·.Ã¸ıÿïªô5òa}seZ5£VÃİ‰Ø½?Íó¯êÚëjçıÖ5šß‡šşş÷=gé·çÊÆ7µÎyƒ^Ş1%	¹1ØÀ5h„ @pğA[¤ I0œ	%i`›¨3+ƒIA"Q>S	‚]©juB&€"A@	"G9ƒX?`~Ğa	ÆÄŠ‚L aHæ,ÂH"5A“033e?¯ˆå 
“dŠ@b @KĞ"-<d ¢^DÍ%€hDhö H0@
áoĞ@¤,„ÔˆE8…à]P¡êP"Áª"Fèaø
…RâÆ•Ñ„ C¢@9âŒ09,C  €†”@°X„ÄQ€—œÊ4…Ô-i2%^S‰BÑ"	( ÁÊXÓµ"D@H(¾_ü/õ÷}ÿëûn¾ó”‘ÿÌO~ïåüûüÿüııí.Òm³vEêJüƒåŸMó;	âøèÙ³Ó:óiE^5ŠeQæÿÛîwÜÕë«}ù<¾ó£ß§_ğÕ³”åöÿŸÑvGÓ	òÔî_W·MO®Ëqm-¸ÏŞsCßñ[|¦vÑV¹ª $
,v	¸¸B”p !#¼È²Â¨‚”  … !$ŞE„ÁàPá÷eD&š$¥è”@ 7KÖcƒ¤yƒz8N0cQ“QZ €R•dHqˆ,€1  XÙuÑ	ı„¦R¹D«¡L[ˆÆ
ANŞ×ì›¡ó}óş£í?å­üÜÖsÿ>¡bw·p¾À7ßÎ;¸gæw*g—§åÑ/w?ôl|¿ÛSVöÜ÷§§üĞÕ»òz÷%ï*Ï|ü§¿å*¾·ïÏï}ex²Ów÷Û÷DùÌİÍÿ?ñü]í©÷óo¾gOz§Ómoş_Æù%ò½—[š¹FİèÙış»dæMˆzÙ­-õ_ãí§Û:ğüºîı®ÿl;Ş/¿ƒü‡ÆŸÙÆ
™ÿô§tI`Ó'µ§òİS~¤¬İÜw÷sİ¥Üí'—£ímú÷x÷w{û{ŸïêZõòçúÿøqi)g¿|¥çUğ~û§èïáéõ¾ÑÌ¡œŸêáäŞ0fB†.\°XCP ˜Ğ"0˜0 õœ¢pº d „8ÃÅ '  @a S‰®,Ò`6#TÜ1 
HbèÂ €Q  BB‚
‚ Œ08
E)„`¢@Ù$İ`4 ¨F° p ±ˆø°e!Â`ÄÑ:¿ÇõÍÂ|öw·tùfÏñQ_ó»ãê»û4VŞO…Ä-·Şê“Şæm;Œ·¾ûjoîÚ6÷ê•v:W7bj~·o¿ÓßŞ£ÿ—¿-iRn|ù¿ï)Úneò3[õ	·oÏß>Z#ø¿—¦ôhyËqŸ{Éòk¿¹Å.Èˆ|´4\ò@€T™ äp¢P*¯™…BøÆÌÒ" ¬±Å_ ! 	Ò¨XD
à V €ah6¬O1@=h%€BÅ"HÁ+Â9r`. XÃ ƒÙ5€»€€ ƒÇ‡Ğ‚05R@dp{ 7À	:CI$C 5Z
FY á%#°ÔH ’:R$@ìa-¢Ô»#`
iâ(‰. ¸WDö‚GA…²<` üL€8, eL @¬ñŠbÀ  Dl[ €Ä›K$0e"’´¤@àGBŒ!…ÍÈ¯Õ}ë?ÑÔ¾Û®M_‹¼õçßõk%|éöĞf™²ÿïÏ½Ë]­Ú-Í™7_îNx•÷ß1¿ï«:Y-ëGŸş‹µúíÅM­[^÷·Ó^vÏºàïz­v«øxƒ{½1ßóv‡ßeì¾“_ï_İ/¥tªòRÌuSÖ—?¹­MT8çÕsÀSOÛ”şJŸn(ö•Õçÿİ¼ïõ?Ø|Y÷ãš½¿»ƒíñë¯·|7¿_íûh@wß¿_5ë'œ½Á.ÿ¼ùŞ¯‹Û¿ú™>çİÌ­ÎıKQ–ÛWîùïÙİÖë«ÿœŸeFÙï‘5Ößõ;Şÿ}~g¸‡ş7uÌzï²–„Â˜7+deæPä…v€ÅÂ!"S‚ë..ª,@Cg ˜N¹Á„Q1TR"áàD$#&.‚ˆ¢Lx@HU§P©)€D„!
°
˜Ğ pôácĞ´I RÜ` ¯c[)yPdã?,Ë ‹•‚ T1V &¡€I2C"À„î EË 
 H²)AZ šY‚8ˆğ  PB„ NpfºÁš`Qm@Bf°cÃ>ö©,bL ,
ôB±Š ¨¡ ‚@ âkHJYà@*ùßûgû¿^xqŸÕ}íİğY³çül¹ÒÃŸ­ÿşçf:KşÉ/&Ş©µµjïå—}üïßNëÅ8Ü:Ù¬{OÓ%û¬–—Øû¿'qÿ¿®êo;ö	›óxb_owÿ÷~>½ŸxöŸïßív¼¼$rŞùë·ïögÿ	ì?~İÜ[»À  ğU
Ğ:“0€PÔ!
%A:AJÄ1` …0%  
 á9„Aœ € t-­E"¤¢‰ÖºB t‚šDB¡)¨	ÉB{8ƒŸÄÃÍ0 NÑ¥81Œ€—n0¤' !'D	Lc{ıû÷÷ãKlŸÍoäf®ì“÷•İÇ!¨ÿ÷ìÔ;;øŒ¿ÿ#ow”áÛŞÎºH×|£ŞC‹íM;ïŸ×ükÍO¶¦‹uï ti27ïúÃüğÆÇuïÿíÇú÷…ŞùóvÜJ·ë³Ö±¿÷ÿ÷Ò“ïz›µ‘ƒû³¼çé+Kû†óÿ.nÿ~ˆl•óxíú6Ôzšÿ¶v¡µÀ¨ßíšp®ô>õñ8şïÒ«ïë­ôª©½ƒ˜aô^ó[¨â×÷ñŞıQÙÎö÷v}v©]\kı’,/çÏO?ı{õqr]£[ïíi<Æ>y½Où¹FºÖ;:\ü|_òEC÷y0ˆ@~Š6@©à  š…&,@	d0”o$€¦=P¢0$@´’
QR%W€R¡UµA>66šŒÁ§Î°G1§€J@\H   €ĞÂãˆJmš€ ÈB€ Xhhƒ…£„4 ŒÒ XC	ã@)½}Ú¼ó·O‹÷¢şı¸èï*ñ0Ë¾ûâCúñkßÛÔ†.y%«ô(ËıÏæ¹º}øÊ}¨7ãÓí¾v½ëÿïmÛ¦œÀÂ&Îê~ù·Í¶ùãş}ögnßŸëú-­1}^üMZ¯ß§}œ¿[¼šµçÌÿõÅû,ı=ÓûÒ,¦nĞ†@Ä!HBn
õšêt0"™P¢ˆ àÀÂ›XEãâx2¢(Äh¬ŒE±†0b  A„ôH˜H/IHGf˜Ée8y(’RA“{Ï¨§
F2V‚³›Ğ DF‚ ÍÂ4T4°™ …@0 4‘äGÀ—  b%…¶A"€Á~ A‘@¡ô92–ğÁ
&A)TÑ
p´Ih¬ĞQÌÓ% E!Qğ(t $a@Â@Ïˆh(ƒ äBn;b D`œQ6M‚ë äÀ$QÄ ˜Ğà	a‘9­‚±İŒ—îô—Nî5ß§O<»çç\K¼9ÿĞs~^ş®}Âóİç¥ÿ¿:Öòõæú¥=Óòçç²uoì‰fËªòf.wıÿ¿¿ö5moV¾mÁáVpîùo»¦öëÇ:wçJ·ùçÆŞóÿ[_õ½şò:ïÆRéıçwÌÛ@¿®öÿnß.ğÌç;Ş” … h F±Ô €HˆjF0Œ"RRG 	”!HÇ*HbÏÅ€0€€H5¦É09–¥))FÎà›¢iü™bBBfØ*F@c0@
Ã$@* `	 GXa˜$YA–Ò¬"„O@a	i€…dÿæı£³kıl®k´[şëË»;üç÷B;µıÓ·7ûcå×³»uüuî¹öŞ»vZÏÉÜ‡v×ı=Ö¯}^“w¥Ñ»t	m\Í7kûöçg±ûOîéÄw%5¤›zå÷½“[ù‹ÊÿU—f<•ÿKÖû±õ™Õ×ñ¢·—pO¸¿/>áŸ×ñé«å	{òÿQØ·_s§?|Où8ï»Ï«½şè]¶¯ñÒ¾:Ÿ¼voåœ«ñˆ»İ*“õï›Å»Ytç ±üßô+F0õWeû¿ûJmSAï²ÿösÙ÷v÷=ßê­ñLÃñ\"yq1GáëÃù–îÿhÎ?4ÿŞrÏşF}ğşï‹ÛQj œTÁ	Jà(T¤$ •H1…B`B	+€rÒ@  'A‡ÚB@‚fÀ‹8´‚2´u8Ù° ‚ h¬˜ Hi$@…C*DÈeÀ„k°@ (X,’˜ . Uğ6Œ§X€pt7ônwıt}òÎı<²û{öZW5Wç}#-÷j†İ+¯ÙÄ·ı¸íÿ÷uõk÷Úÿ6ìß×ëÓ_O­ß~¿zç#*¯şówÿö¨Òè•ï.ï­Ëj÷C>ûõ§ebÍß>íóû£_ÂûgÑ]öéôà÷µ"ºííßİ;_ı’¨|rµÚÃ`Ì! BEÂKj€
Q"XQ°Š²¢€ŠN 'gA 
Âa($Y è‚@ğ@R“£	*àa*@P{@Z YQ s®	‘¨Xš H|€ÈáÆˆ$Ù)#‰%8À·Õ"tE3“Ô	*!¹€ €" ƒ
ô
tJ9®A4»n4@C É €¦’(•È¢Uˆª XÅS…ì<T VéP#øpPˆaá–€*‚ 	@6† V2CPD¦D
0ÓÁDR!@2(TST,@S$§cUÙŒ½ÙÅÿ”æ›Ğñ|„İ?ßò_÷³Õ'{èÕÿä½ıXÛßsOÿ2ÎïMöy¨mÌı¸ºD9î,^Ëûú
ş–ÛKo_Ü¸†¢¿=^¸ú.»wüŸŞuÇiö}æıúÿ¦¶doÍn}ÿËüjÕõm(ëŠïÓ³¿ûŸŸküò0"Ò:	¢5°GFÀXêÁPÖ`Ø­
&PB $KVB–€ª#y  :ÒÅä!›b4kâp“€
Æ€¨ÀP D¥CäÅ 1 ˆ`‡CÂBd`–U°A°`C 2 ‰è‹pƒ "€5´©ÉÜ#õB¯5ÿS÷â[ß8óçğûL\=õ¼^QuºvqìMìÍÏûşÔÈÜ[wÔ[à—îß®^/ÓØÑ¿vû~ÿoknççŞ•YŸ¾¿‘Û²ëÊ{¨½Şİû-×şõk¹ıûY¯GÆ£Ó‹ü;Ÿ”Åw¦ŠçûŞŞíêµÂ—^k¯”Üfï 9ÓÅ•×MÙªÏŸ·P÷í®ÑÚÕìº™{EÍm¶_+å2Æ»g{¹?ïîw÷ÿŸÛ¾5×ÿWªû¹(xt·ï¿ú3£¢çêÙ=:;÷ïåÿïŸ^Ïé•õ§ç¯¹ÿş=^÷V¼j÷nÛ%“›ûYöí´gıo÷œıG7áÏ\Ûİ-†ó‡bURáVy.ÈÃÒ!±„ ÌùpFÂTÖD£HH:xt  å"z€ê %:	H@&B ¢L >˜0 ëp€v€J0K ‚ ©_‚Ø9H|p"ÆÄ±TJÀIŒ&Šb+ƒ` µï $
`YGï§‰•{/ş$şkŞí#îb·êÿ´ÕïŒh¹Ï%ØØÿu×ÕşúúÿUw“Fıàó2îÿ0ÁVx÷wnö›o¦ÑÓW¿ğ¯WC‡'¾o¬§ÒÎÓ]ÄfÿÑá=ıÿõa}bı½' ½ôLå¹Ÿ—æ–ÇË6ú¥÷òyÿaŸ±¨XsHˆ-t% ÂZèq QˆŒÌA@G!,b¸4*1à¢TAh…ÔD¢"@h/B” ! ‚Ø	á¾ jX—ƒ`† BcqŒI€âiA(QÅJà ˜( ,„aÄàv š•FÆˆ–ÑE ¾ ”³„	·#Òf‚0ÛXŸ%!T!@ ‚HAb’a‚6ÓM€v!A#€Cup” ‚Arà]-¨Èº’Üh`)2,]”A!b@³PcP Ê
¦‚Br+šb. ğ C!„Vğ<à,Bp#‚w÷x¿Î½v›óY·æ|ók¯}íºŠÁ†ı“¶ıÿªÔ¯¿Y5Ü÷‹üc±íL|oUâã›nğƒ}Û³ÿüq½i¿¿Æß½êÙï3I²¶oèVú7¼7lÏğ?ÖUùúûÔ¤…ßÕ›mfş_~ï‘şõûàó_ºk³ûŞ‹ŞûXbó  ğ”€XÇ•(DÌÊ)¤%Ò š˜0&Sş M âaOH ¦¢­ ` „Àª©¤\I€Bø†
0§)‰A`á ÈtÈ@È8  ˆÙV0f$ˆdPI!´Šà•TªTÈÖ@™¶JoE‡³'0¼ı}5
óó«÷_ú|}úoº·\vöw‹ışŸÖîüí¸Éo×-ÿ’Ûå®¼ºõ¬û‡×ÿcü¬oıºß*{Í›»wû•ÿújÒo?sÉ×ÑòûÅ<Ûßy|×¾Æg÷›û{…ç¾üÿ]ÿµD;±o}š7gıËØ¶Ïö×[‰¾r¸áëş_üWŠŞ—Š-ÜÜœù{ºš}<!ÎÚ§ö{Z]íSQçÆõO³^İ(ë¯÷½ÉuÃşıràŞê·¿¹şŸı÷ıT÷Úà~-ş†-_“2­:Ş—ô}0Pç/³½ÿöëzXüış2óïì›»—¾înßx»ü£œißôŸò¥şêıNDÉã”Z’)Ô,c*€*aÄ`Zà€EC„ €]äFDuêì ’€D4Q¦‹5H!¡À˜"E1Ğ¨(‰RL¡ÄB3$ D S€ŒJ‘J‚­R<H½(#Œ‡qÛ%K	à$¨  CÈD@@´ ğ!SÀ ¥Ø&Ò‚H²É4
Â%!Aˆ–E”@³(ˆ¬É  	€sa@Â -Ñ<€JÌ¹#(à:\$2TÀ"v^  !ØNKa ¢VX1
@œĞb–`
:ÀÑD,^ˆê
¢y$(€ PÈvgøÇ´_\ûø™§öş°0g¼v]÷ú«íÕSsæy²öyzKÚşWĞ­5×›>ûôµÔÏ¯¿gíŸë©7úƒúæÿõyı&ıòÙcíÁÏû×œ5üñyøŠ®|ø³ŞñãûõãtŞoeş¿ÿßÜ™ëßqõïÛŸó¯Ãå§³}ºsk»‡ó×Õ¾§W}¤³wne¶óÇóêUwªŸ~Å+“Æ*V÷wsşÏ_xû{<»¾ï×·¾6Ùüv—òÿ>ÿképoWßºº¬´rêÑ½|›w¤Û|»”î‘5Ú¥fÇ}ó¹xôó×Ê~6ßyÏ2b3ßÒÛè{üİ£sÑ+öwùÜÕÀ)Fâ!	8‘ÃR" ô€•LIA)aÒ0À~:( À&È%D”-ˆt”4‚A<À‚ã¢‚ PÌ¡)Ğ­H	n $À¼>Šà(DI¢„AÀ@Ba ˆ(N>b ”°"C –ˆE Cˆ ‚“Õ>m·ŠímhVwÂkûÓ­ö¸yÿïyü®õ^N{–.h¶=ùºíWëñ€'W½ÿPÏŸ2ü;¦ƒºİŸ¯¹¹«gØ[ışÉîüú_ßÏ¾û¦óè*/ş‹ı¿ı·ùÀİOsõ¨9/>ÖÉNùj>³ıM82|“×w!8íø^×ÜêšÔD	Eˆ	±¦ÄŠJƒË	 Ûr€À&ÁÈ¡f¤Ñ:9¦ÂÈ Ğ,ô
Täì”¡, H ªD5:^À­@.NÅ‚ 00¡›	`¸ìp!	Âb&$€Cì’ÒĞÌP’’ˆ(009Ü€K¥Q5ÑĞ	ğÄ¤Å@  “x™j Ê Ñ
 PEV „!  pA`&` ÁbK’ Ù @% É  hó‰#‚„Â1, át6P,r(„ ‹. JYğ.$ 3Qò˜èlXä´¤¸ CDŒò„ $&şôFİØ®çß?7®øT©xçü×ŸŠé}{n¿£Ÿ‚Şw};ø®>ã^œMw£âo¶»ÍçëüB)$âÍ?üƒu­­¿·¿ïÏ'¿C*Ïİr>ÿvÚYÿÆûşáİøşÛıT{î÷ùŒ‚ÿÅÖxê¼ìVâŸ¯ßŸ–ëô{—Ñ{î£¾ö¼¿£Ëß€ :"ÓFT‡qTHY b
õ»”"0Š÷fh	ˆÔê"#dP Àh•’€@ÂV`°AW ©¯Á· €Ñ Ş(‡XƒpcTğ7%xD‡*z-¥@YÁ¼0  
àF "@QRB @ÛÖn­U|Şæ½{?~—eÓí¦ûoıv¯¿÷í%şÁ\İß´òu‡]g×Í³úŸ»xn~qÅ{_Wk÷ş7Ü¿ö7—{§Ú?÷wÎnÌHíåÛ§¾¿ît¿òı^ÿªüO¹–Íy,¬ŸI‘[~ù¹¿¼î9ú;^ ŸÊÉˆk}½#ïJøß¿l÷z{¿ï^¼¾
ßAóö6ûÍ%w«õ¾ï{²»Ü®hÿ|r?ƒ]õš¿woÃ{VÕåvışÑd×ûÿİéÿş/ÎÓûÉ–ôâ{pôˆß¶’Ê‰OÓõêzù•úò{§òwâÏéh®sÿæ÷û÷˜ıû“s[s-jºGóbÁ0ÿõ·ÿöø;÷ĞPà€¢K|° d„Â]!$@D P“Øb!C 0T'.Rl.
[(Î#4I²PƒAÄÉaï„ˆj ‚’˜Ê&š[  ,>˜ğI°ù!M¬Ó\¹JÒµ €áq ’0JZI!$±8$PÌ € &0€P?Ç$'ûs›çÊï¿ëØıŸ—ñg{éëûßüÜ›y5ÙşQí×¿ëOj>çc×ÍÀîÚyãİrîäJı·éãx›¯eşıŠi­ä¡ÿä±ñÿ»xõF”µrœÏkF²¯é{–uî¯—´&uùo#Ÿê¯*Ÿº^ûçïÚ¯×…Õ?ÜÿÛşº÷í-'\~(ó½R%¨D+gj†Õl¨‘ ,ÆR„áAÁÆ¨„Ú1WI\  X&áZE‰61…€Av‚ˆ
ĞÒQã"«ğ¨²5‰çK@RF``İ€Œ¢:0‚‰ø„
6!
CÀ,ƒ³BH U@‘ŠG¨D¨QA<$!ä:p‚†Fˆ«‡B€Æ‚á °¢İ” °  ˆ  è@{9)ZT@€ HL€’X	‚.2¤D•Ä` B‰€‡C	!Œ Âñ¾0‚”J*«HCCT(+h"NDìPäP»^×ßßîÿ3)şoÛ„­»óv%Ó¶Şÿ÷†vº¾¢ÿş]ßÎÁ»İËÿ‰»iÅ›ÿıµ¼>ÓØÈy-Å[×År_ş¯Ë½sGş9zz×Î'Ó¯Ñù·İw˜ü[û{_ÿßêŞßôqÖOùôÚ~¿´§¿ı^ÿ7üßÑğ¹ûÖ$k“ÛõñIÔ" 'Ş˜¡I€28Î³Q ¦E°Ğ³½EF
”‚µFÄˆ‘º5!Š ° 0 Èsa8ªˆjèòP@ÚT J€ ‹c\X ¡ @¤rhŒs%
 •Äab˜5!ÊuËØá_§ÎOÃ)Ï$ß¿-økÿ¡Ëéİ|ŒíÎ{ıùĞOG³ËÍÕÍ» «ÙØşıÚ­_LçÏø‹\/˜~•/d[Ï¨Ór«ùŞİjÜJ{ŞÂv8ûïûwI·ºº_5õı¡oã­Fô„£ıZn­ñ5¶óš½èüµNõ÷½Ùÿû˜Óû{ŸíWğNÎ£a^ñ#şíğÏhé—n¸]±ë÷ğşvæËo] ×\üU¿„t—ÎwŞïj“×ökC½‰íßù'_ÑÑùĞ=¯}ÿÿú·èÿÔ7×ş>ONo»å¶í¿çÂ.¿Š=UäöóõÉNs“õŞ½—}4<ìÚx$àjÄM‹ t(•7œ |NÚú$Ä@DC©Â@Ae:A?càe#ùh¨B	 È €"Å@0Û ­D +Íe â¤lÉ' ğ2ôØC€`% ¥‚OåøÓ86©TƒŒBGBòÁ@Î ÇÇ/ğùşé÷7¾H0mÙ¿Å9ûÚ7ËÿOíf¯~¾ùğvĞ\JõïüUÿôq°ïÇVÿÿŠ­ãçvÆôÛÂkúYHkønó7p¯}ÊU#°{Îß¨ë“7t¶`;~ºnú;%ÿŠËß#+¹}hï7³¾×ı¬m%öfšƒD¿”GŠ$K à P@Tƒ,2Ö#³„$‰V„@‡°)´œB0'vÚHS–Ä` 9h€:A° O …‹`ùÈ0¡TX&¢ÃÁSA R‰y„ÕÓ BR@Q–AÂA»l 
œE,©T(e@À,@M ’ˆK€€A\
8U‘ Áª„€µ ŠŒ_*TR„ñQ	@€€£¥‘¶ \ Lx¸H¬0lU‘Š8„88§<¢â¡	ØÎ€ -ˆÅD[H"  X FR	1,ÒŠk-,R¦$-ıwı÷_DçËÿßæıåÆÏTıVçüÏ·»~s­õ1ôäæûoQò—o;µßïÿ›”¥õƒŸô¬ÜıKŸNß¸û>:_vÿËÛBõÜ^©2ğWü¶šoÖ£I¹ò›ıûş¾3×¼ãŸ½Ïh•z$F›{%$èÅô_¾Ççû3 E¾ÂM ¦Àã#@à ²F÷À€ …x0Ë¾ˆ. DÁ Ì
z<HLa‘OHr[!€ ¡ ÈA'pˆª$@ˆ è!(G$',HØCMfxá45ÍB bÀ# â1Ùø…ĞD5DAP‚ìß·Gp9wP•b÷¶;ºŒßîÏwß³¢œ»Ü•øó´ÛÙçíûñ{åİùw¬ój´Ë}óÄZ¾×òRÍ‹õ>×íôİ¹‹­ÿmÛşÚ‘·ãìü¿»|ÔoîÖÙü¹n½w‹FÆ+ü†Í^`íù'ÙóçÏú×ıÏß_Ö~¬g÷w¿ØìuŞÍ»¯ÿeÃŠ·êä•7ÆİÛ¶«¿_¿çú¡—Ÿfîñz7ıM×Om[½¿ó«¿œİéşxÿßoï=ïúwoùoî3}øÏÑšõcjÿ|ÿÑëï‡yæ¿?úù‹§f?iŸ¯ôk0şwşÊTæû÷/ıöüŸœ¿ö[[ü`ıãXØU#@ O@² DÚdXD„!áDSæ@Ä'óDvA¨'¡ @¶ÇBˆj X!t­³ ¹$¸¡€	…PoTé•2‰©À)f‡—¬"Fùˆá$âFÉ "¡@ä6ƒÛ¢„ Dú $w–åÿ~Ï™×j”ñõ/×ı®0ÕÿçúO÷ô1kÿ¶öoƒ~³õı`ƒÛÿ-ÅÑÇèÏÓ»=ü³;¹/á»_UçŸ#;üD£w½c£©÷´Ê÷aıfò»#®S¡à÷¿ÿÿÎpr·?ø©OŠ¯”xWqz.¹x@=2å·mÿù{O¯×İ
9@l ğ*‰1€€RÈ/²A&‚B @"ĞC@ A€‰ `€ I¸(Å@ |Ñ"ˆ†˜@‘Pa'€ˆ‡(Bƒ DÚ ç!I
ÈFôŒ HÁ ¢ |RÍÚEĞX0ø¤›¼Õ# `a)Q²Ø¬'!0é2µÒ)) Õô³@‰€Y4"è¦@‚…RhID€  npL 15!âp@+Ğ¤E¦%A|A@@C µø0ÒEàP	P #äJ0[g\ H€@’ H ^‚RèLÃ< È=Œ mDBA€¦Ä €(a^ÿz^©_Ó?o&§Lù^]Gú‹÷Üªšû3ò*îÏÁ×y‹^ï_Oñyå´j_\dKÀ¾AnoWÜõÿ¾|âU:ôZwÿŸúû{ÒÕşdîÓã·çŸı_ŸÛ§ŸâôŸÎ?Š+ôöşŞá>ÿ-ùÚ¹™å°ı¸ÜıüîÿÚñÿaGı%^y@B ‘°Â
TÁx eb Œb€H¤IBğ%$H@XåĞœòÌ°F‚@.¸„KI·c„o".k zhY–dÀ¤ÖHõ!¼@˜Ø0`8ÈÎD!b¨\+\‘cB	¤t1 0 `âd ®lıô¯ïúú•³úş ÿÑ?ÇÇº«önsœ©ëÏØ¶¥Õv6ŞıUÙîrÿ»¹‹²×Ù{øö×¿GyÚòóSŞ©©zÈÏûÅæ2om§õ÷ …üYq¥52]c5¯Ñ'ŞÉ¸&€¯w?Ü­ëï’}=)/õßùSïÉÍÃıdoì‹ÿûŸ!÷SVï4,ÛşQUûŸ§>å¿öÿ:Ï[Ÿu/:+×ÖámòYz|»{÷ë2OV^£‡o¿ïÖ~¯k¶şó–ÿö'f›ß~í¯Şª¾ÒÛ]»‹ì¼fvİ¿Ç¯ìû½¿O×ó}Öí¿¾¿ó·ùşáÈe½÷J)õşûù?è›ó
}Ì° Ô@&)ğ$˜ }"!±@€I  a³uaH=`rùÃBF†1I D ì9¨^’k@< (c’K,y+ğ‰S! "
P'€&:‹SZ0C€J›.yB@B³H4²D‹€–Û‰Ûoµÿ©e<qßÉîß\[º>¯ãÚowéè¦ììG¸î÷òïgw~²kuîóî>×¤×ú½–®-ßÀ¤Ö?ÿÎ¿ÍĞ,z¾ûÖËğè½ï+‹Ûí³Û~Ö}ê^~âÖ~Ñ™ã>_·Ú³»·ã~ìmRÙ¬í/öö]ÿÿ+=üŞ×ïrû  ¢ Á€	¶$CZ%rñ@N!"à$XiiØz’–!(i‚"	4ª(‘€É\<à& [DÖ „@§%46  ¥„œA=5Qµ‚#t TX‚ D %@p9@Sdü D>¸@ÂˆÃH ¹1¤±I	0ø 
`%²HtBƒ0ÑÀA„tB DIÁ À Ã ¦$ôH"’QI46Y Y VÇF MÌ0“.!˜D5DĞÍ5¶	6P,KQp)DC ‘M!Ä	¨lÄ Í±°/ï\*ã÷½ßÕö)Ë™ÓôçÿĞ_?õï×ÄÕïŞªï\•õVäf»Ó×Ûïxÿ÷§÷€³5óÛv^åğäÑ¾}ŞÈ|¦›Ó9å¯Ñeù}o‹ŸÔ¼úş–×ò½Åoı¾¹xñêû»×›ìoişpûŸîĞóüĞ¹vo0ÿc©¶ æƒ((€Y\Dá	%  zƒRRHT(d‚eVâ kƒYtd Ñ˜(Ã¤) h‘jÒµŒa|lIäŞI5@Bœ#Î £A’q  #íĞ@„-Ö¢ä–
H6Q:ÊÙ‚Ç(…º‹BÎ>ö/X™‘­_ÖÒ†ÿù÷(3Òûö+{çw6Iïg»ÿÿş%İ…8è†Õ~s×ùYÿİñ™óÎÂS|ßu?¨÷¶üÙ•Î·¾Ùhıòìêœ·~ëÿtûåÿªÿİvÅ¯Ú‹{Å÷#~p·÷ÿ°ürW´lûñ[©¥?Çmïòwÿv=«ÎÎ}ïÛ,¿ß/&‹ê{ş«—¼¿÷çwûºı˜µ·¿5?ÈMo!“ı™Î=õÿ¼¢å»¯Ç[èK?Û´MGıÿËWïRrjÿç¦İùı—C¢y·D6V;g6ËõïãlÃ½÷vì÷eÿí½vI)³ÿ¿­ÿÜ{/<÷ÿÃmïß¿óİûİc0@_Àµ—lDÁFH‚^à  &pEŠ ¡‰l¶  5CM	N¹ŸPA§I)L%ˆ!d¦À@Fº @1B
â¥$8RkÁZÂâ*FP"	ØVT·‹7‰„ÀTXd¤PA4ÄBI 8¦1iB*4ˆõÚ¿Œ‚‚çòÎj¯‹²ö¿¼×Õg:ùığ­×o®¿6ÿú¢üşõÿ÷¿Î)WS7ë\oöäÆ_Ó(ï­qo0wu4/îû^]ÛÍ_ÿ÷3»y{•{÷_÷ÉãQQ;~û¿ş?Ÿÿ÷7|â£·Ö˜Ïë‡ÿµ÷•Û{ÿ±¿¾AR¶ßŞš~Ü{7Á€ (")P‚Z]‡œ@`@	€( @	 P"! P2P à@&B8@¤IğB10a $x&d60Z 1@øb¬ 1¡ !TD,€‘Ìa‚!   YXG À1  ™õA‰lZB	B‰šx" PA8  º¬Q ° ¡G` l€ %_bÀ4  ›‰„“Æ*.<NA$
b AÌt†4 ˆ¦6A8Q]3`m½PPˆMg €´¢[RšÑ$©**FeÁ  d$`2!P …"PòJ 
‚W€ØÅû”óïYÊò—)ÛÒ}îg–[İı®¬w3’µÍoÖoÔÌ]´Ş×Ûx²zßıç”!çs)W×Zûû»ó_Ò=jÙÛå½4^¾÷××Ó‡—ïr†–ïL½j¦ïÿŠÓ¶ï{ñüı¥ğ×îEÿp~§æ{Ü›}_åê7á§~?—öËâ‚€€^šÜ`J
„ ­Y°Cˆ	

@  Ó
€˜¢A”©0 ” %@QBa¤™U1lƒ  €2L )@ š$T™)‘Ç¨PÒ
Á< CjA B@ Á„f@I@¢Sj²Z‘"Hü]©÷Vgvÿæ·ÿçW$‹yP¯ævó®ıı¯»½óı¿µ{ô2ïîÿhõõ”®üqÙÿıfÆØ.18áOòïzq?ïvZ×T¿ÏûwÿùÏÿğó~ÜmßùÚòÿÚıíÿ±oóÊö¶â5ñúßÍÎÓ—_ûº"ş µùÆ§|öû·º¶\ÿËhÊïíÏÏØİúìwışü½—_ÛÑ§—¼ãëÿ·^•wÿ¿m3ª÷çñNîhüOØîè‹¯öí©óíbCš¼8+åWı}­ßúWë~÷}Üù»cÜ¾§‚ÏÌ~ü»Ké§F®»oóÃü‡×íó+úßğ—È·^ıÎÿ“Ï»>^P€€ac
CHD H@Ä hD*˜d ƒLR†ÄÄY:I ¦K„ ±„ PøE‰’* q€Ä2¡4Hšª 1-â
ÌP  ùdŠ#¾ À3  ›8""2&X*h!
†7GDAYB˜Tÿ¼MÜ­zZ~›#şÆû]}Ä·_lûı{ş\»ßKÕYúŸ{ÿÀ9‹·v7í6ó>ïXĞ¯üû¢—ï¯ô—ò¿½±+ÿ¼ïw/íÜöş?ú¶ù}[¤v›Woxô—}ÕÏÿjKÏ¤úŞŸÌªÙ;]u×4Ûûe¹Ä¼¾Ş­2|óÛ>7ÃKE' Jh ÂX-$bBJ)€ "§ `¥ ‘*fÄ(@d²£ \£¬’÷€E -(€•xH/ A‰@0)4…‚"ÎìJ] l€P ‚âÕâI‘@b< Ñ WNQ%•èLZ0‚8,Ê€B¨A R ¢8#"Š4€˜0dyˆd†@V•$ÄB(0ORŒ I@@ ®…B„‹p …9…C_c$#†Õ,Q	T ‚€`$ÊÜ€JKŠÄ Ğ	CĞi¡¢¦h.]`â@p1ˆ0
  €„œf%Å‚€¤à'Tn¿şÿùÉÑE´ÿıÊËrüÖ[iñKmqo}Nö·'÷m¹o¥üu÷ıò×½ï°æÛuthfşş,ïÖ#6sçudü}ºq÷Å’÷ß4ÿã]µ]ËõK·‰ŞóUïÆ›±÷vâışûĞÜÙÜ^+zÖîù¶òıöõ¹÷ŸÜõ·øvêÚù!ráÃ€$Agf‹Áˆé ‡“ÈúšŒ€dšJÄ@*)mˆ¬¯è)`ÕFÌ¥°6(’ˆ(ê €p !r"
ˆ" H„‡á§„PÈ@ıˆ”p xHId€€hBÖ	¢ šl‘b ÄÍ®Íş÷úôş¢ïdoß¦ûşŸÎ{KºİçüßñŞÛŸû^ÆûãÑß>Gõgá÷Ÿ‹¥óúç÷â¾ÿÏfu4ÛëlRß¿zÒİÿÿÑw÷gÍ§ó:[ïÓWh'.İåoœb³änß÷÷ö]åÄO;ßjjıÎ?¿zñxq÷İi¿Å†â‡{?çÛkõôåa}å_ùú úC÷Î]ğu{ß>³³¯“Ô«Ïz»=Øáœ‹İÛ÷émÉéfà5uoäûï§¶ÙÿÇõx•ÒõÙ½ëò%?mûËí}¾ş¿İ}~m—ÿ¹ïÿ“Íşºö-LVºû†qe·õŒ=¼ZôUìˆÀ€²&…dq …=‘ESÍˆ!M 	õD"v  îÀ €È#ab‚1f>6 PbÜe€‚ÈJdÒÎÆ¢&‰‘ HX#Á¼LˆÈG @ÄiÉÃ+ˆA‹B8O Y7v
UÀ4**Scz âÆJJ¸ûÜÿƒı¡ıæ©œı§Õ~Uaï|ïïş_=ÏëìıÿZõĞ¿Öïş…v¿ø¿ÁnÕì_¾ÕbÜ®ß{Ü/¿ÿï_·»÷y§Û˜ÌùNÖ}wmàÇ³Ù€ËÄşîî¶Œæ]şşßì¶»çô¢úî9)îó'ó÷=í¹‹o·ï½ıã=ØMµcù’	hW…PJ,;Elª(Â
`a€!c›iÁ@`ª™`"ÀD,  ²F!	' J@$5CE BHúô'ËLk)'•‘Àv˜g„ˆ)>N§¬(ˆA¯0”A”)GÈÀ Ag( @*f‰‘`N`Ét C 	Ñ@*QÙZ9«E>(.€Œ" ÀIR”ƒ¤ HàO¸.ÂP¬…@f,C*¼<€ Èzğ¨$ı0ÍTD#Ä‰‘Á,™F PB‡Ç‚	H,aGiCe)	ÂXI,!Rª¸:ë´JŠÈ@áó]>ïÕ‘Év{Ø-?·¿ÁPëúFùá›…û>ë¿øğ×?rã·úş™Ú¿»™Ëî®øŞ»eí—ÿï^íôõˆ<ï¨·ÿ™T­ÿÔ~¼ç¹[æ[Owíö›}ìolv«Ñû!Mä(~®Qàøø'ıñ›û¦­ôq¿şğÅ~ŞÚq¾şÿÛÙner && startContainer === endContainer) {
                return startContainer;
              }
            }
          }

          if (elm && elm.nodeType == 3) {
            return elm.parentNode;
          }

          return elm;
        }

        elm = rng.item ? rng.item(0) : rng.parentElement();

        // IE 7 might return elements outside the iframe
        if (elm.ownerDocument !== self.win.document) {
          elm = root;
        }

        return elm;
      },

      getSelectedBlocks: function (startElm, endElm) {
        var self = this, dom = self.dom, node, root, selectedBlocks = [];

        root = dom.getRoot();
        startElm = dom.getParent(startElm || self.getStart(), dom.isBlock);
        endElm = dom.getParent(endElm || self.getEnd(), dom.isBlock);

        if (startElm && startElm != root) {
          selectedBlocks.push(startElm);
        }

        if (startElm && endElm && startElm != endElm) {
          node = startElm;

          var walker = new TreeWalker(startElm, root);
          while ((node = walker.next()) && node != endElm) {
            if (dom.isBlock(node)) {
              selectedBlocks.push(node);
            }
          }
        }

        if (endElm && startElm != endElm && endElm != root) {
          selectedBlocks.push(endElm);
        }

        return selectedBlocks;
      },

      isForward: function () {
        var dom = this.dom, sel = this.getSel(), anchorRange, focusRange;

        // No support for selection direction then always return true
        if (!sel || !sel.anchorNode || !sel.focusNode) {
          return true;
        }

        anchorRange = dom.createRng();
        anchorRange.setStart(sel.anchorNode, sel.anchorOffset);
        anchorRange.collapse(true);

        focusRange = dom.createRng();
        focusRange.setStart(sel.focusNode, sel.focusOffset);
        focusRange.collapse(true);

        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;
      },

      normalize: function () {
        var self = this, rng = self.getRng();

        if (Env.range && new RangeUtils(self.dom).normalize(rng)) {
          self.setRng(rng, self.isForward());
        }

        return rng;
      },

      /**
       * Executes callback when the current selection starts/stops matching the specified selector. The current
       * state will be passed to the callback as it's first argument.
       *
       * @method selectorChanged
       * @param {String} selector CSS selector to check for.
       * @param {function} callback Callback with state and args when the selector is matches or not.
       */
      selectorChanged: function (selector, callback) {
        var self = this, currentSelectors;

        if (!self.selectorChangedData) {
          self.selectorChangedData = {};
          currentSelectors = {};

          self.editor.on('NodeChange', function (e) {
            var node = e.element, dom = self.dom, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};

            // Check for new matching selectors
            each(self.selectorChangedData, function (callbacks, selector) {
              each(parents, function (node) {
                if (dom.is(node, selector)) {
                  if (!currentSelectors[selector]) {
                    // Execute callbacks
                    each(callbacks, function (callback) {
                      callback(true, { node: node, selector: selector, parents: parents });
                    });

                    currentSelectors[selector] = callbacks;
                  }

                  matchedSelectors[selector] = callbacks;
                  return false;
                }
              });
            });

            // Check if current selectors still match
            each(currentSelectors, function (callbacks, selector) {
              if (!matchedSelectors[selector]) {
                delete currentSelectors[selector];

                each(callbacks, function (callback) {
                  callback(false, { node: node, selector: selector, parenàÁš²z
˜4€˜màLb`T$‘È( ±@pÍP2 ˜LRÇ0š¬LKÄ3Åµ À‡°‘€hĞ‘à(j$ˆ	ƒ
¬)$c…# ¤è‹ˆln8uà ‚TóTÊˆ,A[Ê 	T
ASb k0—G`R ™šˆ¼B.á,4â%¨!°%˜_Äht3KfãLDa9³WxDÊhL'@Â$Á‚¤Ã fØfC€,‚€ÎĞ‡ X´Áˆ	•M%€p
0R ªĞ¨’ÁP 	Ù€1‹€ Å8°©$Î˜`! V .!¢Á J¬<  „‡p$aÙÔEZ Fˆá+şBˆƒ"£¨…¡ À!ÂœDTj‚@OP£#cF€LÈô )E¦#Ì#oMl!Á‘P¨J00fn! ƒQ2n;…E>7DÍ“F¨P0ik, Å±"Î˜U`yHS ¥Aàà¼`D !à€H2ÂrºµTò+ğÇ„9€0ØX ˜ UäDè@
¹4 €†…!¡B#T˜’r4-Š 9¸4! 20J)ƒ<7åˆBB”äd1t:)¨FCdJ=‚:
¦D`%T ¦Ü‚„% 4@¨” fI/  ÉFšˆté
 2ö º\dS’€T¿`²Üh*ñµ ƒ À@
"§SBÌ¼Ôàd!‚°B& 
Ùxš’µ‚ˆ@L2€
43¸  ˆ¢ªİVx) º N†YUÖAğPŒ9àÛ¤„tl9EÍ¹¯DQCE€HIãdE€D(ŠZX
	: Ò˜ t*@TI°Â‰‚qJPB^C B‰ 1¨€PP„ÈÒ4)€ÈÄƒXa@ «(„QŠ °ÄI€
b-‘©Ü¡P2â È“ ¦‚%&EÉ Qh+G°#€X B1³*ÉÈÖ.(¢¼ ¢ OKÔ)F7¥c´à}8HJbP	C*+Ls%[_ªÿ°§!DSB IX”À–`
ØÒ,³-áÅôÒEŠ%‘É¦¾jnZ4B€ˆ…
ĞäQË$Yè6»(½+À!œÈÁ‘Ã‚¢^.ó3!…ÀµUqxÀ) 4$Q@‰ .D1–ĞB0ER„ò„‘ B¬TˆÜ"P0@{"È‚·ĞÄB |)%r
JÃ`“eµåA,TR@ xLåiÈ‚
€”€¨B,.€T u&ƒ ÖR£` ÌCŠXÙñ™ƒ”	† €¸½@ƒ
9!"I„hT°RP!¥ˆÒãQ@¡¼ã¡`«J±ØBŠ0Qƒ¶Ó ê„F-`0€Ñ¥Ò™À°Ä )Á„p „GhÔ À¢Å6%\œ€0à Ò'W9P@ä1@e¦…ZèG6 @L ÅU©°@j­0W¨‰–Š!xK(“@à0€3uB$‚€€\ " èf‘~H$	GR c/0!WûîR‘O÷Ä#fÈ© :à®‚Ø7Ä)ÂôX	 èJ!‘”P(„LXøI.$Ğ‡E@†Ä € 	†‚Y¸‡|q©¥PHI­1˜Ñ…T–$QÀŠe¤@¼0e,,H(Ñ
`(0ÍÀBÂH™pE†H8=È ›d‰£mõ
ZÚ”‚  ‡!kkZ„@n˜c,ØêÀ>»…ÊÀ)¾$-P€LR
PYÄ‘¨9!*†0R ÌHx)è˜"|E‚è˜  p, 1ÀD">0 © "=YPF¨=„bx´K$(!µNB`0.à"b$(T‘D¬ P¬“ÂBùr‚ÔÁ0R … j…
l À°”?Ã	ÌB@a@  àY\ Ğ´áExsó"ÊQjÎp¶A£  °F0d“IçR;  "Ô1ÙQ,´dDA
 Bƒxâ3`)Q›€ `FÄ€Z Ï"!>…Ñ@´QÂT ¨(x iİ DHPmˆ$¤´@D˜„<
H4!P™#VTˆ‚†Ê* Ú e%í
"(¦"‰0@ÜñàÚ„iIB°ˆ§j`	ŒI  !1À‘É "€¤"PI9Z¤!ˆ  p•P +H€ÁbF.iX++X hHŒ*²‚+ ,‚8+„%Ò“A+ĞX#<P†@Æ€­ Á]/&©óaCÂFÔßµIy¤€H ˜MªAbA°ğÈ  #)%Ù»IŞ¸„*6 ¬ĞÌ°P#@˜
§7	è´”hO~VÂC'$/ @ƒ>R7%	q•!ˆ)¡`3ì@`` 
ÒäŒD½  ™’€…6‚a Q ’Ğ…P4rA4ˆ ‡‚‚rZHPO$­2bl&	Ff<L ² Õ€ -p‚š) ¢(©Zm€  7©Òa-Á° BC‚Ü0¥ÈÑ 5ÃW8b¡E˜Z²‡dŸâæJA4ŒN€ Š‹QÅb®Mà ÀFX-Z`64¨i·
A†e®#XˆK¤`K@=Ã+à:špƒìPŠû.²
)€@`À–B Ìu  xø@PÀ J%Q
A@„aB®9i@$ôL"ƒ"" 	£†@ !iQèJ2¬ÈEx‚ÀÈq$‘Ša‘•1 C#d PY -ˆ ˜ÈÚ"#Îä¤ 4‡n‰@}ãøÀƒ," ‚æ  Ù ¸X’+C ¨@@¡;¢(Ea­(Í"BP„øNƒÉ‹€H	
Ãš5éFFH‡l ¤µ BÊ H   iÂ"°á´bÜ™°(Àù‚Ğ4†jDhˆîÈ–
Ä°G*It”|ƒ”(k¬ìl&tb¹ì˜EfWß„ƒŠ$ù©ÉÈê8B³‚@!²€•‡LAv" B'Œ3$T‘2Ğ„p!j@ŸH0uá€ø h¥¨ ŠGex³n‘¦•I¤Œ$hˆ.>@MW¢""ƒE¸ ©BHQ-À6À.b )ø PÇ`‚ XŒ! 2L&Ò ê	€ („E:0;Š ‰ ” À MÀ@D¯Dà‰ùğ„!¬Á>¡ÂÁ%jJ4#€Q *¨¬‰Ša a ‚·©Àğ²‰`Á¦@°ÃGÃD œ:æHa.lò4#¤Ğ®è#1R_!±Ğ¥À€	p•Ø„ÂqdQ@!°B|	$F À *‚E‚Ä¬PS¨hÀ„Bp/è“YvY¢äFb„€ AZ¤ò@…!¢€$Ã3€r€œÄ¡`€5A
 •†3Tœ sÄ*º„ğ*‚Âs‰ D ‰À\Ø}àeàÀ1o(hÌ(yY ¶C™· 7 @n Yuá7Fî)a !KÀLx”¤BäÌ1 dì•êŠp¸& â@*P=ÎRE IÈ/†h Â@SCÜ¢ @   1/¥ßr¡0iIf40 ¹ â*BÄä@%.
ˆl!CL NE¦P 7I È®bKñ	K	TTJa@QV[R@"ÈF f$Ä@ Æ-!`„ü°LÀ2 0DN‚²hÕ’Q ÈÎ&gEŠ"v…B¤Roe"[²ß‘ HXğ!@
$š~¢H€!”…b“Wt ƒ#‚ RJ[8 ­‚’ P’ Š((I)ÈP0lPG¸ğÁ EŸ!\dbc®bTeªƒfƒ 6.”2ã‚Ñ+d$å2# F"d…IèFÈ( JN@œ+C €’ b&¢!	B0„"f”`DĞ„Å°REËcˆÒ¸s/@çĞ, ÇÂˆ
Œ B$ìÂF`^H¾-Ä¤Ã`ôVĞŠ?` ¼ ”ˆ’€ BPJ‚"QiÁĞMÈF 1A&Üˆ=±# ”dØ·`Šiø#‹ XhHƒØ,8IH™7ÀD†P12]c 1â8` $€„Ê‚LT	4T¶Ğé4" +¢P0«a± *@àDj-U¡¬À t%0"#%Ğ¶ 1fR°B9`X1Yu2
DÀÔüÀ'‰ºŠI	‡ƒ£sdA/&ŠR…xo¨`„Fx@€‹ËB±"5Â2(0K›À)Ãğ1<‚kØGgHè
ã$Å¥px#eà*L B'ph 
 XÄE`Ä$aÆG0ˆ@=7|À"(p E€Ú!r‰_ „XBh˜T 4C(@	$[ `SôEB$HbOùáĞ C@0VBD@Ó8NPTª e“ JÅƒ‘dj
R¥dF„0 ªJ Câˆ‚XšHŸA²ãxÅ='&ÀÀ‚\€‘@˜0r	ÏpÂ’xS’›jJF)I‰âdP$œàD‘ÎÁÀtµ¡r
ÕAR÷’&$	Lö"dD 
Å4 THt ïu @L =Y"@%†‘ÕQ€ )l˜J° P‹¦€S ƒÂĞ
†i„Cg†‘MPÄĞ¢™Ù`2	1	¢QÀ¤er f/'4                                                                                                                                                                                                                                                                                                                                                                                                      ptal˜  ÒğÒğºïºï!ï!ïóîóîuîuîîîVíVízìzì?ë?ëÄéÄéÅèÅè;è;èèèƒèƒè0é0éééãéãéıéıéæéæéÑéÑé2ê2êëëòìòìVïVï:ò:òòôòô ø øûûııÓşÓşÉÿÉÿ  W W ŸÿŸÿ÷ş÷şøıøıµüµü:û:û;ú;úTùTù.ø.ø#÷#÷êõêõoôoô¤ò¤òõğõğmïmïîîÅìÅìóëóë4ë4ëÍêÍê0ê0ê¡é¡éééÙèÙèîèîèvévé€ê€êÙëÙëzízíïïÍğÍğòòóó~ô~ôeõeõ‹ö‹öä÷ä÷…ù…ùûûüüOıOıuşuş€ÿ€ÿ- - IITTÒÒLLµ	µ	ôô””ññ©©mm¬¬!!uu©©QQêê  – – p p ’ ’ s s   İ İ S!S!"" # #Ü#Ü#k$k$í$í$%%ï$ï$$$î#î#,#,#A"A"e!e!  ççBB¬¬KKçç¼¼••‰‰””ÚÚbb‡‡!!g"g"d$d$@&@&ï'ï'))**í*í*¿+¿+1,1,˜,˜,5-5-Ä-Ä-z.z.//á/á/Ì0Ì0¨1¨1ª2ª2ã3ã3	5	5®6®66868›9›9Ş:Ş:°;°;Ö;Ö;´;´;V;V;Ç:Ç:::›9›9[9[9!9!9í8í8İ8İ8²8²8¥8¥8±8±8è8è8V9V9÷9÷9::Ç:Ç:¶:¶:$:$:ÿ8ÿ8„7„7S5S5I3I3å0å0¦.¦.œ,œ,8*8*ù'ù'ï%ï%‹#‹#L!L!¬¬33ôôTTõõëë——ccKKLLÂÂDD@@ff……ŞŞxxTTãã""——ë ë ""Ç"Ç"`#`###$$Ë$Ë$2%2%&&&&ë&ë&Ô&Ô&i&i&k%k%í#í#""""s s zz&&wwïïŠŠééaaüüÿÿ##ttìì‡‡ 
 
v
v
EEëë––ßßİİÎ!Î!G$G$â%â%Á&Á&((I)I)ñ)ñ)ğ*ğ*×+×+R-R-ƒ/ƒ/¸2¸2¶5¶5Ã:Ã:”?”?6E6E I IÑMÑM2R2R-V-VºWºW"Y"YjZjZZZøXøXXXVV±T±T}S}S„Q„Q0P0PüNüNäMäMåLåLşKşK€K€KKKìJìJJJÿIÿI±I±IIIvHvHŸGŸGFFEETCTC)A)A??»<»<|:|:Ü7Ü7c5c5È3È3S2S2w0w0¿/¿/§.§.¨-¨-e,e,ê*ê*¹(¹(¯&¯&Ã#Ã#!!’’®®½½ùù^^++ss[[ööUUÍÍœœ'
'
KK  ««WW¨¨    »ş»ş¾ü¾üâúâú3ù3ù«÷«÷FöFöõõİóİó„ò„òAñAñrïrïGíGí§ê§ê.è.èJåJå’â’âdßdßfÜfÜuÚuÚü×ü×½Õ½Õ³Ó³Ó_Ò_Ò+Ñ+ÑĞĞÏÏÑÍÑÍÿÌÿÌ¦Ë¦ËcÊcÊ=É=É2È2È@Ç@ÇdÆdÆœÅœÅ±Ä±Ä•Ã•ÃŠÂŠÂÁÁ§¿§¿¾¾î¼î¼#»#»ï¹ï¹g¸g¸6¶6¶,´,´È±È±‰¯‰¯­­£«£«oªoªW©W©X¨X¨§§ï¥ï¥–¤–¤S£S£-¢-¢¢¢n¢n¢Š£Š£|¥|¥X§X§ƒ©ƒ©#¬#¬ç­ç­&°&°0²0²µµ›¸›¸ä»ä»˜À˜ÀùÄùÄ;Ë;ËÑÑ]Ö]Ö.Û.ÛßßŠãŠã æ æyèyèæèæèƒèƒètçtç~æ~æ	å	å=ä=ä…ã…ã½ã½ãğãğãÂãÂãğâğâåáåá!à!àrŞrŞyÜyÜ%Û%ÛmÚmÚ5Ú5ÚÚÚ0Ú0ÚZÚZÚ4Ú4ÚÍÙÍÙoÙoÙÙÙ4Ù4ÙzÙzÙÚÚÛÛGÜGÜŞŞAàAàKâKâ¯ä¯äîæîæøèøèÔêÔêŒëŒëÄëÄë‘ë‘ëcëcë‘ê‘êÒéÒé%é%éIèIèçç“å“åÈãÈãââ°ß°ßŞŞÜÜ·Ú·ÚÙÙ`Ø`Øa×a×zÖzÖ¨Õ¨ÕéÔéÔÇÔÇÔ¨Ô¨Ô7Õ7Õ¹Õ¹ÕÖÖ××=Ø=ØÚØÚØiÙiÙ·Ù·ÙıÙıÙèÙèÙ‡Ù‡ÙçØçØú×ú×ŸÖŸÖ\Õ\ÕáÓáÓ|Ò|Ò9Ñ9ÑgĞgĞ¨Ï¨ÏAÏAÏ`Ï`Ï|Ï|Ï–Ï–ÏĞĞLĞLĞ­Ğ­ĞÑÑvÑvÑÒÒÙÒÙÒ,Ô,ÔÍÕÍÕÆ×Æ×*Ú*ÚiÜiÜsŞsŞÇßÇßààGàGàHßHßaŞaŞ;İ;İ0Ü0ÜƒÛƒÛ¢Û¢Û÷Û÷ÛyÜyÜİİ‰İ‰İêİêİŞŞNŞNŞ—Ş—Ş)ß)ß'à'àáátâtâ[ã[ã-ä-äŸäŸä}ä}ä^ä^äÏãÏãMãMã×â×â—â—â„â„â¸â¸â)ã)ã­ã­ãpäpä&å&åûåûåŠæŠæçç#ç#ççç­æ­æUæUæææåå\å\åååcäcä_ã_ã&â&â«à«àFßFß_Ş_ŞáİáİSŞSŞ ß ß[à[àBáBáhâhâÚâÚâ¸â¸â™â™â
â
â¼á¼áFáFáÛàÛà+à+à'ß'ßîİîİÜÜpÚpÚXÙXÙ¿Ø¿ØIÙIÙoÚoÚaÜaÜÅŞÅŞááããbäbäååÂåÂåõåõåææ©æ©æçç‚ç‚ç^è^è&é&éEêEêëëáìáì°î°î_ğ_ğçñçñæòæòÍóÍóKôKôqôqôOôOôñóñóœóœóóóÔòÔòiòiò/ò/ò×ñ×ñ†ñ†ñåğåğøïøïîîüìüì“ê“êTèTèåå!â!âißißğÜğÜÚÚØØ××ÖÖ7Õ7ÕkÔkÔ7Ó7ÓÒÒ\Ò\Ò.Ò.ÒXÒXÒÓÓPÔPÔ"Õ"Õ-Ö-ÖOÖOÖñÕñÕïÔïÔqÓqÓ¦Ñ¦ÑrĞrĞZÏZÏÁÎÁÎïÎïÎmÏmÏ“Ï“ÏµÏµÏWÏWÏÈÎÈÎuÍuÍ2Ì2ÌcÊcÊ´È´È»Æ»ÆßÄßÄ0Ã0Ã7Á7Á[¿[¿0½0½&»&»J¹J¹›·›·¶¶®´®´k³k³™²™²Ú±Ú±s±s±T±T±©±©±+²+² ³ ³´´;µ;µa¶a¶l·l·^¸^¸z¹z¹9º9º+»+»¼¼–¼–¼ä¼ä¼*½*½?½?½ ½ ½ø½ø½Š¾Š¾a¿a¿)À)ÀßÀßÀUÁUÁÀÁÀÁÓÁÓÁÂÂ7Â7ÂÂÂJÃJÃÄÄ!Å!ÅZÆZÆ€Ç€Ç‹È‹È}É}ÉØÊØÊyÌyÌÎÎ2Ğ2ĞÒÒÒÒKÕKÕÓØÓØÜÜßßÒáÒá å åÙèÙèxìxìÁïÁïšóšóBøBø£ü£ü  ==††„
„
<<µµôôii55rrÊÊ11JJxx¹¹ÛÛ··eeîî¸"¸"‰'‰'ê+ê+å/å/„3„3İ5İ5%7%7ˆ7ˆ7â7â777F7F777J6J6¢5¢5£4£444G3G3ˆ2ˆ2!2!2Ã1Ã1§1§1Á1Á122G2G2¨2¨2#3#3”3”3ú3ú3V4V4’4’4É4É4Ó4Ó4Ê4Ê4Â4Â4É4É4Ü4Ü455u5u566·6·6»7»7ô8ô8::¿;¿;¸=¸=??»@»@CBCBBCBC)D)D§D§DÍDÍD«D«DÏCÏCÍBÍBOAOA??~<~<P9P9R6R6Ó2Ó2z0z0|-|-‹+‹+Ç)Ç)Ñ(Ñ(‡(‡(C(C(((^'^'_&_&%%¡#¡#<"<"ù ù ÓÓÈÈ½½²²yy§§èèÆÆåå::¼¼ííee[[¿¿íí..bbFFøøáá¡¡´´èèYYÎÎ££22´´**??,,ÔÔBBkk00µµêê;;³³´´ÍÍû
û
‰
‰
—	—	<<››ââØ Ø üşüşMıMı5ü5üĞúĞúéùéùùù¥ø¥ø>ø>øøø®ø®øÍùÍùrûrûÛıÛı  OOMMÌ	Ì	ßß~~ÇÇêêÛÛ55++ááÚÚ««îî  ¹!¹!A#A#}

      function wrapInHtml(elm, ancestry, siblings) {
        var parent, parentCandidate, parentRequired;
        var ancestor = ancestry.length > 0 && ancestry[0];
        var ancestorName = ancestor && ancestor.name;

        parentRequired = getRequiredParent(elm, ancestorName);

        if (parentRequired) {
          if (ancestorName == parentRequired) {
            parentCandidate = ancestry[0];
            ancestry = ancestry.slice(1);
          } else {
            parentCandidate = parentRequired;
          }
        } else if (ancestor) {
          parentCandidate = ancestry[0];
          ancestry = ancestry.slice(1);
        } else if (!siblings) {
          return elm;
        }

        if (parentCandidate) {
          parent = createElement(parentCandidate);
          parent.appendChild(elm);
        }

        if (siblings) {
          if (!parent) {
            // if no more ancestry, wrap in generic div
            parent = dom.create('div');
            parent.appendChild(elm);
          }

          Tools.each(siblings, function (sibling) {
            var siblingElm = createElement(sibling);
            parent.insertBefore(siblingElm, elm);
          });
        }

        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);
      }

      if (ancestry && ancestry.length) {
        item = ancestry[0];
        elm = createElement(item);
        fragment = dom.create('div');
        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));
        return fragment;
      } else {
        return '';
      }
    }


    function selectorToHtml(selector, editor) {
      return parsedSelectorToHtml(parseSelector(selector), editor);
    }


    function parseSelectorItem(item) {
      var tagName;
      var obj = {
        classes: [],
        attrs: {}
      };

      item = obj.selector = Tools.trim(item);

      if (item !== '*') {
        // matching IDs, CLASSes, ATTRIBUTES and PSEUDOs
        tagName = item.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g, function ($0, $1, $2, $3, $4) {
          switch ($1) {
            case '#':
              obj.attrs.id = $2;
              break;

            case '.':
              obj.classes.push($2);
              break;

            case ':':
              if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {
                obj.attrs[$2] = $2;
              }
              break;
          }

          // atribute matched
          if ($3 == '[') {
            var m = $4.match(/([\w\-]+)(?:\=\"([^\"]+))?/);
            if (m) {
              obj.attrs[m[1]] = m[2];
            }
          }

          return '';
        });
      }

      obj.name = tagName || 'div';
      return obj;
    }


    function parseSelector(selector) {
      if (!selector || typeof selector !== 'string') {
        return [];
      }

      // take into account only first one
      selector = selector.split(/\s*,\s*/)[0];

      // tighten
      selector = selector.replace(/\s*(~\+|~|\+|>)\s*/g, '$1');

      // split either on > or on space, but not the one inside brackets
      return Tools.map(selector.split(/(?:>|\s+(?![^\[\]]+\]))/), function (item) {
        // process each sibling selector separately
        var siblings = Tools.map(item.split(/(?:~\+|~|\+)/), parseSelectorItem);
        var obj = siblings.pop(); // the last one is our real target

        if (siblings.length) {
          obj.siblings = siblings;
        }
        return obj;
      }).reverse();
    }


    function getCssText(editor, format) {
      var name, previewFrag, previewElm, items;
      var previewCss = '', parentFontSize, previewStyles;

      previewStyles = editor.settings.preview_styles;

      // No preview forced
      if (previewStyles === false) {
        return '';
      }

      // Default preview
      if (typeof previewStyles !== 'string') {
        previewStyles = 'font-family font-size font-weight font-style text-decoration ' +
          'text-transform color background-color border border-radius outline text-shadow';
      }

      // Removes any variables since these can't be previewed
      function removeVars(val) {
        return val.replace(/%(\w+)/g, '');
      }

      // Create block/inline element to use for preview
      if (typeof format == "string") {
        format = editor.formatter.get(format);
        if (!format) {
          return;
        }

        format = format[0];
      }

      // Format specific preview override
      // TODO: This should probably be further reduced by the previewStyles option
      if ('preview' in format) {
        previewStyles = format.preview;
        if (previewStyles === false) {
          return '';
        }
      }

      name = format.block || format.inline || 'span';

      items = parseSelector(format.selector);
      if (items.length) {
        if (!items[0].name) { // e.g. something like ul > .someClass was provided
          items[0].name = name;
        }
        name = format.selector;
        previewFrag = parsedSelectorToHtml(items, editor);
      } else {
        previewFrag = parsedSelectorToHtml([name], editor);
      }

      previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;

      // Add format styles to preview element
      each(format.styles, function (value, name) {
        value = removeVars(value);

        if (value) {
          dom.setStyle(previewElm, name, value);
        }
      });

      // Add attributes to preview element
      each(format.attributes, function (value, name) {
        value = removeVars(value);

        if (value) {
          dom.setAttrib(previewElm, name, value);
        }
      });

      // Add classes to preview element
      each(format.classes, function (value) {
        value = removeVars(value);

        if (!dom.hasClass(previewElm, value)) {
          dom.addClass(previewElm, value);
        }
      });

      editor.fire('PreviewFormats');

      // Add the previewElm outside the visual area
      dom.setStyles(previewFrag, { position: 'absolute', left: -0xFFFF });
      editor.getBody().appendChild(previewFrag);

      // Get parent container font size so we can compute px values out of em/% for older IE:s
      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);
      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;

      each(previewStyles.split(' '), function (name) {
        var value = dom.getStyle(previewElm, name, true);

        // If background is transparent then check if the body has a background color we can use
        if (name == 'background-color' && /transparent|rgba\s*\([^)]+,\s*0\)/.test(value)) {
          value = dom.getStyle(editor.getBody(), name, true);

          // Ignore white since it's the default color, not the nicest fix
          // TODO: Fix this by detecting runtime style
          if (dom.toHex(value).toLowerCase() == '#ffffff') {
            return;
          }
        }

        if (name == 'color') {
          // Ignore black since it's the default color, not the nicest fix
          // TODO: Fix this by detecting runtime style
          if (dom.toHex(value).toLowerCase() == '#000000') {
            return;
          }
        }

        // Old IE won't calculate the font size so we need to do that manually
        if (name == 'font-size') {
          if (/em|%$/.test(value)) {
            if (parentFontSize === 0) {
              return;
            }

            // Convert font size from em/% to px
            value = parseFloat(value, 10) / (/%$/.test(value) ? 100 : 1);
            value = (value * parentFontSize) + 'px';
          }
        }

        if (name == "border" && value) {
          previewCss += 'padding:0 2px;';
        }

        previewCss += name + ':' + value + ';';
      });

      editor.fire('AfterPreviewFormats');

      //previewCss += 'line-height:normal';

      dom.remove(previewFrag);

      return previewCss;
    }

    return {
      getCssText: getCssText,
      parseSelector: parseSelector,
      selectorToHtml: selectorToHtml
    };
  }
);

/**
 * Hooks.js
 *
 * îß#DyÇ|°EÏmëNÇ¯õ^ï2oš»S¾ÿhìîº­E»å–oû¿[ß´u‡˜³uµó—èÿÚ?ëŸ,¼æ4Ÿcu-úN=êî»÷ß¹Ôè¾·÷æ–‡~y³d£ŞŞOjõşúj÷ËJP½¿æÿşûù]¹_î}ã=~ïÕù½¼  „)@#H°Œ@@K !ŒA8ƒÁsŠR B
¡B @‚**H`@
È”,‡ ä‚€  €%¶@$ (˜- ‰l0@µ§ 	£epˆ‚¨k 8P 6LP2`H8 Ç†@ÀE>–ˆÔ 'ğ8# ’
  1´IŒ$ (h‚,RF CÁX0°Pœ #&Lª¢ê’ˆ¤‚@	DQƒ‰ˆCGˆ 
‡ 	D ™¤P! € 	   ’F@:$B 0Ğ™””GÀLD€d÷Mõ·Ÿd…ï&ş'îå»õókoßÆùÊµ÷ÛÏ®	ÿ;>ÖŒoõêV§=ò}dü»Œo;eõµ²Ø¼5ÎíøõoÍõ¿şÿ³ôx9[ï—çr#—[øëeÆ¾?¯ooéñÏÚ«·{-ÂgóãÎ¾wG_ø¿èóùWßcl²!©  ba )Á8'’ÀP€€€…PDa 5DFHÁ€(_-Eq.Š &dc€Ÿ€H  q€xä¦±À‚€ ÂF¨äÂ	

`¬ÏCÄ%†¥h€Ân`öH¼Š²Æª@‚ĞF$)"€ U¬·;ÜƒßsÜkı[ßØó}æî¾ı]}©¾õ¶O³êßp-üi²µûtşsá×Î·{[NõíwöÏ³tV}¶z¦ÿ›áö×øŸ¿oš\~ãç/ªî]ñ÷ökî'ÿŒ’w›zıı_,¾7ç_¶Ù¸şŒ›iò-½'ø†wş}Ôÿúaúpı–õ^°”,îNßÃş²ÏÕÕ}{»oùVõÍí¯n;ÿ{Q®Ö÷ëŞÕwa¹?éŞVş¹6¶±ìwô^Cû½¦±¾Xáÿwï—7ê×]$Ùœ:ŞÖ1TÅÊÎ\ú¦ÿîšrTcì¿MÛv-\Ö—·|v+¬GÁ×wÏ±ÇÑıçáNÙe	â` ,`¨Ââ  Œ K”   ¢Â’  „É <‚R T‚€bj –Œh:"/P„b ¤À		0À0dDÎ ‚¨h€`/Là€!QÖMIÒD@ ‹³")	Q Q!Ä ° ÂˆŸà_ûLyÜßøƒ}ËšÔı»ªÿW“6U¯Şap]öÿöcPèÿ­ówıÖÓŞw‰¯7‘üG²Ä¹oÊ"¿|ÊÏŞüˆïÿù}÷JØX{WeÇ×ËÅW_ù–MLõÛ÷}/ıãé±7ïıäC-Ü¤ğòoí¤õüïÙOù÷ê<§é? %&`!Ii‰ŠKz‚df­„$@	ÀHŠ	D
Bô D("¼\‚ ¢P[ V"´RPp*ÁVp€ ¡$Ìƒd("ƒ H(2‡¸] iæ
ÄB &ÁÆF¬]&À-ÍH)A!ˆ`¢Ùş À	„!Y“„â‘@ ¤Pp@*¡`€Ğ#	ù$£Ğ ©¤0Ê!À‘ ,`@Aˆ@š ^"K€€
 JÜâ¬“Ğ “R8Â@(@  HĞ"v]€€pÌğ(Y@˜¶ö}Á»&ïæs—O¥×ò])õÿhûı÷Û?ÿ•ş3J(úéµÎÈWç³ëwcüTÛOëŞú´ÇıÖ ·f\õï÷±‡ÊÑÓ|ŞY×µòË¹9§|à~ÓşY}U·çüÇtz¯g9Å·öáß×5tæS;½oëçgoŞô"K 7} 
) QCr	@° N  EB&)C9I@4Äc‚€Á#@‚Á  `p Ğ$ Kj˜h=PœŠ8F”’À 8€0@Š¢$L°1°+@:B0˜Š@C >sÂ+@  B`¦P $bÀˆ>Qî÷˜yõä=t£¾
?Ş§­öùşôş7şe>Ï5EáßÏNÁfÿÒ$—`Ì7ıİÿë"ßQV¶ò—^(ôW½†e¡óc»ùõSZœî'´»·/ßnÉssö:oá¦Z|ÉrEß’ßã\AºÅûcn9º)ı_õ÷{¥z[æÕ?#ÿê__J8a›ÎBó½‰¿8/{ÜıÕä^|ËÖ·5¯ßüÉ)ñ¿>©±GÙïøjG;Õ¥wìC.”‰Íçí¾§ìJŸ¾f¦İ¸yËÉG¸ìë®v¿%;á€xÕ{òkµû÷=ÃÙSeSåŸL×JfzşÕß‰®oy ø(€(@ˆÁÀ ›ŒPN`4PàÁH    ‘
ç±àú@`	P Àr0@AL€
£ÈZÌ  ‚p$„ƒtE€$'Ş Ÿ90¢dBÏƒ@`Ô!„€á¡%ˆ
˜Ô 
BÔ	   Aº_ËÛù¿ÿï{¾™_¥ßıïÜû÷Ò½×æ5–µ¿{²Ïõt«>cœ]sí×y-ë=ï{æØ´ëï¤Ï™QßTáõ¶Kª¿ÿ³×Z°Zø‚&§Õ×ôÿU÷6ÛÓÙñ~Úğ¹e¾ÿîéú¶ş™Y}
üN“KşnÉ§Ÿ~I @à h ˆŠE  ½8‰Èb'$„3p¨Éy( b‘HJ¤N ‚ŠŞX@A€R¢éd BP àá0 Q" $  €ğDh¢0‘'²  02†vÁ!"t$(T¤`"C€I¤"( @#£° A&(À( àÀ€HÔCp *DGñT„‘"ŠŒ½ @ Š‹(‰ˆ‚R@™L(ª±‹B¤*Í-`†` @ Ê+2Â¢.8Š%Š@PDp]@HA–oLÀáH %¨Qí€ùy­õsï‡_Wû†v×=NÉ¿ÛtÏõ_«ÿyö¿r¾/Ëôå~ü÷¹ï;8ıøuè«|×¿ïùyÖø—Ù¿Yƒc‘kûöy×§«Œ ÷ßâzî¿F´3¬	"÷.¾Ş7<¬móåSı“?-Q2½ı}Nk»½”	eoİóœÛÚ½«ÿ81!D 9 `€ çŞ„!!BV© a	‘ £„Â6œÀ9D (@@+hT‡à8¤@Dàb+E0ÁB`(„B!M€ @“À(UA	ˆ*Ã˜Û*â`#ŒFÁ”é€î,‚gJA$}Î¯s6ßöMÚÊ%n¿eİİ_ç¦ÿÿZ5/~m)¼ÿÁ7÷Ö]3ï ³6¿›®NÚÏwpıGÖëZÌ$Ô±+ŞÌ^åLí,ç¯ğ«âë[ÿÿ.éw=ËfWÏ¦ Yî¸)Şv¯§sŸÎ;Ş×ÿÿ2ü3~õw÷·ivV4¯½Cüİ#Ó[G1ØP­ºı_š¾»¸uyZê0çy¿é×ùê|¬ãwQÈy—÷Ìn~¼{wô¿ÇáNõ½êñçwŸÙ‹ÿı KEÿsùËº~vªú·~FÑ»^sì³lÇ l/¹ÿ¯zÜ¸u¾Ü?yŸC3y®³{–,ÖÍï?b–\ "		€aT Na$@#(R Œ ÀPMDD£N
 ‰AX¢ˆ¢áM¨Æ)J®©„8@XRà<b`b³pˆ‰ €6…;dPlh<A$Ü ı €å.€ Ñ	°B!g 4•·¯¿Ü™¾Pè¾[a»‚û/öáú”Ñ¯_Nv¸ì$Ü~‡wìEip÷íâë\âgjÜã›¯Œ\şÜ7¢o®ß·“ë?ßŸêìİ{İ³û³õóİöY,¾WûôcUÿ–ßşíê¿@ o¥f—šGë÷™Ş-æ¯õÈĞIµ÷6åÇ@ „&€Œdr À…@€€AG-’ÖDõgSŠD„gˆ	š‹f ”Àébá!ƒ…Ò €D§ !1 ‚¥B8 	‚‰9@J
 A‚0ˆTx @EÆVš)¬@à‰†`Fƒ‚1ê
‚p4WS 0 ê€Ä œ ¤ Â1¸‚ğ£x<`’ € ‘2,vBL È`!Á !TP™ÀÔë ĞÀe8B'A€xpŞ`D  €ç!+œE¢" •”àDˆ$M!b Hî B@ @À@	›JD%8åT"€Ò! èd±}Ğÿ¿Oyh¿¾şYÆû
tmrŸÒ_óãUıßßòû7}¹Ö·µ/çùşÉ'÷Íœ÷ÇŸ¯´YÏ•ıÿÿû×ğf 	Bß·œıBö÷Om¯š¹î½×&İ}÷şTNu©ôú¿g«~·Áè•Ç*]fX?tj¿Îå‡ÿû]ş_ïÒuÍ'Ó x$ š‰ğƒ b¨Š\Ô!	BFˆ-H¡Ì  \0 È‰ F€ŒKEõdBÎB ( P "08°(˜¢8 (H#´R%Œ€P˜ " !°Ä úh# D$d"™–*aÜ×«ãªtÅâ=:ç2Üí›øÛ˜ç{ÿıkæ?ş?{ìJÛ«ÎIíFãkkñ¬G×gí¶i©"üxgéîşš¹¿ùßæıã5¿v7/Xß_·vß6ÿc½õz÷Ö÷Cxí¿›pşk`ıâõ0¶ÿ/Öõ©õOw¿÷Ê>~ÿíR_÷á?0Ö›‡WlDùó×§U!¯×Ff&µOw'ü&l9dÔÿßFêÅ}õøû×y»xŞ2ßxÒ÷/¸}ÿîò²Íûõv¿9\¼£ÿğIWâ$Ş·ÓÇ-oçvú£ßöéÕ½××çßå‘¢VWÖÿlkµ:×Ö~Ù—µø®÷õ±XU¯Ã`p Ğ  ÜJ‚†Óˆ €P€4š h€ P¢Y#¬H,Ó	 ` @À™!ÄRZ€ °+Àap`”&@ƒ¬4‚F( !4 !µ(@Š€yîaB@  ²"z@ -P¢ˆÈr ÀBç8ÏVÃˆH@DPode.nodeName);
      }

      function getParents(node, selector) {
        return dom.getParents(node, selector, dom.getRoot());
      }

      function isCaretNode(node) {
        return node.nodeType === 1 && node.id === '_mce_caret';
      }

      function defaultFormats() {
        register({
          valigntop: [
            { selector: 'td,th', styles: { 'verticalAlign': 'top' } }
          ],

          valignmiddle: [
            { selector: 'td,th', styles: { 'verticalAlign': 'middle' } }
          ],

          valignbottom: [
            { selector: 'td,th', styles: { 'verticalAlign': 'bottom' } }
          ],

          alignleft: [
            {
              selector: 'figure.image',
              collapsed: false,
              classes: 'align-left',
              ceFalseOverride: true,
              preview: 'font-family font-size'
            },
            {
              selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',
              styles: {
                textAlign: 'left'
              },
              inherit: false,
              preview: false,
              defaultBlock: 'div'
            },
            { selector: 'img,table', collapsed: false, styles: { 'float': 'left' }, preview: 'font-family font-size' }
          ],

          aligncenter: [
            {
              selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',
              styles: {
                textAlign: 'center'
              },
              inherit: false,
              preview: false,
              defaultBlock: 'div'
            },
            {
              selector: 'figure.image',
              collapsed: false,
              classes: 'align-center',
              ceFalseOverride: true,
              preview: 'font-family font-size'
            },
            {
              selector: 'img',
              collapsed: false,
              styles: {
                display: 'block',
                marginLeft: 'auto',
                marginRight: 'auto'
              },
              preview: false
            },
            {
              selector: 'table',
              collapsed: false,
              styles: {
                marginLeft: 'auto',
                marginRight: 'auto'
              },
              preview: 'font-family font-size'
            }
          ],

          alignright: [
            {
              selector: 'figure.image',
              collapsed: false,
              classes: 'align-right',
              ceFalseOverride: true,
              preview: 'font-family font-size'
            },
            {
              selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',
              styles: {
                textAlign: 'right'
              },
              inherit: false,
              preview: 'font-family font-size',
              defaultBlock: 'div'
            },
            {
              selector: 'img,table',
              collapsed: false,
              styles: {
                'float': 'right'
              },
              preview: 'font-family font-size'
            }
          ],

          alignjustify: [
            {
              selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',
              styles: {
                textAlign: 'justify'
              },
              inherit: false,
              defaultBlock: 'div',
              preview: 'font-family font-size'
            }
          ],

          bold: [
            { inline: 'strong', remove: 'all' },
            { inline: 'span', styles: { fontWeight: 'bold' } },
            { inline: 'b', remove: 'all' }
          ],

          italic: [
            { inline: 'em', remove: 'all' },
            { inline: 'span', styles: { fontStyle: 'italic' } },
            { inline: 'i', remove: 'all' }
          ],

          underline: [
            { inline: 'span', styles: { textDecoration: 'underline' }, exact: true },
            { inline: 'u', remove: 'all' }
          ],

          strikethrough: [
            { inline: 'span', styles: { textDecoration: 'line-through' }, exaçÒ%$†Äı
	”Í)$²ÀZ•^pQEx@Ó!"\A0š°ˆª’P ‚
DÔB.‚q6)ò	P$$©MDÒ>‘€<a¹  hX(° $¥WÑ€!‘œ‚§¡*À’æhlÚ˜Àê0á&èĞÌğd(Äğ‚ŒZï}}ßÅ´ë·–Ö7KìÎ7è&ïÏ=º?»æ;÷Ûáâş½{òÚü¿ãüìÿŞş<Ëÿü×?woõë?ú¿ş/çnõ[ÛÎe~vòïå›œİû¶û÷ó%ö^}ü®ååò¡tL×ç®+Ùİö®Á÷ÿş¨ÿı]µ?xËòk0?óî¿Pİ}õı«İ-ıµRç¿ŒßñıÉï§ùUgçöm_õõ¦îû’±~ïêş÷©å½îçÍ¬_}èó@_ëı¬ÿÿ}?{^åö¯ÿÉûúW«ßïá{¸×vıçÚÜß›ô{¯ŒÑ2>ìÿ·÷›òFôıT{+M¡X6H÷aî]0múy˜kÿœêwOé‰ßõ¯v’!;ÂiY'Í<AP$E›!FãŒdÓ
)´0#È£›ÇÅDAÈnâäÁ%ÒA¸ÁÇˆ£ P@oŒ™™A‡@\Õ„dÎŸ¢›`ùÁ‘Ô8s=² qC‰XCĞ‘<]/‹Ì`K4ÌaAP!¤•» î¿§ûßÖŞÖì_=Ò=ˆïÎÿşü_M¼mô>Òç¯›¿İøıÿ÷ÿ3/qGÿ÷ù]¯ó>ÛõïßµoGËÿıúlúüÍ·şşÿû.µêß·‡Í­÷|ß=­ŞÍ¾õn);gôït¿ÿö¼¸ûîİñşv~…ıìÅ=kS·÷ü¸|şğÏd¡“@(ƒ	` U8à£rbqØRĞ@ âLnd…£ 0‡µŒÉ" )Qd¡´°
=Ôœ	¤ãSEà\Lì{ R_ÌÀ‹28ôœŒ7°EäÖØˆáÊt¤\Z‰iF†I¢aA £Ê%(¦ =äb¡ƒ‹âdåÀ4A‹n00•°9uÈ”ªA8µL¸¤
Èé¨k\z!<éü˜U#ëXWà(¬‰@ªUäc%ƒ±$Gms¸H˜A±ğ™4n€ Kq\h¨€¨ x‰R2q ,Ap©ğ%m—…Hû7ô=İğËÿç{ótf9ı{Im2ÃO·¸6aê“×Öï«ÿµö\ï·×=Ñ¾ãÑŸºşw7dlÇuw‹^¾qõüÿûüZÛ~kûÎµııwWYı‘wÆ”·kÚË~{ÿ6åõ¹ù}»i®©;âüÿ›ÿ¿î”WŞñÿw¥Õµ]Ï¿LQ#QªÅ±…E¬I·˜‘ ;BP§H¶HŠò,!—jq2ñ(9qcaµ2½dEC¨HFÆ È¶D€ARSKTD1ÄÓb@ôŠÀE H°× Lã£ CAVÛ ä`Ã„bÆ×¼P;&Iå®ö×5¾oÆÿÕ£Ô¹ß{ú×Ş¶ıíù3U|½ûº÷º[;{ÛŸ}ÃëüÎí÷õüıõşG¯r¿¯××^Ú­X³—ß~ÿUöíë7­·ùùÚÕ1Í×FóXş·“}—úÌ=æÿ{ó¸ı	¿®ñÕ8Kß÷oñ/–Ç»,¦m¿ÿNïåyd-.sgn·Ï×_ÌÁ£¹ö¾­ó­>|R¿dÖ¼s½+¨®öşEşŸ³_ë5“üZË®øı¸ùuŸDeßôŞËÔCÁÿÚ×¯4îËCŞußõ­ıµYßŠÿÓÛ×·¬ÿy«;ıîÇíúN|ß×;å[öçû¨ğ¿¾§~©ßš½7Ëó3Şm;¿ÿ×ûç©z
Æ2ô	#¯tÃ@¸¤E/A- €œE^P–8ğ‘B3Q~±± Šã€P„€’P"lÀÒ€ Pƒò†ADb£ h8`ÑÖEB(ZDaœÓã ;Æ@ê€0N	UA³¢&!ôEä‹R‘f÷8U†  u,şS@±Ïi¿ÿûëŸßz[öıÑÖo·}»ÿßß/»ßù3µ?ÿ¿Ë×õ ­KŸÑ?wÿÔ5ëwKïŸışUõ}Şİ:ùüûûÕÛóş¾²½ú­ûXüşZı=ù'¾ıŸŸYıpíõtµ«]=Õ›—·ÿnû÷­ÿç»ÏSÆú¯u¶îİ¥¿êıKÖ?»€Å€ 0\ƒ!¬¢"œ ß (¬šC$°.€r:$±H-°”U× @\e`	H#$S°Ğ«ƒèBÙ ;x;]*L“^’ *„f
?	ØHğª>0çÆƒ	ÁÉ.2ÆAÔÁaXí)!Y„@0 d+DÊåÈ‘Ìß
Ó“Ø¤fZ8Q ˆÊ` uOj©$ÈA€€Ò£Ò¾ÀÔ:€\$ d ¸Aå‚‚‡¡P{I@¦s (Ô^ò¬© BM²Âk¨hÂB4\£²a¶„…<[ ”(•²›À(`€0€$‘óew¦ıçıÏ7ÿß¹m9»Voö¶äßÜ÷r_ôgï_k>å—RİÇ|[ôóáğ»ÏùÕ_ÿşŸë×‡~³_şë¯ÿåòc'¿_¬»²íÛ{fdîù?v|íßvÿë?_ßU—2¬ïRà¯ß÷¯¿]ûåÿïúºB¿ûæ^ÍzOÓ¹Ï#wß) %60’ÍA5
Qô(—ÀC±"‚è UšĞF@¾oˆáA™€ ’ƒƒ €‰rÅ `'ò’lØÒ2”‘I(u:0‘0€Î „&€‹†]POP¬Cİaª‰4f]`7ATLrìdJ™gõß}vwÿ?»äO_û ·y]oĞ?ºç^÷»Y4¶~å«ŞÍ¬İ¶¾íÓßÖ¯ÿ´ÿßı‡w¹ŒõïsÿÂ¿çwç5Ú½Á}şz9w‹m÷=ßÙæ÷^ÙvîÛPÜ1=÷Ì^³İµùóqK´é;Ï¾·÷ßİÿ«7oº“ó{ßFöõÔ÷Ÿî_=÷ù/×oZÆÛìµèó{Ş<¿ÿ÷÷–øÍT¿wÜÊfûÚ½gŞùß}ÿfÿÍİ÷ÑWÿLéÛWvİ6İÒóIıİ~~ó_–øW°¿÷e{¿a²#÷±?“ÿg{kÿoûïİÿ©;}³Ö_öş®ûÛ¼¯ßÿßİûúÎ¿—ÏI«Õ€CJ"‹gî!Ğä&22QÃ¥4 	Ğ%#Œ¸0ÂS!€*
ÄÍ3gqĞ„0*¥	MÁG°  ä…Õ$gÆ?* Å`árÕUç>R
(Í²k*G  LÉRAàæ”È'­MW$aB!WhÊajók¿·¬íÍXnJ÷¿¯üçÖë,îf|îæßW‡çŞoëí}šjvÍŞNÀìûï{å?ÇíÿÿG~·ó7û¶ôûõô/ıÿZ¯®e»Û¯ï'O¹Ò=şíŞ­ùßd=ş+·WÕßoş·û|ı—7s/3îàò½ï¼ßùïnÙ*¸uòp¿¿wB@Á@8'”›&ÁFPJ @€@C/@@@’WMøF!q„+á&‚@0ÜÄ)‡¡®Tp:@E’"”IP`X½¢ -x‘£B©
„°Q“‚t†@™
oâ  /°°Ó°ÑB„ZÌ14Ã–j 
Ää!£ JPÅİÓº è¼! C @ºZ˜ƒ±:J*-bÊj!
,+k¯à€K I]ĞÌ ä$LDm‘
A^,Ù‡UaUÁ•5¬Ãb7 <bD‡aEh1=0°r›)Ø¤l:×
SÌqDŞÀ6 ˜6%ºÖ%$Âw4¯÷®¿Î‡ïnKûÎ±×|¾üù×ëwrÇãøóß3_Ş/úòŞÿwÿßÿìûÃ»|ó~ÿã|üËıÿæq¿ú·¿şîŸÇ¬ßó}¾vxoNú÷ç]êñ'wûÿOí­=oV¼÷ş4Kñâ÷w›Êuíşü¿úÿëwmˆõm÷İ?¯Ÿç¥[ö“ˆÂÁd¾€
ĞĞÚ…)*fÜœâL’ĞD"œ!
ˆH€&@‚P~/	°Å`\QC büÑ´_ì”$!^b=Id 'h( IF® ›‚çÏb…I¤  ™ ¡+`	¥™n+* DÙ€XXzJ•Â·í¿¼—ßó—¿bı--ìå¿ş]ßöC^×·3ô^ÿçÎ×=Üûı½ÿ½ÿ;éóıÿ¸oÿıoÇ¯ï[4yßÿÇ»ã>yãOØÙkMØÿÿÿõ¿¥çÿÇßÿj¶ÿo»ÿäßH÷}ù]«Vşç:T]û~÷ıëº··÷î¬¿ëî—Öoö=;®İYÿß–ÓyÍ™oşß:]ÿzÿ÷æ¯ç?—ákmŸÕŸ—]ö=q½?ÿöòüîİÛOË½¿õş¾ß—ùÛö°w•{k¿î}ø½ãìm»û¾WÇêó¹?·»Û‹ìë¿ßÿÚµoİšşµ¯úúßÜ_6÷».Ó¿ßş>¾6×úUµîîfm›6€P„MÕ° •»‡AG
HfÑC°TÚ›Ù$Læ¤<¢ P¯
pä(P(Ä¨’€¦zõ¢Y’³#‘Æ#ÓGÂ˜ä¯ğá\‚-c@À®I ˆZNAV@e¡`)!r
,PâTÙÀìi	!(!P’)×EóšïM{oíM+}¿ÚóëüŞ¹ğÛË¼ÿì~Ög¹×êùïÿÿzÕm÷W÷*wOö_Êÿ÷§ìêõ\ìİÏ}şºß¤¾ÂÉÿ·OÛïïÒé—ô½ÿh×ç¯7½6õ×¾îİÇ½fõŞÎÛv÷‹Ï°ÿ}³éM¿ÿßq?? Ê§zyß*ËKø^Îw»`1aºot%j1¤d)Ò‹¹²%Ân˜@X .CäÑÏAwÄ¬€x>µ«$®€"XÌb  á(W
E Fuš@‰^B­=DMgË»f
Hv¹DeV’V`$$™¦ø4\$MU@fE8Œ OĞ(ñV„&¤ÜÆñI*©ÃæBKŒH°º À °VK àïÁQ¡Ipu>ƒÄïxÂ,‚hœ±,QhÀ<T`3U’º JfDä! %
ÊVÈZ$Ã b"A	M]ĞN—É†…vB33Ù2ÖÄ€Y+‹K Â“¨r¢/@Ú$=
$rÕoñÛçm_ø_{]Ôüì=Ì—g>tÏïìîyîøËª-©ÿıßÿó¿ñÏ÷Rsïüºıÿ?~õí‹ÕÇım¶®f•&¸õ»?›{÷á·]-_q Vq¬Àí©#ëÓÿš÷_¯ïıUîëıê½·ıì÷Öú¨>ÿßâ­­.ö×ën (format) {
              // Set deep to false by default on selector formats this to avoid removing
              // alignment on images inside paragraphs when alignment is changed on paragraphs
              if (format.deep === undef) {
                format.deep = !format.selector;
              }

              // Default to true
              if (format.split === undef) {
                format.split = !format.selector || format.inline;
              }

              // Default to true
              if (format.remove === undef && format.selector && !format.inline) {
                format.remove = 'none';
              }

              // Mark format as a mixed format inline + block level
              if (format.selector && format.inline) {
                format.mixed = true;
                format.block_expand = true;
              }

              // Split classes if needed
              if (typeof format.classes === 'string') {
                format.classes = format.classes.split(/\s+/);
              }
            });

            formats[name] = format;
          }
        }
      }

      /**
       * Unregister a specific format by name.
       *
       * @method unregister
       * @param {String} name Name of the format for example "bold".
       */
      function unregister(name) {
        if (name && formats[name]) {
          delete formats[name];
        }

        return formats;
      }

      function matchesUnInheritedFormatSelector(node, name) {
        var formatList = get(name);

        if (formatList) {
          for (var i = 0; i < formatList.length; i++) {
            if (formatList[i].inherit === false && dom.is(node, formatList[i].selector)) {
              return true;
            }
          }
        }

        return false;
      }

      function getTextDecoration(node) {
        var decoration;

        ed.dom.getParent(node, function (n) {
          decoration = ed.dom.getStyle(n, 'text-decoration');
          return decoration && decoration !== 'none';
        });

        return decoration;
      }

      function processUnderlineAndColor(node) {
        var textDecoration;
        if (node.nodeType === 1 && node.parentNode && node.parentNode.nodeType === 1) {
          textDecoration = getTextDecoration(node.parentNode);
          if (ed.dom.getStyle(node, 'color') && textDecoration) {
            ed.dom.setStyle(node, 'text-decoration', textDecoration);
          } else if (ed.dom.getStyle(node, 'text-decoration') === textDecoration) {
            ed.dom.setStyle(node, 'text-decoration', null);
          }
        }
      }

      /**
       * Applies the specified format to the current selection or specified node.
       *
       * @method apply
       * @param {String} name Name of format to apply.
       * @param {Object} vars Optional list of variables to replace within format before applying it.
       * @param {Node} node Optional node to apply the format to defaults to current selection.
       */
      function apply(name, vars, node) {
        var formatList = get(name), format = formatList[0], bookmark, rng, isCollapsed = !node && selection.isCollapsed();

        function setElementFormat(elm, fmt) {
          fmt = fmt || format;

          if (elm) {
            if (fmt.onformat) {
              fmt.onformat(elm, fmt, vars, node);
            }

            each(fmt.styles, function (value, name) {
              dom.setStyle(elm, name, replaceVars(value, vars));
            });

            // Needed for the WebKit span spam bug
            // TODO: Remove this once WebKit/Blink fixes this
            if (fmt.styles) {
              var styleVal = dom.getAttrib(elm, 'style');

              if (styleVal) {
                elm.setAttribute('data-mce-style', styleVal);
              }
            }

            each(fmt.attributes, function (value, name) {
              dom.setAttrib(elm, name, replaceVars(value, vars));
            });

            each(fmt.classes, function (value) {
              value = replaceVars(value, vars);

              if (!dom.hasClass(elm, value)) {
                dom.addClass(elm, value);
              }
            });
          }
        }

        function applyNodeStyle(formatList, node) {
          var found = false;

          if (!format.selector) {
            return false;
          }

          // Look for matching formats
          each(formatList, function (format) {
            // Check collapsed state if it exists
            if ('collapsed' in format && format.collapsed !== isCollapsed) {
              return;
            }

            if (dom.is(node, format.selector) && !isCaretNode(node)) {
              setElementFormat(node, format);
              found = true;
              return false;
            }
          });

          return found;
        }

        // This converts: <p>[a</p><p>]b</p> -> <p>[a]</p><p>b</p>
        function adjustSelectionToVisibleSelection() {
          function findSelectionEnd(start, end) {
            var walker = new TreeWalker(end);
            for (node = walker.prev2(); node; node = walker.prev2()) {
              if (node.nodeType == 3 && node.data.length > 0) {
                return node;
              }

              if (node.childNodes.length > 1 || node == start || node.tagName == 'BR') {
                return node;
              }
            }
          }

          // Adjust selection so that a end container with a end offset of zero is not included in the selection
          // as this isn't visible to the user.
          var rng = ed.selection.getRng();
          var start = rng.startContainer;
          var end = rng.endContainer;

          if (start != end && rng.endOffset === 0) {
            var newEnd = findSelectionEnd(start, end);
            var endOffset = newEnd.nodeType == 3 ? newEnd.data.length : newEnd.childNodes.length;

            rng.setEnd(newEnd, endOffset);
          }

          return rng;
        }

        function applyRngStyle(rng, bookmark, nodeSpecific) {
          var newWrappers = [], wrapName, wrapElm, contentEditable = true;

          // Setup wrapper element
          wrapName = format.inline || format.block;
          wrapElm = dom.create(wrapName);
          setElementFormat(wrapElm);

          rangeUtils.walk(rng, function (nodes) {
            var currentWrapElm;

            /**
             * Process a list of nodes wrap them.
             */
            function process(node) {
              var nodeName, parentName, hasContentEditableState, lastContentEditable;

              lastContentEditable = contentEditable;
              nodeName = node.nodeName.toLowerCase();
              parentName = node.parentNode.nodeName.toLowerCase();

              // Node has a contentEditable value
              if (node.nodeType === 1 && getContentEditable(node)) {
                lastContentEditable = contentEditable;
                contentEditable = getContentEditable(node) === "true";
                hasContentEditableState = true; // We don't want to wrap the container only it's children
              }

              // Stop wrapping on br elements
              if (isEq(nodeName, 'br')) {
                currentWrapElm = 0;

                // Remove any br elements when we wrap things
                if (format.block) {
                  dom.remove(node);
                }

                return;
              }

              // If node is wrapper type
              if (format.wrapper && matchNode(node, name, vars)) {
                currentWrapElm = 0;
                return;
              }

              // Can we rename the block
              // TODO: Break this if up, too complex
              if (contentEditable && !hasContentEditableState && format.block &&
                !format.wrapper && isTextBlock(nodeName) && isValid(parentName, wrapName)) {
                node = dom.rename(node, wrapName);
                setElementFormat(node);
                newWrappers.push(node);
                currentWrapElm = 0;
                return;
              }

              // Handle selector patterns
              if (format.selector) {
   
`Â‚@#¡ˆÌ…_R5 „P‰ .œ @€A TD‚áCóÀ„Šf¬%	«O¬*zğ&‚00àRä+ƒ€„@<A	P¬!; ä	@!>¥Z(J€I Íf’é46€@ ÇV
ùçó“¯Î_¹~ûÙqÖóõò¼u™OßéX¾÷­Ckızu÷[œÿgöo¾~—ãgíl½—íÿıÅıôê—»ç®§;ŸèÙá—¯å/7§}ÿØß¿£š¯İ]öŞÎïï›ÿ_¿}¿îE|ö#}¹ïóë3öw3;¿k‚™ı®SîÛ’î¼ı´_ÎöêK_omÿï}=ŸİşşÚïNİ}Îg÷Ö·¿[oÍ›îïÙ#ï2ßÿãqæ~äKï½®ş]V¹ş?n{éş÷ÿ~zß;?¶ú·tå	ò9zsïÖøy·¿íä/?¾ÿŞUš×ZÿûqO{{Œ²÷ëkŞ>mâ‹ÿ{Ş]Ÿ_ûëÒÚŞıîšŞû_*oƒáÕ€àÔTMv(l\
õf	H? 1„À#``0S
À(™ 
Ğ ( "1ÇBb-b”…w ¢†”s-æ¡`!&,’pÀ@an@l)œf¡0H	½vx%(œp“D>¸8:İï»5ÛµÖÌÏ¾îú…×ÿ¿Úá ?»êG¼öÿowÍş?uŞí÷ç•·/oÊ~gÿ÷ü>vé×§»^ş>»ëÿÿ½N7Ö×[wònÍæÎuñ8¯˜öú»¦—ÛoùŒ£÷›ÛÃò›÷b«{´ÿ~|¾>#lwûûøÿ+Nës±¿~³M´Aã%‡†âeTáAØvcW$Ë Ã†‘ğJ¯ƒÀH €™†2’pŞ²
ZÅB0Ä“eD†qH$ÀÄ)[!ˆ`(4¥ ""2Q¥²[¸öRÄ@é_U èáKQƒQt
|B„[5a„h@+Ãˆ8m€™@Ğñì£¬ 
6 DáÜ´ŒhŠ@#ÓÀP	"p1”‘) 8@H€dI€Rš*N  ÆF¬r‚¼$~gÔ“…€QFi% È¦	¤4“ °4	á£pgû›fé‡üUü?6íß_Ÿ“ÿG_«æ¿|nŞ}Û÷ëùıõûçÂÜ{µÿ¿¾ûÿåßÑûÿ÷ıÔStíwúeåº~~|_öOçtXt9sÍ_/êk7i³Ê?şİşëÿzß®RıÏåßÿ„ÏßûNWû6äêwşßü=›{Vêı/óá_º0†@@$FD’& %@4VP@‰HæD·
À*RÆ KÍ0Éb I W¤Û $ƒ YÆB@7!I4µŞŒ°šæb3j9œsp*Cv,zê‡(¦Â± Lx1BÎÆ–&À#Õ¸8±‚û¿§G}ù»ûÂı~ÙŸ?Ûi§Îó©™ù<YÿOyñ”·ÿçşûÈÿûzçú|óÛ¿}ıÿ¦ÏÑ;oûÓÏí»ÿ¾ÿ æÿ5U~Û7¿ùûujışÿßŞ÷;]óü¦û|ÙîŞ÷íª×íùß÷‡–ß°çõ¿ñ¶ıŸŞ¿z¿çãúúÎ_Ë³ÿ¨mÏ½_õ÷{û÷U[‡ï×3›Ú§¿½™×ûéŞşômt~ºÔ÷ûwø}s6÷W;·Í½çõíşïO¸³,üûŞçÒ¾éŞÒçç}Èÿ¼½Š{ú×Ş¾ÿ«ÖÔÎoÉáiï½³ÇŸŸÍ~Ÿùº³Hü×ı\­úıÚ¡ÉıııùyÒô* 0µF–d¥‘hVwÒpÉ™°@Wsa‚h€"rLĞ 1€¢P\ `ŸJQ €)ìJQ'FæF	Œ!"¸_ p@™ àÁà*ĞĞeØÀ DO”¡‚²2ğA((±(Dz`0¡
9ğ/	#ĞW‘ª![®öøïÚû›õ«NµW÷õóoıïßİÏ~şÜ}ûÏ»ßÿ>û¥VÚ´9ßûÏ±ş÷&ğ¹ß×ãıß¿óxıÍi°_¯îï¿î·zÉ&½§wšöİ»ímïœfåüÅ¯æë³ûß¹şı[ÿßfúşˆïïç/õ.Í¹nÛ›©}»ÑÖ«|ïi+Œí1HÂ cS‚yşĞ@*T*âXdËA(PĞh)ÏC	AJC°ÇÆÑñ¬0<´AÆÑdé†ƒ ”ˆ‹EE.€H$	ÉdÄ!G%w –@·J$&I‚¶  ‚€!QôP
 ÀĞÂp¡âe';¦P bT €&°Y‘Hˆ1”h-”"Lèñ‚˜Hàa! 
T´De#+P Aˆ¨"€ø†º+003–N@n àã±ÎÇ€{ !İ!ÂºagFP€%ş  0°q"\h  6d
ÂŠm F u–¨±G+jb› -S“†6P"eÓİúc¹½Û¼·Õ8û÷ÕËÿ÷>ÿë¾x]6_Ï¬„ÿßñ¾ÿ½V¹m_ÇyÿÚı³Û;¯ÊŞóûèë÷ş3ÍxOöåüİ{_Ÿ·?>ñ=õÕÏ‹÷7åï‰Øî³ú}ù²ÿ×İ?{<ŞûûYå¯úü¸õŞ{Úüı{òŸ¿7½´{_Q )(d
$@“Å÷Àg@†¢gDW	´Q–HÈË’Š“¤ƒ ‚\ MˆÈC °†ÔÙø€PñÈŠ˜P‚€â{T(!BU Y‡F,Dê³$Œ	“•ˆê 0UHpÄ+	@äItD¡ v"2¦4¤´f_÷>Wíï¿ø5ıu](ÿk~+ıó,ÿûŞëıuÓ«ß:Ê‹¾sÒŸÿë}ş{Ïhn?—½¿:½WûÚ|Ï¿ÿ¶ñ¨+»ûcİ·}§Ms­|ııo<nÇû]bûû¿ÿ…ZØ¿ËwşMhÛäÜş×î¨İûİ+ªµU÷!Ÿı÷]÷}×Œ9ÅyÛ_ûü\{¿ÌZ[Ÿï³µ-¯Ö«şü~©ş®Òû›ù®Ío÷Õè£‰ˆN§ÿ^ÿ%Á¦¿ŞæÿqOm>£k÷¯éİù¯÷^»éRïVjVí¢œîı°Ú/Šé=î±¿µÿ>|®w×»ÇÚÄîUØéˆÍ¾‰ëbšyÇ±»Úcø•óp)d9R ÔPì)pƒ`>ƒU )
å‘ F€‘©ÀBøPT}Á`CÀ€P€ş ‘ú#ÀIàOD)5@O %EHL™#IFTˆBì%´»PìPeÈD¦ ¢xÁb  ÂŠşÎzó–'n7şÔ¿]ıüüÚÏ¿ô·«]Å.®}ı¤¸ß§íë¢ÕıO¿íÌ‡şl·ç¸½ßoùÏ»İÙómë>ÌOÿ×·o}æøGú¬®õò»üúñèïöëÒï½Kz¯
½3ïí5û¯Ş¿Ïîø6ákyÿülä¿mÿµ¯J³zˆğ˜Â± Œ`1˜2‡YÀrÑ°Ë4ÃVª.1 X˜¢8~% aà‘ÜA€¡@²Us	6]LAB…Mèµ³ 8(µ$Ğ‚ª€`9Z/eÄÖ¦@L á€‚‚pi¤€­™À ¢ *Ñ(" Ñü@4€ÃÄ nĞS(  ÜúÀ9Í!0_STJÌ(Á2¨Õè[ ç8ÒNái„ë€ŸhXQ†|	ôO
 ¸=)m]	"Œ
ÈÓÎ$D:A!2 ­Å©0I
‡êp0ÄøR	"@¡0±gD†hóİıÿÉşñåOõû¯óŸñ·ö‹×ÓrKtl7¾ûóy}Ş ÿ·—-ëÍ‘·zş§4[ïuÿ÷ıôí¿ïîŸ÷öŸ7é—Ô¥göéoZ›Gwæ5-G¯ÙaßÖ=ößHÏåò±¾Äù¦õz?÷]oš‡ß5ûÛt÷yo­—İÿvT²Öí'½:‡€Œ”j—0Cæ #+ˆÁ9K ‚’_D‚’ôÀH`G€è‚€3ˆ¢NÆ€a –B…ì(€Æ‚ bB‰E«·uHˆš…ÚvÇ‘‹€0Ã…(2& ˆòda P"ŠàOBl ‰@2d0ÿS§=úÿşü?ÎZ-ß÷QhßóñûoÎÿ3¹¨ûÑëÛëï²ÿşy×û}§·ûŸõOır;ÍóŸÛÿ¸[Ùß/-´$³‰t§¿Šşñí²çÿäÛşûŞª÷ ‹ø¾”-~sYÂëïGñ.ÿÿ»î{î)µ4¶î.EÿÕûıO÷úşëş¯ôëŞ¿¹·í¶ë÷9q]ìä·ûÔıUñ¿¾Êÿ¼}û˜ÿçøîÜÎôçorR»^şkûı?ûû|:ÿ;îÙËæíÒqîê_L>İ{ıÿck»ãòó/üÿc>¿ôç¶ğÿïóºÿÏî^Y~Ï?&?m÷«®÷_³”uûygÿÌ^Hú½ûMÛc†-B*q½ !‘ Á° A†Â“a€€ÂĞq“R"Ä‡F°6­j ‡ÀbJp£òH>ê}$ Sœ€!Bğ ‰€¨…æà Ke;PR1 _ ¤€ &„¤‚÷ 32P€aò3	¦‚xÿ÷o½\şö_µ}oÕëzOWÕûúŸÿ%íİáÿîÚ¼öwÓ¹yñoÏ{]K|×®ãu÷Ò»úz‹ûçúqùîÿ/ß·÷ûÿòá8)ÿ¾·«ßã{z¿ãò—Zè«ö¶×wzÊW¹sş÷û~×?Øıá²÷f/ûszşŸã OÔ4a€PÎàPv$ 6QTd¤ho àH¥àS€–·”C1X 7î "ò4$å ±XcÄ2¡E8ÑƒC± …W hK
¨ÑC@b’pfO°
P$Ø£™ˆÂ&`R $…ôº‰0]Ğ`á|D#Õ†@‡HÊ›;€ A€|¤ÆŠ‚ƒ#Ğ	¼”x Á``P'c·†4âà%€ $ ˆ`c8ŞÆ%ãoQT<H"”pße°€5A6»@3@ŠCÕ
 &Ê	aPH«Ø %Ysœ°ÄI2#G”!sÿwgó~ûôô¾®?Ío¯ÿ¿õ/ÿû¬»½'ÿ¿íí]¦W½üïİYßqèÛÍ~çÆäâÿ«zıyı¢á·ıïøıïÜ^ú²ş½k—çeÿ=oŸ÷oÅ÷ş·½ÿqoğ¿›¿íÙüğìû·+SéÏ©¹ó±£~îıæo¿_ş¿Óßß’yßÇ,äÂ…!‚ÚĞP¦
^„2ˆ©!Ê*€$ 	µ^ÀY0/,5fÑT=N3p&9  $@/®‹r’¦Ÿ!ÀñÛ b¶§R²h²·Â!´d/jlDÂaF¨‚¢,Hƒ~‚	kJGr²x`	‰CMmNC4DAH‡Ñájƒ$?!  4ä°„ÄGEÀ)P@ %°9	3€ös(Cù
YpÉ3|Š`hË1ˆ!Š„ N+*”bMHÄ§(  ¦ (À†d–D  ¶€D˜ "À Ul$À€p‚çr` (#J# –’% h ‰F° '¤m5Ğ‚>B!ûäH¢ş"ÀDHŠäøÌ	O0†"E°êqÇĞª¤†1PdÉÁ¥H 	ı#*€T¤@ EÈ,„ØLWP€¨ 
bÑ‰%»AÂ(`ÀD@ XªPÙ¢w@] Ê+B‚b`ÁÉøcUHBbG9
TÂ@"°>äÚ6°àBÚ'(¶Ä‡-ğÁz¨±™JP²Èf/%7D›
qĞ0	#ÆÁ°   5,€ˆ¸•0	y\â	G%²UpN” 4`$3"7-²+Ì
hh
ˆ @FøÀÙº±	
Š¸”" ¦N aÙRPÀI•Å *Uw©t¢)”ˆpH“„HÀ‘6„PˆR"¡B€ a@ 1Ğ!(A´!@ÅÃ5…„€ˆ×  ›Ú ¿(j!N0PÏÃ 2Fó†-C€CÑ…rH@âª„L\ç! @¬©X´KMª(	ú‘ i,à†ápAJzƒIØ†B‰h •™…Š.ÜS$şë‚ØZ0!õÀGÊDÌUØ]ˆ˜0®@„K8	70 Õ  ÀÄ8„X æƒd¨E’X<ã!„10Êˆ€P ÃÄ\@…ÀA‘BÀBAÈ r4ÑÅ`
À@	Ò(DAgIh„0Ê%@IìFÃƒ ©¥…ó"J¥zHØ00à"&€« D3£)dUôÅĞ	(úP$#Hd	ŠõÒ€˜¤	t|€‹&ğ=”* cj 2 !CÑ” T9<  ‘W€‹„¢ u¦@ø%NsC‰âd¹ÀKœÀE€ ŒĞ%B¨&Q@*"€#´5DÅ!h¬@áÀb€PX¤ D ! ºQõ° ¨¨0³!%ˆõ”D\Ğ :ÌŞRGµ “|`*ª€¬0TR§P-0Å‰“•d	‰Â„Æ&™€ş €è%ğÂ
%I^ŒHNü0Úf‹ .à¾b!ŠGÎI‡Ø@…H!X®D2â	8ˆ£Õ‚cĞB!Îh  ²0ˆI‚ ²Œ`MÅ"¡‰M€ŒÄ†¨ƒ'Æ2€Ã¡2 +
ÌdßK` šD)4(QO  ø?` 	F Ò`…d‰æ(¬E
°¬‰(mÆ= F•B¸eH@ 	N †1ƒĞ´š“ ¢±C»• dEap@ù JEC©  ,§0 H
,“tÙÀPBfd†«ù)CáB@ 8€7S¸XH2Á–l„+"9e !„¨ÀQ#JÀhd@ b-Â:Í-1‚JDi#*‹a¨‰€ì †pDµb FLk¸ÀS ªK€R ƒ@|H†ÛB¥Be¯< ¼.8ãFàV@¡”Dùˆhe¢d¡„bèd«R€Æ”x0C³™Ü RÁæ0µ5Üo”	M~5®!U	LI:d-:xE S1C„`E ùbäŒ@Âè@J0Ô€R2-"†p N˜HŒ@ ˆíGÍ‘
@Á8€AòLEh0X°‚È3%aLÅB‰´@ aQD1BXA)D V `’1C’	âCªÔB¥°T )&AB•1Ï°Mèd`:õ¢LÒ!@H)¹€‚™QÑ" à£C¦1íë( @À HèFfõ  `˜¨L ĞPR7x¬ò['2A4âq€™°90#C 1Ÿ ´ì"*áĞè†Ì`
O¥‚Á
J•J#¨P£ÓD”Ì'È (†­ ''2@Hƒbr-áTbï¶û¡0A€¦“äx  ‘ØüK&,’‡ÄDb"O ˜$0àDn˜Šd¡4"€PDE =§2òlŞ%Á@Q@ 5-j˜E€À‚ DÀ `8G!‘ª‡&”ÒCÄQ©Ù864Â2å òá±" :rP `S†¥"–@£3 ¡Hc%)*°
ˆ  a,…À7£rT²‚ƒDªIƒù«0C €C(Áb´ğ h4èLn#FÎC¼•G- &	jHPRÁ“S° j
A¤–E©ˆÁ‡B‚$@S‹@˜ $-aCd€"C>¬)B`ƒ3!
 0`(š¥P “€”làU"$6:YP!c EHºİ/Ğ“5!¥,¤:E–"ÇàXO:ƒB€$¨³(»e@-K24a@×Œ”°›:ÀRG7…¡ –ÕĞQCV•xRÕ‰@Pf˜lğ h2E& èé‰•ÿj]hLè€K@@# h  8Ğ3(pfTPA$€ € EPd7 …m4T(™" Î®¥ DP2ˆ
6‘ÆbÄÆ È;$G…Ë¢ Ğ‘Áà®:$©¦`¬N¨‘03×©P$tg`ÄÚŠ´(*¥+ %Ä,[Œ`!„)†”Q(å
’ ²°€ P˜‚ â  #lÁ”%HŸaHˆ1Yä–˜!²Æ¸Ô4Ìz‰È> H 2•€'œÍ
°p @P¢ ã´ÜÁ FfP, ƒ€è‡	½Ğ¥J°åÀ(Âéè AvÒrM 9Êd¯Â‡Š>`h0,b|ÚŠ+FàÙ/"Š: Ü bøÔ4/±V‚)÷„À<Hƒ Ô`âÄÄµÉ*=@D0+¤€Î0€ €#„‰À(! €DÉD1aÉá£ÈC(AÅDˆd(¥8€a1lÈ$/rŒ£C*Íu  @P‘1FD2A’ñÓY‡Ä’‚ˆ,"’©l@ÓLR° Ûx	À¡ RÂ'd@®"”¬ÄP%"QBê2*ôs†‡+Q|œ”òFò”@S‹*48Á˜ €œñLL#²w3Õ—%É
-câƒ$bƒÈ0„]ğ!!`J±Ä(˜C	&¢ NQK,@«”D‹hH”j&ÊP6dm¢š …ë@6@¥ª c êàa˜ @‚L"^_FUj€ˆ<,ƒ~ 6AÕŠ5¤@/bˆ 2Áš£Ä9OˆÖ3IØ3ª9
!.!9”…÷ªÔğÄÂC)WM”$„Sº”÷Ï›İ !0s¥(DğJ…a`VRR4[Äˆâ F‘P"”Á3 „ü„Á±J0Ğ$0P¨ X¨ `›# áB­Q * ­A82ôƒL R‡$!ÒGLÔ:œ4H ØK<¡))M&` €À¨”8,W,  83q˜ }×5ÀqÕPC$(	H2%§1àD¸ÆÈJG2\ €ğ&<| -Tò03<€bŠI¬T1Ä„„PP{$¬$”M ›(6'cûÂ`¢Ya	±¥b å@Báà*Ö˜*iÎÂ‚* Á$h "F!Ò6€ 3ˆFR‘-@ X!`š€dÛ‰ğ ,Õ@  Sb$4 QEP" …¥
”Àƒ á)
|±hKÁ S‰B‘Da1 `ú¡RhLPâ€Tcƒ”NÔ@  ; Rp&twƒ+!Ê8Áè:áÃ„2RHxğŠ 8àPP!Á!@™U
ÍÑ» &ÂL,¦ €nI–Ä*ÀbDzÎ0`ÀH Ä`A6°LH0*ê"ÁÆä ¡ƒ  G„‘ğpB !pÜ ¸]GÌ*3„ª} 4±"a12¥ à4âƒ$@@+B9QR¹Kƒ„d7 ¢§ÒÌs&DšI—ëd$Ğ(äE 
Ñ)ö‚T°M´Ú ÈÛ‘!)@`‚À*	S!†¤.
 @8ˆ40"ğ
ÎE$VPàE@ÔÍRP!Hd+°p’€‹% HB€’0+Ã•  b È’V2J“¶À+ƒp·M”­Îhæd$H±éàx¿$)qa‚KÀ¡¸€bš#‚¨¢[ô 'ª0‚z
/²ˆA‹+ƒC({(¥£!·Àè˜ÆãÄ@à0dç­Hd#2 CàøñE«£/‰%ÛÁ+fL|1CË	¨ & 4”0ÑV„ô£›ÔHfr0M€.À6„ "a5â¡g5‰$!Ó å	9J²Ô ¬ ‚Ñ AŠĞ
ãDºœBÆ ËÒ•`DB
ám Ñ U  4B@ÍAÅ Q”ç¨LL˜ør@‚¢ Ô$À‚°Ál ‹D³!È:¯@
¿Q¢ ,ã§>jTEâD`|ÅbBƒäP¼½–&;P<áÒ µ(EB’P#ø ÃLĞ•!#è„xúÒÄ"	l]ºHÂ·Kê`åµ
%'f2t±‰2 °ƒ§?ÍC5–ÌÑÀ„`  t@(D°°pHƒUQ # ˆLt ÄP
 …8 ¥(&è'@ T$ ’ÎÍÿŸõ„ß¾ÿõûmeÜ»şï÷ÿÓ9ÿ7âßúÍ¾ãÖ/:şïzHowwçû¯•õı/?îÿÍêÕı-|p–êU¼ó·Üû¿^u½È—ºçQşCôù¹ƒšƒ9–®Ÿ®q÷¼[ˆ—ÚÔ)w4»ü/.s¯#¿İÏú²÷çNê9¿¿»^ú×w›ÿûİ¤üó×Ì²µ=°¯­¾S½_¬íõ/ığ~ÿÅ·)}_çú_¾öÿß¿Úéÿézw{ÿÖûêæç,ø¯=¶¿,v¯#÷·ş?¶Â÷×ç¿«ğï—ÖÕ¤Ïéó¿ùêè~ıüÿëÓ?t¯ôúô?í}u?}ıo[-cŒî½æEúi×îàúÉO-¶æİ×úœó¿CiÛz[¥¯¯û¿oış÷=Ğ9»½s›Vîï¿Ê·õ»§náğÂûóÛ.W-=üw”¯áw®ì«=¯è­+ÿ_&½Ÿ¶}Úêgbı›üÿ÷ëßş×_Á»7«ôË¶×½ŞOq=½çÚç½‹|}™K”FÜÛİïôò‡ŞÿúmZ³ŸêŞ}òùg„÷À7¤q©MsÖ¦­R{½½óîö÷‘ü½ÇR­°ÿÛ¿ÅW‘J·åàL_ï•Ş_`>,ÓÒÏ|YÛô´[ûş+ë÷éoTˆn7Õ³µü®·Ùõ5WÙš[/›Ôıöè7ÿ»ù¯¿“íüïûK®~·fc‡7ß][}¿ãèÿkÿw[÷7;ëÙï®¶ïúô³™}¼Šõ¯?ıÛ[úÄÿoÿş!ïŸ]?ßÎè`ıo¼Uµ¾ök|ÿVé»k=½óıwŞõ¦qÏ-ıú~v¢ÿÖıÙúßOÖÏYÜÛÿ÷[½¹ôìñê{jÙÆké÷uw¸}u¹¿r“Ü¶£h¬%v/x}!Õo>5Ğ–ıïn;ß»vWÎ	°Ÿ½¤=KU¼$ÛŠÄ?ó²Ë:è…m_)%mçşí¼n»g’hıqæß/Ò÷ÿ¬ÿ)ÆuPÿÁûôıÕïó¶{o$¹W{õïúÛV—OáÃy‘ïß"¿g×Û|“<ÿ?OÚ§}ÛŒXñÿ+Õ»Ÿ-[ÿÆ.ø=õÿúO¯}ûÿç~ÙoåÙbĞ[önÿ/F§éÇó_ÓÁSı§ŸÌÙ;ôÜ—%i/?û]îom¯:şÏ×‹0u·¥/¿g¹öí/!ïÇnÛğòcy½†óşpÛh[´¦¦Ü=Nø=ı|ªä¼¾]óÿ<õÌŸÿ¿ïc?ŸÊ½[ìˆ˜#ö÷çÕKºşÿÿùgr¥Ş£û4<¹ıŞ×ùŸÿ÷µW2óœD_ì\¿¿àkÓoîÿï_‰œ[*ğ÷UL¢ÿ—ğã·û<=ÿ½şõó?’û¿¯—¸µû»ˆüF·ñ‡Á>z0±`}hõèùôû•À­ş§ü*W,/ú?·Ì¼ú-Zqq£ïU*qàiw÷ZW¿÷ñ
ı|Ë–utÅ.kŞ¿¦ñ×u?O—=°qÃGùÛ1œõÆ(İ/·õı¨Wî‹œöSsìÏ²‡Ù’!Ãì%£¾Rí–îÍkèÒıØ÷ÌxqíÿÆJiŸõ÷ûF÷â»¥~ú.õy5WşÚŸÿÛüÏû÷Ëî›ë;b$ÛŸñ.ëWõ/¯œàÙşÿomçÍ•Öş£şÿıÓ¾ÿŞê}Ká÷ÿëô}v›zÕğüéÿ×Àøº÷¾tÿ¯Soú+ã?³õÉöÿ^ÑëÿRßßèS0WşQï?µ>ÓôİÁßq=¸rVGLÓ±}}ßJ_·‘,íï¾?;®·ıïõş–ì^ª]ÊÇ—÷Şs{ócìïŞÿûë®Æ¿Øóÿ½şßï¹ÚùéúÊ]›üï÷ôíÓı;¾]½ïöşs¯¼{{¥|Ü¯şÏíµ&÷›íÿªØÖ÷Oí_Çıéÿ0Ú=±Şß-Èß÷†dí°ÚÖïvz¯%;ÖU~ÿ976›ÍÛsL¸¹Õ¥kï>õ2ãÓ*u—Xl	/÷?ş[?×b~mÿÎıf–§¶¹òû­«;3‘Vzqßû/ö¿ıŸÒÿóÓû5ş}›Ú¾&—w”Óû÷íß©´Ùı/•9{y¯oì6w•ş{®<RÿEÊo=ù¯¿ø[ıvßíù/ùîWÃÊß)bO_ÃWıF™Îûå]¬ç]îÍûí4ûúà;Kïæ×—[ş».Şï™ë¯úûŸÛş¯{¹¿ÿäöÛ|ı»ÿ_÷êùîû÷o?]úû§kë—¿×»İ÷Óıù~ŞéOv÷;›ğÒ»ÇQ¨á^ûöîŞƒ³ŸÏÀ=ÌÎòëÿßÔfŸîW˜ê±İŸòæùıú‘×w7ÕÒ.ŞtÌ«;šC¬¡ˆ¯·¼´üçîwğ6zïß	¾ß7ßÿ¯I÷ïûÕÉ›|‡×¿òŸJÙ—Èû®Ù—¿­‘¢ı`±¨·Ë±Ï_Í—íËûùÓZ›û³ïƒŸ¹ù«Ò7rãæöÿé÷œp·ªûtéA€3ºVÙ¾\©0µWÃí°ÏÚªş\ğçrÚşÅæşWxçıáÿ~&*D¦ùÿïf®êuÌ÷ïÇşí¾_O°^î¿,K¯ÂûÿÇsï²'ÖŸäãçèO=î)_ï=6ñ5Ğ[{±±ì÷ß^æşÿØùl{ñÿ×:}¾Ë{Ïg;û¾yı7×şª˜2nŸ·–|O:ôwÎö½?ÏS}?ªô¯rü.ııåçOøïÿnë¿æ=ÏãßsİºÏKh÷ÙËeIÖåõİÓß¼ñG>ßq‹™ïó¼Û_ÿÆí”»~¶¡_©vûl[­û)ûù¼ÍïŸq{ãõw²–‘ív?<_ø?Z5Òg²èĞóÚtwò¹?†_äØ~g½®”y±ôì|wç5ËŸø—/?Õ”_«êYìü+¿ş6–ºëšıãè£·¿uÜÇ÷¿şyçƒ1ı3¨óT.×kâ|ÑUg÷ÏÖ¿gÏçœóv}xÂáõƒü˜ÇäÉŸß/?~cûıªÑÄø}'{ûü¼ãŞœşõê9#ÿ}ëŸÚÿzëVpõüi÷Tÿ]ö\7öëÉJ}şúo«èøNÿ4<[÷şı½nvßß­ıÿı;îËü¿ñõ³~ğû/­ÜĞù­:½»k}ı;½ı7ˆ–Óşî·ÅQ‘Yİıÿ{…ışî^[vióé¬Õ_Õo-;õçÿXıì¯?÷ª<pÿ7İößŞƒÇÕ|ŞûÉ¹öîßò•Îí|ş›Ç__¬şøõwÿß÷z§¿=ÿÛûßçF÷ÿ%gwº‡ÙÒ{Ÿfİ™Zíóëş?Ü÷:¿Ìÿíşı}s=ß¼MŞ—MïßEUGõ/gïëúæOx›:°t7KÌF!ºO›Ïé±ø=âûO=KéÏÒ7úİlİÛ¼õóÏéĞÄ)×øEµ{ı_õ³÷Ü¦*
Oû÷ÇñùÿXüöõ×]~–gÃ×Ìy©	š×z{~+÷^R1Ú>Ç4¤ş·ŸÏ=;æÛ»ÓßÜ~•<ùëï_…úïo6Ïÿ}¯-g¡ï/Ú¾î<»õ»‡ıe™û®ùWÕ©?Ï}gÇw¶g^Sÿ¹ÏÛıÏŸùştıfõû»üs)c÷;ú/ş¿6ûÿÿz3ÿXïmgÕİ»ıİ¿¹İı<ïzßïöÏÿüïÈoòo|üVOÏğßfÅßß­×ë?h—¼ü­ñ3å<½K?rêı†—ıº7ûŞSÌ{÷åõïu|*ZÕÇô.ûËĞxÿ\EËï.óèåú†‡•¿Qgùï‹|QŞtYºhğ{Ykóù]ß¿z{>ÿ¼m^Î_¿qï­r×æWäÿO7u¹Å_á,ŠW#»ÆÏöæğ‡wv;ã“X’›/øÚÑÑ7oY¢^ÍÓßú~û¾ÓP³¢º×=Vú?õˆß¢7³cwô^½î‰—]ûİ=¿‹¡ªİ)Gló»Û·ş-íwä?o—y“µzóúßç}iîçÚF!–]´ëóócûµ¯/oıŞÔ¦úı¼Ò÷{ğ¾]{<ö­Í¯ôï÷.û‘?åv×ëëßVİ¯«·ûuøëî½ÿ«kökfçÌ,òi¶:zwui÷w¿Âé ³|Ÿÿ»ö¯ıïÿ¾ıÿìO²¿$û~ôşL^?ŞØş¬úzêÛK¿ºÊÍk\ıW×ìÿëÛ×ïlóÇúü~Ìv|P97mËù›ÛÛøö{ÿ/¬ÛÙñÌóLhï!İ¼ùÇ	Ny”ŞşÇK¾æõ_ÿo•÷Û»®ş=hŸ¿'?Úş¹ÙSFÛ×~{4êñv»şG³İ,u¾øïÛz¥“ÿk.ş}_ÏgğïÆÄtwÿC«8t”·Ïÿ×Q¬¼øwù3õÿşõ­O¶¿{}½lî=Û]KvÏ×¢õÿçV¸>õöuíÿ7¬àÖş¾;Iw¶2•ÿ_•ïËÛËÕSÓzßó~ÿóN_ôGçæô¾ùôoÅ&Ÿ÷ßvíù8æwŞÎó°Í«ôš½íNFß¾zŸø;ÿ¶Õ»ùûwªeç¯ùÈ{?íïµŸşì¿ı>7¿µÕ+=ûbÙóÿİNÑÿ÷²³î~aÌîÒòü}²Ú¿ü}Æ£ı¿/şıÛåwO_âÃ\oäv™ÆS½+tV~şı?'ˆüïú^9µù¿ÿáÿÎÏş‰ûçÿ½^ß1Iö4G÷¿÷ûî¶şøİêkÿMşî^³KÙ¦ÿ_zOw¸÷·ÅëW,~üíÓ¹¿}ß¸»ºó}Tÿ×½¹ºÒº”Õõ´ìÜ•|-?]Õçòù®ô£ûzHß¯d¢møùö¾Š­}vïÿÅ¶ß6ıGşÅ7‚w»Åâıä«"¡MŸ¯›¾ÿÓåŞ_5W'İŒŞM€®óí¥÷«¯>İßL²=eæ[¹oÙù»°ı,{bùŞ÷ÑÓeÿúæM×[—|Ë÷ö{o.ÛÿÇ{™û»˜úÖŞái'ÿÓÒÙ÷
ÿågwöj;¿sŞ÷ÂYœĞo”ı|·çïße¿Õºï¯'íÍõş¶çì(Û¼¯¦úêœ­ı_òäo®½Âß]sßC3¦õü¿ù—»~õ…ş~<Úo×ùuï‡ê<ùĞfĞ[§şÙ—›ú(‘ÕQŞèîVE‡zıú‹HrUå¯I µ—1ğËÖ{²¿ÒôÿF:›×[¤»wºK§­Ö?·çsIù]Ó9;sV_ıÉ­q3}WŒìî¢Ÿn˜§ıà¯­g‹ÿ¿—¦VÍaÿ[¦©óf•/]¶rÙ¾ÙÿøÇûjÿ|û÷çFªînıéÿgòî­ôæ•]ñ\ÛëÛw[İ¯ÓZïü~î7µµàÑı_ãß[ÿ‘égÛ¯í~Í§§õ§-C|ÎŞóÜ5­óæUÔ½Ü>¿ò0Öç½ùµÿnõ^7Ë?õ{R»T›4Ïì´ßßßË²ÃWV›åîãß¾Öêûiößïû¯ú÷ot=æóùwş?}ggÿ]ÿŸ_r÷´†é}8Íü*¯w{›¯õ¿›½şŞì÷ëéë¬÷_o~kÒZïÁõÕÆë¾ù.ïm×]¹³ÿİ©ì­ê÷|µëÛûÍÿîM_¿ÿ×ıëşŠµï©İ¯mûÿÔïñ^öz    }
          });

          return formatRoot;
        }

        function wrapAndSplit(formatRoot, container, target, split) {
          var parent, clone, lastClone, firstClone, i, formatRootParent;

          // Format root found then clone formats and split it
          if (formatRoot) {
            formatRootParent = formatRoot.parentNode;

            for (parent = container.parentNode; parent && parent != formatRootParent; parent = parent.parentNode) {
              clone = dom.clone(parent, FALSE);

              for (i = 0; i < formatList.length; i++) {
                if (removeFormat(formatList[i], vars, clone, clone)) {
                  clone = 0;
                  break;
                }
              }

              // Build wrapper node
              if (clone) {
                if (lastClone) {
                  clone.appendChild(lastClone);
                }

                if (!firstClone) {
                  firstClone = clone;
                }

                lastClone = clone;
              }
            }

            // Never split block elements if the format is mixed
            if (split && (!format.mixed || !isBlock(formatRoot))) {
              container = dom.split(formatRoot, container);
            }

            // Wrap container in cloned formats
            if (lastClone) {
              target.parentNode.insertBefore(lastClone, target);
              firstClone.appendChild(target);
            }
          }

          return container;
        }

        function splitToFormatRoot(container) {
          return wrapAndSplit(findFormatRoot(container), container, container, true);
        }

        function unwrap(start) {
          var node = dom.get(start ? '_start' : '_end'),
            out = node[start ? 'firstChild' : 'lastChild'];

          // If the end is placed within the start the result will be removed
          // So this checks if the out node is a bookmark node if it is it
          // checks for another more suitable node
          if (isBookmarkNode(out)) {
            out = out[start ? 'firstChild' : 'lastChild'];
          }

          // Since dom.remove removes empty text nodes then we need to try to find a better node
          if (out.nodeType == 3 && out.data.length === 0) {
            out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;
          }

          dom.remove(node, true);

          return out;
        }

        function removeRngStyle(rng) {
          var startContainer, endContainer;
          var commonAncestorContainer = rng.commonAncestorContainer;

          rng = expandRng(rng, formatList, TRUE);

          if (format.split) {
            startContainer = getContainer(rng, TRUE);
            endContainer = getContainer(rng);

            if (startContainer != endContainer) {
              // WebKit will render the table incorrectly if we wrap a TH or TD in a SPAN
              // so let's see if we can use the first child instead
              // This will happen if you triple click a table cell and use remove formatting
              if (/^(TR|TH|TD)$/.test(startContainer.nodeName) && startContainer.firstChild) {
                if (startContainer.nodeName == "TR") {
                  startContainer = startContainer.firstChild.firstChild || startContainer;
                } else {
                  startContainer = startContainer.firstChild || startContainer;
                }
              }

              // Try to adjust endContainer as well if cells on the same row were selected - bug #6410
              if (commonAncestorContainer &&
                /^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName) &&
                isTableCell(endContainer) && endContainer.firstChild) {
                endContainer = endContainer.firstChild || endContainer;
              }

              if (dom.isChildOf(startContainer, endContainer) && !isBlock(endContainer) &&
                !isTableCell(startContainer) && !isTableCell(endContainer)) {
                startContainer = wrap(startCon×oä.T÷Ù}ä×ùûœeÿ_ü¿m?®Å¥v®}ïOgúõ>9®>oM˜¿ÌsJÓ|ßó0ÿ=hMsèšæ>÷ş£}©ÿÿçOî]~-ônZwØß‹æmwû®Qu×¿ÿd‡}Ş›ûågyíóÿ¾Î-wßÏòI\ıÓ´‡~ßònùKş„BY‚ ñ@BDÑZKRĞÀ!p@p3dCùA°Š† PÒ@8ZFâJà‚ #œ@‡âEªÎ
!j,PP§”ƒù oBvFAGCJ Òk"`#p°°B<a‰p2>P8WV%b+V2¢D (˜,U @,Ä*œÉˆƒk±bŠ¨ 2œh€hHÂ”…å°ˆt0pßÀÑŠ+)yŠÑa¬NHèÈÀc-©8gÌZD,-#'Èˆ¼G…Q° é BÔ‚5‘ô°SÄÃfò†…)² |T©›ğ””dÒğl¿oÛ¾¿ÿŞuæ?›tÿÿŞı'íeúçöş×òı2«ïºÖ£æ)oëüšûş·ÓßıUk¤«·Ò¯Ùÿ–ÿO÷İıÒiµÎ{÷÷§n—O}Ïnö®r¼ï?3ëŸ¿a¹ù‰>ıÿ¾#ÇÏõM¿ß}ãû]Ú¿®õ¯ï¹ù{Öw»Úÿ–ÛßşŞ€Ö  ##ˆ:TŠâ0vÑqBe“à¨&R ËnÆÄ @%ƒKÀW„ 5;˜@ÚFÚEĞ"Q”3–¸E‹‘ÏËjf­›r%vR‡D,3)gÈ@ÓÑTˆ ¾+c¸õˆ4!©ÌÜ &°”‰Œ†3€yIa±¯ß=qÿj­öşëïş«îwıŸŞÆºú‹O[¶õß×Zëöw?›)/éÿ³á»/*ê>şßWoß¯öÿoû·ÙßïïS]Óv¿¿m)iÍ×“ù†şçZë[şÓïıW¦÷·…nÖïîİ[×UöÕo¯ßwÿ»îş†çsg¿;ÅzÖwğ?9wWıËıßÓıÓ	ÿê×å¤]¬ÿ_{×íºüGşW­§ûmöOã]¶åîù;ë¿Hçÿ±£é÷­ Ï
_İïïëın¿ó”—¹Ã|ïóÛîp¶6¹“³ö‰kü_ÙäïşùŞµ¡ÛÓìÔõÆ7Ëñõæ_cšŸ×¶~ J'Ğ^9¢BZú„Ö!k„<<I ÊHÉ…XUq‡ö%u*=|	x$ a<• ¸#@g¨&9gÑ@SÁr p 
&5ájI0Ù„%j0B0bƒEeË„‡VBŠUP¡1Û•î*èßÛJû«{­¯Kå<ªÿ‰w[}¾ïşŸÃïZªùÌşkË÷µm¿ÿ^~±¼Î¾ÿï\üqºÚÍŸbÿõæÿ˜Û÷¯Û¯ÏÛKNšş?ÿ{ûû{ªå)oîßËî®÷Dï_¿ÇÑƒ?ö›Ş´ÌKæ,ûpüjm¿·¿Ç¾ô»÷îµµ»ıÿ’E €§
B2HÕdJ€—Åx ¡± (ò{$ô!f!T"P„  P”Å1ŒáB$IA* Á@l ME$Ë7.ñÑó ÈR@NtƒªEşÏ€„!¨q!"Dp€¡/©Y3©AJ2ÄMk¦Ş* 1	ÎX÷€âe@é¸0?(–
S¢¢ Ş V»$0¢t ” HåEvÀ&Hƒ² @	a   Dî¹x
° *	™2r¢D–– µ 
¢;ˆÏb8™@ˆĞ	7¡€9à“ ÑNFxƒÁ!}ÌÔÆ*¿*aÕ‚@ßãÉ¶6îÿıËÿßÑV_µ#ÍŞúìëÑv¢»{××Û†×{œ²Éí»ûøŠF[Ûxîúş~¿5?ïv·SÔùËşı÷şËrêÓûxÆ‹n¾ûÿõ÷/'³«»ws™ı?OÆ|¯÷§µõ?¿¨Úÿï
÷nÿİšş¿ÿ_pû¿¸´ïó÷wÙÑ@ˆçãØèÔÛ S˜ZğŠ²NaDÂXà´°¡fã:(çÏô C$—±t³GÂú!, Œ@ÔÅ`BE""YrE â  ¨fLD2·VJ°8ô‚Š€$!`—@Qè! m½\Èç•= 
 šWcÇígj¼¹õİÓùÛ÷ıı×¼îg^/ÓÏÛ‚»o3¯İ‘+¬$ÿ®v~ùƒûü¥×_ÕoíëMİ8Åëû–Ó¯MkŸó b=ïçÃùNËw¾jêÊß¿íïÅ×}&ıî/ñ»ÿ®ç_¿¢Ÿ¡ş§'ëOn÷¨³ÕßÛ_ÚËr¾Çg¼ûöÛ˜_ç¡ÿçuİ×Wï´üŞÎû{ç%…÷÷o«Í½î]3rüşúŸ÷Çõ_«?şïŒ_ëüÿÿ´¿×ğ¿_w{Üõc¶Ï³ø¢ŞùÔë¨ÙNæ~¹³ÿ_,öë=X=^óîÛvGügÏêÿ;éŸd}=Ï¯£ıKGù}¯+ÒÏø#s÷M¥Èï	Ğ…á01b›¹€ãı0A4@İÊÈBr½TÅ]dM	â€`;&Š
T zKè+¤Dèº@ •x¸h# x‡ CQŠ’  I€§M‹„ÕÇQ‹JMMÓBB…ï´Ø&aÔ«@çbQÿWßõî|Zwï†ì%×ûßÇá—ÿšºÒ-4®Æúqéo~ÖœÎ¼OÖ‹ûúxU<-ûüÎÿÿEô÷ôëÏ“¾{îy™ê?Óîêù6=Ïkö†¼óõıï·®9Õ–ußï¾–oüvß­ıM­Í?Çµûû¹ßÖUÙ]ü÷òç_ß£
˜æö¸ˆR²@s(² ÑCBáŒÃP"†5ö7G”$Q@T¤,†Fç’NB¥A^An%ù*®0£Q@œ° Ø…³.ä/F€€İã„Dˆy%ĞÙ¨ÀÛ1ğM`û ƒ CÇ… ¥Õ<˜G´:ğ	^¡‚«@Ğ@˜"`2>¬Œ)*@•ˆ*S–Ğ1*ğ¢B0ÙÅÑ#HäpÁ“ñ#  ”y31‚ÄQsdM-´ òZTB½GÒ	fâ
Áù ”*&SñZ:v¯ˆe[ãP°@IT†j$.	#ˆÁ "Âüe(0vF}¶î¸ËMk^{?‹úúyïÛß·ôë[»½‘ô#|Ş}e—y÷ÿë}K¾¯™©¦í¼÷Õ?röŸõ-Üväê+O7û×ÇTã³ß=}Íÿ½A_÷î»g/Æ¼ó|ßÿöÏèv´õ¶Íû[ëÒÎ½¡øÿıiwûù¹ã|Óßuÿ·{Q‰™9‡œ ß&<€E	Ó@Qğ €KÃH'3…B°€È‰¢ Ø@Ç|@ÖtÌ®1 ÆV, G
•°€øHˆĞ…*lxÆÓV`„c€¤ :„A5¬ñBDĞRÀ0ĞeQÕDm±Œ0õ#‘`†ö…$¦jÇôÎ¼ùßoxßwğé·ôÙŸ>d›®ó/ß×÷Ííııó=îµû¾ï¾ßèë¦~vşş’>Ÿ”ï…Õ)è“Q»ï¯ëßÖå÷qÛ½ğ£şÿß>ïÜ{öÆóÊæŸ÷ÿİ÷›óo÷ş-¯ûŸ~„ÿ›ôüo¾÷íÿoÚÖÓûß\³|øşñÿ÷î+m¿şşûeoö~úÏ?Ïõ°úŸ4÷ïŸêwúïËsğù´oÿ?ã^}~ø½ïW{úç#¾l%7Æû§íú?~Z+o»Óæß×şïßŞÿFÿw7³ÿ~¿Û•»ß´õv÷ßy­ó÷İÿó%?½¿ÆŸO¸¿ÛöŞÜ³'şÊ¸m¯××|¢ !§@IæŒÃı$1Ë–j‘JrWÊD@Í¢Å8WÚ?° å˜$6H1‡Ä¢HP ŒEœ©+ô)ƒAĞà,ñf@Hd“Å‘1¯èD!C¦FÉ%€ºÖŒGĞ»¨ª2ÕÖ…¥,§!§aOÀ¹áTJ3úLºÿ–v5îùî›V¾Ş¤İ|íãúÛ÷ŸqÛ»ß¿ş½ë&Ÿû?ƒ]ëıÛiß#Gàçÿ‡ÿWóû½ë/æ›ùOßùú)Ó¾¿
·P{¯¯ôWò-r§Yûıkzş5w}¥?ïWí»__èÖ·ßß½f³ÿ¾yå{Üşôõ±ÉîuîäÜÔºQÕ– ,3Bt7A"€®s!ç"×p`—z€°IKbj¦9Q2Š%A%±{0ÅBÂ ÃDˆ‚&JÁ¥ôÑ£’ĞÑ,
 ¢0#È™Gïp<sX'¡Dè>‰%TO¥°dƒŒ()™‚sCõ½†ì#¨	â«!:‡øÇT CC€‹4$ŠåfæaZ%Š¢1€—œ	ñ:¤1@’©‚p¡EA¡l+m3Ë^ ›„ /@'vJé%	ÔDRLúÖEW„¼Bj¡D„!’ì±*é$©Wcïõ¾êa[ñ¿Ÿ»ÿ¯35öÛıŸÁoÚ—¹ßøU¿ïe‹îÛoÿ¯ÿûíå0şÇ÷oû¿¶ßw÷ÏÒNúßÏj+[¹ŸÚ¾¼şŸ ó›ŠåuÅ:²ğİó÷º¿[öËó<û[7ï·m„ÔÈæÙ¢^wŞûÿO¹ûŞ?÷ÔĞRõƒ k˜zùÀö´£X­±ÅÜ°¹•K|—×)¡a+öØ ĞÂqÁhEq€H0™LèL°bbX
²ô`ÕS@¯ŒBG@Ü¡Y¦\€†$ô™'ğ1Q–Ä×¡%Ÿ@Ù¨5à†ÃÌP'` ÀQüıÚvçÑÿ-?²êwú{ßİTëê†?ûåÏ-ìõº•üÍö6ÛñïÎß—6˜¿Ó½ë’Ïı­çwû?çÕşì¤é¹>·ãÙëïıyõåÚÿ¼ıİŞ%&ã÷VÚµ~Yqæßö—¥r½ûô°vxâ‘ø»*Óï](÷ím¹Ô+¾ööÈOl[›Kö“ïªEÿZoçî{À¿óU÷ş®]^û¿RÖûÿÈ›½ş©úş¾xÖóvÿzû÷{röo‡VÖXGb¿3%ã7şùİƒùİÿ½¯×§o÷1­'ûÈ¯û÷<ınÿÜ7“ÇŸiüé[[†yš¹½êøïÖbíúÿÿÙ½½Í7Kó9Ã«–¥B &&ÕBÅ¤ Ğ€+@´E&	Ê@%³ •€ŒtO)paGI$ŒÒ‚ÎR	}Ëê‡ÌLÇ Ã+!
`an\£0Ç`¢I!6Â”à'b iø X½cd öt‚à!!0rĞ‚‹(†(¸¬ÁJ%‰ly(name, vars, node);
        }
      }

      /**
       * Return true/false if the specified node has the specified format.
       *
       * @method matchNode
       * @param {Node} node Node to check the format on.
       * @param {String} name Format name to check.
       * @param {Object} vars Optional list of variables to replace before checking it.
       * @param {Boolean} similar Match format that has similar properties.
       * @return {Object} Returns the format object it matches or undefined if it doesn't match.
       */
      function matchNode(node, name, vars, similar) {
        var formatList = get(name), format, i, classes;

        function matchItems(node, format, itemName) {
          var key, value, items = format[itemName], i;

          // Custom match
          if (format.onmatch) {
            return format.onmatch(node, format, itemName);
          }

          // Check all items
          if (items) {
            // Non indexed object
            if (items.length === undef) {
              for (key in items) {
                if (items.hasOwnProperty(key)) {
                  if (itemName === 'attributes') {
                    value = dom.getAttrib(node, key);
                  } else {
                    value = getStyle(node, key);
                  }

                  if (similar && !value && !format.exact) {
                    return;
                  }

                  if ((!similar || format.exact) && !isEq(value, normalizeStyleValue(replaceVars(items[key], vars), key))) {
                    return;
                  }
                }
              }
            } else {
              // Only one match needed for indexed arrays
              for (i = 0; i < items.length; i++) {
                if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(node, items[i])) {
                  return format;
                }
              }
            }
          }

          return format;
        }

        if (formatList && node) {
          // Check each format in list
          for (i = 0; i < formatList.length; i++) {
            format = formatList[i];

            // Name name, attributes, styles and classes
            if (matchName(node, format) && matchItems(node, format, 'attributes') && matchItems(node, format, 'styles')) {
              // Match classes
              if ((classes = format.classes)) {
                for (i = 0; i < classes.length; i++) {
                  if (!dom.hasClass(node, classes[i])) {
                    return;
                  }
                }
              }

              return format;
            }
          }
        }
      }

      /**
       * Matches the current selection or specified node against the specified format name.
       *
       * @method match
       * @param {String} name Name of format to match.
       * @param {Object} vars Optional list of variables to replace before checking it.
       * @param {Node} node Optional node to check.
       * @return {boolean} true/false if the specified selection/node matches the format.
       */
      function match(name, vars, node) {
        var startNode;

        function matchParents(node) {
          var root = dom.getRoot();

          if (node === root) {
            return false;
          }

          // Find first node with similar format settings
          node = dom.getParent(node, function (node) {
            if (matchesUnInheritedFormatSelector(node, name)) {
              return true;
            }

            return node.parentNode === root || !!matchNode(node, name, vars, true);
          });

          // Do an exact check on the similar format element
          return matchNode(node, name, vars);
        }

        // Check specified node
        if (node) {
          return matchParents(node);
        }

        // Check selected node
        node = selection.getNode();
        if (matchParents(node)) {
          return TRUE;
        }

        // Check start node if it's different
        startNode = selection.getStart();
        if (start·ù÷Ú}¿'–1DkŸO‡gû?Ïu¯«ÛÖw’ßñÿ~wÿïİè®ê?ÜöÚ8çF¯Eyü÷øw<ÿıòU-7×Úøïl«¸ÿ—û'çE÷ÎÆªÕAÚ/t¹ÿîÓE×kÿÌö÷İŞxù;ëÕıõ{õv×&‹?Ú?ıö–îÿş\ù«×@/-4…#“µsÄe ñr”m¾áˆKLï-%àPœñ° 'ÂW› q½UÔÖ]‘
54¡ªÇ@€p P­`xÕ*P¬ À+F
É³ÚäTÆ8„ƒAÊ¤¦@y%7AT#é56Hˆ½N²£èpAe¯áã(‘… À>M”ˆˆ$íD‹}@S!ª¨#´.¤è(‘eG`†¡"DF,ˆ3rQP ¡@ë©{]a >‚è6€¬	aÑC	ŠY€ŒcH	ŒÀ‘‡§€$PBˆ:H‚-)„”…Õä>kçüxõCñûîóuùÜûÿ¿úóùîş÷ãÜÏ[Ï›G±mš_ú·Îqäï›u¼ÿÙ,.ô´·ß¿÷åÓNxUo´Í›>ÿy:?™qV?oş¬VcÍï·§;ş»-ÿp’ƒÆŸÎ¹³òr×úıİM=Hè}Ö_»v6ø|aG˜î„^péƒŠUùBäåš„I èÄĞÂà
3(B%<É> ÌV\­*ÂYõ2U êÃPŞöbˆc˜7Á#`Ëb €`O”,E– ió8Êl èÀÄ
v(`8Â$-—0¸@±VS”øEç‚lSÀzVâıÜ»e½|ßí•(//çşYùÏBRûïÏJÿ²çşÍµkUÚ¼V}üÿ~<ú-‘íüwü•¿Òw{÷wŸ^ûeVÇÛÑÛj;³Ş¹'û§¾ı­îó­÷ä¿şŞÛİüx[üWî—oú_–Ù‹Òi?Š½¿>?vm¾Ÿm›3ëvîıÿ¦ıòÏôû÷İ}¡¶Ÿo{ßûÙ·=M÷ï³_óìïÛçG‚ëÿ=òî‘ÿ'é÷ÿñè¯~ëş÷Drvrôûß’çÁ·™é¯]³Wÿô¿+hàØüßõ›}yúúáóÇÊÓ÷Ï]eÍ|u§¯Ù}{m©ŸıÿTñ§¶W}íÿ×Ûğİ\ôí×¿ûŠÙ	ÂOèj°2‚³.ğÃ °#ø`7I("
ˆò ‚“L£‚SFD/å§‘(¨,Fq ÊcâÌ6bp"!(n·
"ñ b9ÁÕ,#MF˜ÈóX ¢|*-èM$øh	ĞK1““”p P`BWê³¿ş°ÿï}±ÿ×û¼ÿì½:¼oÒÛ^ØıøØßšŞ|«÷ı¦¯¿~ßüoŸÇ·kË°‡€¯ùnÙ«àÂ·kSXİŠşa?şä›Ù,û¿Ş}gşë;û_»¯÷£\½ŸÍé3·gÕs¾mİıFÇ=Ï¶õZ¿®ŞÎşeß¯=>Şô^ÉO[‚ä(šÊ2£‚79GAÈ(~Ğ-9¢ª$“Q€P| ñ 6w8  ÔH\iW    ˆ„*pM–ùR8QcÀ¸\Bˆ1ÕŒÑHè(¨Â„ğÇÃaæ§Qp‡L\e—ä`
(´f ¨BX6)’änÔš*!VZ=J<ŒÍÑã@è	tp™ES€)vRhSvğC ‚©áÕÀÃb
298DbÛ 0Ò$RhD¤`I!Š% 7‘«ÆÏsÎ¢Ş‘ğJ¹`ĞLªÓÔUo’`€b5ğâ„#¨Ô`p¸#3æ3ışÿíêŸ*owÏöªıòòoı=ßvé~7ûöÈûÏ\î×î^™òÚÿŸ=½·¾~¿±¶Ÿ¼îñøc7ÜÕ?ÒíÿówÔ¯îş~ÏéË×ı¿ÁcıçïïõÙŸÿ·¾kòÿOÿÆöäûßù÷ß3,ñ}û©Nİ·Û½ÿİfº^ï6ÿŒ ¹(œä7ş@dJ„‹Á0F¨ZÜÛ‚‘‰	”*—±.hŠä¢ÊˆØ¬Œ0Y2mğvÊAH
tàÕ…¥I,<”O'ÉÄ˜g,zÖÇ0HE9-!A9D"NîâN˜„Añ4aˆ(ATæ-J}§ı›ÿûşğkü‹ãÿş÷vïï×ì…ï;§Ûß×ãİûÄ—øË^º;¿ß$4KuŞßÙáwºŸlïËÇ÷Sÿ½ûÓGy¿ÿ¤;ÜÏ¯rËÿŞ©º1®rkŸö»“ülşÑõLúQ¡N\üØ¾Uıæ(ùÏlöİûÓ×q÷¯îûµùûıïöŞ;äÇé]1µå­©}—Ó³ÿ>ïŸ‹<È}şù½ÿêÿy¹‘ú½šúıEÍ›óKÿô~îûİ_ìİ÷	/X¾{wõz¹ïéıú~¿Ú¹4»ëåî}(yşöŞş¹Øl~»‡¾k§¿Ù÷•–ëõu»şşÇrÄ_ÿ4ï×—û£»¦ÏÙÁî_M^ìó•+dü²hjÅ\ bƒ²›+ë Q 0dXS©ğ1 ¦±'šA+H!A…V‰
@P`Ô ¤:"P˜k$H´¡Û@*:_TVbÂNÈœÈz hjøğ6N<BJ0©  U fBRÁ™`gFe"ÇîéÎÅìşË“í¾ÿ}<ŞÎøüÊşÿóß£ìØ~›‡‘Ÿ~±öûşesğî¯ÿXº÷õç}ßõïÍø—ïßæ¤f¹¯şsøU÷yy·üsŞ[ğ÷û²Ö‹—©–?^ß×/îWXçÿì×DÏ[“Ù?ÌÇ_cv¯VÜËñ¾ŠŞÿËfãu?ïjıp±Z9¦X¥³ävel“’S
J¡ +¨6pKNwMñHĞ'’ &}ùÅ´ Â¸æpX”Kâóõ`b‘]#}»#Â²3ôñE€ •5§„!– 2%/ °ıÄ jH €q4"Iv’¢ˆc½ ”µUcB/ßOKŠ:CĞˆ•	€r„€A¨ÆÆ„1ˆÈ,
ÂAFÌ™"`2µCAKLnà.‚=ô†Y Ú{ßw€+T,°+À'8v‚v,,ª´  áàSÔXPdºR/JÃ"»supB@‘,)„€ğPÁa=WØo}‡È›®œ¯uè±k¼±_v?×şê şUıš–å÷ßóyı1{í†?ŞeÖzûf†×¿~»x¤Íï{ƒ,3sş?¸¿XrÚ~ÜÇ<×oĞKhûïâ+şœïçìñŞ³¾ÿ?á¹/µÓ‡íøñÅi'÷»{×İòo®—?ÛÇg«-!€´J
!g•ä¤a;aÒ¬áèDK0æ P 0$Lav+	'´(	§˜cM! ‚ê’/ÄpÒ  +ILŒ€@,Œ…ô`r@,0×q@Be(¹ œ ÖĞÀ¶”XcáFd¡UZ²µF¦/T –d‹¬<EÕ$_\÷üıwNÍH+Âë|<Íıå¿ŞnøŞl½÷ı¸ÃOçÒòÇéïæñæöËşyxıÛ—ë³ÿşßï.ûÍÿîõ'eÉ_Õğ¸¾_WÔî\¾~^ë×ÚßÏm/Ö‰×Mÿwä®?Á/js{İİı>®Ûoyÿıã÷Û\ÏíôÇœ›ÿ¿Wç¿ûÙıŸ~;ïëÓ½ßzışa{ş­q¯×ëşşï§õ1ŸâúgÙîûwßş·ïÙ¾7ÿ»zç¯ïşõ­èÿ÷cÿûï½{üŸÂ³ËyùşûÊ¾ßn¶}Úé×ßÿ—eß®Öy¾çÿx;åù¢Øôî¼õmÿğ-—õÎ½_ÔCõoÕûî÷~ÏmĞ¦Yj‚ u¼•eP äµTC@è$‹"0É6Xx
Q4HX)hP¤Pâx¸a·%¸,ƒ7Šò–‰ï¬à¾*lA•ÿ+ªƒ<†P3ñeLC$d‡`yïs…¡B1&
5¾¦ƒB„4ßWs¯õâ^ïÖÛ›Õ2×ª¯ı7ø}ı¯}ïöıknÿß^Ãv›=MòŒÙ¯{y½¶1ú·Û=WïäŸoûº_oïü‘oñÛóşü¿üß:¿ßûöÎši=åô—’ı«õ»£¼çßëçåßïgÿšçÿôßŞûıÔÿ–G<o{¼.¯£ñ}Ğ»×Ûùöú›ÉŠ¨âÈYOÅ/˜%kk?ÚA\H-ü›‚{Ë/Q^H¼Ğ¬|<Éµh!LœÆ>4‡jQ_¡A$ ŒY½ôsE‚¡m
 Ø±(÷ÀÉK	LCÀ
JşB ¼œ Œ  ô‹	€È¤Œ¶@b: E@“¡P`œG T%¬ÑF¸X# è!P™€F8ójöTŠt:ÅHàíHÈc88Bx¿8¡aÇÒMJeŒ0p2AFø×¼ ZŠ‘‚@ I
´ £lÂŒ@5)GØjeÅJ ü¥)‡:µJìë?õûïteÿ(ıŸpíëıy«}Ÿomßÿã®ù†®¿Mße±îU«÷èöõÙÔõzüxöbüö¾oşñşé¾qŸÑú_¯ú]÷ÛÇ›sËĞ™]·ï§çY¿[}=___ÿ·¾/ÖV´³¼½í´s÷löî+ß»Ö–ÿ+;?s·§D=R€q|´31¾5F$(ª<¡|¤QÀ:,"Í?ŠéDZêåS$â¡FÍÓ˜ÎhA-Á²PX{£¤ Ddàc”\„2bÅpw‘vK ÂÚˆXzœ!æyBuAËÅ)@k#Õå3IT3 ğG;!¹¯q4åM=ùO»ìÿœÑ½^»ßeøıpä÷Œ½ïèÿSáßf¢½èıoğs%¥İÇgîní½ûçåÍ¿z‹6}Ş{¿1w¹¶ùıƒ¼ı³±´_ÍÒµ½å×ıÏb·ãŸs¼¥î'ıOlµßz]ò?¿ûŸÓÑ¤oYÆŸÏÊïÿö—²ùÿÿğŸØnYkºõÿ|õ,½×ñöîşN÷Oÿÿşe÷x™Şúö¿ü×Ïí·®ûßÏÍGÆÉ­¶–oíßâV¯ï¿yíWûÎÿùûÿ³‚éñ;êıÿ×ï|óV+^wbŸ?ïÛ<óOÿïÓÛŸ§¹¿nşv{[ïüÿ¯êÿnı×Ôvc×xòõÓ¸¦r×9>!–N?KQ… ÌJ€Ëä¡+†”Æê‰êÔ`±°Šr¨q¦Š™ `/«y‚ò,ÉfÄ`€- €m ‘ Ì—| „äøtCÑM€@9•üÀÖÆ©‘]FÂ>#fÃ *š‚,GŠ‚€›,$‰ A\\¥ã¡KJ”%-T9¨(á«àAUHPğÀ€”à†QR‘'­Ùa$ H¬™‚A41 VEpP\Ä(Á`9hD'Bà´% cp,B’„BàEÄÔ¡!qßùNúıÏqpi÷º¹ïÛ¹_ûwûò¯¨¿ŞYüÛ“_6ï×™Şº®•w}­¾ç÷ÛÕ¯å4üÿûÕó¹¯¶ÿ/çr¿_ò£œÑ·ÿã·³äGwî=Û-¿Õ¶şáGı×ß·ÿÒ;ş>óø¸İ»§ÿ9´g¼Q“MşÿÚ²û^®ÿº§÷OÑÿ{yïïØ§÷ÿËöşÚğu·~—æóót¸GÜ}×|ëY–w=ÿ_®®|Ñ½ãş5Ûı5Në>·ï_qÙÊı8wûkñãÿw´tóŠ»ë­{æşktõv¯7Ç¶ıgşç‘‘]•½Oû·¥ÛèNÿ¼ºß¢îß]Uóôíôçô~5±/÷\]fßßA€"â:¹&“"BÀ4Æ†DHÔT$•òˆŠ¢‡V€•RR ûVHŠ(`I-hSÚ¥ÁåÉà…M4˜à‰œ€¤ÌX£v2mpsÈ ŠdFè;`Q(@R¢ª4#
 .`´†WÈ¨,,~n×½ÛvgûwÿvÿÿíìÚçõÆV÷ïß1¼?ÿ?øÿèİ|®q¿Ê{œëÿÜÛ¯{¿¿­÷ßıëíô«§ßÌ¤ıÿ=§sÿæûNî½¾ÜoÄıÿ=ïıß¨÷öıúè›]è?3ù³}[¿û_œ}À½m;ùf~~IÿÊy¬\ÿ_…"åL!šD…×fÍ N`Q:ì`!²€ñ
éw¥‡„V}ÅÛ@u†~ø„ŒÆÏš3¡xy«˜$Á*µŒe\ CT[/nXd¬X$…”™$â2 U'Œ rSXKÍÁ èLv$ 2 “ˆn"JØ7Ñ`f?Ü×éƒ@È2S!Sƒ°^°¢ph@
  $PUZïõIÀU'‚‚m@Ä@E MFb D„Ác(’	°$‡¸0­¡]PFÓ>$°Hë¯(–¨D M„„V…&× ÍÁM DP EM8ÔDL¦»ŠÙ—áíÿÙ{Ä¹]ïîûk­·ÂÏ{nÃÜWeÍ¿w÷öŞ™Xã[õÿuın³ï5{ß½ÿ/·/m~ffım?¿}n|ùûŸİı›ëéì©ÿïwEwß~şİ<¼şÛó÷¾éìå¼İ÷Çÿıï:ı»c·÷9ëŸÏÿãÿù?ßU{ïŞØ}÷Wa[¤b$94@,BĞáÁÅ¥ ‚æ hÆO7U*`5TÔ±ÊSÏ¤
0ÀJúp9H  Èól‘ŠbÂ¡D&.º¢dl[!B¹”½ëÉV¹PtY€bÄ`#DªÅ”l‘…(P¤FF³^õTA†‹Şÿßóşÿüût#ŞæÜ˜ÃÜñ}¹]*Ûëßoüø¾-k{ìæïŞÌßoµã'½é¶{—üÎóŞÿïã¿óÓ³4ç/]ş^¶_õóûmx¼wÇ»òÓ½kÿ~wŞû¿{ÿñÓ¶NÆ÷_Ô_÷k²;ïMSÇ>n»½ş2ÿı·"ïïkh÷ã}sıÏ»×_¾÷õ^[SŸ_ü,óÿ_øää£vÓ¾Oı/ç}ÏÓ÷…¢O×şï}uş"_š¾½(u2ŸÏÈw¿ÿö·ÎôÏı\S¿y§ï®Ï0Ê/»=ÛUöê?ûşÿá_ÿşŸ¿ÿ½÷ËH7=WæyÏhå§í­ïïfOïşZ7wş¾-¾o/×÷ä‘’"Ã9)40ˆ˜@@P0saHp¨;DòhAdÄ PI2£Œ¬›°´á­=¢ÑGF #µ™äàŒOŒ DœË0šàN€d§4PH¶ b1 *(@	mp—)´PĞ“#¶$0: $†P„OQ	Nuıü?.ö¿~˜7ş¿Ş_¿i;ı,÷t¿û¨ñü­İo:Eÿü¼ß¸¨/ßĞ›õîí¾&ó‘g¼çŞŞçÃ9/o×Ÿ3gmßõ­ü»Åx©û¿•×<ûÿ}ı¿¼÷¦ûæ;Óï×÷›“éÿÔû¦^D­j_v½DsôŸõ}>ó'_ Ù0± Mdær›ĞÅ„¸‡)€MÔBúW€.Šh`B46Û ¥†êÓ@_‹B#äp VÔD¾ú	‹h@A–€W©¢ĞŠ?@Ä#ÑMLc&:xQ¦ˆNJî G kp† ñÃ
@ÈşqÌÿb$Ä‡ ¥Pi-I©`„ 'Ø$#€`(³ÂFH$a—A¾ŒCZ°³l€(íA°Äƒ™ é€ƒ„P"$¬!45eX‘ACBC ©éH	XÈ’V‡ƒTJ!'¨h5•qEÆF:…À+©)ü5i–P²Ç9vö;ÿi‹wõú¹»Œ¹Ä¼îû=¯
¾¿œß¾Gå?ŞœôGtôçòÏ£÷ûtÑı]×=;{Vÿ½îö?g§×}ºYŸµ®mïÏÉ¹§ıï®»Û_ÿ¿ÿ·ìé¿{ÿµÿ6úïc½İÖ½ÿ‘¥×ÿwçñ­«'ÿ½şX×sr~ğ¯ï™wï1œ.åBÀb  %4‚J7 S€pá•¾dLg‰¨€–k¨ <*4Pä	)¢‡LÑ„2	2I,Â˜ªNŒO‚"bø†aÈ)µP@‰W@% B ‡G )Ÿ!€%ˆªBŒ•XD)1£0¦›@¿¿Ÿ÷OÍÊ†^ÿç__şÙ8ÿçïıÕİç7÷»õù{øûfçOV;ÓnŸ$¾ğ[¶¿¾gûÇ·×
\×÷v¾ı/ÿ{ùÂuÖGñ¾»ø÷áÿçÿKû¿Çí]pıß}¹Ÿ-ËÛbó'®t¼ÿ÷|_ßßê”ÿG~;ÿÇÆ»ÿ)‰ö9ß3»ŞÉ¼üs¼_ÏXç¹ìÙJİúõ^»òËïûí}ÿ÷ùïı¯ñä@x´ÕW^óŸ\¹QÜßËèç·Ôó?ÔOöö³é£O¡üßÎêÿü}şşs®Ë{÷÷òİİÛoù·iz­Û­÷Ãõ=ù—§~×|ı{¿<Fæ¿ùÏü¿ıÿ•ºD„G/`0¹ ®×&`È·HG8Rˆ¸ARFF&4AVŒMcT@,8DVúen`F1„ (efS	B0€äÀA;j2J,ˆĞ^¯ (• É0Jb£Õñ@t=ÜÄ\ "<‡Mƒ& *?Ûÿ¿¿ö½°ß=}füÎ9W–õ~çıçÜ|ùïöß¼ş¿Ê×¾?ÕŞŞÖŸoş»»û÷IÑã½}Î/}«ÿû÷ÿæÌãeõ¾ÿ“÷=úm7çş‹¾¿ü?|™ô?öç06¿¿³¯½ÿø_ßèÖgûw•ş23?=ø?ßöoïyß½ÿ>ˆèS…Y£tÁ7€R ²¨† 8 B ®á˜´@Ñ‘ÔÂ6 PPŞLĞs­R˜³a£ÑàŠ»ÍFŠÀà®œ0móUqDEH4O‚r6Ófx†Ã-FÕ"R0DxC‘€!GÂNJJÔn”¶J=ÊHÄ…)4SN†ğ„P@ÒˆÃ	AT¦UQ‘y=
¼Á„j(H…Cà•>Cbx±}e!’à$ì“'> ÂÁ%fêšLIeLĞ²‰`Åd°9Á¯($ƒÉBQ@@2Ñ)mèh¦@€OQ è˜)7~{-¯ÍOü½§kûëõòŸ%CÛı÷ï·SÑıĞWÕÎ™Ùrô³Kıy×ùy~·İı¿%3ÿcö—o'{¢Õû÷ÿŞ<şÿZàûÿş·¯Hçùº½î_^¶÷½ÇãÕÃAöõ~ã÷İm1Yïğ÷Ø—?Ôùíß¸û¹³_×ÿ¤Ìóß¿"ƒR¦:ÅH%B£Ê”LgÄ"‡,€FB B»ÑDA@	D' qÈá@
wœ“’4CG¨ì0EB	@±½¤àp¢Kˆb²)0°œ1’X²6$€A¨
ĞÖe ™¨ÈTM€ ‡01ÅD w2¶{n}»İöøgåî¼ÿ¦ÛóÎÄiû`Fó†lİÓşÿ7Sû}^½ß3Äï×{ı¿}°{­ÏÏ¶±xûæ7^óÛ·™½î¯øÿÿ¬™™ï^¯Ë?¿Sûÿ®ÿ{{dmıÖ·ŞfßJß­Eªÿ]6ç|gw]n—Õÿßúgt©ŞËÿü¿ï­Æ;âwm¿ftów¨»¡=ŞáÖ_Ğ¼ŞÂ¶‡Ëõ.{–YïóïN¿×ßwŸñ‹şóÿ½6ÖñM^}\ïÜŸäw¹j­ñâó~×XÿÕ—­¾èÏkÿ´—Ÿ×êşÿçûµ›æı-½¯çÚãOÛğÙß}ä½ş¾~ö;Í-÷íîg\ÿ·\şíôççwÕ2"†òÑb%	16	ª %´b”+!@8“A€¹@Cu@@ÆF#5„òdâÄ‰2`h‚‡xÓáMçœpmŠì/-ğrSbT„
ø-À}>fÃ4’2gùÁ&
Æ3L†ê'9B’È„!v^)Ùù:+“Ëğu~·ÿy{}’¿fûÛxı¿{ş?]÷¿sú÷§?ïØ~&úÖZş7»wÿíüÚwş»ÍËsÜú.«şıÌû~½Ó½p¹ıFÍ½Ÿv¸K\Ì>÷êıÿ•Ïü¯»{ı7_°?×ıêÏÎÏZVG:]èÿÿÜ/Ÿİ»Ú†÷·{çşÿ¿ÅHÈàÆY0QmdZ KDĞÀ£B	` üeìŒLp² (´Œ´Hš\…€Â’„ ¤EÔ!™®@ÊªCbİÓtà1å'„„àP‚èáê(L"”@¡‘@°"j­¡sÁ„H(0Œ °btˆ 2à%L%S¹%’€ÎÄ00Gà>Å U¢4o@¶È5Jm@šz!´HLå^db\d@
Øğ„A?f
 ¸òBÁF«ø#
"‚0QO´‹äƒˆƒÙIÍ±hh ` 7•Øpë °@•ÑI
†AŸ¶Íÿúk>·ı»ÿİgàfß^¿}Úo÷ºqœ;~»¶ÏõİfúíÛ;¾Úş„»sl?aJ¯5o×ùúÄ?¦=_~‡XKàú}{]ï•š~³İ÷3şô—qÛıö¯ãıƒy÷«î×éÏv¬{ë×ÚˆNu¹ÿøö™»Ÿéÿß>ÿ÷µ, name));
        }, name);
      }

      function applyStyle(name, value) {
        return Fun.curry(function (name, value, node) {
          dom.setStyle(node, name, value);
        }, name, value);
      }

      /**
       * Returns the style by name on the specified node. This method modifies the style
       * contents to make it more easy to match. This will resolve a few browser issues.
       *
       * @private
       * @param {Node} node to get style from.
       * @param {String} name Style name to get.
       * @return {String} Style item value.
       */
      function getStyle(node, name) {
        return normalizeStyleValue(dom.getStyle(node, name), name);
      }

      /**
       * Normalize style value by name. This method modifies the style contents
       * to make it more easy to match. This will resolve a few browser issues.
       *
       * @private
       * @param {String} value Value to get style from.
       * @param {String} name Style name to get.
       * @return {String} Style item value.
       */
      function normalizeStyleValue(value, name) {
        // Force the format to hex
        if (name == 'color' || name == 'backgroundColor') {
          value = dom.toHex(value);
        }

        // Opera will return bold as 700
        if (name == 'fontWeight' && value == 700) {
          value = 'bold';
        }

        // Normalize fontFamily so "'Font name', Font" becomes: "Font name,Font"
        if (name == 'fontFamily') {
          value = value.replace(/[\'\"]/g, '').replace(/,\s+/g, ',');
        }

        return '' + value;
      }

      /**
       * Replaces variables in the value. The variable format is %var.
       *
       * @private
       * @param {String} value Value to replace variables in.
       * @param {Object} vars Name/value array with variables to replace.
       * @return {String} New value with replaced variables.
       */
      function replaceVars(value, vars) {
        if (typeof value != "string") {
          value = value(vars);
        } else if (vars) {
          value = value.replace(/%(\w+)/g, function (str, name) {
            return vars[name] || str;
          });
        }

        return value;
      }

      function isWhiteSpaceNode(node) {
        return node && node.nodeType === 3 && /^([\t \r\n]+|)$/.test(node.nodeValue);
      }

      function wrap(node, name, attrs) {
        var wrapper = dom.create(name, attrs);

        node.parentNode.insertBefore(wrapper, node);
        wrapper.appendChild(node);

        return wrapper;
      }

      /**
       * Expands the specified range like object to depending on format.
       *
       * For example on block formats it will move the start/end position
       * to the beginning of the current block.
       *
       * @private
       * @param {Object} rng Range like object.
       * @param {Array} format Array with formats to expand by.
       * @param {Boolean} remove
       * @return {Object} Expanded range like object.
       */
      function expandRng(rng, format, remove) {
        var lastIdx, leaf, endPoint,
          startContainer = rng.startContainer,
          startOffset = rng.startOffset,
          endContainer = rng.endContainer,
          endOffset = rng.endOffset;

        // This function walks up the tree if there is no siblings before/after the node
        function findParentContainer(start) {
          var container, parent, sibling, siblingName, root;

          container = parent = start ? startContainer : endContainer;
          siblingName = start ? 'previousSibling' : 'nextSibling';
          root = dom.getRoot();

          function isBogusBr(node) {
            return node.nodeName == "BR" && node.getAttribute('data-mce-bogus') && !node.nextSibling;
          }

          // If it's a text node and the offset is inside the text
          if (container.nodeType == 3 && !isWhiteSpaceNode(container)) {
            if (start ? startOffset > 0 : endOffset < container.nodeValue.length) {
              return container;
            }
          }

          /*eslint no-consîéoaşÜfüşáoë¥2¤¥ûÍéï]Æ³?{¼êéñê†w=‘ËŒï\EgÌ÷n›·A÷öÁÿ“’|hw[º¶kõO°òµô¯ßÍìÑ3fô{_ÁÇĞ_şN{cgöÒ¥¹µ×uKAûÅ|.÷¿ÿú›î¯üÇÓè6«ùbòÌ?Œ>Wv^íÑwß×”ö¹jïï÷+kÛûÔÿtOÿõ÷ÎDï~sãküÉbÿâS×Söæöñî½jåáıUÖ÷û­ÿfûèßÂ}‡«ßß¹÷—õ¯&İÿıßl®ˆ£Î\¼~•gı¿¼iïÕoêüÿ7mİ3œüİ÷¿w›nö>ûù_?OoúıÍo»Í¼½EïİÔÛ={õ»ûÚç?õŞ£÷÷H>í«ßıûÜß—¾bOï»öãûh÷û}k»wsh÷ä>éÿÇ÷ÿı©æîµ÷ş¿Ë§2İŸı_~ÿÚœ÷ˆ_ïóïöıGWğÎç==îÏøúê—ÚóÆ×1wj‰¿ó›[Ï>³½Z£³µì*ùÿi½÷Åø³ö;£í;+ç?ıo·/ºcå×Ú6ßêí×Ùvò÷Øúwğ[ğ‡½ìÿ£úıï½×måŸö´w}o½ı×İò7ÆÓÿãø¼ìß,éoÚÛí¡c~Üß·wù='M{óĞı^ïÆÎ-^gÜÿòüöq­œÿçıª÷óg´ãô’–t“é÷Ÿ÷{·Zß>ÿhÅ­é¿ÿnÑíz3ßûÿà œûjô»ÂŒÖµö»ıãTîØ^/š~Wß™ÍÎş}¾¯ó~ı×»´æşss}T×§×cÿÚ­?£w®}¯{w­ÿ¡vı­ß÷úùú¾ËÙşûÿ?/ZS?·¯´[{÷açúWj?7oëøŸ[}÷o§ú;êÏ]–>,ö¿óŸ›ÛM=u¿[¾Ğ~?îèı:õºJÃ37‚Úòz¿ØÙ¾çZäş÷ë¿×öÕ›#ˆÿ3ßG[Õğö×ûÜ³ÔÛf÷¦\òÛëùÕÿmßL§óöî‰×{aûV8Í;&÷çïş÷T®»õ–wê\S¿}×{šõ7xõ“ğ·ßşøıh×÷;Şuß/şûÿá¿¼ÇÂk_éßı3µ©{ÖY}ÚœåàÖŸynæı÷ñ4üörÍçş•ÍÌöõãşÒèà;xu%–ì‹ùCßïÜÛ}|şàíöv›ú»åi)yÃÿcî~	_tëÒœyûûÒõ¯ÿìıÿ]_/}zËşÍï×ÉŸüïoüeFÿà‹§µ}Ôûo÷Ëıÿoÿ$§Ÿâ>fóİ6|}ôë™oËº¸Şæïÿù§´^vW÷ê¾3ûßXŸôûşÒxëgßî§ÉıâÛ|µóŸßõã‚ÿá7Ïıyy%wüWıqğ³0Åë/µ^ø¿µ¯ËO³_şïînü|gù©·;ïj©„¾“·.å»dß¬Ç¶ğ—;Eõÿ.š·ôa?÷ökÛöVŸæ³ï/Œî}}¶ÎëRşş_úSÑĞö·8÷vı8şø_ò3®æø9¯:ŸÑ[ïíYæü¿»Qç…µeÿqü•|Ç'çWÛí¿Z»Ïıß*…ı˜6;|e?Tşg¤şÓ7qò¢~lÏu~ñ=]{_şœFs¿ÿÏÿ¿§ı[ió}^úçÿßåóÿcøÅŸãÿø·w7{¼MßìıÃªn¾]ıWB›_»ÿ8ûğ_ğâé~ÿrèùL·;gO¿¶?f¯›ÜßJêšvïËßıÿ^Şß„ìúÿúlüÿ\‹^ÊïîïÿùünÿßŸ®ùâ}ÿş5ıôü7]“;õñûR}ıê§Ş¼ÿ¯·ÿüÿŞ¨ÂİşjØ7s¼Ï>ü¾ïo{ßŸéî\y—ÌüßY\İü^¾ıÿÏû»‡ÿ¿îÇ¦¿÷Şå×n•7[73¦2¦ï÷íwó¾»¾S¿ÚùY‘ ş¿}×\gËİ™ºJ·Â¦Aªÿ—n_]¤>ÖeÛ5ó/©u¦¶øoÕ¼¿{Æşß=yı¾İöÕæCa^£äş±ùW XûÍö]îÏ8Òûu:{z‰}»Ÿ?ïåZïëaíÜß=Úve]İÍ·«Êşî’ØıS—şÃ?ï·×~ßşÛıÛõ\ü÷­?Çïmå¹în÷ı?{óü{ùmŸÅóŸßşgÏşïåì÷wß;¢}Õïfı_‘Ôhyßç—¿ô¿×ì_/Ûıÿpö9ÅÿçFÿ³íüùŞ½;ûßû³ß—ÿv÷?Õ#¿e\O§%ÔÛ‹ßøú?u½ïÃ~ïıûy9è°Sy«Ï¹ûz· Ôº·Éß6÷ıpÏû\Ş›u>|§[ï¯Oo,ôş^¨»Ş»pˆXÊm¿úJ¼ğõÏõ•n>å¿ÕİÏĞ¦ïÜú¯§ş5ïN^Şİ…'ïG¦ïŸÏÊ§·î½oë–Ô}F˜ñ·şÃ¬ìİßn§ÿöoÃ•Yîíşıµ®Ñë®ğî÷£_tw\ĞsíÂë34öû·í?)ûÁ¬?Åb~Ævãg—ö®ù4­èßZc+ÙvåÕöŞ5ù÷—‹ê-Cß°—í^öïËòœLînÃ<Añ×õı'¥;ùŞëÄoæÏŞêÿ¿ärüÿ?åS›ÿê?¤¼ßsz?÷NÚd×ÙNíóoº©i;¿Şê:ÕOç§(ï×óïéowöo÷uï­¿ïmc3æuÿ÷á^¯·Ë¿×km´åõÎ­Çr{}ùû~ü»wèÏaµŸÿËÿß÷Oî™ÿ¿¾÷»—úü»ÑR×oØ»ûGŒÜNÏ¿ßá<òÛKú+ŠııÛweúÓÛ£{õïŞ«¸}ûw²½Î{{ğÂ?•óßê\!ÏÏ¿ñ]h?ıû7µÓ×cŸ½!¯öcn~]]_-ßÙwvŸM»oÖóƒûjÖıå½ßvŞíCõOÿş¶şwõ[şÖÿwí>½»/™ïb~ÿÿ½s¾fùûä[×3½X¼j÷úÿ²™w¿_›>úóòßµ|Êú;ğüè<ûks§hoØkëïí«ÜxûÍİ}û¹ù¸şÛM¶ÿïşoWO÷ıİûÓt‹pêÛ­»_õ'r>_ßı¿ğísæ»}Mÿ*ı»ş§}ñ¡{Ÿ	Úµõ§Ï]só\ïı±«ôÿMãßWßõ£ßïŸ_{^öºïã²Æû{Oê™Ï><ÛÓVAİÿ¿şá>ßîº/Óv¡>şê~ÏÚû·¯Oû÷Ë¾ÿ÷ÿöÿË¿Úê?©ÿÛëüùÙşìûñıÿâ0·®½{õü]ÿëûcÏè[{ïñıÛÙûÿxr òyûşVöïÒWçü»ëï¿åò¿õ:ÛwÉwÖ½ÿñ³—t-İõí=ü‰wÿW÷ßõ·©|¦·ıs}ßì}×Á²Oû·ïîÛß¯Á6µ×7÷ÏµÇûgÁ·îvËÌ~ûO<÷gßè¿ÙŸcyÏòïw»İògŸÚ3½9>9–ÿúÃ½Ë^Íúï^|áÛ-¯gı>ßÛ>àm_üzŸ7~öîÜûÿİÑßë+÷ÿüÕÿïx†ş ûíÈ¬Ôùİé¯©ÙÈæ¾åÏû½k¦ñÉùyúQYvï=Mó—ß/ÿGlşÿÛ¥y¯¾úûøİÿuçÿRçÿß[İc{ÿşşû¹Ùûüï£oÜ“½%ôåƒRç¾şV­Ô6”Oÿ>à¥†î>İ¹õâaóÿ»ƒ¿k‡ŞÛ5mqtÕßPÛ—ÛïîJ/¹wÎWøŠGowq¿ô7˜M·Ø]×òÙkóò¸¾Ÿæájıú'‚Ç5»ôóßçmwÈÎşü7¯‡xë¿;ÊGßõüáş¡ÿõötNÿ÷*Ki¨£®-´ÖÏW5·î”bİÜÔêrûú´}[‡½õ¿±÷ß]ìŸ»èÉÿ»b7=¾²±Ç_é9AÑ÷á3¿?ÏûìãËŞ÷³ïÖ·Ì¶:­÷Óõı?³æ·Kõ·WÏ×VO­¶Ö‡];Éût?¾/Ì7øõô÷ıëu¯{·û¯QµVĞßÿšyï¿~×YòcN¿×Û[Zùÿ<íºÇÿ¿·o:ÿı¹çŸ|zÒşİ¿«.Î6Ÿ?÷ìíÿ[ŞÜúï½iÓ§¸ø?UÏ?ï¿»Öı¿ïjé¹ªø/"µçG¯«kÀñíÿş÷ıfü™ş¾ûÏï¥/‡=ıµ{~ÿÿ^¿vî_ºÍûúî¦¹˜İåõ^øáo¸öbY6]‹ï»¿âÛúX»ùîmk’2;%îû«{Ô%™ÿp®Øé~ÛÕ×é«t
ÕrşD³üßŞòÍOŸû´«sÛ}^_Ä­¯^w;ó+òã;ı×åò^"yï´üz/´¿&Óz?oÆò¥ê§óÛîî!òy¿¾v¯w½ù?ş{×n`[ò²ş’·ÛõïÃú÷åş?6ÿ³ÿõûÏ[nkßN{İY¬ézïš'åûó%ı•°z¹íÔ·Ùé½=öú²ÎÖşásÿ~HÌï9‡ÚŸ˜|¿Ñÿíÿ¾¿z®Ü~{Eo}zâ÷i·=ÙßzïoşòãÍTïÏßŸ÷ûïó4¿êÛë¼w»;şhÿç~wÿı¿Ş¶zzçúÑı²¹§wp·ï/íİÿÿñG¿¾ko}ÎÏ÷åZY½{ÊŞ÷ëIñë¿Š>Åÿ'¯Ë¿j­oëóş_2¿Kù«L®æÃ·?ô—{g´æñeı·O”>Ÿ*¹ğİŸ[èã÷¿?´—¿÷6ÖQ×ŒOÖ¨hioÿ¹zùú²Ú>OÛğ7c¸_7ïÒîhïsTÛ»ÅoÇôŸõp«¹µß_Üİ¿Dlú,]rÎôº†ÕıŸÕ{öï¾Õ~÷ÿ66çúvTuõ¾çºô3r»½Ó7±×Ğ÷çîìùñõl?u“/]ïÿ½îTÔİô¯ñüÄzÛ•V–û¶OŞu|—·şõXñvö»ïØûÏÿôDŞûÿŞ½âıŞ¿ş®sï÷¿—ç/yü×ÏÛ•»¬¯ºÙ¾w¿,÷ÓYëŞïü¶_ß–Uí^YÿşYOn=~ÉÏ±şûÌ_Ÿğ»ë¿ş¯}u{ĞW÷O»Õ¿ößú—Ÿûöÿä¹Ç~—¿{Ä¬Ìò=û?úÍtë¯wäÓ4iwL<µ×¶¯Şıe?{úş­ßõ{¹ßD·3zçögw·µŠ¾’Æ³Œ½ºÕOOz/›Âwç”ã‰Fiëüñ'¾óÉıš¾¿m2æ£×Äÿu¶$µVóWó°c»*G$m'ûß_+•Ïowü¯o¾åoŞÚ¿¯İ<Çyûp1ßfÏ>S»é¥ÍMu÷Ô÷oüÿ®r—¥ÿy 9ª¶·÷­šµW_¿ùWê÷¦d?ß÷¿İÿÇımÚo{Ÿ­¯şsµÆS;×=g^?w;î·¿œg÷ß¯3åŸ³{—{»Ñ<Qsn»æ]¿úu¾öÚ×ÿ÷Ã—kş)—ÿšû>¬ÿcgö¼ş®Öaÿ%ú°õø¶¼+6vm8÷¿İÙùúX÷½üMe¿•Í¿Û÷ró6osÌ¿ñuy[wø>ø›wä<sÕGÎvÈéÛ;{vü½Úò9ÏÍúÿòcıùîûÉ_o×umÑó_ßÙçİ?µßßşv×ÅşIû^~µ    pos = findSpace(node);

              if (pos !== -1) {
                return { container: node, offset: pos };
              }
            } else if (isBlock(node)) {
              break;
            }
          }

          if (lastTextNode) {
            if (start) {
              offset = 0;
            } else {
              offset = lastTextNode.length;
            }

            return { container: lastTextNode, offset: offset };
          }
        }

        function findSelectorEndPoint(container, siblingName) {
          var parents, i, y, curFormat;

          if (container.nodeType == 3 && container.nodeValue.length === 0 && container[siblingName]) {
            container = container[siblingName];
          }

          parents = getParents(container);
          for (i = 0; i < parents.length; i++) {
            for (y = 0; y < format.length; y++) {
              curFormat = format[y];

              // If collapsed state is set then skip formats that doesn't match that
              if ("collapsed" in curFormat && curFormat.collapsed !== rng.collapsed) {
                continue;
              }

              if (dom.is(parents[i], curFormat.selector)) {
                return parents[i];
              }
            }
          }

          return container;
        }

        function findBlockEndPoint(container, siblingName) {
          var node, root = dom.getRoot();

          // Expand to block of similar type
          if (!format[0].wrapper) {
            node = dom.getParent(container, format[0].block, root);
          }

          // Expand to first wrappable block element or any block element
          if (!node) {
            node = dom.getParent(container.nodeType == 3 ? container.parentNode : container, function (node) {
              // Fixes #6183 where it would expand to editable parent element in inline mode
              return node != root && isTextBlock(node);
            });
          }

          // Exclude inner lists from wrapping
          if (node && format[0].wrapper) {
            node = getParents(node, 'ul,ol').reverse()[0] || node;
          }

          // Didn't find a block element look for first/last wrappable element
          if (!node) {
            node = container;

            while (node[siblingName] && !isBlock(node[siblingName])) {
              node = node[siblingName];

              // Break on BR but include it will be removed later on
              // we can't remove it now since we need to check if it can be wrapped
              if (isEq(node, 'br')) {
                break;
              }
            }
          }

          return node || container;
        }

        // Expand to closest contentEditable element
        startContainer = findParentContentEditable(startContainer);
        endContainer = findParentContentEditable(endContainer);

        // Exclude bookmark nodes if possible
        if (isBookmarkNode(startContainer.parentNode) || isBookmarkNode(startContainer)) {
          startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;
          startContainer = startContainer.nextSibling || startContainer;

          if (startContainer.nodeType == 3) {
            startOffset = 0;
          }
        }

        if (isBookmarkNode(endContainer.parentNode) || isBookmarkNode(endContainer)) {
          endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;
          endContainer = endContainer.previousSibling || endContainer;

          if (endContainer.nodeType == 3) {
            endOffset = endContainer.length;
          }
        }

        if (format[0].inline) {
          if (rng.collapsed) {
            // Expand left to closest word boundary
            endPoint = findWordEndPoint(startContainer, startOffset, true);
            if (endPoint) {
              startContainer = endPoint.container;
              startOffset = endPoint.offset;
            }

            // Expand right to closest word boundary
            endPoint = findWordEndPoint(endContainer, endOffset);
÷}ø†ûOûv^ZºsÎ>tõ×ÿ‘~‹àm·}mjÿÊycë·²lïp×ş»¼ºŞñG'ß‹‹Ç—¹{_Ö>Ÿ5íñcõ÷{ÇÿöËùïv•p¾ğgûouÉ¨‰¾šç²â¼Û_¥ïí?ß×ğü··Ñˆo—Â—cÑß‹J‹í__ÿÿtıÁ¯DŠ	(	W¤ €ŠpĞ,¨–h  `@Æx0@ÀH AÂ2 ~á0XX$B,(ä‚”`6~€˜‚ÖgS"À„Á©V›À&‚iëª‚ Ê) Tn0 0#"°@ÌáØJ¤Ã^LP4ğ°h˜UÄ¤È¿"¶HÈRçA­˜J:‡(àWÇƒ	Ãù‘À9ÃÅ'PDˆ‚—V9¢c£XB(°( Dœ$AfÒôŠV 
 @€	¢PˆEB
-D&)B(  ±ØR(`€ uö²÷Gœ¸ïĞ_w»UÖ½,ïŸ»ÿù'ø­ÕÿnšWåóKSz5»ïâä§qe¹¿ù÷Gû}ÿ§ı?ü—«q
~Ú5Iìÿ·×ïÿm=CU|FùùË|µÜsÇ}»ãK·şhÖGè~}ø/½£şõuõ–¬ÕÕ>ïÀÿâ¿|şı¥®§]W×Ÿ£ÂF	@	!B !`´)¤ÀÕ`¡ ”ĞE€,¢b˜e07ùI±„ÁJ¢Udè1D ÄP%å VÂZ+¬&ÀÂ¬H`Uq‘ D¤"µ8A&QJ€85F´ÁŸX˜ 
P²‹¢7& ´œA!ÁF ,; SvuÕf?_}ïâqı+íÏÔrnwı_õ_Û>:şŸ¯}–õÿï~¼ßÕşƒÿg^¢qÿ©ä¾½¯ÙBÍè¶Ïı‹ôİÏÚõ-\Õñwùìí^¿İÿØßï¥ÔÏµodşÕÿzÿ“Çÿaÿ­ÇsŸíõş_Ñòûú]ÿïÛøß¬:>!QıÿoÿİÒ~Ñî¯½¡¹ŒØtvep‰?ïô¢ï}ï_·ş®ğ—sõ³½j
Ô½º]‡îOõŸOw¿óŸ2‡åË¥¹“¯ö•÷—ë‰ë÷MÇûÛ¿®ëß~o\2ÿuˆp¸øíï}óüï§óÀw:—áÔ’Ôöïÿ÷ÍûTõå3ÆµÅÒªA"Œ²¢[Á‘ÑT  ¤ $t‚,¢' JŒÃpˆ Ìf–´ ‘ŸÀ ’¦0€ø‚Âçğé¡ƒ …° „@˜j¢ƒ©â!¤Hˆ  0“v ŒJ(YCMğÁ8€G Ãp¾işÕÿ[Ÿ]Š~WÃåPÛ›?İÿÆoŸ~j]Şoü¿9ıÜ³öÌîuåıÄvèšß]¹ÿş×|åo7¦¿ùjõ¦ß«-‹ë—ñùê¿6ÿ¨©ÿwJcß,/ır•2+¶uĞ8Ôş¾´uí}ïÕç:Ò”ûvãdW|ûµ¹:ßvúØ¡/$£•8g	ŒZ`•†B(€¶/ÂC7BGE!€UÀ‚GR€Â6\€A ö„RGh˜Ø Iµ"I@Èh (
	bCBœ' ˆ<Œ@ OC0¡  ,²Z  Rc°Â!`„²ˆÃ@@"&#ÃŒ €‰H‚¥ÓØ°	¬<îb&‰†DA"(Àa0 ì@„Ày@JÑĞ Y • A*/Ï@#p¸4]B3 upy$* B•€ ƒŸ*p¨ğ ˆ@ “‘ĞM6!qf¨¡ ôÛàA@¡…üÿ•ïü»{ÎW}§[êÜŸ:úûu'ëå×txÿwGÿ§ıüªx–:ÿ»yõåpRİm÷÷ù½6æBx±ÿ—™Ï}êMÿ%üÛ[÷™_óÿ÷É­ËıùÈS=ÿ§§Şæúß¹Ê«^³ïÏ¾_óöê„ƒ}ó=ß?æÿ—öâû«gE—y	8Dq ‰‰$(B2n( 5
ğª ğ 	„ ¦ê‹ˆ`AG  q XeÄ	1¸!%@Iâ€ ¨ P€ˆ î F N™pF”h0¨"Ä„À „IRˆiXÖ	  1D"Ì(/éq#şïü%g%š½Œó#îÛç¿ç½‹Òÿ>¿S­ßÏé‡Ü’ëMÜï¿ÃôşûNÍÿ½Kâ›ï_nöûù÷w|VòĞkĞ÷vèÑğ”×ÿëõöuÃ¶íó¯}ì»şË§&÷'Î>æo|‡]û5×ñb}Í«Ú÷§g»ş®ıwÓî®iı?Óú~ˆëıtŸbö¯_áÜÆÿ²º½|7X©Ÿ¾‡¤cş÷ºt¿[	TÓìo1/Ã¯Wù¾Vî¯ã?+øç“ÛÜß³×Ò7_cìä­/âkÊeúö¯ã»¼ëÓşWœï¸]ÙF7m¤şwıÒÙ_öPãOcÏÿüÏv¼×†ÿíş=å{9 "@ f,œ² Š!L(³0JÂ,µ@€ ‡$QtTR4´ ,€“	Z 	¡ „CÀ ÆÀĞ!,5,‡„‘¥], 6x‘-r+l,ÜY˜`ŒRÀPÇ,Ô‚Ë3CŠe”¬
#óŒ!`&;8->s·ò¾çqqPŸİ÷$oô‡hr§wË÷¶F_ñºÿÿŞvímÿë¸ıÓ/ßş§ÿºV–§‚Ş'qï{çîóğsın{:ãÿY{–ŸâëûO´Y÷–Êâ“rÿmèw{{®òìQó}?îÈ°œm×üêkO/èÜºwÏøô¿ÿÅï‚°9ÿ{$¦Q•Ñ<`‡qÅLÙ
# Œ"<BÂa%4|@	%8ˆa	0ê qÅ™FFBSd™9@OQ` Cb!ÒP€ã!`N0°"d˜%€Cœ¡B UTTF Ó%…™ ´}ÅA	
pG, ŠX@¢$55ÓL8@¹D¶"È À–2¤d€e"CPÔÀe"°Añ-ğ 'PT£Ö 	m -Œ0Š(„€„@bHÄ€CM9.@ô‰ƒ	ˆ&$d J$„  !.2 	…T$a_i=ëÿnışNÚv3uïG°Ü^Cÿ/æøW{ï¿—}ß*öÿÆ×šßÿ×İé‹ÄÚÿÿ÷÷QæıñŸï•í{úoşİOË§N×ğÿúîŞîwÜàô··ÕßØjã¼~VßòêÛ•ŞñõÓÓÛo^2ŞÙzÏ:×
«Öû£–ÿşîRJQ"²j1Äá•Kˆ˜Ï@Ğ‚€%JÂÁÄ”ÕS0E² !Œ[LZ9 0ÒŒDĞ
l(€(dÁ¥«` Še E $)I–H	ğ
š	€	ÑÑ;p˜$È—A+ €„H<ÁD!!ù	0,H‡¨h0#@Ezp¿W©Fÿ¾{™|µ£_¨û·«ıÿf¸©˜ö™Û¿PoOë¹%ƒ±‹G{÷dä³ÿßÇîíÿÿ5ÿÌx7Ï/mßí¹=ë]û{Yñ>û{íÛ|—ÈßùŠ~ßóÇêÜFÍ’yÿz:æçó|^´îÍ=™_ü”wı\óÏÑo÷ÕÉ~Ú¦Ïã}çÄõòÕï]ğ~ïïõÇV~ÙßÖO2Bwí¶,é—éŞõÉ¿?:ø½ÿowŸŠ“êüêIë·ëÛwI÷Gà£öÓ»÷şï}_¾¯ùî¹SÒı}Õ|os¹óŸÜîß÷7ş™tòÙ—qá
v'~º¿?“î{şıÿå÷êë˜‡•ÛÁßkC.õ9À‚ DàÑÂÄ­Â|ìÂĞN€Ê ®Èô€–Â D0…! Df$Âİ.A4² Ø€¹ cÉ¨Öù(… 41 ğªH…ş @ˆ@ kb H"@£ª2º+„ Ê"]ÌŞuT¦pJ–­B%%˜PLàN­­•{sLè§÷úÔwó×«¿f¿,úö­¿öì—ÿ¾şîâşü÷ÿ+#ó¨ö~{ÿ'ÿßşÿûÏıÑl“ÇmÛ¼ŞıOñwİÎ÷Üßşê÷Gè?|½U×ï\ÿ¥¯}åç’ìŸc×½nŞÒwÚÛ&ş³?ÿöœßsĞ®¥ÿOOïİğ—è‡„ÆE‹ã`
‚Aä!Fâ
  eZ°€@B¼¡Î ‚à !Â`†‰Ø
`0hªZœ26"€€ÁyHªv€ À!AxRV p`ÔbHâé4e* †D±”#h	0€Š©&$(0iZÀĞ®  ÅA€Ä2O‡P‚BZ²špˆĞf(ä¤ĞHe<  Ôa3ºìŠ¡Å¨"É8c€PÁ @”¨Kà+D€ DX€d°pD&FÌÄ¤@6@¨€ À	äƒpCp (Ä<ŠÁ z†‚ã2*Q¿’@
À¦B‚·óîñ7ÿ÷®—îA³ç?½şôıÿ½{7.v³kß6oô³÷ûĞÿ÷ë¾ÜåêÑ?yüwNíûôßŞÿ$®ïËı³åÙÇ÷sÔçúœV{©ÿ5~ïy½C÷—z™¿(û÷•™Çş/ëMšQ¤µÎ²<ÌÎ7ü­Âi˜¾öß§•×_{ö³¬}¹
{’@Œa.tXEB–P!ˆH)âJ¤%j’d‰P0…°Â# qˆ
Àğê ¡! KP-à´*^#AÀ)Ï‡á a  7%Q€Ê(X¡\Ğp†D  8é Ç c(–Œ0Ÿ’Á=¢íâe÷êÖßåÏß}Ÿı
µÂg§3ÿv¿ç{»÷é&ç½ßk¹u~`åœ?¾DÒÓ›­Ï›ß»×ÛŸíTCÿ{½wÏïĞLıÚŸı~õt¾¸çŞßÕã3İâ÷7¿/Tøµâ¸#÷q¼lsïõß\ìOÓ¶l}\¼ÿÕ$ùºÛ‡ş?î·ÊyµÿşÿDpÛ×şO~}ONı¾Q÷Ëû­şµAøİ]İú}o©èúìşıïwp¢?ª¹·O~Úl~ô_ø/[Ş®‡Ô¯kH®ÊÛàÍVîı÷½zß-ûutÿ¦ïÎí5¿i7ÿ“Yö*­Ç×}ÙOãš“Gß¢ÓÿÃ@4àDô@	`4
Tˆ$ƒá¡ ¨€ ”©5¨Á 	Óx!qEˆ@ s‚¡5*)!PÅ*P2H ¬ †0jX¼¦Œ!$	D%#t0€wT$3	ˆ l€Ş<‰ 	BB@ iÚ€ a
Ì‚0•N¡jâ2 OÏ JN  Cq€JÕ60ƒÀ¨	 œå!„Ê£Ğ¢ÁYğ€¸€ á ‰ Èš^ `[
@€!@qq  *e4€ A>i™±¢ )	cQŠ$ã¸ AP2ŠSDb@¿ªÂH‚ 	Ë°P]0!bÁi‚	®I»)¢–50L‚/5
’BÖ8 1pœÜ
>àès€
½D‹×†1$+H‡’æÔeX[iAH¢°/pPÂH0€¥!óPBe‡`^IDfMé@v€uHÄŠœ4š&ĞÕH, „°*¿
€	lĞNH(RôGE	Äh‚Ô V¡û°  ĞÚ$z,€4"rÄÂ,"ÛFP˜j‚’ @A>`@$h DÆYhbM‡FñS# Rr`Ã = ùQoàÒVf†@UƒÉ$ÒÈ€Pup’n²)£r:/h˜B Eua€!G( °8”DÄÈZkh8ñÁ©ÂNHº8P…R@€CƒS™PÓBë(€¤*â„Ã‚ĞB:%PƒDH—G.H‚ 2D3Ã "&B@¼¨4b C¹A£Âfgˆt?i+
Ø °
Gˆr †‹¦±KˆÆÓdg¥"‚D†d (A¨åŒ$ÁD3)I›nÑ5(|Š*£„D 2kSpŒ à`ÄS	!ŒÇ %§Aù!JÁå	$RcŒ@‚Äáp 0¡á qÁ „°ài@¤5ÄIŠJÀAJÀìh`§ñ€*t(±t38BŠº&|ƒ @|æt´@ƒ+3€Y AÖ¡ÈÈM,™‚
„‡8h4\€`P˜<Mf,LÅ!Ê‹¡K¡À‚: WV™DDSHˆİ
iP	¢‰Gù(øq…à˜†	ŞÉ€ÀÃ‰!=ˆ‚:	AiL86%× Œ&€”	ó‚T 0DÑ”]‡T `5` ƒF¼Œâh+y$8ù¸Q	Ä,”r]!!Õ†T’uwpF®àÀg¤râÈDPc‰dĞ( R¸|¯pH®úáPn,¨ŠT9Âe‡€IÉ£òH$÷:¨ 3c tƒşúbM%°Ù0ÚÀ@ZYL `I
7U(‰PÃ’Ï 	(÷Kv\D¸ĞR@CÆ A’H”ÀÃ”"D	b@¡!¸BD€ <0À€@>@¢âÔ L   ˆŠÛ€¬ILuD!Í\	äA AD¶T FX(1C`fÄÀØBâpÓÊÛ„©nÍÚ şˆDš"ĞPjš +àÄP!(‡M†Á¤w¢€ ‚G‚¡ üÔ ñp$J€€Š.áV %Á+L“%,b" £0—±ŒòuD¤Ğ|]ô@–°|4!c'°‡âàå`•ğ´D,*N …@+Ô ÏÃA  ˆIPYA)ŞP1 p ¡ ¼µhI4bä¯@a ûB"ƒ#7¤oEb!ÄøÉ_HE<Ÿ äÔ(¥DÒ¥£DhL’¢Q:Â@ÄK^x¶‹èÆÔ€$	B   M `Ä@´àXGHÌö€è,<ÉMg£6 “0!R8D,Dğ2¡I‚˜Á¤C9%(€›G8`Äò, •0…#¡"0NDæpY,a
 ¨Ã@†AÉQà¬˜ #H^‚!¬hH“ª ó)›+”¤ÈzbHï€KLâal$$ÚC!Ï…ãÀ\„ªhdÜ	v¬’–64 a
Ğ¦z€+™@‹Ğ_Ğ(€)P' ÑÄÃç`M Q]Ñã’RSy” aä’ñ"Æ@$_ª	h•‘û¦ÚL£@	ş$%-˜¿	U ²YÇeŒ†À˜b 3g@èŒx@€^<€_ Õ0ÁA” dKÊ€
…`AÆ‚…È€" !4!S@H	L	@ +Eˆ 
I »![ºâJ‘ÃŒ˜…XPQ9E 2aˆA‡B’ÈˆÄˆ„?’ÔÆ¬!àX±
"@T1• 0£‚ ‘†.­QA%P°ÈˆƒÀÕŠVàÀ @¬RpeF1E©•¨“!
ClÑ ( 2
ôKˆÉ€4 ÀB	00ÀŒ‹i‚ĞÀ	èˆ@ ˜,ÔkP¡ 0LFµb™±Ê„S5‘X(@X‘Rƒ,ÚRJ@P¢Î
ä!FĞ@MCP€¢4ÜL[Ä†H âQ*Ê˜ ¢Ø&[	“¢”Wˆ4(}M©À !ò^,4Á”†ğ‡á¤~È	"ƒH£ˆ˜TAË æª…(1(ğØ¥—À€	ÀÔ˜¥ÀE .Ÿ€{ üBXx(B å7Et®HàaiTb0@ƒ1t4*@şÒàU $   €S !B€€ÈˆØº§‚éù €„à ä 
F!)"P„Ô8	4a îâŠp$Ëˆ‚Ğ#ÖX‚
¢#S€ˆvH • ĞÀSúÄ“hB Êd¤ .í§ÉiÇô#~,CÇh	 AŒ€$MQ©D¡B 4–ÁÃÚM#ŸÁr%
#"% Hd 
BrRR¼ ÀL¬D
’T·#IO) AZBb¤¤DêÁm7r¤€&`Ã0Ô |*À„ÔãÊ©§8ş"8p€€„lIDäBçGtÀf GÀÁ¦„,OÄ€Ë0
eÅHƒcİ
!Ö0#AH\ƒƒh¸Ö	.ê 2%Ñì\7š²€3EeÁJúKÆk¿3 , DFaa±Lµ€@À	*B @´  KLP7
È½ @C ÉH° %.€†ÎÕ¤`a Cp €&d!Áà"Bã(â¤|-€€C"ˆ 	×xâØj¢ DRXu1à§HÎeTŒ% FDxÊCƒ$@ Q
Ì(’0X¡!ƒfA§Z`z@æ	¢È4¨¾MBpÜPU®Ö…
-ÕŒ,§r`t¢ê&ÅL)I'Ğƒhê^ ‡z<‚.3@xO„Ó±Z)B@€Àxœ1ˆ	i¢Ö@á´M-4 	, @+‚Ÿø¾C üPĞB£ i°bğD‘Òe ”B³JT¨  áu¤)˜ @¤\2À€¦€ ªT Lx&( ›•pÈ˜XİÁ‡1H´ Á¨2Rñ²¬F‹)¤€éG@@  &(èª@AP A ÏÄc%Á!@ÈW`ŒÀ	±$HÉ`%5´ÚP–&‘ €Á$ĞB€ˆÀÄfDÀ2ƒoPp:1 |}*Ú-² ºˆ”H"AC8Ï¸Q‰R@p„(ÁŠ2dÈ
%H…b(‘pXĞ#Ø(áİšùIqÃ€ €“€£°C;TÀBŸÊÊP'd·‡PX9‚FPOÛáb ©”àVäò0ÍARŞ¨A£L&ØP*É 1H$…:U…pD0/
P'K“D $AW¨C$$‚@F°TPÌ(¦“Vo°gdÅG¾µ pÄòfÆ9BB"Å	@¸Ğ  \xg( {˜A2‘Èr(¼ô‘È€”qU„ÀP›A–Õ‰R‹ÒÀ’‚Pˆ`
Ó„0B(µE“$*†Å
"¹fMˆ$ˆ‰ :TÄ,¨N¬¢à€$pBÈ„ 0H*êp	€„´ÂÖ°2¸à7'$Ì2 ªG‚ ´†èÊ-9P+Ã7¨¦ Ò-(! k€D'ÜJ\@à l8û ”@ĞË  P:q¶‰&Ğ%¨d ÎAI"(ë„\ ‡Ğ¨ã3¤¡D—ƒ	 1Z ÚÃ {Trl‘P‡‰ğ™L	LTÂEØ Ä±ÓN1õ’M@EmŸD  @Lp‰˜ Ğ5
ÊHI¤¦8äBP:¦?×-  "Q0Ë ğH„OÓ£€ĞƒJu	P,Ğ„˜²O¥A1c Á¬! $za2fp‡fxlÎ-„`‚¤J"AIä•˜è L I8A`œ#Q„…Š pPae`Ä ÈMG 4deœ $`ËV‘2ÂèR ªhVÂ¤Ø†¬&†0”`±(A6$Œr4„¢	@!Jˆ  ‰J,8&ƒ	Ã a *Å©»r°Ha…Á˜®¨@ĞÁ¥nYÌJ·²¼| !ĞÆÒ @° &Ê@)¹$„gH²&€:! 0a‚È è€QAnŒ|NÃë¶üL²Š¢§@˜!NÅ¨‰Â€’ <õ¹`­@CGè"Ú‰&Ë‡®²02Q´‚2 rHÄ*Ã×“¾.ÌN4F˜"	Äm„cHYIÃÍ«!&è ©®Ç¨Ğª\æBÚ‚ë€ÌViB›Q>X*T€B×˜‚°„Î À ğ±(0¤É£Næ „	`&@B ¥@"
À ˜b '€˜¬‚cÚ­‘\,3ÁOˆ6HÎà£˜Ï&pªa ›J$ˆBŒc]yœ ah@¡ X$º£Wæ%ŠĞ”k| H@-®&+à	Àˆƒ!†" AR`2+¡“Dq*! €u(
Ã°@„Ù¦ A¶b€‚ÆÄc	$aÉ†™\€À€…ğ¬”  „)DU“£AC[Â$¤’2™D3:ÌKæ˜µef HR–vÍBAÉY-’‘°ğ52£@Lb7LDˆ˜ J€ôa"c'V&D!ª1² X[H`iteSpaceSibling(node, next, inc);

          return !node || (node.nodeName == 'BR' || isBlock(node));
        }

        if (format.block) {
          if (!forcedRootBlock) {
            // Append BR elements if needed before we remove the block
            if (isBlock(node) && !isBlock(parentNode)) {
              if (!find(node, FALSE) && !find(node.firstChild, TRUE, 1)) {
                node.insertBefore(dom.create('br'), node.firstChild);
              }

              if (!find(node, TRUE) && !find(node.lastChild, FALSE, 1)) {
                node.appendChild(dom.create('br'));
              }
            }
          } else {
            // Wrap the block in a forcedRootBlock if we are at the root of document
            if (parentNode == dom.getRoot()) {
              if (!format.list_block || !isEq(node, format.list_block)) {
                each(grep(node.childNodes), function (node) {
                  if (isValid(forcedRootBlock, node.nodeName.toLowerCase())) {
                    if (!rootBlockElm) {
                      rootBlockElm = wrap(node, forcedRootBlock);
                      dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);
                    } else {
                      rootBlockElm.appendChild(node);
                    }
                  } else {
                    rootBlockElm = 0;
                  }
                });
              }
            }
          }
        }

        // Never remove nodes that isn't the specified inline element if a selector is specified too
        if (format.selector && format.inline && !isEq(format.inline, node)) {
          return;
        }

        dom.remove(node, 1);
      }

      /**
       * Returns the next/previous non whitespace node.
       *
       * @private
       * @param {Node} node Node to start at.
       * @param {boolean} next (Optional) Include next or previous node defaults to previous.
       * @param {boolean} inc (Optional) Include the current node in checking. Defaults to false.
       * @return {Node} Next or previous node or undefined if it wasn't found.
       */
      function getNonWhiteSpaceSibling(node, next, inc) {
        if (node) {
          next = next ? 'nextSibling' : 'previousSibling';

          for (node = inc ? node : node[next]; node; node = node[next]) {
            if (node.nodeType == 1 || !isWhiteSpaceNode(node)) {
              return node;
            }
          }
        }
      }

      /**
       * Merges the next/previous sibling element if they match.
       *
       * @private
       * @param {Node} prev Previous node to compare/merge.
       * @param {Node} next Next node to compare/merge.
       * @return {Node} Next node if we didn't merge and prev node if we did.
       */
      function mergeSiblings(prev, next) {
        var sibling, tmpSibling, elementUtils = new ElementUtils(dom);

        function findElementSibling(node, siblingName) {
          for (sibling = node; sibling; sibling = sibling[siblingName]) {
            if (sibling.nodeType == 3 && sibling.nodeValue.length !== 0) {
              return node;
            }

            if (sibling.nodeType == 1 && !isBookmarkNode(sibling)) {
              return sibling;
            }
          }

          return node;
        }

        // Check if next/prev exists and that they are elements
        if (prev && next) {
          // If previous sibling is empty then jump over it
          prev = findElementSibling(prev, 'previousSibling');
          next = findElementSibling(next, 'nextSibling');

          // Compare next and previous nodes
          if (elementUtils.compare(prev, next)) {
            // Append nodes between
            for (sibling = prev.nextSibling; sibling && sibling != next;) {
              tmpSibling = sibling;
              sibling = sibling.nextSibling;
              prev.appendChild(tmpSibling);
            }

            // Remove next node
            dom.remove(next);

            // Move children into prev node
            each(grep(next.childNodes), function (node) {
              prev.appendChild(node);
            });

            return prev;
          }
        }

        return next;
      }

      function getContainer(rng, start) {
        var container, offset, lastIdx;

        container = rng[start ? 'startContainer' : 'endContainer'];
        offset = rng[start ? 'startOffset' : 'endOffset'];

        if (container.nodeType == 1) {
          lastIdx = container.childNodes.length - 1;

          if (!start && offset) {
            offset--;
          }

          container = container.childNodes[offset > lastIdx ? lastIdx : offset];
        }

        // If start text node is excluded then walk to the next node
        if (container.nodeType === 3 && start && offset >= container.nodeValue.length) {
          container = new TreeWalker(container, ed.getBody()).next() || container;
        }

        // If end text node is excluded then walk to the previous node
        if (container.nodeType === 3 && !start && offset === 0) {
          container = new TreeWalker(container, ed.getBody()).prev() || container;
        }

        return container;
      }

      function performCaretAction(type, name, vars, similar) {
        var caretContainerId = '_mce_caret', debug = ed.settings.caret_debug;

        // Creates a caret container bogus element
        function createCaretContainer(fill) {
          var caretContainer = dom.create('span', { id: caretContainerId, 'data-mce-bogus': true, style: debug ? 'color:red' : '' });

          if (fill) {
            caretContainer.appendChild(ed.getDoc().createTextNode(INVISIBLE_CHAR));
          }

          return caretContainer;
        }

        function isCaretContainerEmpty(node, nodes) {
          while (node) {
            if ((node.nodeType === 3 && node.nodeValue !== INVISIBLE_CHAR) || node.childNodes.length > 1) {
              return false;
            }

            // Collect nodes
            if (nodes && node.nodeType === 1) {
              nodes.push(node);
            }

            node = node.firstChild;
          }

          return true;
        }

        // Returns any parent caret container element
        function getParentCaretContainer(node) {
          while (node) {
            if (node.id === caretContainerId) {
              return node;
            }

            node = node.parentNode;
          }
        }

        // Finds the first text node in the specified node
        function findFirstTextNode(node) {
          var walker;

          if (node) {
            walker = new TreeWalker(node, node);

            for (node = walker.current(); node; node = walker.next()) {
              if (node.nodeType === 3) {
                return node;
              }
            }
          }
        }

        // Removes the caret container for the specified node or all on the current document
        function removeCaretContainer(node, moveCaret) {
          var child, rng;

          if (!node) {
            node = getParentCaretContainer(selection.getStart());

            if (!node) {
              while ((node = dom.get(caretContainerId))) {
                removeCaretContainer(node, false);
              }
            }
          } else {
            rng = selection.getRng(true);

            if (isCaretContainerEmpty(node)) {
              if (moveCaret !== false) {
                rng.setStartBefore(node);
                rng.setEndBefore(node);
              }

              dom.remove(node);
            } else {
              child = findFirstTextNode(node);

              if (child.nodeValue.charAt(0) === INVISIBLE_CHAR) {
                child.deleteData(0, 1);

                // Fix for bug #6976
                if (rng.startContainer == child && rng.startOffset > 0) {
                  rng.setStart(child, rng.startOffset - 1);
                }

                if (rng.endContainer == child && rng.endOffset > 0) {
                  rng.setEnd(child, rng.endOffset - 1);
                }
              }

              dom.remove(node, 1);
            }

            selection.setRng(rng);
          }
        }

        /éB (`"H Êp’\ˆ- ™2€Lğ ”	€˜àÜsG€S`ã*ŠcHEr *Ê‚â¸” ¨Tb3 Ã±æ  w$¸n€B˜Aû©±øÄØˆ8@:DY(‘ÁÀ)XJ„ÁÄ  K–4…pdÚ@¢£Pƒü Fˆ5ƒÈ  H³l&èı#¥5I(¶ $Ù1$y… +8Œ,€@‚b€ˆ”"F‰U!C©…˜p€Cœ?B« Lb;@c-"–´“‘ #€q&'™H(PE0B"«QŒ(-@@Ğ%0(¢VT@'È ‚<G×mA&<&u˜X¢(j‰îÀe"¡‚@ˆƒÊ˜[	BˆÈqf Ñd°RàŒ ÏJ!A"L6H²I)˜$ÁpM‰:TË#A^pÇ8ÃQÄ! €aÑ  ‹0*†R´Á šLhgŒH!pLªd³‚x!¨WÑ ( ¸r@"b¨8Ib @EÔíL0=’$Äa A„¸C@	˜
É @âÓ/P ÒºT>ÁbßˆÌ`€VŠE™DSÁ•„hR€„š@$-€*¥ \Lã*.‰£L(¾à=QèK â(&J 88.¥ÄŠ!0JF0¡†
`e N@¢ 
9Û™¡û1&H-Pé@ÂŒ,(‘˜°„xfHBù50%ô€QCx(1=èP¤oA;â'	h€˜F˜@8FJ6‚Be`K 
Ém4–I‚DEP°Ê†a„h…T1@2 Á pˆ UQ F jƒ]…Y"a$Š82 ì‚–.``iÀÌ
€Œ8€ €Àäñ+Âè€@(<L($Z  2 €¶‚A  €@ˆ‘Hä€	1¦H”Aj,ªFm» %~ PXup¨§À:ˆ> œ±1² «,êc­4:Amˆ ú9x(Äà&i“IE…ÌQå2@¡Ó NP„KÊéÂ`¤a¤b<°’@Á-R(	a„J1IÒÀP8¡Q/’B¶€”FA kPÃ $€€¤ê°ÕÁ
ÁY6`TJKåB¤Ø6eŠk6°¦x„æJæb4D¥B‘,$d°òŸ]Á8( € !Ô9kcˆèKğj4XUâF-TH%	C€Å„0€M„B­Áˆ¥—ˆ`ü0D0 ø:Ñ(U¨ cŠˆ]àh` ÚÇ€Ô˜…äD ¡†¤e8<HJùÑPNX9B”Ó,Õp$DHE34$MÀ)ZI  ¶(‰E ô $I"Ä"LDM¢av„À!/À“ŞAy[ È 5¹4 ”Š	a`XŒ# ØÌ SÄ=@Œ¢¨eÀ oã‡käA,’@ŒE5B£Q‹ÅÑ(B=#ul€œ‰4)ˆF”€F^F+„ $wa1 µ º!ÌZET&o
UD¬… 
œ‚šzÖBmf¶I \&D@ÂCêp0	ËX¸"`0Äa@­Â„QòD4Kº`Š1YD¡‰&¨»	FÅ€	
 †`…€E$Ú;¢HtC>á``şb@€â¢€,HQhÁ Œ!+ƒ&†N•X‡8 ¸›[¤°¶( ‹ªdÀ ’ ò(`D$| ùtbÊNF”]‘ cÆ% FÇ.È1‰D TL„´è%¡Eµ–edpp@…€ä~ˆLŞÄ x0$Ä5Ep‰´4ÈÈ¼AQhÕ
E)ûBUÁÀ%GĞ±šGVhô·3J!\É)A¡à	j”Á—Q"HÔ½Rf±CC µBZBÂ©œ `€dY 	„ Pœh Àb"7³@§@0Èj šˆJS  	'"'aL"ºA0,õP,!–UˆBÃ#!c‚EHåÂ ôäÙ‚ˆ}`Íp
J	 ‹h äüŠGâxL ˆ“ŠĞ  H(K"( ¼* Ì "t„‚Ë¾Å€´ˆ‘ÅaÄÀ€Ò	aH0½:@ J]6º;ãş©ƒÄ`ô¤#|#mH’h WA¸4íÃ"M("ÑÁY£C
@˜Áj¢ˆ ‚ *  —€fàÑU%IPJ‚‚±¤sˆBP£GbšW$TCh 7À…$)@á2+‚×Ä`T¸­èSÈ!0 Ñ0Ü @ ¨  ¹îA‚PˆÂÁ ‘bty0[‡† `†pà@d‚0pˆCºY &€ !À ÙPäØã–8c‰ˆ(½.	HJ0 ØaÓb
8¸(’p6 !"­¥­“Y`” lé`ec"™ Îx“€.¾„SJ8B@Z2£&AèWE „*IÈ˜âÀ 
, BœÑ@`TˆÀö!ÂNì¥ 3:ğ[€©P–ih—(dç` 4
@À	T²@ EJ@6@p9 •Â$ĞHxàœ84Q"'¥ A¼"K@ A˜nH@Ü‡¨Š4”@0\ aBØü¦¤I:œ‹Ê@p¯Ì– Bf¢!	B‡t&£Â NSt `VÔ"Á`å‚ aæ†¦ˆ
l.’CŞªN˜Š¦H€ãzc  ’˜íä€#T…Šˆ—€q’b°	@S.%†„.n@kè$ HÂ¥ÀA%<h^˜£€#àR,–	…qˆĞb“DÀdH®i`ÑVˆµˆ‰B°“÷ 4© CH(äª ¢‹+¨¢€DúY €&2ÄÄ!–€€Q(‡D¥QSÑBb‹QâŒ:á((%" è†Ğ˜b9„ILÂB; ¤ˆ „‹;ĞÃ‘LŒ@ØQÈP€% š#èpYâ@àf•2C hC7% 
-ƒÉğâŠƒ¬B0ÃP€K	@@$)‚š¦¡Ed…À‘ÅPÍdH€Åu‚‚d”#$ğâH=ÂÅ0QÎnA$"£IF!ét ’$€†xÜ I$Q¤•th’	(”‚šIA5D€#K @ùˆ14İ
Í\˜b m	@Æ
 2¦ìPŸ„ªBp€\(>œ€¢ (%$çB”€2 e$¨œ`@@XàB 
 “(Ü `ä Î¡ €˜H’„duÂFH QÄ¯ ‚   û €  1SúÈÏ§hA&T!*	¡P`r&¨€K\)¡z<E BH8¡Â*1P	  @HC€Ì
#A˜‹  @%ˆ ã0Hüˆ”ë  æ0b ’WŠ0"€ B³r‚ ‰_C%¤£XAÙ˜  `I)6äX´ˆ`pÆ<†Q(&t …Ø‰&Pct,ªğœ@p P9J)Uàê `©TÃ Äb&‘í×ßI5¢Ç (ÆHâCHpq$ğËM8w2"FˆˆÀ  €`ßj fa % Ô“àJ\FàÀ30íªà£¬i5ˆwAp¡ˆÄ& 0´APA‘dˆÂ8†Š&Ò@ˆ0Lƒ(İx‰ qpLš€Ü,@V¬*
r x& < OP£#2@BD‚"©• 4p(äh'
.Ô ÄŞØaN$f©p*L°I–J TŒR•@4"1 @,C!&²ĞID€ á
è@C)âŒÀ‰¦¤€ Iä€0À¯`)‚"é[6Tè@J¡ƒWO¨ãÄ28`“ş €´  ğ *@
L…hj@R  6Â0S¨x,#²¨0£`.h&N:± Óa–“ˆ ÑH"e’ ‡e@T†À%BÁDŸŠ,Æƒ¦ÄemU0‰¨¸¥m %Âñ( `ÓobúQŠ _00œ)Z#'l Œ°€ÆqÀTÂ‡"‚'´j¨±.§1 ¡×’m¦b8JT·2Dq ¬v¡‚rÂB$¤_ˆmA2@e"€ "@ßXÑƒF*¢µ@¬’´€–,B 	a=¢
—™rà@€HÀqH›B†xh  ˆÈÂ€Ò $Ta0" Ì8 €2¶Ğ`ÁE˜©˜ `€¨ƒ C18(
CğN„#ÂDœ'q‚£Æ+0^ÆR¡hÂb I'¥ˆ`* ŠÆ"Á!™©ÍjG!•‡ C& ¢A ¤'cÂÊBG«‚MB‰ c(Š@‰p‹Å)€…R›@"*)Qµ…@ÄÅMüÂr•Sä†u¢€•!CO’7Áº’=CFX2Ÿ„&°IÁ@Î0¤4@Juš>(LL”HE(ĞR2 °!G B!D6œŞ‚á P¢$H¨›¦I€2:Fòb `¤âL¬W€ƒ@Z ŒpÁ…h	D  @å€b@†Tm †ˆÁDÆ 	.°Â#¹ÉPˆ È&…êÂ2$1‰[ 
2@€P¸D±LD0¨B"8ô´AA*#1¢,¬b€ı fµaBNw*†Åb28 &ê $ˆ)
D@&@0P¤¸TÀòİ¢è„²%GcÀ’` @* M@8(h2 ì‚0’A'¢Ğ£ g±KVH†™>IDª¡a¢Ád AÀbB–)é“b@@)õ‚Ù:K`)˜IP&ˆ‡(ø¡@º1Dø™šñiZÄ(Dawt’ŠÄ,a\BK)$uP]‚HÀXõQ ¸Âb¾¾ù‡¿s{ô¯÷í¯ÿõûÛ£~ßÏwıû}¿ŸÎıúpï¿¿ÿm§—¾¿÷¼şMİÿ¹ÜÓ‡sœîúONDşßÚ:Î/Ïóï­ïûöiôÿ¹0ÿ½y¼÷ß¦gÿçò¹¿zô×~ı7\íúëş~];ó¾ÂŞ÷o}¶Ó®ß:µÕsSö,şmW¾KW¾ïûö7ßÖş÷]ñ×ıßş¯^ªòü½Ö]è{x×Çùn>Ïò÷+ı=={/ÿW£/ê“İzsCŸŞ·7oÜÜùr®bşøÏ;ÿ. ò½ÉöŸ¯ş÷nÿ”-³VİŠİ…÷×İü/Ÿ—;ÇV¶Ÿ9¢wHsŸ­™ù?çˆz™`ÛÕó¯}ç´üÒ»S?´÷ıEÜ£=ß©¾}®v\wŸïŸº©QR"ÎÒß&õİ}çußıÿöwûøNUîï_G«¾L?kÿoÉ|ÿ…ën‹»?>Ì=Şg/ÛFñƒå³I½ßI¢÷Ÿ=·g€Úà[¯©µ…që:œûËçÃÖ—_	÷µãàÍ#<ß×ßgnWOÿL¿Ø¢ïº¾åÙãŞ÷Îø¾·}ÿÿßü1~½Nuïÿµÿ÷Ò¬;ÃêírUş5şºU~×®ïVwõ7wÿÕ|Ëå¾ûJwÉ{wõ}™Úõò÷~w¹ïz¿vßüÈïü>¦¿5Oíûíÿÿ÷š‰çëÜßı¿»ïô¶¼kŒûw×Şú…~¬{öùÿïöñŞ×Wooõôóÿï~¼ó»^ÿşz-ó¸­#_¿Ş¾>Ó»Oz›m·_.Ë+.·ó{ßæ[ÿ¸#üz½ü‡8'·Ÿk_6×<¹õÿs~şßı7÷	Šû¾¡~ôí?ÜÛußµÚ÷Óóşì\íÔ×N¿ó®ã´ÿ™ß×í‰ñùÿ¿üÚÛk.kYå@z?Qï×mõß¿ÿû¾£™uwÿÿ½ş}ÔAKçx´œ‰4øßış]·ûû÷×n\öŞØ>o_úã·¥ßßÿø÷éûmùû¿\È¿Ú–×»}®¿Ûñ-ü½IúíßË×x'ùëş÷p²§ıš~ôü7·ÿ÷÷Ü¯öû–¸ÿ?ñ^'ıÿ¯ıïçÑÿ·éõì¶&7Ş}vÿ¿Ÿé³ßµŸ™ş±;múõ?÷ú¾ë~ƒ?\¾³ºï¾¼õ-ıÇ®l×N¶ÿ¿Ïùõ¸ß0|«®LÏë¿SÛÉ}¾<û¯Íÿ×ã²?ı]ÿí¼æÈßö^*ş¹ÓıÂ^_İ·§hşùü_å:q¿nÛ5Ö(?÷+të{ÿy}½÷ï–òóÿí³©íı;ü?Á!½4çò›}¤ºl·íÍî¯š85òÌJæ¿eöjôô¿ı:ÂùÿÉ·¾øaGf—}¸RÿwÓ1ğß‚?zD[¿š®¶µç{ò¿ÿ¯Ÿ÷õ¿Z~¿<¾ÿz»ı¢>¾ùìZû§uOñs=ñÿõ ¥o\¶nŸşûôøÊı[ıõ$6sşøï{şßÅ]¯{şG“eøÅøó£ìúÏ?òİÿßıİ§®ìÿá	ÿ¾ßr´w³×­w{ıîÿïüí]÷şÿ¦ùx|şwWei¾Úü»çû¶İZY×Zß§"h/›†Ì~±Ş§í•êñı}·ıÚóûnt½%¾]³=Eûß™wm,v-íıŸİŞşggñŸ?¯Ù4Í÷íıG?âåãŸ•ïş»Ö÷mØ‹vã?ûïß•İKÎ¥Ï”·àÇ¿Ùş%9^üšğoŞoÿr_Š×X¯Èöv÷í}ï¾\wøt{Ûµï§wŞÆÒİ\­Ñ^V¿)Ô™şéTxçYjdÿnîƒÿ7îïs¡Kâó{×ïøş|Ø¡šÕ×›PmVT¤K×sû^Ù{Åÿ÷®~§vw»¶v^¶TåF³úüçí¾¯¾&­òüË÷{îúÿªÈşÿ]¿O÷ÍîÕûn6Tæöï¿¤o—F>ÿç÷kï÷Éiÿ¼}ìÿoõg«YYöÿßóª~ù}ç7/ÿ|çe½×ëğø®—éUñåûıf¿æü_?İÛëßvlŞôóû²ä½ÿ×QK{úÍ~á?İÿûåpú™¿ºsõy¶n÷ü?úşç{œÿåïŞŸê¬ßù_8;ìe\èŸgû›îSÕÇ;ºwı@¿÷nğìyË{­íÿÆ/ùùıÿ]ı¸ó]şñûÇm,ß.ÓŞâ’ÏÀÆDøÎ.ï/í3óVŸU;_0wõ||–ùOÑ›$ßÇk­rcE·¿˜ãŸxÛ÷Õ¦4t÷Şî_îµªÆwwóé¯÷é|n™k]¯§wò÷ûıı>uÿv÷ÿÓj{Ï#,gùşõÿ¿·ç÷¾¾×—ugùoıt>ö»‡ßÃW¿÷¯u}_ŸŞïÏÏ—÷Ô+û£|Îç¨ìşÿ{ù÷#QÇËW·¶ÀÁéïş÷ûÆı4ßk~3ÍóO»/Ï3×êËó‹sŞõ×[ç:ŸÌ—;ùÍiÙßõÿyÛ_ó;ßÿzùÏ+û~üß¿[vû¯æ§òŞ¢ùêşêğ·ŸbŞ=‡ô;?7ô¿ù·sÿõï‘ì¿ÿ¼âÕßûjwò´ıışsñ¯›ï½ı¯ıÏç7×ßÿ×íÖyn9š×ßæ~÷ŞóoûõÛÿŞòûyzwÿÓ-ÿ®Ïó·PŸ¥Ä¬9ÿÛ~ÓÑúÉlQÂSØı‹kı%6ç÷ô¥OÛk¶¦ïİûvûìGÃ"ÿ¿¼Ş›N×âÿç¾ärUOÿ‡~/üÛ÷;ÿ}­mÖ­Ãİ‡7õÛú{5É±]vÿ¿³Î¦««şÿıop{¶ÿİØ»½÷Ñ½oy}ß¾©(ÿşóÂŒ/»ûd{ó¯ÿ¿Ÿ·ÿ1º1¿Lü[‰Û›wåŸş-Ç2ÿÏf‡Ênÿ¹ûıõU+ìîÖş³oOUöÇşÇ_û—Põ–?%¿¾nî~]oñß®xıòúŸçsŸş÷WKfı³À:öä:Qo»Üª«ıæÙø»İN_÷g]dºïÀ®ÛéÏ›ÎÆ7†w~ËíïÇ¿úÍë9ÌşßË6É¸_ø=ÿ¡A¤Öô'“_í³‡cšOo½/®Y7÷Wiãû&óÿöJÚ±~÷óV»Ûdïã»õ$õã›6»ùiæçÿŞú›ï=ıFeÚîJÙ¯e¯ı®ß¿Qû>©‡òíé5wÿ¿œØëß¹z÷x7›3÷ÇäşôÚcæ~öåÖÇ©Ö?7tSg¾;û§æ—Êë ¼ÉWıÆç÷ÉßÍ{»ÃÛ»²øÿ³úŸJ7ş~óçoô&Ş?ö;ú+?š]ÏåÙs54&Ë]gŠ„ƒ~÷nŸü1åß|ì?do’Õç5v¿ÿ{ÚÖÊDğÿûÛşÇ÷õtşÿœï¼wıõôÿç3³—q÷ú¿ßwï7D¿´üŞ÷»ùÛÿş|Ñ¯gíñù_ÿJ~ö¥…çß{î{¥íç{&Ÿç½ÿİOıßø{k]½ş¿;xUG4şÿúİ­ñ½oïu';ÿû¿¿îÿoÉoëöµU÷‘ïÅïòwÿUÅşù®Oı—£»û¿8{R±ª´<Õæ2ŸW0µ.$†Ş¥ğÒ6½ÿï3vÿS>¿™öƒ`óeçÿÄ|Ï.ı]Éî>÷ûÖ}ïyr½¬ÉfõÓk:h‡ùòÿ|yïç_éÓFÏõ/»8‘ú{~'¦ÿÎ|¬íÿßşóßõwûûîoİ.ÌOş‡íõg½Òxf·{ÿèuúÿıÏû<`ıúô÷İµºzl¿Ñüù¼÷ı¤ßÿÿç¿?vÉ7{_Şşïù‡ßÿ¯ïŞú÷˜£ïı7Ù|¸½wLÛ8ÇÊYÂ­ú¿ßï{~û«§³Ú†iëoøùåÛ¾ÿ7Mëé“Ö–kçú¨?ó¶öõVÎÇÛçoñîÿïş»¿2û¿Ú_>¯ÿ­tÛ½¬vù®îŞĞ—µ¥ŸÚöÔıûwş¿»ßyİ–ãı]î;çNß»ö‹ÿ²¼ÿi´ôÔÿÍsoS‹«vÄ_ÎşöÏôÿ‘İOvÕN×ÿûûıÿZówë{ã_ş?uš;¡İ
·ÿ;¦Nşÿ/—pjŸÿş,·¯??ÓÑW©WÿuºÇg÷$ïı»şg‹ÛÏs·Æëï:’İ7íïÍı±»Ámó8wk£úµ·İ7½Oıü~«~Â/ÿv6î)ø74Ÿß,%Ù9•[úù¾ô?ög³ï;ÖÛº0R”õ&½SÁ3~ßßK´¬_{ß·öØ?{õ¯¿fÆÍø^ùÿı5_è_ôŞ/AyŒÜîËŞûßø×îı;_µµ»gûyó«…_qgŸßGñßş6Çéş½íııÆ]ÿß~>^Ãï¾xãşµÿwÿÿ»—wö»ÿÛOÿÁ÷ôîÆßöû•ı“tÿïıêÌ“Ï¾ÿó¿ï¿ ¿ß‡od7UûŸFıÅvük>'Ó§_¬¾fc?[7ñÌî_²=~u{'ÿáVÊ_Ÿ|õ™ûëõ{ô~ókó/q/ÒyİÏoƒO;.‡÷WniÏïÜw9F4·òÙ“¾we}ÏÇ»ŸUŠ¶™•ıšà.òVoëüÛÕ«c×lO’K·ÿÓ¹%Ã'¡®&æUqvïÇ¹#¼x"môİYíÕç§y/ÊöÚÎç:/_½İğUó¼Öı!ã&ÿ?şŒ	©ø»şúşùê½ ´x;ı^÷ßÕ/ó=ß}?ÖÛıï÷¾õ¿×ïzæ0yùïx_OÊ^¦U,â6ß[üÿüó[í™³»§.ıtÍ_äøñgûGÎïoù¶ûíë?ü¿{ÖéšÌsK6WşÚÖêıØİ½[ıÎ¢¸ÿiîÍöå»_÷½.ÿ¿­@_õßÍ?÷÷ÿO±½õêİŸïİu÷®œï¢¹ÿ·j¾œ¬á.ûÿûFö–~Æê_ù]†ÃÙ÷÷Ÿ|{ì{öo¯øùiß¿wtnßÙóûsÉoÅï·¾gY“å?ëµÿ~Ob½¯•ÕO3·ƒWE_MßñåÿZ—OOŞÿ­·çÓúÿ`µ»÷šÀgÿºóÇ?ıy÷s¯Sı&w{½ÿv³Nûå~½Û6o{”¹ş_œ}r¾×+ágû½EúíÏßÉ_Ü¼ªjX»šíŞ?ÙÛùšİşßGå¹3ı¼ìâù‹\şOº¾­N­oû½Úìİö·fÿwİRğÇ÷§7üÖ¼7ÿûÿÚ¼·i—Qÿ³tÏ±ÿódz-}ïóº}e¿¿ôüÿ~«ûÛ¿“_Yºï6ëŞ÷ÿ_ıç²l÷·÷=z»{÷óıåÓ¨¼úß}Ï`úçÿóo¹ï+R±u½½ş¨ûÙíö;úŸß~zıû_£ïú~§Ùö÷w¾Lgÿ¾MÏ¦?êú}÷İŞ¯x¾ıŸÿwµ;w¯(õ©z·ö{ô¿ş]{Óıßº‘Ã/4oıŸßÿ6_Û¯Öß/á|Ú½×¿ÿÿ·Yÿ¯·+Ûnleî‡ôÙûÚŸ¶|›®İ·½r‰½¾¢–õÛ?•/ó»v¨vY®/;=Ú'°šâp'ßŒİ­íûÿ“ëÓ4{=ä²íIöæ”÷%çúº ˆs?'¿÷óÿİóş{«ª…Ó6Í.zKı_Ï§×wÕşSEïÿûÃ’÷İK_·=Êt]==âwtainer, dom.isBlock));
            walker.next(true);
          }

          for (node = walker.current(); node; node = walker.next()) {
            if (node.nodeType == 3 && !isWhiteSpaceNode(node)) {
              rng.setStart(node, 0);
              selection.setRng(rng);

              return;
            }
          }
        }
      }
    };
  }
);

/**
 * Diff.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * JS Implementation of the O(ND) Difference Algorithm by Eugene W. Myers.
 *
 * @class tinymce.undo.Diff
 * @private
 */
define(
  'tinymce.core.undo.Diff',
  [
  ],
  function () {
    var KEEP = 0, INSERT = 1, DELETE = 2;

    var diff = function (left, right) {
      var size = left.length + right.length + 2;
      var vDown = new Array(size);
      var vUp = new Array(size);

      var snake = function (start, end, diag) {
        return {
          start: start,
          end: end,
          diag: diag
        };
      };

      var buildScript = function (start1, end1, start2, end2, script) {
        var middle = getMiddleSnake(start1, end1, start2, end2);

        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 ||
          middle.end === start1 && middle.diag === start1 - start2) {
          var i = start1;
          var j = start2;
          while (i < end1 || j < end2) {
            if (i < end1 && j < end2 && left[i] === right[j]) {
              script.push([KEEP, left[i]]);
              ++i;
              ++j;
            } else {
              if (end1 - start1 > end2 - start2) {
                script.push([DELETE, left[i]]);
                ++i;
              } else {
                script.push([INSERT, right[j]]);
                ++j;
              }
            }
          }
        } else {
          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);
          for (var i2 = middle.start; i2 < middle.end; ++i2) {
            script.push([KEEP, left[i2]]);
          }
          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);
        }
      };

      var buildSnake = function (start, diag, end1, end2) {
        var end = start;
        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {
          ++end;
        }
        return snake(start, end, diag);
      };

      var getMiddleSnake = function (start1, end1, start2, end2) {
        // Myers Algorithm
        // Initialisations
        var m = end1 - start1;
        var n = end2 - start2;
        if (m === 0 || n === 0) {
          return null;
        }

        var delta = m - n;
        var sum = n + m;
        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;
        vDown[1 + offset] = start1;
        vUp[1 + offset] = end1 + 1;

        for (var d = 0; d <= offset; ++d) {
          // Down
          for (var k = -d; k <= d; k += 2) {
            // First step

            var i = k + offset;
            if (k === -d || k != d && vDown[i - 1] < vDown[i + 1]) {
              vDown[i] = vDown[i + 1];
            } else {
              vDown[i] = vDown[i - 1] + 1;
            }

            var x = vDown[i];
            var y = x - start1 + start2 - k;

            while (x < end1 && y < end2 && left[x] === right[y]) {
              vDown[i] = ++x;
              ++y;
            }
            // Second step
            if (delta % 2 != 0 && delta - d <= k && k <= delta + d) {
              if (vUp[i - delta] <= vDown[i]) {
                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);
              }
            }
          }

          // Up
          for (k = delta - d; k <= delta + d; k += 2) {
            // First step
            i = k + offset - delta;
            if (k === delta - d || k != delta + d && vUp[i + 1] <= vUp[i - 1]) {
              vUp[i] = vUp[i + 1] - 1;
            } else {
              vUp[i] = vUp[i - 1];
            }

            x ²™Œ€‚
ËCîÑH
+™1) ÔÁ°Ò@@ÌÜ¤¯F± Â¼1¢âÚÎLV	R"3û!
^¨8ô4µìÊ¥âG”-È	(®D$fƒ‰ÔV0T¬ #Aà¢[ÜdèC‘ƒX¶Ì›10¾öHâ(AI¬¿İ]Ú~ğÚÿC^~´äwëıy>µ¸wû[gû”×|Ëÿóşñæ–şºŸ·¿ìgäÿö®Ş¾ËÿôşÏt±ÿ,}åòwÏ{ıéû|×Sù“ßvk?ÆÇs}vÓŸ¿×ü¿ˆëÖ¿zŒ¥¡ìÓ×½ÿïŞú+{?“«©övŞùy{[¿õ~ßy¦çŞ‡}}ûwûú7~½oçü±şı³îşë3~·¥÷º¯ûw¢êÎÌõŞ¿ó}ûÏİğŸıÙ?Tşùÿûıï+_óÿşO½¯Şıß¶(?×ÇŸ_]k«V§í_ñ÷{/@[îQö=‘”÷öŞÏ=ÇúÕ§Ï\ÄŞÉíìu|ıõUÿ]¤§Ñ9CĞ† DÖ2*`,,ÀY¤ !@ˆâ%RÆ@‚ lX„*K¿0:Cx¡¨ÜPœ¸‹€x™¸  @\¦pĞ(W‚É%ÇRí7Mç2q²JxDÀPÃHmiUD@ G!DpDä E€hR$DÍˆ»#?ùƒOï·İîÓÚÿï;ŸÏó\ÜWÿ÷>ó[îÇ¿”ÿIÿz·tïşß¾ÿÿ®ìıÎ“¯ÿ<í½ü¹g>ó¿Ç{¤;üsnÓ¿kgô’ˆûv¿]ğwÏÉúï%ı~÷0—¹Ş§çvÖóòòïõ¸öa;a?63÷ÿ®îœß½|û}ÄüU×å|“ªªOH€$1gŞ¨4 fOg$B@‡%HŸ»j(‡æhL}}	Ä±!OO&èAFGèaÁ0ñJ–H7¸€‰\Òp=H†'Cß •u6Uf=® È’ÒV˜bo›(PñUÈäuáÃµ ×2QJÒV„ã]˜	‚Æ1ÔR \u¤NÀ¨€·9Yh©‘Ø’v†¨BÚËÄÀK"ÂÀ`p@@àáYU2Á bl°C´C,@â0[Ç’cÂŒA@rQŠÂ¶pĞA`´„æÕ 1SËà“ù&Ìj+$Ìªşí.ÿûµ_‡ıØüüÛûú^ÖìÿûïÿÕÂß¿9ç?üz{ç}Ûï.yÌ½ûğ/Ğ^?Ço÷ïÕË÷öÜÏíşò'ïÅ~Ã©õ}ßœİßşŞxZ×ä»ŸçåÒ_J¿¿_?÷¬Õ}ş§¹¸}µ¾}Ÿwé/Ë[÷g7çß}tßúû÷µü·‘ÆIk›aêÔ„K€„â p(RRN	sò£"€vI - kdÈHNt¥$P$°•l&@„Hœ,¥Š‘N¨@Õæ£‘14@ñòR”PÌ’ 3WŠ¦˜QÒÉí¸#S¶aY™0ºdQ İ×âßùsvßy®«õ6çğıg&ü3ô?ınü³ì{|~ö÷ó>Yâ÷¾íÇ´)Ÿò¹ûŞ¼ïÿóØöÜçÿ÷>>~CvëüV›û^ù¹~Ë¶ëZçˆSvsWËõ¾Må·ÿ?ÑÛº¿ì?û®p¿öOÿ·ïı½¯óú‰gşı?ßÿÛ+)çKÿíÿìÅ[µÿıtçüßÆ‡z×|-øÿ½Ü½n¦±’ıÿ÷}m¶÷oŞùu¯ùÒæú^ÍÕÖû£F>ş³¾ıœ½æéŞŸ‹ûvùÖÿ×Öx>×–ÿ¿ı5uMöşÚ÷ù&÷¿İ¯Zü~M¾ËwgştØWıııo~¥Ãâ Í4K¨ $BŒ&ƒ¢¢¦" ÔM+hğb˜È6´¬b’ß¥¿&GÀzªÒb!<?€¶µ3Bèé°-@b¤`1 H4ËF(T!ôBPG°Ä”Â§2 G^æ`ézb,ˆáRmŠ ÀEŠoÉsşì÷©cıøí·Ûõûşsæ´Éµoóş{êõ^Ûïüxy­­ü8®óıßïyıå¾îıøõ=õù¿ık­»:ÎÇpo¹+Pùzÿ¬ëüÇZzişşàFoÿîüııÁ¿Q{ŸÿNÑî•öêïïÿg¿£Öyï«…*ï>ï¦ÿ“İ¹7üË
XùX„@/àm Ğ
	N‹P U
‚âBÈ„ip£R@ñ7Fß$bl¤RX2	·DÊñ“PH’—¥Ÿ§œd6îà†ÖC‰‘ƒÜ^0`à*óæ˜BYJ9(
Yâ‹A‘,@êA@uÖ(X6hC \ÜÎ,«Ò(…f,Œ16EXÒ¶pC!JÇšxQ‚(œ è  §­ô„P¢†²Õ‡Ø<e!Ñr'62×Ì âÃj;ÚWI°Œj l~€5 0*¢N+UĞ@0dB©ô=kQÕ!Œ÷º¸Ô¿ïÿ¿gÑW×ŠéÕŞGë¾ıÿv÷ßYÃ)şeÿÓıî—Q÷÷ßlòÇë÷º¯Ùzş¿?ºßxi¾éïóŸÎÅÿıÌ`uÿÿ}ï—«Ôî-Zqÿ«ÿú‡ü^õıö¿ŸSëúÇı9ÕfLn{áÚñºsù¿ï¾Şòr}ÏC¼»¿0o±Àd€UWh$D¥daLjåVEàà¤¼i”æxÄñ¦ÀÀc19O ˆ˜šP0„ fR0Y<LÈ(bƒ‚`š“RĞPP° Í ÈLi0Â£J¡À²%j‚Š#‡Ç³ˆ¥ZPyÚïÒïzîG»†ı÷ûìÿò^uïS÷«»úµ<ÿÿïú+%ç½?ßüç#ÿÿzjáá;ì&Œü_{ë9nâİ>};îÛmıîÎ8³ùxûÅšşı{ö'ñı{ÿ¹gıqÙæ|ÿ¹ïëö¼Y‹;÷ëÇ'½5¹oßÿÿïÕ¸ü~¿oÏB¯—íN¶êoçü»èØvİnïùëí¿b®o×w—şû7z>çş¼}Ëy­µıñ«şÛÖÿ›_²?z{ÿÏşí{ŸıßùõÿmìïÛä¼Şëg¸÷•Óÿí¥e=?gŸ³wr=ÕŸçünÿVÕ÷ßºK¾Fø^¥÷î½ò+»ÿ:ıu¼Ú«ßkûÿ©2¸†0 T0C¢Å
Gi@M!å ğ(WÀ	PjQm¯$´d%IsaQ€2ªøü‚3b¦8#³¬ÀÖˆ@Ûc6…ŒĞ†òÀ…ÆğIœ&šITCÑ6ˆè`PCrÜ’f‘Ñ" @úF%z7 àÈF1R­ÿºı®İÿÿ/57üşñŞ˜ŞßmÇï?³N~¿¿ûåê»-şŸçİghaÍıóªìzz›Öë'õ>	7ÏË÷üïíÏıışàÜ?ën—]ÿİ¿ç²¯ÿCşì5¼ŸK7‡ëÓ¹¥o{_ò•çì»Z7vÌõÕÇÿçÿfÇÒş»ÿ‡0Ø©Ö¡&G`KgÖ	qLA€ŒÇ€ |´	d€œ«E$f[ğp1N$-€Õ ¢P		Å4õ¥‘v(q€	)M$Øƒ%¢N(˜¦­p´
ŠŒ¼åÂĞˆEJQ9,8cá 0‘ Í˜ 0`EC ”@-†	" 	\F6‘EK€ˆN ‘ EA¬ÎxĞˆÌğÅÔ@¦¥ zQ+ÅE¡•iD$Åh·Õ…‡€dAÉ›D‚Å‰ˆ tÃ£„˜B0¨%!‚"D’ã)qS@PK€ˆ!Z	Xˆ½¥ãû×ûúv¿mÖ}úÚßñïÍ[›{ÕïˆûÍ?ïa}şÇÏæ?×}çï»Ïı»ÉölÜ{ş¿öwv·8÷EOÓ»Nøïßü2éL…nw³·T]ö}ï.Şİl¸=û,~ŞßÿÒWÛ¨ş8ßz¼2÷Ÿ}÷õØÿïŞûáÉışZÿ»u ÔL4&(’	^BÔ­H	ÍEF\Î Õ›]
*9ZQòp@8>R‰qrÕ-Î1ZDõ`fÊRåXBÊš[K„(è¡€b…6TÚŠJ8_ :Ù¤pZ’·#ƒÉŠ–mö–Å··&ƒ”ƒ¡–J oTïšP×ƒ¿ô}?‹ÿşlşïyÛÿ¾üÚÙ-ûk½¯o[×|?ÿcŸ¬¿¾Ï%/ò·¸òUíÿkÚjõûGë?¯şßóéÿî»úsNQoûß×¯¿·¬¿İ÷’ò«­üğş}Ñ/½¤ÿşŞåèÔëÔñï×î¡O÷óşy_;ïxu{ëxFôÍû¶™½h¼~Ú»¥Cÿø_VüãY>®Û«jõşÿÚ·^·íî¯KîwşÛbşpcgõ|>zßü7_/ÿS\‘ı_8ß?çõÇµÿlÚZ?ßïG[Ñ¿Òß÷vZì÷ÜüO÷‹ò¿Åõî÷÷íî.§»ÏCÿïózó}õAÿæí²ÏÚù”?Nşi]Œ®E
R
!ãbT	DFl QÁÔhË Vq‰A	4¨”øBÂŸ6%
B‚P"|`Š¢‰À„%„aB9‰fô^aD…Xˆ„Ê|GÇŠÄ´‰5q…€@XÉ !ª$0BI«DM¡­HC% –XÙ]º]wçó<Û³¿··1É¾î¸ç÷¾qÚÿj¿Üı¿jş¿ß¿ù-oOß0ı§ıİ¯¹ÿ¾ÿîí÷úøõ>xí¯óBÕÿş¶ÿ'{İüÏï÷w2>[R²é?şÚÿòï×ûûŒïòÚÿæ´¨ÿ~û¬û¯³ÿİ½=ÚWr§[zô¿„Z@Š­0À2KQĞØ
X`\`•S ¤ a– GEH¡q‘U `"\ˆ†ièS 0Bˆ*(‚‰”PÓ–R„¬\8	7Ò†+)¿‰OF´DA!Â*×ûEÑAQ ÄÁÂŠ¯J„&ÿfY­¤‘ªùSZ4(&)/Bç•«+2.ğ•	B“@É	„[¶õBP1ÈíÆ“02htgĞâÁ"¡€Ê8Š§”† <SÎÜÔ(CĞÑì%j8ö`°€F’\pî€€OND¼ºR‹í1˜7»Ê"RÎĞµN³·Ïßî»ßŸç¥GÍ·÷/Óuíÿ~R¼~¶~ıï÷ßé²o¸üúÈÆÌ¶÷İÑ¢ş¹NØ˜¿ş×•¼KÖÚû~ÿÿù÷Ï£ûË÷şÛÆÿ^öñ“ÇO¦úıv¼û¤W»÷ŞÇ£Ïİîïï•/Yêû÷öÿ½]¿ıŞûô[İÚşğÌ÷soqï¦      fragments: null,
        content: content,
        bookmark: null,
        beforeBookmark: null
      };
    };

    var createFromEditor = function (editor) {
      var fragments, content, trimmedFragments;

      fragments = Fragments.read(editor.getBody());
      trimmedFragments = Arr.map(fragments, function (html) {
        return editor.serializer.trimContent(html);
      });
      content = trimmedFragments.join('');

      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);
    };

    var applyToEditor = function (editor, level, before) {
      if (level.type === 'fragmented') {
        Fragments.write(level.fragments, editor.getBody());
      } else {
        editor.setContent(level.content, { format: 'raw' });
      }

      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);
    };

    var getLevelContent = function (level) {
      return level.type === 'fragmented' ? level.fragments.join('') : level.content;
    };

    var isEq = function (level1, level2) {
      return getLevelContent(level1) === getLevelContent(level2);
    };

    return {
      createFragmentedLevel: createFragmentedLevel,
      createCompleteLevel: createCompleteLevel,
      createFromEditor: createFromEditor,
      applyToEditor: applyToEditor,
      isEq: isEq
    };
  }
);
/**
 * UndoManager.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles the undo/redo history levels for the editor. Since the built-in undo/redo has major drawbacks a custom one was needed.
 *
 * @class tinymce.UndoManager
 */
define(
  'tinymce.core.UndoManager',
  [
    "tinymce.core.util.VK",
    "tinymce.core.util.Tools",
    "tinymce.core.undo.Levels"
  ],
  function (VK, Tools, Levels) {
    return function (editor) {
      var self = this, index = 0, data = [], beforeBookmark, isFirstTypedCharacter, locks = 0;

      var isUnlocked = function () {
        return locks === 0;
      };

      var setTyping = function (typing) {
        if (isUnlocked()) {
          self.typing = typing;
        }
      };

      function setDirty(state) {
        editor.setDirty(state);
      }

      function addNonTypingUndoLevel(e) {
        setTyping(false);
        self.add({}, e);
      }

      function endTyping() {
        if (self.typing) {
          setTyping(false);
          self.add();
        }
      }

      // Add initial undo level when the editor is initialized
      editor.on('init', function () {
        self.add();
      });

      // Get position before an execCommand is processed
      editor.on('BeforeExecCommand', function (e) {
        var cmd = e.command;

        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {
          endTyping();
          self.beforeChange();
        }
      });

      // Add undo level after an execCommand call was made
      editor.on('ExecCommand', function (e) {
        var cmd = e.command;

        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {
          addNonTypingUndoLevel(e);
        }
      });

      editor.on('ObjectResizeStart Cut', function () {
        self.beforeChange();
      });

      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);
      editor.on('DragEnd', addNonTypingUndoLevel);

      editor.on('KeyUp', function (e) {
        var keyCode = e.keyCode;

        // If key is prevented then don't add undo level
        // This would happen on keyboard shortcuts for example
        if (e.isDefaultPrevented()) {
          return;
        }

        if ((keyCode >= 33 && keyCode <= 36) || (keyCode >= 37 && keyCode <= 40) || keyCode === 45 || e.ctrlKey) {
          addNonTypingUndoLevel();
          editor.nodeChanged();
        }

        if (keyCode === 46 || keyCode === 8) {
          editor.nodeChanged();
        }

        // Fire a TypingUndo/Change event on the first character entered
        if (¤şí÷ıÛúLW¦o‡ö„öºÏ”ÇzgŸ_fı.—jí=
Ÿ#öw±æócZI}·¥²ÿ_¯g¦¤íßG;ãV·ó?v2ïö¹ßÿıfµ.K1gö|G§ÿ«Úùı}³ûÿİá“üç{]ŞëÃİ§ §Sıç^Pagço-ğï×Æë,°"ÔÚ‹(|5 L1¢@¢´‰`ŒÀ€.@II¡ 0 	1Ğ,' í!ÒµN`Œ‚8!IÀ$€0 S0
%ÈŸ"ª(c !À °=Bt`#`*‰V.å€  `%*AL¤C„ @ã* ,0² ñ 1±#	€€H!ˆÉ@Í( "“l1Iš±€&‘`
¬CŠDC ¬@! @8 ¦p"2 ° ÀS „*BåDÄ§1H‘
ÑJ†Ã´38Œ\P2¤8¼³A@ :õEîÄ{Ÿi7·§ïíşó4ã»â4ùıaœ?Ëb·şèÀµüÏßÏşÆyüï¿«ğsëâ_æÏÏ¹ºAæ½æxÛëL½à¼¾ïeÿüCõ]¦$Z:Gˆ÷n¾òßÕ‡oİÊOûÕ~üKßßÏó<!å¤?|ar|§Ì—Şnİ0è»Bv3ÿ”#5	`DN˜s)Hº$`0   5*` Œ"5¹ À ”œ: ĞB EAâ@LÅ_¥D€(_s]F¼áˆ6P<t‚)£ÕÁ0‚ ]HÀ˜M ‚H"à6ÕFXĞP	¢r$‚Œµ]³ŠòFÒéş×¾Ô†fãr”ñìùûsó)á2]ÙÉ<æ½/¡^§¬İKØsi)şŸ{/?}?—nnâÏêóÿ—ÉaÈ­Fj$!î¯ñì¿f½´¯¿İ©(f¶/oÅÏÖğ_«œÍwÏÏZ=¼Ô‹¯ËøøÆë‡Ç#i ¿¯{|¾şÏïú´Kûg½§%ÇFy¾îöOÃo·º|çò;~ÿ¶æ¤¿Ë(Ğ7Âzù»İïñ‡ş]Ñ¹İÙ¤6Ö¾3ÿŸ•,1Ï]ßõ7Û?Üµ”÷çİ\¾n=ßßÆW|kçİ¥7ï²ô¿¿Şw_åw¹ù÷ë¿<ª¨[xÿ¿~¾9º9‘°BAÃXˆz¢$À FÙJ
E "óBHƒa{J ³–„Ê¹ˆ™a¡úcŒà+e*Ã
 $( °4› ˆE¹€Š¢Å`A¡¥Xm8‚Á\c1 Àj@Ğˆj;”/.@Ä‰©ÃÃaGAp„@–‡ÿÍiG¹èyœxûË¿—Û+<íáÙõs§¶s MùÒ_¿w5·ÌOÀwùz³knÿÕÅîöû¶ßØXu»¬ïâ*e²ô­ù‘³ÔÏĞ==¡·Iû¾s¿Å¯M÷™÷wş—ÇĞCd9^‹
£ı×U¿fö‚ÕÉ~Kû5ÖÜÓ54˜+h
‰PÂ(p"A¬	€À5Ã ˆÒALbÂ!(!ˆ€KIğc@9A*p zbá2€,‰UÀ`©†İaFPb" À : „ TEPfÆ“ÀR2`ˆÄ†$"€¶	R ‚0}2JD $Iô*S¤-(hŒ°„F•£ ãˆÈœ2 £@0ğO`p ãP 80%ø \^
( À€º(;À‚# KÒ& B”™A$21B ¨ $ JlP)D@ÔÈ”3ÄDÕX/t•™ú<¦·ÿÿ[/ŸŞÖ§9ø·=ı¤İûë{ÿ·Û··ÙÙ¥¿Íxm]À½É×ºİ°ûä€<®)xsa'Ëåñh¤Owÿù¶ößéæÖÒıò¿Ïá×ı6šø„u{Ğ$¥ı¬w»üÇ×¿ı[»º½Ûc¯Äó~µ5œ3½n¿‘BF!0N¡‰3Ä*B§Ğ&H„ ††ALèªì"ÄD°,BHĞ Xã  `,€À¯/ !ø€Œ Ú˜£!ÄèE 'Aî	0JjLk°%Â‘ $uJfA
<‚²4 LØv  Rbg5€¾û?ßh%Í>ë“ó1tŞÚ
ôWşEÚÍ­ÚãÏsÿ^ÛøÍÍgÕ/ŸÑoÍç:KÌ÷ıİ?cæÏE·k$_ïkY9£ıØ¶é…ë7}üİùW*÷?¯Î¿#~z¹¿~™çÉüçoÅåû¸Íw?œÇûöëCµöº.şww/Ê›Müß™?õ¿§>kØß½Ş7ôIMàíİ­—ÏìÇmÇ§õ«†dóÏwc¾;×ÿéÿ½[¹Í¨ÿ·Ö±/`ûä±ÔN<Lî¨c['z|Íç?«"”mt%øs'÷ÿÎGoÿoÌİWQïÕhşş¿ëûnğ;·É‘¬ísxîà»¯Óqnê‘rÀ P(ÀŸ
  !SA  &2*™I†D&*Ä…Ü•‚ˆ¨ä2ØoœDÅ" ğ¡‰AD$  P!H´	¸º
á(@dtP*Š	@¬¹ Ka¹.^"	¢¬ 2ŒÁ h"A "s‚  ”P \N}5ÿú'í\¦»ü¾ó?ˆÕÒgÆûÑI/) o×³ño÷ãáÏMUÖ–Y}vNy·ÿşŒrµvûî“jT·#Ÿì¾µÎ–´ù´_úß‚÷½un—ºwÁ·ı¯”ùl9¾k|iùeK’ô¬ÍÕoó¿ûç/¿¯Íô/ªfü÷súÛùw@®A a*0˜ ©uZÄhAš	"À€D@| 0±L€`U 
pEÂÂ„‰`Q Áì!¨ 4Aà";¤ Q$ x( „"0$£	@ 
"' €•	¤'²„%
²­BSGH=CªD^ §’•E)4‹ÀÀ DàBˆ D$€D`b&Õ„@$Jú®  R qdÉ`BBÍ  “†)4  …ƒÀ€à7 @â °X`ÑQ€y‹¬` KfA	 ƒÃ‘ÉĞ 6@‘ˆ«* œª%PŒa(6B …|Ú}¿s>…MüQÊú1=¿_ÿoeräo÷2:ıÜß÷7ïußÓödOÎ×ƒ/ ´×õuqıÓ?÷¢±mViÒŸ·éùîùn2¿7_ÖÛ¾äİ?×;ïÏo3ççÛ¯n›;a~ş#Yûûë­×UõGvƒïç/=ûÿÏùú¿Yù~{F˜D2Kq(Èm —mI˜D!}O°Xœà#a% &e`Ğ˜ †B(Ä°Å¸ì&‹RA	ĞXRĞUÅ@X @Ä+ 0İ	IŒ ‘°€b0®D…à/ „h‚¨	02a¿€@Ac†{ü8ûêÃèGßı‰…hê´Í¾Ø¸_şÖNçez›´uÏ;Í¹¶şqáï÷×Œò›$§íœq•¹^—9¿ú7ø•gÒï•gt İÏï›õÕ8Ìß¿?wŸœó¼O«WešùåV¾óïI÷–Ş&ï_n2Üv^·ÿ¹Êè-—ó1Ã÷U¿—_oq=Sr¾o-7ŞFnqşÎ;hûÈhö÷|}üä}®Zv~×yÔIû½K»wÌŒu»©x/ßWÕ>ûëïò·«w˜úW½ô²®ù4ÎtââŸÖ­ï:ÿğ÷¯æÏÿxÜô?´ñsış×ü4äı¹õO•ôùı+Œ{bw¦µî«M¨/X " ½#!Qà â<ƒ QĞ+C@@Ä$ˆÑ !,qKCP”N‰(!,‘AGi¢ 8,€ RÄ		B Ä“Cà ŒT"P(JxjÀ™€  „Bƒ± r”†F‰ ‹‡‚   “à™¶üûò¾¦¯vg¾2¿¤Ñó‹ñS—2ü\ŸVê?_îäz©{ü÷ı¬ëµ?ÖÕÓéó¦Wv[ÿÒ/w#ßú÷Ç_é”ıÓçw¸½LûÓzOİuñÊËÕñ_¿ï^ÄlMö>ï{ğ{ßr}W|?şµ²×wÓü_÷g2Ÿßÿ|gÿmr>;BLŒ\«‡‰ÔÑbK‚HR!PF%@  ø‚ '	e€„ AæLƒÁ (qÈ *T 1@<ƒ B(‘àƒ˜É0I‚Ğà™€,±"t˜ÆB„ -ä&	BĞ9ÃE !Ç`„Dx@ã„lˆ‰qèBi @Ä Uj]
€”€ŠxK¦	;°03“‰	’ ~t²"$Á" f1,£ 	…   Ä’C @FÕ)G(!@Q0 €C‰˜€	àP‰9„¬Q>¥(ëp„€À`€FzÚÖ®¤,e 4 ¤)åòùûöëş¿ã¿{ÿûî ÿ´òô×üÛñ«“­¸ÿõ¾ş'¿j—s·FÑz?á]/ùß¾µüoÌ;m5óW:eSW5ıZÙËz„[«·ùÜZö_ï‹Õİh¿ıÿµëo·My!Ooí£œbKîd{êáşßF.Ë¦>ù}ıóÜpd$Ê@(T @KÁ °j €€l$0˜ ó˜` @,% ,ÉœÈA4²˜HB¢åe!j¡HAD 8º@§hCèAŠˆ’ „@é`ãkğCà9£0¸0à¼3&ä t4@…áµø?¿şÿ®'»rçí5º¸í÷ï¶?Şûı?Ùş>³«<ÿ/¾L×÷ı•éHş+§‚uüóı‡klF>÷7UÿçÌÿi÷ñóüt7Ímâë9¿şÿb˜¯óy•‘ëò‹°ï]o‡ÿÎ3MzEf†œk¶øßÿôïÓå_h9•’İM?ÔÉ¸¿ëÿ—WlõÆ*UÜzïÆöók¼¶ßEè‡·V–'{şnó«ìÙƒ¢ÿ¨ıë÷¼?a¿ì­RÿU¤y£qÚíYmĞÿÇü­ÌŸÆpw/6}Ÿ­ß;åšÛ¼ü¹‘‰wß3§½i™9a¦Wİ¯İG,ÒâŸæl‘G3ÿúÖ62Àòà ¢ÈLğ©p #0{Q (¸(3ØÉœ8bPBB0F`‚TUÌ@À„©(‚Á’)Ñ l F#  UXx07Ã°PZrÆğ:ÑNM¬’&T@P€)¨Ê–Sx$ ú€3L€;a    Šf€ÿ‚÷sAŞív5¿§wû±×ôw]?œí´wİœmâıÇÑÌ»ï|o+ı1&{²¾|OÙv†Ïğ®é‹Ôâ½ÿëÿÑ/q÷ŞkÂ~Ş«oÛáßÕnû—çÿÇöÌú>ıî­ı7ùïÇïğõwìTõqÿï¥ñ×ışıçî7÷?½m½pH„ †lX‡´H‚  H€ÁÜ$†ât Æ" 	·C2Jƒ¨xD&À’¨€˜„XØˆM™€D¥X &‚š`â¦! šˆ˜L ¨ANa¥˜ ÆÂü€$Ï)‚!“h ©"È›M…¯" 7²¡aÚ6”© €Ff­àb )š(@,‚$R¨ÉE	Ô‰¯DH…G¯›„P#Äˆ8AÉ+P‘YH ä !@®HË l‹Ì¡C¹”8‚ ëÉÍa@ÀÒDC•I´N€`3@€	&HBÁ`Şû¼O¸¦~êhç½Ş»>ùÏó–Hk0=­¥ooºîİıÿ˜Û±ëş7¹js~ñ8Ü4o~üª·ğ§{ş”{ÿûo/÷×½ßgU¾5µÍĞxÿïí»Üï{/ñ7ÿ}tïuÒÿ—mß~ç¯)£ë{t¿Ùoúúxõ¿İ®óÓ „2ˆ
 i  ÖTËPÀã¤Ğ-¶,'@ˆô’4F KĞ” -%dR8d“lE¨†U€ƒ¬HQ@Hˆ"Ú¡Á ì€ À­£‡X¶’(r LÈ ZÂÚ”Á	@0€¦¢€ N	Î}Jıÿ×ù¬÷ZºhÉş‡ïÿ£wÿîW×ûÿj7øumíßó_nö¨“±¾jøyy³ã°Wùáİ/î{û¯æ÷gøş[4ı½ó~5|7Öñ‚V˜w:¿;+~=öıÙöÿõ®şİ¿^¯¯×ŸâÚÉrf ’N=õÌówißÜıïÿî]]Ê//½ûŞÙ]YÿõşÛıKøû­ûÏıİ»óÙNÓ§|‹wºÿ·ÿOÏşş¢_»öÿRı{Ú;ıÅ½¿«ÿã—5YÇû¼ßş·çüùoúš·ÇÕôïÍëWöSÃ?ë›û.yÉø£M|ş²çù{gú¡Q7¼|ù9;›ïÌ¿uè!,@Ç‰!ã P ¨4Ôy	$	'ˆ€Â)$¨  @90AÆ9 89âˆ]E®5¤8)¹x"d‚P©#0ŠP„Ù0ı.HrT l‚(¤¢"a&€àdÈ‰0 H 8¤f-#°A1A¿E©PZ‘D ¿c~]>AN¾§>'•İÕ^ÿƒ¿Ï¶ú¿õp´¼mZùîç½´v=ZïÏó±@ç¹înıWµÙ]¿æÿEü¦g6ªOóãû©cú9ñó’§ßöüájå×­ÿ2Cóİ¾íÛw÷³÷ı9õöu‚»ÃÍ)Úwÿ~óKõ·ïîÙÎşzíd‹ˆ¹”àZP…¨`$“ Ê*PEÂˆ	R€"„<	€`	…… $Z ·QÂ×  @±A€ E@’`
û I‹ zl ‡ !@
Ğ@6€zQÇ€4€ˆHÂ EÌC6”/	Ï“(9,"p‘M!PÂSh`e@ŒãD(„ rSB)j@À! Å8e$Aà†ƒšŞ±,ŒA, ‚0Ä&ˆ@] œLÎÖ€¢$  * @&I! % ¬¨%q02‡QX@!¦  (0Œ¨DÃ°¢D,šâİğoÿ­|ùíÖûçs»lÏÑÜëîğêŸÿ6öœm{ê°?wgı5ÿîg¿—ãıÚn¸'kşËö1ü®öğë-pºŞc¼33öÿ/i{·ş¸üOİüŞŸ¿iVäîÚÿiŸ{Û²zçüUùùÎ®±A}I•ßÿ¿ıÇÏ|Íşoÿµ†…¶ ¬° 1h9	¡ P	¡‘É3!b$‘FŠ`Ø4A‰® 	H!Â p08‘ub’hL  ¸ 0 ”@b‘C
RØëÂ˜  Ò
 x<È ØŠ¼Ğh(vMEÑWŒ2XPI€œY<:€#X@`DƒĞ PHŞ¡««¦İ¼]{ÿ¿É{	~şóPwß'îª<İoÜõ³ùÿÚ“êÿüäïİ?ïÉ%–½íÿáå?|»ünŸ5Çˆù?EÏîÍ×ùİÇ}ëë5-üßıæ¥úûvaşÚü8ûå¯è?Î¿)ŸŸ?0vİ[°ï0ß»Õ/ò™¯•‡âM¿,SİEß÷TÓ÷3øz÷I³}¯C]nCtö¿oûŸöœß¨Ö‹xºí7¶ª~ï~nÙŞ²ëïy/U<ßö_C9ê|æÑ_{î&ëÌî¿ÕÊ·ìùr~ñúvÚ…Üìÿ•ÿøÿÛw6Ş÷æ·¼êşû]ì¥ág÷vèšç~õ¡’Z(Åâ‘ÄB$	Ğ ƒhJ$$gL10È CP XÂË@àpÒA!-$0 ˆBBP Š(S0ùÂQ(%‡Š¼š‘És0 € U+!ˆöò £@””0 Få\ Ôª`‹äÚüÿ§“ÿÿÖàïÿ~\şdÇ×·ÿõC··v·vÿı{Ç§nâ7÷_xÌúçK¶û¿Åf•Í»ûôy~±Åx~üüÛÕyŞMı™îËu{éxúÔ{ïéâÿw·âİûÑÿ#?ÿ7ñÿò‘JWßï›ş]7¦¯’WoûVoÿ[·Ì7Ü;"*AÑˆ”`˜€ `R D!FÔ9	DÄ Øë‘<Ğa4fJĞf`2  É ”` F`?ÒI	ïEÆ I>"„€D(Pèã˜ @0 H‰1 BÀè
¤ˆ
-NPG†-¨È!È@ ÓŠQLØ $'ĞG[aè@(€‚¦0 T 0-
¡°˜ è½)†ˆ…‘ ®¤ 	Jã(R1ÊP E$ !@S(Ğ4AAÑi&€= # "– 
Œ!”HÀÈ*Hš8´& /4Ä<¶J&“ 9"%Uù4E  ¦¢)(__Îîwù·ß²ïÕMıÎ®Wü÷ïÿw‰_Áèı5y¦êé­ı}øş™øû/sg¯>½zÏşÊó/}È3_OWÿ_n÷òÛû¥§œö L[¿Í?¬yq[Á·ºàf›Gó¿gÏWîï¹}é÷İßõåôİ‡î÷÷êqk›îºİ¬è’?@\ÀZ9‚dG„œ\à	· ¤0Db¦#•CğA£„ > „>2cŠ@àlæ:6¨…ÕJB´(„bÄ• ’4ĞÀt ! „  „ x@h& (@@J@ B‰ Ò €ª÷~ÊÆnov©sÊë¯«f;şvô¦uíúNâı¤ç>·üÃõsƒ{HÌù52çŠÏ¿{¾w3û·x^Ôµ=w{7ìÿö™-õßçítß·¼wcÒïz1vÍwÙy”Øßí?]¿ÿîr__±¿pùrô['ïß2«qxÛ¿Ãûü£Pş›çü‹ó—“¿W¹ßæ·ï(ößîtZkîëé.½ıiş¥ğıfı›k¼îwë«üßY1¬õøgô÷m#_·.:ÿ>÷¯Í5ö.õäñ©Ç>?½ïàævnõÃ½Šı|¹÷çÿ>ğ>ÿáUÿ¿ªÏ7=¯6+ì‹û_ÿêÙßnøi½ˆ‹/"0Ó°1 €0É)( ÌB$4 àáà ,ÀL
Pe S!	ÃpJ(PZér`d¤ i t¤$•À`E€DR8•  ›L“ÎÂ Ø€ú@©î™ËÕƒ‚h,@Q I2I¼!	ç{]Nêâ3ëßëÕ?Óè¯ñ~{“ûáô÷ô÷êØë?ìÇÕÖòı]Nú0¦öëş»Ï×µøÿZõÿoèÕµ²+ª–´ã¨îî7¿õà£¶÷Şög×Ôt=ßÃ|•üT÷fäë÷›×ûİÿ×\ßı>ùó¾oÖ?äWCKó¨ÑñòûŸĞù =Â ‰Ã¨A¢¬qr”!b@!×4 
\°ÃHÄx ABP 3¨ C&'è£‘b‚`È ‚T°„‚†	B"fÈˆlNTˆôQ!°H`_ …*0¢	€aT$4BR@L"@±J‚  Ä`‘€  Š%Aâ‹(tDÂ6ì©–¨†ä$±T¨¯+dâÁˆˆ‰ 	j&Å§p#À †pÂ7¢%Ò2&Š¤PD"‘°Ë"²¡2Æ#`(R‚,B0„V" €G¡0˜‡!’&ÀÚ3ìßèî†÷ôßß?)Kwã<ıfÏaV÷İïkó-w¿Öÿ}o}¾3=~±½ïsÿ¾Û,ömòüïWŸ¶§¶ùÕÖÒ÷ËŞëîiœã¹w²«©;fô¦°OîşåûĞÔÇ÷ûé€ß¶­õdñíNÿœ·7ÎÄs¶cìüèãZJ¿?ºK¯îjÀäD' X†A ¤#f. Œt aİ€ÂHeÈàˆ¸Š*†È¨À™ sà ‚€ I¸- ai$€;D”à A	 @X’…‚xƒe)@Ğ,HäP!0pdš ¡0„CàÈ ÀõpÇ š*ÅFs{zò}»qï/¹Ÿ©ı³Wòïö~½ïÆ¿nï½·›õÿXÿzıïÛzÿ?+­_•Ë÷wºáUı¿zÿ_»¤²¿9¯laÔ¯—ÍøôÿŸ[ºŸŸÇ°ÿÆûZæöš{æ3ã÷«\ovwk­óNß+y½ÇõŸëgëwcı_ŸoÕœüùÚr¯óÏw÷íÇğ1æÌ½û˜½rÿ§©ï·sıÌîcÿ|;x¶ô |ç›2ÿÍ]u&¯K>ÿ÷ı»ıçó?ğÿúQù=‹vquG,~×Ï4ÏûãWşë°Sÿÿç¶ş•Æ¶=İsİ}ÿÙ¾ï¿¾QÒeo¹;OºVtóÚs/ÜıõÛÿ+w…$AÓ,@I(-AhGR Q”¢ è‘/Ò.1< pH„Š
u9”=¹% Á@±º  3€C„Ç ± €Aƒ°d,RC Hz „¤#Æ
<œ®@,íÄ¢T¨ÿ9˜¶¢¾@Ã@nally {
            locks--;
          }
        },

        /**
         * Adds an extra "hidden" undo level by first applying the first mutation and store that to the undo stack
         * then roll back that change and do the second mutation on top of the stack. This will produce an extra
         * undo level that the user doesn't see until they undo.
         *
         * @method extra
         * @param {function} callback1 Function that does mutation but gets stored as a "hidden" extra undo level.
         * @param {function} callback2 Function that does mutation but gets displayed to the user.
         */
        extra: function (callback1, callback2) {
          var lastLevel, bookmark;

          if (self.transact(callback1)) {
            bookmark = data[index].bookmark;
            lastLevel = data[index - 1];
            Levels.applyToEditor(editor, lastLevel, true);

            if (self.transact(callback2)) {
              data[index - 1].beforeBookmark = bookmark;
            }
          }
        }
      };

      return self;
    };
  }
);

define(
  'ephox.sugar.api.node.Body',

  [
    'ephox.katamari.api.Thunk',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.node.Node',
    'global!document'
  ],

  function (Thunk, Element, Node, document) {

    // Node.contains() is very, very, very good performance
    // http://jsperf.com/closest-vs-contains/5
    var inBody = function (element) {
      // Technically this is only required on IE, where contains() returns false for text nodes.
      // But it's cheap enough to run everywhere and Sugar doesn't have platform detection (yet).
      var dom = Node.isText(element) ? element.dom().parentNode : element.dom();

      // use ownerDocument.body to ensure this works inside iframes.
      // Normally contains is bad because an element "contains" itself, but here we want that.
      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);
    };

    var body = Thunk.cached(function() {
      return getBody(Element.fromDom(document));
    });

    var getBody = function (doc) {
      var body = doc.dom().body;
      if (body === null || body === undefined) throw 'Body is not available yet';
      return Element.fromDom(body);
    };

    return {
      body: body,
      getBody: getBody,
      inBody: inBody
    };
  }
);

define(
  'ephox.sugar.impl.ClosestOrAncestor',

  [
    'ephox.katamari.api.Type',
    'ephox.katamari.api.Option'
  ],

  function (Type, Option) {
    return function (is, ancestor, scope, a, isRoot) {
      return is(scope, a) ?
              Option.some(scope) :
              Type.isFunction(isRoot) && isRoot(scope) ?
                  Option.none() :
                  ancestor(scope, a, isRoot);
    };
  }
);
define(
  'ephox.sugar.api.search.PredicateFind',

  [
    'ephox.katamari.api.Type',
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Option',
    'ephox.sugar.api.node.Body',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.impl.ClosestOrAncestor'
  ],

  function (Type, Arr, Fun, Option, Body, Compare, Element, ClosestOrAncestor) {
    var first = function (predicate) {
      return descendant(Body.body(), predicate);
    };

    var ancestor = function (scope, predicate, isRoot) {
      var element = scope.dom();
      var stop = Type.isFunction(isRoot) ? isRoot : Fun.constant(false);

      while (element.parentNode) {
        element = element.parentNode;
        var el = Element.fromDom(element);

        if (predicate(el)) return Option.some(el);
        else if (stop(el)) break;
      }
      return Option.none();
    };

    var closest = function (scope, predicate, isRoot) {
      // This is required to avoid ClosestOrAncestor passing the predicate to itself
      var is = function (scope) {
        return predicate(scope);
      };
      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);
    };

    var sibling = function (scope, predicate) {
      var element = scope.dom();
      if (!element.parentNode) return Option.none();

      return child(Element.fromDom(element.parentNode), function (x) {
        return !Compare.eq(scope, x) && predicate(x);
      });
    };

    var child = function (scope, predicate) {
      var result = Arr.find(scope.dom().childNodes,
        Fun.compose(predicate, Element.fromDom));
      return result.map(Element.fromDom);
    };

    var descendant = function (scope, predicate) {
      var descend = function (element) {
        for (var i = 0; i < element.childNodes.length; i++) {
          if (predicate(Element.fromDom(element.childNodes[i])))
            return Option.some(Element.fromDom(element.childNodes[i]));

          var res = descend(element.childNodes[i]);
          if (res.isSome())
            return res;
        }

        return Option.none();
      };

      return descend(scope.dom());
    };

    return {
      first: first,
      ancestor: ancestor,
      closest: closest,
      sibling: sibling,
      child: child,
      descendant: descendant
    };
  }
);

/**
 * CaretUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Utility functions shared by the caret logic.
 *
 * @private
 * @class tinymce.caret.CaretUtils
 */
define(
  'tinymce.core.caret.CaretUtils',
  [
    "tinymce.core.util.Fun",
    "tinymce.core.dom.TreeWalker",
    "tinymce.core.dom.NodeType",
    "tinymce.core.caret.CaretPosition",
    "tinymce.core.caret.CaretContainer",
    "tinymce.core.caret.CaretCandidate"
  ],
  function (Fun, TreeWalker, NodeType, CaretPosition, CaretContainer, CaretCandidate) {
    var isContentEditableTrue = NodeType.isContentEditableTrue,
      isContentEditableFalse = NodeType.isContentEditableFalse,
      isBlockLike = NodeType.matchStyleValues('display', 'block table table-cell table-caption list-item'),
      isCaretContainer = CaretContainer.isCaretContainer,
      isCaretContainerBlock = CaretContainer.isCaretContainerBlock,
      curry = Fun.curry,
      isElement = NodeType.isElement,
      isCaretCandidate = CaretCandidate.isCaretCandidate;

    function isForwards(direction) {
      return direction > 0;
    }

    function isBackwards(direction) {
      return direction < 0;
    }

    function skipCaretContainers(walk, shallow) {
      var node;

      while ((node = walk(shallow))) {
        if (!isCaretContainerBlock(node)) {
          return node;
        }
      }

      return null;
    }

    function findNode(node, direction, predicateFn, rootNode, shallow) {
      var walker = new TreeWalker(node, rootNode);

      if (isBackwards(direction)) {
        if (isContentEditableFalse(node) || isCaretContainerBlock(node)) {
          node = skipCaretContainers(walker.prev, true);
          if (predicateFn(node)) {
            return node;
          }
        }

        while ((node = skipCaretContainers(walker.prev, shallow))) {
          if (predicateFn(node)) {
            return node;
          }
        }
      }

      if (isForwards(direction)) {
        if (isContentEditableFalse(node) || isCaretContainerBlock(node)) {
          node = skipCaretContainers(walker.next, true);
          if (predicateFn(node)) {
            return node;
          }
        }

        while ((node = skipCaretContainers(walker.next, shallow))) {
          if (predicateFn(node)) {
            return node;
          }
        }
      }

      return null;
    }

    function getEditingHost(node, rootNode) {
      for (node = node.parentNode; node && node != rootNode; node = node.parentNode) {
        if (isContentEditableTrue(node)) {
          return node;
        }
      }

      return rootNode;
    }

    function getParentBlock(node, rootNode) {
      while (node && node != rootNode) {
        if (isBlockLike(node)) {
          return node;
        }

        node = node.parentNode;
      }

      return null;
    }

    function isInSameBlock(caretPosition1, caretPosition2, rootNode) {
      return getParentBlock(caretPosition1.container(), rootNode) == getParentBlock(caretPosition2.container(), rootNode);
    }

    function isInSameEditingHost(caretPosition1, caretPosition2, rootNode) {
      return getEditingHost(caretPosition1.container(), rootNode) == getEditingHost(caretPosition2.container(), rootNode);
    }

    function getChildNodeAtRelativeOffset(relativeOffset, caretPosition) {
      var container, offset;

      if (!caretPosition) {
        return null;
      }

      container = caretPosition.container();
      offset = caretPosition.offset();

      if (!isElement(container)) {
        return null;
      }

      return container.childNodes[offset + relativeOffset];
    }

    function beforeAfter(before, node) {
      var range = node.ownerDocument.createRange();

      if (before) {
        range.setStartBefore(node);
        range.setEndBefore(node);
      } else {
        range.setStartAfter(node);
        range.setEndAfter(node);
      }

      return range;
    }

    function isNodesInSameBlock(rootNode, node1, node2) {
      return getParentBlock(node1, rootNode) == getParentBlock(node2, rootNode);
    }

    function lean(left, rootNode, node) {
      var sibling, siblingName;

      if (left) {
        siblingName = 'previousSibling';
      } else {
        siblingName = 'nextSibling';
      }

      while (node && node != rootNode) {
        sibling = node[siblingName];

        if (isCaretContainer(sibling)) {
          sibling = sibling[siblingName];
        }

        if (isContentEditableFalse(sibling)) {
          if (isNodesInSameBlock(rootNode, sibling, node)) {
            return sibling;
          }

          break;
        }

        if (isCaretCandidate(sibling)) {
          break;
        }

        node = node.parentNode;
      }

      return null;
    }

    var before = curry(beforeAfter, true);
    var after = curry(beforeAfter, false);

    function normalizeRange(direction, rootNode, range) {
      var node, container, offset, location;
      var leanLeft = curry(lean, true, rootNode);
      var leanRight = curry(lean, false, rootNode);

      container = range.startContainer;
      offset = range.startOffset;

      if (CaretContainer.isCaretContainerBlock(container)) {
        if (!isElement(container)) {
          container = container.parentNode;
        }

        location = container.getAttribute('data-mce-caret');

        if (location == 'before') {
          node = container.nextSibling;
          if (isContentEditableFalse(node)) {
            return before(node);
          }
        }

        if (location == 'after') {
          node = container.previousSibling;
          if (isContentEditableFalse(node)) {
            return after(node);
          }
        }
      }

      if (!range.collapsed) {
        return range;
      }

      if (NodeType.isText(container)) {
        if (isCaretContainer(container)) {
          if (direction === 1) {
            node = leanRight(container);
            if (node) {
              return before(node);
            }

            node = leanLeft(container);
            if (node) {
              return after(node);
            }
          }

          if (direction === -1) {
            node = leanLeft(container);
            if (node) {
              return after(node);
            }

            node = leanRight(container);
            if (node) {
              return before(node);
            }
          }

          return range;
        }

        if (CaretContainer.endsWithCaretContainer(container) && offset >= container.data.length - 1) {
          if (direction === 1) {
            node = leanRight(container);
            if (node) {
              return before(node);
            }
          }

          return range;
        }

        if (CaretContainer.startsWithCaretContainer(container) && offset <= 1) {
          if (direction === -1) {
            node = leanLeft(container);
            if (node) {
              return after(node);
            }
          }

          return range;
        }

        if (offset === container.data.length) {
          node = leanRight(container);
          if (node) {
            return before(node);
          }

          return range;
        }

        if (offset === 0) {
          node = leanLeft(container);
          if (node) {
            return after(node);
          }

          return range;
        }
      }

      return range;
    }

    function isNextToContentEditableFalse(relativeOffset, caretPosition) {
      return isContentEditableFalse(getChildNodeAtRelativeOffset(relativeOffset, caretPosition));
    }

    return {
      isForwards: isForwards,
      isBackwards: isBackwards,
      findNode: findNode,
      getEditingHost: getEditingHost,
      getParentBlock: getParentBlock,
      isInSameBlock: isInSameBlock,
      isInSameEditingHost: isInSameEditingHost,
      isBeforeContentEditableFalse: curry(isNextToContentEditableFalse, 0),
      isAfterContentEditableFalse: curry(isNextToContentEditableFalse, -1),
      normalizeRange: normalizeRange
    };
  }
);

/**
 * CaretWalker.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module contains logic for moving around a virtual caret in logical order within a DOM element.
 *
 * It ignores the most obvious invalid caret locations such as within a script element or within a
 * contentEditable=false element but it will return locations that isn't possible to render visually.
 *
 * @private
 * @class tinymce.caret.CaretWalker
 * @example
 * var caretWalker = new CaretWalker(rootElm);
 *
 * var prevLogicalCaretPosition = caretWalker.prev(CaretPosition.fromRangeStart(range));
 * var nextLogicalCaretPosition = caretWalker.next(CaretPosition.fromRangeEnd(range));
 */
define(
  'tinymce.core.caret.CaretWalker',
  [
    "tinymce.core.dom.NodeType",
    "tinymce.core.caret.CaretCandidate",
    "tinymce.core.caret.CaretPosition",
    "tinymce.core.caret.CaretUtils",
    "tinymce.core.util.Arr",
    "tinymce.core.util.Fun"
  ],
  function (NodeType, CaretCandidate, CaretPosition, CaretUtils, Arr, Fun) {
    var isContentEditableFalse = NodeType.isContentEditableFalse,
      isText = NodeType.isText,
      isElement = NodeType.isElement,
      isBr = NodeType.isBr,
      isForwards = CaretUtils.isForwards,
      isBackwards = CaretUtils.isBackwards,
      isCaretCandidate = CaretCandidate.isCaretCandidate,
      isAtomic = CaretCandidate.isAtomic,
      isEditableCaretCandidate = CaretCandidate.isEditableCaretCandidate;

    function getParents(node, rootNode) {
      var parents = [];

      while (node && node != rootNode) {
        parents.push(node);
        node = node.parentNode;
      }

      return parents;
    }

    function nodeAtIndex(container, offset) {
      if (container.hasChildNodes() && offset < container.childNodes.length) {
        return container.childNodes[offset];
      }

      return null;
    }

    function getCaretCandidatePosition(direction, node) {
      if (isForwards(direction)) {
        if (isCaretCandidate(node.previousSibling) && !isText(node.previousSibling)) {
          return CaretPosition.before(node);
        }

        if (isText(node)) {
          return CaretPosition(node, 0);
        }
      }

      if (isBackwards(direction)) {
        if (isCaretCandidate(node.nextSibling) && !isText(node.nextSibling)) {
          return CaretPosition.after(node);
        }

        if (isText(node)) {
          return CaretPosition(node, node.data.length);
        }
      }

      if (isBackwards(direction)) {
        if (isBr(node)) {
          return CaretPosition.before(node);
        }

        return CaretPosition.after(node);
      }

      return CaretPosition.before(node);
    }

    // Jumps over BR elements <p>|<br></p><p>a</p> -> <p><br></p><p>|a</p>
    function isBrBeforeBlock(node, rootNode) {
      var next;

      if (!NodeType.isBr(node)) {
        return false;
      }

      next = findCaretPosition(1, CaretPosition.after(node), rootNode);
      if (!next) {
        return false;
      }

      return !CaretUtils.isInSameBlock(CaretPosition.before(node), CaretPosition.before(next), rootNode);
    }

    function findCaretPosition(direction, startCaretPosition, rootNode) {
      var container, offset, node, nextNode, innerNode,
        rootContentEditableFalseElm, caretPosition;

      if (!isElement(rootNode) || !startCaretPosition) {
        return null;
      }

      if (startCaretPosition.isEqual(CaretPosition.after(rootNode)) && rootNode.lastChild) {
        caretPosition = CaretPosition.after(rootNode.lastChild);
        if (isBackwards(direction) && isCaretCandidate(rootNode.lastChild) && isElement(rootNode.lastChild)) {
          return isBr(rootNode.lastChild) ? CaretPosition.before(rootNode.lastChild) : caretPosition;
        }
      } else {
        caretPosition = startCaretPosition;
      }

      container = caretPosition.container();
      offset = caretPosition.offset();

      if (isText(container)) {
        if (isBackwards(direction) && offset > 0) {
          return CaretPosition(container, --offset);
        }

        if (isForwards(direction) && offset < container.length) {
          return CaretPosition(container, ++offset);
        }

        node = container;
      } else {
        if (isBackwards(direction) && offset > 0) {
          nextNode = nodeAtIndex(container, offset - 1);
          if (isCaretCandidate(nextNode)) {
            if (!isAtomic(nextNode)) {
              innerNode = CaretUtils.findNode(nextNode, direction, isEditableCaretCandidate, nextNode);
              if (innerNode) {
                if (isText(innerNode)) {
                  return CaretPosition(innerNode, innerNode.data.length);
                }

                return CaretPosition.after(innerNode);
              }
            }

            if (isText(nextNode)) {
              return CaretPosition(nextNode, nextNode.data.length);
            }

            return CaretPosition.before(nextNode);
          }
        }

        if (isForwards(direction) && offset < container.childNodes.length) {
          nextNode = nodeAtIndex(container, offset);
          if (isCaretCandidate(nextNode)) {
            if (isBrBeforeBlock(nextNode, rootNode)) {
              return findCaretPosition(direction, CaretPosition.after(nextNode), rootNode);
            }

            if (!isAtomic(nextNode)) {
              innerNode = CaretUtils.findNode(nextNode, direction, isEditableCaretCandidate, nextNode);
              if (innerNode) {
                if (isText(innerNode)) {
                  return CaretPosition(innerNode, 0);
                }

                return CaretPosition.before(innerNode);
              }
            }

            if (isText(nextNode)) {
              return CaretPosition(nextNode, 0);
            }

            return CaretPosition.after(nextNode);
          }
        }

        node = caretPosition.getNode();
      }

      if ((isForwards(direction) && caretPosition.isAtEnd()) || (isBackwards(direction) && caretPosition.isAtStart())) {
        node = CaretUtils.findNode(node, direction, Fun.constant(true), rootNode, true);
        if (isEditableCaretCandidate(node)) {
          return getCaretCandidatePosition(direction, node);
        }
      }

      nextNode = CaretUtils.findNode(node, direction, isEditableCaretCandidate, rootNode);

      rootContentEditableFalseElm = Arr.last(Arr.filter(getParents(container, rootNode), isContentEditableFalse));
      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {
        if (isForwards(direction)) {
          caretPosition = CaretPosition.after(rootContentEditableFalseElm);
        } else {
          caretPosition = CaretPosition.before(rootContentEditableFalseElm);
        }

        return caretPosition;
      }

      if (nextNode) {
        return getCaretCandidatePosition(direction, nextNode);
      }

      return null;
    }

    return function (rootNode) {
      return {
        /**
         * Returns the next logical caret ß§.¾xúÉùÇÖ}WûQ½ÜõŞ3šŒımó^ß©v×Öú=ùßïÛ¿÷¸¼w×óı»›½´ÏXüøøåö×_İÛ™t²e~·òÅûc[F-óş¯úêæËªù]üü»ïú¬”õÿ-¼?ÄóõËÎ¼–mÚÈO¹±ü×¶¿ßÔ={ï>Ïèş°?Û/K~WæÆôúbvµvµÓ¯/~ª¶üÍ/ºœ ¢ıü{ÖXP†uÅ×ÛQúùùWUŞçl‡¾¾fİçoëš·Î–çü²ªß]íI[WôÎİí4÷:ß›ÿĞ»ıÿUÿÚMßçÿx¿K³ÄÿvğOƒ§o¯ëøÕ©)÷_.éeÿÓQS­ïüÙú[vhÎşäCşËÊµõÀı–Ûïf¯şx.æı÷ÈİûŞ‹ù¾ù…ÌŸÔbü‡ÿ¼zõëÜÿødëŸ‡õóBiGè~‰v_ëïÇ›ëï³/¨s_¿Õğñ/Ë¦Ó§÷éÙÁ$û¾nëüßş¤*ræ—;ã¥;ÏÃîïÛ³ñjwúbyuôíqo¿ÿ±Ø}úµêâÓşikïßk¿®_³×=¾½x±rßş—ßû¾ù÷Œíõ›qûæĞ~¿¿ßë{‚¾Ê–o9ÎMVìşÿ×ZogßxÆ¿­ıÿı¡<=ÛŠÿ÷Whû»ßÑÚã´¾oé/_÷>ş?ç®îí•Ç÷ßıßÜVáÕíThÓÍ^÷ÿëyıãµÙÛwïüô»7µin®øİ¿}ë}OîÉã8åäÿ¾W³-¦V¶ócğŸÿˆûÕ}_¼ßïy3¾û64oıæİ›lˆ>ú{ŸQ_ñìıÕï…ï–oö»û6×îüÛyµİfÍYY¨ÓÚmnßqş-yü¯Xİ*ü¾ÎÕìzÑë°î»òşûĞ*N?N_ö½[“÷÷ív\ûñãÏüŸ¸¶Zågó5¹ü¿?²ıı¿ûşÛO÷’úìÙ<7ÜŸË’»+ş8ÿ¿mµsİİßŞõŸÿ2=f÷/ãğÊÜş¿ƒ9Ü¼Ü¼ÿ'XíúışŸıwP’ŞÛ¿üßûêj:¾}§}Çsİgşúß8êBë}¬î+Ö7ûË¿ÏyúÆz¾ïÓIß¾¿[ßÿßöûıß[êßO¾Êû¸gœû·ÿßéóGºÕû{ûm|z=»û»"ıûïÁË^¶í±»Ö×•ı¡¿|½7şïÛ>Èl®ş,Ş´Õ»n¾·ÖO7½ş÷û‹÷Ñ±~½ÿ²÷5¼3óTo½P>èü¿S÷[ı–€ãi\q¾ø®]}pö¿…¬Ow·øWİ‡=ó}BóÎÄî_¯Ó×¦/Y{ímûüüıÎßãßğ›y¿¬~Ú÷ûc[ë¯×[ÑÛÍ¾ZÏms'Ÿòû˜òÜù!Ë¢ö[>÷sz›ûÇÍÿËõêÿ±ü‹ïÏıüßzıeî‹´÷]ê}ùf›cŞß‹óLÖ«k‹ù§Æ¯ÿß×ÿÊåmêŸwŞ<›öyçoûÛG—ß½¹ı%½>¼ñ=ü¯ıÿµ÷uÿßŸŞ´ûÍz_W¯?~îñ¼"?*ıó…÷ÛÖ¶Ïùî×_÷bf|µŸÑ“®–mÆOÃ§=]°ı®?üå{ÍÖ½Ûlù8æf}j×ïÿUñeÿ×ÿ¾‹¨íùÌâ}Æ~Vê5ùÙØš³µçâzÿkìñÍıŞµ™mİœJÈõ­è}Â÷ë†ıëû2ÔDÿ×?y”îçvşyÿãsædW²fóŸõ3÷¶rW××MÈû²õ3p}ûÙ·±n{ÛÕÿ¾ÏqİwÏ{vüS¢éËøZo©ÿÿN5ë—æ_“×úÏŞ‡ûwå7©ÎÇé{_ÿšı©{6íÑü²üİì]+W3n7œxîÇßşşlãÌÖ½_îçıĞ[V“Ïî—lÓK}»ªïG½û«¯ï]äıİ½ÜW¯[¶^ë~ÎÖ;y¢Û'¿ïn{Í¯»ßÏïŒ§kîj_ÙõÒZ=V»ßï5ÿm÷îş¼ÿOuÏ¿‹}çßzëííûã…çÖÿíşšühÕÿ×<kÙÿë|ê¶uÑ=ÿÿü«ı¾)íäùæXW»ÿ?‘îWıKjlG!zÆcl7’ïöõÕ7³ÿµoõ,».ñfr¼ú›©æ7üÛí-KıW¾÷Õßszè+xvîÇÒ¿ÿx_Ş×¯ò(5¾}wÅıXoóò¨MæşÌï:íĞ÷ï¬Ê6¾ô[Ğ.'L½H÷ùúfú÷±ïïVí/}ß>êT¦fÉç²(G½oÚ÷q÷î+×}~utÛg|ºÛ™Ûÿßo¿mïôßÌy{ŞİM5>ıùï7ğÿñ›=ö­]¼uú}ÖÏı^çÿÀß®ÿ?÷Û5ó³|/çÏZ¾ß§ğ÷çÛş_¿İ7ş©ğßÎ*ø×¿ó?¯ÁşŞ_·_ê¾V¾ßÕï|µùÿÿ—oí½å~¹ÿ÷»oä)¡;ÏÿÏ{±;ş oo¦ÿcm/à?.fhuSúÔï¾ãşÓrçûù¿Ûüûù<?gÏı{õ±ö]:şİ~÷y¹Ì7VÊÓÿßá?×L-æÂ~¯¾=¿¥ş6do>W¯Ó£íûwÂ>Õn¿şÙg­Öö§öïñO÷¿—ßïîÙMŸS˜Õ÷ËÙÿ]Ÿ—æaRÙífg1q?¯Kò&os+w½³ÿşß”ÿ¶V÷öø­Şî9_ÕÜZÕl'ŞÛ5O-í¿ÿİyûUXg÷Vn…wv¸k±)üÿ¾zŸÓßoşŞïÛÉïô…”PÆÅ¨¯÷ªtu¿,ÿ™›¿ğâmØlİûìşŞÿ¼Ş/˜÷äîïìÿî½¬ç÷¿wú÷,Nï_qÛ(ÿìÎ¿ÿş¶ï“İœ¯òÿ+Úÿ=st½„F›ñûg™ùúósğyË]¥õYî½ÿÅşö/¿ßı+øõòÿÿİ¿¿]UÇ·™»üƒodÌ}:íÿışß¨Şßùğıô¿}OWk_ï5ë¶‘şıÇ×zk»Ì'ÿÓÍ÷»ç¾ÇõÏz7ŞPíÿjúÃ_ûÚ;©¢ñºµş­åÇõë^ıÖ¿òá5ùôíÛïşµh*bı)/]×õ¿¯{ûêù›Ü¾ã_ÿ«yV¥kEçUKÉìÙ?Ò¯[¶ûÚ<Ü>Ï‡î‹×Vòş×´{ã÷¿_Èy”&³ôNwü¿³ÛV\ÿ¯]•¹¯´ŞÖ7éìrÂûáî.±¯ıÏÌÿŞî÷î‘ÜéG–,|øü_­ùÛá~ûO8àş¿?Ã¶m_ëS¾Ï)÷ØÜo·ôİ×-à¿ì»GÛ:Û=¦Ş¹İä™ûÿ^ñ¸şÖû^ÔJs{òw¯/ûû¥ÿº÷÷]ßÿÿß;ç?­ÿû>“¿³cçŞĞÃä7Ïãı¬ı³Í»šÎñùsZë§şÌ>	n»W¹Ïn{çûïúŸLù¿›T™_=zóışûúíıï×?²›5¿S®oÆmİïîÍÜ¿uÖŸ¿Díş·ÿ»óı~ÓŞ§ç¹ûfÿÿôíi{#äœ>ç>ÏíU×Ô»Ïa6ÿñuÿïÕØû_îõõùl¦ÍüŞışGş×)ç»êÿOßıÕ§ºş(>ûSÃwëşéö°¿ÅÚ~û]½-sÖœ0M»&Òğ½lïŸ×ËïçÓúÙNÙŞÙìÓ‡¼õ÷ì÷|ş}9÷÷ßCû—ÿEùŸıµOvzÃo_Ï±=Ûî}Ÿ/İmÀÎ=ß–¿ÿ£Ùûô¤ß}U[9rœ—íû™Ÿ{ûü´Ü¼ß¶6ÿqôáú£×SußgÖÿÿ6ƒüÿİ»}í~öŸºß©}ø?Êú·\¼êõ’æ¾<ı»üï'´—ßÜF÷ÑûoãÄñÃ~óÿÓİïı?¿äÛîÕñû®«~ÿŸò¾Ïæ„×ö7¬êÿßIÿnÇşö:RÜoÄİë}¶>ĞMrİ_¯åíå$sıÖõÏã?íwk¹qÚ»ú<l7ÿ4{ÚÓ«wä÷¿÷›KâŸ‘ãğWzó}ï»æ¼KQ¿÷Æ_î¿ı9yİôíÿÙv¯ó²Õ{ä_§D°ï‡Ş²©rIöXwVúÏİuv<?8ù}ü¾vzÜ†üÿ¼×Gøİÿ¯×ôÏÿO;ŸÕöîÔ¥îG«Œo¼Ü‡q¢~ÿêš©íÿ›Ïıëå²úöçã4×6¥­ ¿ÅÎQsºk4[CÓä3ş]bs7ëV·w®ì~ö§{Q›İ§?æÇëù¾ú}ŠüÛ|?ï×¿ÿï_û¦Õß·İlî9Å^[Œtï{Ãšû¿íÓTm7=p†¨·ï}ÿ|¨'ïş|¾w–ıkuOê/øıõw¾úÿı‡}fÚ/?åŞÕÚp»ú¿·áú¿ß¿;ëbßßu7jª¨^ÿşŞÜŞQ—gğ}7n_ßK§˜ÒUÓï÷+³ã6Ş:ÕˆÅ~ıÖÎ¶“Or¯³?Õÿ«û,¤òıøÛşşŒüßzÿS]ÚïÿEÇl¿ß²¯/çtö“»ëôìû}|Á­_+ú³êôÿ‰ë~¸yö6\Çø=¿ïü'ü©xı˜ ×Ó{gšv¥~Û­á¡~?[¿S¸şß.7çÖ'{fı÷wÿ¼ı³ı~Õİ‡[Èï_¹xúÿÿtÿıñàóW2{¯wÄÿïòÉ§Û?ù|«×^Úëïÿá™­ı×úÃëÇ×ŸãSŞoãRYoıë=ó”OÏ~îÍ©³xšıŞºöŞÇOß-û³ÿ^ıîŸ­|.·Ù™{ËÜÿÛûmÿø­_~Ş_×Úºë5Üïkìş9ßöç}ÿ¶7»©Zÿşc÷úÓ¿ıÿ2ûİ2O¯ÑN*ÅıíûğıĞ¿ûlÿX|ôÿöÿvş|g}ÿ}úïwÔşÿİuï«x¶•uî{ü¯Úÿ­÷ÔŸ§tí¦úúo—îxqÒÈôŠã¸O~í=ƒ÷_}ø¿Ÿû?<ö½»Î_ßï’ÿVÙw¹Œ›»ÂÅ¯ß·~ÍNægÜ÷ónñöÿ¿ıï½[W·=ëÜÿ÷Úï¸ÿ¯2à@/ÕKï¯­¯{;ä¾½/¼yëş_©—\|×e?÷£%½‘À­s3‹~MvïãÙú^ÕûãÖöY_Ÿßò°gÿŸçÔ´ŞZÑ½İú÷Ş¹şúûÜµÿÿj½ÿ2¯—òón÷™7¿1­ÿû†Û¹õ6nsoÿ{ßÓ7GŞ–ÿ_‹Xï™ú÷¯½>¿e—š¹z‡ıi7ğÕ½¾ÿ½çÏWn7wuûØ‡`ÇÇóŒüãïã÷Òó²Şâùú¯ÿêúÛ—­®Gm‹ÜÕ{Ö×ÃÜ‘‹,õo|¿ş<ÜÜoÿ¾ÿ÷G_NWÓÂµ¶Gkï¯ø»½1ìnÿÏĞ?eoı¯ı÷Ä÷ûûÏ7ßc?7¯òeQğÿ=÷âöı_OÉ¹î¯ı_}ºòÿû·ß×¸GµëêV_ç/Ï‡©©Ÿ¿?ü¿gkû?ßëgtZ½êı¥OmîN‰àSß÷Ôr›{/3=èw½·:òõÊ¶Õ´Uí(x¦ıøëßş^Õ½”kÒª™ûu¿é¿ë{Â—çkı—èFïúhîwüşîşû[»>ü—nŸÙëïVPÿ­şÿZ½»´Çéöú¦ıÿ¸=ŠşûVüæ6Ï¥Ôô
        return Option.some(new CaretPosition(startNode, forward ? 0 : startNode.data.length));
      } else if (startNode) {
        if (CaretCandidate.isCaretCandidate(startNode)) {
          return Option.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));
        } else {
          return walkToPositionIn(forward, element, startNode);
        }
      } else {
        return Option.none();
      }
    };

    return {
      fromPosition: fromPosition,
      navigate: navigate,
      positionIn: positionIn
    };
  }
);

/**
 * DeleteUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.delete.DeleteUtils',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Option',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.node.Node',
    'ephox.sugar.api.search.PredicateFind'
  ],
  function (Arr, Option, Compare, Element, Node, PredicateFind) {
    var toLookup = function (names) {
      var lookup = Arr.foldl(names, function (acc, name) {
        acc[name] = true;
        return acc;
      }, { });

      return function (elm) {
        return lookup[Node.name(elm)] === true;
      };
    };

    var isTextBlock = toLookup([
      'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'div', 'address', 'pre', 'form', 'blockquote', 'center',
      'dir', 'fieldset', 'header', 'footer', 'article', 'section', 'hgroup', 'aside', 'nav', 'figure'
    ]);

    var isBeforeRoot = function (rootNode) {
      return function (elm) {
        return Compare.eq(rootNode, Element.fromDom(elm.dom().parentNode));
      };
    };

    var getParentTextBlock = function (rootNode, elm) {
      return Compare.contains(rootNode, elm) ? PredicateFind.closest(elm, isTextBlock, isBeforeRoot(rootNode)) : Option.none();
    };

    return {
      getParentTextBlock: getParentTextBlock
    };
  }
);

define(
  'ephox.sugar.api.search.SelectorFind',

  [
    'ephox.sugar.api.search.PredicateFind',
    'ephox.sugar.api.search.Selectors',
    'ephox.sugar.impl.ClosestOrAncestor'
  ],

  function (PredicateFind, Selectors, ClosestOrAncestor) {
    // TODO: An internal SelectorFilter module that doesn't Element.fromDom() everything

    var first = function (selector) {
      return Selectors.one(selector);
    };

    var ancestor = function (scope, selector, isRoot) {
      return PredicateFind.ancestor(scope, function (e) {
        return Selectors.is(e, selector);
      }, isRoot);
    };

    var sibling = function (scope, selector) {
      return PredicateFind.sibling(scope, function (e) {
        return Selectors.is(e, selector);
      });
    };

    var child = function (scope, selector) {
      return PredicateFind.child(scope, function (e) {
        return Selectors.is(e, selector);
      });
    };

    var descendant = function (scope, selector) {
      return Selectors.one(selector, scope);
    };

    var closest = function (scope, selector, isRoot) {
      return ClosestOrAncestor(Selectors.is, ancestor, scope, selector, isRoot);
    };

    return {
      first: first,
      ancestor: ancestor,
      sibling: sibling,
      child: child,
      descendant: descendant,
      closest: closest
    };
  }
);

define(
  'ephox.sugar.api.search.SelectorExists',

  [
    'ephox.sugar.api.search.SelectorFind'
  ],

  function (SelectorFind) {
    var any = function (selector) {
      return SelectorFind.first(selector).isSome();
    };

    var ancestor = function (scope, selector, isRoot) {
      return SelectorFind.ancestor(scope, selector, isRoot).isSome();
    };

    var sibling = function (scope, selector) {
      return SelectorFind.sibling(scope, selector).isSome();
    };

    var child = function (scope, selector) {
      return SelectorFind.child(scope, selector).isSome();
    };

    var descendant = function (scope, selector) {
      return SelectorFind.descendant(scope, selector).isSome();
    };

    var closest = function (scope, selector, isRoot) {
      return SelectorFind.closest(scope, selector, isRoot).isSome();
    };

    return {
      any: any,
      ancestor: ancestor,
      sibling: sibling,
      child: child,
      descendant: descendant,
      closest: closest
    };
  }
);

/**
 * Empty.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.dom.Empty',
  [
    'ephox.katamari.api.Fun',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.search.SelectorExists',
    'tinymce.core.caret.CaretCandidate',
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.TreeWalker'
  ],
  function (Fun, Compare, Element, SelectorExists, CaretCandidate, NodeType, TreeWalker) {
    var hasWhitespacePreserveParent = function (rootNode, node) {
      var rootElement = Element.fromDom(rootNode);
      var startNode = Element.fromDom(node);
      return SelectorExists.ancestor(startNode, 'pre,code', Fun.curry(Compare.eq, rootElement));
    };

    var isWhitespace = function (rootNode, node) {
      return NodeType.isText(node) && /^[ \t\r\n]*$/.test(node.data) && hasWhitespacePreserveParent(rootNode, node) === false;
    };

    var isNamedAnchor = function (node) {
      return NodeType.isElement(node) && node.nodeName === 'A' && node.hasAttribute('name');
    };

    var isContent = function (rootNode, node) {
      return (CaretCandidate.isCaretCandidate(node) && isWhitespace(rootNode, node) === false) || isNamedAnchor(node) || isBookmark(node);
    };

    var isBookmark = NodeType.hasAttribute('data-mce-bookmark');
    var isBogus = NodeType.hasAttribute('data-mce-bogus');
    var isBogusAll = NodeType.hasAttributeValue('data-mce-bogus', 'all');

    var isEmptyNode = function (targetNode) {
      var walker, node, brCount = 0;

      if (isContent(targetNode, targetNode)) {
        return false;
      } else {
        node = targetNode.firstChild;
        if (!node) {
          return true;
        }

        walker = new TreeWalker(node, targetNode);
        do {
          if (isBogusAll(node)) {
            node = walker.next(true);
            continue;
          }

          if (isBogus(node)) {
            node = walker.next();
            continue;
          }

          if (NodeType.isBr(node)) {
            brCount++;
            node = walker.next();
            continue;
          }

          if (isContent(targetNode, node)) {
            return false;
          }

          node = walker.next();
        } while (node);

        return brCount <= 1;
      }
    };

    var isEmpty = function (elm) {
      return isEmptyNode(elm.dom());
    };

    return {
      isEmpty: isEmpty
    };
  }
);

/**
 * BlockBoundary.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.delete.BlockBoundary',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Option',
    'ephox.katamari.api.Options',
    'ephox.katamari.api.Struct',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.node.Node',
    'ephox.sugar.api.search.PredicateFind',
    'ephox.sugar.api.search.Traverse',
    'tinymce.core.caret.CaretFinder',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.delete.DeleteUtils',
    'tinymce.core.dom.Empty',
    'tinymce.core.dom.NodeType'
  ],
  function (Arr, Fun, Option, Options, Struct, Compare, Element, Node, PredicateFind, Traverse, CaretFinder, CaretPosition, DeleteUtils, Empty, NodeType) {
    var BlockPosition = Struct.immutable('block', 'position');
    var BlockBoundary = Struct.immutable('from', 'to');

    var getBlockPosition = function (rootNode, pos) {
      var rootElm = Element.fromDom(rootNode);
      var containerElm = Element.fromDom(pos.cont†B•ÁgD
;¥c”B0A‰ ˆìC¾²B!%u„%øÙ‚æ„1R@"Õ…rÅ!á5à (rftåd*0ĞTå*b#! $ÄBE²…†¢ƒáC b ñHQ’ çÖŠ:ÂÇ'TÒ)5Ó`Kïè
I”@6èX¶º!€øŒ‚ à‚@>ƒ"@ƒÅ&z*€€‚ƒ”šP‡u d„¬
%	š9”`²0•P€
ä „$¶m¤	e(€x( Px.B]°"!1!@¦@ p
@Q P  AÔ¤ƒy( ?D@–Ğ(Ìb…D`m
ˆ¸@LD¨8 #	$¹EFh$pÆ‰bEœ"Á.8 œ 	D, ¤8È0ƒxHp‚ „03 ` ÉH’ rBc† ]‹4 ©X	%#(ÄÈ"ŠP$!&#“Tò@D… ¾œH"exZL@0r$‡˜>°À¨!DtĞÄa'‹!’´H¯@0±O‚4°
 …P¹*í¤qF0x€ E†Ã˜† 
€DÔ(Š‰²ÇHÀ
š¨G’7orµ*Bˆ–„" *³~eF@•W Cƒ“‚¹¸ @„Òñ0 JAX
¸pÀ °G‘¢Ğà0(ƒ"±04$(¤0¤á¨@d Á—$`LIë""£ĞxÕlƒPŸ¼<B:0˜U!ÈŒ"	&MX ÀrQãƒ‡2	‚[†  @°€!“‚± ˆ‰I©Ğ¹ há  ]eĞ$-À6µÂÈeB"É¢¸”„†œb A4±Â°"-`t“ä@& @ŠGˆ€ñ„Ã"±@¸E‚°¨kÁ¬´ É<hİ]‡lZ1U`‘ÀÈDU	ÈÀ`ƒB˜!q"H	’Z¨Ç   @ 1ˆâŒ€  ğCBIqN •l%"Ô@ƒ1
àœ5F$+¬„d\Ä„ÀĞh­ 4
àD˜ğj”˜ FAi¬šV{àb@ HhÈ1KŒ€ ‰  Pì¾éK‚0Q ‚hˆÉ'Ğ‘ ß@ä°¤ŒQ¼H0ÒOäƒaR€jA@ƒGQ@ E)(B#!@D S¸ÀËè85 $HF  ‹˜ *ƒ  À1
zq0  ¤‹@Ö€ht@RrÅ Ç€b˜ÀXdQH è8@„
LH€‚	Rh	SÈ—óá€›¢@ $î6EqÈÅª¦1JPÑ×)Àd"Qº 2@Q 	ôHƒ]X"±É&16(¢0”K0ÒƒÂd®FrH“U€@:R*+ !$'E Ñ:/ì‹‚`‚
©†"P` 0¦;•$€ ©Z ™„F À¢PŒbÒÜ7¬È2%üP’.` †H‚V  ÆØã¤Æ‚ ¨L‡P2ã`± ¥^@€+` 	B´ÁØÀB"LˆÈFLFA¢B"h F«ãˆa00È@2(&¬U &µ¢âŠb €Œ’!?¯‚á¨I ¬X€8j
  1 ÀJ!o}€Hä& Æ ° ( ºĞRÒÅµÀaĞ31àq`€2DB< ’ : Ì„1{?\08*ïAs”%¨Q =²
À•ÂëdÑA¢$b<âbS4„„2QğÄ L1‘b¬Ä#ÊÈÈîqLÈ8‚   Ğh, ×†@NÉ)%ğ RELàS0öÀ ÈˆO  	‰ØI¡4XpaĞ`F$N%„$pQÖÀH 0ÄBŒ@ .‚@€€ y5f („ ‡€h
"	‚€ á¼Ø T˜"
&	„<ˆ0D¦è¡h©ğ PCPf ²qL@M?µL³	¤u‘ğŒ‚„IÂ€'lá<ü@ iÈT FPL(”r¸«@åØ	X(€b€ 44	ÈÉ8¸T§Aï,“l˜%0$P ÈÉd!2d)Ä´¼ÅHyT  ?PğLÈ -¬	A Tˆ PŠE$ß(SH<"6*0~p(4#Fl@F¤Ô„ %M•4JRd44D} #Ì@Ü&BE BUÉ0¦¨Và!&bˆŒâf8 4‹†šE¯ 0F¸ PEÎ‚$F†ˆ¡ê$€°Á•$»Ğ é’Ğ$BˆİFA0¢òAJ$œ0U %$;b 9@ ƒàğR‘" F°€5’ D@Ë B`H&0¯p 	
å€€@A…B,k,ÁHŠ¤¹b1Y6$û`t$ "`#tB€ ˆLˆÀJßP4¯AË.@@I6 €8XR'&…©Á„ğ‘Íœ`)e ö@‘&‰dKJĞ˜§0Â¼€
6Ÿ€ØÑî„å%qºhÔ…<€H‰Mš! H 2P4€H(KbÂD‡*I@
ê î='^A"ÒHäÓU9ˆ`S,@å ĞfÁBcÑ€BWÔC€Œ#‚¸0ˆÈ*"$‘ÅK RÀœJâJ˜€=@  ƒğ €€l lpP‘¢E(E	 ˆ’ 
Ã‡H(0`„C&P˜¸hZ…á 	 ¡@	"0¨`@  $¬!F‘Bb:¨ƒø$´‚… 
”ˆ‡9ET@€‚± Ø„DÂ°°Äh"‰qÆĞX@Š8%ÈiT 8¬àU@)@@)ˆÁ £B¤Eˆ˜™”íJ¨ŠdğIâ„ŠJ¡Q 0ˆR`²@à÷G¨Øˆ	 Uô%!@ˆ$±@NğggA*HÈ!&@RR$º•!‘2Ô@`TÁ‚’5Kñ‚0FÀÒšb,œ`g)–À<RÉ8@CXf–äàˆ¢€ÀÀ|)R@IÊ È h …{	€ÈSÂûÀ €”eF&A
8ËÉB;" P˜0ˆ(€UD< Tœì b 0ª„¬6BTf`0`ô&}Cb6ÀÄ¨ĞID@	–	’z 0@ °t(pò  ˜°â(  @@ˆD`Jç!†‰H t‚3½$2ÀbA"Àq Â‘ê8 EDDõô+fxÔPFÀHXˆ‘E-4$P À¥3ÆM˜ °å„ª 	PÙ
€ førÈÔM!‰¡ÈøàP<DTt	‚JÄ"QîA1¨:a5!ÒAx  ÁÆZ‚ïÒ¾1qÅB¢£$@4Tñ!Dd$†C ’D‚Q¢àËó‚¨’ l @+1À$n¬„’†
ªˆ ÷	—¢	ÀUĞ
Oà‘&ß¨°“Á”‰™ @À“ÂˆRp	%IÙ«¡F€W!dC>A¥!f’°È•¦Tˆ&)°á´@I‚ ‚ÄAÁ‡
*Ó’æ „	 9€(H),°:©Ü,B&K¸hH‹)Êq1"Å´ ò€!†N€ ±ö%ˆTl0Ğ ¦Kx‚#fA@ @“d„/Â@”¡À$£­|æE + °"
Kq¡B&W¸Ş±Ë ğ@@ÑA2Aà8 t ±Ã*°’‚f2Å\ğEšÔ ]Pu ˆ.àT;€’òxe
Bux,À\• Ã!ìÄÑ!	0
MhØáˆHÀ
‘CÌX¦  €  3¡)A`f*@‡ëˆæ¢«áÁ¨€#t™ ÂÈ+
(i,a 6t,Ñ@@aĞ E8¢¸–"DŒ 	 QDÏB[z˜DRI, (!5+ À”˜p ¨4	 7«q§x!pQÈCƒÆ €Ëq€8 P‚ 
LP°”€`°ŒD(wL€†ÆÀÌXBZŒ$²P  ©`”0´¬„4 -
¤¢
¨Cş¨ €`œö!` †DÒœaòÏÃ Ÿ0…‚@0 #µf',)eÄ I‚PQ]"HÉ, "”£PQ™Ã¤L½	Ğ`;2y40^0 ¨Ù(µ9¤àˆ@+ 
"PlŒd™ñVF“ 3 À	Ë À;D”¹Y@ğ @ ’OÀw 
d0`XÜŒX2  xSŸŒRd¸K;}IÂ^bÆF S=@d9M-ú&Nh(UÊ€€8ãğ  t"²Ã‚
É "1HB°‚ìEÀ‚©ªOØ€DY Œ”¥ 0‰ĞÔğl å<„" Pt¡ÒJÁ 0€4@(0(a€ü$¤¤HÔÀt É #Â £¦®Ê˜ 2" ‹Ä’40ƒÁ)Šœ˜×!	'Sg @`K´•¢–$ÕH*’ä<´T˜ƒòK@vY!h,–`€#Æ@1¢® ÷„øJAÑ²€
„Â„  @¼vô?5¶U:'ù5sY£‡yÁ$H…âÓQVÕlA3ø, =€&2%”€.åA  Q$}	Dˆ3ŒÀqT Yëªİ1“ ¶'n@ .8‰§„ApAÙà£ ä™<2–i¶q€ Uğ MÇËx'è"€O	@
(iB2r".ä¦	i&î.b¡rD•
PB J`TA€‡VĞ Ó„ 
d 2h
Õ¥8À‰aÃ=Zsˆ
1Œ·s ğ²dÂŠÂ€ o Qšö   DT¬h«‚§p¢I`0X¬O4…H‰	Cg@KIII1ÁŠ)‘b	`…z		der.positionIn(false, block1.dom()).bind(function (toPosition) {
            return mergeBlocksAndReposition(forward, block2, block1, toPosition);
          });
        }
      } else {
        if (Empty.isEmpty(block2)) {
          Remove.remove(block2);
          return CaretFinder.positionIn(true, block1.dom());
        } else {
          return CaretFinder.positionIn(false, block2.dom()).bind(function (toPosition) {
            return mergeBlocksAndReposition(forward, block1, block2, toPosition);
          });
        }
      }
    };

    return {
      mergeBlocks: mergeBlocks
    };
  }
);

/**
 * BlockBoundaryDelete.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.delete.BlockBoundaryDelete',
  [
    'tinymce.core.delete.BlockBoundary',
    'tinymce.core.delete.MergeBlocks'
  ],
  function (BlockBoundary, MergeBlocks) {
    var backspaceDelete = function (editor, forward) {
      var position;

      position = BlockBoundary.read(editor.getBody(), forward, editor.selection.getRng()).bind(function (blockBoundary) {
        return MergeBlocks.mergeBlocks(forward, blockBoundary.from().block(), blockBoundary.to().block());
      });

      position.each(function (pos) {
        editor.selection.setRng(pos.toRange());
      });

      return position.isSome();
    };

    return {
      backspaceDelete: backspaceDelete
    };
  }
);

/**
 * BlockRangeDelete.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.delete.BlockRangeDelete',
  [
    'ephox.katamari.api.Options',
    'ephox.sugar.api.dom.Compare',
    'ephox.sugar.api.node.Element',
    'tinymce.core.delete.DeleteUtils',
    'tinymce.core.delete.MergeBlocks'
  ],
  function (Options, Compare, Element, DeleteUtils, MergeBlocks) {
    var deleteRange = function (rootNode, selection) {
      var rng = selection.getRng();

      return Options.liftN([
        DeleteUtils.getParentTextBlock(rootNode, Element.fromDom(rng.startContainer)),
        DeleteUtils.getParentTextBlock(rootNode, Element.fromDom(rng.endContainer))
      ], function (block1, block2) {
        if (Compare.eq(block1, block2) === false) {
          rng.deleteContents();

          MergeBlocks.mergeBlocks(true, block1, block2).each(function (pos) {
            selection.setRng(pos.toRange());
          });

          return true;
        } else {
          return false;
        }
      }).getOr(false);
    };

    var backspaceDelete = function (editor, forward) {
      var rootNode = Element.fromDom(editor.getBody());

      if (editor.selection.isCollapsed() === false) {
        return deleteRange(rootNode, editor.selection);
      } else {
        return false;
      }
    };

    return {
      backspaceDelete: backspaceDelete
    };
  }
);

define(
  'ephox.katamari.api.Adt',

  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Obj',
    'ephox.katamari.api.Type',
    'global!Array',
    'global!Error',
    'global!console'
  ],

  function (Arr, Obj, Type, Array, Error, console) {
    /*
     * Generates a church encoded ADT (https://en.wikipedia.org/wiki/Church_encoding)
     * For syntax and use, look at the test code.
     */
    var generate = function (cases) {
      // validation
      if (!Type.isArray(cases)) {
        throw new Error('cases must be an array');
      }
      if (cases.length === 0) {
        throw new Error('there must be at least one case');
      }

      var constructors = [ ];

      // adt is mutated to add the individual cases
      var adt = {};
      Arr.each(cases, function (acase, count) {
        var keys = Obj.keys(acase);

        // validation
        if (keys.length !== 1) {
          throw new Error('one and only one name per case');
        }

        var key = keys[0];
        var value = acase[key];
-qÿ§óıSšµÇŸ?§û~İÏ×Ûûÿßı_T«E¾¿ïú÷ôÿ‹Õ}Y_›ïı==øÏ÷õéş~î®=ÿ·ågÿ¿gûwmîıö¬]×ñáÖoéæ§ãùÜüa&ö÷ìs†íæ¥{—÷Oµªşoõ\+”šß•²š½ÿµôö«ı%ı5Üß&÷åù¨}á¥óíò»Î-ıJ¯ÇùOÿı¿ıö;½ÔßØ`»ôÛ~ÅÂ¯w*•>V‰ıûs_¯ş
ıûsûi1/…ê;­mj]v/×æï;bñ¨òÿ?¼õÿoô÷½Cjú×}p÷~{_¿Ñgøı=_ŞÏVç$ü—ıÕ—n^ùTzR¯şç«üW{íûGşç>ŞêÇ{Îÿ—ovÿÕÜ}ÚïûÆıÜÏ·}»Ú²sÿnsçzG¾8w¶ñÅÜbüãıïçášÛy¿èu¾gõeılßÅïQßïßoïöU{+?_ı×;OöõÌWnf´vÿo}¼õã_Ÿoÿïkwıñ÷r?øµÜ›¹ÃçİıW1Øëïø¿ÄuÿÿÿòY\uıßísÿÿ¬’_}ÿî®ÇÓ£ãÏøİ<gnÿÌu¾où–sşåoÄïOò,Ökoıõ…y6û{öÿ¾¸Êòlÿ_ëîZ¾¶›÷mŞ¯ıûk¯õ{ğ;ÿ_êÔ¿ÜÖG¿µñ­û¸½{Ëºkÿ¾ïß=‹Ï·6óüg™½½éİÅGiıÕOê¼·şß¸ö·’ÛßÛïúÿÂAÛó^G½Oás®¯ÿ_òÏÛk»Î)Î§9åÇÎÓ9å÷?ü+¿¯ç;t{Ñ®Ş¶¡Şåş÷'˜ßû÷|<ÄíOªÈõlŞÙ†LûY}åîı½ïî?‹i—ìöß!¾ïSé¿÷ÿÿöêÛşö¿ıfŸ¶»Öÿ3Ò.“¾­Íßè÷ß½û­}ıoó³O{}Ï0ûK)Ÿû­üúÜíU¸pßñO'C^û}óymü#¶Ÿ«Ÿï¯Æüëş?ôïß·ñ¿ò¯{Ïµ÷ï¦•o;ğ×ôÿß‹wçzõÏ?ÿŸûÿß¿ÖÖú©ÿ.o‹¦¼ßûÖ¬¾ùïÚü·¶o5ïĞ~ö™·³Å”şõu×Ÿ÷ıã†ùÏ“ÿz·üÿùÕ¼ç®lw¿Ú»ö¿yŞúŒ2¯Ù^÷w\¶ËİÇßik-ûìïlûüúw^÷üéş8_û¿™ï‡nëYûk¬¿GWÕô©_û—Ôß¿{ı|_öı¹QòkéÏ–ÆÿÏ[eµ½ÿJû^1ü›ß—õ†ßv]Sg_ıW~wÿ×ÆO+Ìû{£ù~õúñg«ûÿÿ]lÛøíùg¬UÚôp»¸Öú«Kù}¯â×é¦Õ÷§ùÚÿ¿÷Öß÷ÔWÕüög&üèû¯¼ÿ.~ó0ŸVì*÷?ßwßn_ïmÎûm·Ã¹S–[aÙrÆw·oîÍ½'ø&õ›¯³E{mô_óşöıÒácŞ½®¿ÿôpıUî»·üoêŞÿv¿¿|á~w{ô ûÖ_ÏVnóş‡Ê¯O?[ıïßºßòkÒV§ßu8½³_¬oíû¶üó}çØhK»„{÷R¾ÿ]¨ÿ¸§«ıücÿl«8(ù}ï×Éßmg’ûNıßÿ¿õïG¾îş¿íó>ë?÷ş¯ª¼˜fõ<Û
gıO,µúÿ“zUÏ÷ûsã?×Ä—ş?ÿ~Óo«ç·ÚÚ×ŸÿvçõÿŸÏßÿqï³ÖwÕÊŞºì$ïiî&½¹Ü'³^r—Yÿ{†ß¿w7ûoûË7¶ü´UÚûıËÿ›¿ÒşçÏÿÂrÜ89S~çw§Sí<ÿÏ™ç¾Şû9şS§¾~uıÂ,îù÷­ÿ¯êsN3¦÷A»ß÷5ò¬-ïöæÙæ§3•ŸÔæ¥¾û&üÖ¦ İwñsçû£òÄ¿ïÿ—ªƒıÏçÏ_”üºÏÿß«üoÿéJŞşO/Ëç÷çßüÓóş·ËÙu6%é°ß:µş™ï;Øê¨_ í>O÷ßöŞ.‹û{¿ë½ìİ,ÜûÿÄe¾}¶?}h¼!ó;ı—ƒ÷äÉÜğŸuçu°wûıº?^­üû_ó¯³ìÎßïºÏu®?¾çş¿ª<s·œÿ‡æóüwjâÿd§|··}â¯}Ë7Ò»\å½9¾mìÅë+ÙUN¿§¡{¯ú’ïäšËİ/–¦şKûóƒ´ÿzµ¯şM^úuç™»Şÿ}ÿ~ûŸŞßûÜÛÅÊc{/^—÷÷.¦ıîå¿·ùøİ\Ïóïº^ğÒô÷W¯]Ş>Ùş_SW{ÿGüö}õ®ö-ï»ê˜ğ~Ÿş0›âå~øŸòÊöîÒßíèÿœú]ºÿ×î»Ï_ÿw3ºf/şûwõŞÍR?³ê®ï²ë\o»½ü¹ÜÙ¿xş½ç²©C²nÔş5¿.÷¶=Uªö~úØnmõ>çB¾ÿ/ûŞ >Ìÿõ§øÚçuÿeïmÿûÇùù¾é/ã6íÿ±¦÷ÿŠtÎ÷é\ï÷Í]§‡ì.zÎ½öZ_èË¾ÿoìwÛÓºº7Âßş8¾şpß'üŸüòo‹›·Dçëı{ÛáŸáêwúÎ½óÇ{ó¾ÿ¶Ø3[¹ÅáxõqŞáSOLWnbıEóÿ±ìP¿Îï~‹ÖÇÿÿß¿»oØˆíÙüıóò½/å]Škí÷Ø£«ã¯7Ñ³Ì®ø¶ûwêÎşï·1{gj•{O‹¾r'“°dãÿÏÃÎ/\¹ú³ï:Í=ğ~[û«ˆI­ı·Mëdß•ûşGıwŸÛ¡®w°¾¿ŞÏíß3ÿdÿçïŞW½ô&Éçÿ¿ßÿóx±ï{ïG7?îÑ?Kºzö¯-·ÿäõ}µnõşõ­D¤ëïûßıó¿ú¾U»íëÏÿ„¼{ÿ¦ot9Ş§1wòO¼úø#.ç8Ñ¦Ãë¿¦Ç™w•rã|—¿ğïuã«ueKzê¦™›{«[úì¨ßı×Ê—­wøş/Kù—Süï›.Ëşø×_£_~¨ûø\ú}¿şO¥¢¿øîıYê»Ş­G3>ıŸJûÛÛ~½nİ»ŸKïç™Ñßz|Üÿ~j»ìËäşÑ¥VN¿õ÷6LÂåß7­Ó)½_¾ùçÒˆMÎı¿{¬÷wÕ'cü&.ıˆóÚã+ö®ßğ·{_ÿ—éï†Ç{ntóÛ§ÿÏ}£{îyóíŸ×kOı÷õêæŞŸ?w3ïı/ós_!g"Ï¾_\õ7/#ÿİz¿§o÷Ï÷ï¬swm·Âï?ö9òã¨h½}pñÕ¿/]÷7èöqõŞİ÷ôdwz0|üßë@æï÷ıóÍWÿU{3L›ÿö9×ö«Æ«×¾ÍiøoÃ8C]ÍòÄÖï³ÿY+¾¯Ş}Æ}~wD·Më,«ÇèUwÉù)@¿+Ï®ÆÜRÀ?ŸÿğmW)Ÿï×°²„÷şßÏ¯úÿ·ü·Níîßy6ş[Ÿö°ÓoêÒÿ[p;ó»§wp§½ºO—ùÚ–´ÿÊÿ<Ã»?¾îÿù÷ÉÛ·úOŞãï}ı_6}ßş;ku×ä½Ûÿı×uZwóÏÏï—DWş÷íöî¿şşûëÈÖş©´.“_ëO¹ãóº>­-_ê½¯æ_­î®vúŸø6ú:cº'íÿvÚUó§_ß4Ç&9Ì(½³¾>ïoö÷°ÿ»ÛéÛáïÖ¸+÷Û®÷o¾ìzÀÄçöîş¿iğö}óŞşÏC÷M–Óßkß×+«şÉ~=ıûGò›­:üo×{ëßçı¬ı:ş|ïßuÿ7ß_÷ùKşy«}ùß¾ÿ/ıÌºÿïş>-çÚVÜíÇzû÷÷|Ç—/Ş«òß//ü^‡b×‚Çöïò—WÖô›U«ZS-ïÿZÿì‡noïöüşÛåİ¿şÍÿk±Ãëÿ³¶ö&MÕO]×­?L…ïÆuüñï^ìóïçÏJ~î¼ùaËÿ¥ÎûÍÿÕÛŞÏwé·ÿîïúŠçßú‘y®Ï÷OÎãMªùã.“uÛ§ıë_÷ô_¾¸!ÛöÂ‡ošô×›ÒÅ½ß²Øùşö½ø˜Gş[v}–¡o‚Ñ—yO­ÚÇ½È½ôæÕËÿ?û÷ôí[GÍú¾Íçş{wç|_ı¿ıøÛÊ×–­Œ¶áûêîÏhz»"kâuQ#ÛzÁ›YÏNó_|º½Ïüê÷ŞÍ™ü—‡ÔoDğûc}eßŸ^?+Ûî;ôqÿ7íş¾7Æ:Ô¯½ãÙ½úËÓu<ï«¿v¾—Æ¾¯;ë}oïû¾¦ô³ï‹êSzşÇ÷¡éß?èáûõÚÛ_6Wû}Íyƒku_ÇÁ³«Zßï3—^ûîM77³?öÏü~×x=o[|âëÚeÏ^çéuMmïïÛwùú\£ËWŸ¶õãİ«~÷«ï¿÷Mg<Wöÿj¿ÇKŞ={{po_aÆ¶Wo¿şo^<ºİ÷å/QêcE:´Ÿ[ßâ«øñ:÷\=ä÷pû¸[ÿ´ïºnr‚ş™^ÿëä¿_S½_İƒÜsåôÿ×çwö×÷{·ñ‡ä{ÆGaCK¢ú¿İl»½[½˜YşúOçú¯üöÿæú×­}¿şø¹I×kÛ_Y—ÎŞÙ›şw¹É8hæœ|2Ëßz¯zwŞ·Ù¶ÿŸ|ú>h?Ûæô×¾ûİiÿpé»«ÖöşO½òµë¾‡¯çŸ­·ğßÕO«¿âŞï÷şÖíÿ]ÛÖ?wMºç—·Ú¢åû÷vUá?ƒ5÷ı××îm_·ùu»¾İÿ×èû}Ïc~—õ¯kÈ+Öıüçı»:ÿ¿vî¾òüÖË—Ü÷ûÿœıÇMüûÏlºç×ÿkûŞßíŸ®'¶*vø{{úù¿ïã§ı{g¿è+’şNıyÿ¯¿à¥ßí?ìî_ºÿëÿ½*½ÕRıµÚ­×'şÖç¾ÿı±Óı½ó‡­’;àïûßÑšûâûvßàm¿ã}ÿü-ÿßù3ûØá^ÓJú÷ı¼iñ3ÎäşòşŞşñéöOéÿßv×åò~ù¿ù—ÃŠ½ã¾¾õ¦RßÅOîï¯ÿ½Zëÿ^}ç½Ì}©E¢÷m›öõÿŞÎj¾¶…¯ßü½âş¾3ÏÖ/ÿ¿|dÊAç¾İëi©õß~Z{ó=òŸW¾ï9ßçñ>oOşÎË–²¯äß?½.¸ÕÿwW»—úİëÛ¯ıÏQëäëü}ç¿Ñïíé£{ÁÚ²îÿïêüZÓ|'û¢ç—Ú-k~·ç\ë¿Ôñz¾¹öç^ŸÿVõfÿ©7‹÷s}ïoñı7Óiàõ¥:ß÷ßyYY=õèQWëîışÔı&í;şy»íÆ_Í/¸ûQo7)mÖ|ÿ‚'ıß÷ÛÙûş_äùûÿ9ÉŸ±†ıêsËÜÏê"~ÿû©ó¥ÿ/Üúó¯N—v‡ºÛÑÿ/j¿·³ÒVùËãS¹ùwÏóÿÙ^sÆx=ë^—âOİÿ~½oåùóşOÿç§»šÌOô÷|–çÿ)˜h`ûÜüQÜ¨Í]İïçxƒçÜöş{u[*–­yÿïéÜãwİß»¢ÄïqW¿~âlıÿy5çæ Şëéß=Ïø¾-=ÃòÿmïC×ş´ã‹™>íÍÏş¼/øÿó.y¯]%ÿtion () {
        return Option.some(DeleteAction.moveToElement(toCefElm));
      });
    };

    var findCefPosition = function (rootNode, forward, from) {
      return CaretFinder.fromPosition(forward, rootNode, from).bind(function (to) {
        if (forward && NodeType.isContentEditableFalse(to.getNode())) {
          return deleteEmptyBlockOrMoveToCef(rootNode, forward, from, to);
        } else if (forward === false && NodeType.isContentEditableFalse(to.getNode(true))) {
          return deleteEmptyBlockOrMoveToCef(rootNode, forward, from, to);
        } else if (forward && CaretUtils.isAfterContentEditableFalse(from)) {
          return Option.some(DeleteAction.moveToPosition(to));
        } else if (forward === false && CaretUtils.isBeforeContentEditableFalse(from)) {
          return Option.some(DeleteAction.moveToPosition(to));
        } else {
          return Option.none();
        }
      });
    };

    var getContentEditableBlockAction = function (forward, elm) {
      if (forward && NodeType.isContentEditableFalse(elm.nextSibling)) {
        return Option.some(DeleteAction.moveToElement(elm.nextSibling));
      } else if (forward === false && NodeType.isContentEditableFalse(elm.previousSibling)) {
        return Option.some(DeleteAction.moveToElement(elm.previousSibling));
      } else {
        return Option.none();
      }
    };

    var getContentEditableAction = function (rootNode, forward, from) {
      if (isAtContentEditableBlockCaret(forward, from)) {
        return getContentEditableBlockAction(forward, from.getNode(forward === false))
          .fold(
            function () {
              return findCefPosition(rootNode, forward, from);
            },
            Option.some
          );
      } else {
        return findCefPosition(rootNode, forward, from);
      }
    };

    var read = function (rootNode, forward, rng) {
      var normalizedRange = CaretUtils.normalizeRange(forward ? 1 : -1, rootNode, rng);
      var from = CaretPosition.fromRangeStart(normalizedRange);

      if (forward === false && CaretUtils.isAfterContentEditableFalse(from)) {
        return Option.some(DeleteAction.remove(from.getNode(true)));
      } else if (forward && CaretUtils.isBeforeContentEditableFalse(from)) {
        return Option.some(DeleteAction.remove(from.getNode()));
      } else {
        return getContentEditableAction(rootNode, forward, from);
      }
    };

    return {
      read: read
    };
  }
);

/**
 * Bidi.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.text.Bidi',
  [
  ],
  function () {
    var strongRtl = /[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;

    var hasStrongRtl = function (text) {
      return strongRtl.test(text);
    };

    return {
      hasStrongRtl: hasStrongRtl
    };
  }
);
/**
 * InlineUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.keyboard.InlineUtils',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Option',
    'ephox.katamari.api.Options',
    'tinymce.core.caret.CaretContainer',
    'tinymce.core.caret.CaretFinder',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.caret.CaretUtils',
    'tinymce.core.caret.CaretWalker',
    'tinymce.core.dom.DOMUtils',
    'tinymce.core.dom.NodeType',
    'tinymce.core.text.Bidi'
  ],
  function (Arr, Fun, Option, Options, CaretContainer, CaretFinder, CaretPosition, CaretUtils, CaretWalker, DOMUtils, NodeType, Bidi) {
    var isInlineTarget = function (elm) {
      return DOMUtils.DOM.is(elm, 'a[href],code');
    };

    var isRtl = function (element) {
      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || Bidi.hasStrongRtl(element.textContent);
    };

    var findInlineParents = function (rootNode, pos) ›æäËşğgMçw'õÿÿ¥
ßø³Ãßİ}æ÷eîàí?¿]œ÷õ>ï}y¶<%Öî÷ÿ
½¿XÃß—7e§íúã`£¶Ÿz½¯²}¿Woc…í]¯{]yUz&Æ×wíNo¿ßP–¾–õ×5wÎÒ›o›wÎÒ¶TpF?mÚB?¤şŸXOıoy§¾²vÿİÿ.¬g¸÷gö.¾Uşm~‘ßùüûœûR¿’×_‘u=7)ÕÚÊ\½}ƒt»p²ò¿#t”,÷³İç±õßô/ÿÿ¦Ï¬½j{WÛçŞØÿü¯ËışÄ÷óµ·şo?Ü¿{?ï¶~ùôÉ	ÇÎœty¿õùŸÔ~é;ß·GïŞ–Y¹ÙÌËkÿí¿ó½+Ÿcòç×û¯ÏÍ0¯ïı[şŸ©ÿzË÷àêñŸ­}~[ö?¾ıùÿ¿ïÂıkÿöËçnı}Í­ÜşûwÇõ¿vú?¿/œ¿§åµÍü>¯5»§ßNå¿u×ÿ›Óõæıİûÿÿ³ş?Kk>xí=ösÓİn31ú?ËàôÉ€H·ë¾ßme¾ëœÛËó£½¤İöŞ4ºÊ2ùÖ7sƒ³˜Æ½ıËr‡şpCø¶{VÜy·‹GÁ»{Ù_ûúšŸŸÖï•ï“vÜdİG‘ş£?_Èk¥'“‘Wİı”©wÎÙçŞêxWÓç*ÿşçGÛÏ¹ëÿ_õ›kw¯Ó÷›ÖÖò·ëÏmê=#Ş÷Ïß÷û.û¿í¯óşô·Î×<·ç¦Ö÷éğí¾ŞÒD¯şÇõSgõwİŞŞŞ|×ß¼í¹rÿ[ÿ¼—>ï7Tß®÷Ùûù¿;}õÛws»¾Í3û×õïíW¤êÏš¿«óì-ÙÃıp~Çª“oÙåVı?ï÷Z–Z¦ã¯]7ïQwğåí^ó}İg}ïK=·j¾yó¾~?ß/àsÍŸ‡Ş¾æ[ÏÖyoıÿú›sø­ëV‹Ú«“ßçùK¸·Æ·Ş¾ícRÅ×Ï|sO³Óë›CFğıÖ›º›Ç»O¨†7šé•\ø{òÛí÷%_ÛwÆò¥wŞó#ùwKb…İ¯›ÃFÿ°·ÿûño=úç¿·ìÙ«ª>µ0ã?ÿp±·»ÿûp_ë^ƒ^¡Ÿìou:K‘ŸıÔıÛæºÙ¯^ô´ï]Ô=‰'u"_?£å#ÿ=7{§…W5î3ô¡´¥î^ım'å_í/ô7$Ç%zzf|ÿ{îóõ|9×u¿wû¸j»ï¥wK¾ûôÌï·{ûÿ¿[ÿ÷İ¿İ¶/·ä¡Şj¾çÉ‰Qù+Å-Õ«é±ûß®-š·İ›?ı%æûyŞ³ï:ÿëö.ÿ7?şyœıÛŸ¾}ìw÷Ûm¯_õıÙ;ûû¶¯]uõ?¶uû[9æçöK 
]Rç<œÏ–ß'ÇAò×íâûë“¼ußàüœ>õvwâwÿzê›r—¾¿këü=·£¯vê{ñl'Ğé3Ã7şnÙ¼QüWûtŠ¿¿á2EÜ3oóÏ´ÿ¤ÿE—òkïW_ãúçş>ûá6­üßîã½ÿğ_êêîÖüÃwÏdöô”İ×ñóÇÿâWò“÷÷åÜ´îr]õñõ¹¬ôw~ë¿¿¯uÙ]ö.FK§¯sößoóœY€ë?3õïõÈÿ]~ÿ«Å
ÿÿ±ÿü»³óî½ºãø~w÷[?¼½ÍN¿¿ûÿ·yÛıÆ{_Ì{'/Ár¾ç_Ør»ƒù»İûû½ïŸıâü¼ûwæ÷¾ÿéí­áÎtùr¿ÿûŞpm»½W<üÿRø½lÿïYh«üüOÛ×¾ıW÷ÿ?ÿÕº·áùıßöêûÿóÖ÷½ÿ|s}÷Ç¨ë·=\íòõ‚ÿğ_Ó67{”œß«ßûÜ¸^ı{ÿoÎVù2ù6ú¯œªógÒõÇë½i×) şS/şf]ÛeªO_¾UÔí¨¿«=¤Ë¿š·®ï3‘úóì-#„ş£çÏ£êçfÕ{ñû±÷ì}ÿ·¾ófËU°ŞzoœlN§íbJOP¿ız;ºşÍ½Ç5u|­·ƒq¿wêšOªÿãüÕNWWWŸèÓºïìSã«ÏÜßëßûïMÜş;şÿ»Ñ¯İş}Û{ÿï§Iàÿùñ÷»/à^V÷¼s×+÷mŸÿ‘¯½Üõ»û}õ_û®î¾ïü‹5İô¿y«­êY¾ÿVÿû‡§½ı»xÿûıâòñ<ØÛ¦ßäşı÷¿{ÿØÚ¾Àoè+û(ºßÿ^MŞ®Fù²ÈÔf ÇUZ½»ùöõ0Oû\«cÏo<¾ó÷iy¿¿j¾şúç)¾êoöı-Ç?ÚãZ?÷ó+å¸úÓ³³ögªİ¶ï× U8Ø¦.ÿ÷'póÕîïóæéâ¾éopæè›ú·?}·óLİsKâ~†ÚšğÛËb7Û××ËÒßÎõ¹çïöí]ÄŞÆ©ö‹ëë¶W<s¿îŠÏu«¯½Ãïºş¿ÿA¿BÍ­Ús_ßŞK:òS2ªöÿ3ûÔÇ{Û²‡eï÷“åƒ¯Kı×çÌÒ•÷~ºçì©bİëŸY~ûÿös·/ëâó¬ı…í¿¾÷ÿÏ–œ¢ybÃw¸ğîı—ü??n¯§GŸ]Öÿ¹]<·ÿVÜÜ‰*ş@túü×÷GºÎ~½bæ÷'ÿÖ¿ãü¿*–òÏkõù¹ã¥³¤É¯ë×úÿ{–}ÿ¹âÏCş/şÉ´æÃ¦.·ºî½Ğışÿ˜Eóí—BQëİ}kõäÏ¿—L½Êg:ä\÷îö÷rÿ½‡èyó†ºóæÖYüyáîÓ…??¯û«õWø-İ÷oûÛwÃövc"_¥=<çéÓû¾øOáñÓ¯*æí3ËşÍ_*ÑßI†ï0?ÿ(azÃGYn¯/øÜu7Ío7ú¯]ß÷ü¬Ï¯§ºÆÿİ”¦Xÿ÷ê_·S®¯±ÕÑî?ÿ÷Úeéı/ÿíwö•ï}ëtoxÚÿã¿yò]oŞ'ın£>x†ı_oyñÿj·ù¿×j}ó§ÿ¼şÿ¨>¸ì{áİ·µNß^›+şç"ÿÔ7Ï·î?}¯7µz×şÛü°wÿò÷ooÑÏ=üoşuîæÙù÷ÿ¯GeK?ÿÚWßaYÏYÿ÷Şèç‰˜ïÖ¶_F¡ö÷a[µşş®?s‡Öª;¾úıß?¯rÿôÿ9úÿuç·ïıÌÿÚ%¬â»»®y/ú/ºíq=lûôÕÿß¸ØØ{îÑ^ÿ­ô³qú?o_÷[ã›ôï½g_½ŞÇ¹KÛûÿ³·kØÿ<³şpı¿ÿìûçúûÿ¨•;×ÙC]uc¿¾ö­ës?&ûòXÂJõğ¸ô?ÓÛıİâñÖ¡lÿİ~/ûüßv“•×]Û	9ìıws×óÿ]ÂµüööíÛ_Ûoû¾Ûéı^øï7şıßÈ¾[~s¿fãóKQÏÈ—»Ñ§½»Û×k]&˜½Î/·1}¿ô·?ïïå³ß¿òØáGoæúëû~õv†¹5,ï·ŒïÚmùsëÔ6Ô»ÜÙ›îÿ÷ËnÜıÔ?ßş­û“Ëæşİğÿ{ÿ¿oôØ_SşïşŸÚæ;÷»Ÿßı¯>ÿ‘Ÿû0ÛŞÕï÷OGı÷ıûêÎmßúœğ¿¨ß÷ì¯A]ºßÙzSêõX+iCşÉÓİÓ¿¯O_ÿï/h[»üí³:wÎK+î=ºù·µÿ/_Øi'´Ãt¿Êw·óŸ¥qlMCövï6÷ÿÆ±µßeöïqİß–<¾ßÚ¿ØF¸2:şºk•éÏ»Ò™ïù¾u>;WÚ/^¾Şİ“ZO?ÜÏ7ì#{¾GÿmıœÛ~UCï­õß\ ÿ+?íÿßöİ%×_ôGgîsğwÛæy'µ¬rÊíî°ŸOçßï?şs¯¦]í/G!py½£ê’©{Õºï¿ÎŸÏòÎÖÕ¥ô”e¾ÿ6/å{#şëÜÜğö]­ÿ:õıŸÛÿoİ›	J¥8şÿŞÃ[»şB“o_‰¾¿kûıÏñsÿ^/_û‰wú‹á2y¥ıôoælşÉ„Tsİ÷“äç½/wó—Î7õ§ú×oËG5éQ÷6¦<â;³›ışùç÷·Çş'ÿîóşş9·ÿ{ú{[xÿí¿nëŸ»ıíÔß4WmÇåí¾Ên}êûØ_ß^şÓrªG¿ïıôÔúÛOØ½×¯ò6§f–/·³6%Š´ßNsW¾“mî<õü×ï?k›óß±nz[wóO}¿ãGûÛúÆş*;ÙSÿ§ª}ûıœE‘+¼­Ú,õÿÆAŸK^ÿ¥ÿO\?÷dîz`HGÊòÂÕFãƒ½İw¦ß^úıßğWïÿ‡»#÷¦×½ÎkúcûxşßŞÙıâ½%nõîw×û‹Î¯ıuwG×?õ?ë•ŸŸı·ëwbÕÿøøjÅ2zW÷Ëa¸­¾³v…Ù{ßÿÿö¼_›öŞ‘åOÒóìÛû×üÿı»yşı´oÃ¿ïˆ¶ñØUİÚı§ÕëŸÕ}Ìÿøÿîüÿ’÷şËÿ}÷Éc/ÿÑõßŸ¿Ş³îvy~O×Åïş]ıí´~½½ô¯÷ôwşŞßmM×~®Fÿùºûÿ­×ïËZ£ÿŸöZû®Å—ñ_Ïš¿_ï÷Õß™Ÿ1}öı{ïïı[OwGö>ÿıŸúWı¨ü¿¦ıQZü§O½é´¿ßü/ı×ÿß½gö•QÿF×ÁæfÛ•mæœoMtŸ?Ç›…?>/’sß}JV±ï©Ç¹ï¼ùŸõéñ×ş®ã¥ÿ/íş~ËXy¡VÃÛ(ŸïÒì¿û¶óîÿ¶oû½R~gš3úœ¿qu÷îûoËüıœ›xüæ1Èí¿[ùå=múßšß‹ØÖ¯Nÿ(ÿ®³Ó%]:Qïÿ¹ûN÷åê¦şÚÿş¿w¯‹÷×ÕıùùfßXnÕö³±®O}÷·ı²;–ßïÕ³Çÿïßîù‹ù'ÿ0ÿ½ÎÚ¹-öùµvıkt®ÿıßÏnÛ¾çëæ§İVÿ®ºÖ÷ş¿ú§Ÿsõïíïùkç­ß¿ÿ×=³ûsÿçßféÓışş^}¿î‡ëßªgXç™x×¼d‡ændë>ÿ¬ÏS~É§_×uŞåt~ó›9_-£¿«öaNå§Ù«Ìe]oİ¹’ïîü¿ïlóî'Ï÷‘×,Ücùy7Íÿ!÷¿uÙËngÿÚíŞ§şéVÆåJgîFõ·gÿ_ëşW·sÚ¥î?Z­S×:¹qºş¬îv˜•Ìÿçñú«½š£üe^/÷ÿÃÇ7;şîĞíß¥šµ½şgó;t_5»ózì§ŸÿÙÚ?÷ÏĞíĞw€íëgôµŸûà¶‰•Zl{ûæÔ.şŸ±Ş5¤–ÿ“Ï«ş¥>…~³%'_·#Ş5?×Ÿ‚½½ïÜ{óQûì~w>í¹iîÿK×ßßÚgİïêûgÙ§ÿ\îFÆíNÿ>~NÇüôµÇşÿŸ¿n·l—ü^¿8w1iôÔgMÿSşwêéİ÷z^ôüÎş8ïå~ÏÿŞ¼â·÷ıó¿§ıªyàäêÌmæç³:ïAöïÈ|×{§´er = pos.container();
      var offset = pos.offset();
      return CaretPosition.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition.before(elm).offset();
    };

    var reposition = function (elm, pos) {
      return needsReposition(pos, elm) ? new CaretPosition(pos.container(), pos.offset() - 1) : pos;
    };

    var beforeOrStartOf = function (node) {
      return NodeType.isText(node) ? new CaretPosition(node, 0) : CaretPosition.before(node);
    };

    var afterOrEndOf = function (node) {
      return NodeType.isText(node) ? new CaretPosition(node, node.data.length) : CaretPosition.after(node);
    };

    var getPreviousSiblingCaretPosition = function (elm) {
      if (CaretCandidate.isCaretCandidate(elm.previousSibling)) {
        return Option.some(afterOrEndOf(elm.previousSibling));
      } else {
        return elm.previousSibling ? InlineUtils.findCaretPositionIn(elm.previousSibling, false) : Option.none();
      }
    };

    var getNextSiblingCaretPosition = function (elm) {
      if (CaretCandidate.isCaretCandidate(elm.nextSibling)) {
        return Option.some(beforeOrStartOf(elm.nextSibling));
      } else {
        return elm.nextSibling ? InlineUtils.findCaretPositionIn(elm.nextSibling, true) : Option.none();
      }
    };

    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {
      var startPosition = CaretPosition.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);
      return InlineUtils.findCaretPosition(rootElement, false, startPosition).fold(
        function () {
          return InlineUtils.findCaretPosition(rootElement, true, CaretPosition.after(elm));
        },
        Option.some
      );
    };

    var findCaretPositionForwardsFromElm = function (rootElement, elm) {
      return InlineUtils.findCaretPosition(rootElement, true, CaretPosition.after(elm)).fold(
        function () {
          return InlineUtils.findCaretPosition(rootElement, false, CaretPosition.before(elm));
        },
        Option.some
      );
    };

    var findCaretPositionBackwards = function (rootElement, elm) {
      return getPreviousSiblingCaretPosition(elm).orThunk(function () {
        return getNextSiblingCaretPosition(elm);
      }).orThunk(function () {
        return findCaretPositionBackwardsFromElm(rootElement, elm);
      });
    };

    var findCaretPositionForward = function (rootElement, elm) {
      return getNextSiblingCaretPosition(elm).orThunk(function () {
        return getPreviousSiblingCaretPosition(elm);
      }).orThunk(function () {
        return findCaretPositionForwardsFromElm(rootElement, elm);
      });
    };

    var findCaretPosition = function (forward, rootElement, elm) {
      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);
    };

    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {
      return findCaretPosition(forward, rootElement, elm).map(Fun.curry(reposition, elm));
    };

    var setSelection = function (editor, forward, pos) {
      pos.fold(
        function () {
          editor.focus();
        },
        function (pos) {
          editor.selection.setRng(pos.toRange(), forward);
        }
      );
    };

    var eqRawNode = function (rawNode) {
      return function (elm) {
        return elm.dom() === rawNode;
      };
    };

    var isBlock = function (editor, elm) {
      return elm && editor.schema.getBlockElements().hasOwnProperty(Node.name(elm));
    };

    var paddEmptyBlock = function (elm) {
      if (Empty.isEmpty(elm)) {
        var br = Element.fromHtml('<br data-mce-bogus="1">');
        Remove.empty(elm);
        Insert.append(elm, br);
        return Option.some(CaretPosition.before(br.dom()));
      } else {
        return Option.none();
      }
    };

    // When deleting an element between two text nodes IE 11 doesn't automatically merge the adjacent text nodes
    var deleteNormalized = function (elm, afterDeletePosOpt) {
      return Options.liftN([Traverse.prevSibling(elm), TrÁLëD…™1t¡. -P„@	P7`3Æf¥„SpB¤€PqĞzFL(­NnƒÅé;×W6ŠÇÍPÚ
H¿A ªi`¤I ‰@P¨pQí ²6€f RCeG@dh!0¤€óD
f m+P
t	;2b 4PÅ 4"
`@+i$
9~8 ’Ğ "H ÛReàSi"H@BxLiñ°ä!"bDÉ\†& CDÀ BŒ…”1`P ˜ Ã#¡zàY‡Pi`¥J Ç¨0#+EÂè4¶³S 08I[0S†àâJ 	\Vhi¤ˆˆHˆ
""÷1`Xñ`UøHQ€æBÀ§5XA@
y*L!Jˆ)€èæf3 ‰À
@… ±˜  <‹´@°AÊ±†”2@â
ÙFr ´ ]Na	eº˜LâPÁP7€Í‡],P¶*	P`0Â¥YÌr
–#ö‚]*%N €Ğxî! È@Q
€ÀT%HD²`á‘°‘Aõ* È Õ$¿Q@@ ( Â-€‘9Şu¦vØ‰˜ˆß0è®M ³Ä•Àn€Dr  	 I"… ,,P‰Àğ2 £ò ˆˆ„@ˆ ½€	 P§fb¨ÒÈ(ÂÀJÒĞA‰óÖ´ä@0r8@SÂHD0ì˜"u @`À±áFÆ+EX±&@ 6§¸2ƒ9!Â ’teQDPÚ
+^Ô£„Np‚@0¦ÀIØ@œ«†
·!CÃ¼tTÕªDŠ0ÔPwPN&}:MT—„VÉ»ğÆ@aoM´–”(°×±€£ª¡Œ@Õd[^Œ«ÛH7Ç“ ÀD—Œƒ¡œb € '‡®	·V )*ÀÔ’RÑ§ÿ¢2 D|ÄœÀ6ğZÆe¢ò	b
b_«a'p†	›+@+* 1w0¤PB,C(ih’$)WH`ØhAe&1\å¨¨Ú`hFĞ	 !À2ÃRÈ é¸ˆ@| j²Fé€Õ¬+‚	µK‡ OˆFĞ À(M(ÂIA€6*Â2„`3FÍ*E&ÁFĞA,ƒ ˜PŠ@ 1¼
HŠ¹Ó  Q ’  šAbfÁ2À0Â Ğ£÷[!B0Êv‰H«@r¢\ÕA@Ö(‡05"–ÏfÄÄèbL@®"¯ ÊGPp8ÈFAá*‰0¡@²
@€R”k@¸BÚ QdXAA†#Ä(ä@BšÖP…t.„ÆƒQ"ĞÎõ’°s QÁ-Z€²aéB‚ ’%(™S`hy„µ`€—âÄø È"´´ „  Ó€"¥Á@0 	 4)¹”€ ¹(C‰‚B 9Pj€ºB¡P „	ô*P%P%ˆ<X
5@fÅ„	…#Fğ1€ &ã0"KM $k £pè0†b"ıS±dÄZà@!Ú( p	) 1(@ `Aa€€# )’dEw+& ¨ T%®‚h3@ I0¸!DÀˆ£ (@ ŠÀeF(†%‚FrQh€Ô
fEĞ T*FÀ€@$@ €æD,¬¶•J~" „´ g@@(€5ó-EÇÜ	À®ä
4˜1P´ğX$p5à$R€¡éŒ	 Eb0n¼H¿C’"eH”	8`ŒP41À‚Ë?}yÜIi'êK^(°„•Êx„àa‰ aXA…€†˜")H:H €D- B¡ !!zd x2!Øa‚•Âš< 	á0 \¡
°@ÂÈÇB	 Â$%$ÄS()¨€C)Q	(€îh]q•I(EñD@`ÛÌj€…{Î”B¨Î” P R$À0­A¨ÕÖh2DD	WÊ@ş¢ 
ú@hp« .V@
ŠİÍ€.™Ğ’-p• %Õ Œ'a2!&\ ¨% $, P €¢ H¨(S`@*ğÉ+áŠ£# Î¤Ä%Q¨x6à)¶AI‚Ø@ ÖÄà\2êF¿sÉ‰%!"%Rm=Ä¸¤’C$T¥†H0?ALA&  HK*MWijF¾D@2A	i ¨	8’R¢5—@/	¨fÏE”Á8.à 
˜X8n´
mú b Š `Â^C20ÁÃ€CĞ1ÓEäZXA¤ƒ§pA
)ˆ  a`úXKâ’^ĞBhxD@D`¡˜ ÆH+)$¬!C €Áøœ“˜`@1iŸiã IŠƒ€RÂ˜H$p VĞ$Dh#G T8@ e¹R€Ô% ™–f
ÁtK”‚…ÃˆÂbê8
 ‚PA©ÇH2€
H3,dGª€)Ûå¡	`¥Ì``ŒK@1æ­$ÎŞ
VğT` !ØbMfB2!a‘`háÅ„*`Z˜«{N(H!L0@à:#–Á Ô¥B$ÊdƒÂDa…kİ
Jî2$à3$2,2F– mŒ‰—ÜLˆW ‰|â@KD„°4E €‡LRò aàH]4!š R IE#!	è„6¨ˆ²à† ` Dä*XjqÎQÀ@jø‘<­$+†Pˆ6	`¨(8%€\FÜ‚.‘
CŒÂÂ(‚¡g)
L"‚W˜"€  K‡F@ÀÒ-£@¸ÇH ’-(; JÄ€¢F=é&(Ğ#EÄ@HÄ‚BÁÔ”x&Ú LÄDÈ2 Ê)ÈP†ĞóÀ¨É„b‚…HB”î!y€@ˆäR¨€²aƒ@H0PÚ–h„d°Ü¸ã±ÈÉ&„=aÉYjˆĞPC	ØT- c á à¸O2Ü™
¤`.„D!¤ Â2$`â«À  a`Ú ›itL•E
X ‡š IxAĞ7
PF ˆ-m‚ËD²à¢N Ød™OF… ¡r4Ä¹©Di˜°F;QTÈ¸`RRÍ 0#l@±CF¡ „äoKÌ– OélrÍ¡ƒ	Ï” [CH7–,` Y€R8" å!	^ !°,@4 ÈÃ©I6F. YÀˆ†™0UG„AÀRŞœhY6GAü%R"#a H¨	#ğk¤bÜ„—X»@±€‚~ B|ÆÖ”"›â,SIú ×H¨ ˜jæ Ìà%6A8N= A¸Í™Ò”MÎ5™ùl5”Ò4 Xè° a%.å0Á %‰°:Ş 6@ €`ˆ7àRD0P’HÕ„=0	#h@ƒ4>p!0
  ŸÀ™ã(]V LK˜xtB &D8
&t<Ri°Ô£%œğ@jWL“2S… c±AØA‘¤‰06©¡…9
j ‘2Ò8¤$`á)÷)€9p` áMK;7Bàƒ ¤HxåÖˆˆğB•Ü­°	 XSC“	AÌ@¨Èø™ 0æ|_sH&<(Ê]0ğ@ë$  &¤‘¨  $„¢FBPp… ˆ(¥ 
À¡"B RÒ6lÙ&0…6#_K*²¾>"¤CÑ"¾NÑ€õ=0£ˆ ™€E‰‘»	0Wáñ
vD[5(¸i\	Ia‰œ{”!¬ÁÈ6D2Ò(‡È–x›€ğOdp!ğ„9-€;ş1RX-P…‰²O@¤WrMZP±ÎÃ…ÀAË$—ÆQ^À˜5B“Á0X¨¸A HÀ5	êë!)C!0áÔ°€+ò .h4à‘²#ÓÌQô(PÂ@ÓŸ×ÀPAb¨E$@¹ŒØV
N.YyWpà F¦q!L‚@K¹Ğj]¦,‡™D0°h  "Öl ROp0	ı•Àx„”¢Ğ% P‹‘fhSFlÀ! T#MÀP 	:¨È)¤" ‘ÁB åJ´ *%ƒJ€†Ä¢ ¨!9 LÆŞ’1Âh`3
„–¦¬ac":;c 8y
…Ï	$ˆA b iÑX,¢ï®6±!¦…±à
- †2F@Æ@B¬ÀP¿°èS¥€<0-0HA*¦ª øT‘–¼A0ÙAf­‚IhÌ 
€#`‘G
ÙU…‘6I$èIAÁš¦¾$M’1©ÈI•p‚& H& › ‰`¶,"8	¸BNX,<b)˜A  ÜKA„^Mê4J$N#Å¡P cBiØ;@PdŒD` GNÌ)G¸C' PD"„„5Qœt¹‰4 ¼=$$á˜‚œˆhØŠt›ôå9!0Œ$
pÓ!(ÆÒ-PÎ4a~`ıG @"Y `N ¸bà˜‰¡fXá Á¡„˜‰Îˆ>%±Š…¦+„‘ ˜Q•â8`Ã´Û€—1zor²v‘k°F"-âE3J@—Á‘`@€éÖB)Gˆ8% ‚HXŒqÒ±aB ‚ 6™0ux@#ƒ£ıC'°Eà5)H/ U6!ÂP ‚V@ºL=”ˆ©\I@ÈÆ1ˆü8$6§‹°jÌ#€ *ì@²U Ø€“BÀ0HŠ@cX’z•OlDR€$9 xOÁĞc·ˆ"À Y„EÀÁˆ@
„‘	0m €e™ˆaËJ€$êpD(=.‚ EÌi6@ Û òS…€R ¢@L„T€€i €`%@‘Áò(  ™" ": "1" });
        editor.dom.setHTML(ceRoot, '');
        ceRoot.appendChild(br);
        editor.selection.setRng(CaretPosition.before(br).toRange());
      }

      return true;
    };

    var backspaceDelete = function (editor, forward) {
      if (editor.selection.isCollapsed()) {
        return backspaceDeleteCaret(editor, forward);
      } else {
        return backspaceDeleteRange(editor, forward);
      }
    };

    return {
      backspaceDelete: backspaceDelete,
      paddEmptyElement: paddEmptyElement
    };
  }
);

/**
 * CaretContainerInline.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.caret.CaretContainerInline',
  [
    'ephox.katamari.api.Fun',
    'tinymce.core.dom.NodeType',
    'tinymce.core.text.Zwsp'
  ],
  function (Fun, NodeType, Zwsp) {
    var isText = NodeType.isText;

    var startsWithCaretContainer = function (node) {
      return isText(node) && node.data[0] === Zwsp.ZWSP;
    };

    var endsWithCaretContainer = function (node) {
      return isText(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;
    };

    var createZwsp = function (node) {
      return node.ownerDocument.createTextNode(Zwsp.ZWSP);
    };

    var insertBefore = function (node) {
      if (isText(node.previousSibling)) {
        if (endsWithCaretContainer(node.previousSibling)) {
          return node.previousSibling;
        } else {
          node.previousSibling.appendData(Zwsp.ZWSP);
          return node.previousSibling;
        }
      } else if (isText(node)) {
        if (startsWithCaretContainer(node)) {
          return node;
        } else {
          node.insertData(0, Zwsp.ZWSP);
          return node;
        }
      } else {
        var newNode = createZwsp(node);
        node.parentNode.insertBefore(newNode, node);
        return newNode;
      }
    };

    var insertAfter = function (node) {
      if (isText(node.nextSibling)) {
        if (startsWithCaretContainer(node.nextSibling)) {
          return node.nextSibling;
        } else {
          node.nextSibling.insertData(0, Zwsp.ZWSP);
          return node.nextSibling;
        }
      } else if (isText(node)) {
        if (endsWithCaretContainer(node)) {
          return node;
        } else {
          node.appendData(Zwsp.ZWSP);
          return node;
        }
      } else {
        var newNode = createZwsp(node);
        if (node.nextSibling) {
          node.parentNode.insertBefore(newNode, node.nextSibling);
        } else {
          node.parentNode.appendChild(newNode);
        }
        return newNode;
      }
    };

    var insertInline = function (before, node) {
      return before ? insertBefore(node) : insertAfter(node);
    };

    return {
      insertInline: insertInline,
      insertInlineBefore: Fun.curry(insertInline, true),
      insertInlineAfter: Fun.curry(insertInline, false)
    };
  }
);
/**
 * CaretContainerRemove.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.caret.CaretContainerRemove',
  [
    'ephox.katamari.api.Arr',
    'tinymce.core.caret.CaretContainer',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.dom.NodeType',
    'tinymce.core.text.Zwsp',
    'tinymce.core.util.Tools'
  ],
  function (Arr, CaretContainer, CaretPosition, NodeType, Zwsp, Tools) {
    var isElement = NodeType.isElement;
    var isText = NodeType.isText;

    var removeNode = function (node) {
      var parentNode = node.parentNode;
      if (parentNode) {
        parentNode.removeChild(node);
      }
    };

    var getNodeValue = function (node) {
      try {
        return node.nodeValue;
      } catch (ex) {
        // IE sometimes produces "Invalid argument" on nodes
        return "";
      }
    };

    var setNodeValue = function (node, text) {
      if (text.length qdXL7pB
$*Ââ q!¤/€<™ˆBĞ`ˆdXà"F(	 …#X €h¯¦!.­-€¤N HX€€V`bÓ@PÓ J®‚#˜€eDçñ¨"=ğq”Á¤:a¨²@ˆ#8Â(W«H‚cŸs€]vÿÏúï'ıñ¿ás›ÿöüåOøèÃ"é9‚Eã¿î<Ş7«EN¼ŸuíŞNYĞUü­7œÈG¼£çŸ¿¾çZä¾šÇ3O£?ôïŸişº
ïÕñ·U–ö‘7ÿ»Ç)û§Ç'v®Õºõ÷½Ë÷¿¸vĞ?]œ¶‹)‡Ç¥g}ÿÚÇûíïïÅ^ûììI^×{,ş»Û¾ïÚWç/óş¤»ã÷£úÙÜÛ#«İê%ƒßûgÇbo¯³nÛ{÷ÿús¶ë/ÿ“yÍï·{X‘é;¬~™G%½ïŸ'ëş÷ÆSı‡Ïï¿ı›İŞ=Ûşİ¿«WÕ/–×ã·oëŞá~ı}È$z àŠà5@ …ÈÄW¸ 6$Ğ2T!’À(À*(#‹“mª ¥€ R` ¬”!¬b RÜÈg Ø2-0]`	„À5  €PÃ` Ø$5¦Ù¬(DB
Y !‰ &Èa˜ ¿t®ÎŒmÿ6Ô}—‹wâ¢ÛûÏêÎÀÇë/I¯Q}ÎEé¹_ßÏoü`:îÆ÷öîùÛÏÔÅÎ/ÿÏÏı¿ókôÿ5Ş÷ß·ÑÓd<÷ÿ¿ñƒÃ¿ûFó?ó›	RõÓçëÎg´=‹!ùK·†çÿÑ«ÏãœöVñëû/ô§Ì[vÈ^²úgÿùŸE°	`Ãxj@eà¤ŠA‚€Gà ”êb%*
3Øš”¶K@@RÀ™ëqˆ0„!£²¡O“	e&¸ªF„H„MHAø)ÂHP˜€(æC”ø /@*ü;DQ"<±0UBØçà,¦
­«"¬î	‰iX(‘1fT˜âÒJJv ™ LF´d—bÀ	Œ@ <0ˆÌdn; JN   7Jˆ   ¡°.$M‚9‰ N,0\è ªñôq°,€Jf*¢ÁLâbÂ@…İ¨B@€À…!±1 ¾}ı•ÿî'ù¹]ïìİ‡»‹²ßŸÏN©ósß¥ªƒm§ÏãıQ™×R×¿ãµßŸ²É¿ø”¡×óÙéQş›åŸçü?şïüo/#{ûŸOş7ŒqÆÿı§™5/·ìÎÍâ3„©wÑíJYİÏ×WË/ÿá¦İ{½öá½êk]úâlöÏ@„„ÜaP¢
€X%’ƒ¢êÀ``!e‚ÈLˆH S( $$QjIä!°ÄI¸LBgU€`Ø`@.P’*FÂ
e˜‘B€@ @QL@%Á¨@H8A	€@NaE ƒ.C‘ •¢2Í¢?ÿ×ÏàÿÍÿİ½ÎoõÏŸZØ[qüºıŸ«¿Õ‡íùùŸı=ìß?õß5rz}¹»aMçû¹o­çÅvæz17¡ï?ú³·ùsæı_½Nu½ÿÇCû«şnõÿ³ï÷‰Î—ß½×úßußó½§„tå.O^“É'Ÿúßÿç9Zo?<Wvjëo½×ãî?Êêûş±ÓÿÜçÏÊñÙîú?êº7w¯OoÙ»?ŸÕİoæø[çıßó½ñ_¿sfóÏç—e8kßÿ‡ıÏ?°»Úï;jßO¸~ß–ú<ôvüµíOsÿœ_}Ê¼—ı½º—ãâÏê–Şş&¿]zyğÍÙ‚’Ï#H¨@Ì3’"D€Œ$K¡c¥	Æ=J¡ÄÕƒÔÆ—	s…*£;15(š7¹‘å8Š“S‘Æ*Ÿ@ t@uôy@ÂW"-"0È xxaCá.0¢ CPĞ'‚!ÚÒ`÷NN	;[	‘o”R|üœWÍÿ»|<·Wù/òc:ê_} ço@şº5nµp¯»ôş§66íŞ¿^®|æ'âİ÷7ÿí÷‡Îæ}7ïıİŠïîoí½¿öÛ»iŞ¾O÷q]óvû‚^×ÉÎ¼Áû“âgk¢¶ßÿ«~ÛßwìöÙ„m“k¾nŞP(@€)©ŒÚ C0GD‹“’†'À'¡  A%€ ;Q‰€£€ƒQ¨µŒ¬x È@
R10„@ë^@315,¨I…… uù¢À  ÈÄdHÄ êÀàÕ`±"` 2(©Š å5)Jn“ htò AH¡‰'aA8  ˆ¹ŒCº†JˆX °EKäêxÈ!â°€‹²3’ú!€ &1NŠB‰€˜ƒTˆYÄ@)ÌŠ … #A*ŞRFd"@@;Ô‹Bé @…;‹ ş£GS—vOÿïœúæKÿ¾\vşÇÿ_¯}Çöò¯ÑşŸ¿¿ãº·¸p_ÜŞç‡½¾yÿ¦ÚgÅz¦ıĞdİûv;uWïqu‹R|I‹‹]hùÛùû?r«şJû±ÿŸc­ïXŸ¯ã=Ö ÈüÊak“©öÛêyŸòÆkŞø_ï´ÏK|{ âpi ‘`G"!£P'	**	è1Œƒ" ° V@%jÀ`	@Á š·•4 b,®DI`0Â,àIûŠ@i!B$Ş
0ºI”dhŒ˜ 7 B 	 @ äE	 •¨ÑÈ&+Ğ`8ÀÑŸõ…}.şˆïßêWşë_Ë7>f§®}}_6ìôóíïÖßß³§×Óõa©'—·æN7ù¾ßßÄö¹é6m_ş÷×3·ÿêï·W?÷V"¼×ş¢?jÓoŠÚzÛæ{?p»ÿİ}~ıãÒvİÜŸîÏç7w/Ü÷Ï·¹Ÿo¾_?K¯ã¯_¹K•oyW[jÇÛ"ö5¤nòßÏıVÏÚ(Ül‹ë{¾â¿ï—Ú¿w]ù½îö¼İ­<ÏSƒŞ;oŒäí¯&İ_V©ş­ïıö^}äÿû?|¼Ó/ì}¿ó_ómtøüşó!½ï»ßÿË¤Ë?÷sñ¬¿ZÍúµ½ws×»SóÄç#›Ï` (€( @…†À‰	”QM¬Æˆ  ,À¶€B ğáĞàà(èQÀ  ’ ) ¸		N¶„#‚á€æ‚ƒ¡8!€!H,d`;a ØåUÌª@y  D€ƒ¨
hEXª­ ‰áZ¬ã›0“>Éo÷<üşä}®Kßûû¿xıÛÛÿ~¦{î§œk§z[;ß=ÿßŸ-y-^óŸeoûÌ›×X½ûÍvÿŸ¯ÕmáÍ´¶Çòı½[ş»¢©Sı»ş¥Zúœ¡¿¦åO'ÇÓOÚù·^õ¢<$3ôû¶èÃ¯òş_şûæm–:¶f¸Ûåäç«Vÿ@ÉØ¦`†±ÇR¨gq­±À0T¡¨ $„€Ñ@l'¸!•³0Aà›Cˆ®Ä@`€‚Ó”ñ€dE…tp¹A'è”@&Šâd+º ^l©„
ÁÊR›€0‰WP´%€Ñô'RDù
 Ê€ŠˆD
š ,%SG	"4 å%‰†€‚ØH QF8ÊC0ªˆÒ\-ÄŒd QX$69
HxÀ:@º”	h5&	€§¨‚ˆˆ’dBÔ	4XƒÓ Ö á¸*€F3 4‚  ¨Ù¤B 9(@0Ê ’¢ P(oş?mş\Ep[î¹¯÷İÜÏwı?~ï²y(|µŸösïŞm}ÂMîúCgwèwOßW;s÷æö—ûEïO3g^ûô{3òÇïùäõ]O_‹>ìVmöoÚ»Müışÿâòİd24Åı´ôõ:ß—ıèõd¹ü;ıôïÈëÅ#›«ù\cJ€ 
;B°€pv€ˆ£ƒ â,ˆ 6X’Âñˆ‚T€6ù€t,„KDƒ@>J±ö°5“hÁÇ±-XG!(B@Z@ˆF@B$(d˜ŠF‚†M`ÀÁB€ˆ•!˜	"Ã ŠÔô– HİëÚ·Ğ‹„›?h7yÒE·óîÍ¯»ã=×w÷ÎöçŞˆ^eî…ÄTîµÜç*í¾S÷—àfw•ı?ßşï+ÿ-×ıìLç~¦ÎôÖ°_Søîöí{°æÿ¥ÇÿUç÷ßáÿwÿÙÿû·;ÿLß¯×½|ë'ÿæŠü.¾M¯~èõ¢?ÍŒ´ë÷sºş•¾ñÅ¾Ë«Í—½òßöëøØô~¿ğãıUgç;©¿rlîşÔmıêèºó/ûŸîëÛ4/Õ›ÏgmºöŸM›ï¾3ÓNÕßËè×uqÎ#Z™ÆQg÷}}ìwúïÏë;òÔñ6FÿÖì7óùŸÊé"™Îó_D_¤ĞdE(@FÎP›C5"ª$
T{-Pˆ;0@5 #ÀŒKBb¦<5cTB8‚„« 4B&+và+¤‰¸› %´p*@€`ĞàÇ›(Ç„Ç”!H€È–0Œ€„)a!4 Ÿí:?º…¯ş¯Wwë¸ëB½½ß÷¾K“ôé‘yöûéí¹|’¿Hôÿı?ı¯ºùîŸúëÖöS¥ïmã*ÿwÅÆ×æ+ÔÆ?µ\óö_wrµºå¥üßÍÿsÏOguÿ¯¹Ÿ¬j0snİî<ÎÍñ!ºü}øOÿîıêßßşÏ7ø–ÿã F ‚€È£B Ğ£€#	-AFd ¨‚£ë`h%C Í Y#,J  )¨!í6(x"½2 ¢°8DçE9,`;|hÄl€(ƒ. ÄĞ	XT€š`"^)"H Ì‰”`‚( "0`¼Èx[ A€É00BàŒ”"ŠÀ…”KLÀh[DÊÁˆ¥””a„aFW$@`8“ 	.*’(.2#@!:v`· ô@Aj?Ò	$AC " âÁA
‚Câ¢
Ä4©§Ğaœ!lb 0Ÿ.èÈ²"WĞ­×öí5]^ÅFsæç´±sÎûÕu¥«¥
aÖ_Zå/Aáëö˜®ö÷TÊ®_O½Õ÷rşwf¹Ñ+wşôÔç§¯x$³Õ_n×ø?ÿçëÿßÿ¿	·]ñ_‰İ¥’İy{ßû®óşÇîanşyÙ'ÉÓÿ:V¸ĞŸeE_¨ÁÇÒ`5%Ô öUE’ÒÕ’Š‘]ô
éğyH¡@õ‚Ë  18¡ wX0ñp	ü‚Á†6b62£a5~"ƒ ª È´ p€S ´4¥–§[ƒE¤QR,‘‰Ïx Z H4b@VA…kIÌ8 ĞS`[ 
ª1X 0Ş•6°Ç¶ĞD€ÕHHÈ‚ì¤Ä‡bP`Lƒ’€\…ŠTp!†@ g(6“âˆ; TàK&€€@ Bâ*T”„@°!@ hª½\’!hƒ€ƒm €@yÅ` ¨*@ @£ ! (s@ˆ t$a`8"8¶1”`H(&Ç p…áŒ!(Hƒc	Œ`€Q™Á8aA1lÚPñ Ó¬LÑJ%˜0Ü% â!jI@Œ«0¡ J`  HaP0FÕ ƒÖ—Õ!A ¡ Ÿ¢(!­€„Á‰ cEEB‚‡jM#$ 9–àQÅ1ƒ5ë€¶h]ó¼t`¦P%”ÅùÁà‚¡Ä¤Å*QÁÆ@" L„PRÅ±ÇP	B /ÄbOA¢AØ/¡PDU„Â‘“Ğ+tA…1¢ Yq (0ÓN"ÀH\€"Šˆ$U’=!åÄµ¤²(¥öRÈ¦HPtF™` ˆ TN ^#ş•ˆ†Xƒd¬AWF¸‘DT(@0¡ R(à3P  ÂhÅ2Q'ÎJĞHèà*É@‚QéŠFÑ+¦F„ó‚\‚1•H †4d b°C¦<¦ùša†- 3šĞ•eÑJĞi"'äT‰;Œ8D`	…0	‚$8"$FP1ĞPÀˆ€KW Ñ)Ø„Ô'¹‹ˆ&
.Ÿ¡¤%A
@€Á1`€ €ji¢C(lšH‚CBFÂ/Ë Tÿp U €À"¢@$AÃ˜x’#ÑG+ĞXbî	uÏøÄbÀ,µ$a†u`“0qIK³.B aXpLd¨{¨¾^@± b–ƒÙâĞVÉ#:Œ°¦ Œ„ ÕXÑNÉu°œc# ‚aVC´3tA&c™Àä44(ˆH 	ÈÂˆÀ´ZCÀ.øfP«E  SÒBôX€=—ˆCÃa	`@H.ƒ0Âº€—™ñ=¡x€Õğs‚DC(É@ 2	!kƒó‡ 2+ĞF¤â‚Fˆ1 "dÀÈ!hAÕh&­Á#e$–†Ø°BFª’‘ë+*ÅàÁHä
ti0ºF\b=’HĞ…$˜ê-ƒ€ÒHAU‡†.ˆ‚
cUtĞ'§A† X!Ø!P _¥­tT/…‘UW€Ö‚XÀ€‘8H’È¼†@:F4…%1 4•
¸	K Äò‚Ià@T‚š(¨Rk$!RAÍÂ0* °@Š‰ œ(N>@mGb"DX Ã	YC369Iu „`E‰†À—4j³†Ã D@a³nº‰ Dl;

ƒ\O•hƒ(	•NÓÀLP‚@xÃÙb7!€ rªø@¸`Í¹€@á!]†9Á¦›  0iØ‚ =a[Eün)råM…“0A%ÈÌƒ$Ã9À ‘x£ B
‚%È&BÄZ(4@C‘Áà*Ğá 
 *B‚ *b µ‰à%j€¸Ã5@2ĞAÂ @Ğƒ( Œ‹ ¦&üp¯TñT3¥² $!…•â)$+bğIG½V‚	W©&]„€á™’ÔBF“XÃ$€@aÑ$6p(dUi  `İÅÂXã ÎÄ€Xf[aW¨²ˆ  $œÀ
H@EHÓ-`€(E¤¤K`! $R‹"¤€Ğ#A@AëCpµHRšPáÄ¡ç±‹2‚°Ú–ŒJQ Y0à"•2` ‡‡A6:‰  [,@š<
ã	 Z• 1¬,§£p@ˆW²(•j’8À(WÅèÄi²CDÈ®~ÔÂ~Ÿ.d	ÅEäñ^*TÒh%¥‚ğ’‡˜3Z:I4¨ŠâàD8ˆ@/DŒÃ`aF ¨z
<µÇ+ æím&daBó`Ôb”Ø¡» A 0"øÁrš‹K30 æ&00¢ #tÂ„& Ù PÒÀ^Wq`Á‚€‚B™$Õ°•@s`I™„4#71Eˆ „T/0ù€ÓxàYÒb£%£/›ƒ‘
71ˆŒ²	FØâ*,à„#à„(( '¶0P‰ş#o‰	4O´4Ê¬“@‡,ˆCUÇŠ€)¦sX €€$™î ”HôÖ“(<ŠÖCÄ’È6 59…BÄ „ 4 ˜”TÉœøøYdÔ”°‰8IĞU0î) # e\#@N4˜‚0e°h€@Ä0 ‚”ap1 Ä€HPdU „¸„	€!4‘ $%f ÉÑÄä®~3êËaI$h¦bcàxJudQˆ¥BƒiAjÑ$.F1i€‚k¢cPNÚ6îmbB„FR÷€3 gVj·+„a6J%y bbn`&ĞX¤¡¢^…pxe†¨ ÂQ(„2'2‚ii¥°k*)!( CAsÎRº<R 	ÔãMH
 Vˆ~Eb¡©
RjÔ j d l@œ‚	¢‡$.“€0†²ØÑ‚BRjªÀÌ² ¢ ²—2) …9 QØ ùÙâ X,àLÅ£‹fF[( Ä
ÅÃ²•P€`CbIÀ/D1…	ôDK“2 ` VB;Ş™ÁÀ	N¥B0jÃÌL’9jªD Œa7P3°›¯ú«Ê•5R(çª ñ‚‰O”	°x( ´dÂ‡‚à* u‚‡ 9§€F  	à£8 ,e&CG‚4W"H®h†h#ùt1!‚ ¦2F{£d¨ñ‚"FÙæb,O ÷­’hä‡à&,¨©| …HÈ\ 5é)‡hİÑ@*ô!€!€@Ò€ÂJ',¤™>0–Gl
 ¨:RTZRô˜dº"í¶ˆLNPÉ‚·„@±HPà7uDpV"\ÆÄ€$‚ˆ
D¤²`  ˜H b( Ad,²€€ÙZBÚ,à@@s(*öP"Õ"‘p`B$âQ â)˜˜6š¨ºâ”¦P‚@°½ô¤E$@ğ,D5XŠ¡Ò"¯! X Hp$‰Ğæe²ªClD@‚ Ö©‰ˆ1œI·PH \"HH„£Åˆ€Ü€•]£ÁZØı2'Ñ‚@Ö@MƒOHÁIeğ$ŠØ2„Şhn,£ P@D@CëræS ÀRª˜‹	…2 tA@¦  O€â!Ñe"æX1À±ƒPÎ8 –”%QŒ‚p€ÏèØ“PÃDƒÑ’`
7L|Hƒ¤h+;ÇÏt²Ê2^ÜAÀW’QÚT–PRÁ´®D ådÅ=å”‚9
€±Ôüw@Î9ÀXá…PÁ‚UB±ùôZ$AxäA0S!(D C`‡0dÒ
/p+rò` E  $|A!Y4’ña@0 ‡  €&$@H¡@"!BœÂP("¥XE$R°@dUIğ‚P Ä±€ˆL‚ã„¹U[X  ¡`paŒ$x¬™€+‘ºÚeVÌ¢üI±ù×À¥²P@Bá˜àı®áèìE‚Nƒ!Ñà¯Øaœ`JC"¢¬	MGFˆâB€‚¡"¨ ‹ÔÊQT±¦AËŒàDÉ.IUdb˜ˆ†ÁZÁ&
ÃKB8$œ@@ ¬C21…¶€<# °<0%CpqJÁ€  P!+#p9”ˆ€	a? ğ”æ$k È  t€LÑ€Õà`ª”;aÀsŠÔ*á&Æ@!ˆª8”l$MÀET!šx 0bQ¨K.‰B *3È1G€@ªD	È ˜6%ÏNÀ¬
ˆFÇ“xL 
 ,‰$Š ˆ€B@Œ…@—Ç À!3À€>_
‰Èˆ  Ã‚„5 ¤°` ! ,‚PMªR€¿D‡iÀá4#"H  NL$,¤hĞğ$"0ÕZK"#  
	åŒ_´N¡)€' 1¦åJHhÍ„4ZÉ’H$pl‰†N S ‘ šL‡0`Ä[FÔË}MÂ¤ôA«i Xf—€ÖÅ‚ª% ¨"!$	èx IúĞ""°„4†:”Á0—`€¤xuHlfU@å<5¤Ä©%€€À@(4AÙ =( ŠÀ(Q"D®18d ®Na„HÁ1³' ÀbáƒÚP "Ø
P`f2ÈBu).\¢ºPF‘q	°b*–E"‹m£S—º# €ÄB“¹-r#·*Ìƒ¨UE S©CQ
€D‰%'XŠÈÀ$J YŞ@`°$4dDŸÒñ±	=¥W²#fI$ÂÌKZš
^ölÂ÷Dº"’ßÚ²bÇ+HL  3Ğ°b
aÈló$ÀË$
@¢
úyP~®‘bâñ€´Ú2™ÚE±ˆÂ¦¤–S¥È”øG†• €„	8Ty˜½Ñ$FB9=œ…lYLpKma
 p€©  3à štôk A Fi‘–Q‚ãJ´Ó( #WŠÁhL€P<'˜ˆM&
P²%Á'dD ƒ£ ´!€€Ï ni¬@2`$±•Òâ3*ÂD€S E”B"w.ÚDLY’`	>T A—’µ“à0¾(ªÁPP!Â€Š$® …PU ”è…rn nextPos.isNone() ? Option.some(Location.end(inline)) : Option.none();
      });
    };

    var after = function (rootNode, pos) {
      var nPos = InlineUtils.normalizeBackwards(pos);
      var scope = rescope(rootNode, nPos.container());
      return InlineUtils.findRootInline(scope, nPos).fold(
        function () {
          return InlineUtils.findCaretPosition(scope, false, nPos)
            .bind(Fun.curry(InlineUtils.findRootInline, scope))
            .map(function (inline) {
              return Location.after(inline);
            });
        },
        Option.none
      );
    };

    var isValidLocation = function (location) {
      return InlineUtils.isRtl(getElement(location)) === false;
    };

    var readLocation = function (rootNode, pos) {
      var location = LazyEvaluator.evaluateUntil([
        before,
        start,
        end,
        after
      ], [rootNode, pos]);

      return location.filter(isValidLocation);
    };

    var getElement = function (location) {
      return location.fold(
        Fun.identity, // Before
        Fun.identity, // Start
        Fun.identity, // End
        Fun.identity  // After
      );
    };

    var getName = function (location) {
      return location.fold(
        Fun.constant('before'), // Before
        Fun.constant('start'),  // Start
        Fun.constant('end'),    // End
        Fun.constant('after')   // After
      );
    };

    var outside = function (location) {
      return location.fold(
        Location.before, // Before
        Location.before, // Start
        Location.after,  // End
        Location.after   // After
      );
    };

    var inside = function (location) {
      return location.fold(
        Location.start, // Before
        Location.start, // Start
        Location.end,   // End
        Location.end    // After
      );
    };

    var isEq = function (location1, location2) {
      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);
    };

    var betweenInlines = function (forward, rootNode, from, to, location) {
      return Options.liftN([
        InlineUtils.findRootInline(rootNode, from),
        InlineUtils.findRootInline(rootNode, to)
      ], function (fromInline, toInline) {
        if (fromInline !== toInline && InlineUtils.hasSameParentBlock(rootNode, fromInline, toInline)) {
          // Force after since some browsers normalize and lean left into the closest inline
          return Location.after(forward ? fromInline : toInline);
        } else {
          return location;
        }
      }).getOr(location);
    };

    var skipNoMovement = function (fromLocation, toLocation) {
      return fromLocation.fold(
        Fun.constant(true),
        function (fromLocation) {
          return !isEq(fromLocation, toLocation);
        }
      );
    };

    var findLocationTraverse = function (forward, rootNode, fromLocation, pos) {
      var from = InlineUtils.normalizePosition(forward, pos);
      var to = InlineUtils.findCaretPosition(rootNode, forward, from).map(Fun.curry(InlineUtils.normalizePosition, forward));

      var location = to.fold(
        function () {
          return fromLocation.map(outside);
        },
        function (to) {
          return readLocation(rootNode, to)
            .map(Fun.curry(betweenInlines, forward, rootNode, from, to))
            .filter(Fun.curry(skipNoMovement, fromLocation));
        }
      );

      return location.filter(isValidLocation);
    };

    var findLocationSimple = function (forward, location) {
      if (forward) {
        return location.fold(
          Fun.compose(Option.some, Location.start), // Before -> Start
          Option.none,
          Fun.compose(Option.some, Location.after), // End -> After
          Option.none
        );
      } else {
        return location.fold(
          Option.none,
          Fun.compose(Option.some, Location.before), // Before <- Start
          Option.none,
          Fun.compose(Option.some, Location.end) // End <- After
        );
      }
    };

    var findLocation = function (forward, rootNode, pos) {
      var from = InlineUtils.normalizePosition(forward, pos);
      var fromLocation = readLocation(rootNode, from);

      return readLocation(rootNode, from).bind(Fun.curry(findLocationSimple, forward)).orThunk(function () {
        return findLocationTraverse(forward, rootNode, fromLocation, pos);
      });
    };

    return {
      readLocation: readLocation,
      prevLocation: Fun.curry(findLocation, false),
      nextLocation: Fun.curry(findLocation, true),
      getElement: getElement,
      outside: outside,
      inside: inside
    };
  }
);
define(
  'ephox.katamari.api.Cell',

  [
  ],

  function () {
    var Cell = function (initial) {
      var value = initial;

      var get = function () {
        return value;
      };

      var set = function (v) {
        value = v;
      };

      var clone = function () {
        return Cell(get());
      };

      return {
        get: get,
        set: set,
        clone: clone
      };
    };

    return Cell;
  }
);

/**
 * BoundarySelection.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.keyboard.BoundarySelection',
  [
    'ephox.katamari.api.Arr',
    'ephox.katamari.api.Cell',
    'ephox.katamari.api.Fun',
    'tinymce.core.caret.CaretContainerRemove',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.keyboard.BoundaryCaret',
    'tinymce.core.keyboard.BoundaryLocation',
    'tinymce.core.keyboard.InlineUtils'
  ],
  function (Arr, Cell, Fun, CaretContainerRemove, CaretPosition, BoundaryCaret, BoundaryLocation, InlineUtils) {
    var setCaretPosition = function (editor, pos) {
      var rng = editor.dom.createRng();
      rng.setStart(pos.container(), pos.offset());
      rng.setEnd(pos.container(), pos.offset());
      editor.selection.setRng(rng);
    };

    var isFeatureEnabled = function (editor) {
      return editor.settings.inline_boundaries !== false;
    };

    var setSelected = function (state, elm) {
      if (state) {
        elm.setAttribute('data-mce-selected', '1');
      } else {
        elm.removeAttribute('data-mce-selected', '1');
      }
    };

    var renderCaretLocation = function (editor, caret, location) {
      return BoundaryCaret.renderCaret(caret, location).map(function (pos) {
        setCaretPosition(editor, pos);
        return location;
      });
    };

    var findLocation = function (editor, caret, forward) {
      var rootNode = editor.getBody();
      var from = CaretPosition.fromRangeStart(editor.selection.getRng());
      var location = forward ? BoundaryLocation.nextLocation(rootNode, from) : BoundaryLocation.prevLocation(rootNode, from);
      return location.bind(function (location) {
        return renderCaretLocation(editor, caret, location);
      });
    };

    var toggleInlines = function (dom, elms) {
      var selectedInlines = dom.select('a[href][data-mce-selected],code[data-mce-selected]');
      var targetInlines = Arr.filter(elms, InlineUtils.isInlineTarget);
      Arr.each(Arr.difference(selectedInlines, targetInlines), Fun.curry(setSelected, false));
      Arr.each(Arr.difference(targetInlines, selectedInlines), Fun.curry(setSelected, true));
    };

    var safeRemoveCaretContainer = function (editor, caret) {
      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {
        var pos = CaretPosition.fromRangeStart(editor.selection.getRng());
        if (CaretPosition.isTextPosition(pos) && InlineUtils.isAtZwsp(pos) === false) {
          setCaretPosition(editor, CaretContainerRemove.removeAndReposition(caret.get(), pos));
          caret.set(null);
        }
      }
    };

    var renderInsideInlineCaret = function (editor, caret, elms) {
      if (editor.selection.isCollapsed()) {
        var inlines = Arr.filter(elms, InlineUtils.isInlineTarget);
        Arr.each(inlines, function (inline) {
          var pos = CaretPosition.fromRangeStart(editor.selection.getRng());
          BoundaryLocation.readLocation(editor.getBody(), pos).bind(function (location) {
            return renderCaretLocation(editor, caret, location);
          });
        });
      }
    };

    var move = function (editor, caret, forward) {
      return function () {
        return isFeatureEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;
      };
    };

    var setupSelectedState = function (editor) {
      var caret = new Cell(null);

      editor.on('NodeChange', function (e) {
        if (isFeatureEnabled(editor)) {
          toggleInlines(editor.dom, e.parents);
          safeRemoveCaretContainer(editor, caret);
          renderInsideInlineCaret(editor, caret, e.parents);
        }
      });

      return caret;
    };

    return {
      move: move,
      setupSelectedState: setupSelectedState,
      setCaretPosition: setCaretPosition
    };
  }
);
/**
 * InlineBoundaryDelete.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.delete.InlineBoundaryDelete',
  [
    'ephox.katamari.api.Fun',
    'ephox.katamari.api.Option',
    'ephox.katamari.api.Options',
    'ephox.sugar.api.node.Element',
    'tinymce.core.caret.CaretContainer',
    'tinymce.core.caret.CaretFinder',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.caret.CaretUtils',
    'tinymce.core.delete.DeleteElement',
    'tinymce.core.keyboard.BoundaryCaret',
    'tinymce.core.keyboard.BoundaryLocation',
    'tinymce.core.keyboard.BoundarySelection',
    'tinymce.core.keyboard.InlineUtils'
  ],
  function (
    Fun, Option, Options, Element, CaretContainer, CaretFinder, CaretPosition, CaretUtils, DeleteElement, BoundaryCaret, BoundaryLocation, BoundarySelection,
    InlineUtils
  ) {
    var isFeatureEnabled = function (editor) {
      return editor.settings.inline_boundaries !== false;
    };

    var rangeFromPositions = function (from, to) {
      var range = document.createRange();

      range.setStart(from.container(), from.offset());
      range.setEnd(to.container(), to.offset());

      return range;
    };

    // Checks for delete at <code>|a</code> when there is only one item left except the zwsp caret container nodes
    var hasOnlyTwoOrLessPositionsLeft = function (elm) {
      return Options.liftN([
        InlineUtils.findCaretPositionIn(elm, true),
        InlineUtils.findCaretPositionIn(elm, false)
      ], function (firstPos, lastPos) {
        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);
        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);

        return InlineUtils.findCaretPosition(elm, true, normalizedFirstPos).map(function (pos) {
          return pos.isEqual(normalizedLastPos);
        }).getOr(true);
      }).getOr(true);
    };

    var setCaretLocation = function (editor, caret) {
      return function (location) {
        return BoundaryCaret.renderCaret(caret, location).map(function (pos) {
          BoundarySelection.setCaretPosition(editor, pos);
          return true;
        }).getOr(false);
      };
    };

    var deleteFromTo = function (editor, caret, from, to) {
      var rootNode = editor.getBody();

      editor.undoManager.ignore(function () {
        editor.selection.setRng(rangeFromPositions(from, to));
        editor.execCommand('Delete');

        BoundaryLocation.readLocation(rootNode, CaretPosition.fromRangeStart(editor.selection.getRng()))
          .map(BoundaryLocation.inside)
          .map(setCaretLocation(editor, caret));
      });

      editor.nodeChanged();
    };

    var rescope = function (rootNode, node) {
      var parentBlock = CaretUtils.getParentBlock(node, rootNode);
      return parentBlock ? parentBlock : rootNode;
    };

    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {
      var rootNode = rescope(editor.getBody(), from.container());
      var fromLocation = BoundaryLocation.readLocation(rootNode, from);

      return fromLocation.bind(function (location) {
        if (forward) {
          return location.fold(
            Fun.constant(Option.some(BoundaryLocation.inside(location))), // Before
            Option.none, // Start
            Fun.constant(Option.some(BoundaryLocation.outside(location))), // End
            Option.none  // After
          );
        } else {
          return location.fold(
            Option.none, // Before
            Fun.constant(Option.some(BoundaryLocation.outside(location))), // Start
            Option.none, // End
            Fun.constant(Option.some(BoundaryLocation.inside(location)))  // After
          );
        }
      })
      .map(setCaretLocation(editor, caret))
      .getOrThunk(function () {
        var toPosition = CaretFinder.navigate(forward, rootNode, from);
        var toLocation = toPosition.bind(function (pos) {
          return BoundaryLocation.readLocation(rootNode, pos);
        });

        if (fromLocation.isSome() && toLocation.isSome()) {
          return InlineUtils.findRootInline(rootNode, from).map(function (elm) {
            if (hasOnlyTwoOrLessPositionsLeft(elm)) {
              DeleteElement.deleteElement(editor, forward, Element.fromDom(elm));
              return true;
            } else {
              return false;
            }
          }).getOr(false);
        } else {
          return toLocation.bind(function (_) {
            return toPosition.map(function (to) {
              if (forward) {
                deleteFromTo(editor, caret, from, to);
              } else {
                deleteFromTo(editor, caret, to, from);
              }

              return true;
            });
          }).getOr(false);
        }
      });
    };

    var backspaceDelete = function (editor, caret, forward) {
      if (editor.selection.isCollapsed() && isFeatureEnabled(editor)) {
        var from = CaretPosition.fromRangeStart(editor.selection.getRng());
        return backspaceDeleteCollapsed(editor, caret, forward, from);
      }

      return false;
    };

    return {
      backspaceDelete: backspaceDelete
    };
  }
);
/**
 * Commands.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.delete.DeleteCommands',
  [
    'tinymce.core.delete.BlockBoundaryDelete',
    'tinymce.core.delete.BlockRangeDelete',
    'tinymce.core.delete.CefDelete',
    'tinymce.core.delete.InlineBoundaryDelete'
  ],
  function (BlockBoundaryDelete, BlockRangeDelete, CefDelete, BoundaryDelete) {
    var nativeCommand = function (editor, command) {
      editor.getDoc().execCommand(command, false, null);
    };

    var paddEmptyBody = function (editor) {
      var dom = editor.dom;

      // Check if body is empty after the delete call if so then set the contents
      // to an empty string and move the caret to any block produced by that operation
      // this fixes the issue with root blocks not being properly produced after a delete call on IE
      var body = editor.getBody();

      if (dom.isEmpty(body)) {
        editor.setContent('');

        if (body.firstChild && dom.isBlock(body.firstChild)) {
          editor.selection.setCursorLocation(body.firstChild, 0);
        } else {
          editor.selection.setCursorLocation(body, 0);
        }
      }
    };

    var deleteCommand = function (editor) {
      if (CefDelete.backspaceDelete(editor, false)) {
        return;
      } else if (BoundaryDelete.backspaceDelete(editor, false)) {
        return;
      } else if (BlockBoundaryDelete.backspaceDelete(editor, false)) {
        return;
      } else if (BlockRangeDelete.backspaceDelete(editor, false)) {
        return;
      } else {
        nativeCommand(editor, 'Delete');
        paddEmptyBody(editor);
      }
    };

    var forwardDeleteCommand = function (editor) {
      if (CefDelete.backspaceDelete(editor, true)) {
        return;
      } else if (BoundaryDelete.backspaceDelete(editor, true)) {
        return;
      } else if (BlockBoundaryDelete.backspaceDelete(editor, true)) {
        return;
      } else if (BlockRangeDelete.backspaceDelete(editor, true)) {
        return;
      } else {
        nativeCommand(editor, 'ForwardDelete');
      }
    };

    return {
      deleteCommand: deleteCommand,
      forwardDeleteCommand: forwardDeleteCommand
    };
  }
);
/**
 * RangeNormalizer.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.dom.RangeNormalizer',
  [
    'tinymce.core.caret.CaretFinder',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.caret.CaretUtils',
    'tinymce.core.dom.NodeType'
  ],
  function (CaretFinder, CaretPosition, CaretUtils, NodeType) {
    var isTextBlock = function (elm) {
      return NodeType.isElement(elm) && /^(P|H[1-6]|DIV)$/.test(elm.nodeName);
    };

    var matchEndContainer = function (rng, predicate) {
      return predicate(rng.endContainer);
    };

    var createRange = function (sc, so, ec, eo) {
      var rng = document.createRange();
      rng.setStart(sc, so);
      rng.setEnd(ec, eo);
      return rng;
    };

    // If you tripple click a paragraph in this case:
    //   <blockquote><p>a</p></blockquote><p>b</p>
    // It would become this range in webkit:
    //   <blockquote><p>[a</p></blockquote><p>]b</p>
    // We would want it to be:
    //   <blockquote><p>[a]</p></blockquote><p>b</p>
    // Since it would otherwise produces spans out of thin air on insertContent for example.
    var normalizeBlockSelection = function (rng) {
      var startPos = CaretPosition.fromRangeStart(rng);
      var endPos = CaretPosition.fromRangeEnd(rng);
      var rootNode = rng.commonAncestorContainer;

      if (rng.collapsed === false && matchEndContainer(rng, isTextBlock) && rng.endOffset === 0) {
        return CaretFinder.fromPosition(false, rootNode, endPos)
          .map(function (newEndPos) {
            if (!CaretUtils.isInSameBlock(startPos, endPos, rootNode) && CaretUtils.isInSameBlock(startPos, newEndPos, rootNode)) {
              return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());
            } else {
              return rng;
            }
          }).getOr(rng);
      } else {
        return rng;
      }
    };

    var normalize = function (rng) {
      return normalizeBlockSelection(rng);
    };

    return {
      normalize: normalize
    };
  }
);
/**
 * InsertList.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Handles inserts of lists into the editor instance.
 *
 * @class tinymce.InsertList
 * @private
 */
define(
  'tinymce.core.InsertList',
  [
    "tinymce.core.util.Tools",
    "tinymce.core.caret.CaretWalker",
    "tinymce.core.caret.CaretPosition"
  ],
  function (Tools, CaretWalker, CaretPosition) {
    var isListFragment = function (fragment) {
      var firstChild = fragment.firstChild;
      var lastChild = fragment.lastChild;

      // Skip meta since it's likely <meta><ul>..</ul>
      if (firstChild && firstChild.name === 'meta') {
        firstChild = firstChild.next;
      }

      // Skip mce_marker since it's likely <ul>..</ul><span id="mce_marker"></span>
      if (lastChild && lastChild.attr('id') === 'mce_marker') {
        lastChild = lastChild.prev;
      }

      if (!firstChild || firstChild !== lastChild) {
        return false;
      }

      return firstChild.name === 'ul' || firstChild.name === 'ol';
    };

    var cleanupDomFragment = function (domFragment) {
      var firstChild = domFragment.firstChild;
      var lastChild = domFragment.lastChild;

      // TODO: remove the meta tag from paste logic
      if (firstChild && firstChild.nodeName === 'META') {
        firstChild.parentNode.removeChild(firstChild);
      }

      if (lastChild && lastChild.id === 'mce_marker') {
        lastChild.parentNode.removeChild(lastChild);
      }

      return domFragment;
    };

    var toDomFragment = function (dom, serializer, fragment) {
      var html = serializer.serialize(fragment);
      var domFragment = dom.createFragment(html);

      return cleanupDomFragment(domFragment);
    };

    var listItems = function (elm) {
      return Tools.grep(elm.childNodes, function (child) {
        return child.nodeName === 'LI';
      });
    };

    var isEmpty = function (elm) {
      return !elm.firstChild;
    };

    var trimListItems = function (elms) {
      return elms.length > 0 && isEmpty(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;
    };

    var getParentLi = function (dom, node) {
      var parentBlock = dom.getParent(node, dom.isBlock);
      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;
    };

    var isParentBlockLi = function (dom, node) {
      return !!getParentLi(dom, node);
    };

    var getSplit = function (parentNode, rng) {
      var beforeRng = rng.cloneRange();
      var afterRng = rng.cloneRange();

      beforeRng.setStartBefore(parentNode);
      afterRng.setEndAfter(parentNode);

      return [
        beforeRng.cloneContents(),
        afterRng.cloneContents()
      ];
    };

    var findFirstIn = function (node, rootNode) {
      var caretPos = CaretPosition.before(node);
      var caretWalker = new CaretWalker(rootNode);
      var newCaretPos = caretWalker.next(caretPos);

      return newCaretPos ? newCaretPos.toRange() : null;
    };

    var findLastOf = function (node, rootNode) {
      var caretPos = CaretPosition.after(node);
      var caretWalker = new CaretWalker(rootNode);
      var newCaretPos = caretWalker.prev(caretPos);

      return newCaretPos ? newCaretPos.toRange() : null;
    };

    var insertMiddle = function (target, elms, rootNode, rng) {
      var parts = getSplit(target, rng);
      var parentElm = target.parentNode;

      parentElm.insertBefore(parts[0], target);
      Tools.each(elms, function (li) {
        parentElm.insertBefore(li, target);
      });
      parentElm.insertBefore(parts[1], target);
      parentElm.removeChild(target);

      return findLastOf(elms[elms.length - 1], rootNode);
    };

    var insertBefore = function (target, elms, rootNode) {
      var parentElm = target.parentNode;

      Tools.each(elms, function (elm) {
        parentElm.insertBefore(elm, target);
      });

      return findFirstIn(target, rootNode);
    };

    var insertAfter = function (target, elms, rootNode, dom) {
      dom.insertAfter(elms.reverse(), target);
      return findLastOf(elms[0], rootNode);
    };

    var insertAtCaret = function (serializer, dom, rng, fragment) {
      var domFragment = toDomFragment(dom, serializer, fragment);
      var liTarget = getParentLi(dom, rng.startContainer);
      var liElms = trimListItems(listItems(domFragment.firstChild));
      var BEGINNING = 1, END = 2;
      var rootNode = dom.getRoot();

      var isAt = function (location) {
        var caretPos = CaretPosition.fromRangeStart(rng);
        var caretWalker = new CaretWalker(dom.getRoot());
        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);

        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;
      };

      if (isAt(BEGINNING)) {
        return insertBefore(liTarget, liElms, rootNode);
      } else if (isAt(END)) {
        return insertAfter(liTarget, liElms, rootNode, dom);
      }

      return insertMiddle(liTarget, liElms, rootNode, rng);
    };

    return {
      isListFragment: isListFragment,
      insertAtCaret: insertAtCaret,
      isParentBlockLi: isParentBlockLi,
      trimListItems: trimListItems,
      listItems: listItems
    };
  }
);
/**
 * InsertContent.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 ÀT£`	q^"™ " ”C4 Õš`c–¨!Fh@@dÆr R6»($p()¡„Bô8‡ („c‹$B@€  .E†4R@]"„ÉI0Œ„: Y€H”±W	"@C8C–‹0`‰ÀP2KÜ¾í>^éq†•ñöÀ-1Ùu¾»tß™ó­sÛww¸ÛÓÿûş¼~s±õ®ÒªUæcñûåÚšŞg‘Ú^ïÕ»ÅeÜ€İÖ?{nş‘=¶/û7¿öÇí]ãüWkİö÷Çj_¾oÇçN¯®4ß¾wI»:?^“×^QM·şzoN¹‚—¶úùõìô#¾×ï¯ì®ì?¿Kó"çöú2MUw¿9ÿjêÊÅ1wŸç‡²ùµÈÅA±¿©És2Y7p·Uç¹?(5íïÓó§óoMwÕŞñêåƒö_Ï±/¹oş’óhè‡÷R6ø;—Ò86ã‹²d²×ğ"ßÔQq/'ø‡ÜŒ¤ Vp›#ã-	€qG šè„€Y$– ®òÂ$#Ä„	 š±……³ (°„¡.MLÀ”	L„†rXF0á@	+v,”@\7 *@ÄCˆs eq!±bBA@ƒD€¨P T
è°VÒ @
Œ7,äºËxı~á“öCÕC»½7Šfƒk<zï~¼ÿlz´¸ŸÕ¿Ú?ãûã]xáO÷^„kÃÚXcm÷–Î‡×Æaâ˜Íê‘óüÜş÷\®ıõu·ü4ıoéh·zç¯[ÿ—or³ãÔ{òqe"Ï_]ï}ıÚÆ°İ.ZtÛ\ÌìÿÄøw'Õ6Ìï$ÈLh„­ ä	Ng	R
T $N Ãì«*ÑhM2" ,'C¨. F˜ŠIĞ )ll Á˜°àÒ˜6 ^úˆŠ @j`”À@zd"Xª¤	(Hê¤ëK(e¢@4 
2 äJª`hÀ-á†N¢$`ZÕÁ@D"(5hD+¨D° "#FùDàhnH  8@I ­  &¸® dN<P’d²„CJÀœˆˆ"à  _ˆ1ƒà F8KAA*d†¬V°3lD€$!Ò¬q”eĞ{ŠQ:Õ„b}Ù>§¿>o²»³·–¯ùû¢óZïÛƒºAÖ}\=Ïôÿ1šÍ;_¶öïoº_£şgt·æßC;úÒ6ŸX£ÿËúnÓÍçß×]ÿ{E7ğ‡‡Nîm÷£[¾Ú¯´Ó3şï_7ùä:íï¾;îûS‡ïnşy+$£"u?„Â) s„ DëAº DBÀÊPÚ]Ë¨X…ÈdçDˆ#QœE@€Œ€->¡ ’K$šŠ£P&G5€Ò‘`DD@V d¡z€¬AP‚40< %Š¤  z¹CŒüP •‘›ÊˆŒş/2¬ı¾„Eçş¿øš*Ş×Uyõå#ÖwÀş/ïŠ—ß;Ÿ-÷gb(ÎüùÀty¼¸“[ûÍ§ò¯Ş¿³¨ÏìNÿ­9FşK©İL¿ç­•g×ğï®×û÷µâî;ÉGßã}úÛoÓ¹g	Óp}5ãsÿ‡—ò·›ä}›¨ï/ÿ¾¶rÒéôgÓÿº˜œ~w¤ôşÎîÜ”Â¬J¾ÛÀíË÷¶yğñ3³]ŸyIùwçû{Ç]O?-7ï×^¿–ÄEıú@ö»×‹u•)YŸß“_§ßØr{Ø·ş{İ#‹ùïÔ»h½sÌıñvw¯-¹?±oV‰şoµ<õûş;k¶‡A„û(Á€0(G2Å„¤ò@BĞ€öÂÛ(p ÃäÄP	½·BIp;³@¥X,•*,p 
] <¬  …B¶Cˆ%¤ø‰pÉ@	*EDUÔ  °¦ ¤,(A	 €6#)á¦0ïù7¦ßçŸE9×\w|ızŞåõO[S¥İå]æçv«åÿ=?ßS—OÅïGüækÃ;şWgıøv^3ô·wöNû¯R¾ßûûËß”¥\a ®ìh›O¯1¶îï—ŞüÛÉ>z|údywµÅşİ¤%¸óQ¿]ğÄ¤jñfı7WnÆr4ø‚myˆÆ*¿E¡¼â‹‡Z z@"˜@‚  -`€ PHŒ‘…B °™Z@Ô€ÈŸb¤,	È^ ©¸PÀ€!¨D˜# ¡vlNL@-°4*OM‚E°–¬A…¢o›b@À‚è¤„“T!ÀA„@ €<¨R°¤S¥8A`°"‘D„ZIŠ:¢HÆ›8 $EÆ  
	”"4M)Åa 6ˆ ƒ@@” )—4œ @ª œJe¦dR”@Z£„Q"5 6 0`â‘s!hê`òVşüØŸüú‰±ĞË­¿ß×mşæò¿ü—åŞİ×†rõ>_øî7èŞâ›ÕúûôPÒëfÁ4¸„òƒsïÓ¾›+7ÜÓÙ›O¶_éTØ÷ÿÿJçoèÏo>òöÿåEn‚é|{xïX'˜òO÷üH©÷1+ÁÎ'×ï÷ûëì†!Å¨!dÚÌ
d",€$!0‘ b$ 8 C ‘‚mpC‡P0rU ‚ €È0@ Û…a "cDâ)P 2á± 	$<:H
t D$K D@0DD„24(Ì W"9›€èùù?ûmÌŸøÓfY×’şáîğ¿{¼«JK°òßŸ²¼ÿıK®K§i×öİAñ£Óâ½~óÀÒWà¤v¿şÔãÌ‹ûZË/û¬ßİİeë–ïÿ¸zúÍñè„•ü¸ûuï÷nnvVÏ‹ÿPíí¿Óşƒêí=a|ş¼|ÀW~çïŸûşıñ»½÷Î§Ëcí?+§¬ß‹ZZíşŸà±lU_MNå¯OÜù¹|»[‰q§•ß¾ÿ‡§qÓ§Ãûßızeíı[­å™ß/E£×_üİWŞlÑyÎu½{æÇØëÔŒÌ½å×Ù?O/í–7Æ›û‹ı\ßç¯\gZ½¿u[¢mR`€`…uPx#ƒ, …2G8( °8ƒÀKŠ‚ !‚Ö0@!!, CSBMiP N”`	0°UyÁª†B"	ß ªÀAÀ” ” a; ğÆÀ ;*Õ’—(Âf©4u XDI†€pHb!ëõÿ?>_÷Ñ£åúcš{îóÿnÎõç²íŞÚ]çÏùÒwgÓo«øÓ#Oë>óBãtpø·-èºßuî>=|ğEÉß_ù/nİß»mEœİdp›õLé·4¯SvÛõ¸÷Ûœ/k÷üß[öUÑ_ÜŞÃ—V¶i„à³ğ§ÖÿqX‘Sf°&!%|IA*Â>Ì£ˆB „	 (˜ÀD ‹d„vAºXDdÁ †!Âà2:€  ™µ]"0¨Q ³GY"„€ÅG09·Œ	„X9  ! è ho ¨\DH¨€‡Z‚ Aš)„$˜!°0) Â TQ€tU‹LÀ‚°D•g Š  K¸™0"YhÃ
@l€3PvHHàrh$)0€¤p€Â	Ğ¢Ê¤‘ %Lƒà p
^À¦x€ @–ˆ(`  P†B´ipJ$ÑË1Æ‚Na €eæ‘ˆ4Ş=VçüõÊ‚û{ß¿¡d=ŸÕ¯ÎÛÓ5å×?¶¦èíã%‰ÉwßçCô”»wúç}à.¡¿û»¬ìø½¿o·\ÿş›î
ßïçï¸½öûÿ¾}×¼‹¿›U‘v¿ß%v¦]/<Û»6··ÏíóñGD÷vgÿ¯ŸÖ
úúu¿º[şıï|JªâdÂğØ–<IBO 5ˆ@¬¡8ÏlO IP Á$2c	‡¸’M‚´'.@i¤“ ÓT#$‡2¢ÅCŒhPPi£&F`C”¤5ÈB@:Å1@¬@ˆÁ‚’ K›4–Œ4s7…ô~ùÿ¯÷«ÿ?ãÓ†íÈ5ÖöûÛİ~V²·Ù÷bïóÿEã¹äyY§Õ_Í(:n^§;ÿ¯œ~ÿ=ÎAnõïjH£¶ö/àx§´ı–öì¶§DşÕGş¢÷ıúÁ?}ÆôºcfÏ÷òÕ»tâ{ËÖÕÍpéIofß¾ãj©¹Õo¡ã~çÛû|?\OR‰ğëYûÌ[ıÙß^>>Kx;È?{xğOøkwü6¿_ù³{ú}!Ÿóô‘ïí%ªòòÊo¾¾–ßuÄş»eÇy×Œ}Ùœô÷5×öş¹gîpäÅîïs—Ï¸¦XÉùvêø¬Ïrôşn˜é*÷t'ëœ‘Fˆ^Ì&ÖÂñÇˆ4àx4&HsœKŠSƒ ~%DpJFÂf!8‚È;‚¢C¢  K ‚Ğ£º°vˆµ$1‚"D.@"‹è ˆĞö†BÇœ ‰P
0‚¨‘0«£ Ë(×·—OÊ¿3Ûa÷ƒ_¥èÚ?õ–<óñe%şößÜåĞ—¿ªÄ2owûIößıüõâ˜ÿ-qû4³[Ã®ÿ½‹¶ÇŸ¶Ec{mÓºñ½kÌ—ø3¤İ½Lèp/»Ós’Hoßüç÷çş[6×'Ğö{OŸrwßöáMâÉ÷zòD¢’ W LW¤PA¢$)˜ 7€ ‰†"€bœ* ÀŞBè¦„8“0	r<ƒ-à!ÂQ¦Àa„ˆ$Ä°Â}—<`À€upHÉŒd€ )€³
âÀCĞX¨<#Db
‚@R#Æ4|H(,æ$ĞÀG#a! :™dA.
$£VQaBR0%¤0¼A
W«  äÔ_à€Ô„¸9ªù@7D J[¥ ‚¢r€0èH$$E `T!xI@’e0›èn€/Pâ# P©ôöÿ¯ß-_¿XD»^¶ys4îöï)Çî²ĞÌû¶ìÜ·üâXÿ¿ïWúµŞÍõ­m?·OoçÏ_ñNı¾îQf¿çgüïW¼­,&O÷Ü´¿,uÊ-ÿöú_®7w©Ôô{~_ÓÏõúÒ1_ìíÏ\¤ö¶ÏQ6sõ;ÏÕI´
        Tools.each(elm.getElementsByTagName('*'), function (elm) {
          elm.removeAttribute('data-mce-fragment');
        });
      }

      function isPartOfFragment(node) {
        return !!node.getAttribute('data-mce-fragment');
      }

      function canHaveChildren(node) {
        return node && !editor.schema.getShortEndedElements()[node.nodeName];
      }

      function moveSelectionToMarker(marker) {
        var parentEditableFalseElm, parentBlock, nextRng;

        function getContentEditableFalseParent(node) {
          var root = editor.getBody();

          for (; node && node !== root; node = node.parentNode) {
            if (editor.dom.getContentEditable(node) === 'false') {
              return node;
            }
          }

          return null;
        }

        if (!marker) {
          return;
        }

        selection.scrollIntoView(marker);

        // If marker is in cE=false then move selection to that element instead
        parentEditableFalseElm = getContentEditableFalseParent(marker);
        if (parentEditableFalseElm) {
          dom.remove(marker);
          selection.select(parentEditableFalseElm);
          return;
        }

        // Move selection before marker and remove it
        rng = dom.createRng();

        // If previous sibling is a text node set the selection to the end of that node
        node = marker.previousSibling;
        if (node && node.nodeType == 3) {
          rng.setStart(node, node.nodeValue.length);

          // TODO: Why can't we normalize on IE
          if (!Env.ie) {
            node2 = marker.nextSibling;
            if (node2 && node2.nodeType == 3) {
              node.appendData(node2.data);
              node2.parentNode.removeChild(node2);
            }
          }
        } else {
          // If the previous sibling isn't a text node or doesn't exist set the selection before the marker node
          rng.setStartBefore(marker);
          rng.setEndBefore(marker);
        }

        function findNextCaretRng(rng) {
          var caretPos = CaretPosition.fromRangeStart(rng);
          var caretWalker = new CaretWalker(editor.getBody());

          caretPos = caretWalker.next(caretPos);
          if (caretPos) {
            return caretPos.toRange();
          }
        }

        // Remove the marker node and set the new range
        parentBlock = dom.getParent(marker, dom.isBlock);
        dom.remove(marker);

        if (parentBlock && dom.isEmpty(parentBlock)) {
          editor.$(parentBlock).empty();

          rng.setStart(parentBlock, 0);
          rng.setEnd(parentBlock, 0);

          if (!isTableCell(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {
            rng = nextRng;
            dom.remove(parentBlock);
          } else {
            dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));
          }
        }

        selection.setRng(rng);
      }

      // Check for whitespace before/after value
      if (/^ | $/.test(value)) {
        value = trimOrPaddLeftRight(value);
      }

      // Setup parser and serializer
      parser = editor.parser;
      merge = details.merge;

      serializer = new Serializer({
        validate: editor.settings.validate
      }, editor.schema);
      bookmarkHtml = '<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>';

      // Run beforeSetContent handlers on the HTML to be inserted
      args = { content: value, format: 'html', selection: true };
      editor.fire('BeforeSetContent', args);
      value = args.content;

      // Add caret at end of contents if it's missing
      if (value.indexOf('{$caret}') == -1) {
        value += '{$caret}';
      }

      // Replace the caret marker with a span bookmark element
      value = value.replace(/\{\$caret\}/, bookmarkHtml);

      // If selection is at <body>|<p></p> then move it into <body><p>|</p>
      rng = selection.getRng();
      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);
      var body = editor.getBody();
      if (caretElement === body && selection.isCollapsed()) {
        if (dom.isBlock(body.firstChild) && canHaveChildren(body.firstChild) && dom.isEmpty(body.firstChild)) {
          rng = dom.createRng();
          rng.setStart(body.firstChild, 0);
          rng.setEnd(body.firstChild, 0);
          selection.setRng(rng);
        }
      }

      // Insert node maker where we will insert the new HTML and get it's parent
      if (!selection.isCollapsed()) {
        // Fix for #2595 seems that delete removes one extra character on
        // WebKit for some odd reason if you double click select a word
        editor.selection.setRng(RangeNormalizer.normalize(editor.selection.getRng()));
        editor.getDoc().execCommand('Delete', false, null);
        trimNbspAfterDeleteAndPaddValue();
      }

      parentNode = selection.getNode();

      // Parse the fragment within the context of the parent node
      var parserArgs = { context: parentNode.nodeName.toLowerCase(), data: details.data };
      fragment = parser.parse(value, parserArgs);

      // Custom handling of lists
      if (details.paste === true && InsertList.isListFragment(fragment) && InsertList.isParentBlockLi(dom, parentNode)) {
        rng = InsertList.insertAtCaret(serializer, dom, editor.selection.getRng(true), fragment);
        editor.selection.setRng(rng);
        editor.fire('SetContent', args);
        return;
      }

      markFragmentElements(fragment);

      // Move the caret to a more suitable location
      node = fragment.lastChild;
      if (node.attr('id') == 'mce_marker') {
        marker = node;

        for (node = node.prev; node; node = node.walk(true)) {
          if (node.type == 3 || !dom.isBlock(node.name)) {
            if (editor.schema.isValidChild(node.parent.name, 'span')) {
              node.parent.insert(marker, node, node.name === 'br');
            }
            break;
          }
        }
      }

      editor._selectionOverrides.showBlockCaretContainer(parentNode);

      // If parser says valid we can insert the contents into that parent
      if (!parserArgs.invalid) {
        value = serializer.serialize(fragment);
        validInsertion(editor, value, parentNode);
      } else {
        // If the fragment was invalid within that context then we need
        // to parse and process the parent it's inserted into

        // Insert bookmark node and get the parent
        selection.setContent(bookmarkHtml);
        parentNode = selection.getNode();
        rootNode = editor.getBody();

        // Opera will return the document node when selection is in root
        if (parentNode.nodeType == 9) {
          parentNode = node = rootNode;
        } else {
          node = parentNode;
        }

        // Find the ancestor just before the root element
        while (node !== rootNode) {
          parentNode = node;
          node = node.parentNode;
        }

        // Get the outer/inner HTML depending on if we are in the root and parser and serialize that
        value = parentNode == rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);
        value = serializer.serialize(
          parser.parse(
            // Need to replace by using a function since $ in the contents would otherwise be a problem
            value.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i, function () {
              return serializer.serialize(fragment);
            })
          )
        );

        // Set the inner/outer HTML depending on if we are in the root or not
        if (parentNode == rootNode) {
          dom.setHTML(rootNode, value);
        } else {
          dom.setOuterHTML(parentNode, value);
        }
      }

      reduceInlineTextElements();
      moveSelectionToMarker(dom.get('mce_marker'));
      umarkFragmentElements(editor.getBody());
      editor.fire('SetContent', args);
      editor.addVisual();
    };

    var processValue = function (value) {
      var details;

      if (typeof value !== 'string') {
        details = Tools.extend({
          paste: value.paste,
          data: {
            paste: value.paste
          }
        }, value);

        return {
          content: value.content,
          details: details
        };
      }

      return {
        content: value,
        details: {}
      };
    };

    var insertAtCaret = function (editor, value) {
      var result = processValue(value);
      insertHtmlAtCaret(editor, result.content, result.details);
    };

    return {
      insertAtCaret: insertAtCaret
    };
  }
);
/**
 * EditorCommands.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class enables you to add custom editor commands and it contains
 * overrides for native browser commands to address various bugs and issues.
 *
 * @class tinymce.EditorCommands
 */
define(
  'tinymce.core.EditorCommands',
  [
    'tinymce.core.delete.DeleteCommands',
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.RangeUtils',
    'tinymce.core.dom.TreeWalker',
    'tinymce.core.Env',
    'tinymce.core.InsertContent',
    'tinymce.core.util.Tools'
  ],
  function (DeleteCommands, NodeType, RangeUtils, TreeWalker, Env, InsertContent, Tools) {
    // Added for compression purposes
    var each = Tools.each, extend = Tools.extend;
    var map = Tools.map, inArray = Tools.inArray, explode = Tools.explode;
    var isOldIE = Env.ie && Env.ie < 11;
    var TRUE = true, FALSE = false;

    return function (editor) {
      var dom, selection, formatter,
        commands = { state: {}, exec: {}, value: {} },
        settings = editor.settings,
        bookmark;

      editor.on('PreInit', function () {
        dom = editor.dom;
        selection = editor.selection;
        settings = editor.settings;
        formatter = editor.formatter;
      });

      /**
       * Executes the specified command.
       *
       * @method execCommand
       * @param {String} command Command to execute.
       * @param {Boolean} ui Optional user interface state.
       * @param {Object} value Optional value for command.
       * @param {Object} args Optional extra arguments to the execCommand.
       * @return {Boolean} true/false if the command was found or not.
       */
      function execCommand(command, ui, value, args) {
        var func, customCommand, state = 0;

        if (editor.removed) {
          return;
        }

        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {
          editor.focus();
        }

        args = editor.fire('BeforeExecCommand', { command: command, ui: ui, value: value });
        if (args.isDefaultPrevented()) {
          return false;
        }

        customCommand = command.toLowerCase();
        if ((func = commands.exec[customCommand])) {
          func(customCommand, ui, value);
          editor.fire('ExecCommand', { command: command, ui: ui, value: value });
          return true;
        }

        // Plugin commands
        each(editor.plugins, function (p) {
          if (p.execCommand && p.execCommand(command, ui, value)) {
            editor.fire('ExecCommand', { command: command, ui: ui, value: value });
            state = true;
            return false;
          }
        });

        if (state) {
          return state;
        }

        // Theme commands
        if (editor.theme && editor.theme.execCommand && editor.theme.execCommand(command, ui, value)) {
          editor.fire('ExecCommand', { command: command, ui: ui, value: value });
          return true;
        }

        // Browser commands
        try {
          state = editor.getDoc().execCommand(command, ui, value);
        } catch (ex) {
          // Ignore old IE errors
        }

        if (state) {
          editor.fire('ExecCommand', { command: command, ui: ui, value: value });
          return true;
        }

        return false;
      }

      /**
       * Queries the current state for a command for example if the current selection is "bold".
       *
       * @method queryCommandState
       * @param {String} command Command to check the state of.
       * @return {Boolean/Number} true/false if the selected contents is bold or not, -1 if it's not found.
       */
      function queryCommandState(command) {
        var func;

        if (editor.quirks.isHidden() || editor.removed) {
          return;
        }

        command = command.toLowerCase();
        if ((func = commands.state[command])) {
          return func(command);
        }

        // Browser commands
        try {
          return editor.getDoc().queryCommandState(command);
        } catch (ex) {
          // Fails sometimes see bug: 1896577
        }

        return false;
      }

      /**
       * Queries the command value for example the current fontsize.
       *
       * @method queryCommandValue
       * @param {String} command Command to check the value of.
       * @return {Object} Command value of false if it's not found.
       */
      function queryCommandValue(command) {
        var func;

        if (editor.quirks.isHidden() || editor.removed) {
          return;
        }

        command = command.toLowerCase();
        if ((func = commands.value[command])) {
          return func(command);
        }

        // Browser commands
        try {
          return editor.getDoc().queryCommandValue(command);
        } catch (ex) {
          // Fails sometimes see bug: 1896577
        }
      }

      /**
       * Adds commands to the command collection.
       *
       * @method addCommands
       * @param {Object} commandList Name/value collection with commands to add, the names can also be comma separated.
       * @param {String} type Optional type to add, defaults to exec. Can be value or state as well.
       */
      function addCommands(commandList, type) {
        type = type || 'exec';

        each(commandList, function (callback, command) {
          each(command.toLowerCase().split(','), function (command) {
            commands[type][command] = callback;
          });
        });
      }

      function addCommand(command, callback, scope) {
        command = command.toLowerCase();
        commands.exec[command] = function (command, ui, value, args) {
          return callback.call(scope || editor, ui, value, args);
        };
      }

      /**
       * Returns true/false if the command is supported or not.
       *
       * @method queryCommandSupported
       * @param {String} command Command that we check support for.
       * @return {Boolean} true/false if the command is supported or not.
       */
      function queryCommandSupported(command) {
        command = command.toLowerCase();

        if (commands.exec[command]) {
          return true;
        }

        // Browser commands
        try {
          return editor.getDoc().queryCommandSupported(command);
        } catch (ex) {
          // Fails sometimes see bug: 1896577
        }

        return false;
      }

      function addQueryStateHandler(command, callback, scope) {
        command = command.toLowerCase();
        commands.state[command] = function () {
          return callback.call(scope || editor);
        };
      }

      function addQueryValueHandler(command, callback, scope) {
        command = command.toLowerCase();
        commands.value[command] = function () {
          return callback.call(scope || editor);
        };
      }

      function hasCustomCommand(command) {
        command = command.toLowerCase();
        return !!commands.exec[command];
      }

      // Expose public methods
      extend(this, {
        execCommand: execCommand,
        queryCommandState: queryCommandState,
        queryCommandValue: queryCommandValue,
        queryCommandSupported: queryCommandSupported,
        addCommands: addCommands,
        addCommand: addCommand,
        addQueryStateHandler: addQueryStateHandler,
        addQueryValueHandler: addQueryValueHandler,
        hasCustomCommand: hasCustomCommand
      });

      // Private methods

      function execNativeCommand(command, ui, value) {
        if (ui === undefined) {
          ui = FALSE;
        }

        if (value === undefined) {
          value = null;
        }

        return editor.getDoc().execCommand(command, ui, value);
      }

      function isFormatMatch(name) {
        return formatter.match(name);
      }

      function toggleFormat(name, value) {
        formatter.toggle(name, value ? { value: value } : undefined);
        editor.nodeChanged();
      }

      function storeSelection(type) {
        bookmark = selection.getBookmark(type);
      }

      function restoreSelection() {
        selection.moveToBookmark(bookmark);
      }

      // Add execCommand overrides
      addCommands({
        // Ignore these, added for compatibility
        'mceResetDesignMode,mceBeginUndoLevel': function () { },

        // Add undo manager logic
        'mceEndUndoLevel,mceAddUndoLevel': function () {
          editor.undoManager.add();
        },

        'Cut,Copy,Paste': function (command) {
          var doc = editor.getDoc(), failed;

          // Try executing the native command
          try {
            execNativeCommand(command);
          } catch (ex) {
            // Command failed
            failed = TRUE;
          }

          // Chrome reports the paste command as supported however older IE:s will return false for cut/paste
          if (command === 'paste' && !doc.queryCommandEnabled(command)) {
            failed = true;
          }

          // Present alert message about clipboard access not being available
          if (failed || !doc.queryCommandSupported(command)) {
            var msg = editor.translate(
              "Your browser doesn't support direct access to the clipboard. " +
              "Please use the Ctrl+X/C/V keyboard shortcuts instead."
            );

            if (Env.mac) {
              msg = msg.replace(/Ctrl\+/g, '\u2318+');
            }

            editor.notificationManager.open({ text: msg, type: 'error' });
          }
        },

        // Override unlink command
        unlink: function () {
          if (selection.isCollapsed()) {
            var elm = editor.dom.getParent(editor.selection.getStart(), 'a');
            if (elm) {
              editor.dom.remove(elm, true);
            }

            return;
          }

          formatter.remove("link");
        },

        // Override justify commands to use the text formatter engine
        'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {
          var align = command.substring(7);

          if (align == 'full') {
            align = 'justify';
          }

          // Remove all other alignments first
          each('left,center,right,justify'.split(','), function (name) {
            if (align != name) {
              formatter.remove('align' + name);
            }
          });

          if (align != 'none') {
            toggleFormat('align' + align);
          }
        },

        // Override list commands to fix WebKit bug
        'InsertUnorderedList,InsertOrderedList': function (command) {
          var listElm, listParent;

          execNativeCommand(command);

          // WebKit produces lists within block elements so we need to split them
          // we will replace the native list creation logic to custom logic later on
          // TODO: Remove this when the list creation logic is removed
          listElm = dom.getParent(selection.getNode(), 'ol,ul');
          if (listElm) {
            listParent = listElm.parentNode;

            // If list is within a text block then split that block
            if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {
              storeSelection();
              dom.split(listParent, listElm);
              restoreSelection();
            }
          }
        },

        // Override commands to use the text formatter engine
        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {
          toggleFormat(command);
        },

        // Override commands to use the text formatter engine
        'ForeColor,HiliteColor,FontName': function (command, ui, value) {
          toggleFormat(command, value);
        },

        FontSize: function (command, ui, value) {
          var fontClasses, fontSizes;

          // Convert font size 1-7 to styles
          if (value >= 1 && value <= 7) {
            fontSizes = explode(settings.font_size_style_values);
            fontClasses = explode(settings.font_size_classes);

            if (fontClasses) {
              value = fontClasses[value - 1] || value;
            } else {
              value = fontSizes[value - 1] || value;
            }
          }

          toggleFormat(command, value);
        },

        RemoveFormat: function (command) {
          formatter.remove(command);
        },

        mceBlockQuote: function () {
          toggleFormat('blockquote');
        },

        FormatBlock: function (command, ui, value) {
          return toggleFormat(value || 'p');
        },

        mceCleanup: function () {
          var bookmark = selection.getBookmark();

          editor.setContent(editor.getContent({ cleanup: TRUE }), { cleanup: TRUE });

          selection.moveToBookmark(bookmark);
        },

        mceRemoveNode: function (command, ui, value) {
          var node = value || selection.getNode();

          // Make sure that the body node isn't removed
          if (node != editor.getBody()) {
            storeSelection();
            editor.dom.remove(node, TRUE);
            restoreSelection();
          }
        },

        mceSelectNodeDepth: function (command, ui, value) {
          var counter = 0;

          dom.getParent(selection.getNode(), function (node) {
            if (node.nodeType == 1 && counter++ == value) {
              selection.select(node);
              return FALSE;
            }
          }, editor.getBody());
        },

        mceSelectNode: function (command, ui, value) {
          selection.select(value);
        },

        mceInsertContent: function (command, ui, value) {
          InsertContent.insertAtCaret(editor, value);
        },

        mceInsertRawHTML: function (command, ui, value) {
          selection.setContent('tiny_mce_marker');
          editor.setContent(
            editor.getContent().replace(/tiny_mce_marker/g, function () {
              return value;
            })
          );
        },

        mceToggleFormat: function (command, ui, value) {
          toggleFormat(value);
        },

        mceSetContent: function (command, ui, value) {
          editor.setContent(value);
        },

        'Indent,Outdent': function (command) {
          var intentValue, indentUnit, value;

          // Setup indent level
          intentValue = settings.indentation;
          indentUnit = /[a-z%]+$/i.exec(intentValue);
          intentValue = parseInt(intentValue, 10);

          if (!queryCommandState('InsertUnorderedList') && !queryCommandState('InsertOrderedList')) {
            // If forced_root_blocks is set to false we don't have a block to indent so lets create a div
            if (!settings.forced_root_block && !dom.getParent(selection.getNode(), dom.isBlock)) {
              formatter.apply('div');
            }

            each(selection.getSelectedBlocks(), function (element) {
              if (dom.getContentEditable(element) === "false") {
                return;
              }

              if (element.nodeName !== "LI") {
                var indentStyleName = editor.getParam('indent_use_margin', false) ? 'margin' : 'padding';
                indentStyleName = element.nodeName === 'TABLE' ? 'margin' : indentStyleName;
                indentStyleName += dom.getStyle(element, 'direction', true) == 'rtl' ? 'Right' : 'Left';

                if (command == 'outdent') {
                  value = Math.max(0, parseInt(element.style[indentStyleName] || 0, 10) - intentValue);
                  dom.setStyle(element, indentStyleName, value ? value + indentUnit : '');
                } else {
                  value = (parseInt(element.style[indentStyleName] || 0, 10) + intentValue) + indentUnit;
                  dom.setStyle(element, indentStyleName, value);
                }
              }
            });
          } else {
            execNativeCommand(command);
          }
        },

        mceRepaint: function () {
        },

        InsertHorizontalRule: function () {
          editor.execCommand('mceInsertContent', false, '<hr />');
        },

        mceToggleVisualAid: function () {
          editor.hasVisual = !editor.hasVisual;
          editor.addVisual();
        },

        mceReplaceContent: function (command, ui, value) {
          editor.execCommand('mceInsertContent', false, value.replace(/\{\$selection\}/g, selection.getContent({ format: 'text' })));
        },

        mceInsertLink: function (command, ui, value) {
          var anchor;

          if (typeof value == 'string') {
            value = { href: value };
          }

          anchor = dom.getParent(selection.getNode(), 'a');

          // Spaces are never valid in URLs and it's a very common mistake for people to make so we fix it here.
          value.href = value.href.replace(' ', '%20');

          // Remove existing links if there could be child links or that the href isn't specified
          if (!anchor || !value.href) {
            formatter.remove('link');
          }

          // Apply new link to selection
          if (value.href) {
            formatter.apply('link', value, anchor);
          }
        },

        selectAll: function () {
          var root = dom.getRoot(), rng;

          if (selection.getRng().setStart) {
            var editingHost = dom.getParent(selection.getStart(), NodeType.isContentEditableTrue);
            if (editingHost) {
              rng = dom.createRng();
              rng.selectNodeContents(editingHost);
              selection.setRng(rng);
            }
          } else {
            // IE will render it's own root level block elements and sometimes
            // even put font elements in them when the user starts typing. So we need to
            // move the selection to a more suitable element from this:
            // <body>|<p></p></body> to this: <body><p>|</p></body>
            rng = selection.getRng();
            if (!rng.item) {
              rng.moveToElementText(root);
              rng.select();
            }
          }
        },

        "delete": function () {
          DeleteCommands.deleteCommand(editor);
        },

        "forwardDelete": function () {
          DeleteCommands.forwardDeleteCommand(editor);
        },

        mceNewDocument: function () {
          editor.setContent('');
        },

        InsertLineBreak: function (command, ui, value) {
          // We load the current event in from EnterKey.js when appropriate to heed
          // certain event-specific variations such as ctrl-enter in a list
          var evt = value;
          var brElm, extraBr, marker;
          var rng = selection.getRng(true);
          new RangeUtils(dom).normalize(rng);

          var offset = rng.startOffset;
          var container = rng.startContainer;

          // Resolve node index
          if (container.nodeType == 1 && container.hasChildNodes()) {
            var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;

            container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;
            if (isAfterLastNodeInContainer && container.nodeType == 3) {
              offset = container.nodeValue.length;
            } else {
              offset = 0;
            }
          }

          var parentBlock = dom.getParent(container, dom.isBlock);
          var parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : ''; // IE < 9 & HTML5
          var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;
          var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : ''; // IE < 9 & HTML5

          // Enter inside block contained within a LI then split or insert before/after LI
          var isControlKey = evt && evt.ctrlKey;
          if (containerBlockName == 'LI' && !isControlKey) {
            parentBlock = containerBlock;
            parentBlockName = containerBlockName;
          }

          // Walks the parent block to the right and look for BR elements
          function hasRightSideContent() {
            var walker = new TreeWalker(container, parentBlock), node;
            var nonEmptyElementsMap = editor.schema.getNonEmptyElements();

            while ((node = walker.next())) {
              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {
                return true;
              }
            }
          }

          if (container && container.nodeType == 3 && offset >= container.nodeValue.length) {
            // Insert extra BR element at the end block elements
            if (!isOldIE && !hasRightSideContent()) {
              brElm = dom.create('br');
              rng.insertNode(brElm);
              rng.setStartAfter(brElm);
              rng.setEndAfter(brElm);
              extraBr = true;
            }
          }

          brElm = dom.create('br');
          rng.insertNode(brElm);

          // Rendering modes below IE8 doesn't display BR elements in PRE unless we have a \n before it
          var documentMode = dom.doc.documentMode;
          if (isOldIE && parentBlockName == 'PRE' && (!documentMode || documentMode < 8)) {
            brElm.parentNode.insertBefore(dom.doc.createTextNode('\r'), brElm);
          }

          // Insert temp marker and scroll to that
          marker = dom.create('span', {}, '&nbsp;');
          brElm.parentNode.insertBefore(marker, brElm);
          selection.scrollIntoView(marker);
          dom.remove(marker);

          if (!extraBr) {
            rng.setStartAfter(brElm);
            rng.setEndAfter(brElm);
          } else {
            rng.setStartBefore(brElm);
            rng.setEndBefore(brElm);
          }

          selection.setRng(rng);
          editor.undoManager.add();

          return TRUE;
        }
      });

      // Add queryCommandState overrides
      addCommands({
        // Override justify commands
        'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull': function (command) {
          var name = 'align' + command.substring(7);
          var nodes = selection.isCollapsed() ? [dom.getParent(selection.getNode(), dom.isBlock)] : selection.getSelectedBlocks();
          var matches = map(nodes, function (node) {
            return !!formatter.matchNode(node, name);
          });
          return inArray(matches, TRUE) !== -1;
        },

        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {
          return isFormatMatch(command);
        },

        mceBlockQuote: function () {
          return isFormatMatch('blockquote');
        },

        Outdent: function () {
          var node;

          if (settings.inline_styles) {
            if ((node = dom.getParent(selection.getStart(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {
              return TRUE;
            }

            if ((node = dom.getParent(selection.getEnd(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {
              return TRUE;
            }
          }

          return (
            queryCommandState('InsertUnorderedList') ||
            queryCommandState('InsertOrderedList') ||
            (!settings.inline_styles && !!dom.getParent(selection.getNode(), 'BLOCKQUOTE'))
          );
        },

        'InsertUnorderedList,InsertOrderedList': function (command) {
          var list = dom.getParent(selection.getNode(), 'ul,ol');

          return list &&
            (
              command === 'insertunorderedlist' && list.tagName === 'UL' ||
              command === 'insertorderedlist' && list.tagName === 'OL'
            );
        }
      }, 'state');

      // Add queryCommandValue overrides
      addCommands({
        'FontSize,FontName': function (command) {
          var value = 0, parent;

          if ((parent = dom.getParent(selection.getNode(), 'span'))) {
            if (command == 'fontsize') {
              value = parent.style.fontSize;
            } else {
              value = parent.style.fontFamily.replace(/, /g, ',').replace(/[\'\"]/g, '').toLowerCase();
            }
          }

          return value;
        }
      }, 'value');

      // Add undo manager logic
      addCommands({
        Undo: function () {
          editor.undoManager.undo();
        },

        Redo: function () {
          editor.undoManager.redo();
        }
      });
    };
  }
);

/**
 * URI.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles parsing, modification and serialization of URI/URL strings.
 * @class tinymce.util.URI
 */
define(
  'tinymce.core.util.URI',
  [
    'global!document',
    'tinymce.core.util.Tools'
  ],
  function (document, Tools) {
    var each = Tools.each, trim = Tools.trim;
    var queryParts = "source protocol authority userInfo user password host port relative path directory file query anchor".split(' ');
    var DEFAULT_PORTS = {
      'ftp': 21,
      'http': 80,
      'https': 443,
      'mailto': 25
    };

    /**
     * Constructs a new URI instance.
     *
     * @constructor
     * @method URI
     * @param {String} url URI string to parse.
     * @param {Object} settings Optional settings object.
     */
    function URI(url, settings) {
      var self = this, baseUri, baseUrl;

      url = trim(url);
      settings = self.settings = settings || {};
      baseUri = settings.base_uri;

      // Strange app protocol that isn't http/https or local anchor
      // For example: mailto,skype,tel etc.
      if (/^([\w\-]+):([^\/]{2})/i.test(url) || /^\s*#/.test(url)) {
        self.source = url;
        return;
      }

      var isProtocolRelative = url.indexOf('//') === 0;

      // Absolute path with no host, fake host and protocol
      if (url.indexOf('/') === 0 && !isProtocolRelative) {
        url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;
      }

      // Relative path http:// or protocol relative //path
      if (!/^[\w\-]*:?\/\//.test(url)) {
        baseUrl = settings.base_uri ? settings.base_uri.path : new URI(document.location.href).directory;
        if (settings.base_uri.protocol === "") {
          url = '//mce_host' + self.toAbsPath(baseUrl, url);
        } else {
          url = /([^#?]*)([#?]?.*)/.exec(url);
          url = ((baseUri && baseUri.protocol) || 'http') + '://mce_host' + self.toAbsPath(baseUrl, url[1]) + url[2];
        }
      }

      // Parse URL (Credits goes to Steave, http://blog.stevenlevithan.com/archives/parseuri)
      url = url.replace(/@@/g, '(mce_at)'); // Zope 3 workaround, they use @@something

      /*jshint maxlen: 255 */
      /*eslint max-len: 0 */
      url = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(url);

      each(queryParts, function (v, i) {
        var part = url[i];

        // Zope 3 workaround, they use @@something
        if (part) {
          part = part.replace(/\(mce_at\)/g, '@@');
        }

        self[v] = part;
      });

      if (baseUri) {
        if (!self.protocol) {
          self.protocol = baseUri.protocol;
        }

        if (!self.userInfo) {
          self.userInfo = baseUri.userInfo;
        }

        if (!self.port && self.host === 'mce_host') {
          self.port = baseUri.port;
        }

        if (!self.host || self.host === 'mce_host') {
          self.host = baseUri.host;
        }

        self.source = '';
      }

      if (isProtocolRelative) {
        self.protocol = '';
      }

      //t.path = t.path || '/';
    }

    URI.prototype = {
      /**
       * Sets the internal path part of the URI.
       *
       * @method setPath
       * @param {string} path Path string to set.
       */
      setPath: function (path) {
        var self = this;

        path = /^(.*?)\/?(\w+)?$/.exec(path);

        // Update path parts
        self.path = path[0];
        self.directory = path[1];
        self.file = path[2];

        // Rebuild source
        self.source = '';
        self.getURI();
      },

      /**
       * Converts the specified URI into a relative URI based on the current URI instance location.
       *
       * @method toRelative
       * @param {String} uri URI to convert into a relative path/URI.
       * @return {String} Relative URI from the point specified in the current URI instance.
       * @example
       * // Converts an absolute URL to an relative URL url will be somedir/somefile.htm
       * var url = new tinymce.util.URI('http://www.site.com/dir/').toRelative('http://www.site.com/dir/somedir/somefile.htm');
       */
      toRelative: function (uri) {
        var self = this, output;

        if (uri === "./") {
          return uri;
        }

        uri = new URI(uri, { base_uri: self });

        // Not on same domain/port or protocol
        if ((uri.host != 'mce_host' && self.host != uri.host && uri.host) || self.port != uri.port ||
          (self.protocol != uri.protocol && uri.protocol !== "")) {
          return uri.getURI();
        }

        var tu = self.getURI(), uu = uri.getURI();

        // Allow usage of the base_uri when relative_urls = true
        if (tu == uu || (tu.charAt(tu.length - 1) == "/" && tu.substr(0, tu.length - 1) == uu)) {
          return tu;
        }

        output = self.toRelPath(self.path, uri.path);

        // Add query
        if (uri.query) {
          output += '?' + uri.query;
        }

        // Add anchor
        if (uri.anchor) {
          output += '#' + uri.anchor;
        }

        return output;
      },

      /**
       * Converts the specified URI into a absolute URI based on the current URI instance location.
       *
       * @method toAbsolute
       * @param {String} uri URI to convert into a relative path/URI.
       * @param {Boolean} noHost No host and protocol prefix.
       * @return {String} Absolute URI from the point specified in the current URI instance.
       * @example
       * // Converts an relative URL to an absolute URL url will be http://www.site.com/dir/somedir/somefile.htm
       * var url = new tinymce.util.URI('http://www.site.com/dir/').toAbsolute('somedir/somefile.htm');
       */
      toAbsolute: function (uri, noHost) {
        uri = new URI(uri, { base_uri: this });

        return uri.getURI(noHost && this.isSameOrigin(uri));
      },

      /**
       * Determine whether the given URI has the same origin as this URI.  Based on RFC-6454.
       * Supports default ports for protocols listed in DEFAULT_PORTS.  Unsupported protocols will fail safe: they
       * won't match, if the port specifications differ.
       *
       * @method isSameOrigin
       * @param {tinymce.util.URI} uri Uri instance to compare.
       * @returns {Boolean} True if the origins are the same.
       */
      isSameOrigin: function (uri) {
        if (this.host == uri.host && this.protocol == uri.protocol) {
          if (this.port == uri.port) {
            return true;
          }

          var defaultPort = DEFAULT_PORTS[this.protocol];
          if (defaultPort && ((this.port || defaultPort) == (uri.port || defaultPort))) {
            return true;
          }
        }

        return false;
      },

      /**
       * Converts a absolute path into a relative path.
       *
       * @method toRelPath
       * @param {String} base Base point to convert the path from.
       * @param {String} path Absolute path to convert into a relative path.
       */
      toRelPath: function (base, path) {
        var items, breakPoint = 0, out = '', i, l;

        // Split the paths
        base = base.substring(0, base.lastIndexOf('/'));
        base = base.split('/');
        items = path.split('/');

        if (base.length >= items.length) {
          for (i = 0, l = base.length; i < l; i++) {
            if (i >= items.length || base[i] != items[i]) {
              breakPoint = i + 1;
              break;
            }
          }
        }

        if (base.length < items.length) {
          for (i = 0, l = items.length; i < l; i++) {
            if (i >= base.length || base[i] != items[i]) {
              breakPoint = i + 1;
              break;
            }
          }
        }

        if (breakPoint === 1) {
          return path;
        }

        for (i = 0, l = base.length - (breakPoint - 1); i < l; i++) {
          out += "../";
        }

        for (i = breakPoint - 1, l = items.length; i < l; i++) {
          if (i != breakPoint - 1) {
            out += "/" + items[i];
          } else {
            out += items[i];
          }
        }

        return out;
      },

      /**
       * Converts a relative path into a absolute path.
       *
       * @method toAbsPath
       * @param {String} base Base point to convert the path from.
       * @param {String} path Relative path to convert into an absolute path.
       */
      toAbsPath: function (base, path) {
        var i, nb = 0, o = [], tr, outPath;

        // Split paths
        tr = /\/$/.test(path) ? '/' : '';
        base = base.split('/');
        path = path.split('/');

        // Remove empty chunks
        each(base, function (k) {
          if (k) {
            o.push(k);
          }
        });

        base = o;

        // Merge relURLParts chunks
        for (i = path.length - 1, o = []; i >= 0; i--) {
          // Ignore empty or .
          if (path[i].length === 0 || path[i] === ".") {
            continue;
          }

          // Is parent
          if (path[i] === '..') {
            nb++;
            continue;
          }

          // Move up
          if (nb > 0) {
            nb--;
            continue;
          }

          o.push(path[i]);
        }

        i = base.length - nb;

        // If /a/b/c or /
        if (i <= 0) {
          outPath = o.reverse().join('/');
        } else {
          outPath = base.slice(0, i).join('/') + '/' + o.reverse().join('/');
        }

        // Add front / if it's needed
        if (outPath.indexOf('/') !== 0) {
          outPath = '/' + outPath;
        }

        // Add traling / if it's needed
        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {
          outPath += tr;
        }

        return outPath;
      },

      /**
       * Returns the full URI of the internal structure.
       *
       * @method getURI
       * @param {Boolean} noProtoHost Optional no host and protocol part. Defaults to false.
       */
      getURI: function (noProtoHost) {
        var s, self = this;

        // Rebuild source
        if (!self.source || noProtoHost) {
          s = '';

          if (!noProtoHost) {
            if (self.protocol) {
              s += self.protocol + '://';
            } else {
              s += '//';
            }

            if (self.userInfo) {
              s += self.userInfo + '@';
            }

            if (self.host) {
              s += self.host;
            }

            if (self.port) {
              s += ':' + self.port;
            }
          }

          if (self.path) {
            s += self.path;
          }

          if (self.query) {
            s += '?' + self.query;
          }

          if (self.anchor) {
            s += '#' + self.anchor;
          }

          self.source = s;
        }

        return self.source;
      }
    };

    URI.parseDataUri = function (uri) {
      var type, matches;

      uri = decodeURIComponent(uri).split(',');

      matches = /data:([^;]+)/.exec(uri[0]);
      if (matches) {
        type = matches[1];
      }

      return {
        type: type,
        data: uri[1]
      };
    };

    URI.getDocumentBaseUrl = function (loc) {
      var baseUrl;

      // Pass applewebdata:// and other non web protocols though
      if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {
        baseUrl = loc.href;
      } else {
        baseUrl = loc.protocol + '//' + loc.host + loc.pathname;
      }

      if (/^[^:]+:\/\/\/?[^\/]+\//.test(baseUrl)) {
        baseUrl = baseUrl.replace(/[\?#].*$/, '').replace(/[\/\\][^\/]+$/, '');

        if (!/[\/\\]$/.test(baseUrl)) {
          baseUrl += '/';
        }
      }

      return baseUrl;
    };

    return URI;
  }
);

/**
 * Class.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This utilitiy class is used for easier inheritance.
 *
 * Features:
 * * Exposed super functions: this._super();
 * * Mixins
 * * Dummy functions
 * * Property functions: var value = object.value(); and object.value(newValue);
 * * Static functions
 * * Defaults settings
 */
define(
  'tinymce.core.util.Class',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    var each = Tools.each, extend = Tools.extend;

    var extendClass, initializing;

    function Class() {
    }

    // Provides classical inheritance, based on code made by John Resig
    Class.extend = extendClass = function (prop) {
      var self = this, _super = self.prototype, prototype, name, member;

      // The dummy class constructor
      function Class() {
        var i, mixins, mixin, self = this;

        // All construction is actually done in the init method
        if (!initializing) {
          // Run class constuctor
          if (self.init) {
            self.init.apply(self, arguments);
          }

          // Run mixin constructors
          mixins = self.Mixins;
          if (mixins) {
            i = mixins.length;
            while (i--) {
              mixin = mixins[i];
              if (mixin.init) {
                mixin.init.apply(self, arguments);
              }
            }
          }
        }
      }

      // Dummy function, needs to be extended in order to provide functionality
      function dummy() {
        return this;
      }

      // Creates a overloaded method for the class
      // this enables you to use this._super(); to call the super function
      function createMethod(name, fn) {
        return function () {
          var self = this, tmp = self._super, ret;

          self._super = _super[name];
          ret = fn.apply(self, arguments);
          self._super = tmp;

          return ret;
        };
      }

      // Instantiate a base class (but only create the instance,
      // don't run the init constructor)
      initializing = true;

      /*eslint new-cap:0 */
      prototype = new self();
      initializing = false;

      // Add mixins
      if (prop.Mixins) {
        each(prop.Mixins, function (mixin) {
          for (var name in mixin) {
            if (name !== "init") {
              prop[name] = mixin[name];
            }
          }
        });

        if (_super.Mixins) {
          prop.Mixins = _super.Mixins.concat(prop.Mixins);
        }
      }

      // Generate dummy methods
      if (prop.Methods) {
        each(prop.Methods.split(','), function (name) {
          prop[name] = dummy;
        });
      }

      // Generate property methods
      if (prop.Properties) {
        each(prop.Properties.split(','), function (name) {
          var fieldName = '_' + name;

          prop[name] = function (value) {
            var self = this, undef;

            // Set value
            if (value !== undef) {
              self[fieldName] = value;

              return self;
            }

            // Get value
            return self[fieldName];
          };
        });
      }

      // Static functions
      if (prop.Statics) {
        each(prop.Statics, function (func, name) {
          Class[name] = func;
        });
      }

      // Default settings
      if (prop.Defaults && _super.Defaults) {
        prop.Defaults = extend({}, _super.Defaults, prop.Defaults);
      }

      // Copy the properties over onto the new prototype
      for (name in prop) {
        member = prop[name];

        if (typeof member == "function" && _super[name]) {
          prototype[name] = createMethod(name, member);
        } else {
          prototype[name] = member;
        }
      }

      // Populate our constructed prototype object
      Class.prototype = prototype;

      // Enforce the constructor to be what we expect
      Class.constructor = Class;

      // And make this class extendible
      Class.extend = extendClass;

      return Class;
    };

    return Class;
  }
);
/**
 * EventDispatcher.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class lets you add/remove and fire events by name on the specified scope. This makes
 * it easy to add event listener logic to any class.
 *
 * @class tinymce.util.EventDispatcher
 * @example
 *  var eventDispatcher = new EventDispatcher();
 *
 *  eventDispatcher.on('click', function() {console.log('data');});
 *  eventDispatcher.fire('click', {data: 123});
 */
define(
  'tinymce.core.util.EventDispatcher',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    var nativeEvents = Tools.makeMap(
      "focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange " +
      "mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover " +
      "draggesture dragdrop drop drag submit " +
      "compositionstart compositionend compositionupdate touchstart touchmove touchend",
      ' '
    );

    function Dispatcher(settings) {
      var self = this, scope, bindings = {}, toggleEvent;

      function returnFalse() {
        return false;
      }

      function returnTrue() {
        return true;
      }

      settings = settings || {};
      scope = settings.scope || self;
      toggleEvent = settings.toggleEvent || returnFalse;

      /**
       * Fires the specified event by name.
       *
       * @method fire
       * @param {String} name Name of the event to fire.
       * @param {Object?} args Event arguments.
       * @return {Object} Event args instance passed in.
       * @example
       * instance.fire('event', {...});
       */
      function fire(name, args) {
        var handlers, i, l, callback;

        name = name.toLowerCase();
        args = args || {};
        args.type = name;

        // Setup target is there isn't one
        if (!args.target) {
          args.target = scope;
        }

        // Add event delegation methods if they are missing
        if (!args.preventDefault) {
          // Add preventDefault method
          args.preventDefault = function () {
            args.isDefaultPrevented = returnTrue;
          };

          // Add stopPropagation
          args.stopPropagation = function () {
            args.isPropagationStopped = returnTrue;
          };

          // Add stopImmediatePropagation
          args.stopImmediatePropagation = function () {
            args.isImmediatePropagationStopped = returnTrue;
          };

          // Add event delegation states
          args.isDefaultPrevented = returnFalse;
          args.isPropagationStopped = returnFalse;
          args.isImmediatePropagationStopped = returnFalse;
        }

        if (settings.beforeFire) {
          settings.beforeFire(args);
        }

        handlers = bindings[name];
        if (handlers) {
          for (i = 0, l = handlers.length; i < l; i++) {
            callback = handlers[i];

            // Unbind handlers marked with "once"
            if (callback.once) {
              off(name, callback.func);
            }

            // Stop immediate propagation if needed
            if (args.isImmediatePropagationStopped()) {
              args.stopPropagation();
              return args;
            }

            // If callback returns false then prevent default and stop all propagation
            if (callback.func.call(scope, args) === false) {
              args.preventDefault();
              return args;
            }
          }
        }

        return args;
      }

      /**
       * Binds an event listener to a specific event by name.
       *
       * @method on
       * @param {String} name Event name or space separated list of events to bind.
       * @param {callback} callback Callback to be executed when the event occurs.
       * @param {Boolean} first Optional flag if the event should be prepended. Use this with care.
       * @return {Object} Current class instance.
       * @example
       * instance.on('event', function(e) {
       *     // Callback logic
       * });
       */
      function on(name, callback, prepend, extra) {
        var handlers, names, i;

        if (callback === false) {
          callback = returnFalse;
        }

        if (callback) {
          callback = {
            func: callback
          };

          if (extra) {
            Tools.extend(callback, extra);
          }

          names = name.toLowerCase().split(' ');
          i = names.length;
          while (i--) {
            name = names[i];
            handlers = bindings[name];
            if (!handlers) {
              handlers = bindings[name] = [];
              toggleEvent(name, true);
            }

            if (prepend) {
              handlers.unshift(callback);
            } else {
              handlers.push(callback);
            }
          }
        }

        return self;
      }

      /**
       * Unbinds an event listener to a specific event by name.
       *
       * @method off
       * @param {String?} name Name of the event to unbind.
       * @param {callback?} callback Callback to unbind.
       * @return {Object} Current class instance.
       * @example
       * // Unbind specific callback
       * instance.off('event', handler);
       *
       * // Unbind all listeners by name
       * instance.off('event');
       *
       * // Unbind all events
       * instance.off();
       */
      function off(name, callback) {
        var i, handlers, bindingName, names, hi;

        if (name) {
          names = name.toLowerCase().split(' ');
          i = names.length;
          while (i--) {
            name = names[i];
            handlers = bindings[name];

            // Unbind all handlers
            if (!name) {
              for (bindingName in bindings) {
                toggleEvent(bindingName, false);
                delete bindings[bindingName];
              }

              return self;
            }

            if (handlers) {
              // Unbind all by name
              if (!callback) {
                handlers.length = 0;
              } else {
                // Unbind specific ones
                hi = handlers.length;
                while (hi--) {
                  if (handlers[hi].func === callback) {
                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));
                    bindings[name] = handlers;
                  }
                }
              }

              if (!handlers.length) {
                toggleEvent(name, false);
                delete bindings[name];
              }
            }
          }
        } else {
          for (name in bindings) {
            toggleEvent(name, false);
          }

          bindings = {};
        }

        return self;
      }

      /**
       * Binds an event listener to a specific event by name
       * and automatically unbind the event once the callback fires.
       *
       * @method once
       * @param {String} name Event name or space separated list of events to bind.
       * @param {callback} callback Callback to be executed when the event occurs.
       * @param {Boolean} first Optional flag if the event should be prepended. Use this with care.
       * @return {Object} Current class instance.
       * @example
       * instance.once('event', function(e) {
       *     // Callback logic
       * });
       */
      function once(name, callback, prepend) {
        return on(name, callback, prepend, { once: true });
      }

      /**
       * Returns true/false if the dispatcher has a event of the specified name.
       *
       * @method has
       * @param {String} name Name of the event to check for.
       * @return {Boolean} true/false if the event exists or not.
       */
      function has(name) {
        name = name.toLowerCase();
        return !(!bindings[name] || bindings[name].length === 0);
      }

      // Expose
      self.fire = fire;
      self.on = on;
      self.off = off;
      self.once = once;
      self.has = has;
    }

    /**
     * Returns true/false if the specified event name is a native browser event or not.
     *
     * @method isNative
     * @param {String} name Name to check if it's native.
     * @return {Boolean} true/false if the event is native or not.
     * @static
     */
    Dispatcher.isNative = function (name) {
      return !!nativeEvents[name.toLowerCase()];
    };

    return Dispatcher;
  }
);

/**
 * Observable.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This mixin will add event binding logic to classes.
 *
 * @mixin tinymce.util.Observable
 */
define(
  'tinymce.core.util.Observable',
  [
    "tinymce.core.util.EventDispatcher"
  ],
  function (EventDispatcher) {
    function getEventDispatcher(obj) {
      if (!obj._eventDispatcher) {
        obj._eventDispatcher = new EventDispatcher({
          scope: obj,
          toggleEvent: function (name, state) {
            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {
              obj.toggleNativeEvent(name, state);
            }
          }
        });
      }

      return obj._eventDispatcher;
    }

    return {
      /**
       * Fires the specified event by name. Consult the
       * <a href="/docs/advanced/events">event reference</a> for more details on each event.
       *
       * @method fire
       * @param {String} name Name of the event to fire.
       * @param {Object?} args Event arguments.
       * @param {Boolean?} bubble True/false if the event is to be bubbled.
       * @return {Object} Event args instance passed in.
       * @example
       * instance.fire('event', {...});
       */
      fire: function (name, args, bubble) {
        var self = this;

        // Prevent all events except the remove event after the instance has been removed
        if (self.removed && name !== "remove") {
          return args;
        }

        args = getEventDispatcher(self).fire(name, args, bubble);

        // Bubble event up to parents
        if (bubble !== false && self.parent) {
          var parent = self.parent();
          while (parent && !args.isPropagationStopped()) {
            parent.fire(name, args, false);
            parent = parent.parent();
          }
        }

        return args;
      },

      /**
       * Binds an event listener to a specific event by name. Consult the
       * <a href="/docs/advanced/events">event reference</a> for more details on each event.
       *
       * @method on
       * @param {String} name Event name or space separated list of events to bind.
       * @param {callback} callback Callback to be executed when the event occurs.
       * @param {Boolean} first Optional flag if the event should be prepended. Use this with care.
       * @return {Object} Current class instance.
       * @example
       * instance.on('event', function(e) {
       *     // Callback logic
       * });
       */
      on: function (name, callback, prepend) {
        return getEventDispatcher(this).on(name, callback, prepend);
      },

      /**
       * Unbinds an event listener to a specific event by name. Consult the
       * <a href="/docs/advanced/events">event reference</a> for more details on each event.
       *
       * @method off
       * @param {String?} name Name of the event to unbind.
       * @param {callback?} callback Callback to unbind.
       * @return {Object} Current class instance.
       * @example
       * // Unbind specific callback
       * instance.off('event', handler);
       *
       * // Unbind all listeners by name
       * instance.off('event');
       *
       * // Unbind all events
       * instance.off();
       */
      off: function (name, callback) {
        return getEventDispatcher(this).off(name, callback);
      },

      /**
       * Bind the event callback and once it fires the callback is removed. Consult the
       * <a href="/docs/advanced/events">event reference</a> for more details on each event.
       *
       * @method once
       * @param {String} name Name of the event to bind.
       * @param {callback} callback Callback to bind only once.
       * @return {Object} Current class instance.
       */
      once: function (name, callback) {
        return getEventDispatcher(this).once(name, callback);
      },

      /**
       * Returns true/false if the object has a event of the specified name.
       *
       * @method hasEventListeners
       * @param {String} name Name of the event to check for.
       * @return {Boolean} true/false if the event exists or not.
       */
      hasEventListeners: function (name) {
        return getEventDispatcher(this).has(name);
      }
    };
  }
);
/**
 * Binding.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class gets dynamically extended to provide a binding between two models. This makes it possible to
 * sync the state of two properties in two models by a layer of abstraction.
 *
 * @private
 * @class tinymce.data.Binding
 */
define(
  'tinymce.core.data.Binding',
  [
  ],
  function () {
    /**
     * Constructs a new bidning.
     *
     * @constructor
     * @method Binding
     * @param {Object} settings Settings to the binding.
     */
    function Binding(settings) {
      this.create = settings.create;
    }

    /**
     * Creates a binding for a property on a model.
     *
     * @method create
     * @param {tinymce.data.ObservableObject} model Model to create binding to.
     * @param {String} name Name of property to bind.
     * @return {tinymce.data.Binding} Binding instance.
     */
    Binding.create = function (model, name) {
      return new Binding({
        create: function (otherModel, otherName) {
          var bindings;

          function fromSelfToOther(e) {
            otherModel.set(otherName, e.value);
          }

          function fromOtherToSelf(e) {
            model.set(name, e.value);
          }

          otherModel.on('change:' + otherName, fromOtherToSelf);
          model.on('change:' + name, fromSelfToOther);

          // Keep track of the bindings
          bindings = otherModel._bindings;

          if (!bindings) {
            bindings = otherModel._bindings = [];

            otherModel.on('destroy', function () {
              var i = bindings.length;

              while (i--) {
                bindings[i]();
              }
            });
          }

          bindings.push(function () {
            model.off('change:' + name, fromSelfToOther);
          });

          return model.get(name);
        }
      });
    };

    return Binding;
  }
);
/**
 * ObservableObject.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class is a object that is observable when properties changes a change event gets emitted.
 *
 * @private
 * @class tinymce.data.ObservableObject
 */
define(
  'tinymce.core.data.ObservableObject',
  [
    'tinymce.core.data.Binding',
    'tinymce.core.util.Class',
    'tinymce.core.util.Observable',
    'tinymce.core.util.Tools'
  ], function (Binding, Class, Observable, Tools) {
    function isNode(node) {
      return node.nodeType > 0;
    }

    // Todo: Maybe this should be shallow compare since it might be huge object references
    function isEqual(a, b) {
      var k, checked;

      // Strict equals
      if (a === b) {
        return true;
      }

      // Compare null
      if (a === null || b === null) {
        return a === b;
      }

      // Compare number, boolean, string, undefined
      if (typeof a !== "object" || typeof b !== "object") {
        return a === b;
      }

      // Compare arrays
      if (Tools.isArray(b)) {
        if (a.length !== b.length) {
          return false;
        }

        k = a.length;
        while (k--) {
          if (!isEqual(a[k], b[k])) {
            return false;
          }
        }
      }

      // Shallow compare nodes
      if (isNode(a) || isNode(b)) {
        return a === b;
      }

      // Compare objects
      checked = {};
      for (k in b) {
        if (!isEqual(a[k], b[k])) {
          return false;
        }

        checked[k] = true;
      }

      for (k in a) {
        if (!checked[k] && !isEqual(a[k], b[k])) {
          return false;
        }
      }

      return true;
    }

    return Class.extend({
      Mixins: [Observable],

      /**
       * Constructs a new observable object instance.
       *
       * @constructor
       * @param {Object} data Initial data for the object.
       */
      init: function (data) {
        var name, value;

        data = data || {};

        for (name in data) {
          value = data[name];

          if (value instanceof Binding) {
            data[name] = value.create(this, name);
          }
        }

        this.data = data;
      },

      /**
       * Sets a property on the value this will call
       * observers if the value is a change from the current value.
       *
       * @method set
       * @param {String/object} name Name of the property to set or a object of items to set.
       * @param {Object} value Value to set for the property.
       * @return {tinymce.data.ObservableObject} Observable object instance.
       */
      set: function (name, value) {
        var key, args, oldValue = this.data[name];

        if (value instanceof Binding) {
          value = value.create(this, name);
        }

        if (typeof name === "object") {
          for (key in name) {
            this.set(key, name[key]);
          }

          return this;
        }

        if (!isEqual(oldValue, value)) {
          this.data[name] = value;

          args = {
            target: this,
            name: name,
            value: value,
            oldValue: oldValue
          };

          this.fire('change:' + name, args);
          this.fire('change', args);
        }

        return this;
      },

      /**
       * Gets a property by name.
       *
       * @method get
       * @param {String} name Name of the property to get.
       * @return {Object} Object value of propery.
       */
      get: function (name) {
        return this.data[name];
      },

      /**
       * Returns true/false if the specified property exists.
       *
       * @method has
       * @param {String} name Name of the property to check for.
       * @return {Boolean} true/false if the item exists.
       */
      has: function (name) {
        return name in this.data;
      },

      /**
       * Returns a dynamic property binding for the specified property name. This makes
       * it possible to sync the state of two properties in two ObservableObject instances.
       *
       * @method bind
       * @param {String} name Name of the property to sync with the property it's inserted to.
       * @return {tinymce.data.Binding} Data binding instance.
       */
      bind: function (name) {
        return Binding.create(this, name);
      },

      /**
       * Destroys the observable object and fires the "destroy"
       * event and clean up any internal resources.
       *
       * @method destroy
       */
      destroy: function () {
        this.fire('destroy');
      }
    });
  }
);
/**
 * Selector.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*eslint no-nested-ternary:0 */

/**
 * Selector engine, enables you to select controls by using CSS like expressions.
 * We currently only support basic CSS expressions to reduce the size of the core
 * and the ones we support should be enough for most cases.
 *
 * @example
 * Supported expressions:
 *  element
 *  element#name
 *  element.class
 *  element[attr]
 *  element[attr*=value]
 *  element[attr~=value]
 *  element[attr!=value]
 *  element[attr^=value]
 *  element[attr$=value]
 *  element:<state>
 *  element:not(<expression>)
 *  element:first
 *  element:last
 *  element:odd
 *  element:even
 *  element element
 *  element > element
 *
 * @class tinymce.ui.Selector
 */
define(
  'tinymce.core.ui.Selector',
  [
    "tinymce.core.util.Class"
  ],
  function (Class) {
    "use strict";

    /**
     * Produces an array with a unique set of objects. It will not compare the values
     * but the references of the objects.
     *
     * @private
     * @method unqiue
     * @param {Array} array Array to make into an array with unique items.
     * @return {Array} Array with unique items.
     */
    function unique(array) {
      var uniqueItems = [], i = array.length, item;

      while (i--) {
        item = array[i];

        if (!item.__checked) {
          uniqueItems.push(item);
          item.__checked = 1;
        }
      }

      i = uniqueItems.length;
      while (i--) {
        delete uniqueItems[i].__checked;
      }

      return uniqueItems;
    }

    var expression = /^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i;

    /*jshint maxlen:255 */
    /*eslint max-len:0 */
    var chunker = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
      whiteSpace = /^\s*|\s*$/g,
      Collection;

    var Selector = Class.extend({
      /**
       * Constructs a new Selector instance.
       *
       * @constructor
       * @method init
       * @param {String} selector CSS like selector expression.
       */
      init: function (selector) {
        var match = this.match;

        function compileNameFilter(name) {
          if (name) {
            name = name.toLowerCase();

            return function (item) {
              return name === '*' || item.type === name;
            };
          }
        }

        function compileIdFilter(id) {
          if (id) {
            return function (item) {
              return item._name === id;
            };
          }
        }

        function compileClassesFilter(classes) {
          if (classes) {
            classes = classes.split('.');

            return function (item) {
              var i = classes.length;

              while (i--) {
                if (!item.classes.contains(classes[i])) {
                  return false;
                }
              }

              return true;
            };
          }
        }

        function compileAttrFilter(name, cmp, check) {
          if (name) {
            return function (item) {
              var value = item[name] ? item[name]() : '';

              return !cmp ? !!check :
                cmp === "=" ? value === check :
                  cmp === "*=" ? value.indexOf(check) >= 0 :
                    cmp === "~=" ? (" " + value + " ").indexOf(" " + check + " ") >= 0 :
                      cmp === "!=" ? value != check :
                        cmp === "^=" ? value.indexOf(check) === 0 :
                          cmp === "$=" ? value.substr(value.length - check.length) === check :
                            false;
            };
          }
        }

        function compilePsuedoFilter(name) {
          var notSelectors;

          if (name) {
            name = /(?:not\((.+)\))|(.+)/i.exec(name);

            if (!name[1]) {
              name = name[2];

              return function (item, index, length) {
                return name === 'first' ? index === 0 :
                  name === 'last' ? index === length - 1 :
                    name === 'even' ? index % 2 === 0 :
                      name === 'odd' ? index % 2 === 1 :
                        item[name] ? item[name]() :
                          false;
              };
            }

            // Compile not expression
            notSelectors = parseChunks(name[1], []);

            return function (item) {
              return !match(item, notSelectors);
            };
          }
        }

        function compile(selector, filters, direct) {
          var parts;

          function add(filter) {
            if (filter) {
              filters.push(filter);
            }
          }

          // Parse expression into parts
          parts = expression.exec(selector.replace(whiteSpace, ''));

          add(compileNameFilter(parts[1]));
          add(compileIdFilter(parts[2]));
          add(compileClassesFilter(parts[3]));
          add(compileAttrFilter(parts[4], parts[5], parts[6]));
          add(compilePsuedoFilter(parts[7]));

          // Mark the filter with pseudo for performance
          filters.pseudo = !!parts[7];
          filters.direct = direct;

          return filters;
        }

        // Parser logic based on Sizzle by John Resig
        function parseChunks(selector, selectors) {
          var parts = [], extra, matches, i;

          do {
            chunker.exec("");
            matches = chunker.exec(selector);

            if (matches) {
              selector = matches[3];
              parts.push(matches[1]);

              if (matches[2]) {
                extra = matches[3];
                break;
              }
            }
          } while (matches);

          if (extra) {
            parseChunks(extra, selectors);
          }

          selector = [];
          for (i = 0; i < parts.length; i++) {
            if (parts[i] != '>') {
              selector.push(compile(parts[i], [], parts[i - 1] === '>'));
            }
          }

          selectors.push(selector);

          return selectors;
        }

        this._selectors = parseChunks(selector, []);
      },

      /**
       * Returns true/false if the selector matches the specified control.
       *
       * @method match
       * @param {tinymce.ui.Control} control Control to match against the selector.
       * @param {Array} selectors Optional array of selectors, mostly used internally.
       * @return {Boolean} true/false state if the control matches or not.
       */
      match: function (control, selectors) {
        var i, l, si, sl, selector, fi, fl, filters, index, length, siblings, count, item;

        selectors = selectors || this._selectors;
        for (i = 0, l = selectors.length; i < l; i++) {
          selector = selectors[i];
          sl = selector.length;
          item = control;
          count = 0;

          for (si = sl - 1; si >= 0; si--) {
            filters = selector[si];

            while (item) {
              // Find the index and length since a pseudo filter like :first needs it
              if (filters.pseudo) {
                siblings = item.parent().items();
                index = length = siblings.length;
                while (index--) {
                  if (siblings[index] === item) {
                    break;
                  }
                }
              }

              for (fi = 0, fl = filters.length; fi < fl; fi++) {
                if (!filters[fi](item, index, length)) {
                  fi = fl + 1;
                  break;
                }
              }

              if (fi === fl) {
                count++;
                break;
              } else {
                // If it didn't match the right most expression then
                // break since it's no point looking at the parents
                if (si === sl - 1) {
                  break;
                }
              }

              item = item.parent();
            }
          }

          // If we found all selectors then return true otherwise continue looking
          if (count === sl) {
            return true;
          }
        }

        return false;
      },

      /**
       * Returns a tinymce.ui.Collection with matches of the specified selector inside the specified container.
       *
       * @method find
       * @param {tinymce.ui.Control} container Container to look for items in.
       * @return {tinymce.ui.Collection} Collection with matched elements.
       */
      find: function (container) {
        var matches = [], i, l, selectors = this._selectors;

        function collect(items, selector, index) {
          var i, l, fi, fl, item, filters = selector[index];

          for (i = 0, l = items.length; i < l; i++) {
            item = items[i];

            // Run each filter against the item
            for (fi = 0, fl = filters.length; fi < fl; fi++) {
              if (!filters[fi](item, i, l)) {
                fi = fl + 1;
                break;
              }
            }

            // All filters matched the item
            if (fi === fl) {
              // Matched item is on the last expression like: panel toolbar [button]
              if (index == selector.length - 1) {
                matches.push(item);
              } else {
                // Collect next expression type
                if (item.items) {
                  collect(item.items(), selector, index + 1);
                }
              }
            } else if (filters.direct) {
              return;
            }

            // Collect child items
            if (item.items) {
              collect(item.items(), selector, index);
            }
          }
        }

        if (container.items) {
          for (i = 0, l = selectors.length; i < l; i++) {
            collect(container.items(), selectors[i], 0);
          }

          // Unique the matches if needed
          if (l > 1) {
            matches = unique(matches);
          }
        }

        // Fix for circular reference
        if (!Collection) {
          // TODO: Fix me!
          Collection = Selector.Collection;
        }

        return new Collection(matches);
      }
    });

    return Selector;
  }
);

/**
 * Collection.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Control collection, this class contains control instances and it enables you to
 * perform actions on all the contained items. This is very similar to how jQuery works.
 *
 * @example
 * someCollection.show().disabled(true);
 *
 * @class tinymce.ui.Collection
 */
define(
  'tinymce.core.ui.Collection',
  [
    "tinymce.core.util.Tools",
    "tinymce.core.ui.Selector",
    "tinymce.core.util.Class"
  ],
  function (Tools, Selector, Class) {
    "use strict";

    var Collection, proto, push = Array.prototype.push, slice = Array.prototype.slice;

    proto = {
      /**
       * Current number of contained control instances.
       *
       * @field length
       * @type Number
       */
      length: 0,

      /**
       * Constructor for the collection.
       *
       * @constructor
       * @method init
       * @param {Array} items Optional array with items to add.
       */
      init: function (items) {
        if (items) {
          this.add(items);
        }
      },

      /**
       * Adds new items to the control collection.
       *
       * @method add
       * @param {Array} items Array if items to add to collection.
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      add: function (items) {
        var self = this;

        // Force single item into array
        if (!Tools.isArray(items)) {
          if (items instanceof Collection) {
            self.add(items.toArray());
          } else {
            push.call(self, items);
          }
        } else {
          push.apply(self, items);
        }

        return self;
      },

      /**
       * Sets the contents of the collection. This will remove any existing items
       * and replace them with the ones specified in the input array.
       *
       * @method set
       * @param {Array} items Array with items to set into the Collection.
       * @return {tinymce.ui.Collection} Collection instance.
       */
      set: function (items) {
        var self = this, len = self.length, i;

        self.length = 0;
        self.add(items);

        // Remove old entries
        for (i = self.length; i < len; i++) {
          delete self[i];
        }

        return self;
      },

      /**
       * Filters the collection item based on the specified selector expression or selector function.
       *
       * @method filter
       * @param {String} selector Selector expression to filter items by.
       * @return {tinymce.ui.Collection} Collection containing the filtered items.
       */
      filter: function (selector) {
        var self = this, i, l, matches = [], item, match;

        // Compile string into selector expression
        if (typeof selector === "string") {
          selector = new Selector(selector);

          match = function (item) {
            return selector.match(item);
          };
        } else {
          // Use selector as matching function
          match = selector;
        }

        for (i = 0, l = self.length; i < l; i++) {
          item = self[i];

          if (match(item)) {
            matches.push(item);
          }
        }

        return new Collection(matches);
      },

      /**
       * Slices the items within the collection.
       *
       * @method slice
       * @param {Number} index Index to slice at.
       * @param {Number} len Optional length to slice.
       * @return {tinymce.ui.Collection} Current collection.
       */
      slice: function () {
        return new Collection(slice.apply(this, arguments));
      },

      /**
       * Makes the current collection equal to the specified index.
       *
       * @method eq
       * @param {Number} index Index of the item to set the collection to.
       * @return {tinymce.ui.Collection} Current collection.
       */
      eq: function (index) {
        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);
      },

      /**
       * Executes the specified callback on each item in collection.
       *
       * @method each
       * @param {function} callback Callback to execute for each item in collection.
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      each: function (callback) {
        Tools.each(this, callback);

        return this;
      },

      /**
       * Returns an JavaScript array object of the contents inside the collection.
       *
       * @method toArray
       * @return {Array} Array with all items from collection.
       */
      toArray: function () {
        return Tools.toArray(this);
      },

      /**
       * Finds the index of the specified control or return -1 if it isn't in the collection.
       *
       * @method indexOf
       * @param {Control} ctrl Control instance to look for.
       * @return {Number} Index of the specified control or -1.
       */
      indexOf: function (ctrl) {
        var self = this, i = self.length;

        while (i--) {
          if (self[i] === ctrl) {
            break;
          }
        }

        return i;
      },

      /**
       * Returns a new collection of the contents in reverse order.
       *
       * @method reverse
       * @return {tinymce.ui.Collection} Collection instance with reversed items.
       */
      reverse: function () {
        return new Collection(Tools.toArray(this).reverse());
      },

      /**
       * Returns true/false if the class exists or not.
       *
       * @method hasClass
       * @param {String} cls Class to check for.
       * @return {Boolean} true/false state if the class exists or not.
       */
      hasClass: function (cls) {
        return this[0] ? this[0].classes.contains(cls) : false;
      },

      /**
       * Sets/gets the specific property on the items in the collection. The same as executing control.<property>(<value>);
       *
       * @method prop
       * @param {String} name Property name to get/set.
       * @param {Object} value Optional object value to set.
       * @return {tinymce.ui.Collection} Current collection instance or value of the first item on a get operation.
       */
      prop: function (name, value) {
        var self = this, undef, item;

        if (value !== undef) {
          self.each(function (item) {
            if (item[name]) {
              item[name](value);
            }
          });

          return self;
        }

        item = self[0];

        if (item && item[name]) {
          return item[name]();
        }
      },

      /**
       * Executes the specific function name with optional arguments an all items in collection if it exists.
       *
       * @example collection.exec("myMethod", arg1, arg2, arg3);
       * @method exec
       * @param {String} name Name of the function to execute.
       * @param {Object} ... Multiple arguments to pass to each function.
       * @return {tinymce.ui.Collection} Current collection.
       */
      exec: function (name) {
        var self = this, args = Tools.toArray(arguments).slice(1);

        self.each(function (item) {
          if (item[name]) {
            item[name].apply(item, args);
          }
        });

        return self;
      },

      /**
       * Remove all items from collection and DOM.
       *
       * @method remove
       * @return {tinymce.ui.Collection} Current collection.
       */
      remove: function () {
        var i = this.length;

        while (i--) {
          this[i].remove();
        }

        return this;
      },

      /**
       * Adds a class to all items in the collection.
       *
       * @method addClass
       * @param {String} cls Class to add to each item.
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      addClass: function (cls) {
        return this.each(function (item) {
          item.classes.add(cls);
        });
      },

      /**
       * Removes the specified class from all items in collection.
       *
       * @method removeClass
       * @param {String} cls Class to remove from each item.
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      removeClass: function (cls) {
        return this.each(function (item) {
          item.classes.remove(cls);
        });
      }

      /**
       * Fires the specified event by name and arguments on the control. This will execute all
       * bound event handlers.
       *
       * @method fire
       * @param {String} name Name of the event to fire.
       * @param {Object} args Optional arguments to pass to the event.
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      // fire: function(event, args) {}, -- Generated by code below

      /**
       * Binds a callback to the specified event. This event can both be
       * native browser events like "click" or custom ones like PostRender.
       *
       * The callback function will have two parameters the first one being the control that received the event
       * the second one will be the event object either the browsers native event object or a custom JS object.
       *
       * @method on
       * @param {String} name Name of the event to bind. For example "click".
       * @param {String/function} callback Callback function to execute ones the event occurs.
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      // on: function(name, callback) {}, -- Generated by code below

      /**
       * Unbinds the specified event and optionally a specific callback. If you omit the name
       * parameter all event handlers will be removed. If you omit the callback all event handles
       * by the specified name will be removed.
       *
       * @method off
       * @param {String} name Optional name for the event to unbind.
       * @param {function} callback Optional callback function to unbind.
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      // off: function(name, callback) {}, -- Generated by code below

      /**
       * Shows the items in the current collection.
       *
       * @method show
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      // show: function() {}, -- Generated by code below

      /**
       * Hides the items in the current collection.
       *
       * @method hide
       * @return {tinymce.ui.Collection} Current collection instance.
       */
      // hide: function() {}, -- Generated by code below

      /**
       * Sets/gets the text contents of the items in the current collection.
       *
       * @method text
       * @return {tinymce.ui.Collection} Current collection instance or text value of the first item on a get operation.
       */
      // text: function(value) {}, -- Generated by code below

      /**
       * Sets/gets the name contents of the items in the current collection.
       *
       * @method name
       * @return {tinymce.ui.Collection} Current collection instance or name value of the first item on a get operation.
       */
      // name: function(value) {}, -- Generated by code below

      /**
       * Sets/gets the disabled state on the items in the current collection.
       *
       * @method disabled
       * @return {tinymce.ui.Collection} Current collection instance or disabled state of the first item on a get operation.
       */
      // disabled: function(state) {}, -- Generated by code below

      /**
       * Sets/gets the active state on the items in the current collection.
       *
       * @method active
       * @return {tinymce.ui.Collection} Current collection instance or active state of the first item on a get operation.
       */
      // active: function(state) {}, -- Generated by code below

      /**
       * Sets/gets the selected state on the items in the current collection.
       *
       * @method selected
       * @return {tinymce.ui.Collection} Current collection instance or selected state of the first item on a get operation.
       */
      // selected: function(state) {}, -- Generated by code below

      /**
       * Sets/gets the selected state on the items in the current collection.
       *
       * @method visible
       * @return {tinymce.ui.Collection} Current collection instance or visible state of the first item on a get operation.
       */
      // visible: function(state) {}, -- Generated by code below
    };

    // Extend tinymce.ui.Collection prototype with some generated control specific methods
    Tools.each('fire on off show hide append prepend before after reflow'.split(' '), function (name) {
      proto[name] = function () {
        var args = Tools.toArray(arguments);

        this.each(function (ctrl) {
          if (name in ctrl) {
            ctrl[name].apply(ctrl, args);
          }
        });

        return this;
      };
    });

    // Extend tinymce.ui.Collection prototype with some property methods
    Tools.each('text name disabled active selected checked visible parent value data'.split(' '), function (name) {
      proto[name] = function (value) {
        return this.prop(name, value);
      };
    });

    // Create class based on the new prototype
    Collection = Class.extend(proto);

    // Stick Collection into Selector to prevent circual references
    Selector.Collection = Collection;

    return Collection;
  }
);
/**
 * DomUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Private UI DomUtils proxy.
 *
 * @private
 * @class tinymce.ui.DomUtils
 */
define(
  'tinymce.core.ui.DomUtils',
  [
    "tinymce.core.Env",
    "tinymce.core.util.Tools",
    "tinymce.core.dom.DOMUtils"
  ],
  function (Env, Tools, DOMUtils) {
    "use strict";

    var count = 0;

    var funcs = {
      id: function () {
        return 'mceu_' + (count++);
      },

      create: function (name, attrs, children) {
        var elm = document.createElement(name);

        DOMUtils.DOM.setAttribs(elm, attrs);

        if (typeof children === 'string') {
          elm.innerHTML = children;
        } else {
          Tools.each(children, function (child) {
            if (child.nodeType) {
              elm.appendChild(child);
            }
          });
        }

        return elm;
      },

      createFragment: function (html) {
        return DOMUtils.DOM.createFragment(html);
      },

      getWindowSize: function () {
        return DOMUtils.DOM.getViewPort();
      },

      getSize: function (elm) {
        var width, height;

        if (elm.getBoundingClientRect) {
          var rect = elm.getBoundingClientRect();

          width = Math.max(rect.width || (rect.right - rect.left), elm.offsetWidth);
          height = Math.max(rect.height || (rect.bottom - rect.bottom), elm.offsetHeight);
        } else {
          width = elm.offsetWidth;
          height = elm.offsetHeight;
        }

        return { width: width, height: height };
      },

      getPos: function (elm, root) {
        return DOMUtils.DOM.getPos(elm, root || funcs.getContainer());
      },

      getContainer: function () {
        return Env.container ? Env.container : document.body;
      },

      getViewPort: function (win) {
        return DOMUtils.DOM.getViewPort(win);
      },

      get: function (id) {
        return document.getElementById(id);
      },

      addClass: function (elm, cls) {
        return DOMUtils.DOM.addClass(elm, cls);
      },

      removeClass: function (elm, cls) {
        return DOMUtils.DOM.removeClass(elm, cls);
      },

      hasClass: function (elm, cls) {
        return DOMUtils.DOM.hasClass(elm, cls);
      },

      toggleClass: function (elm, cls, state) {
        return DOMUtils.DOM.toggleClass(elm, cls, state);
      },

      css: function (elm, name, value) {
        return DOMUtils.DOM.setStyle(elm, name, value);
      },

      getRuntimeStyle: function (elm, name) {
        return DOMUtils.DOM.getStyle(elm, name, true);
      },

      on: function (target, name, callback, scope) {
        return DOMUtils.DOM.bind(target, name, callback, scope);
      },

      off: function (target, name, callback) {
        return DOMUtils.DOM.unbind(target, name, callback);
      },

      fire: function (target, name, args) {
        return DOMUtils.DOM.fire(target, name, args);
      },

      innerHtml: function (elm, html) {
        // Workaround for <div> in <p> bug on IE 8 #6178
        DOMUtils.DOM.setHTML(elm, html);
      }
    };

    return funcs;
  }
);
/**
 * BoxUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Utility class for box parsing and measuring.
 *
 * @private
 * @class tinymce.ui.BoxUtils
 */
define(
  'tinymce.core.ui.BoxUtils',
  [
  ],
  function () {
    "use strict";

    return {
      /**
       * Parses the specified box value. A box value contains 1-4 properties in clockwise order.
       *
       * @method parseBox
       * @param {String/Number} value Box value "0 1 2 3" or "0" etc.
       * @return {Object} Object with top/right/bottom/left properties.
       * @private
       */
      parseBox: function (value) {
        var len, radix = 10;

        if (!value) {
          return;
        }

        if (typeof value === "number") {
          value = value || 0;

          return {
            top: value,
            left: value,
            bottom: value,
            right: value
          };
        }

        value = value.split(' ');
        len = value.length;

        if (len === 1) {
          value[1] = value[2] = value[3] = value[0];
        } else if (len === 2) {
          value[2] = value[0];
          value[3] = value[1];
        } else if (len === 3) {
          value[3] = value[1];
        }

        return {
          top: parseInt(value[0], radix) || 0,
          right: parseInt(value[1], radix) || 0,
          bottom: parseInt(value[2], radix) || 0,
          left: parseInt(value[3], radix) || 0
        };
      },

      measureBox: function (elm, prefix) {
        function getStyle(name) {
          var defaultView = document.defaultView;

          if (defaultView) {
            // Remove camelcase
            name = name.replace(/[A-Z]/g, function (a) {
              return '-' + a;
            });

            return defaultView.getComputedStyle(elm, null).getPropertyValue(name);
          }

          return elm.currentStyle[name];
        }

        function getSide(name) {
          var val = parseFloat(getStyle(name), 10);

          return isNaN(val) ? 0 : val;
        }

        return {
          top: getSide(prefix + "TopWidth"),
          right: getSide(prefix + "RightWidth"),
          bottom: getSide(prefix + "BottomWidth"),
          left: getSide(prefix + "LeftWidth")
        };
      }
    };
  }
);

/**
 * ClassList.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Handles adding and removal of classes.
 *
 * @private
 * @class tinymce.ui.ClassList
 */
define(
  'tinymce.core.ui.ClassList',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    "use strict";

    function noop() {
    }

    /**
     * Constructs a new class list the specified onchange
     * callback will be executed when the class list gets modifed.
     *
     * @constructor ClassList
     * @param {function} onchange Onchange callback to be executed.
     */
    function ClassList(onchange) {
      this.cls = [];
      this.cls._map = {};
      this.onchange = onchange || noop;
      this.prefix = '';
    }

    Tools.extend(ClassList.prototype, {
      /**
       * Adds a new class to the class list.
       *
       * @method add
       * @param {String} cls Class to be added.
       * @return {tinymce.ui.ClassList} Current class list instance.
       */
      add: function (cls) {
        if (cls && !this.contains(cls)) {
          this.cls._map[cls] = true;
          this.cls.push(cls);
          this._change();
        }

        return this;
      },

      /**
       * Removes the specified class from the class list.
       *
       * @method remove
       * @param {String} cls Class to be removed.
       * @return {tinymce.ui.ClassList} Current class list instance.
       */
      remove: function (cls) {
        if (this.contains(cls)) {
          for (var i = 0; i < this.cls.length; i++) {
            if (this.cls[i] === cls) {
              break;
            }
          }

          this.cls.splice(i, 1);
          delete this.cls._map[cls];
          this._change();
        }

        return this;
      },

      /**
       * Toggles a class in the class list.
       *
       * @method toggle
       * @param {String} cls Class to be added/removed.
       * @param {Boolean} state Optional state if it should be added/removed.
       * @return {tinymce.ui.ClassList} Current class list instance.
       */
      toggle: function (cls, state) {
        var curState = this.contains(cls);

        if (curState !== state) {
          if (curState) {
            this.remove(cls);
          } else {
            this.add(cls);
          }

          this._change();
        }

        return this;
      },

      /**
       * Returns true if the class list has the specified class.
       *
       * @method contains
       * @param {String} cls Class to look for.
       * @return {Boolean} true/false if the class exists or not.
       */
      contains: function (cls) {
        return !!this.cls._map[cls];
      },

      /**
       * Returns a space separated list of classes.
       *
       * @method toString
       * @return {String} Space separated list of classes.
       */

      _change: function () {
        delete this.clsValue;
        this.onchange.call(this);
      }
    });

    // IE 8 compatibility
    ClassList.prototype.toString = function () {
      var value;

      if (this.clsValue) {
        return this.clsValue;
      }

      value = '';
      for (var i = 0; i < this.cls.length; i++) {
        if (i > 0) {
          value += ' ';
        }

        value += this.prefix + this.cls[i];
      }

      return value;
    };

    return ClassList;
  }
);
/**
 * ReflowQueue.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class will automatically reflow controls on the next animation frame within a few milliseconds on older browsers.
 * If the user manually reflows then the automatic reflow will be cancelled. This class is used internally when various control states
 * changes that triggers a reflow.
 *
 * @class tinymce.ui.ReflowQueue
 * @static
 */
define(
  'tinymce.core.ui.ReflowQueue',
  [
    "tinymce.core.util.Delay"
  ],
  function (Delay) {
    var dirtyCtrls = {}, animationFrameRequested;

    return {
      /**
       * Adds a control to the next automatic reflow call. This is the control that had a state
       * change for example if the control was hidden/shown.
       *
       * @method add
       * @param {tinymce.ui.Control} ctrl Control to add to queue.
       */
      add: function (ctrl) {
        var parent = ctrl.parent();

        if (parent) {
          if (!parent._layout || parent._layout.isNative()) {
            return;
          }

          if (!dirtyCtrls[parent._id]) {
            dirtyCtrls[parent._id] = parent;
          }

          if (!animationFrameRequested) {
            animationFrameRequested = true;

            Delay.requestAnimationFrame(function () {
              var id, ctrl;

              animationFrameRequested = false;

              for (id in dirtyCtrls) {
                ctrl = dirtyCtrls[id];

                if (ctrl.state.get('rendered')) {
                  ctrl.reflow();
                }
              }

              dirtyCtrls = {};
            }, document.body);
          }
        }
      },

      /**
       * Removes the specified control from the automatic reflow. This will happen when for example the user
       * manually triggers a reflow.
       *
       * @method remove
       * @param {tinymce.ui.Control} ctrl Control to remove from queue.
       */
      remove: function (ctrl) {
        if (dirtyCtrls[ctrl._id]) {
          delete dirtyCtrls[ctrl._id];
        }
      }
    };
  }
);

/**
 * Control.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*eslint consistent-this:0 */

/**
 * This is the base class for all controls and containers. All UI control instances inherit
 * from this one as it has the base logic needed by all of them.
 *
 * @class tinymce.ui.Control
 */
define(
  'tinymce.core.ui.Control',
  [
    "tinymce.core.util.Class",
    "tinymce.core.util.Tools",
    "tinymce.core.util.EventDispatcher",
    "tinymce.core.data.ObservableObject",
    "tinymce.core.ui.Collection",
    "tinymce.core.ui.DomUtils",
    "tinymce.core.dom.DomQuery",
    "tinymce.core.ui.BoxUtils",
    "tinymce.core.ui.ClassList",
    "tinymce.core.ui.ReflowQueue"
  ],
  function (Class, Tools, EventDispatcher, ObservableObject, Collection, DomUtils, $, BoxUtils, ClassList, ReflowQueue) {
    "use strict";

    var hasMouseWheelEventSupport = "onmousewheel" in document;
    var hasWheelEventSupport = false;
    var classPrefix = "mce-";
    var Control, idCounter = 0;

    var proto = {
      Statics: {
        classPrefix: classPrefix
      },

      isRtl: function () {
        return Control.rtl;
      },

      /**
       * Class/id prefix to use for all controls.
       *
       * @final
       * @field {String} classPrefix
       */
      classPrefix: classPrefix,

      /**
       * Constructs a new control instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {String} style Style CSS properties to add.
       * @setting {String} border Border box values example: 1 1 1 1
       * @setting {String} padding Padding box values example: 1 1 1 1
       * @setting {String} margin Margin box values example: 1 1 1 1
       * @setting {Number} minWidth Minimal width for the control.
       * @setting {Number} minHeight Minimal height for the control.
       * @setting {String} classes Space separated list of classes to add.
       * @setting {String} role WAI-ARIA role to use for control.
       * @setting {Boolean} hidden Is the control hidden by default.
       * @setting {Boolean} disabled Is the control disabled by default.
       * @setting {String} name Name of the control instance.
       */
      init: function (settings) {
        var self = this, classes, defaultClasses;

        function applyClasses(classes) {
          var i;

          classes = classes.split(' ');
          for (i = 0; i < classes.length; i++) {
            self.classes.add(classes[i]);
          }
        }

        self.settings = settings = Tools.extend({}, self.Defaults, settings);

        // Initial states
        self._id = settings.id || ('mceu_' + (idCounter++));
        self._aria = { role: settings.role };
        self._elmCache = {};
        self.$ = $;

        self.state = new ObservableObject({
          visible: true,
          active: false,
          disabled: false,
          value: ''
        });

        self.data = new ObservableObject(settings.data);

        self.classes = new ClassList(function () {
          if (self.state.get('rendered')) {
            self.getEl().className = this.toString();
          }
        });
        self.classes.prefix = self.classPrefix;

        // Setup classes
        classes = settings.classes;
        if (classes) {
          if (self.Defaults) {
            defaultClasses = self.Defaults.classes;

            if (defaultClasses && classes != defaultClasses) {
              applyClasses(defaultClasses);
            }
          }

          applyClasses(classes);
        }

        Tools.each('title text name visible disabled active value'.split(' '), function (name) {
          if (name in settings) {
            self[name](settings[name]);
          }
        });

        self.on('click', function () {
          if (self.disabled()) {
            return false;
          }
        });

        /**
         * Name/value object with settings for the current control.
         *
         * @field {Object} settings
         */
        self.settings = settings;

        self.borderBox = BoxUtils.parseBox(settings.border);
        self.paddingBox = BoxUtils.parseBox(settings.padding);
        self.marginBox = BoxUtils.parseBox(settings.margin);

        if (settings.hidden) {
          self.hide();
        }
      },

      // Will generate getter/setter methods for these properties
      Properties: 'parent,name',

      /**
       * Returns the root element to render controls into.
       *
       * @method getContainerElm
       * @return {Element} HTML DOM element to render into.
       */
      getContainerElm: function () {
        return DomUtils.getContainer();
      },

      /**
       * Returns a control instance for the current DOM element.
       *
       * @method getParentCtrl
       * @param {Element} elm HTML dom element to get parent control from.
       * @return {tinymce.ui.Control} Control instance or undefined.
       */
      getParentCtrl: function (elm) {
        var ctrl, lookup = this.getRoot().controlIdLookup;

        while (elm && lookup) {
          ctrl = lookup[elm.id];
          if (ctrl) {
            break;
          }

          elm = elm.parentNode;
        }

        return ctrl;
      },

      /**
       * Initializes the current controls layout rect.
       * This will be executed by the layout managers to determine the
       * default minWidth/minHeight etc.
       *
       * @method initLayoutRect
       * @return {Object} Layout rect instance.
       */
      initLayoutRect: function () {
        var self = this, settings = self.settings, borderBox, layoutRect;
        var elm = self.getEl(), width, height, minWidth, minHeight, autoResize;
        var startMinWidth, startMinHeight, initialSize;

        // Measure the current element
        borderBox = self.borderBox = self.borderBox || BoxUtils.measureBox(elm, 'border');
        self.paddingBox = self.paddingBox || BoxUtils.measureBox(elm, 'padding');
        self.marginBox = self.marginBox || BoxUtils.measureBox(elm, 'margin');
        initialSize = DomUtils.getSize(elm);

        // Setup minWidth/minHeight and width/height
        startMinWidth = settings.minWidth;
        startMinHeight = settings.minHeight;
        minWidth = startMinWidth || initialSize.width;
        minHeight = startMinHeight || initialSize.height;
        width = settings.width;
        height = settings.height;
        autoResize = settings.autoResize;
        autoResize = typeof autoResize != "undefined" ? autoResize : !width && !height;

        width = width || minWidth;
        height = height || minHeight;

        var deltaW = borderBox.left + borderBox.right;
        var deltaH = borderBox.top + borderBox.bottom;

        var maxW = settings.maxWidth || 0xFFFF;
        var maxH = settings.maxHeight || 0xFFFF;

        // Setup initial layout rect
        self._layoutRect = layoutRect = {
          x: settings.x || 0,
          y: settings.y || 0,
          w: width,
          h: height,
          deltaW: deltaW,
          deltaH: deltaH,
          contentW: width - deltaW,
          contentH: height - deltaH,
          innerW: width - deltaW,
          innerH: height - deltaH,
          startMinWidth: startMinWidth || 0,
          startMinHeight: startMinHeight || 0,
          minW: Math.min(minWidth, maxW),
          minH: Math.min(minHeight, maxH),
          maxW: maxW,
          maxH: maxH,
          autoResize: autoResize,
          scrollW: 0
        };

        self._lastLayoutRect = {};

        return layoutRect;
      },

      /**
       * Getter/setter for the current layout rect.
       *
       * @method layoutRect
       * @param {Object} [newRect] Optional new layout rect.
       * @return {tinymce.ui.Control/Object} Current control or rect object.
       */
      layoutRect: function (newRect) {
        var self = this, curRect = self._layoutRect, lastLayoutRect, size, deltaWidth, deltaHeight, undef, repaintControls;

        // Initialize default layout rect
        if (!curRect) {
          curRect = self.initLayoutRect();
        }

        // Set new rect values
        if (newRect) {
          // Calc deltas between inner and outer sizes
          deltaWidth = curRect.deltaW;
          deltaHeight = curRect.deltaH;

          // Set x position
          if (newRect.x !== undef) {
            curRect.x = newRect.x;
          }

          // Set y position
          if (newRect.y !== undef) {
            curRect.y = newRect.y;
          }

          // Set minW
          if (newRect.minW !== undef) {
            curRect.minW = newRect.minW;
          }

          // Set minH
          if (newRect.minH !== undef) {
            curRect.minH = newRect.minH;
          }

          // Set new width and calculate inner width
          size = newRect.w;
          if (size !== undef) {
            size = size < curRect.minW ? curRect.minW : size;
            size = size > curRect.maxW ? curRect.maxW : size;
            curRect.w = size;
            curRect.innerW = size - deltaWidth;
          }

          // Set new height and calculate inner height
          size = newRect.h;
          if (size !== undef) {
            size = size < curRect.minH ? curRect.minH : size;
            size = size > curRect.maxH ? curRect.maxH : size;
            curRect.h = size;
            curRect.innerH = size - deltaHeight;
          }

          // Set new inner width and calculate width
          size = newRect.innerW;
          if (size !== undef) {
            size = size < curRect.minW - deltaWidth ? curRect.minW - deltaWidth : size;
            size = size > curRect.maxW - deltaWidth ? curRect.maxW - deltaWidth : size;
            curRect.innerW = size;
            curRect.w = size + deltaWidth;
          }

          // Set new height and calculate inner height
          size = newRect.innerH;
          if (size !== undef) {
            size = size < curRect.minH - deltaHeight ? curRect.minH - deltaHeight : size;
            size = size > curRect.maxH - deltaHeight ? curRect.maxH - deltaHeight : size;
            curRect.innerH = size;
            curRect.h = size + deltaHeight;
          }

          // Set new contentW
          if (newRect.contentW !== undef) {
            curRect.contentW = newRect.contentW;
          }

          // Set new contentH
          if (newRect.contentH !== undef) {
            curRect.contentH = newRect.contentH;
          }

          // Compare last layout rect with the current one to see if we need to repaint or not
          lastLayoutRect = self._lastLayoutRect;
          if (lastLayoutRect.x !== curRect.x || lastLayoutRect.y !== curRect.y ||
            lastLayoutRect.w !== curRect.w || lastLayoutRect.h !== curRect.h) {
            repaintControls = Control.repaintControls;

            if (repaintControls) {
              if (repaintControls.map && !repaintControls.map[self._id]) {
                repaintControls.push(self);
                repaintControls.map[self._id] = true;
              }
            }

            lastLayoutRect.x = curRect.x;
            lastLayoutRect.y = curRect.y;
            lastLayoutRect.w = curRect.w;
            lastLayoutRect.h = curRect.h;
          }

          return self;
        }

        return curRect;
      },

      /**
       * Repaints the control after a layout operation.
       *
       * @method repaint
       */
      repaint: function () {
        var self = this, style, bodyStyle, bodyElm, rect, borderBox;
        var borderW, borderH, lastRepaintRect, round, value;

        // Use Math.round on all values on IE < 9
        round = !document.createRange ? Math.round : function (value) {
          return value;
        };

        style = self.getEl().style;
        rect = self._layoutRect;
        lastRepaintRect = self._lastRepaintRect || {};

        borderBox = self.borderBox;
        borderW = borderBox.left + borderBox.right;
        borderH = borderBox.top + borderBox.bottom;

        if (rect.x !== lastRepaintRect.x) {
          style.left = round(rect.x) + 'px';
          lastRepaintRect.x = rect.x;
        }

        if (rect.y !== lastRepaintRect.y) {
          style.top = round(rect.y) + 'px';
          lastRepaintRect.y = rect.y;
        }

        if (rect.w !== lastRepaintRect.w) {
          value = round(rect.w - borderW);
          style.width = (value >= 0 ? value : 0) + 'px';
          lastRepaintRect.w = rect.w;
        }

        if (rect.h !== lastRepaintRect.h) {
          value = round(rect.h - borderH);
          style.height = (value >= 0 ? value : 0) + 'px';
          lastRepaintRect.h = rect.h;
        }

        // Update body if needed
        if (self._hasBody && rect.innerW !== lastRepaintRect.innerW) {
          value = round(rect.innerW);

          bodyElm = self.getEl('body');
          if (bodyElm) {
            bodyStyle = bodyElm.style;
            bodyStyle.width = (value >= 0 ? value : 0) + 'px';
          }

          lastRepaintRect.innerW = rect.innerW;
        }

        if (self._hasBody && rect.innerH !== lastRepaintRect.innerH) {
          value = round(rect.innerH);

          bodyElm = bodyElm || self.getEl('body');
          if (bodyElm) {
            bodyStyle = bodyStyle || bodyElm.style;
            bodyStyle.height = (value >= 0 ? value : 0) + 'px';
          }

          lastRepaintRect.innerH = rect.innerH;
        }

        self._lastRepaintRect = lastRepaintRect;
        self.fire('repaint', {}, false);
      },

      /**
       * Updates the controls layout rect by re-measuing it.
       */
      updateLayoutRect: function () {
        var self = this;

        self.parent()._lastRect = null;

        DomUtils.css(self.getEl(), { width: '', height: '' });

        self._layoutRect = self._lastRepaintRect = self._lastLayoutRect = null;
        self.initLayoutRect();
      },

      /**
       * Binds a callback to the specified event. This event can both be
       * native browser events like "click" or custom ones like PostRender.
       *
       * The callback function will be passed a DOM event like object that enables yout do stop propagation.
       *
       * @method on
       * @param {String} name Name of the event to bind. For example "click".
       * @param {String/function} callback Callback function to execute ones the event occurs.
       * @return {tinymce.ui.Control} Current control object.
       */
      on: function (name, callback) {
        var self = this;

        function resolveCallbackName(name) {
          var callback, scope;

          if (typeof name != 'string') {
            return name;
          }

          return function (e) {
            if (!callback) {
              self.parentsAndSelf().each(function (ctrl) {
                var callbacks = ctrl.settings.callbacks;

                if (callbacks && (callback = callbacks[name])) {
                  scope = ctrl;
                  return false;
                }
              });
            }

            if (!callback) {
              e.action = name;
              this.fire('execute', e);
              return;
            }

            return callback.call(scope, e);
          };
        }

        getEventDispatcher(self).on(name, resolveCallbackName(callback));

        return self;
      },

      /**
       * Unbinds the specified event and optionally a specific callback. If you omit the name
       * parameter all event handlers will be removed. If you omit the callback all event handles
       * by the specified name will be removed.
       *
       * @method off
       * @param {String} [name] Name for the event to unbind.
       * @param {function} [callback] Callback function to unbind.
       * @return {tinymce.ui.Control} Current control object.
       */
      off: function (name, callback) {
        getEventDispatcher(this).off(name, callback);
        return this;
      },

      /**
       * Fires the specified event by name and arguments on the control. This will execute all
       * bound event handlers.
       *
       * @method fire
       * @param {String} name Name of the event to fire.
       * @param {Object} [args] Arguments to pass to the event.
       * @param {Boolean} [bubble] Value to control bubbling. Defaults to true.
       * @return {Object} Current arguments object.
       */
      fire: function (name, args, bubble) {
        var self = this;

        args = args || {};

        if (!args.control) {
          args.control = self;
        }

        args = getEventDispatcher(self).fire(name, args);

        // Bubble event up to parents
        if (bubble !== false && self.parent) {
          var parent = self.parent();
          while (parent && !args.isPropagationStopped()) {
            parent.fire(name, args, false);
            parent = parent.parent();
          }
        }

        return args;
      },

      /**
       * Returns true/false if the specified event has any listeners.
       *
       * @method hasEventListeners
       * @param {String} name Name of the event to check for.
       * @return {Boolean} True/false state if the event has listeners.
       */
      hasEventListeners: function (name) {
        return getEventDispatcher(this).has(name);
      },

      /**
       * Returns a control collection with all parent controls.
       *
       * @method parents
       * @param {String} selector Optional selector expression to find parents.
       * @return {tinymce.ui.Collection} Collection with all parent controls.
       */
      parents: function (selector) {
        var self = this, ctrl, parents = new Collection();

        // Add each parent to collection
        for (ctrl = self.parent(); ctrl; ctrl = ctrl.parent()) {
          parents.add(ctrl);
        }

        // Filter away everything that doesn't match the selector
        if (selector) {
          parents = parents.filter(selector);
        }

        return parents;
      },

      /**
       * Returns the current control and it's parents.
       *
       * @method parentsAndSelf
       * @param {String} selector Optional selector expression to find parents.
       * @return {tinymce.ui.Collection} Collection with all parent controls.
       */
      parentsAndSelf: function (selector) {
        return new Collection(this).add(this.parents(selector));
      },

      /**
       * Returns the control next to the current control.
       *
       * @method next
       * @return {tinymce.ui.Control} Next control instance.
       */
      next: function () {
        var parentControls = this.parent().items();

        return parentControls[parentControls.indexOf(this) + 1];
      },

      /**
       * Returns the control previous to the current control.
       *
       * @method prev
       * @return {tinymce.ui.Control} Previous control instance.
       */
      prev: function () {
        var parentControls = this.parent().items();

        return parentControls[parentControls.indexOf(this) - 1];
      },

      /**
       * Sets the inner HTML of the control element.
       *
       * @method innerHtml
       * @param {String} html Html string to set as inner html.
       * @return {tinymce.ui.Control} Current control object.
       */
      innerHtml: function (html) {
        this.$el.html(html);
        return this;
      },

      /**
       * Returns the control DOM element or sub element.
       *
       * @method getEl
       * @param {String} [suffix] Suffix to get element by.
       * @return {Element} HTML DOM element for the current control or it's children.
       */
      getEl: function (suffix) {
        var id = suffix ? this._id + '-' + suffix : this._id;

        if (!this._elmCache[id]) {
          this._elmCache[id] = $('#' + id)[0];
        }

        return this._elmCache[id];
      },

      /**
       * Sets the visible state to true.
       *
       * @method show
       * @return {tinymce.ui.Control} Current control instance.
       */
      show: function () {
        return this.visible(true);
      },

      /**
       * Sets the visible state to false.
       *
       * @method hide
       * @return {tinymce.ui.Control} Current control instance.
       */
      hide: function () {
        return this.visible(false);
      },

      /**
       * Focuses the current control.
       *
       * @method focus
       * @return {tinymce.ui.Control} Current control instance.
       */
      focus: function () {
        try {
          this.getEl().focus();
        } catch (ex) {
          // Ignore IE error
        }

        return this;
      },

      /**
       * Blurs the current control.
       *
       * @method blur
       * @return {tinymce.ui.Control} Current control instance.
       */
      blur: function () {
        this.getEl().blur();

        return this;
      },

      /**
       * Sets the specified aria property.
       *
       * @method aria
       * @param {String} name Name of the aria property to set.
       * @param {String} value Value of the aria property.
       * @return {tinymce.ui.Control} Current control instance.
       */
      aria: function (name, value) {
        var self = this, elm = self.getEl(self.ariaTarget);

        if (typeof value === "undefined") {
          return self._aria[name];
        }

        self._aria[name] = value;

        if (self.state.get('rendered')) {
          elm.setAttribute(name == 'role' ? name : 'aria-' + name, value);
        }

        return self;
      },

      /**
       * Encodes the specified string with HTML entities. It will also
       * translate the string to different languages.
       *
       * @method encode
       * @param {String/Object/Array} text Text to entity encode.
       * @param {Boolean} [translate=true] False if the contents shouldn't be translated.
       * @return {String} Encoded and possible traslated string.
       */
      encode: function (text, translate) {
        if (translate !== false) {
          text = this.translate(text);
        }

        return (text || '').replace(/[&<>"]/g, function (match) {
          return '&#' + match.charCodeAt(0) + ';';
        });
      },

      /**
       * Returns the translated string.
       *
       * @method translate
       * @param {String} text Text to translate.
       * @return {String} Translated string or the same as the input.
       */
      translate: function (text) {
        return Control.translate ? Control.translate(text) : text;
      },

      /**
       * Adds items before the current control.
       *
       * @method before
       * @param {Array/tinymce.ui.Collection} items Array of items to prepend before this control.
       * @return {tinymce.ui.Control} Current control instance.
       */
      before: function (items) {
        var self = this, parent = self.parent();

        if (parent) {
          parent.insert(items, parent.items().indexOf(self), true);
        }

        return self;
      },

      /**
       * Adds items after the current control.
       *
       * @method after
       * @param {Array/tinymce.ui.Collection} items Array of items to append after this control.
       * @return {tinymce.ui.Control} Current control instance.
       */
      after: function (items) {
        var self = this, parent = self.parent();

        if (parent) {
          parent.insert(items, parent.items().indexOf(self));
        }

        return self;
      },

      /**
       * Removes the current control from DOM and from UI collections.
       *
       * @method remove
       * @return {tinymce.ui.Control} Current control instance.
       */
      remove: function () {
        var self = this, elm = self.getEl(), parent = self.parent(), newItems, i;

        if (self.items) {
          var controls = self.items().toArray();
          i = controls.length;
          while (i--) {
            controls[i].remove();
          }
        }

        if (parent && parent.items) {
          newItems = [];

          parent.items().each(function (item) {
            if (item !== self) {
              newItems.push(item);
            }
          });

          parent.items().set(newItems);
          parent._lastRect = null;
        }

        if (self._eventsRoot && self._eventsRoot == self) {
          $(elm).off();
        }

        var lookup = self.getRoot().controlIdLookup;
        if (lookup) {
          delete lookup[self._id];
        }

        if (elm && elm.parentNode) {
          elm.parentNode.removeChild(elm);
        }

        self.state.set('rendered', false);
        self.state.destroy();

        self.fire('remove');

        return self;
      },

      /**
       * Renders the control before the specified element.
       *
       * @method renderBefore
       * @param {Element} elm Element to render before.
       * @return {tinymce.ui.Control} Current control instance.
       */
      renderBefore: function (elm) {
        $(elm).before(this.renderHtml());
        this.postRender();
        return this;
      },

      /**
       * Renders the control to the specified element.
       *
       * @method renderBefore
       * @param {Element} elm Element to render to.
       * @return {tinymce.ui.Control} Current control instance.
       */
      renderTo: function (elm) {
        $(elm || this.getContainerElm()).append(this.renderHtml());
        this.postRender();
        return this;
      },

      preRender: function () {
      },

      render: function () {
      },

      renderHtml: function () {
        return '<div id="' + this._id + '" class="' + this.classes + '"></div>';
      },

      /**
       * Post render method. Called after the control has been rendered to the target.
       *
       * @method postRender
       * @return {tinymce.ui.Control} Current control instance.
       */
      postRender: function () {
        var self = this, settings = self.settings, elm, box, parent, name, parentEventsRoot;

        self.$el = $(self.getEl());
        self.state.set('rendered', true);

        // Bind on<event> settings
        for (name in settings) {
          if (name.indexOf("on") === 0) {
            self.on(name.substr(2), settings[name]);
          }
        }

        if (self._eventsRoot) {
          for (parent = self.parent(); !parentEventsRoot && parent; parent = parent.parent()) {
            parentEventsRoot = parent._eventsRoot;
          }

          if (parentEventsRoot) {
            for (name in parentEventsRoot._nativeEvents) {
              self._nativeEvents[name] = true;
            }
          }
        }

        bindPendingEvents(self);

        if (settings.style) {
          elm = self.getEl();
          if (elm) {
            elm.setAttribute('style', settings.style);
            elm.style.cssText = settings.style;
          }
        }

        if (self.settings.border) {
          box = self.borderBox;
          self.$el.css({
            'border-top-width': box.top,
            'border-right-width': box.right,
            'border-bottom-width': box.bottom,
            'border-left-width': box.left
          });
        }

        // Add instance to lookup
        var root = self.getRoot();
        if (!root.controlIdLookup) {
          root.controlIdLookup = {};
        }

        root.controlIdLookup[self._id] = self;

        for (var key in self._aria) {
          self.aria(key, self._aria[key]);
        }

        if (self.state.get('visible') === false) {
          self.getEl().style.display = 'none';
        }

        self.bindStates();

        self.state.on('change:visible', function (e) {
          var state = e.value, parentCtrl;

          if (self.state.get('rendered')) {
            self.getEl().style.display = state === false ? 'none' : '';

            // Need to force a reflow here on IE 8
            self.getEl().getBoundingClientRect();
          }

          // Parent container needs to reflow
          parentCtrl = self.parent();
          if (parentCtrl) {
            parentCtrl._lastRect = null;
          }

          self.fire(state ? 'show' : 'hide');

          ReflowQueue.add(self);
        });

        self.fire('postrender', {}, false);
      },

      bindStates: function () {
      },

      /**
       * Scrolls the current control into view.
       *
       * @method scrollIntoView
       * @param {String} align Alignment in view top|center|bottom.
       * @return {tinymce.ui.Control} Current control instance.
       */
      scrollIntoView: function (align) {
        function getOffset(elm, rootElm) {
          var x, y, parent = elm;

          x = y = 0;
          while (parent && parent != rootElm && parent.nodeType) {
            x += parent.offsetLeft || 0;
            y += parent.offsetTop || 0;
            parent = parent.offsetParent;
          }

          return { x: x, y: y };
        }

        var elm = this.getEl(), parentElm = elm.parentNode;
        var x, y, width, height, parentWidth, parentHeight;
        var pos = getOffset(elm, parentElm);

        x = pos.x;
        y = pos.y;
        width = elm.offsetWidth;
        height = elm.offsetHeight;
        parentWidth = parentElm.clientWidth;
        parentHeight = parentElm.clientHeight;

        if (align == "end") {
          x -= parentWidth - width;
          y -= parentHeight - height;
        } else if (align == "center") {
          x -= (parentWidth / 2) - (width / 2);
          y -= (parentHeight / 2) - (height / 2);
        }

        parentElm.scrollLeft = x;
        parentElm.scrollTop = y;

        return this;
      },

      getRoot: function () {
        var ctrl = this, rootControl, parents = [];

        while (ctrl) {
          if (ctrl.rootControl) {
            rootControl = ctrl.rootControl;
            break;
          }

          parents.push(ctrl);
          rootControl = ctrl;
          ctrl = ctrl.parent();
        }

        if (!rootControl) {
          rootControl = this;
        }

        var i = parents.length;
        while (i--) {
          parents[i].rootControl = rootControl;
        }

        return rootControl;
      },

      /**
       * Reflows the current control and it's parents.
       * This should be used after you for example append children to the current control so
       * that the layout managers know that they need to reposition everything.
       *
       * @example
       * container.append({type: 'button', text: 'My button'}).reflow();
       *
       * @method reflow
       * @return {tinymce.ui.Control} Current control instance.
       */
      reflow: function () {
        ReflowQueue.remove(this);

        var parent = this.parent();
        if (parent && parent._layout && !parent._layout.isNative()) {
          parent.reflow();
        }

        return this;
      }

      /**
       * Sets/gets the parent container for the control.
       *
       * @method parent
       * @param {tinymce.ui.Container} parent Optional parent to set.
       * @return {tinymce.ui.Control} Parent control or the current control on a set action.
       */
      // parent: function(parent) {} -- Generated

      /**
       * Sets/gets the text for the control.
       *
       * @method text
       * @param {String} value Value to set to control.
       * @return {String/tinymce.ui.Control} Current control on a set operation or current value on a get.
       */
      // text: function(value) {} -- Generated

      /**
       * Sets/gets the disabled state on the control.
       *
       * @method disabled
       * @param {Boolean} state Value to set to control.
       * @return {Boolean/tinymce.ui.Control} Current control on a set operation or current state on a get.
       */
      // disabled: function(state) {} -- Generated

      /**
       * Sets/gets the active for the control.
       *
       * @method active
       * @param {Boolean} state Value to set to control.
       * @return {Boolean/tinymce.ui.Control} Current control on a set operation or current state on a get.
       */
      // active: function(state) {} -- Generated

      /**
       * Sets/gets the name for the control.
       *
       * @method name
       * @param {String} value Value to set to control.
       * @return {String/tinymce.ui.Control} Current control on a set operation or current value on a get.
       */
      // name: function(value) {} -- Generated

      /**
       * Sets/gets the title for the control.
       *
       * @method title
       * @param {String} value Value to set to control.
       * @return {String/tinymce.ui.Control} Current control on a set operation or current value on a get.
       */
      // title: function(value) {} -- Generated

      /**
       * Sets/gets the visible for the control.
       *
       * @method visible
       * @param {Boolean} state Value to set to control.
       * @return {Boolean/tinymce.ui.Control} Current control on a set operation or current state on a get.
       */
      // visible: function(value) {} -- Generated
    };

    /**
     * Setup state properties.
     */
    Tools.each('text title visible disabled active value'.split(' '), function (name) {
      proto[name] = function (value) {
        if (arguments.length === 0) {
          return this.state.get(name);
        }

        if (typeof value != "undefined") {
          this.state.set(name, value);
        }

        return this;
      };
    });

    Control = Class.extend(proto);

    function getEventDispatcher(obj) {
      if (!obj._eventDispatcher) {
        obj._eventDispatcher = new EventDispatcher({
          scope: obj,
          toggleEvent: function (name, state) {
            if (state && EventDispatcher.isNative(name)) {
              if (!obj._nativeEvents) {
                obj._nativeEvents = {};
              }

              obj._nativeEvents[name] = true;

              if (obj.state.get('rendered')) {
                bindPendingEvents(obj);
              }
            }
          }
        });
      }

      return obj._eventDispatcher;
    }

    function bindPendingEvents(eventCtrl) {
      var i, l, parents, eventRootCtrl, nativeEvents, name;

      function delegate(e) {
        var control = eventCtrl.getParentCtrl(e.target);

        if (control) {
          control.fire(e.type, e);
        }
      }

      function mouseLeaveHandler() {
        var ctrl = eventRootCtrl._lastHoverCtrl;

        if (ctrl) {
          ctrl.fire("mouseleave", { target: ctrl.getEl() });

          ctrl.parents().each(function (ctrl) {
            ctrl.fire("mouseleave", { target: ctrl.getEl() });
          });

          eventRootCtrl._lastHoverCtrl = null;
        }
      }

      function mouseEnterHandler(e) {
        var ctrl = eventCtrl.getParentCtrl(e.target), lastCtrl = eventRootCtrl._lastHoverCtrl, idx = 0, i, parents, lastParents;

        // Over on a new control
        if (ctrl !== lastCtrl) {
          eventRootCtrl._lastHoverCtrl = ctrl;

          parents = ctrl.parents().toArray().reverse();
          parents.push(ctrl);

          if (lastCtrl) {
            lastParents = lastCtrl.parents().toArray().reverse();
            lastParents.push(lastCtrl);

            for (idx = 0; idx < lastParents.length; idx++) {
              if (parents[idx] !== lastParents[idx]) {
                break;
              }
            }

            for (i = lastParents.length - 1; i >= idx; i--) {
              lastCtrl = lastParents[i];
              lastCtrl.fire("mouseleave", {
                target: lastCtrl.getEl()
              });
            }
          }

          for (i = idx; i < parents.length; i++) {
            ctrl = parents[i];
            ctrl.fire("mouseenter", {
              target: ctrl.getEl()
            });
          }
        }
      }

      function fixWheelEvent(e) {
        e.preventDefault();

        if (e.type == "mousewheel") {
          e.deltaY = -1 / 40 * e.wheelDelta;

          if (e.wheelDeltaX) {
            e.deltaX = -1 / 40 * e.wheelDeltaX;
          }
        } else {
          e.deltaX = 0;
          e.deltaY = e.detail;
        }

        e = eventCtrl.fire("wheel", e);
      }

      nativeEvents = eventCtrl._nativeEvents;
      if (nativeEvents) {
        // Find event root element if it exists
        parents = eventCtrl.parents().toArray();
        parents.unshift(eventCtrl);
        for (i = 0, l = parents.length; !eventRootCtrl && i < l; i++) {
          eventRootCtrl = parents[i]._eventsRoot;
        }

        // Event root wasn't found the use the root control
        if (!eventRootCtrl) {
          eventRootCtrl = parents[parents.length - 1] || eventCtrl;
        }

        // Set the eventsRoot property on children that didn't have it
        eventCtrl._eventsRoot = eventRootCtrl;
        for (l = i, i = 0; i < l; i++) {
          parents[i]._eventsRoot = eventRootCtrl;
        }

        var eventRootDelegates = eventRootCtrl._delegates;
        if (!eventRootDelegates) {
          eventRootDelegates = eventRootCtrl._delegates = {};
        }

        // Bind native event delegates
        for (name in nativeEvents) {
          if (!nativeEvents) {
            return false;
          }

          if (name === "wheel" && !hasWheelEventSupport) {
            if (hasMouseWheelEventSupport) {
              $(eventCtrl.getEl()).on("mousewheel", fixWheelEvent);
            } else {
              $(eventCtrl.getEl()).on("DOMMouseScroll", fixWheelEvent);
            }

            continue;
          }

          // Special treatment for mousenter/mouseleave since these doesn't bubble
          if (name === "mouseenter" || name === "mouseleave") {
            // Fake mousenter/mouseleave
            if (!eventRootCtrl._hasMouseEnter) {
              $(eventRootCtrl.getEl()).on("mouseleave", mouseLeaveHandler).on("mouseover", mouseEnterHandler);
              eventRootCtrl._hasMouseEnter = 1;
            }
          } else if (!eventRootDelegates[name]) {
            $(eventRootCtrl.getEl()).on(name, delegate);
            eventRootDelegates[name] = true;
          }

          // Remove the event once it's bound
          nativeEvents[name] = false;
        }
      }
    }

    return Control;
  }
);

/**
 * Factory.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class is a factory for control instances. This enables you
 * to create instances of controls without having to require the UI controls directly.
 *
 * It also allow you to override or add new control types.
 *
 * @class tinymce.ui.Factory
 */
define(
  'tinymce.core.ui.Factory',
  [
  ],
  function () {
    "use strict";

    var types = {};

    return {
      /**
       * Adds a new control instance type to the factory.
       *
       * @method add
       * @param {String} type Type name for example "button".
       * @param {function} typeClass Class type function.
       */
      add: function (type, typeClass) {
        types[type.toLowerCase()] = typeClass;
      },

      /**
       * Returns true/false if the specified type exists or not.
       *
       * @method has
       * @param {String} type Type to look for.
       * @return {Boolean} true/false if the control by name exists.
       */
      has: function (type) {
        return !!types[type.toLowerCase()];
      },

      /**
       * Creates a new control instance based on the settings provided. The instance created will be
       * based on the specified type property it can also create whole structures of components out of
       * the specified JSON object.
       *
       * @example
       * tinymce.ui.Factory.create({
       *     type: 'button',
       *     text: 'Hello world!'
       * });
       *
       * @method create
       * @param {Object/String} settings Name/Value object with items used to create the type.
       * @return {tinymce.ui.Control} Control instance based on the specified type.
       */
      create: function (type, settings) {
        var ControlType;

        // If string is specified then use it as the type
        if (typeof type == 'string') {
          settings = settings || {};
          settings.type = type;
        } else {
          settings = type;
          type = settings.type;
        }

        // Find control type
        type = type.toLowerCase();
        ControlType = types[type];

        // #if debug

        if (!ControlType) {
          throw new Error("Could not find control by type: " + type);
        }

        // #endif

        ControlType = new ControlType(settings);
        ControlType.type = type; // Set the type on the instance, this will be used by the Selector engine

        return ControlType;
      }
    };
  }
);
/**
 * KeyboardNavigation.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles keyboard navigation of controls and elements.
 *
 * @class tinymce.ui.KeyboardNavigation
 */
define(
  'tinymce.core.ui.KeyboardNavigation',
  [
  ],
  function () {
    "use strict";

    var hasTabstopData = function (elm) {
      return elm.getAttribute('data-mce-tabstop') ? true : false;
    };

    /**
     * This class handles all keyboard navigation for WAI-ARIA support. Each root container
     * gets an instance of this class.
     *
     * @constructor
     */
    return function (settings) {
      var root = settings.root, focusedElement, focusedControl;

      function isElement(node) {
        return node && node.nodeType === 1;
      }

      try {
        focusedElement = document.activeElement;
      } catch (ex) {
        // IE sometimes fails to return a proper element
        focusedElement = document.body;
      }

      focusedControl = root.getParentCtrl(focusedElement);

      /**
       * Returns the currently focused elements wai aria role of the currently
       * focused element or specified element.
       *
       * @private
       * @param {Element} elm Optional element to get role from.
       * @return {String} Role of specified element.
       */
      function getRole(elm) {
        elm = elm || focusedElement;

        if (isElement(elm)) {
          return elm.getAttribute('role');
        }

        return null;
      }

      /**
       * Returns the wai role of the parent element of the currently
       * focused element or specified element.
       *
       * @private
       * @param {Element} elm Optional element to get parent role from.
       * @return {String} Role of the first parent that has a role.
       */
      function getParentRole(elm) {
        var role, parent = elm || focusedElement;

        while ((parent = parent.parentNode)) {
          if ((role = getRole(parent))) {
            return role;
          }
        }
      }

      /**
       * Returns a wai aria property by name for example aria-selected.
       *
       * @private
       * @param {String} name Name of the aria property to get for example "disabled".
       * @return {String} Aria property value.
       */
      function getAriaProp(name) {
        var elm = focusedElement;

        if (isElement(elm)) {
          return elm.getAttribute('aria-' + name);
        }
      }

      /**
       * Is the element a text input element or not.
       *
       * @private
       * @param {Element} elm Element to check if it's an text input element or not.
       * @return {Boolean} True/false if the element is a text element or not.
       */
      function isTextInputElement(elm) {
        var tagName = elm.tagName.toUpperCase();

        // Notice: since type can be "email" etc we don't check the type
        // So all input elements gets treated as text input elements
        return tagName == "INPUT" || tagName == "TEXTAREA" || tagName == "SELECT";
      }

      /**
       * Returns true/false if the specified element can be focused or not.
       *
       * @private
       * @param {Element} elm DOM element to check if it can be focused or not.
       * @return {Boolean} True/false if the element can have focus.
       */
      function canFocus(elm) {
        if (isTextInputElement(elm) && !elm.hidden) {
          return true;
        }

        if (hasTabstopData(elm)) {
          return true;
        }

        if (/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(getRole(elm))) {
          return true;
        }

        return false;
      }

      /**
       * Returns an array of focusable visible elements within the specified container element.
       *
       * @private
       * @param {Element} elm DOM element to find focusable elements within.
       * @return {Array} Array of focusable elements.
       */
      function getFocusElements(elm) {
        var elements = [];

        function collect(elm) {
          if (elm.nodeType != 1 || elm.style.display == 'none' || elm.disabled) {
            return;
          }

          if (canFocus(elm)) {
            elements.push(elm);
          }

          for (var i = 0; i < elm.childNodes.length; i++) {
            collect(elm.childNodes[i]);
          }
        }

        collect(elm || root.getEl());

        return elements;
      }

      /**
       * Returns the navigation root control for the specified control. The navigation root
       * is the control that the keyboard navigation gets scoped to for example a menubar or toolbar group.
       * It will look for parents of the specified target control or the currently focused control if this option is omitted.
       *
       * @private
       * @param {tinymce.ui.Control} targetControl Optional target control to find root of.
       * @return {tinymce.ui.Control} Navigation root control.
       */
      function getNavigationRoot(targetControl) {
        var navigationRoot, controls;

        targetControl = targetControl || focusedControl;
        controls = targetControl.parents().toArray();
        controls.unshift(targetControl);

        for (var i = 0; i < controls.length; i++) {
          navigationRoot = controls[i];

          if (navigationRoot.settings.ariaRoot) {
            break;
          }
        }

        return navigationRoot;
      }

      /**
       * Focuses the first item in the specified targetControl element or the last aria index if the
       * navigation root has the ariaRemember option enabled.
       *
       * @private
       * @param {tinymce.ui.Control} targetControl Target control to focus the first item in.
       */
      function focusFirst(targetControl) {
        var navigationRoot = getNavigationRoot(targetControl);
        var focusElements = getFocusElements(navigationRoot.getEl());

        if (navigationRoot.settings.ariaRemember && "lastAriaIndex" in navigationRoot) {
          moveFocusToIndex(navigationRoot.lastAriaIndex, focusElements);
        } else {
          moveFocusToIndex(0, focusElements);
        }
      }

      /**
       * Moves the focus to the specified index within the elements list.
       * This will scope the index to the size of the element list if it changed.
       *
       * @private
       * @param {Number} idx Specified index to move to.
       * @param {Array} elements Array with dom elements to move focus within.
       * @return {Number} Input index or a changed index if it was out of range.
       */
      function moveFocusToIndex(idx, elements) {
        if (idx < 0) {
          idx = elements.length - 1;
        } else if (idx >= elements.length) {
          idx = 0;
        }

        if (elements[idx]) {
          elements[idx].focus();
        }

        return idx;
      }

      /**
       * Moves the focus forwards or backwards.
       *
       * @private
       * @param {Number} dir Direction to move in positive means forward, negative means backwards.
       * @param {Array} elements Optional array of elements to move within defaults to the current navigation roots elements.
       */
      function moveFocus(dir, elements) {
        var idx = -1, navigationRoot = getNavigationRoot();

        elements = elements || getFocusElements(navigationRoot.getEl());

        for (var i = 0; i < elements.length; i++) {
          if (elements[i] === focusedElement) {
            idx = i;
          }
        }

        idx += dir;
        navigationRoot.lastAriaIndex = moveFocusToIndex(idx, elements);
      }

      /**
       * Moves the focus to the left this is called by the left key.
       *
       * @private
       */
      function left() {
        var parentRole = getParentRole();

        if (parentRole == "tablist") {
          moveFocus(-1, getFocusElements(focusedElement.parentNode));
        } else if (focusedControl.parent().submenu) {
          cancel();
        } else {
          moveFocus(-1);
        }
      }

      /**
       * Moves the focus to the right this is called by the right key.
       *
       * @private
       */
      function right() {
        var role = getRole(), parentRole = getParentRole();

        if (parentRole == "tablist") {
          moveFocus(1, getFocusElements(focusedElement.parentNode));
        } else if (role == "menuitem" && parentRole == "menu" && getAriaProp('haspopup')) {
          enter();
        } else {
          moveFocus(1);
        }
      }

      /**
       * Moves the focus to the up this is called by the up key.
       *
       * @private
       */
      function up() {
        moveFocus(-1);
      }

      /**
       * Moves the focus to the up this is called by the down key.
       *
       * @private
       */
      function down() {
        var role = getRole(), parentRole = getParentRole();

        if (role == "menuitem" && parentRole == "menubar") {
          enter();
        } else if (role == "button" && getAriaProp('haspopup')) {
          enter({ key: 'down' });
        } else {
          moveFocus(1);
        }
      }

      /**
       * Moves the focus to the next item or previous item depending on shift key.
       *
       * @private
       * @param {DOMEvent} e DOM event object.
       */
      function tab(e) {
        var parentRole = getParentRole();

        if (parentRole == "tablist") {
          var elm = getFocusElements(focusedControl.getEl('body'))[0];

          if (elm) {
            elm.focus();
          }
        } else {
          moveFocus(e.shiftKey ? -1 : 1);
        }
      }

      /**
       * Calls the cancel event on the currently focused control. This is normally done using the Esc key.
       *
       * @private
       */
      function cancel() {
        focusedControl.fire('cancel');
      }

      /**
       * Calls the click event on the currently focused control. This is normally done using the Enter/Space keys.
       *
       * @private
       * @param {Object} aria Optional aria data to pass along with the enter event.
       */
      function enter(aria) {
        aria = aria || {};
        focusedControl.fire('click', { target: focusedElement, aria: aria });
      }

      root.on('keydown', function (e) {
        function handleNonTabOrEscEvent(e, handler) {
          // Ignore non tab keys for text elements
          if (isTextInputElement(focusedElement) || hasTabstopData(focusedElement)) {
            return;
          }

          if (getRole(focusedElement) === 'slider') {
            return;
          }

          if (handler(e) !== false) {
            e.preventDefault();
          }
        }

        if (e.isDefaultPrevented()) {
          return;
        }

        switch (e.keyCode) {
          case 37: // DOM_VK_LEFT
            handleNonTabOrEscEvent(e, left);
            break;

          case 39: // DOM_VK_RIGHT
            handleNonTabOrEscEvent(e, right);
            break;

          case 38: // DOM_VK_UP
            handleNonTabOrEscEvent(e, up);
            break;

          case 40: // DOM_VK_DOWN
            handleNonTabOrEscEvent(e, down);
            break;

          case 27: // DOM_VK_ESCAPE
            cancel();
            break;

          case 14: // DOM_VK_ENTER
          case 13: // DOM_VK_RETURN
          case 32: // DOM_VK_SPACE
            handleNonTabOrEscEvent(e, enter);
            break;

          case 9: // DOM_VK_TAB
            if (tab(e) !== false) {
              e.preventDefault();
            }
            break;
        }
      });

      root.on('focusin', function (e) {
        focusedElement = e.target;
        focusedControl = e.control;
      });

      return {
        focusFirst: focusFirst
      };
    };
  }
);
/**
 * Container.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Container control. This is extended by all controls that can have
 * children such as panels etc. You can also use this class directly as an
 * generic container instance. The container doesn't have any specific role or style.
 *
 * @-x-less Container.less
 * @class tinymce.ui.Container
 * @extends tinymce.ui.Control
 */
define(
  'tinymce.core.ui.Container',
  [
    "tinymce.core.ui.Control",
    "tinymce.core.ui.Collection",
    "tinymce.core.ui.Selector",
    "tinymce.core.ui.Factory",
    "tinymce.core.ui.KeyboardNavigation",
    "tinymce.core.util.Tools",
    "tinymce.core.dom.DomQuery",
    "tinymce.core.ui.ClassList",
    "tinymce.core.ui.ReflowQueue"
  ],
  function (Control, Collection, Selector, Factory, KeyboardNavigation, Tools, $, ClassList, ReflowQueue) {
    "use strict";

    var selectorCache = {};

    return Control.extend({
      /**
       * Constructs a new control instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {Array} items Items to add to container in JSON format or control instances.
       * @setting {String} layout Layout manager by name to use.
       * @setting {Object} defaults Default settings to apply to all items.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);
        settings = self.settings;

        if (settings.fixed) {
          self.state.set('fixed', true);
        }

        self._items = new Collection();

        if (self.isRtl()) {
          self.classes.add('rtl');
        }

        self.bodyClasses = new ClassList(function () {
          if (self.state.get('rendered')) {
            self.getEl('body').className = this.toString();
          }
        });
        self.bodyClasses.prefix = self.classPrefix;

        self.classes.add('container');
        self.bodyClasses.add('container-body');

        if (settings.containerCls) {
          self.classes.add(settings.containerCls);
        }

        self._layout = Factory.create((settings.layout || '') + 'layout');

        if (self.settings.items) {
          self.add(self.settings.items);
        } else {
          self.add(self.render());
        }

        // TODO: Fix this!
        self._hasBody = true;
      },

      /**
       * Returns a collection of child items that the container currently have.
       *
       * @method items
       * @return {tinymce.ui.Collection} Control collection direct child controls.
       */
      items: function () {
        return this._items;
      },

      /**
       * Find child controls by selector.
       *
       * @method find
       * @param {String} selector Selector CSS pattern to find children by.
       * @return {tinymce.ui.Collection} Control collection with child controls.
       */
      find: function (selector) {
        selector = selectorCache[selector] = selectorCache[selector] || new Selector(selector);

        return selector.find(this);
      },

      /**
       * Adds one or many items to the current container. This will create instances of
       * the object representations if needed.
       *
       * @method add
       * @param {Array/Object/tinymce.ui.Control} items Array or item that will be added to the container.
       * @return {tinymce.ui.Collection} Current collection control.
       */
      add: function (items) {
        var self = this;

        self.items().add(self.create(items)).parent(self);

        return self;
      },

      /**
       * Focuses the current container instance. This will look
       * for the first control in the container and focus that.
       *
       * @method focus
       * @param {Boolean} keyboard Optional true/false if the focus was a keyboard focus or not.
       * @return {tinymce.ui.Collection} Current instance.
       */
      focus: function (keyboard) {
        var self = this, focusCtrl, keyboardNav, items;

        if (keyboard) {
          keyboardNav = self.keyboardNav || self.parents().eq(-1)[0].keyboardNav;

          if (keyboardNav) {
            keyboardNav.focusFirst(self);
            return;
          }
        }

        items = self.find('*');

        // TODO: Figure out a better way to auto focus alert dialog buttons
        if (self.statusbar) {
          items.add(self.statusbar.items());
        }

        items.each(function (ctrl) {
          if (ctrl.settings.autofocus) {
            focusCtrl = null;
            return false;
          }

          if (ctrl.canFocus) {
            focusCtrl = focusCtrl || ctrl;
          }
        });

        if (focusCtrl) {
          focusCtrl.focus();
        }

        return self;
      },

      /**
       * Replaces the specified child control with a new control.
       *
       * @method replace
       * @param {tinymce.ui.Control} oldItem Old item to be replaced.
       * @param {tinymce.ui.Control} newItem New item to be inserted.
       */
      replace: function (oldItem, newItem) {
        var ctrlElm, items = this.items(), i = items.length;

        // Replace the item in collection
        while (i--) {
          if (items[i] === oldItem) {
            items[i] = newItem;
            break;
          }
        }

        if (i >= 0) {
          // Remove new item from DOM
          ctrlElm = newItem.getEl();
          if (ctrlElm) {
            ctrlElm.parentNode.removeChild(ctrlElm);
          }

          // Remove old item from DOM
          ctrlElm = oldItem.getEl();
          if (ctrlElm) {
            ctrlElm.parentNode.removeChild(ctrlElm);
          }
        }

        // Adopt the item
        newItem.parent(this);
      },

      /**
       * Creates the specified items. If any of the items is plain JSON style objects
       * it will convert these into real tinymce.ui.Control instances.
       *
       * @method create
       * @param {Array} items Array of items to convert into control instances.
       * @return {Array} Array with control instances.
       */
      create: function (items) {
        var self = this, settings, ctrlItems = [];

        // Non array structure, then force it into an array
        if (!Tools.isArray(items)) {
          items = [items];
        }

        // Add default type to each child control
        Tools.each(items, function (item) {
          if (item) {
            // Construct item if needed
            if (!(item instanceof Control)) {
              // Name only then convert it to an object
              if (typeof item == "string") {
                item = { type: item };
              }

              // Create control instance based on input settings and default settings
              settings = Tools.extend({}, self.settings.defaults, item);
              item.type = settings.type = settings.type || item.type || self.settings.defaultType ||
                (settings.defaults ? settings.defaults.type : null);
              item = Factory.create(settings);
            }

            ctrlItems.push(item);
          }
        });

        return ctrlItems;
      },

      /**
       * Renders new control instances.
       *
       * @private
       */
      renderNew: function () {
        var self = this;

        // Render any new items
        self.items().each(function (ctrl, index) {
          var containerElm;

          ctrl.parent(self);

          if (!ctrl.state.get('rendered')) {
            containerElm = self.getEl('body');

            // Insert or append the item
            if (containerElm.hasChildNodes() && index <= containerElm.childNodes.length - 1) {
              $(containerElm.childNodes[index]).before(ctrl.renderHtml());
            } else {
              $(containerElm).append(ctrl.renderHtml());
            }

            ctrl.postRender();
            ReflowQueue.add(ctrl);
          }
        });

        self._layout.applyClasses(self.items().filter(':visible'));
        self._lastRect = null;

        return self;
      },

      /**
       * Appends new instances to the current container.
       *
       * @method append
       * @param {Array/tinymce.ui.Collection} items Array if controls to append.
       * @return {tinymce.ui.Container} Current container instance.
       */
      append: function (items) {
        return this.add(items).renderNew();
      },

      /**
       * Prepends new instances to the current container.
       *
       * @method prepend
       * @param {Array/tinymce.ui.Collection} items Array if controls to prepend.
       * @return {tinymce.ui.Container} Current container instance.
       */
      prepend: function (items) {
        var self = this;

        self.items().set(self.create(items).concat(self.items().toArray()));

        return self.renderNew();
      },

      /**
       * Inserts an control at a specific index.
       *
       * @method insert
       * @param {Array/tinymce.ui.Collection} items Array if controls to insert.
       * @param {Number} index Index to insert controls at.
       * @param {Boolean} [before=false] Inserts controls before the index.
       */
      insert: function (items, index, before) {
        var self = this, curItems, beforeItems, afterItems;

        items = self.create(items);
        curItems = self.items();

        if (!before && index < curItems.length - 1) {
          index += 1;
        }

        if (index >= 0 && index < curItems.length) {
          beforeItems = curItems.slice(0, index).toArray();
          afterItems = curItems.slice(index).toArray();
          curItems.set(beforeItems.concat(items, afterItems));
        }

        return self.renderNew();
      },

      /**
       * Populates the form fields from the specified JSON data object.
       *
       * Control items in the form that matches the data will have it's value set.
       *
       * @method fromJSON
       * @param {Object} data JSON data object to set control values by.
       * @return {tinymce.ui.Container} Current form instance.
       */
      fromJSON: function (data) {
        var self = this;

        for (var name in data) {
          self.find('#' + name).value(data[name]);
        }

        return self;
      },

      /**
       * Serializes the form into a JSON object by getting all items
       * that has a name and a value.
       *
       * @method toJSON
       * @return {Object} JSON object with form data.
       */
      toJSON: function () {
        var self = this, data = {};

        self.find('*').each(function (ctrl) {
          var name = ctrl.name(), value = ctrl.value();

          if (name && typeof value != "undefined") {
            data[name] = value;
          }
        });

        return data;
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, layout = self._layout, role = this.settings.role;

        self.preRender();
        layout.preRender(self);

        return (
          '<div id="' + self._id + '" class="' + self.classes + '"' + (role ? ' role="' + this.settings.role + '"' : '') + '>' +
          '<div id="' + self._id + '-body" class="' + self.bodyClasses + '">' +
          (self.settings.html || '') + layout.renderHtml(self) +
          '</div>' +
          '</div>'
        );
      },

      /**
       * Post render method. Called after the control has been rendered to the target.
       *
       * @method postRender
       * @return {tinymce.ui.Container} Current combobox instance.
       */
      postRender: function () {
        var self = this, box;

        self.items().exec('postRender');
        self._super();

        self._layout.postRender(self);
        self.state.set('rendered', true);

        if (self.settings.style) {
          self.$el.css(self.settings.style);
        }

        if (self.settings.border) {
          box = self.borderBox;
          self.$el.css({
            'border-top-width': box.top,
            'border-right-width': box.right,
            'border-bottom-width': box.bottom,
            'border-left-width': box.left
          });
        }

        if (!self.parent()) {
          self.keyboardNav = new KeyboardNavigation({
            root: self
          });
        }

        return self;
      },

      /**
       * Initializes the current controls layout rect.
       * This will be executed by the layout managers to determine the
       * default minWidth/minHeight etc.
       *
       * @method initLayoutRect
       * @return {Object} Layout rect instance.
       */
      initLayoutRect: function () {
        var self = this, layoutRect = self._super();

        // Recalc container size by asking layout manager
        self._layout.recalc(self);

        return layoutRect;
      },

      /**
       * Recalculates the positions of the controls in the current container.
       * This is invoked by the reflow method and shouldn't be called directly.
       *
       * @method recalc
       */
      recalc: function () {
        var self = this, rect = self._layoutRect, lastRect = self._lastRect;

        if (!lastRect || lastRect.w != rect.w || lastRect.h != rect.h) {
          self._layout.recalc(self);
          rect = self.layoutRect();
          self._lastRect = { x: rect.x, y: rect.y, w: rect.w, h: rect.h };
          return true;
        }
      },

      /**
       * Reflows the current container and it's children and possible parents.
       * This should be used after you for example append children to the current control so
       * that the layout managers know that they need to reposition everything.
       *
       * @example
       * container.append({type: 'button', text: 'My button'}).reflow();
       *
       * @method reflow
       * @return {tinymce.ui.Container} Current container instance.
       */
      reflow: function () {
        var i;

        ReflowQueue.remove(this);

        if (this.visible()) {
          Control.repaintControls = [];
          Control.repaintControls.map = {};

          this.recalc();
          i = Control.repaintControls.length;

          while (i--) {
            Control.repaintControls[i].repaint();
          }

          // TODO: Fix me!
          if (this.settings.layout !== "flow" && this.settings.layout !== "stack") {
            this.repaint();
          }

          Control.repaintControls = [];
        }

        return this;
      }
    });
  }
);
/**
 * DragHelper.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Drag/drop helper class.
 *
 * @example
 * var dragHelper = new tinymce.ui.DragHelper('mydiv', {
 *     start: function(evt) {
 *     },
 *
 *     drag: function(evt) {
 *     },
 *
 *     end: function(evt) {
 *     }
 * });
 *
 * @class tinymce.ui.DragHelper
 */
define(
  'tinymce.core.ui.DragHelper',
  [
    "tinymce.core.dom.DomQuery"
  ],
  function ($) {
    "use strict";

    function getDocumentSize(doc) {
      var documentElement, body, scrollWidth, clientWidth;
      var offsetWidth, scrollHeight, clientHeight, offsetHeight, max = Math.max;

      documentElement = doc.documentElement;
      body = doc.body;

      scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);
      clientWidth = max(documentElement.clientWidth, body.clientWidth);
      offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);

      scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);
      clientHeight = max(documentElement.clientHeight, body.clientHeight);
      offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);

      return {
        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,
        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight
      };
    }

    function updateWithTouchData(e) {
      var keys, i;

      if (e.changedTouches) {
        keys = "screenX screenY pageX pageY clientX clientY".split(' ');
        for (i = 0; i < keys.length; i++) {
          e[keys[i]] = e.changedTouches[0][keys[i]];
        }
      }
    }

    return function (id, settings) {
      var $eventOverlay, doc = settings.document || document, downButton, start, stop, drag, startX, startY;

      settings = settings || {};

      function getHandleElm() {
        return doc.getElementById(settings.handle || id);
      }

      start = function (e) {
        var docSize = getDocumentSize(doc), handleElm, cursor;

        updateWithTouchData(e);

        e.preventDefault();
        downButton = e.button;
        handleElm = getHandleElm();
        startX = e.screenX;
        startY = e.screenY;

        // Grab cursor from handle so we can place it on overlay
        if (window.getComputedStyle) {
          cursor = window.getComputedStyle(handleElm, null).getPropertyValue("cursor");
        } else {
          cursor = handleElm.runtimeStyle.cursor;
        }

        $eventOverlay = $('<div></div>').css({
          position: "absolute",
          top: 0, left: 0,
          width: docSize.width,
          height: docSize.height,
          zIndex: 0x7FFFFFFF,
          opacity: 0.0001,
          cursor: cursor
        }).appendTo(doc.body);

        $(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);

        settings.start(e);
      };

      drag = function (e) {
        updateWithTouchData(e);

        if (e.button !== downButton) {
          return stop(e);
        }

        e.deltaX = e.screenX - startX;
        e.deltaY = e.screenY - startY;

        e.preventDefault();
        settings.drag(e);
      };

      stop = function (e) {
        updateWithTouchData(e);

        $(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);

        $eventOverlay.remove();

        if (settings.stop) {
          settings.stop(e);
        }
      };

      /**
       * Destroys the drag/drop helper instance.
       *
       * @method destroy
       */
      this.destroy = function () {
        $(getHandleElm()).off();
      };

      $(getHandleElm()).on('mousedown touchstart', start);
    };
  }
);
/**
 * Scrollable.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This mixin makes controls scrollable using custom scrollbars.
 *
 * @-x-less Scrollable.less
 * @mixin tinymce.ui.Scrollable
 */
define(
  'tinymce.core.ui.Scrollable',
  [
    "tinymce.core.dom.DomQuery",
    "tinymce.core.ui.DragHelper"
  ],
  function ($, DragHelper) {
    "use strict";

    return {
      init: function () {
        var self = this;
        self.on('repaint', self.renderScroll);
      },

      renderScroll: function () {
        var self = this, margin = 2;

        function repaintScroll() {
          var hasScrollH, hasScrollV, bodyElm;

          function repaintAxis(axisName, posName, sizeName, contentSizeName, hasScroll, ax) {
            var containerElm, scrollBarElm, scrollThumbElm;
            var containerSize, scrollSize, ratio, rect;
            var posNameLower, sizeNameLower;

            scrollBarElm = self.getEl('scroll' + axisName);
            if (scrollBarElm) {
              posNameLower = posName.toLowerCase();
              sizeNameLower = sizeName.toLowerCase();

              $(self.getEl('absend')).css(posNameLower, self.layoutRect()[contentSizeName] - 1);

              if (!hasScroll) {
                $(scrollBarElm).css('display', 'none');
                return;
              }

              $(scrollBarElm).css('display', 'block');
              containerElm = self.getEl('body');
              scrollThumbElm = self.getEl('scroll' + axisName + "t");
              containerSize = containerElm["client" + sizeName] - (margin * 2);
              containerSize -= hasScrollH && hasScrollV ? scrollBarElm["client" + ax] : 0;
              scrollSize = containerElm["scroll" + sizeName];
              ratio = containerSize / scrollSize;

              rect = {};
              rect[posNameLower] = containerElm["offset" + posName] + margin;
              rect[sizeNameLower] = containerSize;
              $(scrollBarElm).css(rect);

              rect = {};
              rect[posNameLower] = containerElm["scroll" + posName] * ratio;
              rect[sizeNameLower] = containerSize * ratio;
              $(scrollThumbElm).css(rect);
            }
          }

          bodyElm = self.getEl('body');
          hasScrollH = bodyElm.scrollWidth > bodyElm.clientWidth;
          hasScrollV = bodyElm.scrollHeight > bodyElm.clientHeight;

          repaintAxis("h", "Left", "Width", "contentW", hasScrollH, "Height");
          repaintAxis("v", "Top", "Height", "contentH", hasScrollV, "Width");
        }

        function addScroll() {
          function addScrollAxis(axisName, posName, sizeName, deltaPosName, ax) {
            var scrollStart, axisId = self._id + '-scroll' + axisName, prefix = self.classPrefix;

            $(self.getEl()).append(
              '<div id="' + axisId + '" class="' + prefix + 'scrollbar ' + prefix + 'scrollbar-' + axisName + '">' +
              '<div id="' + axisId + 't" class="' + prefix + 'scrollbar-thumb"></div>' +
              '</div>'
            );

            self.draghelper = new DragHelper(axisId + 't', {
              start: function () {
                scrollStart = self.getEl('body')["scroll" + posName];
                $('#' + axisId).addClass(prefix + 'active');
              },

              drag: function (e) {
                var ratio, hasScrollH, hasScrollV, containerSize, layoutRect = self.layoutRect();

                hasScrollH = layoutRect.contentW > layoutRect.innerW;
                hasScrollV = layoutRect.contentH > layoutRect.innerH;
                containerSize = self.getEl('body')["client" + sizeName] - (margin * 2);
                containerSize -= hasScrollH && hasScrollV ? self.getEl('scroll' + axisName)["client" + ax] : 0;

                ratio = containerSize / self.getEl('body')["scroll" + sizeName];
                self.getEl('body')["scroll" + posName] = scrollStart + (e["delta" + deltaPosName] / ratio);
              },

              stop: function () {
                $('#' + axisId).removeClass(prefix + 'active');
              }
            });
          }

          self.classes.add('scroll');

          addScrollAxis("v", "Top", "Height", "Y", "Width");
          addScrollAxis("h", "Left", "Width", "X", "Height");
        }

        if (self.settings.autoScroll) {
          if (!self._hasScroll) {
            self._hasScroll = true;
            addScroll();

            self.on('wheel', function (e) {
              var bodyEl = self.getEl('body');

              bodyEl.scrollLeft += (e.deltaX || 0) * 10;
              bodyEl.scrollTop += e.deltaY * 10;

              repaintScroll();
            });

            $(self.getEl('body')).on("scroll", repaintScroll);
          }

          repaintScroll();
        }
      }
    };
  }
);
/**
 * Panel.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new panel.
 *
 * @-x-less Panel.less
 * @class tinymce.ui.Panel
 * @extends tinymce.ui.Container
 * @mixes tinymce.ui.Scrollable
 */
define(
  'tinymce.core.ui.Panel',
  [
    "tinymce.core.ui.Container",
    "tinymce.core.ui.Scrollable"
  ],
  function (Container, Scrollable) {
    "use strict";

    return Container.extend({
      Defaults: {
        layout: 'fit',
        containerCls: 'panel'
      },

      Mixins: [Scrollable],

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, layout = self._layout, innerHtml = self.settings.html;

        self.preRender();
        layout.preRender(self);

        if (typeof innerHtml == "undefined") {
          innerHtml = (
            '<div id="' + self._id + '-body" class="' + self.bodyClasses + '">' +
            layout.renderHtml(self) +
            '</div>'
          );
        } else {
          if (typeof innerHtml == 'function') {
            innerHtml = innerHtml.call(self);
          }

          self._hasBody = false;
        }

        return (
          '<div id="' + self._id + '" class="' + self.classes + '" hidefocus="1" tabindex="-1" role="group">' +
          (self._preBodyHtml || '') +
          innerHtml +
          '</div>'
        );
      }
    });
  }
);

/**
 * Movable.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Movable mixin. Makes controls movable absolute and relative to other elements.
 *
 * @mixin tinymce.ui.Movable
 */
define(
  'tinymce.core.ui.Movable',
  [
    "tinymce.core.ui.DomUtils"
  ],
  function (DomUtils) {
    "use strict";

    function calculateRelativePosition(ctrl, targetElm, rel) {
      var ctrlElm, pos, x, y, selfW, selfH, targetW, targetH, viewport, size;

      viewport = DomUtils.getViewPort();

      // Get pos of target
      pos = DomUtils.getPos(targetElm);
      x = pos.x;
      y = pos.y;

      if (ctrl.state.get('fixed') && DomUtils.getRuntimeStyle(document.body, 'position') == 'static') {
        x -= viewport.x;
        y -= viewport.y;
      }

      // Get size of self
      ctrlElm = ctrl.getEl();
      size = DomUtils.getSize(ctrlElm);
      selfW = size.width;
      selfH = size.height;

      // Get size of target
      size = DomUtils.getSize(targetElm);
      targetW = size.width;
      targetH = size.height;

      // Parse align string
      rel = (rel || '').split('');

      // Target corners
      if (rel[0] === 'b') {
        y += targetH;
      }

      if (rel[1] === 'r') {
        x += targetW;
      }

      if (rel[0] === 'c') {
        y += Math.round(targetH / 2);
      }

      if (rel[1] === 'c') {
        x += Math.round(targetW / 2);
      }

      // Self corners
      if (rel[3] === 'b') {
        y -= selfH;
      }

      if (rel[4] === 'r') {
        x -= selfW;
      }

      if (rel[3] === 'c') {
        y -= Math.round(selfH / 2);
      }

      if (rel[4] === 'c') {
        x -= Math.round(selfW / 2);
      }

      return {
        x: x,
        y: y,
        w: selfW,
        h: selfH
      };
    }

    return {
      /**
       * Tests various positions to get the most suitable one.
       *
       * @method testMoveRel
       * @param {DOMElement} elm Element to position against.
       * @param {Array} rels Array with relative positions.
       * @return {String} Best suitable relative position.
       */
      testMoveRel: function (elm, rels) {
        var viewPortRect = DomUtils.getViewPort();

        for (var i = 0; i < rels.length; i++) {
          var pos = calculateRelativePosition(this, elm, rels[i]);

          if (this.state.get('fixed')) {
            if (pos.x > 0 && pos.x + pos.w < viewPortRect.w && pos.y > 0 && pos.y + pos.h < viewPortRect.h) {
              return rels[i];
            }
          } else {
            if (pos.x > viewPortRect.x && pos.x + pos.w < viewPortRect.w + viewPortRect.x &&
              pos.y > viewPortRect.y && pos.y + pos.h < viewPortRect.h + viewPortRect.y) {
              return rels[i];
            }
          }
        }

        return rels[0];
      },

      /**
       * Move relative to the specified element.
       *
       * @method moveRel
       * @param {Element} elm Element to move relative to.
       * @param {String} rel Relative mode. For example: br-tl.
       * @return {tinymce.ui.Control} Current control instance.
       */
      moveRel: function (elm, rel) {
        if (typeof rel != 'string') {
          rel = this.testMoveRel(elm, rel);
        }

        var pos = calculateRelativePosition(this, elm, rel);
        return this.moveTo(pos.x, pos.y);
      },

      /**
       * Move by a relative x, y values.
       *
       * @method moveBy
       * @param {Number} dx Relative x position.
       * @param {Number} dy Relative y position.
       * @return {tinymce.ui.Control} Current control instance.
       */
      moveBy: function (dx, dy) {
        var self = this, rect = self.layoutRect();

        self.moveTo(rect.x + dx, rect.y + dy);

        return self;
      },

      /**
       * Move to absolute position.
       *
       * @method moveTo
       * @param {Number} x Absolute x position.
       * @param {Number} y Absolute y position.
       * @return {tinymce.ui.Control} Current control instance.
       */
      moveTo: function (x, y) {
        var self = this;

        // TODO: Move this to some global class
        function constrain(value, max, size) {
          if (value < 0) {
            return 0;
          }

          if (value + size > max) {
            value = max - size;
            return value < 0 ? 0 : value;
          }

          return value;
        }

        if (self.settings.constrainToViewport) {
          var viewPortRect = DomUtils.getViewPort(window);
          var layoutRect = self.layoutRect();

          x = constrain(x, viewPortRect.w + viewPortRect.x, layoutRect.w);
          y = constrain(y, viewPortRect.h + viewPortRect.y, layoutRect.h);
        }

        if (self.state.get('rendered')) {
          self.layoutRect({ x: x, y: y }).repaint();
        } else {
          self.settings.x = x;
          self.settings.y = y;
        }

        self.fire('move', { x: x, y: y });

        return self;
      }
    };
  }
);
/**
 * Resizable.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Resizable mixin. Enables controls to be resized.
 *
 * @mixin tinymce.ui.Resizable
 */
define(
  'tinymce.core.ui.Resizable',
  [
    "tinymce.core.ui.DomUtils"
  ],
  function (DomUtils) {
    "use strict";

    return {
      /**
       * Resizes the control to contents.
       *
       * @method resizeToContent
       */
      resizeToContent: function () {
        this._layoutRect.autoResize = true;
        tE ¢Hˆ”ãÔ1Nˆ˜Bi@`Ch‡Dªğ&`€ÌfE•”D	È0R!1 ¡AUM.€ãRxá“é òI£€¡è)ëÁUÀª /\ïB`A-1
# U<L™R­=t’#ªWABÂB°ÃIBŠuÄ_e%gPH¸Dˆ Fƒ-€ôRhè‚. )H]Â¨@ĞåÑ *@Q‘€€H
BİQÉ!èÓ c	8†dEÁTÔp€¢B€Ağe ª
1M#1ÒJT ¤h\˜ˆ#¨º

¡ °¶€Áô´€ …NÂ Té…ˆN€d\­HæY$‚(8(p:€j	¤	€  Œ„Š€‡CW  ‚«Ó•	€4 "9V 4ˆg­ÒŞD¤ã«fF„À	k!PĞT ’pÆ1¢»HCcA
IH*¬(ª˜‚…”GV&©!•pE$	#±0¡‡ Á	„"Aa€@`Qó K<)e@Y8Ñ„$¬G&U!Q$™ÀJ‰)p)ˆDÕC	"I
@¼(@CF†Ñ“O` Í¡8sæÔìÑH@¹¨ïñœQûF¬	4#Ñ´œ¯d'İw@§A@….)À ¤RÀ*341 B‚Â3È«P ½LrÚ™˜	$qb„‚hD¦&É–è"ñ$Y¤$ œL ãòˆ$Pé¡9€
Ğ¡Ø©’X„İHà¹5e,²æ F:S‰ËNbAPÊ‚4€0ƒŠ@di‚06_aÄá’† Á‹¹ j@¦‰\À@¸é],iÕüc)Z*ù‹ïQ‘$’À- DXÃú$pLØ ”áè 2ŠµSˆ'©†’¤èåVìŒ„°H¨Ôpœ¡¬"Â,@'CWˆq„`Xë,V´ >SAV*	ŠE]Ù7ÕOa Iè`
|M–'+¸BAn°À"ƒØŠFˆ„e@SŒ³ÄCnö PEeaN-I"€À GÒ°26s”Àf#2\‚àÜãŒA%õÄ*“‘"ñ ²P°H@àk¬¦P­rĞ)
d£‚³A!T„b# „N)Ğ‰@`¨„@¤ÓÈæ  !â±Š¡È8(*èJ»@bWáL=…$È°M å@ÀP0‰ )ÚÕ†…´¨4ÈÈ`î#\ ‰LÃ¢¬L3æp8P‡2	Ú²P-aXcbv
9_-^±˜>
båRÃ–ÂK0ï
±ª8N7T+a¬»ó0„T‡7¿Á}FDšr°zc²Ì< \e˜¹òÀÄ„¼B“"A‡AâÅó@p–¨Ä°Â5À¥,$‰!@Ñô† ˆ ¡ˆ€ÈE4„“iN‘:5€hœ P0âP#@ÁH gC ˆ²JÈd©YÀ( …*+YM/pG@¨cB	J‘d± @ af)ãàcRD@Æ8ğˆ{F˜£H˜ˆr ëğ b"¡jœ
¨	) ÜKˆ xÉè•„v,ø€€‚ Å‰Àà›@4­À !Äc…5 W Ù`R¥€"Cu ¨EÆ‰ó ©õÅĞ…Ò/ŠR¨ğ	Ÿˆ¯‰Dœ%:* 8Æ¶Z  6B˜
(à…ÀH½¢8„„=	(.¸—R/à#iÈZ…„#Ş€£œ ã„5@yc3I!Ä¯°‘)«…„ˆÔ‘cZ"0!-]\@Àñ¹gT€¢ ÀƒCƒÑv"`„1 g
ÁÂ¹Ï”Àz,€€fz®À8Gá«'|`$Ø*€£ÊvEá~ÅCPD½ ÌxBÁŒ @]¢“j,`ôÌXÄCE
è‚œ¸! á(’ ‘-šÀB,€™P@ * `YP	b".Q‘	N*¡  8 C àtÔ˜
 J 	(q2ÅFd„‚…•è~ í”… Q¦MàŒ*iD"ÑPÏ%8!„À'H-0PP B  	#@	ò× (_¾  2
8ÀØÁä$¸¸ÀjÆ‹À iÉóÒ¤Â!¨Œ5ÁC6$KE"Qv!H …8 D@ÆaÔSõ"ˆ‚ uB OKéÄ¼ÂU oµ  íÀJ°lßÄC1³ÀGddPPRô ´ä)m€ÃÔX‹AçG;İrO–ª,òQJ°'Ä²PêP ¬f´ó ‹Èº!
Z@Ig84Õ’4JNXBÈÔh9ã±‰*ğB‰ € t° ‡¥›»ç 0I™ F A‡ÀôMK2‰°ŠdØİ
á¤¨Ô	&Ì0DPd
)Fø‚–ao€2ˆADD@¢! BàI 
¼‹d8±-‘!À
€C"¸hÑP
5È ‚ˆ6@HÄò4 ğÁûĞL__à:UDd€tÈ€çr8àJÄøcW	¨´Ä°xˆ(  ìÌ4+Ğ@‘ ÏÈ0â„!ÎaAæÄ@‚Âl0Å Ğ0Mğ
ŠF¹¡ÊQ ™ù!“‚w®b'ÄP’ÓğäÑ¡mSB	“î q‚ HÉ`4€§S $<`ic )C`Bš9’ÕMq²X`dÁW‘ " „aš¯"$A"P,&Ò€
æ”¡ #dÑˆ@ %D € |„€ g@µ$8@"•¯URÅa°C-Å–Œ P:Á"VD ¬‹Á`€è
 9À@ Ç p °è¤DTBFDjTt(ˆB!á €J±(¦,ÍÃ25 @’˜°<Es
”Zpà˜)bDÄQà›$%© xXŠ:@PP…Ê 
`ˆÄ@˜ú Ä„P\ Èƒ` ,9ü–L‰¹œàd…dˆ6TE6\aáàÂR 0PˆFdYÀxğ=Ò•°s	AÂ%¶æ&\5GB'ô:&ÓÂ“’Œ‚!ï
€BˆÍ’)”@Ğ`AÊàÌ”  j¤6‚°,Ğ> V P‘&ˆF SÎ‚€L±ıØ   `YÅ$&€³ –^ €PÄ¥”"À* 8Œ&)€XD’dĞA4* FT €„—p€  (  ˆ¢ÌH*À@%¸@ )	ˆ DbaP ˜€‰ Dæ	G„àì)ÓB­; O¬˜´Ã¢@"kîO¹ ø„Şâ«FKN`À:àÄÃ… ‹HPPŠä/8$bf  É9D;d¤J ˆØ¼Àî%áJ#ThYì‘$P8€I@İ; g	$"+…‚0›‹1‡LÅ ›?5“yÑ‚Lx.kT˜F’ÑBÑn *3(*ìŠ#ÃD…¨©%*P¢H
DerH(@ÍÌÃ$‘&,¡ q<–àXƒÜI ß '£”¹P`˜ô(±¯‚„B‘1ídX‘kÆÎCI€QZ3L„D ÇÇ'‘`L@š€Of (•C  ˆ; b§À‚[ˆğ"	  XDü  i ¯¡Lá† Ìş†@` ¨BDBC €©“‚H #…#Eµ©  ˜`‘€hA „0H‘¿¹ˆÈ$( Q"“S7ƒ8Y<A@!>yr‰”µÍq>€ À	Y	(*& K8İ¥ I‚g¾$†C"F% Øëñ1æ©‡ 
„´0›,Ô NtUÛ&I!PJÅ PWÔ©dáQ„‚ 2Ó‰Ì–”J
^%bŒÀ„@Áu	Š`³>@Ö‘  ²M `	AFQ5š²`€F€2(PQıZˆ€” `ˆ%Ø
†™T1D,„P(  ·€@bZP€ ()UĞç¸8:°¤L¡ ¨Q(‰ D„
¶­¤1!¼Œ¸¨IPIĞ€â¸Ñéj @§)D€fÔ Å,‡€P‰’(@‰@BH”D$	Ñâ*)0’ÄƒŒà€d :~’@Á†İH¡   	GHLz‘‡"’Ó	\Swîo"p"bóFÈÀS˜P,Hx Š4*&\§ƒ ĞŞdĞT F €¨0àÑ72eIª`¬ ¬’bÑ2 +$B c` )d%ZLAÏ(	˜Pc*À	:… ¢%ÓÚGˆš r¡QSä³ƒ’ …Ñ†Ó#°§	Ë#Å´@ËB/¤”C@`A%bL˜BH# ÀTŠ]D!@€@*Škj	„)`Â¬ó@ÇPæˆ`P	¢8ä04âÕG&rÂ@Zå¤#Ab "ˆ!©	—–Œ©!  L.VT`˜eBğ Ü1ˆP4 4€(Fâ“ÒNf^„¨$#‚à°Ç3‰@ûĞP¥X°Pˆ]JJØ
F«]‰‚À¦«I)”­Oz€GĞE Ç9ÚRÂGZ™òªÒDŒ¥²àx!"H¹• `[Ğ¥QÑ‰Ã@À$'Ó¢8Š‰±“85›–`rú²p Ç ÁN@P€ƒ@ò”[\69~ô/E˜'`7H’AB@`÷a«lÀæRˆMì‚ˆV©`¶np %Àq%pß	M€„k	d
èĞP
fiºF„ÔØ U0a?ÆAdF…6À„uFµ†‘‡		,v`ÓJ&2€°’‹UˆZcEBà4@ ÄH¨"1<(;é›VrJ¤4Ûv…9ôpº ÂÈ™€‚rA4®ˆ-î
EŒ‚!!¹ @\Œ
 t‚	CtŒ
 
GF ÀæØ‘ @œ‹“€‚ÏL€ˆ¸    clientHeight = docElm.clientHeight;
            FloatPanel.hideAll();
          }
        };

        $(window).on('resize', windowResizeHandler);
      }
    }

    /**
     * Repositions the panel to the top of page if the panel is outside of the visual viewport. It will
     * also reposition all child panels of the current panel.
     */
    function repositionPanel(panel) {
      var scrollY = DomUtils.getViewPort().y;

      function toggleFixedChildPanels(fixed, deltaY) {
        var parent;

        for (var i = 0; i < visiblePanels.length; i++) {
          if (visiblePanels[i] != panel) {
            parent = visiblePanels[i].parent();

            while (parent && (parent = parent.parent())) {
              if (parent == panel) {
                visiblePanels[i].fixed(fixed).moveBy(0, deltaY).repaint();
              }
            }
          }
        }
      }

      if (panel.settings.autofix) {
        if (!panel.state.get('fixed')) {
          panel._autoFixY = panel.layoutRect().y;

          if (panel._autoFixY < scrollY) {
            panel.fixed(true).layoutRect({ y: 0 }).repaint();
            toggleFixedChildPanels(true, scrollY - panel._autoFixY);
          }
        } else {
          if (panel._autoFixY > scrollY) {
            panel.fixed(false).layoutRect({ y: panel._autoFixY }).repaint();
            toggleFixedChildPanels(false, panel._autoFixY - scrollY);
          }
        }
      }
    }

    function addRemove(add, ctrl) {
      var i, zIndex = FloatPanel.zIndex || 0xFFFF, topModal;

      if (add) {
        zOrder.push(ctrl);
      } else {
        i = zOrder.length;

        while (i--) {
          if (zOrder[i] === ctrl) {
            zOrder.splice(i, 1);
          }
        }
      }

      if (zOrder.length) {
        for (i = 0; i < zOrder.length; i++) {
          if (zOrder[i].modal) {
            zIndex++;
            topModal = zOrder[i];
          }

          zOrder[i].getEl().style.zIndex = zIndex;
          zOrder[i].zIndex = zIndex;
          zIndex++;
        }
      }

      var modalBlockEl = $('#' + ctrl.classPrefix + 'modal-block', ctrl.getContainerElm())[0];

      if (topModal) {
        $(modalBlockEl).css('z-index', topModal.zIndex - 1);
      } else if (modalBlockEl) {
        modalBlockEl.parentNode.removeChild(modalBlockEl);
        hasModal = false;
      }

      FloatPanel.currentZIndex = zIndex;
    }

    var FloatPanel = Panel.extend({
      Mixins: [Movable, Resizable],

      /**
       * Constructs a new control instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {Boolean} autohide Automatically hide the panel.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);
        self._eventsRoot = self;

        self.classes.add('floatpanel');

        // Hide floatpanes on click out side the root button
        if (settings.autohide) {
          bindDocumentClickHandler();
          bindWindowResizeHandler();
          visiblePanels.push(self);
        }

        if (settings.autofix) {
          bindDocumentScrollHandler();

          self.on('move', function () {
            repositionPanel(this);
          });
        }

        self.on('postrender show', function (e) {
          if (e.control == self) {
            var $modalBlockEl, prefix = self.classPrefix;

            if (self.modal && !hasModal) {
              $modalBlockEl = $('#' + prefix + 'modal-block', self.getContainerElm());
              if (!$modalBlockEl[0]) {
                $modalBlockEl = $(
                  '<div id="' + prefix + 'modal-block" class="' + prefix + 'reset ' + prefix + 'fade"></div>'
                ).appendTo(self.getContainerElm());
              }

              Delay.setTimeout(function () {
                $modalBlockEl.addClass(prefix + 'in');
                $(self.getEl()).addClass(prefix + 'in');
              });

              hasModal = true;
            }

            addRemove(true, self);
          }
        });

        self.on('show', function () {
          self.parents().each(function (ctrl) {
            if (ctrl.state.get('fixed')) {
              self.fixed(true);
              return false;
            }
          });
        });

        if (settings.popover) {
          self._preBodyHtml = '<div class="' + self.classPrefix + 'arrow"></div>';
          self.classes.add('popover').add('bottom').add(self.isRtl() ? 'end' : 'start');
        }

        self.aria('label', settings.ariaLabel);
        self.aria('labelledby', self._id);
        self.aria('describedby', self.describedBy || self._id + '-none');
      },

      fixed: function (state) {
        var self = this;

        if (self.state.get('fixed') != state) {
          if (self.state.get('rendered')) {
            var viewport = DomUtils.getViewPort();

            if (state) {
              self.layoutRect().y -= viewport.y;
            } else {
              self.layoutRect().y += viewport.y;
            }
          }

          self.classes.toggle('fixed', state);
          self.state.set('fixed', state);
        }

        return self;
      },

      /**
       * Shows the current float panel.
       *
       * @method show
       * @return {tinymce.ui.FloatPanel} Current floatpanel instance.
       */
      show: function () {
        var self = this, i, state = self._super();

        i = visiblePanels.length;
        while (i--) {
          if (visiblePanels[i] === self) {
            break;
          }
        }

        if (i === -1) {
          visiblePanels.push(self);
        }

        return state;
      },

      /**
       * Hides the current float panel.
       *
       * @method hide
       * @return {tinymce.ui.FloatPanel} Current floatpanel instance.
       */
      hide: function () {
        removeVisiblePanel(this);
        addRemove(false, this);

        return this._super();
      },

      /**
       * Hide all visible float panels with he autohide setting enabled. This is for
       * manually hiding floating menus or panels.
       *
       * @method hideAll
       */
      hideAll: function () {
        FloatPanel.hideAll();
      },

      /**
       * Closes the float panel. This will remove the float panel from page and fire the close event.
       *
       * @method close
       */
      close: function () {
        var self = this;

        if (!self.fire('close').isDefaultPrevented()) {
          self.remove();
          addRemove(false, self);
        }

        return self;
      },

      /**
       * Removes the float panel from page.
       *
       * @method remove
       */
      remove: function () {
        removeVisiblePanel(this);
        this._super();
      },

      postRender: function () {
        var self = this;

        if (self.settings.bodyRole) {
          this.getEl('body').setAttribute('role', self.settings.bodyRole);
        }

        return self._super();
      }
    });

    /**
     * Hide all visible float panels with he autohide setting enabled. This is for
     * manually hiding floating menus or panels.
     *
     * @static
     * @method hideAll
     */
    FloatPanel.hideAll = function () {
      var i = visiblePanels.length;

      while (i--) {
        var panel = visiblePanels[i];

        if (panel && panel.settings.autohide) {
          panel.hide();
          visiblePanels.splice(i, 1);
        }
      }
    };

    function removeVisiblePanel(panel) {
      var i;

      i = visiblePanels.length;
      while (i--) {
        if (visiblePanels[i] === panel) {
          visiblePanels.splice(i, 1);
        }
      }

      i = zOrder.length;
      while (i--) {
        if (zOrder[i] === panel) {
          zOrder.splice(i, 1);
        }
      }
    }

    return FloatPanel;
  }
);

/**
 * Window.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new window.
 *
 * @-x-less Window.less
 * @class tinymce.ui.Window
 * @extends tinymce.ui.FloatPanel
 */
define(
  'tinymce.core.ui.Window',
  [
    "tinymce.core.ui.FloatPanel",
    "tinymce.core.ui.Panel",
    "tinymce.core.ui.DomUtils",
    "tinymce.core.dom.DomQuery",
    "tinymce.core.ui.DragHelper",
    "tinymce.core.ui.BoxUtils",
    "tinymce.core.Env",
    "tinymce.core.util.Delay"
  ],
  function (FloatPanel, Panel, DomUtils, $, DragHelper, BoxUtils, Env, Delay) {
    "use strict";

    var windows = [], oldMetaValue = '';

    function toggleFullScreenState(state) {
      var noScaleMetaValue = 'width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0',
        viewport = $("meta[name=viewport]")[0],
        contentValue;

      if (Env.overrideViewPort === false) {
        return;
      }

      if (!viewport) {
        viewport = document.createElement('meta');
        viewport.setAttribute('name', 'viewport');
        document.getElementsByTagName('head')[0].appendChild(viewport);
      }

      contentValue = viewport.getAttribute('content');
      if (contentValue && typeof oldMetaValue != 'undefined') {
        oldMetaValue = contentValue;
      }

      viewport.setAttribute('content', state ? noScaleMetaValue : oldMetaValue);
    }

    function toggleBodyFullScreenClasses(classPrefix, state) {
      if (checkFullscreenWindows() && state === false) {
        $([document.documentElement, document.body]).removeClass(classPrefix + 'fullscreen');
      }
    }

    function checkFullscreenWindows() {
      for (var i = 0; i < windows.length; i++) {
        if (windows[i]._fullscreen) {
          return true;
        }
      }
      return false;
    }

    function handleWindowResize() {
      if (!Env.desktop) {
        var lastSize = {
          w: window.innerWidth,
          h: window.innerHeight
        };

        Delay.setInterval(function () {
          var w = window.innerWidth,
            h = window.innerHeight;

          if (lastSize.w != w || lastSize.h != h) {
            lastSize = {
              w: w,
              h: h
            };

            $(window).trigger('resize');
          }
        }, 100);
      }

      function reposition() {
        var i, rect = DomUtils.getWindowSize(), layoutRect;

        for (i = 0; i < windows.length; i++) {
          layoutRect = windows[i].layoutRect();

          windows[i].moveTo(
            windows[i].settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2),
            windows[i].settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2)
          );
        }
      }

      $(window).on('resize', reposition);
    }

    var Window = FloatPanel.extend({
      modal: true,

      Defaults: {
        border: 1,
        layout: 'flex',
        containerCls: 'panel',
        role: 'dialog',
        callbacks: {
          submit: function () {
            this.fire('submit', { data: this.toJSON() });
          },

          close: function () {
            this.close();
          }
        }
      },

      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);

        if (self.isRtl()) {
          self.classes.add('rtl');
        }

        self.classes.add('window');
        self.bodyClasses.add('window-body');
        self.state.set('fixed', true);

        // Create statusbar
        if (settings.buttons) {
          self.statusbar = new Panel({
            layout: 'flex',
            border: '1 0 0 0',
            spacing: 3,
            padding: 10,
            align: 'center',
            pack: self.isRtl() ? 'start' : 'end',
            defaults: {
              type: 'button'
            },
            items: settings.buttons
          });

          self.statusbar.classes.add('foot');
          self.statusbar.parent(self);
        }

        self.on('click', function (e) {
          var closeClass = self.classPrefix + 'close';

          if (DomUtils.hasClass(e.target, closeClass) || DomUtils.hasClass(e.target.parentNode, closeClass)) {
            self.close();
          }
        });

        self.on('cancel', function () {
          self.close();
        });

        self.aria('describedby', self.describedBy || self._id + '-none');
        self.aria('label', settings.title);
        self._fullscreen = false;
      },

      /**
       * Recalculates the positions of the controls in the current container.
       * This is invoked by the reflow method and shouldn't be called directly.
       *
       * @method recalc
       */
      recalc: function () {
        var self = this, statusbar = self.statusbar, layoutRect, width, x, needsRecalc;

        if (self._fullscreen) {
          self.layoutRect(DomUtils.getWindowSize());
          self.layoutRect().contentH = self.layoutRect().innerH;
        }

        self._super();

        layoutRect = self.layoutRect();

        // Resize window based on title width
        if (self.settings.title && !self._fullscreen) {
          width = layoutRect.headerW;
          if (width > layoutRect.w) {
            x = layoutRect.x - Math.max(0, width / 2);
            self.layoutRect({ w: width, x: x });
            needsRecalc = true;
          }
        }

        // Resize window based on statusbar width
        if (statusbar) {
          statusbar.layoutRect({ w: self.layoutRect().innerW }).recalc();

          width = statusbar.layoutRect().minW + layoutRect.deltaW;
          if (width > layoutRect.w) {
            x = layoutRect.x - Math.max(0, width - layoutRect.w);
            self.layoutRect({ w: width, x: x });
            needsRecalc = true;
          }
        }

        // Recalc body and disable auto resize
        if (needsRecalc) {
          self.recalc();
        }
      },

      /**
       * Initializes the current controls layout rect.
       * This will be executed by the layout managers to determine the
       * default minWidth/minHeight etc.
       *
       * @method initLayoutRect
       * @return {Object} Layout rect instance.
       */
      initLayoutRect: function () {
        var self = this, layoutRect = self._super(), deltaH = 0, headEl;

        // Reserve vertical space for title
        if (self.settings.title && !self._fullscreen) {
          headEl = self.getEl('head');

          var size = DomUtils.getSize(headEl);

          layoutRect.headerW = size.width;
          layoutRect.headerH = size.height;

          deltaH += layoutRect.headerH;
        }

        // Reserve vertical space for statusbar
        if (self.statusbar) {
          deltaH += self.statusbar.layoutRect().h;
        }

        layoutRect.deltaH += deltaH;
        layoutRect.minH += deltaH;
        //layoutRect.innerH -= deltaH;
        layoutRect.h += deltaH;

        var rect = DomUtils.getWindowSize();

        layoutRect.x = self.settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2);
        layoutRect.y = self.settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2);

        return layoutRect;
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, layout = self._layout, id = self._id, prefix = self.classPrefix;
        var settings = self.settings, headerHtml = '', footerHtml = '', html = settings.html;

        self.preRender();
        layout.preRender(self);

        if (settings.title) {
          headerHtml = (
            '<div id="' + id + '-head" class="' + prefix + 'window-head">' +
            '<div id="' + id + '-title" class="' + prefix + 'title">' + self.encode(settings.title) + '</div>' +
            '<div id="' + id + '-dragh" class="' + prefix + 'dragh"></div>' +
            '<button type="button" class="' + prefix + 'close" aria-hidden="true">' +
            '<i class="mce-ico mce-i-remove"></i>' +
            '</button>' +
            '</div>'
          );
        }

        if (settings.url) {
          html = '<iframe src="' + settings.url + '" tabiÿûÒëÿmğ{¥ûñşşûæÿ{î'×Öşç‡%ogë·İİışoƒ.ãÎoúùú>ïsÎ×Nç·ö}ûÏÜ¨ÿ½¾_ÿMşİsÖêf'ÜŞ[¶—}ÿ÷ÏÚÙú¿ı.ıïÍïïÿíİ¶ÿÔnúïÔîşõn¿ú¿çÌ­«ÀÎ_×bc6…É‚G(tP[aj¬s¨bXŸÅ2c­!eıÔÑEÀgP›dÊb ±&*Ll`
Ij$æ0ËÁ¸@ RtA¢`k3H0B@"Q(Á3`H$c-*É…çmRñá7P4Új_" Ò<i"à/²üÀ¶ÀÎ¥ôz—G…à7 ‰úŸ·ÜsBò¨È ©np†_Ê‰¬%×µ«	ŠÀ­±î#HŒ25w(ªé!ÅôsªT !ÈÀ@Bë¨”Ø– "UpğB£ãµè´vÍ@¢›ªÁƒ¬áVåAÜ\Æ@ĞCÂ Â ª@ü}ÛÙjşù¯Uî¯ş·sìŞWĞsIË÷ş]VĞöªø{Ùş½ş{Ùù—İû×«¯xŸáõz³ál§v—`/øUïş×Ş}û}zyÛ¯ı3õêo{CûÜáÜÙïÏŠæí¶¯¿_ë.]ğ­ãgï*mÿÓõúş¼qÓ¿äãÿşû_½W]Kùå©gxIÑH B0Ø "Š.ğ12¨§ ‘#+¨Â'¨ò ,¡†"H PÀÜTJ™4@ 	¢` 4é)J…& ¤rÂ	aĞA¢ù œ(FH!4n0A`÷`¨
ì ª"O" 2AHD`;Q ŠW&säà|,vÍ‹ìææü-kº{Hõ>=ûíd/úúßßßŸaÛ¤NÜõ{õ_¿ÿ¶>i×:_ëõŞıd_öÏÛß®TøgëåöxOöî˜Oçæ§÷ıÏÌM”§ÎdíÍÿw-™õíXß¯óX\ı}rµf·?®ç×@^ßıîµÖïyµ?ÿîıîÖ÷ìwªJ‚ïË{¿¿TÎ~\n¬ïÏ+úÇÏİı·Û/÷Æíö=ùïRİ³%Güoşß¿Ï-Ã;òß¹Éİó»¿»»Ì]í¿ùk®ü_ò,Ş¾İ»eı×÷wí?7ÿŸ½zvê¿/ıŸõÍ¾>å.×T—k£ë]u}¼g¥tßPR–4‘š¨ÜĞ`*ÔÒ@ªäÔµc)B‰ØÅ¡X°Ü r˜€Q'¼ÙÑ%ÂÓP£dJbÕ™N¨CA9‹çt‰´Ms‘bf  ÓeÅ$C^ñË¾Ã6Ä17AÂ‰@	Ñ)õí"¬ Ô±«ƒ&h[XD8VWÚéèïk~ãßû€ç?÷ oÿû“û§oû5¹Øßßàıéş´OíúÃoıûïáou7/bİsß¿“óï¯»ß¿m'³÷h»ÿÜwhïYöİkÿ7½µ×»ÏR¿“şÿ…V^âÿö¿ç¿İŞùLëË›A—–ûëŸ¾}¾
>ÿq¾‡ˆÿ”àÇ!HD®ÔKÊà FD†0ZÑ}fêĞõÚ!à°zÄ”cKVt0A‚<
&`¢t›$1ŠØ1Uøâ .ğsÌA„šu¦ ×0Â$&Ì `aí+å´C‚ ,T ró‚È40Æ "ªˆö0Ba€' ´FãS IbM¡	ˆ[´¡($¨‚¤0iBS
Z&ˆL€œÒÑ„´ ùxBHƒ @NI	t'¨(„FáãC“(À.‡Ñ»jl§©‡ÄÊm¡%V˜F¼ A	Òd¹Nnjl[+xX~¥XbÜmæ@÷óşş?öø—n ñÉxüùÎ{Öö–ìüCıÌ¯ûu/¿ÖÿÜ-×÷çı¦¬~~Úsj·§÷	Ğß}¯³ø,„¹Çgú½Wş¯A¿X¾yï´ôU{ÒOÿ3÷şŸOËM–&©ÎÍíÿuyÛ«õÿÉ|ï“_øã×ß¿‹ÿm½ƒOû«¶câÁ¤YÀÀÀ¸m@Ù†ŒÅSx¸"lˆIÀÈ08Í°1Âµ1*y…è„I3$H %#À6“C	)iÅA&Œ¤	óƒ‡ğY¨Æ‚`¶‹dc¢PR`¨LRAÜÉzéP¥o1ˆH)¶ h& 8F_ €ïı¿¹6¶¿¯µW¦éóº÷ş:ûù]~·õ³ß?õÿ‡‹÷i_a'}ş·sÛùü|'vßÿçı®ä}ÙÿİìgÛ½Ó<÷³ÿö~Û=÷ß»¼¾‹õ|ÿ	{õó'eŒûïiÇz\oóÿıÿÿ¶ÿİÿİß|Ê_šSo¦íüóÍAg©×F½í·³ÿìİß·áî_7İùû¿ö½~^=ëÿ>‡9ı®Ãÿßİï¯Åü'÷»ÇÿıËûy^ÿ¬s}~Ü|¦ûwê:Íq]ş¯9÷İ¼¼mè¹Óökåüıiòÿ›Î}]ÅôûötY-™îuùVùÿ˜^wÖ¿t×³úZñ4YÇö¤3d{æA(M4l,'¼f1*AR 0  «VTLÀƒQm@Í ‚„Ò	#G¤ˆ”â´&I‹¸a9“zHÁğ`Ê
Ğ”Á.’2a62Ğ'PBªBbDli˜ÒÂ¤YÕ.ï@G²-\Cm€¡“ ™x¥†1mé¤ ù¿åêİÉt›¥î‰çR¿ıÿøíú:Y}öÿ¾mûÖÛ¹–ûıï÷®¯•3f±ışÿø©ùöıÿ;[ÏÖèvÏ§ş·ŸŞùí?Üï›yş«§0n×>åûúíÿ¿÷_»Ÿ‡Õ­Ît—ãıµŸÃøışîcë¼ÿ…_‘ÛÇØı½ŸÿiJ	3]QeOC
cVG´)­á„ä¦Ni’m’PÄA@	4Ä
ÄÌ¢òD&û'E€)åW¤™%Àƒ ÑpÉt®; AT j%ğ &pĞ À Ì"—3$$ÂXÁÌp—!sÒ_#ƒ&“P:A„o¤®H1ˆN6ÅàJ»ÏBQFqTPäJnÊ¿š—[K°êĞí	`
B¬¦B ™
=ÀCÜğòXˆq %qP° «P’˜!…¨Ô¥Çôlˆ9p  hIA©oåÔ …7…?cJÛ)M«h2+è¤„étñÈApä-¾¯ÿoÆšû4ŞÌæØóù¹ïËß{µ7OÓs÷÷3{Œûi;~ûïsQëÉ;Mü}x':úoİÈVËîokıŒÜå\W^ß½ÿRÒmùÿİŸûõúƒû÷r{ışÿî1ï_ı{ ËïûÜûú÷}öåÿcÿöùışø_½î}×ğ¿ìßıôç5(F¨P01<#‚BªEG1O4—7Ø$$€QH BÌ"A)ä(P0ğÆHÌXĞ:€ˆ9$¤h
0@PLÀÒš	r
PËğ)ÁAb,Ä´_™"JR û ò‹
@eD0ØØ@vÄAì€“œe!FÕ¼xï|sWo‰ß~÷»»¯–ôçOÉÓë¥çmm›Ï³¯ÿÿãòıŞ}_¥w÷–ó½ìşY>¯Û×wíMÍïòïëÿíÿÿÿ[§ãÿÜÿ×aşún^¯oú÷|ïõc÷cÒwöß7‡~ûöû¢§·Å]€®Ë²İïpïı¯~_¦¼¢÷ú™ÿİ¿Wuú÷¤¿¿v÷S0—xSıı—ÿŞÿÜ6tÿ¿=|y~¨bïıûşOzs9ıüîÎ¿Ç»=¼ô÷;ÿw«—ºKÿ}/Óöÿÿñ÷w×ÇªÛ~>óY^û„ê7í½Íû¥sz4zŞWkÿûÎø÷hpïe½Ûtµ[ãµ´À@8y~‚Sš	BrH™ eójÔ‚ÚOğÙĞUQ&ßƒ P `Ë€IaÑTOÒˆ„xšœ Í\X$Q h@AJCE(	QàX’’+^i÷]nĞ  Ò…hBØr!ílñP
1D6‹Â’j	]jB4äÖOÂ5*èL­Ü½-ÿÿ¥š¿÷½Ûxv÷şÿóÃïóÒf¿6İ]3~ÿ_÷¿ïç¤¾=nÍUü(Ğ·¿^w»ºã;ºŞ¿ì½Ö¿ş<ıâöş—fÅ›ù­N‡_WWÏŸßºø«¿Ooüıÿíş£Ow”|Íı¿\ı×óøŒ}½ìüZş¯—×éÀD Uƒ0@PQÌP@‚ğq× •àÆ”˜¥ª^T±äŠF¾@%D ¨& _%` ÊÄ.é ZÄAî…šMQ¯€?è¥Á	²€Z¯
°\lÊ«F„] @Ïc G@À0¢Ä„¾KPlÈ­€aš ”ê€æ,v¤Á>`´DÁ/?È€xªˆ( O+‘yH fIFw'_FL¨ˆSIF`ş5™]Õh¶¡`%”É£8	—$óWóD‡&N
d£"XàˆY¤2%XH8„ˆ %(+"Â_PS‹†±ğå35„<*æÜñW«€OüÛùo[ïÿîî¯oÓşkúùì§?ÿ·u}öû_WÉøåU÷^ÖÏÅF÷ó:å7Eİ½®áxıöÿïoØÄŸ´ôën¼ıêyüu^s ®½ÆÏÔ7îĞ¾Ü^ú{ıò{ınÿv²__u·ïÖæâŞ·İsÿ\Ã®ï6¹¿üK^Î{÷ıĞQGˆyÈE¤Â>{ÓS	
ÈWø¬ XG.2O
P˜”B±Ñ€düDŒÂbBÆ¤)›\`XpõnDs±„JiuA(ÚÒ!ã~eŒ ‚·„0Å%u°1¨6õ„MA&å¦ „%R¸â`3!K{Èìïï5§‡Óßrˆ·éºyıKÿvÿy»[¿¼+îùxïXu…õìÿ·÷˜ï÷ıÇıùçÇö®»{gç®·¾ÿ‹øÃ×ÚÓõqøëùôÔ[şóÿí	ıÿî÷ï>ÿİé×ù}¿õ[Sü;¼î¯z3Ùã›>{wÚØÁÎ—v{ö_¿÷ó·ôÿËöùÿöòŸÅ¼—oôÿèÑ93ı]ÿïÿósŸÌ¿~ßùÕ{jõån«ÏËX¹rîûònw[§Wîúá{ÿÿ¼_›uµ½¾Ó»œ[Z÷—ÏÖÿø¿<Ünù+¿N~¶Ñw¼½ëãïú«Ììıt8ëşÿÿzOÈå÷óî;–©0»ß÷§¨(V°ˆ†šÄtQ„J$«œhô`‚af0bÌ
ŸæÇÔ€‚ @1A `+ÄÓd ìp±ÌÆy@ Ãkİ*¬4­rDi²+êĞ”«·”ˆ,bl«^* >\Ş ¤m˜0ÅòQG)rdÄä€È!PâA“ò«÷~Ÿ‡÷ßø¿÷¾äÃş®¯şíÚ»÷ß¾şÙÜïõõP‹í¶¹°“û¼®Ã·¿ì¿¯ï*}ÿ6ÿ­‡|éõÿ]›[Ğş¾ïÆİ_<{úÿÿÓßùPyæ~ÓIÛeş^q¿óœë¶¾ÏÿÿzŞgüíâÿO~FÇ÷à¾ªüÿë¿Ù7NöÏ‡¯×vP‘™H&*<œx	p‡ ÁuO€9 X$ĞÀXU”)E±dl³2å°f ˜~Kÿ4´ UHE3’	`†œès@rGÅ$NR]U€òòĞ.€è &n!‹EÍ=`3I(M ªÔq"ZDõ?`”Kh ¸ZÅEBU¥à9ƒÂ™7€à³$Ş y ¢ÀÆƒk¥2TŒŠ¹İø%ZÑ 
ƒ E @- ?ƒ@dIÉ1GYgğ€ Ğ¹„ 1é@TR'àˆ’@¤*PQKÑÒÕAR>,$"O
  Âg‘@J ;×Éó{Ïÿ–›ıZçGÿE÷òŸ)û{ÎmóŸyE7ÿ¶İë=Ÿ¾ûö÷',ïS¿ÒßÜÿRÇşÿõ~ŞışÜ’¾Ïæ;İC­Tw¿ÿ|ğ'j|±óÿó¼ñÜ—ù;Æv¹í|ñí½şß¾¹ÿ®¶ÕçŞÖiï?ÿºyÿûø?pò­ïÉÕ¡cHB­Â›!€2ˆŠq€gğ`GÂ$\`Æ¦‹Æ¹&4L-,˜€£Q"¡˜ôu*™­¡½zÆ Ô¿RRYGDlA 
@‹p@îGİB s‚P€W¡lP2¬A¬Æ	0ÇbPMƒ&ÚPÿßï«å¿ıüZ¾¿w}ù·O3cw|ÿÕ¶ÇÂuö¿gímV×ûñıñõNÿûÿß'ooçëxoyï½ó~üv½Ïß¾·ÙªïSUï¿ü›'÷ÚßFkí^=¿Ÿ÷öoÿkò~oœß|¹Ï_3ÿÿ¿l'X_,o¿ê¿íÍ{9Ëz×«mætö¿¿öëÄ/ë^X?£ŸİggóoËßØ¯mîÏ\û>Å±Ïş6Ÿç™ÿîWFßşTïcşz¿Şv·Wîşø¿õ)Sÿ'şõí#Ø³S®?şn?æõú¦{=ëÅ®ÿ]_Ûõ¿fZÍı§o^ü¶ûy³q¥Ú»İİêüóvÏ¦üÛO<¤aª’œˆÁ	Ô#Ö£—"€ p›¸Kš‚CÅaHl:6ŠğÖùgx± ó e¾
àEú)'Nƒ—¡„zCpÖéˆûàº<‰HW;wu¡%‹„ó¤ âÀÀĞ8w#9“ÅL!c	sDº ( 4@“Bbs÷¿æ¾ïÔù÷OŞí-ÍÛ‹A÷I–ûC»’‡=Ïş—Ÿï|õãí¿ïø½iøfùßõí{Ÿç:š½ƒî3•¯ÜúTå?¯÷»ü~K{ï¬Ş~×§o¿»÷ö¸N§ësïûp©ëÿz3¼¿Ôÿù^¿Ÿ4¯ZÒ©È¸÷UÍ1Ûïîš¶VüßÂÂƒÅ¥#,ÈD(«oÔÉAHƒ3r:%ÉÀišfTÆ‘ˆú	¶‰
“1kFVÑÀ'†}’­	ÚXn\B& =m4p€…enØ ))3ST\…»DÀá¥S”P>fów–iTµ`9*@·¬yGî@@òÎ©v,Ó7@îöJs‚Û}wğ0Q¸8 ¥Zü-†ôhÂÁ4r(H% …PĞX 8«DŒ€¶sÄDRcõÒG¬ x¥…Ğx€`w	rK4ƒ‡	¬* aOŠÀâ	ğ(ÎÈ“$gaLŒrl€Bßn\„ÇşMûú?ì¾÷íyÛMÏªá]ÊûÇ[¾ÖëŸ×ëºí¤ë«év3ûûÖ[c~_~ÿÿë¶r¯îŞ÷ÿÿûŞ°öâıëõ¾Ÿ¿Õ·çSîÿw®™ï¿ò÷7ïÿ¶ÿ÷·ıü¯·ÿúyßÿŸßš½õiê7ÿÌñ¤ıÍùú¾¯§‡Ïüa~¡†T HÀ…FKœt
˜ ©™ÁzÀ^aĞB;}ˆ ' à dò )qò	T„àÇ@G¬FÑ	TLçB0üf’ÿItùÄq€ œ¢µ`[ÄgòÅü½ Ë×4^	ˆæ§N29„Ä24XøÜ¿÷¿f×Ú¹Úi÷<müƒíwnóŞıò_tŞÍ×÷¹oôÏ÷îß÷¤ß¿j5~5Î_®÷éı~»ÂNo÷ñÖ™
ùß.<ß‰›÷ÿÿÓuÛÃ®ï}‰ş«|oıüö[|ÿş¬‡ã[ïI¿Ö£ıëëûİ¸¶ş½õ¯Pİ®ÿ]á¯gï¾šê·Ï”¶´]ú(:ŸşvÓ2¯ïI¾ß»—{fø¯ÿ·½ÿ¼úİ<şı°Ÿ¾:üå¯î]ùßÿ/]—|DßÚâ6ÿÕª¶Ö*õ5¼½îíïıïıqîÿåmÿıv·ëïÇ÷ûİ,y»Ïüï$_1Û\cLßölË‰°ıêíëİÿı¾·óÿÇœïyOğACØ#ÁÉÊÀ)…€Aš #@`…èQM™\ ÀŠÈAŒºZC¡¸%‡Bp‘:ğñDEÃ‚\ßBä 2ú1 @t„9)"ŠB†Rç ¸G²\#T Ä!L	xDAm8)pCÆZ sä„4m:Ñ·æıá¿÷îõ¾ÿ¶ùue÷ïññïz3î¢ïû_—êşÿÇîy‹Ûã¼?çï¼ÿco¼ÿô]ÛûöìÛíÿÿïéùÿuµsİºıëù¿öiÿ+2‘¿×óÏº–?Şıöşêúßøe÷Uô»ë¾|Ïühw¹Ïÿ¿ÿ¶õ«Ö Ï{ÿ¶¿â6€‚$'“ ã„ Š €	XÑ( e„gP¢ b4B4@üGçQ™m˜1   œ0ÅÖ¢sÅÚ`t1Å–`Rˆ ã—ÀHÖ$äÑ8j]@„ À…<„bj0wå	xEÒà™*û¢‘e_ Àº²‡4¨…^
 ¢1 80Ã	 åúY”¢pÕÁèx×jp3–„ ‘ü…fÀ*!™S€± Ö'’ab 1·i„`:Ãî‡xÌ
`²š…—Tà0©åÑ‚şiB°@Ä~ôP„È'nË?._¿»{ûNŸ¾zÿn÷ÿ'ó­½nöDs§¿ø»»äU_ß0WÆÎû¿Í§ÿ¿ûo_ØÓ¸¸÷ü/Æ÷æt[ÌqÜu·qı;»ı¹ÿó=eó½•ş»ıíárÎîùı½s¿mï×ğÏoÕ^Ãí[ÿ÷§çvıÿş_Gæ_ı«ü¾{²%DÁ‰ ¿4-#^(F@À7*qö%—R"…	ˆ)lºÌŒ—4 À1çÂ€ÄŞª‚ Ş#¥t N2h¦AˆL”ş
pi Õ¨œñ €-2@C€ìPF‚D)ŒcV$±à@ÀQÈ9B#úÇºìz»pp§ü­ÙŞ÷¸ûÔõwê÷¾òíİË¾_ò—o¨ÿõ{ı×ßı>Å?×·ßÏ¯wX]ÿÍeú÷çÜ¿o!ı·G?ÿ¯mßü¾µßÿoÿÛùğÿÆ›{v•¼{{–·ÿû_ŒÛ»¯öİ˜ïûµ¯²ôîBİ÷Æ×o¼ÊwOç”æİ½	şŸ=Mê*÷úÕæóîÊ¾ÿ/ıïŞõ÷˜†èÅûõÿİÔ÷äşºŸ/KoŞïÏİòâßÊlãÓôı÷»³mıÿO`¿u]ïÚ·Óóø~Ñ¾NİåöŒı®óñì;îæßë&Ëoò_ÿ=ù–üÏ6şı¾¦Å¬Ón/ßÿ÷ëÓÁ@hÃUhYDrBãIƒÀÑ'XqÂå¬"Q¢Ñ^ U(P`R¸Mı 
Á—)f´C¸pè¬âbĞ‰ £0É >ñˆ‚(@8V¦h.‚4 ”`”ÑÂ@y€ D&z,R8Ñ(Â0–ßÊÓ$+'1ÂÑHpL0æïOös¢şÚ¯¶’~\§î¿çNv»ıß¤Ïõ¹šş—oåÿÛ…õ¦~ù××Ö{÷™ìÿóı§ëV~?íïZ_ÿÿ/¿í?sÎı›´KŸ¯åwşıÌîÿ<›§7¿½Ïişùe8şŸ÷_u¶ïûÅ9ğûvÍúîwózĞşû¿8ï~¾êîRA_Z ]Vè.à<®Añ‘dÒ4Ì| 6P'IC`UÓ¶42A ™™—0rWV`
Àb „D1ƒGõzšS•qF$ÉT?>‚c}9«T¡Dd¢	N˜P0rc4¾ã€”‰ W@Á`äv!&€]PI£	«Æ±ñ498‘ĞPÀœ4dH' \!¥\H@#.P@,ª8@ÚáE‰xGÉìĞY(,<äÅq…XYªéÄ@‘-™Â¤QmjPzÌÔ ±¥È¶Ö"“ğ€ú¢d	°à(œñÂ©'"Ğ^ÏQ€øw`\€òF@B’@–øşW>¼iî÷ı7/·ÿßÎæeÿ~ßm^ïßzşıë~7w‹{÷ÿ½ÿ/îæ/ïR¿í×ıÍİÍ«‰z·gşú¶ïû_ÿäëoŞ‡oúíşùï¿0ó%Ûgé÷µÏóÕ½»»yğÿßûØßÇÍ
í½ÿ=?ã§r#»ŸôÛ®¼ëå³õ²ùÃjq%‚`1Ğ1€„#ìò¨ó ´B	P\sS(y`AN° Ã>â"ˆ‹ğ!¸/aiGÁ T(¬äÀ¢Î“Š(,w‹ÄG†!µE"À„LRª	+Œ&àt P9‘@@ÅÙèD7Z›ÃP0Y‚"E Ï„©ïzó4Ûï:ü+ŸømÎÿw¾;üÉÎ/¾úïèW[o÷¹ıŸ= ßş?yu~qûÿóş÷x›×Ë³¿»^ñ¿ÜşßÒ¾wó¸{ß»YË¨õ¾í{éşn]İšŸïİ/|õ]!çËüg¿+÷—ñmÚüÕ}ïè1Ç7¿çN‘½×Ÿ¯ßgöï[ªıÓ|ö_|wê)uÿ;«û}¿îÿ?ºêô-şUô÷Lİ÷Õîw³ïÏÛÛ{ìÿêNÿòf}y­¬´¿{ómë]Æ¿¶Î<ÿî¼ôvÿ»ûüî_Ÿû¿½«nè]?÷M÷Ë¹öµÅü÷×}`¦µ»ÛÓÄ¯˜÷ı}öİ¢¢™$.Ã$Íˆ1
Kâ*.0%Æ yIH Sb @àPµb|“FI&Å#.cÜH	(b•0
C˜t0 À	jÁA4 ‹
~°‚@ŠÀ6G2âMXGlï|–LMU û”JD@Ö         createButton('Yes', 1, true),
                createButton('No', 0)
              ];

              if (settings.buttons == MessageBox.YES_NO_CANCEL) {
                buttons.push(createButton('Cancel', -1));
              }
              break;

            default:
              buttons = [
                createButton('Ok', true, true)
              ];
              break;
          }

          return new Window({
            padding: 20,
            x: settings.x,
            y: settings.y,
            minWidth: 300,
            minHeight: 100,
            layout: "flex",
            pack: "center",
            align: "center",
            buttons: buttons,
            title: settings.title,
            role: 'alertdialog',
            items: {
              type: "label",
              multiline: true,
              maxWidth: 500,
              maxHeight: 200,
              text: settings.text
            },
            onPostRender: function () {
              this.aria('describedby', this.items()[0]._id);
            },
            onClose: settings.onClose,
            onCancel: function () {
              callback(false);
            }
          }).renderTo(document.body).reflow();
        },

        /**
         * Creates a new alert dialog.
         *
         * @method alert
         * @param {Object} settings Settings for the alert dialog.
         * @param {function} [callback] Callback to execute when the user makes a choice.
         */
        alert: function (settings, callback) {
          if (typeof settings == "string") {
            settings = { text: settings };
          }

          settings.callback = callback;
          return MessageBox.msgBox(settings);
        },

        /**
         * Creates a new confirm dialog.
         *
         * @method confirm
         * @param {Object} settings Settings for the confirm dialog.
         * @param {function} [callback] Callback to execute when the user makes a choice.
         */
        confirm: function (settings, callback) {
          if (typeof settings == "string") {
            settings = { text: settings };
          }

          settings.callback = callback;
          settings.buttons = MessageBox.OK_CANCEL;

          return MessageBox.msgBox(settings);
        }
      }
    });

    return MessageBox;
  }
);

/**
 * WindowManager.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles the creation of native windows and dialogs. This class can be extended to provide for example inline dialogs.
 *
 * @class tinymce.WindowManager
 * @example
 * // Opens a new dialog with the file.htm file and the size 320x240
 * // It also adds a custom parameter this can be retrieved by using tinyMCEPopup.getWindowArg inside the dialog.
 * tinymce.activeEditor.windowManager.open({
 *    url: 'file.htm',
 *    width: 320,
 *    height: 240
 * }, {
 *    custom_param: 1
 * });
 *
 * // Displays an alert box using the active editors window manager instance
 * tinymce.activeEditor.windowManager.alert('Hello world!');
 *
 * // Displays an confirm box and an alert message will be displayed depending on what you choose in the confirm
 * tinymce.activeEditor.windowManager.confirm("Do you want to do something", function(s) {
 *    if (s)
 *       tinymce.activeEditor.windowManager.alert("Ok");
 *    else
 *       tinymce.activeEditor.windowManager.alert("Cancel");
 * });
 */
define(
  'tinymce.core.WindowManager',
  [
    "tinymce.core.ui.Window",
    "tinymce.core.ui.MessageBox"
  ],
  function (Window, MessageBox) {
    return function (editor) {
      var self = this, windows = [];

      function getTopMostWindow() {
        if (windows.length) {
          return windows[windows.length - 1];
        }
      }

      function fireOpenEvent(win) {
        editor.fire('OpenWindow', {
          win: win
        });
      }

      function fireCloseEvent(win) {
        editor.fire('CloseWindow', {
          win: win
        });
      }

      self.windows = windows;

      editor.on('remove', function () {
        var i = windows.length;

        while (i--) {
          windows[i].close();
        }
      });

      /**
       * Opens a new window.
       *
       * @method open
       * @param {Object} args Optional name/value settings collection contains things like width/height/url etc.
       * @param {Object} params Options like title, file, width, height etc.
       * @option {String} title Window title.
       * @option {String} file URL of the file to open in the window.
       * @option {Number} width Width in pixels.
       * @option {Number} height Height in pixels.
       * @option {Boolean} autoScroll Specifies whether the popup window can have scrollbars if required (i.e. content
       * larger than the popup size specified).
       */
      self.open = function (args, params) {
        var win;

        editor.editorManager.setActive(editor);

        args.title = args.title || ' ';

        // Handle URL
        args.url = args.url || args.file; // Legacy
        if (args.url) {
          args.width = parseInt(args.width || 320, 10);
          args.height = parseInt(args.height || 240, 10);
        }

        // Handle body
        if (args.body) {
          args.items = {
            defaults: args.defaults,
            type: args.bodyType || 'form',
            items: args.body,
            data: args.data,
            callbacks: args.commands
          };
        }

        if (!args.url && !args.buttons) {
          args.buttons = [
            {
              text: 'Ok', subtype: 'primary', onclick: function () {
                win.find('form')[0].submit();
              }
            },

            {
              text: 'Cancel', onclick: function () {
                win.close();
              }
            }
          ];
        }

        win = new Window(args);
        windows.push(win);

        win.on('close', function () {
          var i = windows.length;

          while (i--) {
            if (windows[i] === win) {
              windows.splice(i, 1);
            }
          }

          if (!windows.length) {
            editor.focus();
          }

          fireCloseEvent(win);
        });

        // Handle data
        if (args.data) {
          win.on('postRender', function () {
            this.find('*').each(function (ctrl) {
              var name = ctrl.name();

              if (name in args.data) {
                ctrl.value(args.data[name]);
              }
            });
          });
        }

        // store args and parameters
        win.features = args || {};
        win.params = params || {};

        // Takes a snapshot in the FocusManager of the selection before focus is lost to dialog
        if (windows.length === 1) {
          editor.nodeChanged();
        }

        win = win.renderTo().reflow();

        fireOpenEvent(win);

        return win;
      };

      /**
       * Creates a alert dialog. Please don't use the blocking behavior of this
       * native version use the callback method instead then it can be extended.
       *
       * @method alert
       * @param {String} message Text to display in the new alert dialog.
       * @param {function} callback Callback function to be executed after the user has selected ok.
       * @param {Object} scope Optional scope to execute the callback in.
       * @example
       * // Displays an alert box using the active editors window manager instance
       * tinymce.activeEditor.windowManager.alert('Hello world!');
       */
      self.alert = function (message, callback, scope) {
        var win;

        win = MessageBox.alert(message, function () {
          if (callback) {
            callback.call(scope || this);
          } else {
            editor.focus();
          }
        });

        win.on('close', function () {
          fireCloseEvent(win);
        });

        fireOpenEvent(win);
      };

      /**
       * Creates a confirm dialog. Please don't use the blocking behavior of this
       * native version use the callback method instead then it can be extended.
       *
       * @method confirm
       * @param {String} message Text to display in the new confirm dialog.
       * @param {function} callback Callback function to be executed after the user has selected ok or cancel.
       * @param {Object} scope Optional scope to execute the callback in.
       * @example
       * // Displays an confirm box and an alert message will be displayed depending on what you choose in the confirm
       * tinymce.activeEditor.windowManager.confirm("Do you want to do something", function(s) {
       *    if (s)
       *       tinymce.activeEditor.windowManager.alert("Ok");
       *    else
       *       tinymce.activeEditor.windowManager.alert("Cancel");
       * });
       */
      self.confirm = function (message, callback, scope) {
        var win;

        win = MessageBox.confirm(message, function (state) {
          callback.call(scope || this, state);
        });

        win.on('close', function () {
          fireCloseEvent(win);
        });

        fireOpenEvent(win);
      };

      /**
       * Closes the top most window.
       *
       * @method close
       */
      self.close = function () {
        if (getTopMostWindow()) {
          getTopMostWindow().close();
        }
      };

      /**
       * Returns the params of the last window open call. This can be used in iframe based
       * dialog to get params passed from the tinymce plugin.
       *
       * @example
       * var dialogArguments = top.tinymce.activeEditor.windowManager.getParams();
       *
       * @method getParams
       * @return {Object} Name/value object with parameters passed from windowManager.open call.
       */
      self.getParams = function () {
        return getTopMostWindow() ? getTopMostWindow().params : null;
      };

      /**
       * Sets the params of the last opened window.
       *
       * @method setParams
       * @param {Object} params Params object to set for the last opened window.
       */
      self.setParams = function (params) {
        if (getTopMostWindow()) {
          getTopMostWindow().params = params;
        }
      };

      /**
       * Returns the currently opened window objects.
       *
       * @method getWindows
       * @return {Array} Array of the currently opened windows.
       */
      self.getWindows = function () {
        return windows;
      };
    };
  }
);

/**
 * Tooltip.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a tooltip instance.
 *
 * @-x-less ToolTip.less
 * @class tinymce.ui.ToolTip
 * @extends tinymce.ui.Control
 * @mixes tinymce.ui.Movable
 */
define(
  'tinymce.core.ui.Tooltip',
  [
    "tinymce.core.ui.Control",
    "tinymce.core.ui.Movable"
  ],
  function (Control, Movable) {
    return Control.extend({
      Mixins: [Movable],

      Defaults: {
        classes: 'widget tooltip tooltip-n'
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, prefix = self.classPrefix;

        return (
          '<div id="' + self._id + '" class="' + self.classes + '" role="presentation">' +
          '<div class="' + prefix + 'tooltip-arrow"></div>' +
          '<div class="' + prefix + 'tooltip-inner">' + self.encode(self.state.get('text')) + '</div>' +
          '</div>'
        );
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:text', function (e) {
          self.getEl().lastChild.innerHTML = self.encode(e.value);
        });

        return self._super();
      },

      /**
       * Repaints the control after a layout operation.
       *
       * @method repaint
       */
      repaint: function () {
        var self = this, style, rect;

        style = self.getEl().sÏİï˜Züûÿ7ı‡o»üQë»Óg»üW÷«w·®ÏYoú¿ş§Qn>wxş¿Çöa¥^owúŸ;Êıâ¯V«éÿíHxÏ{·ó~ÈŞ1øÏ¼û_¥­_cf{ÿ?îİ—Zï÷ÿwû5ûñ-rùgí»ùõÿ}×P/æÆÇĞxOŸ£ş¿­^‡‹ÿg÷Û1šô—uï¯,ºßûÎp³y¿º^÷ûÎsÙúW³ÓöXû=ĞœüÑ¾Şÿ¿ïkğ6¬|·â©û—5ôvÌ§oöÿçaş³+ÿ?ÌñÊé:Ç»åÅQórÙggTfïçu®¢TØ÷f×·ó¿‘•ÒŸînŸ«şÇsŞã²ºÈŞ¶ÿ›¨çƒÿG‰Ó#ªØûŸí]£‹]ş•'ô·îıµ­İÓòÿÓŞ›ìÕö9SáõÖ¿ÿ§gÿ÷ç¯ÍÅÙoh][ôv¸;^,ê¯šÃ†<÷ßØú‘rmö´³®_^Şä¯¨íáïoßÑ_?ÖÜÿ_ÿ>Û}÷òŞï®]ÿíÅ~£+ùÑmœÏÜ|ïÛÁ^eı•œq®È·]çíÉ½=úox§ÙïítÔ¿®ãç?÷ä]ÆÿİúŸ‹†Öw8=ù0ßšû³_<yÓBeı½ö“M¾Y_ÖçŞ«÷úÿ÷Ç~—ñå÷WIÕ:ï·ÿÿşÿşüÿïwC5Ü>½çÑiÚõ¯õÌYû…ñ36›ÛwßíıOß¿ûÛ}Zº$·yô¥vë6IßÙİ¿óéŸøôÇFÕvÛ{ÅÇ³”ı“¾¿Níœkºûû½/{QÇUYÃ`ûÛW{\‚ÖÜ®ºÓ¿ÿ»¿sµ¶/\ûc÷ûsí'Äº‡öáÂã·vßìøŞºÑêyàÏÚÑ­Şo¦\ÉüŸµıyg©o0Öò<t«ëõ»ì`÷ïa§ïûmıİ^¯ôİ™ıJálw7úûÍÿ',öÑÇíçx½º­J–ü¼¥}Şáş–	Y¯¬º©ûÿ¿ï­Ö!ïá~å–¸/Éõ÷²?}{~ÿ×í¶Ÿ­Ü§ÿ•»ö­ÿïwÿ{íûûÿ[¾v¾×kO}ß^gïúÃÿûkÂßjûy‘·ç~jìï­—~Š¾î´Mi\T‡î?Ûü÷÷Ğ|Ğ³Ç/ÿÛùÁ¶Î¯âÆDïïê|êßŞ®O­›·U}Ÿ…Ùë7¿½æê¼²oSç#õ5ÿŸßıú}rı~úûÈ÷ó–×é“ş¾¿Í£ıoıÈwMVënûz*º.u÷ßûáU½Ç[Ä×ów„×Çï÷ßù«?nW†V{åkv7Jöó÷í©Õrß½ª/úö£Wß²²Şş÷ı¨éê1èÚû÷Ÿşè¯ÆòĞúÏûs4“ÖÕÿ“ïìwe·µ¹¿rmíX¼õÏV“ÇÿÿW³oo¹¿¿àûyÿøZµ7Ñ.ÏÌP»ŸÆ6Çm²P¾r>”è÷[ù~øßÚt}æGs®»}‰¦Õå1º«ÔçÙİwö5‡æë÷ÿ\õ®ÛxºıäV3½7›.¿°¿õs/Úu«/íıHÙû§úÚïİ+ö9U0tİtP<İë|¯-'ÿ]w˜¶Ş>åÏãn??òŸ×óûïÍ¾»’R¢«~¹Ş¾?_^ïîâûÁ’Ñ_Ÿõm¼}oˆ«VÛG»û•ÿ›û^¥œ“L«Çµ›×wÁ÷Ï½oÑ¿¿ÎÎu¸µûv}“wä½æ¯ûÆ3>>];W÷vİãwï÷ÆÅv9Ûº¿“:v¯õÿkª®tuySûò‰!êÿgâß–ıæI¿ntÃÇ!672õ÷óxßş{ø¾ßûğ¢ò%»òv—ßGùCŸåEıcìÙ5ş¯®nó÷»Oİ½¢òòãİ½ÀÏæêãš5òÃ*¥ùq•%¿ìWîüÑöï3ëqÔşİyüüìÂ{_Ï°ŞØ{µ¹yö¼ù-jÿÕ¶ïôö¿Wıİ>ıİèóË¬¯ßìº¯w¿~îÚytíı}F}û÷Ùÿû|VîŠ÷—¿÷¿î›Ó×ıÿß²İ:úı»şàåå»Ø}úÇ·»ûİûßo6½ıû÷óş›¢¿ã›î›ºZ_Ø{£v}>{øïövÏË×w‘±7ôäg›Ñ
|»ú/eKìcÓÖçÖ×¥ƒ7ƒï¯ë:Šóµ«æïİgçÿ[¹Uvª÷«9·7½óŞ¤ğµ­jè£Z÷û·}{Ûİú5·ÖáNöuñ¥×5=¿ïq6İ¨ÿgû5¹·5[9³UûûçvØ÷Ç¶ö{õ¹ŸÖŠf°¾ß]õ»}:Ûö»@~÷áÑ{¿ƒõ.¿³ÿv½ÿwm¿_ÿW?¯µ_ûõuÏ®Ùü—­ööró¾xN'ıİ­ÚËåWëãŠßo¿u7ÿis¿'Bû¿ÿºÒcö7UÛßà=Óøx¼S×"¿ö}ÜtöYöÿ³ÿı¾¾úèoÏv¿^ŸÏ“_w¥ŸıiÚ8ıVÛÛëÖ~×ı§ûï·¿ò×ı§7ümï¬šë½Z¿X'şz¾.ì=ëëÿ,ù<·{ÍÚ}×¼÷½÷jvìÿ^¿µáûÌƒöÿ:k¼®ßöúívgüÿw?«ı“ÿ˜YÏ÷¨÷3¶çïÎ§¯‘ÿöùæîÛôÎÿ¿½ß–ŸŸ»ÈÎù»Í¶Xn½ı––ñïÿ0¹¿õËo¯ŞÛíòæåG2û/¥5j~ÿòéşy=Írûz§ü¾ûÿûÙïŸ÷ÿG…C9øßçÿo‘‡Ü{z»êÖ°êæöÖŸ5á¯^ÿ7wëöolyiü/ŸrZüŸò¿ÖıôqbîéûÓîûøãŞî¡ıò~çªÿ8¾WIÉ>ö½}…oQ®ôûæ.#/Ó›üÿ>ïŸå^Ş›/mDÿ²1½ûüyö¿SëÿÛ×óŞb»÷Æ64•7¼óÿÿbŸó¥[;ß¿ıo+^oî;¿EÇöúïŞ?ïüÿÿÿ¯Éì÷ÙßíÛ]ó¶2×·½ïšiZËrL-ÿÑErºîòïw÷=[û§ú[Êõ‰?nüÒ¾ÏŞûÊ{K~]‘İ˜ğ3Â®nš÷óÓqt–ñ¿é>ú­»ÿ÷Î{‰×±íãW-ã·éË9Ü—çr»?ÿıpÎ[÷)ùöœŞjwÏêv9Gtİ8óçk5ópVßºkîS|ëxÑïM¹NZŸvWµÏ÷×úú1¶—¶±úZÿ÷ï{‡{BÍÃõT—'×úß?ò”mßõié×İç—l×ÿ w¿«+‰_=ïí§õë^à'÷»»“7úqú_3w7ßU½šù–Û“Ó¥ûp÷w¿–¿ó’ëµ×ºÜønáËù<w—¶³&1û{ûnk¿¯wÒ>^1±yÿœ,‡[VùÇÏ™Û>_õ³[‡©ï¾ße½çG_ûşíE¿ŞZvù•¯€ÿùn\ÿÅö<İ×uûşºçóŸÏ›÷ƒ>qÃ}×­·÷÷rùİŞô®ïïœû}²c,ÿü{ï_úÓ}»ÿ¿öø¯÷ö“ËûÙõGø»¯9“¨ã}ÎŸŞS['´Ï]?×ûÇä½¿¿ïÖS³×gı?¸BWo‘ıÒñ ÇÏóçŸıúƒ|döÅŸ¾U»ÇìŞüŸ›ÜG§×|×¸2Ïçš\÷ß¾tzãíúùõuCò¼{æÊ×æïüü»§|ûëã¿-ò§³³ÿ÷Ÿ7¾}ÏtÉë_'ÿı3ôÃ½Sæ¯½­Æö×}ÔêêŠÑò5£—ÛıÓØ½ø+ÿ¼Ÿ;Û£¶IöS·!i}~»ƒeSIz³4~ÿf¿_ûë“İïk>Ó÷ç÷U{ßúŸ†üşO>Çÿæw¿¾¯ŸÛ)¨5ó]æšïÿÌÜVª»%÷<“Ú¦y¾â›~O?löÛ{wîï?Ş~®Ò™÷îí×øò4øy}½zgÿáşnn÷ö÷óÏş‚í«üÿ‹=§ÇöÖ©şûómşí_^öµ“úô{İşî>£®>ÙÏÕú—ş¶ºY¿öİÏ_Ÿşñ@o¯^kyşy%¯­ÿ^İÏ]çòYæßşCÅuîLû^Zı¬ÅõışõŸcRéRİçı·É{qAc±³ù?ß“8Ş'}ßÓ¯súó #fºö¸ú›{ı¿ùÒDıı¡UûvïËm¿¿…Ü?]¯^D2\Â¯Qã•uïrşşøÓ1{oÓúóÍOoW÷o?³ØÏü_¦º_Úşßƒıö|õúoö×|İòBo§,vëÛÿy÷O©çßıªáó{›õ½òz’;çÿë4õÿ±.ïôÿÛz³û/~?Û´Wü½ê÷ú¿úİ·û?o{ç¿z9íßÿÇz÷Ğ7ëkzÏ×sµ	oßóVKìŸ¼úÎçÃß·­ã@ë{øe}Îgr¹ÖöÇŸïDûv×·ZŞ§¾ş5C»/Ó_æ?ïÌösÄı?rïŞôdöïíİş£çí<º-ûiıÚØ/ñßdTû?ú·’õ¼_ö4ïäğÇyÎ¹›G_õtÍñw­ËØwşÿı}G¿¦ôÿßûiÛí»ü~÷Ös·ÿSdÚß”éúÎışú§ğ^ÅÁ-á÷Û«êó;ø}wï¸ç ò_<ŞV^GGç­ú¥Ğopg¯èû÷#Æû¾ë„ÿç÷é­»ïÈÿÏs9‡1}ÆÛ½iO7vÀäß¸»¡}ıÿ¾,×¾õsOç¼7ğ5n¿~ÿÔgÚ_»-ß¼¬ÿï­ßö©ß6×~N×Ë«½Ÿ¿eòÛÏç~;ûwê«Í·_:ï,ZÑÿŞõ}}ïëû‘ëı_­oñ¾÷û·Á°/õwçwŸÿå³›×*\=OğšòYŸ¿û_¾Ôeõê¾×õy%½Ï½~ïoÑİZ®¾íşíÅ¯[tß-Ä^í[øÎÃ™ş:õÏ>î¹ï÷WÚç‰ùûÅ¯åÓy—¿ùKoÊ·ÿö]Æ¯õ*ÿm·§æº¹Sçmãı6¾Ûş¥´H´Ç9ŸóïGj¶ù¦tß8È×¿›¯8+y›nì¢©÷w¿¬sXç;W`1Ñ{eäÉïğ5çÜkuç·×>îUeÃ.pnÿù]ëÙaô;W7ÇåûìÂïÿÇGœí\çn7õgÊÎüŞ>oO÷ğ´ßÈ6êIÿÿòï§ïóŞÙsú\sçÿ[[ÿS24?“»ŸïìÓÙÓ·¿*Ôtuÿ×ü”ŸÎs¿í;ÿö¬?ö˜~ìïŸŸ÷™ûÿLÛ®€·\Õnı?í¯›¿ê7ßT“²÷›Ÿ®{ÿ³şßÛí‡¿¥ì\_oG‡â9íäCšïßaoC³{ÿşñ{y°?ş«
¿›4	íõø×Œ¹×şÿïşWóÿÊëöGâ:=Şã7¯Ÿ÷ŸşÁ¾û¯é¯Ïj³óûË~ÏÖâM,¯ıè‡{lÂaüûöÌ•ûõêõÛ>ÿî¯«wİŞ»ûmÖßİGş8ßÔ×æoını*ıÇ9]Ÿ¹Ï×u~ëÇõõ¾ı~·Íû÷ÿœö¿›Ú³ß½ÿOñ{á«_ÕÚñ¿Øı°V…ŸşwéüÚwÏ÷ù”ü”ˆ‰Vÿò_ŸÊ¾ø™Ooıiûuøo:Ş³{ÏvùàÛîß«şG»¯ÿG9ŞÇÕæş[œl×ŸFúNd1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Progress control.
 *
 * @-x-less Progress.less
 * @class tinymce.ui.Progress
 * @extends tinymce.ui.Control
 */
define(
  'tinymce.core.ui.Progress',
  [
    "tinymce.core.ui.Widget"
  ],
  function (Widget) {
    "use strict";

    return Widget.extend({
      Defaults: {
        value: 0
      },

      init: function (settings) {
        var self = this;

        self._super(settings);
        self.classes.add('progress');

        if (!self.settings.filter) {
          self.settings.filter = function (value) {
            return Math.round(value);
          };
        }
      },

      renderHtml: function () {
        var self = this, id = self._id, prefix = this.classPrefix;

        return (
          '<div id="' + id + '" class="' + self.classes + '">' +
          '<div class="' + prefix + 'bar-container">' +
          '<div class="' + prefix + 'bar"></div>' +
          '</div>' +
          '<div class="' + prefix + 'text">0%</div>' +
          '</div>'
        );
      },

      postRender: function () {
        var self = this;

        self._super();
        self.value(self.settings.value);

        return self;
      },

      bindStates: function () {
        var self = this;

        function setValue(value) {
          value = self.settings.filter(value);
          self.getEl().lastChild.innerHTML = value + '%';
          self.getEl().firstChild.firstChild.style.width = value + '%';
        }

        self.state.on('change:value', function (e) {
          setValue(e.value);
        });

        setValue(self.state.get('value'));

        return self._super();
      }
    });
  }
);
/**
 * Notification.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a notification instance.
 *
 * @-x-less Notification.less
 * @class tinymce.ui.Notification
 * @extends tinymce.ui.Container
 * @mixes tinymce.ui.Movable
 */
define(
  'tinymce.core.ui.Notification',
  [
    "tinymce.core.ui.Control",
    "tinymce.core.ui.Movable",
    "tinymce.core.ui.Progress",
    "tinymce.core.util.Delay"
  ],
  function (Control, Movable, Progress, Delay) {
    return Control.extend({
      Mixins: [Movable],

      Defaults: {
        classes: 'widget notification'
      },

      init: function (settings) {
        var self = this;

        self._super(settings);

        if (settings.text) {
          self.text(settings.text);
        }

        if (settings.icon) {
          self.icon = settings.icon;
        }

        if (settings.color) {
          self.color = settings.color;
        }

        if (settings.type) {
          self.classes.add('notification-' + settings.type);
        }

        if (settings.timeout && (settings.timeout < 0 || settings.timeout > 0) && !settings.closeButton) {
          self.closeButton = false;
        } else {
          self.classes.add('has-close');
          self.closeButton = true;
        }

        if (settings.progressBar) {
          self.progressBar = new Progress();
        }

        self.on('click', function (e) {
          if (e.target.className.indexOf(self.classPrefix + 'close') != -1) {
            self.close();
          }
        });
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, prefix = self.classPrefix, icon = '', closeButton = '', progressBar = '', notificationStyle = '';

        if (self.icon) {
          icon = '<i class="' + prefix + 'ico' + ' ' + prefix + 'i-' + self.icon + '"></i>';
        }

        if (self.color) {
          notificationStyle = ' style="background-color: ' + self.color + '"';
        }

        if (self.closeButton) {
          closeButton = '<button type="button" class="' + prefix + 'close" aria-hidden="true">\u00d7</button>';
        }

        if (self.progressBar) {
          progressBar = self.progressBar.renderHtml();
        }

        return (
          '<div id="' + self._id + '" class="' + self.classes + '"' + notificationStyle + ' role="presentation">' +
          icon +
          '<div class="' + prefix + 'notification-inner">' + self.state.get('text') + '</div>' +
          progressBar +
          closeButton +
          '</div>'
        );
      },

      postRender: function () {
        var self = this;

        Delay.setTimeout(function () {
          self.$el.addClass(self.classPrefix + 'in');
        });

        return self._super();
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:text', function (e) {
          self.getEl().childNodes[1].innerHTML = e.value;
        });
        if (self.progressBar) {
          self.progressBar.bindStates();
        }
        return self._super();
      },

      close: function () {
        var self = this;

        if (!self.fire('close').isDefaultPrevented()) {
          self.remove();
        }

        return self;
      },

      /**
       * Repaints the control after a layout operation.
       *
       * @method repaint
       */
      repaint: function () {
        var self = this, style, rect;

        style = self.getEl().style;
        rect = self._layoutRect;

        style.left = rect.x + 'px';
        style.top = rect.y + 'px';

        // Hardcoded arbitrary z-value because we want the
        // notifications under the other windows
        style.zIndex = 0xFFFF - 1;
      }
    });
  }
);
/**
 * NotificationManager.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles the creation of TinyMCE's notifications.
 *
 * @class tinymce.NotificationManager
 * @example
 * // Opens a new notification of type "error" with text "An error occurred."
 * tinymce.activeEditor.notificationManager.open({
 *    text: 'An error occurred.',
 *    type: 'error'
 * });
 */
define(
  'tinymce.core.NotificationManager',
  [
    "tinymce.core.ui.Notification",
    "tinymce.core.util.Delay",
    "tinymce.core.util.Tools"
  ],
  function (Notification, Delay, Tools) {
    return function (editor) {
      var self = this, notifications = [];

      function getLastNotification() {
        if (notifications.length) {
          return notifications[notifications.length - 1];
        }
      }

      self.notifications = notifications;

      function resizeWindowEvent() {
        Delay.requestAnimationFrame(function () {
          prePositionNotifications();
          positionNotifications();
        });
      }

      // Since the viewport will change based on the present notifications, we need to move them all to the
      // top left of the viewport to give an accurate size measurement so we can position them later.
      function prePositionNotifications() {
        for (var i = 0; i < notifications.length; i++) {
          notifications[i].moveTo(0, 0);
        }
      }

      function positionNotifications() {
        if (notifications.length > 0) {
          var firstItem = notifications.slice(0, 1)[0];
          var container = editor.inline ? editor.getElement() : editor.getContentAreaContainer();
          firstItem.moveRel(container, 'tc-tc');
          if (notifications.length > 1) {
            for (var i = 1; i < notifications.length; i++) {
              notifications[i].moveRel(notifications[i - 1].getEl(), 'bc-tc');
            }
          }
        }
      }

      editor.on('remove', function () {
        var i = notifications.length;

        while (i--) {
          notifications[i].close();
        }
      });

      editor.on('ResizeEditor', positionNotifications);
      editor.on('ResizeWindow', resizeWindowEvent);

      /**
       * Opens a new notification.
       *
       * @method open
       * @param {Object} args Optional name/value settings collection contains things like timeout/color/message etc.
       */
      self.open = function (args) {
        // Never open notification if editor has been removed.
        if (editor.removed) {
          return;
        }

        var notif;

        editor.editorManager.setActive(editor);

        var duplicate = findDuplicateMessage(notifications, args);

        if (duplicate === null) {
          notif = new Notification(args);
          notifications.push(notif);

          //If we have a timeout value
          if (args.timeout > 0) {
            notif.timer = setTimeout(function () {
              notif.close();
            }, args.timeout);
          }

          notif.on('close', function () {
            var i = notifications.length;

            if (notif.timer) {
              editor.getWin().clearTimeout(notif.timer);
            }

            while (i--) {
              if (notifications[i] === notif) {
                notifications.splice(i, 1);
              }
            }

            positionNotifications();
          });

          notif.renderTo();

          positionNotifications();
        } else {
          notif = duplicate;
        }

        return notif;
      };

      /**
       * Closes the top most notification.
       *
       * @method close
       */
      self.close = function () {
        if (getLastNotification()) {
          getLastNotification().close();
        }
      };

      /**
       * Returns the currently opened notification objects.
       *
       * @method getNotifications
       * @return {Array} Array of the currently opened notifications.
       */
      self.getNotifications = function () {
        return notifications;
      };

      editor.on('SkinLoaded', function () {
        var serviceMessage = editor.settings.service_message;

        if (serviceMessage) {
          editor.notificationManager.open({
            text: serviceMessage,
            type: 'warning',
            timeout: 0,
            icon: ''
          });
        }
      });

      /**
       * Finds any existing notification with the same properties as the new one.
       * Returns either the found notification or null.
       *
       * @param {Notification[]} notificationArray - Array of current notifications
       * @param {type: string, } newNotification - New notification object
       * @returns {?Notification}
       */
      function findDuplicateMessage(notificationArray, newNotification) {
        if (!isPlainTextNotification(newNotification)) {
          return null;
        }

        var filteredNotifications = Tools.grep(notificationArray, function (notification) {
          return isSameNotification(newNotification, notification);
        });

        return filteredNotifications.length === 0 ? null : filteredNotifications[0];
      }

      /**
       * Checks if the passed in args object has the same
       * type and text properties as the sent in notification.
       *
       * @param {type: string, text: string} a - New notification args object
       * @param {Notification} b - Old notification
       * @returns {boolean}
       */
      function isSameNotification(a, b) {
        return a.type === b.settings.type && a.text === b.settings.text;
      }

      /**
       * Checks that the notification does not have a progressBar
       * or timeour property.
       *
       * @param {Notification} notification - Notification to check
       * @returns {boolean}
       */
      function isPlainTextNotification(notification) {
        return !notification.progressBar && !notification.timeout;
      }

      //self.positionNotifications = positionNotifications;
    };
  }
);

/**
 * EditorObservable.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This mixin contains the event logic for the tinymce.Editor class.
 *
 * @mixin tinymce.EditorObservable
 * @extends tinymce.util.Observable
 */
define(
  'tinymce.core.EditorObservable',
  [
    "tinymce.core.util.Observable",
    "tinymce.core.dom.DOMUtils",
    "tinymce.core.util.Tools"
  ],
  function (Observable, DOMUtils, Tools) {
    var DOM = DOMUtils.DOM, customEventRootDelegates;

    /**
     * Returns the event target so for the specified event. Some events fire
     * only on document, some fire on documentElement etc. This also handles the
     * custom event root setting where it returns that element instead of the body.
     *
     * @private
     * @param {tinymce.Editor} editor Editor instance to get event target from.
     * @param {String} eventName Name of the event for example "click".
     * @return {Element/Document} HTML Element or document target to bind on.
     */
    function getEventTarget(editor, eventName) {
      if (eventName == 'selectionchange') {
        return editor.getDoc();
      }

      // Need to bind mousedown/mouseup etc to document not body in iframe mode
      // Since the user might click on the HTML element not the BODY
      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {
        return editor.getDoc().documentElement;
      }

      // Bind to event root instead of body if it's defined
      if (editor.settings.event_root) {
        if (!editor.eventRoot) {
          editor.eventRoot = DOM.select(editor.settings.event_root)[0];
        }

        return editor.eventRoot;
      }

      return editor.getBody();
    }

    /**
     * Binds a event delegate for the specified name this delegate will fire
     * the event to the editor dispatcher.
     *
     * @private
     * @param {tinymce.Editor} editor Editor instance to get event target from.
     * @param {String} eventName Name of the event for example "click".
     */
    function bindEventDelegate(editor, eventName) {
      var eventRootElm, delegate;

      function isListening(editor) {
        return !editor.hidden && !editor.readonly;
      }

      if (!editor.delegates) {
        editor.delegates = {};
      }

      if (editor.delegates[eventName] || editor.removed) {
        return;
      }

      eventRootElm = getEventTarget(editor, eventName);

      if (editor.settings.event_root) {
        if (!customEventRootDelegates) {
          customEventRootDelegates = {};
          editor.editorManager.on('removeEditor', function () {
            var name;

            if (!editor.editorManager.activeEditor) {
              if (customEventRootDelegates) {
                for (name in customEventRootDelegates) {
                  editor.dom.unbind(getEventTarget(editor, name));
                }

                customEventRootDelegates = null;
              }
            }
          });
        }

        if (customEventRootDelegates[eventName]) {
          return;
        }

        delegate = function (e) {
          var target = e.target, editors = editor.editorManager.editors, i = editors.length;

          while (i--) {
            var body = editors[i].getBody();

            if (body === target || DOM.isChildOf(target, body)) {
              if (isListening(editors[i])) {
                editors[i].fire(eventName, e);
              }
            }
          }
        };

        customEventRootDelegates[eventName] = delegate;
        DOM.bind(eventRootElm, eventName, delegate);
      } else {
        delegate = function (e) {
          if (isListening(editor)) {
            editor.fire(eventName, e);
          }
        };

        DOM.bind(eventRootElm, eventName, delegate);
        editor.delegates[eventName] = delegate;
      }
    }

    var EditorObservable = {
      /**
       * Bind any pending event delegates. This gets executed after the target body/document is created.
       *
       * @private
       */
      bindPendingEventDelegates: function () {
        var self = this;

        Tools.each(self._pendingNativeEvents, function (name) {
          bindEventDelegate(self, name);
        });
      },

      /**
       * Toggles a native event on/off this is called by the EventDispatcher when
       * the first native event handler is added and when the last native event handler is removed.
       *
       * @private
       */
      toggleNativeEvent: function (name, state) {
        var self = this;

        // Never bind focus/blur since the FocusManager fakes those
        if (name == "focus" || name == "blur") {
          return;
        }

        if (state) {
          if (self.initialized) {
            bindEventDelegate(self, name);
          } else {
            if (!self._pendingNativeEvents) {
              self._pendingNativeEvents = [name];
            } else {
              self._pendingNativeEvents.push(name);
            }
          }
        } else if (self.initialized) {
          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);
          delete self.delegates[name];
        }
      },

      /**
       * Unbinds all native event handlers that means delegates, custom events bound using the Events API etc.
       *
       * @private
       */
      unbindAllNativeEvents: function () {
        var self = this, name;

        if (self.delegates) {
          for (name in self.delegates) {
            self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);
          }

          delete self.delegates;
        }

        if (!self.inline) {
          self.getBody().onload = null;
          self.dom.unbind(self.getWin());
          self.dom.unbind(self.getDoc());
        }

        self.dom.unbind(self.getBody());
        self.dom.unbind(self.getContainer());
      }
    };

    EditorObservable = Tools.extend({}, Observable, EditorObservable);

    return EditorObservable;
  }
);

/**
 * Shortcuts.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Contains logic for handling keyboard shortcuts.
 *
 * @class tinymce.Shortcuts
 * @example
 * editor.shortcuts.add('ctrl+a', "description of the shortcut", function() {});
 * editor.shortcuts.add('meta+a', "description of the shortcut", function() {}); // "meta" maps to Command on Mac and Ctrl on PC
 * editor.shortcuts.add('ctrl+alt+a', "description of the shortcut", function() {});
 * editor.shortcuts.add('access+a', "description of the shortcut", function() {}); // "access" maps to ctrl+alt on Mac and shift+alt on PC
 */
define(
  'tinymce.core.Shortcuts',
  [
    'tinymce.core.util.Tools',
    'tinymce.core.Env'
  ],
  function (Tools, Env) {
    var each = Tools.each, explode = Tools.explode;

    var keyCodeLookup = {
      "f9": 120,
      "f10": 121,
      "f11": 122
    };

    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');

    return function (editor) {
      var self = this, shortcuts = {}, pendingPatterns = [];

      function parseShortcut(pattern) {
        var id, key, shortcut = {};

        // Parse modifiers and keys ctrl+alt+b for example
        each(explode(pattern, '+'), function (value) {
          if (value in modifierNames) {
            shortcut[value] = true;
          } else {
            // Allow numeric keycodes like ctrl+219 for ctrl+[
            if (/^[0-9]{2,}$/.test(value)) {
              shortcut.keyCode = parseInt(value, 10);
            } else {
              shortcut.charCode = value.charCodeAt(0);
              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);
            }
          }
        });

        // Generate unique id for modifier combination and set default state for unused modifiers
        id = [shortcut.keyCode];
        for (key in modifierNames) {
          if (shortcut[key]) {
            id.push(key);
          } else {
            shortcut[key] = false;
          }
        }
        shortcut.id = id.join(',');

        // Handle special access modifier differently depending on Mac/Win
        if (shortcut.access) {
          shortcut.alt = true;

          if (Env.mac) {
            shortcut.ctrl = true;
          } else {
            shortcut.shift = true;
          }
        }

        // Handle special meta modifier differently depending on Mac/Win
        if (shortcut.meta) {
          if (Env.mac) {
            shortcut.meta = true;
          } else {
            shortcut.ctrl = true;
            shortcut.meta = false;
          }
        }

        return shortcut;
      }

      function createShortcut(pattern, desc, cmdFunc, scope) {
        var shortcuts;

        shortcuts = Tools.map(explode(pattern, '>'), parseShortcut);
        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {
          func: cmdFunc,
          scope: scope || editor
        });

        return Tools.extend(shortcuts[0], {
          desc: editor.translate(desc),
          subpatterns: shortcuts.slice(1)
        });
      }

      function hasModifier(e) {
        return e.altKey || e.ctrlKey || e.metaKey;
      }

      function isFunctionKey(e) {
        return e.type === "keydown" && e.keyCode >= 112 && e.keyCode <= 123;
      }

      function matchShortcut(e, shortcut) {
        if (!shortcut) {
          return false;
        }

        if (shortcut.ctrl != e.ctrlKey || shortcut.meta != e.metaKey) {
          return false;
        }

        if (shortcut.alt != e.altKey || shortcut.shift != e.shiftKey) {
          return false;
        }

        if (e.keyCode == shortcut.keyCode || (e.charCode && e.charCode == shortcut.charCode)) {
          e.preventDefault();
          return true;
        }

        return false;
      }

      function executeShortcutAction(shortcut) {
        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;
      }

      editor.on('keyup keypress keydown', function (e) {
        if ((hasModifier(e) || isFunctionKey(e)) && !e.isDefaultPrevented()) {
          each(shortcuts, function (shortcut) {
            if (matchShortcut(e, shortcut)) {
              pendingPatterns = shortcut.subpatterns.slice(0);

              if (e.type == "keydown") {
                executeShortcutAction(shortcut);
              }

              return true;
            }
          });

          if (matchShortcut(e, pendingPatterns[0])) {
            if (pendingPatterns.length === 1) {
              if (e.type == "keydown") {
                executeShortcutAction(pendingPatterns[0]);
              }
            }

            pendingPatterns.shift();
          }
        }
      });

      /**
       * Adds a keyboard shortcut for some command or function.
       *
       * @method add
       * @param {String} pattern Shortcut pattern. Like for example: ctrl+alt+o.
       * @param {String} desc Text description for the command.
       * @param {String/Function} cmdFunc Command name string or function to execute when the key is pressed.
       * @param {Object} scope Optional scope to execute the function in.
       * @return {Boolean} true/false state if the shortcut was added or not.
       */
      self.add = function (pattern, desc, cmdFunc, scope) {
        var cmd;

        cmd = cmdFunc;

        if (typeof cmdFunc === 'string') {
          cmdFunc = function () {
            editor.execCommand(cmd, false, null);
          };
        } else if (Tools.isArray(cmd)) {
          cmdFunc = function () {
            editor.execCommand(cmd[0], cmd[1], cmd[2]);
          };
        }

        each(explode(Tools.trim(pattern.toLowerCase())), function (pattern) {
          var shortcut = createShortcut(pattern, desc, cmdFunc, scope);
          shortcuts[shortcut.id] = shortcut;
        });

        return true;
      };

      /**
       * Remove a keyboard shortcut by pattern.
       *
       * @method remove
       * @param {String} pattern Shortcut pattern. Like for example: ctrl+alt+o.
       * @return {Boolean} true/false state if the shortcut was removed or not.
       */
      self.remove = function (pattern) {
        var shortcut = createShortcut(pattern);

        if (shortcuts[shortcut.id]) {
          delete shortcuts[shortcut.id];
          return true;
        }

        return false;
      };
  B¬G‡\¼Z
(ĞàÀ.”`Î„— D „Ğ Î8Â8I†…$9@w@2ƒ¬a¢Tá”˜V­­C0N˜
 É,1„>3A*Eˆ
J'¦FTÀâBˆ‰,
‹Ù„„”0òÆ:ô¶Ï¾“¾ıú¿ï<í›äõªïnûlŠö]ì¶¸O|]éş”×uä¶‡`ıùsßËöÿåÇ?ç÷~´ÏB¹N:ËesFk÷zï{äâVùo(·ñcúOï3²*6‹õ&ßÀÖÈ\úM_ûŸ?[öºÉ×¨f­ÿÍ_Ùı÷nÿ¾‹úÉ?üyÏew÷]×›Ë÷³öwşI˜/1Ùü/ÙL…|Ï®ã5†¶ü3VÔ]kŞ)Íç/“Iôíá~xÛ»ô”6~[÷¼éF™’ü½Í+1Û½ÿ¾ñù½Ó¤ÿ[ØûçúşÖö¥‡¶üß±Òv·íÔwŞï=Ø¾>6èõ d ŠA‚B,€ 4B^L)$„°	p&Àm,a  
Ä€²0B˜¢ *•±´°ğB€@™ ‰@oÒp
ÄÀ€!† r8H 0@@ `A©‚@R`D÷€Ô @¨‰ …d‚¶¢d ±±%~ôî_ñ' o jùÅÿñİu77Óş¾éî$üÄ{{Ïñ_Şú]3k×øšÿíuGè•óµçëY+Ş]Çß-'Ú^ëVWŞÜ¿òÒ¿GšéÎ»Ï~EüSÿ)7×¾­›s;ık±ß·+Üæ5†,ñÇîw8ùÕÿ›ïz¯4&óğ®Ÿ	” ¤á¥b@B5	€7ø‘á " P 2‰Î2È^
U ˆ ƒ	(u€Eä@"DwÅ¯3  €CÂªÍ0	 ÅC€u¸À	BhH„.™ …€\R \ ‘&A‡´	ĞŠâ  á2X/BA Q @" œÂ0@¤0 +iŒtMÃA 0±Td ƒ¢M€‚bä¨‚(0#° 2¡ P˜€H 8\K+¢Z ‚@gPD‚ €dö4Lˆb² RÎe“èl<@[2 ‚¨AÙ¿­×`oİ´ï§ŠïÏY´üyëşkÏx¿û÷¶ó[óÏõòõòş¿¿º"·¾}ê³Ùkˆ‘'z×´ı^¿ï|ÜÜüÑïíñİ›Í‹UïË}ñdµqW}QÔ¯Ÿõ.õEù}³"}‡C·©èç2)½ÛAòïéy}÷÷àï¿ı{IM¿!²°ÀD€á# \\ F
½‹¡L] eĞ0¬Hˆ!•¹˜J9ÅCJ†€C”<# NÊ”Ã 4Çò0Â"¨¸È*<$	 ˆ+(`^‚Œ 4 C€2gÂH ÂBˆØˆ-2 @X$Œ°I‘Ş¢SŞµJ/šåß&jı^m—ÿ·ŒFQ^úYÙ9‡à>]Z®ı}³l|·{Kéu×	!Ø·i·bé\±õ€‡…Å{îß·Ê½Ç#¹Ôö]·û^ö„½w.ÿõwãÿT;µ>ûYäµº/l»æœÿ³{›Ï>úÿ¿Ÿf;_#Prÿ¿µ¹Gï¯YO»{Ò§+!ìdï~s×zÁt“_±şô¼§ı¾\å.ÏÒÔ‡Ü]©İ¯Ê'öı9İ[ÇúÖÚ¯cûÜÒ;Î-úçùógò_[»åÆ`ú½Ô³nù‚ışıÿß™a†ïŞÍæ¼Uÿõ¿›öñ+S~ÌïõÊ^ks!¯‰æ{øë­6ã!@Ğ\F@4å f Q‚ÀĞq%0æ…& *ˆ”AıAŠR!8
4„t  €vˆÆÅ8W	€ÜÁ  ¡Dk¤‚
ä’Â˜-İÃN¢‘ Ih¢0 ã>%Àñp"LŒD ½™!u ¤¢:İ¼š)˜Ï=æ*tşÍÿß\±»ûûy+cù¾xóµÑW½¿ïË?W¦;o¯g¯ûWş'ÿï>}³Şû»ñ9ÖkŸKœ…·?WĞ–ßô²™;Îëïìó…¼7æ“ãÒ·òÌ&·½ùöºn˜ì‚óíoó‹±oó¼¶»y{Ÿã“¤³ùWûgì:)
Jà à0B2\ @äC‘q0…;„ˆ()C!€	P¨ÄFHÀ ÃXòî¨,R “À"HGÄÃ0q
X”'‰[@šÑ ;„AÉ7:Ã$B@ƒ I¡¸¼‚ ˆ©yJ!£gˆ#NÜaê”!D°V"äH¨¨) âD@]Íp"ká€‚ƒÂ@ÄD@Fpˆ@²€1
U˜´€ˆHˆX èŠ\¤ˆŠ¸A`.a°%¦§ Eúc0 ¦ FÒ@(Ø)Øè"‘? GIö@‚wJ¹ã©ß<¾³²,vGbÈ7ÜSÑRm7Î½üúm{íİÿ³ÛöÉ45õ|½ûşQtóÙŸß©û÷´=Üıë{ï¨¢…{ë¶§÷;|ë¯oËYÛ7Üÿ{ü¿ïg–¿ï}yÿMíşö«öñd[}ÓÜóıÛ—¾6ï[Şı{‰‡_ÏíA4©‚AóH0 †$ 9XA ‚B  (Q ’‰50)AH@+” Á	@<àØ Â‚@ÁBˆ½dˆÔ RH"¤àNaàrF‘È  àÑ… áÄ‘Œ‚a1&) U2" IT!¨>!qÒ„4÷şBìÿ½iâŞÎ›ÿ±kKÒUwšI›ÛÔ¬§+û¿nâ±?]f¾m¬µ-º_ûË¾ÕÎ}÷÷?/L~öß{ßgùëéÿïÛæ–­Åá;|zíôİÙÑ­íŸ]„{O½ÿ°kÜ²¿?'Ï^ÇŸİ|úßï¾{ßûÙ™Œ/ÒúÁ»?ÿ+î½JWrS9×ó‹û…[]çEø^Asõ¶ëÁîÛ>µ[=É;Uì®ÅZİ…Kó¶’Ïq^ûoÿÏõcv~şîıï¯üâ«çqqöö71w“}ZkÎÿ"1•í'ÛŸó=—_KœİæãñxoÚæåÓ´9¾Ç³Çôú[S×mÑAH„CÒHP”€Â1Š—ÂRQ¢„€D]B	ÀP§ @’à „¨, €… 1%€×°’°± (B€ì”Œ’( ¥8¨,*¼@H„p·"
\
`h„°€¼mB€
ÄJ¡øÇÏ}£Ñ×W9³ìx\¶ß3<ÿåÇÛc¡ıß¿|–¿æµT¡Ç¯£º|ÿİ'r+ÕËÿ};ÇôÃæÕgï#bµtwß/ÎœR>~Ç®gT÷¿³õŸóÿıè6}7î¿÷è¶¿çóšî7ü^d_—“ëæÒÿ­_rÍÙºêîvï•'Éº£â@("	…!~H!A@™Ø;œ ÀŠd˜¸ƒÃi-Q ˜ 4 ‡Z €Ä­¡²°ØCáU+@*†@P°K‡ ?:D m	N DÉˆ¸¢°d*!Ô4¸ÂØ†<EB @ÀW, fOÈA	F†B0!¡hxB¢ã!ˆ³ä(PE:Y hÀ B˜` ÈN‰P4((Aà>Â5Ün<V =Ë, Ü`] "Á(–ehD ƒ€¿hĞ¢¨Dæ`@R-ŠÀ¡fRi 	  o„¤	   Äh‚§0AÖ(@¾ğ×ï½¼¹í_Ó·÷ïß oıİÓÏííÛÌwû¶¾ß[W¬¼øîãßıâÌİÿşhwğ}Ü÷kîİşúfß®¾ÏßEt–˜‡ÓšÎ.y¿¿ßı~ÛÎØ¹8M{Òòv_ïÿ?Û?7?öÛ–Ü¿ÿ?M…¬9Æ¾»õçs6~Z·÷±áİÕ€»` ƒ+Á’à€ktP 22 M@`F÷4Ê†ÒFHr’Dt 5Ç+4A HChc˜KÆØğƒPaˆ6(‰àÀjYAyĞ"’í { ‚ `0g˜"€4dˆ İƒG@‹¼$6D’8ª€™µõßÏÿı­íşÇ;—ÏêûcöùZu¹Y¿j½åæz‡ÜíÙøløªÓ7}wz@çšÇß7÷.¿åşü'Ü¹mê\µé¯WûÜÿŞlŸ?şŸ-Kõ¹¼ıÏ¾Ø±íÊü»<Ü¾¾¿?dÊê+ÒÕ?uÈŞÒ§ğïé¾O÷>®ó¿w¢2Fº–¹ö>éÛ©û›·‹ƒî‡ïæ¿Póz2òòë_®Ë~Ÿí–W½‹;ø—î¿Öóºi½£ñ£×|v–×^7ëÿËÙÿo½÷ßİöû”õülşÿÿSÏ¹6Ş»]³_ØìŞòÎ÷»QZŞ¡İ§²;>ìÄ{ë¶Ÿï.ºº•jƒAWğt9]±šA!±Cè2L! n¥vG–á’Pl.ğ¬ …áW8€ $d M¤tÍ‚F"d"@ˆ¨F`AŠ±³ÒìÑ P°ÁÄZ    ‚Ê(ˆF†Kd >GHŠ†œ&)Z C^'@ƒHÅ$—líÜ<É-ïÿvï¬|ÅGÿÒì÷ÿÉ'ö{Çë+wûßÿS¤şß5Tû5ZñŸõë¯‡¸ivåÿ1ü]óiÕ]}'ùºku_­¾}ü›q§âÄrıa?´Ş=·/™öx¯·öënßq—é·ïOõØök·n†]gÚÔ×¹O·öìä{®ı}€ !œd‚¸Y$:P¥ĞXPa¢H# OZ ‡jˆD„ rb §€HE ˜²À¤…`LÅ 4ND Ğ¢]D{@P2¨ƒèŠ@¨	 Å
1â¹òˆ`@˜¯BUF¦,J³Dğ‘©®\ägÃˆQ€dp)BC× Cp Ç!@rŠ00%‚ú\,Ñ@¦ñ4A E¨ÁÀI%·Á"3‘&1ª!H½İF	Ò4
#v¤*¸¡M€#@ š0ÊPè!PU>€El

 4ÄäP 1 ‚Ë“ÃWä:TŠ€*Jêûİn?²ö{ÉiŸõ¹·÷~¯á«G›3ø*7µfÖŞÿ¿óB2F“÷¯ïÆ_úäŸrşíeodÓú§õ®·÷f§ÛÜ×nÙ´~C½¶’.g¸_Mş¡Ü|¡½|{îyÜÿ{)<¿û·ºº§ùòqş÷zír™ï¹³NzÄVÿ¯ò`f¤Ïû{ï¿ÏÅëï£_Åæ"lëû¼BŸ:ïÙ›os4pï…œïõIËÿÊX»¡½×:ïÿü-]zEº‡ºôßÖñşÆÎWáÿN=kÆä¶sƒº]ßÌÚõ´}±Z_ûıÒø~ël6Î[ß]¶KÌ¾oAóíşy<á¯ÖRHğA#$ñ4$‡mÆœJQ†UkÀ0ŒÔa!Å
(‡1  °H²gŒ Ó CXˆ¦MÑ ht8æAh›¾QQ %FTDN;H,&%À¦=Ô†”®¢Å Hä"9@Z%°%J†|?b"€ $ @H˜ö(€b ˆ~Ù…XŸ F Ä	Šr‚Ê Òjy.„A%¢JP¸XˆÁ»ŒÁP(˜(€„A¨I	(¤ü€"ÕY° rN‰¤ˆ¬@ÀÒ$€€Î“@H$í(‚„…E‚`„(ÕA@ÀU! &–ºü=/¿K§¯¯–<¿_3ï÷¿¸?ÛåØu_Ó¯šôßtl´óİÍæ½W^úåßûuUÜÉöp;‘¹P¿öÄıîñİïœ§ŸuŠVW¯ÇÚöÖ[ïÍŞ/Ñ>wÑã¾¼Œú->ü}M¬ó·´½yişmêš¹ßçuÜz+úşç|äb(Ğ†$K¨Œ•RŠ ¬œ 0ã	*uD$±‚'¶)€Íx¿"T
‰(K $Ú€ì” „ä™æ„x‰ „ ,”º
tÖ8h”Ô`Ÿ¡0( 7…‰5àÅD°K*ì°(8H\
°¤¢š% „ê¨” `9 X\"²ããÎö/¦çhß!ÀİÎõù5V¾{8÷ôl>ÿÕ‘»2nFfÕ¶íÓEßLÚXúİÿl½EíÑ×Îûu9UŸ?I\Ÿ’_u}Ú½¦½Z÷«²˜ùó¾ÿFı¿Ô«v;1Cœ}íºecºó)~5ğ§şïóöèöú½ÿßÙ|?#ÿ\‡wş÷qö7×FŸòøÔÇû:ÏO3Ğ§_¯Kliyâ^ÏŠò»;ÊSo”éVÛzZÿï|­OkÎ¾·cç[ïO²éÃÛÇÇêÂÕ³Üëø»¼ŞÍ±w»¯×èÓV}ö¶{«î}ešÃlåğıgÔêW§s©´õ±zOşQ}­çºìW×ôı£ûşïH¤4	@Á€0ÁaüaTË Ä+ˆx4ãïDF’4Èm…H”Ğ†(.F#D @c$Š A)ğ’@øH0p‘ATDLEX[ 
bD¹ ÈF@„¤$ƒe€(u A©G4`´	`¼®ùŞ]¸Øp|·ãi—±}·ßĞ¾æßùÙw·ÿE3ŸEdÂÜ´İ¾ãsãe«Ù;îüĞßsı)Õ¶dŸ}~X.aúşWó?å¾åOÅø÷Şòï¨¼­y_Ì­.ô­~gß§ç1ù—§ú¯ŞÏÒ‡ÏƒÙÿûœ³/|i<ÛŞ<—ŒÛ]­Àü-ÁdL@	‚Á$zl$€|$E»æ cÌ¤µğJÃ§ÒÍ¼€"i$º„P‚k"(S´Š©!† Â¡%j*0@Èˆ•Aq‚!¬7#`„ºPh•*xX6L  ·",ÌPA¨ „ ÀÕ0 À 
 œJ$B Hàlb!ê$DÕÎÇ€Q*H)@l  \áˆ#tÀP5€B€é< t@ n©Ç¶#!0ÇÎ°Z@9ˆ(	@AX'y

 p :à„	(
 ¸É „‚©h @P)W€ÂDP†oß¬ÚÉ!FõMë1m÷î]ıMş|}j6QÛol{ÿ“}j³bú§«îØİ(*ˆ­\üÃêü{ù¢×µËã]Ï–ãÿw|‹å]ùÎõëÿw~íYÃ›ø
kÓûwûÁµÆ¶–s¼Ò9çåÙë§û¼§ßÍÿô÷¬.ó¾”¯öGÎ*â’%)DÂƒT1 C…j^F9^ Òø$€„ †@ˆ  vª ¯ÀaÂÉ
å@Ø
@N r~8EˆP   ‘Àì€ˆ1‰|™À°ÉÀ‚;Äa†m*brHMPIB¦zÂşÕÕ¹:îæîşŒ––©Ş{Nr–Éûô¦ïÜÖ“Œ`SÛÎdåº¸íÓ¹;~wşó˜ÎÔ‰§_Şt¸{SÍ|ß>v»gwª>ïóıÒş&ü9şø?›¿ò—_H¯ãZïêQõÕ÷ù_ÿ‡õßï‡ÿ˜u­G¥ÍÏ˜ÙŸï÷>wµöøÇ8·÷kíîı¯øt2)ï‘¯şŒé½ı,}c2Ai¼½dúj{×‰ÿŸj±îŸ÷yñ²»¿¢şô‰/|³É¼õ}³…éh¶É¯,{ßÃ¨Òõù‰‘¶_"Ñ¿¦“—Ş·è½fo¾Ş¯Wóşğûäírºüüæê¥ÓáT¬-GG%ãöónAĞÄÀ Š"hœR 0BE©¢IX„™„ ¤Š& Å ‡ LÄA¨2â4õ$&¦(†‘% "H±„™j1"À$ (HK)à“¨ˆ‰i*²ö$ !é™ÇCÁ%‘M0Àc	Œ[?l³Ûğ>¬—§+ö…÷Ò<ÿˆgùßóºç¿î‡•İ÷5_İmĞ*ï[õîY’Bºß¹µVgã·©Ü¸½¯Sıõéßõ}/}÷ùİáFÏäµU‘õòñu}V|ËÓ®şıÈó§ßõ9QïÈè×-=«;øXòÔ:³­´ùŞo›dP)ÀsĞ@à@Â jÕBÒƒB €Hc\âw´#1ö	!x !ŠÑÃ*7†!d†±Y¡7Á|  ÂD"fL0!‚$VÒ¡,Ñ.a 
”.!ìVdí-#ä%Q#9Nhh*FXšĞRô/ÁØ˜¤¸4Ò R\¦ €¼$¾<2kö­€Ü%‡	áE	‡À"™èB%B²Tl(ÁAğbÂ‘@´‘8 ^@˜		aƒ ¦r@0aà
DTœâ@ÆÑe IT"
ItSTlÒ„H‚€¿ù7ı¿¿¿2û¿gm»o»ñvotÙÿoñëËßû[=ï¶_5èªı]ãÿzÿ|~}>íNVÍt/ÿ¤ûŒ_Hâïá¿ÑÏ4¾­ÁuŒ÷û·‡GXÖi÷ñööÆ‘ç»ÍkßzkåWî¦nøwÎè5ôğL§êF”î>Q¦€O!
™B'$Z ñ*"ÒI…è
ñ4‰0á a-° ÀFC @€Â5†á…P T™¹6P @P €6K‡ ˆŠ‰@I&@IB90! B2”Dˆ[¡L‰R[Ä00"G©úºOdË¾ïğÕ<S§{«òñçJÙıï°Tç½üG{Ûÿë~¾o×¯ÿé4ö"ZLíñ×ñıÛííwßàª_·ì^âîó^;9÷Óò–î°én\`õ[I ù:Ù¿¤_ŸµWëõÎ?ï=Óıoxs/¾û×õ÷›:F÷Q£-gÓ—ÿÄ¡k÷Z\é½n´Yß}û„)Hşıîq·,/¿ë´çêÀSòıİî¯ñÅQåòî±ŞÔ0éäÿ#iõsö½Úíõæşúëµü¿_ÏÛı9èmõO´{ÿsóşÓy­)úü–)_¡ÍWnuµ|Ü·ËúUE§}ıïÏ®¿×ÿû .`  €0ÖCºPV€0ÁH„P‰C˜ˆF`PX˜ÀO$Ãè¬8¤(L6„ @pÌ	.UBP"Ná@*rZ"d<y.€À@êx/¸$LäˆÀª—T 4x $!ÁrYÄ¶ì¢*Ñ0€T¦Äı¾_¿¹ºĞµÖü.Ÿ~^×gL¿?ôã¤Åÿƒ¿Ïò'ïnâó]¬ogïh~ëÚç×vÙºå÷çöÚ^¿¦>úAF·½¾ù¾¼oğm“zÏG5~—}Üwûè^s_·¿z?S_öW÷ûûûsJ}7P^öÓ‚{ÿ¯¢i‚p.€âfzX9  ÚQë%À(¤J‰€Prƒx#ŒĞ`Rp&P!	PéA*Íb@8¨!-J¥T ¢$=  Pª†   PJÄ@J

±XŒkzğš6%Âƒ 3’ôĞ``b €Â€À €0,ÉäŠĞP¨|1Êë"p‰¤1@­A„ Ad€…”À‚à¸2¸w"è`à€™(Eˆh $ „‡Äœ,FÂ „A4‚B$p/œŒ°c€X ÃÀ³˜p‚DJ¡9U˜!4ÀPğXCÄÍ•~e±õSMGÊıÏÓ›w?/õû^£ÚÅÛõp¢>zÔy÷ØDıë¹»55Å‘x7¡ËÛöñÏ »<÷øJgÖõh‹˜_º}§İ—;–ëƒå]Îr¾ûz0rÈÚ÷áòwöÚÓıÇÑ|‰Ì§õ•½´ü^gƒé¶ú÷ŠS¹ÈÜ·½ñ¿…¾‚Æ  DL&‚"˜ czËÀ‚Ñ† PËu¬àà!–—XP™º›ÙPDQQ…Ø PÄC4AIˆd`¨Í•¤Y–È!@r©IĞ„0G'Á JÄ¢ñ,)]l’Ø ¸ `€c~J°Æ€Àú{Šş¨ÿ¯[—óhÿ÷wı<Ş©üş»:ş6I÷ü¨v|kÒÿÛí&|ô<Ràêw»<ıV¿“÷Ÿş³dôß¸w¼®Óß
³pë˜úÕ?âuòêïåÕ¯úÎŸJ²slkÓÿæeŸß=·“«òïñıİ÷ÜNóí÷e3İ;ßuıè-¯î•oú¿Ÿfµšı[ãş{uß{ñÿõÁ?®ÛØ—ß·Cœö§W;ŞÏ?¿~µ[SşzÏ¶ë=S}¼>qnÊı×ñ2·ÂqÎÏÂá_6ö½¼}æ[ÙN,ş¹±æ¿Oßş/J~î÷¹1oÚ»÷–úÙ8­Òéç­_ŞíÛöÌ—ŠF„œ(%4@‘¡ €ØUI‡ 1„ &(ÚD B¥PÀd‚a¸°0‰š&U”Œ¨€@&º@  àYh€©(¤‰€€f#qJ%²h"À$@+
–* `èÁT
 1L"Bk @j„b4S‘HB ˆ         progress(e.loaded / e.total * 100);
        };

        xhr.onerror = function () {
          failure("Image upload failed due to a XHR Transport error. Code: " + xhr.status);
        };

        xhr.onload = function () {
          var json;

          if (xhr.status < 200 || xhr.status >= 300) {
            failure("HTTP Error: " + xhr.status);
            return;
          }

          json = JSON.parse(xhr.responseText);

          if (!json || typeof json.location != "string") {
            failure("Invalid JSON: " + xhr.responseText);
            return;
          }

          success(pathJoin(settings.basePath, json.location));
        };

        formData = new FormData();
        formData.append('file', blobInfo.blob(), blobInfo.filename());

        xhr.send(formData);
      }

      function noUpload() {
        return new Promise(function (resolve) {
          resolve([]);
        });
      }

      function handlerSuccess(blobInfo, url) {
        return {
          url: url,
          blobInfo: blobInfo,
          status: true
        };
      }

      function handlerFailure(blobInfo, error) {
        return {
          url: '',
          blobInfo: blobInfo,
          status: false,
          error: error
        };
      }

      function resolvePending(blobUri, result) {
        Tools.each(pendingPromises[blobUri], function (resolve) {
          resolve(result);
        });

        delete pendingPromises[blobUri];
      }

      function uploadBlobInfo(blobInfo, handler, openNotification) {
        uploadStatus.markPending(blobInfo.blobUri());

        return new Promise(function (resolve) {
          var notification, progress;

          var noop = function () {
          };

          try {
            var closeNotification = function () {
              if (notification) {
                notification.close();
                progress = noop; // Once it's closed it's closed
              }
            };

            var success = function (url) {
              closeNotification();
              uploadStatus.markUploaded(blobInfo.blobUri(), url);
              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));
              resolve(handlerSuccess(blobInfo, url));
            };

            var failure = function (error) {
              closeNotification();
              uploadStatus.removeFailed(blobInfo.blobUri());
              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));
              resolve(handlerFailure(blobInfo, error));
            };

            progress = function (percent) {
              if (percent < 0 || percent > 100) {
                return;
              }

              if (!notification) {
                notification = openNotification();
              }

              notification.progressBar.value(percent);
            };

            handler(blobInfo, success, failure, progress);
          } catch (ex) {
            resolve(handlerFailure(blobInfo, ex.message));
          }
        });
      }

      function isDefaultHandler(handler) {
        return handler === defaultHandler;
      }

      function pendingUploadBlobInfo(blobInfo) {
        var blobUri = blobInfo.blobUri();

        return new Promise(function (resolve) {
          pendingPromises[blobUri] = pendingPromises[blobUri] || [];
          pendingPromises[blobUri].push(resolve);
        });
      }

      function uploadBlobs(blobInfos, openNotification) {
        blobInfos = Tools.grep(blobInfos, function (blobInfo) {
          return !uploadStatus.isUploaded(blobInfo.blobUri());
        });

        return Promise.all(Tools.map(blobInfos, function (blobInfo) {
          return uploadStatus.isPending(blobInfo.blobUri()) ?
            pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);
        }));
      }

      function upload(blobInfos, openNotification) {
        return (!settings.url && isDefaultHandler(settings.handler)) ? noUpload() : uploadBlobs(blobInfos, openNotification);
      }

      settings = Tools.extend({
        credentials: false,
        // We are adding a notify argument to this (at the moment, until it doesn't work)
        handler: defaultHandler
      }, settings);

      return {
        upload: upload
      };
    };
  }
);
/**
 * Conversions.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Converts blob/uris back and forth.
 *
 * @private
 * @class tinymce.file.Conversions
 */
define(
  'tinymce.core.file.Conversions',
  [
    "tinymce.core.util.Promise"
  ],
  function (Promise) {
    function blobUriToBlob(url) {
      return new Promise(function (resolve, reject) {

        var rejectWithError = function () {
          reject("Cannot convert " + url + " to Blob. Resource might not exist or is inaccessible.");
        };

        try {
          var xhr = new XMLHttpRequest();

          xhr.open('GET', url, true);
          xhr.responseType = 'blob';

          xhr.onload = function () {
            if (this.status == 200) {
              resolve(this.response);
            } else {
              // IE11 makes it into onload but responds with status 500
              rejectWithError();
            }
          };

          // Chrome fires an error event instead of the exception
          // Also there seems to be no way to intercept the message that is logged to the console
          xhr.onerror = rejectWithError;

          xhr.send();
        } catch (ex) {
          rejectWithError();
        }
      });
    }

    function parseDataUri(uri) {
      var type, matches;

      uri = decodeURIComponent(uri).split(',');

      matches = /data:([^;]+)/.exec(uri[0]);
      if (matches) {
        type = matches[1];
      }

      return {
        type: type,
        data: uri[1]
      };
    }

    function dataUriToBlob(uri) {
      return new Promise(function (resolve) {
        var str, arr, i;

        uri = parseDataUri(uri);

        // Might throw error if data isn't proper base64
        try {
          str = atob(uri.data);
        } catch (e) {
          resolve(new Blob([]));
          return;
        }

        arr = new Uint8Array(str.length);

        for (i = 0; i < arr.length; i++) {
          arr[i] = str.charCodeAt(i);
        }

        resolve(new Blob([arr], { type: uri.type }));
      });
    }

    function uriToBlob(url) {
      if (url.indexOf('blob:') === 0) {
        return blobUriToBlob(url);
      }

      if (url.indexOf('data:') === 0) {
        return dataUriToBlob(url);
      }

      return null;
    }

    function blobToDataUri(blob) {
      return new Promise(function (resolve) {
        var reader = new FileReader();

        reader.onloadend = function () {
          resolve(reader.result);
        };

        reader.readAsDataURL(blob);
      });
    }

    return {
      uriToBlob: uriToBlob,
      blobToDataUri: blobToDataUri,
      parseDataUri: parseDataUri
    };
  }
);
/**
 * ImageScanner.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Finds images with data uris or blob uris. If data uris are found it will convert them into blob uris.
 *
 * @private
 * @class tinymce.file.ImageScanner
 */
define(
  'tinymce.core.file.ImageScanner',
  [
    "tinymce.core.util.Promise",
    "tinymce.core.util.Arr",
    "tinymce.core.util.Fun",
    "tinymce.core.file.Conversions",
    "tinymce.core.Env"
  ],
  function (Promise, Arr, Fun, Conversions, Env) {
    var count = 0;

    var uniqueId = function (prefix) {
      return (prefix || 'blobid') + (count++);
    };

    var imageToBlobInfo = function (blobCache, img, resolve, reject) {
      var base64, blobInfo;

      if (img.src.indexOf('blob:') === 0) {
        blobInfo = blobCache.getByUri(img.src);

        if (blobInfo) {
          resolve({
            image: img,
            blobInfo: blobInfo
          });
        } else {
          Conversions.uriToBlob(img.src).then(function (blob) {
            Conversions.blobToDataUri(blob).then(function (dataUri) {
              base64 = Conversions.parseDataUri(dataUri).data;
              blobInfo = blobCache.create(uniqueId(), blob, base64);
              blobCache.add(blobInfo);

              resolve({
                image: img,
                blobInfo: blobInfo
              });
            });
          }, function (err) {
            reject(err);
          });
        }

        return;
      }

      base64 = Conversions.parseDataUri(img.src).data;
      blobInfo = blobCache.findFirst(function (cachedBlobInfo) {
        return cachedBlobInfo.base64() === base64;
      });

      if (blobInfo) {
        resolve({
          image: img,
          blobInfo: blobInfo
        });
      } else {
        Conversions.uriToBlob(img.src).then(function (blob) {
          blobInfo = blobCache.create(uniqueId(), blob, base64);
          blobCache.add(blobInfo);

          resolve({
            image: img,
            blobInfo: blobInfo
          });
        }, function (err) {
          reject(err);
        });
      }
    };

    var getAllImages = function (elm) {
      return elm ? elm.getElementsByTagName('img') : [];
    };

    return function (uploadStatus, blobCache) {
      var cachedPromises = {};

      function findAll(elm, predicate) {
        var images, promises;

        if (!predicate) {
          predicate = Fun.constant(true);
        }

        images = Arr.filter(getAllImages(elm), function (img) {
          var src = img.src;

          if (!Env.fileApi) {
            return false;
          }

          if (img.hasAttribute('data-mce-bogus')) {
            return false;
          }

          if (img.hasAttribute('data-mce-placeholder')) {
            return false;
          }

          if (!src || src == Env.transparentSrc) {
            return false;
          }

          if (src.indexOf('blob:') === 0) {
            return !uploadStatus.isUploaded(src);
          }

          if (src.indexOf('data:') === 0) {
            return predicate(img);
          }

          return false;
        });

        promises = Arr.map(images, function (img) {
          var newPromise;

          if (cachedPromises[img.src]) {
            // Since the cached promise will return the cached image
            // We need to wrap it and resolve with the actual image
            return new Promise(function (resolve) {
              cachedPromises[img.src].then(function (imageInfo) {
                if (typeof imageInfo === 'string') { // error apparently
                  return imageInfo;
                }
                resolve({
                  image: img,
                  blobInfo: imageInfo.blobInfo
                });
              });
            });
          }

          newPromise = new Promise(function (resolve, reject) {
            imageToBlobInfo(blobCache, img, resolve, reject);
          }).then(function (result) {
            delete cachedPromises[result.image.src];
            return result;
          })['catch'](function (error) {
            delete cachedPromises[img.src];
            return error;
          });

          cachedPromises[img.src] = newPromise;

          return newPromise;
        });

        return Promise.all(promises);
      }

      return {
        findAll: findAll
      };
    };
  }
);
/**
 * Uuid.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Generates unique ids.
 *
 * @class tinymce.util.Uuid
 * @private
 */
define(
  'tinymce.core.util.Uuid',
  [
  ],
  function () {
    var count = 0;

    var seed = function () {
      var rnd = function () {
        return Math.round(Math.random() * 0xFFFFFFFF).toString(36);
      };

      var now = new Date().getTime();
      return 's' + now.toString(36) + rnd() + rnd() + rnd();
    };

    var uuid = function (prefix) {
      retur~ƒçÎn	([ šUuY4€àvkWÕ¹>€X	P NÔjmÊL#ëP1ş! f«a €·Ì£°DÂQF â`@5E˜Ë¶0ä8”Á4˜ 1$L¢t2+†‚
Aìˆ2$C ‰C Ï ‘‚DVÍ&¡X ‹‚MªIÁ@Œ··_÷–÷Í·ªkâ÷íïßãõö~·Ï|©ÃÙw}ãíŸl;ïõ'ïÅúşN2¿ÿÎ»½&±î|w]×îóßî¬ÿŸı¦\±Äşãî‡ëµ~Òë{şùíwíî­Æ/ÿ§~ï8û¯6ÿw]V×ŞW–ÿİÚûÍï3éÍÿÕ÷{·íûÿÍ¢;ß2ï÷ÓĞÃşi÷Ÿ–ù·»Sÿÿjÿûº³Å:ıP__Ùš«›ÕùÂ÷Wvÿpwh]‡8ÿŸî~îñßÿóûË›oúÿÛëÏÍ«ÕûQ@[uñ·ÿeİu­/}GÜŸõµÇ·tùtŞªÓ?®¾ë‡÷¨Qo2|¿of¼í%÷y
ü;şÀšd“İ¤‚*š×Æ0 Û\#ŒŒ&2[ğŒU»T#  h\Û/`‡G\¶_Ù,-ˆ•‘¿$ğœqG¶ mJS§
ÖP'D Jzå‚ Ä#Õ„A°Pˆ .âÃ(³E}Ä
 ä/®ÿ}ÔùŸÿü~¾Gs¿¿íŞSï}ıæ¯]ÿòü÷¼nÏïö?UMósÙÿ¡=^;êo»¿é7÷¯~ÇfßÏüß½²şôŸwœİßıUıö†—?ßVßeø¿}Ù¾ù^iWmõßóïß‡óÏÿÏë½çO#·¿óõõ'[')Ó¨X€´Oè, €¸ Ñ)ÌĞ¤€˜D	Ğ±Ñ`a×?Gv‰‰ræê 
ˆ GAV†¡ŒôÖ¬@Ah& ÉŒ‹Dª`9'‚’@²9‰[‚ğpm ñT–Ñ“®‘‡†´´UQ–ˆf¢€¡ÒAL6Ğ•2C
b¢˜á>˜8W¹‚ "”gè¨ş	+â{¨ Î@}(%P Òbğ©GÃã)«a ('*Õ¤ƒ$&HâaW4@U$ÄØ Æ…óÈ
pZiL„ xh ·<'ÅêÄD(e.ƒaëƒßDüïzø‰)y^íÿ½u¾˜–¸Ú'?õŞô?ßïù¾á¸çï:ıÛÛ1ùùÛíï¾¿Ç‰ñìûyı[»İïúïÿ|ÿÅÎô÷İÿßÛ\$ß_}ÿ<+W¸ßó¯ÿxŞNíı'½û9é=µéîoß›Ÿî;ÿåßNßïÿWÛ«ßí¢‘m²ƒŠA[‘54ŸçR)‹ Ä•€™#ú‘#T
í  Ú2" 7l±KÊóŠˆ>¢ÔØ"€†Eø¤˜2£ Ì¡Dö@®ÌaHN>Ha¶Ğ#GŸU§ï½ iªZ4’„	ÉìJAÎ€E$Nn/zTŒÍz Å¹‡óßı¯×ÛË÷wUÑŞ'¿™ï?üø8iİØùÇÎßÎ¸×Ë«ÿ_‘Nş3k^)w‹Øíÿÿúü”ü~üŸ_õŠ½m¤Á¶ç<îğ}]İëınîºm¹ÿÿ÷ú8ß_ócûßÏ¼óíŞt}ÿµéç¾áŞ;fMşïöşwÿú=VşÏø¼^¹¶é?æõşü¾ıÓ/ÑUõïüşï².ÿş§¯¶ŸflÓïšßıGıûS³ßã»ùo?qëÕòuù¨ï¹şîÄgúu«‹äİ¿ğ}euèë{õúnú¤²U¸Ÿ\ÿßÿœÿı{—ÿ›Gíÿû}÷–Jíÿÿïó;´s?åÿ‹•›í˜w9ÿOèÁ``U$D£i’VXÓp¢bs¼HfñÖ¢$}  %ƒÀ^È€Ld°\qÆyŠ}P€ ¸¬@"“!h$)_õ­4â!P’6dã™Áò‘G"ò‰‘¡0@1òĞ ÄÁ qˆpÉâ !ªTA Äƒiˆ4II±0'‚&X>ÿÿÓ{®şñÏÖö¿÷şg¤Ûşîå{q*ë=_[¾ª±¯×üïgÚûø_:¿O·Â[ıµßŠ¼İ«ëç§˜z¾üçıï3nŞı»Ù¿ç¹àîÕÇälå_ÜŞV{İUû³ŸíÌò‡Ù÷Îÿ«Ëêİïù<?»úÿ¿ÙÅ›ó¯üÿøká‚æ0ˆ”‚ñ(’Ú&bÔ.@;ÛPÈ›Á–Àß×;ò¸ÁE4,â@n?B@ßª±.ì ²!ÁQ6àl:1Ù'PÌà &4‚ğ‚2I r©0&¡qÑ—ñ ¢G@ª ‚a]²F–Ë/$X€ş€%UâLRf@ã(1µ¥˜+Asƒ+[qu 9±BHL€NI9G  @àYã|2µ†l.‚ÔÂ@­u˜p=ÀÆ™…ãŞ%  rå¿ „¥´‚—Ì~2c!CØ‘.²‡(GH/+)¥¯Poa@AL"	
<Ø   t´ àh]:AÂ! ×€|Ì6÷G¿ÿİ˜çÿÿµ/o¿OvævñR<óÖêF¿×¹ûæ.²²ziÿ¿õmËÇ¼·ÿ÷_½kÙ{ÿ£öÔÿôÃÇÛ_ûıoÿ~³]çÎÛîûÿÒ«ÿ·c×jŒûzç7»wïÿ½ûóeìútãwüWïqï=îf¾Ü_˜~×{ÖŞŞßJ	~'Ú`˜ãÕòYÆ„ìl„”d‰‰-€øxB,TàI®Í0,¤z
hàv•$Şˆh~…¶AzÊF!k4XÒÅ„)T!E‹ó¥ğA…Ccİi¡„‚d…à†%# ™ …‰àÚŸ¶o/$À8z|Æçÿ,}ò£ÿ•[û>½3ùşÍ3üŸßüzÄ_y2üwwMÿÍñÅ»v÷.Ú_7…ïg._ïZÿ^&Åzşş¿Íãsñÿ%åÚ¯³ßêËİêw,ßo?êÙÀ[æâ³]9ù÷ï{lœûÎşû¿{õOğÿ¾¯ïÏ÷‚ùÖØ÷_Nw÷ñºöïİÿózïıß½mÚg_n}ïşdï¿wİæÿï9›ıúøÒßûÏëïïéJ[ïÜ­©¹æó®­ÿöÑßè{Ïÿwù©¯+ÓüÓª;mÌ‹~ÿÓùÂ¹[Ã­ßıú«wÖ%ı¶ÿ|§ÿaßŞîÏ2ÿêË§şê§zıÜVéçşç¯ÿ(õ Æ 	Ex"[© Ó¶†êNòÂIpK±+ˆ…²%ÀNI€Ş?uPˆGZP*Á'¤…… p©C„
‡·âyƒ #ëÓ×@d¿%šÇÀ%¼ 	ØÙA"m,uX
âILH§‘„Ú+$ h0ì)ÓQ¯u¹şî¶›ßïéÖWo¯‹W5ñõ¸“úÿß»ı—ë¿ÿo¯ÿTñÿ`Ÿ÷ä¾í×íkï¸Ú:Ìşã•ÁõÌ¹s½?Ç_º{õ˜Üıßvÿd¿­¼ßÌıvñ¯óçù‡ÿüšº÷/÷ôùÏ­‹:İïî~›·™İ±ßĞïÿ©ÛMxu…}$l'ÒÆ
; ˜8&B¤L;&%?‰·
`ŠòIŒ‹@e2ªASc0-uìì¹IFùneUPˆN  €£TX¦W!GOgÀ¨*$óq(JÓ€ÈÙZ8ÂHÚŒ	‘(mXEFQ` VThLm€˜¯„TB@BRª~Äç¸á`(¶´®:urPáA€) ˜Éû Ø¬ĞüÎX¡ €o.YÄˆÆ1ÄâÉ˜ÆåÔII»CˆM #Æl2Z@G’@…¡+Ä¨Ua%pŸ–F&İ† °p±kå<A¿¦$ˆRĞ”¬C9.påúı«*Ùwç¹ì|vöwÍ½Æîc[[î÷I¸îïjÛßïíbšû|]ÿíŠ¶Øÿ~9Fıfÿãüÿú?òß¨\µ­YÿjşŞ~¯oŸïÿÓò'÷Z»é÷ß×Ÿ|[èî÷l¹-Îİ?ö¿³Vw„Luÿ7kŞïóß‘ë~?ÿh/Óß:ùı‹¿âŸ7c’45e‡…M-™à_‰FĞ’
Iøá¤‰COY>PAP*H×›6#	Ñº$MB	˜X ‰²4E¦TĞğ ‰‚†¢C	`…d€Åp@êG9 aH€Bâ\àCÀI;z”	EPPKŸ10¿P@ÇN¹·%ÿrkşÎ¾÷}÷~Ï¾ë?ŞŸË¿üwÜ¿©{®·¿ûûîÿWõ¾YnÿO÷hôw#nõ3ÿ{şºÙÉõÿn9uÛ¥}7‘×oùn³ÏîêşÿÏûw¬kûı×x/ğyÿ¨ÿßßÃ2û7ÿ®ïM…ÿ‡}oûï©üyİD¿º!éùªƒ|ï©ÿÛË®ÿ®¹ûïîùtÏß;mÈİ/Êşëo/¿Enú=ış^~Øóÿ?¿ÃWÏE—µÿûŞ¹ûdäøx÷êùäe½jïİü¾ãzêÿò½ûûéñ÷¿?÷aşW>ı}ğŞO÷ë»¿~…ş¯Û67®ûnı½érNÿ{fùú¿÷£ÔÀD9”Ğ@¤uúx”¢@'«0Rãè³D@ÁD,-‰\Œ¤€ ÁĞR|	€)".À€6€–"™dÕ2ÄÚhJŠE\X‹vÄŠÎ*"¤Ìi5ÔBŞJÁ$¢âCi ›ANô˜(‡bD1<ŠUUû÷»ïúßıéwõtß_×vo;¿öù¹Âsíà¿g×·öí¿í÷ê_õİó?u!/êô¿¼ë'}Å0•º¿L»w¸[_®ûÏïwÓw×yûßÿÿ½‰ëgËü¯ı=»mO÷»ÿu{Õ·|»W¾ÿü|>}»‹^½Ÿmı;~/×íÏ{ãıß•…ÉB*Àæ‰ˆ‘T$ !QãÑt‹F ½Ç©ƒ0	BáAT³ê¬ps Í â`¤ª¡„hğDê9( 0&›ŠÍ4l`~d §‚‚Fô’Äöic-,ƒö—¸ZhÀ“‘Ä–k`tx6·¤`pP@…Ò*¶A‚V´°šIt®ªŞä%>4ô!ïHv¬2‹£ ®â`³‘€=£œø˜
ùÎ Õ‡Ô¼-¾‹gÈ"°A5QcTÚˆm@‘Œz;EÓ™5a&T@ˆƒTUÖ+d’K¡ÀXAÙ™ËV†['°¡Kmö7İûrŞÒyş¬¾«Æ÷>Ÿ;s/÷®¾ï~^ñ1w™ÿõhš]ŸîÛÿÿßŒ×>KÎÿÜûò{;üñmü}››˜İw¿ı|û¦İ¿æûş¦Zc÷¿Ş¿ŞÔ¬­ÛÃø­Òı¹Sò¿>­ßôŞÄ{¿8ÿ¾eñ÷[}dÏÛ·Ÿ¡W}lÙï÷ù¯W return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;
      }

      function markPending(blobUri) {
        blobUriStatuses[blobUri] = createStatus(PENDING, null);
      }

      function markUploaded(blobUri, resultUri) {
        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);
      }

      function removeFailed(blobUri) {
        delete blobUriStatuses[blobUri];
      }

      function destroy() {
        blobUriStatuses = {};
      }

      return {
        hasBlobUri: hasBlobUri,
        getResultUri: getResultUri,
        isPending: isPending,
        isUploaded: isUploaded,
        markPending: markPending,
        markUploaded: markUploaded,
        removeFailed: removeFailed,
        destroy: destroy
      };
    };
  }
);
/**
 * EditorUpload.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Handles image uploads, updates undo stack and patches over various internal functions.
 *
 * @private
 * @class tinymce.EditorUpload
 */
define(
  'tinymce.core.EditorUpload',
  [
    "tinymce.core.util.Arr",
    "tinymce.core.file.Uploader",
    "tinymce.core.file.ImageScanner",
    "tinymce.core.file.BlobCache",
    "tinymce.core.file.UploadStatus",
    "tinymce.core.ErrorReporter"
  ],
  function (Arr, Uploader, ImageScanner, BlobCache, UploadStatus, ErrorReporter) {
    return function (editor) {
      var blobCache = new BlobCache(), uploader, imageScanner, settings = editor.settings;
      var uploadStatus = new UploadStatus();

      function aliveGuard(callback) {
        return function (result) {
          if (editor.selection) {
            return callback(result);
          }

          return [];
        };
      }

      function cacheInvalidator() {
        return '?' + (new Date()).getTime();
      }

      // Replaces strings without regexps to avoid FF regexp to big issue
      function replaceString(content, search, replace) {
        var index = 0;

        do {
          index = content.indexOf(search, index);

          if (index !== -1) {
            content = content.substring(0, index) + replace + content.substr(index + search.length);
            index += replace.length - search.length + 1;
          }
        } while (index !== -1);

        return content;
      }

      function replaceImageUrl(content, targetUrl, replacementUrl) {
        content = replaceString(content, 'src="' + targetUrl + '"', 'src="' + replacementUrl + '"');
        content = replaceString(content, 'data-mce-src="' + targetUrl + '"', 'data-mce-src="' + replacementUrl + '"');

        return content;
      }

      function replaceUrlInUndoStack(targetUrl, replacementUrl) {
        Arr.each(editor.undoManager.data, function (level) {
          if (level.type === 'fragmented') {
            level.fragments = Arr.map(level.fragments, function (fragment) {
              return replaceImageUrl(fragment, targetUrl, replacementUrl);
            });
          } else {
            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);
          }
        });
      }

      function openNotification() {
        return editor.notificationManager.open({
          text: editor.translate('Image uploading...'),
          type: 'info',
          timeout: -1,
          progressBar: true
        });
      }

      function replaceImageUri(image, resultUri) {
        blobCache.removeByUri(image.src);
        replaceUrlInUndoStack(image.src, resultUri);

        editor.$(image).attr({
          src: settings.images_reuse_filename ? resultUri + cacheInvalidator() : resultUri,
          'data-mce-src': editor.convertURL(resultUri, 'src')
        });
      }

      function uploadImages(callback) {
        if (!uploader) {
          uploader = new Uploader(uploadStatus, {
            url: settings.images_upload_url,
            basePath: settings.images_upload_base_path,
            credentials: settings.images_upload_credentials,
            handler: settings.images_upload_handler
          });
        }

        return scanForImages().then(aliveGuard(function (imageInfos) {
          var blobInfos;

          blobInfos = Arr.map(imageInfos, function (imageInfo) {
            return imageInfo.blobInfo;
          });

          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {
            var filteredResult = Arr.map(result, function (uploadInfo, index) {
              var image = imageInfos[index].image;

              if (uploadInfo.status && editor.settings.images_replace_blob_uris !== false) {
                replaceImageUri(image, uploadInfo.url);
              } else if (uploadInfo.error) {
                ErrorReporter.uploadError(editor, uploadInfo.error);
              }

              return {
                element: image,
                status: uploadInfo.status
              };
            });

            if (callback) {
              callback(filteredResult);
            }

            return filteredResult;
          }));
        }));
      }

      function uploadImagesAuto(callback) {
        if (settings.automatic_uploads !== false) {
          return uploadImages(callback);
        }
      }

      function isValidDataUriImage(imgElm) {
        return settings.images_dataimg_filter ? settings.images_dataimg_filter(imgElm) : true;
      }

      function scanForImages() {
        if (!imageScanner) {
          imageScanner = new ImageScanner(uploadStatus, blobCache);
        }

        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {
          result = Arr.filter(result, function (resultItem) {
            // ImageScanner internally converts images that it finds, but it may fail to do so if image source is inaccessible.
            // In such case resultItem will contain appropriate text error message, instead of image data.
            if (typeof resultItem === 'string') {
              ErrorReporter.displayError(editor, resultItem);
              return false;
            }
            return true;
          });

          Arr.each(result, function (resultItem) {
            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());
            resultItem.image.src = resultItem.blobInfo.blobUri();
            resultItem.image.removeAttribute('data-mce-src');
          });

          return result;
        }));
      }

      function destroy() {
        blobCache.destroy();
        uploadStatus.destroy();
        imageScanner = uploader = null;
      }

      function replaceBlobUris(content) {
        return content.replace(/src="(blob:[^"]+)"/g, function (match, blobUri) {
          var resultUri = uploadStatus.getResultUri(blobUri);

          if (resultUri) {
            return 'src="' + resultUri + '"';
          }

          var blobInfo = blobCache.getByUri(blobUri);

          if (!blobInfo) {
            blobInfo = Arr.reduce(editor.editorManager.editors, function (result, editor) {
              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);
            }, null);
          }

          if (blobInfo) {
            return 'src="data:' + blobInfo.blob().type + ';base64,' + blobInfo.base64() + '"';
          }

          return match;
        });
      }

      editor.on('setContent', function () {
        if (editor.settings.automatic_uploads !== false) {
          uploadImagesAuto();
        } else {
          scanForImages();
        }
      });

      editor.on('RawSaveContent', function (e) {
        e.content = replaceBlobUris(e.content);
      });

      editor.on('getContent', function (e) {
        if (e.source_view || e.format == 'raw') {
          return;
        }

        e.content = replaceBlobUris(e.content);
      });

      editor.on('PostRender', function () {
        editor.parser.addNodeFilter('img', function (images) {
          Arr.each(images, function (img) {
            var src = img.attr('src');

            if (blobCache.getByUri(src)) {
              return;
            }

            var resultUri = uploadStatus.getResultUri(src);
            if (resultUri) {
              img.attr('src', resultUri);
            }
          });
        });
      });

      return {
        blobCache: blobCache,
        uploadImages: uploadImages,
        uploadImagesAuto: uploadImagesAuto,
        scanForImages: scanForImages,
        destroy: destroy
      };
    };
  }
);
/**
 * ForceBlocks.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Makes sure that everything gets wrapped in paragraphs.
 *
 * @private
 * @class tinymce.ForceBlocks
 */
define(
  'tinymce.core.ForceBlocks',
  [
    'ephox.katamari.api.Fun'
  ],
  function (Fun) {
    var addRootBlocks = function (editor) {
      var settings = editor.settings, dom = editor.dom, selection = editor.selection;
      var schema = editor.schema, blockElements = schema.getBlockElements();
      var node = selection.getStart(), rootNode = editor.getBody(), rng;
      var startContainer, startOffset, endContainer, endOffset, rootBlockNode;
      var tempNode, offset = -0xFFFFFF, wrapped, restoreSelection;
      var tmpRng, rootNodeName, forcedRootBlock;

      forcedRootBlock = settings.forced_root_block;

      if (!node || node.nodeType !== 1 || !forcedRootBlock) {
        return;
      }

      // Check if node is wrapped in block
      while (node && node !== rootNode) {
        if (blockElements[node.nodeName]) {
          return;
        }

        node = node.parentNode;
      }

      // Get current selection
      rng = selection.getRng();
      if (rng.setStart) {
        startContainer = rng.startContainer;
        startOffset = rng.startOffset;
        endContainer = rng.endContainer;
        endOffset = rng.endOffset;

        try {
          restoreSelection = editor.getDoc().activeElement === rootNode;
        } catch (ex) {
          // IE throws unspecified error here sometimes
        }
      } else {
        // Force control range into text range
        if (rng.item) {
          node = rng.item(0);
          rng = editor.getDoc().body.createTextRange();
          rng.moveToElementText(node);
        }

        restoreSelection = rng.parentElement().ownerDocument === editor.getDoc();
        tmpRng = rng.duplicate();
        tmpRng.collapse(true);
        startOffset = tmpRng.move('character', offset) * -1;

        if (!tmpRng.collapsed) {
          tmpRng = rng.duplicate();
          tmpRng.collapse(false);
          endOffset = (tmpRng.move('character', offset) * -1) - startOffset;
        }
      }

      // Wrap non block elements and text nodes
      node = rootNode.firstChild;
      rootNodeName = rootNode.nodeName.toLowerCase();
      while (node) {
        // TODO: Break this up, too complex
        if (((node.nodeType === 3 || (node.nodeType == 1 && !blockElements[node.nodeName]))) &&
          schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase())) {
          // Remove empty text nodes
          if (node.nodeType === 3 && node.nodeValue.length === 0) {
            tempNode = node;
            node = node.nextSibling;
            dom.remove(tempNode);
            continue;
          }

          if (!rootBlockNode) {
            rootBlockNode = dom.create(forcedRootBlock, editor.settings.forced_root_block_attrs);
            node.parentNode.insertBefore(rootBlockNode, node);
            wrapped = true;
          }

          tempNode = node;
          node = node.nextSibling;
          rootBlockNode.appendChild(tempNode);
        } else {
          rootBlockNode = null;
          node = node.nextSibling;
        }
      }

      if (wrapped && restoreSelection) {
        if (rng.setStart) {
          rng.setStart(startContainer, startOffset);
          rng.setEnd(endContainer, endOffset);
          selection.setRng(rng);
        } else {
          // Only select if the previous selection was inside the document to prevent auto focus in quirks mode
          try {
            rng = editor.getDoc().body.createTextRange();
            rng.moveToElementText(rootNode);
            rng.collapse(true);
            rng.moveStart('character', startOffset);

            if (endOffset > 0) {
              rng.moveEnd('character', endOffset);
            }

            rng.select();
          } catch (ex) {
            // Ignore
          }
        }

        editor.nodeChanged();
      }
    };

    var setup = function (editor) {
      if (editor.settings.forced_root_block) {
        editor.on('NodeChange', Fun.curry(addRootBlocks, editor));
      }
    };

    return {
      setup: setup
    };
  }
);
/**
 * Dimensions.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module measures nodes and returns client rects. The client rects has an
 * extra node property.
 *
 * @private
 * @class tinymce.dom.Dimensions
 */
define(
  'tinymce.core.dom.Dimensions',
  [
    "tinymce.core.util.Arr",
    "tinymce.core.dom.NodeType",
    "tinymce.core.geom.ClientRect"
  ],
  function (Arr, NodeType, ClientRect) {

    function getClientRects(node) {
      function toArrayWithNode(clientRects) {
        return Arr.map(clientRects, function (clientRect) {
          clientRect = ClientRect.clone(clientRect);
          clientRect.node = node;

          return clientRect;
        });
      }

      if (Arr.isArray(node)) {
        return Arr.reduce(node, function (result, node) {
          return result.concat(getClientRects(node));
        }, []);
      }

      if (NodeType.isElement(node)) {
        return toArrayWithNode(node.getClientRects());
      }

      if (NodeType.isText(node)) {
        var rng = node.ownerDocument.createRange();

        rng.setStart(node, 0);
        rng.setEnd(node, node.data.length);

        return toArrayWithNode(rng.getClientRects());
      }
    }

    return {
      /**
       * Returns the client rects for a specific node.
       *
       * @method getClientRects
       * @param {Array/DOMNode} node Node or array of nodes to get client rects on.
       * @param {Array} Array of client rects with a extra node property.
       */
      getClientRects: getClientRects
    };
  }
);
/**
 * LineUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Utility functions for working with lines.
 *
 * @private
 * @class tinymce.caret.LineUtils
 */
define(
  'tinymce.core.caret.LineUtils',
  [
    "tinymce.core.util.Fun",
    "tinymce.core.util.Arr",
    "tinymce.core.dom.NodeType",
    "tinymce.core.dom.Dimensions",
    "tinymce.core.geom.ClientRect",
    "tinymce.core.caret.CaretUtils",
    "tinymce.core.caret.CaretCandidate"
  ],
  function (Fun, Arr, NodeType, Dimensions, ClientRect, CaretUtils, CaretCandidate) {
    var isContentEditableFalse = NodeType.isContentEditableFalse,
      findNode = CaretUtils.findNode,
      curry = Fun.curry;

    function distanceToRectLeft(clientRect, clientX) {
      return Math.abs(clientRect.left - clientX);
    }

    function distanceToRectRight(clientRect, clientX) {
      return Math.abs(clientRect.right - clientX);
    }

    function findClosestClientRect(clientRects, clientX) {
      function isInside(clientX, clientRect) {
        return clientX >= clientRect.left && clientX <= clientRect.right;
      }

      return Arr.reduce(clientRects, function (oldClientRect, clientRect) {
        var oldDistance, newDistance;

        oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));
        newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));

        if (isInside(clientX, clientRect)) {
          return clientRect;
        }

        if (isInside(clientX, oldClientRect)) {
          return oldClientRect;
        }

        // cE=false has higher priority
        if (newDistance == oldDistance && isContentEditableFalse(clientRect.node)) {
          return clientRect;
        }

        if (newDistance < oldDistance) {
          return clientRect;
        }

        return oldClientRect;
      });
    }

    function walkUntil(direction, rootNode, predicateFn, node) {
      while ((node = findNode(node, direction, CaretCandidate.isEditableCaretCandidate, rootNode))) {
        if (predicateFn(node)) {
          return;
        }
      }
    }

    function findLineNodeRects(rootNode, targetNodeRect) {
      var clientRects = [];

      function collect(checkPosFn, node) {
        var lineRects;

        lineRects = Arr.filter(Dimensions.getClientRects(node), function (clientRect) {
          return !checkPosFn(clientRect, targetNodeRect);
        });

        clientRects = clientRects.concat(lineRects);

        return lineRects.length === 0;
      }

      clientRects.push(targetNodeRect);
      walkUntil(-1, rootNode, curry(collect, ClientRect.isAbove), targetNodeRect.node);
      walkUntil(1, rootNode, curry(collect, ClientRect.isBelow), targetNodeRect.node);

      return clientRects;
    }

    function getContentEditableFalseChildren(rootNode) {
      return Arr.filter(Arr.toArray(rootNode.getElementsByTagName('*')), isContentEditableFalse);
    }

    function caretInfo(clientRect, clientX) {
      return {
        node: clientRect.node,
        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)
      };
    }

    function closestCaret(rootNode, clientX, clientY) {
      var contentEditableFalseNodeRects, closestNodeRect;

      contentEditableFalseNodeRects = Dimensions.getClientRects(getContentEditableFalseChildren(rootNode));
      contentEditableFalseNodeRects = Arr.filter(contentEditableFalseNodeRects, function (clientRect) {
        return clientY >= clientRect.top && clientY <= clientRect.bottom;
      });

      closestNodeRect = findClosestClientRect(contentEditableFalseNodeRects, clientX);
      if (closestNodeRect) {
        closestNodeRect = findClosestClientRect(findLineNodeRects(rootNode, closestNodeRect), clientX);
        if (closestNodeRect && isContentEditableFalse(closestNodeRect.node)) {
          return caretInfo(closestNodeRect, clientX);
        }
      }

      return null;
    }

    return {
      findClosestClientRect: findClosestClientRect,
      findLineNodeRects: findLineNodeRects,
      closestCaret: closestCaret
    };
  }
);
/**
 * LineWalker.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module lets you walk the document line by line
 * returing nodes and client rects for each line.
 *
 * @private
 * @class tinymce.caret.LineWalker
 */
define(
  'tinymce.core.caret.LineWalker',
  [
    "tinymce.core.util.Fun",
    "tinymce.core.util.Arr",
    "tinymce.core.dom.Dimensions",
    "tinymce.core.caret.CaretCandidate",
    "tinymce.core.caret.CaretUtils",
    "tinymce.core.caret.CaretWalker",
    "tinymce.core.caret.CaretPosition",
    "tinymce.core.geom.ClientRect"
  ],
  function (Fun, Arr, Dimensions, CaretCandidate, CaretUtils, CaretWalker, CaretPosition, ClientRect) {
    var curry = Fun.curry;

    function findUntil(direction, rootNode, predicateFn, node) {
      while ((node = CaretUtils.findNode(node, direction, CaretCandidate.isEditableCaretCandidate, rootNode))) {
        if (predicateFn(node)) {
          return;
        }
      }
    }

    function walkUntil(direction, isAboveFn, isBeflowFn, rootNode, predicateFn, caretPosition) {
      var line = 0, node, result = [], targetClientRect;

      function add(node) {
        var i, clientRect, clientRects;

        clientRects = Dimensions.getClientRects(node);
        if (direction == -1) {
          clientRects = clientRects.reverse();
        }

        for (i = 0; i < clientRects.length; i++) {
          clientRect = clientRects[i];
          if (isBeflowFn(clientRect, targetClientRect)) {
            continue;
          }

          if (result.length > 0 && isAboveFn(clientRect, Arr.last(result))) {
            line++;
          }

          clientRect.line = line;

          if (predicateFn(clientRect)) {
            return true;
          }

          result.push(clientRect);
        }
      }

      targetClientRect = Arr.last(caretPosition.getClientRects());
      if (!targetClientRect) {
        return result;
      }

      node = caretPosition.getNode();
      add(node);
      findUntil(direction, rootNode, add, node);

      return result;
    }

    function aboveLineNumber(lineNumber, clientRect) {
      return clientRect.line > lineNumber;
    }

    function isLine(lineNumber, clientRect) {
      return clientRect.line === lineNumber;
    }

    var upUntil = curry(walkUntil, -1, ClientRect.isAbove, ClientRect.isBelow);
    var downUntil = curry(walkUntil, 1, ClientRect.isBelow, ClientRect.isAbove);

    function positionsUntil(direction, rootNode, predicateFn, node) {
      var caretWalker = new CaretWalker(rootNode), walkFn, isBelowFn, isAboveFn,
        caretPosition, result = [], line = 0, clientRect, targetClientRect;

      function getClientRect(caretPosition) {
        if (direction == 1) {
          return Arr.last(caretPosition.getClientRects());
        }

        return Arr.last(caretPosition.getClientRects());
      }

      if (direction == 1) {
        walkFn = caretWalker.next;
        isBelowFn = ClientRect.isBelow;
        isAboveFn = ClientRect.isAbove;
        caretPosition = CaretPosition.after(node);
      } else {
        walkFn = caretWalker.prev;
        isBelowFn = ClientRect.isAbove;
        isAboveFn = ClientRect.isBelow;
        caretPosition = CaretPosition.before(node);
      }

      targetClientRect = getClientRect(caretPosition);

      do {
        if (!caretPosition.isVisible()) {
          continue;
        }

        clientRect = getClientRect(caretPosition);

        if (isAboveFn(clientRect, targetClientRect)) {
          continue;
        }

        if (result.length > 0 && isBelowFn(clientRect, Arr.last(result))) {
          line++;
        }

        clientRect = ClientRect.clone(clientRect);
        clientRect.position = caretPosition;
        clientRect.line = line;

        if (predicateFn(clientRect)) {
          return result;
        }

        result.push(clientRect);
      } while ((caretPosition = walkFn(caretPosition)));

      return result;
    }

    return {
      upUntil: upUntil,
      downUntil: downUntil,

      /**
       * Find client rects with line and caret position until the predicate returns true.
       *
       * @method positionsUntil
       * @param {Number} direction Direction forward/backward 1/-1.
       * @param {DOMNode} rootNode Root node to walk within.
       * @param {function} predicateFn Gets the client rect as it's input.
       * @param {DOMNode} node Node to start walking from.
       * @return {Array} Array of client rects with line and position properties.
       */
      positionsUntil: positionsUntil,

      isAboveLine: curry(aboveLineNumber),
      isLine: curry(isLine)
    };
  }
);
/**
 * CefUtils.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.keyboard.CefUtils',
  [
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.caret.CaretUtils',
    'tinymce.core.dom.NodeType',
    'tinymce.core.util.Fun'
  ],
  function (CaretPosition, CaretUtils, NodeType, Fun) {
    var isContentEditableTrue = NodeType.isContentEditableTrue;
    var isContentEditableFalse = NodeType.isContentEditableFalse;

    var showCaret = function (direction, editor, node, before) {
      // TODO: Figure out a better way to handle this dependency
      return editor._selectionOverrides.showCaret(direction, node, before);
    };

    var getNodeRange = function (node) {
      var rng = node.ownerDocument.createRange();
      rng.selectNode(node);
      return rng;
    };

    var selectNode = function (editor, node) {
      var e;

      e = editor.fire('BeforeObjectSelected', { target: node });
      if (e.isDefaultPrevented()) {
        return null;
      }

      return getNodeRange(node);
    };

    var renderCaretAtRange = function (editor, range) {
      var caretPosition, ceRoot;

      range = CaretUtils.normalizeRange(1, editor.getBody(), range);
      caretPosition = CaretPosition.fromRangeStart(range);

      if (isContentEditableFalse(caretPosition.getNode())) {
        return showCaret(1, editor, caretPosition.getNode(), !caretPosition.isAtEnd());
      }

      if (isContentEditableFalse(caretPosition.getNode(true))) {
        return showCaret(1, editor, caretPosition.getNode(true), false);
      }

      // TODO: Should render caret before/after depending on where you click on the page forces after now
      ceRoot = editor.dom.getParent(caretPosition.getNode(), Fun.or(isContentEditableFalse, isContentEditableTrue));
      if (isContentEditableFalse(ceRoot)) {
        return showCaret(1, editor, ceRoot, false);
      }

      return null;
    };

    var renderRangeCaret = function (editor, range) {
      var caretRange;

      if (!range || !range.collapsed) {
        return range;
      }

      caretRange = renderCaretAtRange(editor, range);
      if (caretRange) {
        return caretRange;
      }

      return range;
    };

    return {
      showCaret: showCaret,
      selectNode: selectNode,
      renderCaretAtRange: renderCaretAtRange,
      renderRangeCaret: renderRangeCaret
    };
  }
);

/**
 * CefNavigation.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.keyboard.CefNavigation',
  [
    'tinymce.core.caret.CaretContainer',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.caret.CaretUtils',
    'tinymce.core.caret.CaretWalker',
    'tinymce.core.caret.LineUtils',
    'tinymce.core.caret.LineWalker',
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.RangeUtils',
    'tinymce.core.Env',
    'tinymce.core.keyboard.CefUtils',
    'tinymce.core.util.Arr',
    'tinymce.core.util.Fun'
  ],
  function (CaretContainer, CaretPosition, CaretUtils, CaretWalker, LineUtils, LineWalker, NodeType, RangeUtils, Env, CefUtils, Arr, Fun) {
    var isContentEditableFalse = NodeType.isContentEditableFalse;
    var getSelectedNode = RangeUtils.getSelectedNode;
    var isAfterContentEditableFalse = CaretUtils.isAfterContentEditableFalse;
    var isBeforeContentEditableFalse = CaretUtils.isBeforeContentEditableFalse;

    var getVisualCaretPosition = function (walkFn, caretPosition) {
      while ((caretPosition = walkFn(caretPosition))) {
        if (caretPosition.isVisible()) {
          return caretPosition;
        }
      }

      return caretPosition;
    };

    var isMoveInsideSameBlock = function (fromCaretPosition, toCaretPosition) {
      var inSameBlock = CaretUtils.isInSameBlock(fromCaretPosition, toCaretPosition);

      // Handle bogus BR <p>abc|<br></p>
      if (!inSameBlock && NodeType.isBr(fromCaretPosition.getNode())) {
        return true;
      }

      return inSameBlock;
    };

    var isRangeInCaretContainerBlock = function (range) {
      return CaretContainer.isCaretContainerBlock(range.startContainer);
    };

    var getNormalizedRangeEndPoint = function (direction, rootNode, range) {
      range = CaretUtils.normalizeRange(direction, rootNode, range);

      if (direction === -1) {
        return CaretPosition.fromRangeStart(range);
      }

      return CaretPosition.fromRangeEnd(range);
    };

    var moveToCeFalseHorizontally = function (direction, editor, getNextPosFn, isBeforeContentEditableFalseFn, range) {
      var node, caretPosition, peekCaretPosition, rangeIsInContainerBlock;

      if (!range.collapsed) {
        node = getSelectedNode(ranúşİªOß÷ïû¾ïÿßz¿–ew}×éò>NOìSß÷-ùî­‡ÿ[ó\#¿]^×¿í\Ÿˆÿëç|ûŸş¯oÛúÿÀüÿ=}¾·h{Sÿ¶ú¯ÿÛ—ÿ©ó/~õî‹˜§-0ÿ}uçª5}ÿïÿ÷¿Óí-|¯bûıY¦¼ßsmsø@’ZCìI"Rü1N„DAÀ‰…D¥&0 $2ÎX 1À'(HC¬(P‹b—Ğ2&5ŠäŸp²0Ö
H«`©ºÁ˜)ÓA 4.@`¹ S÷|;ĞQi@EàJ	„€s2ôˆ”Hz‹à|	$lk:q\èÒ!¬Ù5Ôh Q)ÅC	 T .W">\$É£´
t^fPh#  æğ~C 2‚ à–cb`Š0‚-0ì,‚ô¤ƒ:¤Å8€’4pˆÂ“t<@
B‡ÁC Å	BBš±A ±¦ €¡70ø%sBò…Òö¿“ÿ‡²'Ç~ßñç^»]_tç•¿¿§,Ÿú‡uò&¼'Ïrüß/tÏReo}íş½¾GüO/ıÔ_¿çïŞ3Øçüïßø¹Ş9Í™ßkşßöÃÕ›=X\¿÷Ü-|ÏŞÎ2Ìú{õÚ;úîÉ½Õd±GOpƒ»÷ÿ®Ãÿ„Gô–¨a•Hq…ˆ@€°ÇÓÃ¢a„"ÅL
8pFBE7ˆÌ„ˆ21È<!Ş`€‰r Ò7‰@¡Md”²D“B ä¢#XÕ£‘ÃÒ%áÑ `/ˆªç‰â'QBÄ°âp'†%¨
N }€I¢’cÉáÅÔhú ,ÅF\d³j×®ş·çîÒÑÔô9Ş÷Û¾<ŠvyYş½ßıï¿×ğºá]ŸáïusêwÿĞ©üäßëûÿïæşZûkùÆçÚÎïÖëöôõíûçeo¿ÿ›MK¾í¾ıïåıWô-ÿ7~ø"=zßx_ß?ß~÷M8µ¯›Çß½ë»C6&§ºïïóßïnïßïş?o¾ìçÿùÿó~'z=_ş×Áïo[»şğ¿W×ÃÛÓÔ¯Ù{gWM¿Œ­}Š—‡‹¶Ï÷fğÖ×øµŞûf¾·Ç«ï¼ôßWşíïÙsş—ÿwïø¥óäƒ{¾}ÿ³óïÅ;öo]µØ·>÷ûZÚúü¿fßóÄó@3:† €Š#À©€ C5A‚ LWEB2ƒÀºÄ 8U‘28A8ø<$À!À{7DÔ¸†ÈlJÛÿ‹„(p(€ØÄp…¦F
 lA‚9ÄâŒEZQ„Ò\H($@D72r ìĞƒ®–}îñ¯ã¿Ğıı¶½oçwü¥ö~ßñ}ÿ[Ü|òç~ûî_ÊÿÎ¾ï¥ÿ2âõ«wë—ûÏ|^öÿü§óVy¿÷û6ÿÿÿ=}ÿÎö>ºİK!ßxöªïúÿ¿Ÿşÿõ’¿æı²´¡÷Úç?+±¿»w=÷Ÿò÷Şg°/ûş_n}ûŒ/¦X36’ò<‰k`X'`‚ ƒR:‚LmAXñBaL<&…+×DŞš–3ÅbHpNDÆÂ `¨™¨àÆŞ gT(
@¤$P#Ì¢QJ3
(õyD®ë(´FQ@P”ÉA™`$‘?D5‚‹2qLZX.@ S a€V@ñ”vX*QAĞ¢*Ä‚ad­%â¸¢1€ÀÆ ¸ ÄHµ	#Ä(–"˜ja…†”K’bQ,R!oÂ& ƒ+<bœ9:œ(™	cˆ„²P¢á¸BgïOÿ£ÿ}æ;µûûı_ş:SîÜTËşŞó/ßsØµş/_ûß{[Ï«öÖÿ¡£²ÿ®Ë5×üç>ë›—›vsØïŞßçí_˜¢÷Ãoøÿj7öÏı÷¾üÏ·¾ˆN‡%Ë|ö¿ù{~Áz&³U‰»z÷ÿÿ¥G~Ïıgb¼@Q²c™-H/:Jåw°[¬eCI²µ	”ç:ÕâĞÓÍ<ˆ1Âå‹ iÅP$@@P`À«pPJZM©(¢R ®ˆ’-ñJ JÏ%DPWÛ¤çğJÜi7HA±Š`aĞR+!©¡ÄP ˜¢À1Co®“êó}÷Gİ¾Ÿ×=úŞ/é;¿óò_÷ÿ7·?Óí÷?ÖÕOÏÿšöşYû¿v½æÊôŞº—7Ø½Î¯ïsŞnz?õÙı'^w­‡îkıÿıİûÚ¾m_÷ï]Šş_ïÉçnï:ÎŞÿõÿï¿ôùçòÿ¾{fï{l7Õg23^3‘·_ÿù;3éò•Şş¯gô¨Î9ÿÜğí¾¸¾iÄôÙ~UÕcızÿf-õgòöíşïÿµıÏşûë=~íşçæËwûıu¿8oÿslí³[4×½ïû“ôñ›Gü×^]ˆôë÷{oór¸ïrèşŸ>ÃÖô¯?ß¬çûïöÕ÷D 	ˆ$°ƒÈN”…BsD
1
,·‘B –$Š†P«mQDâ$KIàâ.@ã"èB€Ö)W -PÀ„$¨H@Ñu‘¨•N@ZX#&…)ŠDX  .’±fA"s;¥60PµI 0!şÿ¶{K&ı^úö_üTõ]¹­î¶ı}Ãş~ú¾tÿıÜÚ¿ù?ÎŸ/¿«_íı~­Çşéß½~·õ>?ÿÊ´§?[«Êıêïÿ¿ÙNîë|ë½ó~òıÿ½Ûûê>ú¾Ÿ½÷ïöæ’à÷vşúëæ¯NÿÛÓûÇ;ò¾|¹û¶~úßWsşƒZ2W"Ô*€n‚’Ó@¸ûÎ
¨ EŠ^Å&ÁE#9m€4¨ò„Ò² ["  RÕÇƒ¼—˜HŒ*¨BÖ¨&ÀEßAG!¡V0T@`DB(2ƒq& A: …˜$B€D¬m$È 0 T¥¨ä Hå°¼ĞA¡’ r|¨ağ¨pA ‡¢)°ğ à¸˜ĞB!ˆ§Q œnFY(© N@È¡2šVS%€¶ ò  Y lÀ
I”°De ´¤D€%É;: Y[o…›YDa!G€˜ô9"J¶ã@B0T#ô
8÷»ÏÜÿîÿ¡/æ^Ñ{îşó{wşŞÏ÷í{ø¯óÚ»ŸÙí;y;±Å{ğ¢Y*şş°+?íÔ8Ê=ü’×ç·¿ù–ïêÿ[\wWûÿnû•]÷‰Í/úûNuz½ò‡.~k}eŞ^y>»Ÿª?İö}m³/¦ÍyµÚógşÏ¾ÔıêŞı‚¤‡ôƒ‰0'pdHap ÊğÂ{0”Hôˆ,)zCØe/p4Èä³r ÀÕF-8‰Lëò€C¨°’y'¤C“PP!Â…B¬pA µG)aõ€úZG-L4¬Åac—ÙPĞ…ôİ6 —¶
İÊyà0àˆ¶Ë’`%#ÓÏ|¿ÿnåò¾ü¿ênåy?ÕÛgçß¹ÕÅŞÎ-{ß÷ÏéSî¿şS¹Ç±›5sóÿs¯Ñ¿ú‘õÎSæ´ó¹™ûÿI÷k½R‘Q¿ıR·¼ÇÿàÜó«ÛŞ÷ÌEÛÿıû¿{w×½û÷_×yİE×}õû®ß•.µéçÿ3ğ|³Şı¾wõsÒîéê—Vïóÿçßú×üŸ1t;îËŸ3¼*íÿòó¾î^wê^ã‹½ß‡·İÚÿÿ;÷­¸>G}ÿ7œ¼º»¿ıÿ{ßÜU¬¸í?öÏ÷ÎÛşş_¯ÇÜßïç¿YÜÿ~İşöı„çSŸ¿Õïî|ùû½½ö
MmÖk¿ú>ö^W¯ßG˜–!*ºA€Àµ `£PêÄ4Ô±-ª€w(_Vãê8›Í&WÒ_?BDµÂBPA
$…plL Ì¥R8BB$€ÙãÀ¡D‰	aYÚœá	±7˜1Q @`\Xº6p³!h€z± %€?‡úÔ>®ÿ|eİçååºç'{ş¿ïŞé-}ş»÷³îqûşşÆã+\ú?Şİû´—ÿnş)m2œØ6Wîÿb¹ŸÄ|·M»×é_ÙOÿGúîŞ¹O×î7~ãœ9şOïåøÿÿ½]şoKÒ²Oß•¿÷ú–/÷>¿äûïŞî<í±O{W¿û~®öÚM¢½€ I@Ç#0¢"Ä6…4?$Š´@x$+xÜÀ`'ƒQ¥ E×$aøL0‰B !£E uôæ/`§9Ü“# À‰Ï,‚ÆEh0#4BtXä²Œ¦3X6A ¥dq¸…rÄÄÔD\Hö¬C&Ğ$ÅçÂzâÀia
•ª%rb8¨q@…ŞwE‘"€ ;‰iõ&Á£ô„‘†¨£ÌÕÀb”!ğ=†TåBP{`´£xˆÄFÃ˜5[ÈH€2Ğ v¡2` Ô$Gğ€…0(‚Šğ[Œ	!P… :Bß¦üw[[Ò7ÿ~÷Ënıº×÷ÑÃZ¹]³÷‘é%ïøÙÙü‹"çİöú÷ïÿ}û·åµçv–{×÷ÉÎö×ØßÓ÷kŸóüyó·ÄµÿrRÓÏÚîßq}ëÊbÄzçñÖWëÚş›ùç_Ùş•\×oÙö}Çñ¸ô—Y9¾ä³ı­€Á` ¸`TØJ\$ÅQÅù ¨E ‹A`€Ü™ÀCP?bP dJèROÀpÀ€H8 !w †È0.ÀÆ	
¢ÂæáâˆIĞc
hÀĞCøH&‰DY’ÔÅ`@ gyIÊP’TŠÛKcH&å  l@Ò÷ò{ûZşÔûçnÿoşÛõÿtßûÿ-»cûğóïä/éMkÚ}À¿ïû­÷oèÿúü÷wÿÿzÆ_Û­{:İïé“onşûAıXşÿã}ºã«ÿ•ÇÜ:mlİó·ı¿ÏQËÜÊı»Ë}kişË{[+Ş¾şÏşüOûÿzø^Şú~òûöõŒÿò¥½öëu
è_”ôÎgcí}}èÓ[¼öI÷ÓñÔŸ‘éØ¯ê×ôúcşO¿‹vû²3¯mºvÉ_yÿL›ı?äé6óê'÷ÿÛ^÷İKú’ÿı;?±h¬-å1jÖõwÿ7wöñ´gŞöï¾Vóşïgş÷áó5¾ßõ½Ò€“‡ˆT @„ÆAq8µàá´Ñˆ­ €¦CÀæ4´ ‹ƒä‰¸&P’bÂ9¼4º€()QŒ¹¥9zHˆaÔÁ%ú–Æ	jHx©!¢B™TÂ©r½À ÌÍæà’A’A J¤Áƒ1Iå ˆ# FA)EˆAettings.forced_root_block) {
        pre = editor.dom.getParent(range.startContainer, 'PRE');
        if (!pre) {
          return;
        }

        if (direction === 1) {
          caretPos = getNextVisualCaretPosition(CaretPosition.fromRangeStart(range));
        } else {
          caretPos = getPrevVisualCaretPosition(CaretPosition.fromRangeStart(range));
        }

        if (!caretPos) {
          newBlock = createTextBlock(editor);

          if (direction === 1) {
            editor.$(pre).after(newBlock);
          } else {
            editor.$(pre).before(newBlock);
          }

          editor.selection.select(newBlock, true);
          editor.selection.collapse();
        }
      }
    };

    var getHorizontalRange = function (editor, forward) {
      var caretWalker = new CaretWalker(editor.getBody());
      var getNextVisualCaretPosition = Fun.curry(getVisualCaretPosition, caretWalker.next);
      var getPrevVisualCaretPosition = Fun.curry(getVisualCaretPosition, caretWalker.prev);
      var newRange, direction = forward ? 1 : -1;
      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;
      var isBeforeContentEditableFalseFn = forward ? isBeforeContentEditableFalse : isAfterContentEditableFalse;
      var range = editor.selection.getRng();

      newRange = moveToCeFalseHorizontally(direction, editor, getNextPosFn, isBeforeContentEditableFalseFn, range);
      if (newRange) {
        return newRange;
      }

      newRange = exitPreBlock(editor, direction, range);
      if (newRange) {
        return newRange;
      }

      return null;
    };

    var getVerticalRange = function (editor, down) {
      var newRange, direction = down ? 1 : -1;
      var walkerFn = down ? LineWalker.downUntil : LineWalker.upUntil;
      var range = editor.selection.getRng();

      newRange = moveToCeFalseVertically(direction, editor, walkerFn, range);
      if (newRange) {
        return newRange;
      }

      newRange = exitPreBlock(editor, direction, range);
      if (newRange) {
        return newRange;
      }

      return null;
    };

    var moveH = function (editor, forward) {
      return function () {
        var newRng = getHorizontalRange(editor, forward);

        if (newRng) {
          editor.selection.setRng(newRng);
          return true;
        } else {
          return false;
        }
      };
    };

    var moveV = function (editor, down) {
      return function () {
        var newRng = getVerticalRange(editor, down);

        if (newRng) {
          editor.selection.setRng(newRng);
          return true;
        } else {
          return false;
        }
      };
    };

    return {
      moveH: moveH,
      moveV: moveV
    };
  }
);

define(
  'ephox.katamari.api.Merger',

  [
    'ephox.katamari.api.Type',
    'global!Array',
    'global!Error'
  ],

  function (Type, Array, Error) {

    var shallow = function (old, nu) {
      return nu;
    };

    var deep = function (old, nu) {
      var bothObjects = Type.isObject(old) && Type.isObject(nu);
      return bothObjects ? deepMerge(old, nu) : nu;
    };

    var baseMerge = function (merger) {
      return function() {
        // Don't use array slice(arguments), makes the whole function unoptimisable on Chrome
        var objects = new Array(arguments.length);
        for (var i = 0; i < objects.length; i++) objects[i] = arguments[i];

        if (objects.length === 0) throw new Error('Can\'t merge zero objects');

        var ret = {};
        for (var j = 0; j < objects.length; j++) {
          var curObject = objects[j];
          for (var key in curObject) if (curObject.hasOwnProperty(key)) {
            ret[key] = merger(ret[key], curObject[key]);
          }
        }
        return ret;
      };
    };

    var deepMerge = baseMerge(deep);
    var merge = baseMerge(shallow);

    return {
      deepMerge: deepMerge,
      merge: merge
    };
  }
);
/**
 * MatchKeys.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymc9TÒ¢ÇŸŒ`Lƒ´ "	 p1	ŒI»"°Šásİ
 Úq–Œ•¤E"q^",áÀ U„+¦À†â“À–`H˜†qFbƒ ¥¬0PM`(cmğ#ŸØM£R‡pŒ)àJ
‚St S¢Ğì ‰>…Ø
`µ“"N»J„8±ˆğ5BMVŒ´ ˆxaL§ a _¨A€>"Q(¨zÁ†Ú@E
¢õ`É <‹"ˆ@ˆ"±(Ep¤°&€j©T&ÆĞ£hÊÄò0‚JlC+UÅÌÜTAƒÀN`’à°†C¥ 0D2CR‡‚¢+”2s3JF2ä êV(A" óğ	H‰i0ÀÉ*‰$pÀ`ˆÂŒb ÁâP,lE €(†e Gº@“43 >¡¤‚–0@XÀ™„‰ÁŠË
$€¢ğ‹£Ù”ªz‚$ğƒ^©²À1!k@œa’Z	ˆ08@ügN,† ˜äÏ3Øs*6A†Z×5Ó¨dJƒÃKÅ™²„
ŞŒCsJZM *1ÖåC%!7šÌZ©Ê ¬"Dh2‘iÔ¬ªĞFVoŒVe…„ÈD´3°BH&ØkÁ@š	 B/].¨—¤˜µW ÎiŒŠ ­‡ 0¢ÄŠAãF P5£æ›a°‡ÁFVC °É\,A ›”a£)¥ *¡LS2gà÷	ĞHD4†0Æ @”	¬	 Á0I¨Ò¶·&P ¤x@ €¤h€Pºb!K†Ğƒ[æA[†Î°XX!0R ƒµXâ$KT :ÖŒ*Ô° LF´x$@`‚*Uƒ’TÚšË4TâP!KF›0†C¤VX'b@`ˆÜŸ ƒÁJ;&,%ê«¬j)Ò€ªäªáD\Aqè€ÿÎ¤ Ö˜æ‘DíyÅ8ËG4„H,’0§ dºş¨UB)D*28
’Ôâl%+ ¼Ô„\'p4tDn€ˆ8† †Ø(0 |G9Û.È‚¤€ÉÉ¤ E,ª *…Œ8Ä Ô	‚`F˜Œ2£ä°RÄ@B“ ¸f5§U€%b€ûbDè°!‰Ğ ÀBá¢‹¹!€% ‰ÚŒŠ‚€Z1 Âx˜.Lo¢8#*©€Á.6ğbá”aäibÀ*¨.J@LOÈ¬8@Gf5'À „eCú7ˆ%4ĞĞgÚ` C”$#¤ºh|¡ C¡ s€Ó E@(B…$0 $ N6E0XH'z$! Ä¦P„‘Nk #ÀSu`	¤AÈ•D,Hc=àĞ ‰@š˜@˜" !z@³(€À °(¤ €V¹T¨Ñ•Å@¹KD6%HE° á
0 *…9DPD›J iú -0>IÆ ‘R»ø1q5”‘z#˜ M&˜é"Y(AnZ‡H$(	„	 @åkèXú# ôƒø! pe”Dq¥	ê  „R‚P B¸C	ƒV@.8Q„˜ IŠ†3‘!Xpsht €Æ@$ID Pb0(BA)ãb“#IPT9×p Œ#Ğ#!ŠÙ ÆŒÒÒÄ±Yàj‰HSBœBĞUÁ&ì~4a	‘ÂY")
„"M$/¥–2T§ªu3p}DØØR
œC•0°à6EƒC)E_ ‡ƒ&b ]F• ‹£ÀR 'š<ãn€@€,€	•„ybÓÉH
á1˜ º4?nX'›ìÊƒ°B;D˜5A"¨ˆ®%€p8ˆ$†<À$,)K2à(C*pBŠ˜ t<`µ~²]À¢ÈH8RØC—ab€  Åù€#§"P Ä
dºNí¶f\Ì‰K/&“pR0-T$¡EdKQQ4€"@5D1PÜ6G0!#Ô9	Í(ÙŠAGèôØ"4QP,aŠÄ@À € a	ØÑ …ÔL„‰@B(;`ƒ@/„½ÀÔÔ `a~¨ ² 	Û¢ø4B÷EY‰Z7«R…É¸Š˜g1DoÄ`K	BGÚG	d!ÚJT#'Ğ9€°Ò= Ly(D "0#°8ªj‘üù¢1*µ¼*yQ8_jœTQÇ°§LrÉÁ±,A·t€²Ã!SĞ©:‘RÙÂD‚APiò©²ğâB¥\€0 ÈQNÌ®+ „œ@…p§
­°0€4ØPX $Dm P ÚfĞºb ¸”ˆÄ „d¡ú €@’OA ¤€À	Å Œ£ H0HTœŠ{  ZˆX‰qVç•ø(º2& €QU
A†Ö"Å ²N¢ t rT@€ I	PÉÎ €°±5B·¥Ï e§!
ÀEg"äJ–R‘ó`”CY%À€Ô[j‚ K0<KW€”¢ä,€n ,$7Gd 	ä-< M"N¾„\h,1D Z}”€Q9Û‡1À„ÁxLbÄ @Ğ†À0; D” ÀR	+‚hJ¤R%1Ï"‘À
 AyÜÄ•ø^Œ Œhn!
r B6ÂĞä)oS68Ì(n	ä €%;Hà$-¦±C„ôÈ	,5ÙC$È 303‚D@	@ˆÔHäË
°g|QX A±(!ÀB1Bƒ`‚…Â[Ä„b •]‰P FÉ	5 (p
¹€Á¡@8C€jA"E‘!‘ï.N›5±ğœÍ,È°S%àI3+RK˜i`†¸CI @Béel”Ut‰ì Âa$ˆ)òÀÙëº„CS€¬W¡5‚Ì‹›¥¦P6¢3@€hd,C NoC8a<(MP5f€
IÒ.ôP À  Ä€‘ Èb„)	íYzA„* í(r@7FVY4"2<Ğ ”@  %d j :’ğ g@t5ƒC;… @0iHŸåZ¸‘Q‡
JR<6Ó*ÀiÁşXÉ`¯ !=³À€Ozœ– €ØPš
¥HYÇ„d ÂT‚âZ  D8€ÍP Œ%
ga–@ĞËA±a6  0&IÀUå„ UcÂ

FLA Üx@¼4)¢ bÒE­‚h€*mFP áC]`å5ŒS ­d€'t	7 AØ$H‰˜ÀM >¨¤ ƒ1Z8:!øi •‚cQ©ª,!ØqÀ€d$ P|†"ù	çïU¥dë®Øz`ª
 ÆBt4„!B" Y°Òg‚"€œyëT+^i°ÔÄ4lY@ˆïÀÀM0ÃCÁ *B ÚOXMh‚C%¼1^ÀåtC‡	
†àŒ*HÙ]8 à¶*#P	)Ó±ˆVp P 0’¸ (	KX%"` ’HË!	ƒ!$)Ù*@…¨Xx| œAÂ€® Ğ6â
 A„ÃhˆB S ~!LOôblˆ1 Á@!Ü"L¦d 	¡-Ğcô$Ja1€@$Qa Èğc‚_x3Ğ@Hˆ"c,Iúœ µ°çJ %ÒE˜š³È£@  +*Â'F$2 <‰À„>`BÉFVÖ@Qe‘‚0 Íªø¨ÆcåVƒ$€CÇcéªƒ‡rTÄ•`(N "8 i#„†P
 6$ EÈ– Ğ„R¡Ñ‚ &J^€X(Ö)	
ÀÈ6Â¶”$"‡bHB1*‰0ìpX‘¤""@U0ˆ R²ˆiØDwñ‰q
\ICph$T0	hBC‰Œƒ@áD‰ ˜†E4 (ˆ¡”ê`"#…É”„€ĞA¸à4À.
M#$p
‚DA\M-˜c ³ŒbĞ”@Œ¢@ºy`ˆÛªc\”DÁÊ‹`(Ú¡˜'@p¤d$ ì  ÀÆ(TÁª-Õ,µY¤`àe¬@¨€,†‡Há˜Êb2Y†Š ‚“ 1˜B…ÄJ8%a;“‡2QzJ! ]A…  b PèºFˆ±°2BÈO0`Q—&â#‹p€À@”pq,ˆ¨b$Â²‚fˆ< Kb*ŞPE$dD ]‚hâbD€H  Æ /H·Œ	!*Aˆ¨ÈÂ×‡@ŠAÁ# @€ğ ÀA€ò‚AÀ2¨Àˆ`Y¸)œIW(Á1¤f)X¼œ&œ
°™Aã %t[ğ ˆB³b`ÆUM–@ÈÓ€J	KBò%
„Ö&Èr Ašz
Ót€™Jœ§ †(`	šÑ†R  “t<`P@/TŸš|@°	ƒ! 8`Yò½,@fÔ „8#Í ‰TT‹KÂ–#€)$d#	QQ¨Ê§±ÀPïÂ’”
®P¤ò–'bZCp¢‰_ L(U{£¤ ±h¦ ‡  !##Mà „èL`P0“ A¥¦À`"Xå°I—ñ C1 ş‹À`U †T…Ì À‰E1sI02B%ğ ¤ñ@ÔA-¦ WTT oDBC	eLD“bA²sÁ‚$ ’x/ € Y@0ñA±5±ÊŠÀRø
&Ì'¤X†¡	”­ˆpà¼È -¹P&¸‰ p€2(ŠE!“ŠHS ¤€âç $ ! t
\J˜$‰øCKSPACE, action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, false) },
        { keyCode: VK.DELETE, action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, true) },
        { keyCode: VK.BACKSPACE, action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, false) },
        { keyCode: VK.DELETE, action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, true) }
      ], evt);

      Arr.find(matches, function (pattern) {
        return pattern.action();
      }).each(function (_) {
        evt.preventDefault();
      });
    };

    var executeKeyupOverride = function (editor, evt) {
      var matches = MatchKeys.match([
        { keyCode: VK.BACKSPACE, action: MatchKeys.action(CefDelete.paddEmptyElement, editor) },
        { keyCode: VK.DELETE, action: MatchKeys.action(CefDelete.paddEmptyElement, editor) }
      ], evt);

      Arr.find(matches, function (pattern) {
        return pattern.action();
      });
    };

    var setup = function (editor, caret) {
      editor.on('keydown', function (evt) {
        if (evt.isDefaultPrevented() === false) {
          executeKeydownOverride(editor, caret, evt);
        }
      });

      editor.on('keyup', function (evt) {
        if (evt.isDefaultPrevented() === false) {
          executeKeyupOverride(editor, evt);
        }
      });
    };

    return {
      setup: setup
    };
  }
);

/**
 * EnterKey.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Contains logic for handling the enter key to split/generate block elements.
 */
define(
  'tinymce.core.keyboard.EnterKey',
  [
    'tinymce.core.caret.CaretContainer',
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.RangeUtils',
    'tinymce.core.dom.TreeWalker',
    'tinymce.core.Env',
    'tinymce.core.text.Zwsp',
    'tinymce.core.util.Tools'
  ],
  function (CaretContainer, NodeType, RangeUtils, TreeWalker, Env, Zwsp, Tools) {
    var isIE = Env.ie && Env.ie < 11;

    var isEmptyAnchor = function (elm) {
      return elm && elm.nodeName === "A" && Tools.trim(Zwsp.trim(elm.innerText || elm.textContent)).length === 0;
    };

    var isTableCell = function (node) {
      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);
    };

    var emptyBlock = function (elm) {
      // BR is needed in empty blocks on non IE browsers
      elm.innerHTML = !isIE ? '<br data-mce-bogus="1">' : '';
    };

    var containerAndSiblingName = function (container, nodeName) {
      return container.nodeName === nodeName || (container.previousSibling && container.previousSibling.nodeName === nodeName);
    };

    // Returns true if the block can be split into two blocks or not
    var canSplitBlock = function (dom, node) {
      return node &&
        dom.isBlock(node) &&
        !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) &&
        !/^(fixed|absolute)/i.test(node.style.position) &&
        dom.getContentEditable(node) !== "true";
    };

    // Renders empty block on IE
    var renderBlockOnIE = function (dom, selection, block) {
      var oldRng;

      if (dom.isBlock(block)) {
        oldRng = selection.getRng();
        block.appendChild(dom.create('span', null, '\u00a0'));
        selection.select(block);
        block.lastChild.outerHTML = '';
        selection.setRng(oldRng);
      }
    };

    // Remove the first empty inline element of the block so this: <p><b><em></em></b>x</p> becomes this: <p>x</p>
    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {
      var node = block, firstChilds = [], i;

      if (!node) {
        return;
      }

      // Find inner most first child ex: <p><i><b>*</b></i></p>
      while ((node = node.firstChild)) {
        if (dom.isBlock(node)) {
          return;
        }

        if (node.nodeType == 1 && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {
          firstChilds.push(node);
        }
      }

      i = firstChilds.length;
      while (i--) {
        node = firstChilds[i];
        if (!node.hasChildNodes() || (node.firstChild == node.lastChild && node.firstChild.nodeValue === '')) {
          dom.remove(node);
        } else {
          if (isEmptyAnchor(node)) {
            dom.remove(node);
          }
        }
      }
    };

    var normalizeZwspOffset = function (start, container, offset) {
      if (NodeType.isText(container) === false) {
        return offset;
      } if (start) {
        return offset === 1 && container.data.charAt(offset - 1) === Zwsp.ZWSP ? 0 : offset;
      } else {
        return offset === container.data.length - 1 && container.data.charAt(offset) === Zwsp.ZWSP ? container.data.length : offset;
      }
    };

    var includeZwspInRange = function (rng) {
      var newRng = rng.cloneRange();
      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));
      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));
      return newRng;
    };

    var firstNonWhiteSpaceNodeSibling = function (node) {
      while (node) {
        if (node.nodeType === 1 || (node.nodeType === 3 && node.data && /[\r\n\s]/.test(node.data))) {
          return node;
        }

        node = node.nextSibling;
      }
    };

    var setup = function (editor) {
      var dom = editor.dom, selection = editor.selection, settings = editor.settings;
      var undoManager = editor.undoManager, schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements(),
        moveCaretBeforeOnEnterElementsMap = schema.getMoveCaretBeforeOnEnterElements();

      function handleEnterKey(evt) {
        var rng, tmpRng, editableRoot, container, offset, parentBlock, documentMode, shiftKey,
          newBlock, fragment, containerBlock, parentBlockName, containerBlockName, newBlockName, isAfterLastNodeInContainer;

        // Moves the caret to a suitable position within the root for example in the first non
        // pure whitespace text node or before an image
        function moveToCaretPosition(root) {
          var walker, node, rng, lastNode = root, tempElm;

          if (!root) {
            return;
          }

          // Old IE versions doesn't properly render blocks with br elements in them
          // For example <p><br></p> wont be rendered correctly in a contentEditable area
          // until you remove the br producing <p></p>
          if (Env.ie && Env.ie < 9 && parentBlock && parentBlock.firstChild) {
            if (parentBlock.firstChild == parentBlock.lastChild && parentBlock.firstChild.tagName == 'BR') {
              dom.remove(parentBlock.firstChild);
            }
          }

          if (/^(LI|DT|DD)$/.test(root.nodeName)) {
            var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);

            if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {
              root.insertBefore(dom.doc.createTextNode('\u00a0'), root.firstChild);
            }
          }

          rng = dom.createRng();

          // Normalize whitespace to remove empty text nodes. Fix for: #6904
          // Gecko will be able to place the caret in empty text nodes but it won't render propery
          // Older IE versions will sometimes crash so for now ignore all IE versions
          if (!Env.ie) {
            root.normalize();
          }

          if (root.hasChildNodes()) {
            walker = new TreeWalker(root, root);

            while ((node = walker.current())) {
              if (node.nodeType == 3) {
                rng.setStart(node, 0);
                rng.setEnd(node, 0);
                break;
              }

              if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {
                rng.setStartBefore(node);
                rng.setEndBefore(node);
                break;
              }

              lastNode = node;
              node = walker.next();
            }

            if (!node) {
              rng.setStart(lastNode, 0);
              rng.setEnd(lastNode, 0);
            }
          } else {
            if (root.nodeName == 'BR') {
              if (root.nextSibling && dom.isBlock(root.nextSibling)) {
                // Trick on older IE versions to render the caret before the BR between two lists
                if (!documentMode || documentMode < 9) {
                  tempElm = dom.create('br');
                  root.parentNode.insertBefore(tempElm, root);
                }

                rng.setStartBefore(root);
                rng.setEndBefore(root);
              } else {
                rng.setStartAfter(root);
                rng.setEndAfter(root);
              }
            } else {
              rng.setStart(root, 0);
              rng.setEnd(root, 0);
            }
          }

          selection.setRng(rng);

          // Remove tempElm created for old IE:s
          dom.remove(tempElm);
          selection.scrollIntoView(root);
        }

        function setForcedBlockAttrs(node) {
          var forcedRootBlockName = settings.forced_root_block;

          if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {
            dom.setAttribs(node, settings.forced_root_block_attrs);
          }
        }

        // Creates a new block element by cloning the current one or creating a new one if the name is specified
        // This function will also copy any text formatting from the parent block and add it to the new one
        function createNewBlock(name) {
          var node = container, block, clonedNode, caretNode, textInlineElements = schema.getTextInlineElements();

          if (name || parentBlockName == "TABLE" || parentBlockName == "HR") {
            block = dom.create(name || newBlockName);
            setForcedBlockAttrs(block);
          } else {
            block = parentBlock.cloneNode(false);
          }

          caretNode = block;

          if (settings.keep_styles === false) {
            dom.setAttrib(block, 'style', null); // wipe out any styles that came over with the block
            dom.setAttrib(block, 'class', null);
          } else {
            // Clone any parent styles
            do {
              if (textInlineElements[node.nodeName]) {
                // Never clone a caret containers
                if (node.id == '_mce_caret') {
                  continue;
                }

                clonedNode = node.cloneNode(false);
                dom.setAttrib(clonedNode, 'id', ''); // Remove ID since it needs to be document unique

                if (block.hasChildNodes()) {
                  clonedNode.appendChild(block.firstChild);
                  block.appendChild(clonedNode);
                } else {
                  caretNode = clonedNode;
                  block.appendChild(clonedNode);
                }
              }
            } while ((node = node.parentNode) && node != editableRoot);
          }

          // BR is needed in empty blocks on non IE browsers
          if (!isIE) {
            caretNode.innerHTML = '<br data-mce-bogus="1">';
          }

          return block;
        }

        // Returns true/false if the caret is at the start/end of the parent block element
        function isCaretAtStartOrEndOfBlock(start) {
          var walker, node, name, normalizedOffset;

          normalizedOffset = normalizeZwspOffset(start, container, offset);

          // Caret is in the middle of a text node like "a|b"
          if (container.nodeType == 3 && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {
            return false;
          }

          // If after the last element in block node edge case for #5091
          if (container.parentNode == parentBlock && isAfterLastNodeInContainer && !start) {
            return true;
          }

          // If the caret if before the first element in parentBlock
          if (start && container.nodeType == 1 && container == parentBlock.firstChild) {
            return true;
          }

          // Caret can be before/after a table or a hr
          if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {
            return (isAfterLastNodeInContainer && !start) || (!isAfterLastNodeInContainer && start);
          }

          // Walk the DOM and look for text nodes or non empty elements
          walker = new TreeWalker(container, parentBlock);

          // If caret is in beginning or end of a text block then jump to the next/previous node
          if (container.nodeType == 3) {
            if (start && normalizedOffset === 0) {
              walker.prev();
            } else if (!start && normalizedOffset == container.nodeValue.length) {
              walker.next();
            }
          }

          while ((node = walker.current())) {
            if (node.nodeType === 1) {
              // Ignore bogus elements
              if (!node.getAttribute('data-mce-bogus')) {
                // Keep empty elements like <img /> <input /> but not trailing br:s like <p>text|<br></p>
                name = node.nodeName.toLowerCase();
                if (nonEmptyElementsMap[name] && name !== 'br') {
                  return false;
                }
              }
            } else if (node.nodeType === 3 && !/^[ \t\r\n]*$/.test(node.nodeValue)) {
              return false;
            }

            if (start) {
              walker.prev();
            } else {
              walker.next();
            }
          }

          return true;
        }

        // Wraps any text nodes or inline elements in the specified forced root block name
        function wrapSelfAndSiblingsInDefaultBlock(container, offset) {
          var newBlock, parentBlock, startNode, node, next, rootBlockName, blockName = newBlockName || 'P';

          // Not in a block element or in a table cell or caption
          parentBlock = dom.getParent(container, dom.isBlock);
          if (!parentBlock || !canSplitBlock(dom, parentBlock)) {
            parentBlock = parentBlock || editableRoot;

            if (parentBlock == editor.getBody() || isTableCell(parentBlock)) {
              rootBlockName = parentBlock.nodeName.toLowerCase();
            } else {
              rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();
            }

            if (!parentBlock.hasChildNodes()) {
              newBlock = dom.create(blockName);
              setForcedBlockAttrs(newBlock);
              parentBlock.appendChild(newBlock);
              rng.setStart(newBlock, 0);
              rng.setEnd(newBlock, 0);
              return newBlock;
            }

            // Find parent that is the first child of parentBlock
            node = container;
            while (node.parentNode != parentBlock) {
              node = node.parentNode;
            }

            // Loop left to find start node start wrapping at
            while (node && !dom.isBlock(node)) {
              startNode = node;
              node = node.previousSibling;
            }

            if (startNode && schema.isValidChild(rootBlockName, blockName.toLowerCase())) {
              newBlock = dom.create(blockName);
              setForcedBlockAttrs(newBlock);
              startNode.parentNode.insertBefore(newBlock, startNode);

              // Start wrapping until we hit a block
              node = startNode;
              while (node && !dom.isBlock(node)) {
                next = node.nextSibling;
                newBlock.appendChild(node);
                node = next;
              }

              // Restore range to it's past location
              rng.setStart(container, offset);
              rng.setEnd(container, offset);
            }
          }

          return container;
        }

        // Inserts a block or br before/after or in the middle of a split list of the LI is empty
        function handleEmptyListItem() {
          function isFirstOrLastLi(first) {
            var node = containerBlock[first ? 'firstChild' : 'lastChild'];

            // Find first/last element since there might be whitespace there
            while (node) {
              if (node.nodeType == 1) {
                break;
              }

              node = node[first ? 'nextSibling' : 'previousSibling'];
            }

            return node === parentBlock;
          }

          function getContainerBlock() {
            var containerBlockParent = containerBlock.parentNode;

            if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {
              return containerBlockParent;
            }

            return containerBlock;
          }

          if (containerBlock == editor.getBody()) {
            return;
          }

          // Check if we are in an nested list
          var containerBlockParentName = containerBlock.parentNode.nodeName;
          if (/^(OL|UL|LI)$/.test(containerBlockParentName)) {
            newBlockName = 'LI';
          }

          newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');

          if (isFirstOrLastLi(true) && isFirstOrLastLi()) {
            if (containerBlockParentName == 'LI') {
              // Nested list is inside a LI
              dom.insertAfter(newBlock, getContainerBlock());
            } else {
              // Is first and last list item then replace the OL/UL with a text block
              dom.replace(newBlock, containerBlock);
            }
          } else if (isFirstOrLastLi(true)) {
            if (containerBlockParentName == 'LI') {
              // List nested in an LI then move the list to a new sibling LI
              dom.insertAfter(newBlock, getContainerBlock());
              newBlock.appendChild(dom.doc.createTextNode(' ')); // Needed for IE so the caret can be placed
              newBlock.appendChild(containerBlock);
            } else {
              // First LI in list then remove LI and add text block before list
              containerBlock.parentNode.insertBefore(newBlock, containerBlock);
            }
          } else if (isFirstOrLastLi()) {
            // Last LI in list then remove LI and add text block after list
            dom.insertAfter(newBlock, getContainerBlock());
            renderBlockOnIE(dom, selection, newBlock);
          } else {
            // Middle LI in list the split the list and insert a text block in the middle
            // Extract after fragment and insert it after the current block
            containerBlock = getContainerBlock();
            tmpRng = rng.cloneRange();
            tmpRng.setStartAfter(parentBlock);
            tmpRng.setEndAfter(containerBlock);
            fragment = tmpRng.extractContents();

            if (newBlockName == 'LI' && fragment.firstChild.nodeName == 'LI') {
              newBlock = fragment.firstChild;
              dom.insertAfter(fragment, containerBlock);
            } else {
              dom.insertAfter(fragment, containerBlock);
              dom.insertAfter(newBlock, containerBlock);
            }
          }

          dom.remove(parentBlock);
          moveToCaretPosition(newBlock);
          undoManager.add();
        }

        // Inserts a BR element if the forced_root_block option is set to false or empty string
        function insertBr() {
          editor.execCommand("InsertLineBreak", false, evt);
        }

        // Trims any linebreaks at the beginning of node user for example when pressing enter in a PRE element
        function trimLeadingLineBreaks(node) {
          do {
            if (node.nodeType === 3) {
              node.nodeValue = node.nodeValue.replace(/^[\r\n]+/, '');
            }

            node = node.firstChild;
          } while (node);
        }

        function getEditableRoot(node) {
          var root = dom.getRoot(), parent, editableRoot;

          // Get all parents until we hit a non editable parent or the root
          parent = node;
          while (parent !== root && dom.getContentEditable(parent) !== "false") {
            if (dom.getContentEditable(parent) === "true") {
              editableRoot = parent;
            }

            parent = parent.parentNode;
          }

          return parent !== root ? editableRoot : root;
        }

        // Adds a BR at the end of blocks that only contains an IMG or INPUT since
        // these might be floated and then they won't expand the block
        function addBrToBlockIfNeeded(block) {
          var lastChild;

          // IE will render the blocks correctly other browsers needs a BR
          if (!isIE) {
            block.normalize(); // Remove empty text nodes that got left behind by the extract

            // Check if the block is empty or contains a floated last child
            lastChild = block.lastChild;
            if (!lastChild || (/^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true)))) {
              dom.add(block, 'br');
            }
          }
        }

        function insertNewBlockAfter() {
          // If the caret is at the end of a header we produce a P tag after it similar to Word unless we are in a hgroup
          if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName != 'HGROUP') {
            newBlock = createNewBlock(newBlockName);
          } else {
            newBlock = createNewBlock();
          }

          // Split the current container block element if enter is pressed inside an empty inner block element
          if (settings.end_container_on_empty_block && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {
            // Split container block for example a BLOCKQUOTE at the current blockParent location for example a P
            newBlock = dom.split(containerBlock, parentBlock);
          } else {
            dom.insertAfter(newBlock, parentBlock);
          }

          moveToCaretPosition(newBlock);
        }

        rng = selection.getRng(true);

        // Event is blocked by some other handler for example the lists plugin
        if (evt.isDefaultPrevented()) {
          return;
        }

        // Delete any selected contents
        if (!rng.collapsed) {
          editor.execCommand('Delete');
          return;
        }

        // Setup range items and newBlockName
        new RangeUtils(dom).normalize(rng);
        container = rng.startContainer;
        offset = rng.startOffset;
        newBlockName = (settings.force_p_newlines ? 'p' : '') || settings.forced_root_block;
        newBlockName = newBlockName ? newBlockName.toUpperCase() : '';
        documentMode = dom.doc.documentMode;
        shiftKey = evt.shiftKey;

        // Resolve node index
        if (container.nodeType == 1 && container.hasChildNodes()) {
          isAfterLastNodeInContainer = offset > container.childNodes.length - 1;

          container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;
          if (isAfterLastNodeInContainer && container.nodeType == 3) {
            offset = container.nodeValue.length;
          } else {
            offset = 0;
          }
        }

        // Get editable root node, normally the body element but sometimes a div or span
        editableRoot = getEditableRoot(container);

        // If there is no editable root then enter is done inside a contentEditable false element
        if (!editableRoot) {
          return;
        }

        undoManager.beforeChange();

        // If editable root isn't block nor the root of the editor
        if (!dom.isBlock(editableRoot) && editableRoot != dom.getRoot()) {
          if (!newBlockName || shiftKey) {
            insertBr();
          }

          return;
        }

        // Wrap the current node and it's sibling in a default block if it's needed.
        // for example this <td>text|<b>text2</b></td> will become this <td><p>text|<b>text2</p></b></td>
        // This won't happen if root blocks are disabled or the shiftKey is pressed
        if ((newBlockName && !shiftKey) || (!newBlockName && shiftKey)) {
          container = wrapSelfAndSiblingsInDefaultBlock(container, offset);
        }

        // Find parent block and setup empty block paddings
        parentBlock = dom.getParent(container, dom.isBlock);
        containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;

        // Setup block names
        parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : ''; // IE < 9 & HTML5
        containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : ''; // IE < 9 & HTML5

        // Enter inside block contained within a LI then split or insert before/after LI
        if (containerBlockName == 'LI' && !evt.ctrlKey) {
          parentBlock = containerBlock;
          parentBlockName = containerBlockName;
        }

        if (editor.undoManager.typing) {
          editor.undoManager.typing = false;
          editor.undoManager.add();
        }

        // Handle enter in list item
        if (/^(LI|DT|DD)$/.test(parentBlockName)) {
          if (!newBlockName && shiftKey) {
            insertBr();
            return;
          }

          // Handle enter inside an empty list item
          if (dom.isEmpty(parentBlock)) {
            handleEmptyListItem();
            return;
          }
        }

        // Don't split PRE tags but insert a BR instead easier when writing code samples etc
        if (parentBlockName == 'PRE' && settings.br_in_pre !== false) {
          if (!shiftKey) {
            insertBr();
            return;
          }
        } else {
          // If no root block is configured then insert a BR by default or if the shiftKey is pressed
          if ((!newBlockName && !shiftKey && parentBlockName != 'LI') || (newBlockName && shiftKey)) {
            insertBr();
            return;
          }
        }

        // If parent block is root then never insert new blocks
        if (newBlockName && parentBlock === editor.getBody()) {
          return;
        }

        // Default block name if it's not configured
        newBlockName = newBlockName || 'P';

        // Insert new block before/after the parent block depending on caret location
        if (CaretContainer.isCaretContainerBlock(parentBlock)) {
          newBlock = CaretContainer.showCaretContainerBlock(parentBlock);
          if (dom.isEmpty(parentBlock)) {
            emptyBlock(parentBlock);
          }
          moveToCaretPosition(newBlock);
        } else if (isCaretAtStartOrEndOfBlock()) {
          insertNewBlockAfter();
        } else if (isCaretAtStartOrEndOfBlock(true)) {
          // Insert new block before
          newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);
          renderBlockOnIE(dom, selection, newBlock);

          // Adjust caret position if HR
          containerAndSiblingName(parentBlock, 'HR') ? moveToCaretPosition(newBlock) : moveToCaretPosition(parentBlock);
        } else {
          // Extract after fragment and insert it after the current block
          tmpRng = includeZwspInRange(rng).cloneRange();
          tmpRng.setEndAfter(parentBlock);
          fragment = tmpRng.extractContents();
          trimLeadingLineBreaks(fragment);
          newBlock = fragment.firstChild;
          dom.insertAfter(fragment, parentBlock);
          trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);
          addBrToBlockIfNeeded(parentBlock);

          if (dom.isEmpty(parentBlock)) {
            emptyBlock(parentBlock);
          }

          newBlock.normalize();

          // New block might become empty if it's <p><b>a |</b></p>
          if (dom.isEmpty(newBlock)) {
            dom.remove(newBlock);
            insertNewBlockAfter();
          } else {
            moveToCaretPosition(newBlock);
          }
        }

        dom.setAttrib(newBlock, 'id', ''); // Remove ID since it needs to be document unique

        // Allow custom handling of new blocks
        editor.fire('NewBlock', { newBlock: newBlock });

        undoManager.typing = false;
        undoManager.add();
      }

      editor.on('keydown', function (evt) {
        if (evt.keyCode == 13) {
          if (handleEnterKey(evt) !== false) {
            evt.preventDefault();
          }
        }
      });
    };

    return {
      setup: setup
    };
  }
);

/**
 * InsertSpace.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.keyboard.InsertSpace',
  [
    'ephox.katamari.api.Fun',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.dom.NodeType',
    'tinymce.core.keyboard.BoundaryLocation'
  ],
  function (Fun, CaretPosition, NodeType, BoundaryLocation) {
    var isValidInsertPoint = function (location, caretPosition) {
      return isAtStartOrEnd(location) && NodeType.isText(caretPosition.container());
    };

    var insertNbspAtPosition = function (editor, caretPosition) {
      var container = caretPosition.container();
      var offset = caretPosition.offset();

      container.insertData(offset, '\u00a0');
      editor.selection.setCursorLocation(container, offset + 1);
    };

    var insertAtLocation = function (editor, caretPosition, location) {
      if (isValidInsertPoint(location, caretPosition)) {
        insertNbspAtPosition(editor, caretPosition);
        return true;
      } else {
        return false;
      }
    };

    var insertAtCaret = function (editor) {
      var caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());
      var boundaryLocation = BoundaryLocation.readLocation(editor.getBody(), caretPosition);
      return boundaryLocation.map(Fun.curry(insertAtLocation, editor, caretPosition)).getOr(false);
    };

    var isAtStartOrEnd = function (location) {
      return location.fold(
        Fun.constant(false), // Before
        Fun.constant(true),  // Start
        Fun.constant(true),  // End
        Fun.constant(false)  // After
      );
    };

    var insertAtSelection = function (editor) {
      return editor.selection.isCollapsed() ? insertAtCaret(editor) : false;
    };

    return {
      insertAtSelection: insertAtSelection
    };
  }
);

/**
 * SpaceKey.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.keyboard.SpaceKey',
  [
    'ephox.katamari.api.Arr',
    'tinymce.core.keyboard.InsertSpace',
    'tinymce.core.keyboard.MatchKeys',
    'tinymce.core.util.VK'
  ],
  function (Arr, InsertSpace, MatchKeys, VK) {
    var executeKeydownOverride = function (editor, evt) {
      var matches = MatchKeys.match([
        { keyCode: VK.SPACEBAR, action: MatchKeys.action(InsertSpace.insertAtSelection, editor) }
      ], evt);

      Arr.find(matches, function (pattern) {
        return pattern.action();
      }).each(function (_) {
        evt.preventDefault();
      });
    };

    var setup = function (editor) {
      editor.on('keydown', function (evt) {
        if (evt.isDefaultPrevented() === false) {
          executeKeydownOverride(editor, evt);
        }
      });
    };

    return {
      setup: setup
    };
  }
);

/**
 * KeyboardOverrides.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.keyboard.KeyboardOverrides',
  [
    'tinymce.core.keyboard.ArrowKeys',
    'tinymce.core.keyboard.BoundarySelection',
    'tinymce.core.keyboard.DeleteBackspaceKeys',
    'tinymce.core.keyboard.EnterKey',
    'tinymce.core.keyboard.SpaceKey'
  ],
  function (ArrowKeys, BoundarySelection, DeleteBackspaceKeys, EnterKey, SpaceKey) {
    var setup = function (editor) {
      var caret = BoundarySelection.setupSelectedState(editor);

      ArrowKeys.setup(editor, caret);
      DeleteBackspaceKeys.setup(editor, caret);
      EnterKey.setup(editor);
      SpaceKey.setup(editor);
    };

    return {
      setup: setup
    };
  }
);
/**
 * NodeChange.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class handles the nodechange event dispatching both manual and through selection change events.
 *
 * @class tinymce.NodeChange
 * @private
 */
define(
 ßÆ»´+îÚx¬ğóm·~ë·FgŸÏµîşáŠ5ÿoûûñt­şÿ¾şÖ>£¼{4‘/ó¾>§ûŞjÿlsï·×}?›üş9{9}ÿÕöúş›òÿï¿Ü<ÿqÛyş¾õ³ğBö¿ÒÛûJÆ8ü:’ÿf¾½}ÿv[ÿô¬Á}6²g~0P“$ˆ ‚È£ÒAc¶ŒqQ!!@@	J¢T¦Q2`ËQ•
J‘÷€”ˆÁ#B@`õ¬ [*aœğp•¬EEıĞ
`‚ ƒL€7‹¸EF‚ãñK-`œaÜ	p¼1\úª`dC\—’\CÖT ¬2È+¾‡´qº†ºØKÎ€D9f¤¦˜iC2¦ú2‘X4…Â$i	ĞÈcD`¯Dàr78)y¢Yô(f1« µâˆ¶zi¤ÀŠ€,:UR`–ğŠ	4ÄmšÊš úpú½‡VyXëÃëİkô:îùÛÿ`ñõı¸ÿåùµ}~Åå¯ê+ÿ»ã•º>¸sÂî¦ÿ|¶gæOYjıö°ÿ»¯úíşÿŸõ¿¯Í?ı}Ï©÷Ü³Óövgƒkù®³ŞÖœïÿh»÷Høl‰İö<È|©Ö‹”İ¾Ç¦?³Ä}ş^Ï¿Æ}– &\–ñ›Q. 4F, j}µ`ì"GæE,
†Œ(ZFRF©‰!`Ğ¢i 0Ì`@ñ-'òW(0\0S -øÅ3J¢€µ6aÓˆ‰Ä„fhLi"@6…‚"HnáÈ")…Ä‹ÇûüûJŞøûËß·üÏ»¿ç…¸[gç5f-}öSïúßÏv²öË½kü>Zó{;ßÚöò®{ı»Ù­÷çÆu«jº>~Ùÿó?yññş»ÿÎZk)¿‡3¬6zÕûi½Ôß×¯øÂ¿÷•Û|ù¤ıÙßÿö^¿…ıªvêØ÷•ÿòo­&^7Zı¿—«·Í˜÷ºıİ¿ÿÅ÷¿û;Ï×ó±­¹ü«î¼ûşo¿í~u>øı÷üYÑíÏÿşûï-qëıõŸ_ÊıøğÑgP]5úó2.gŞ¿ışş¿—Q~–`_øÿñö÷µáú»w¿ÙÃıÁ¾¸6yWv{[=;¿ÉÛ´q7«_Ó<\ªd" r¡ÂlHÆ@9 ap1‰ËœH- ŒGxœD¨¨‘1‚ƒğPhÿx 3ÈâÀÁ'äR ¢p4T#FğÀŒEd‘ˆ´‘$`i 9HÛµ,&FL(9!€@XÎI"ŒÑXUª Ù†ß#ùû¿^·Oû}›ò[Ó÷á_›jª}ÔüöÿßómëÔã^.¿rêåì¿WßÈwóŞ¿~ô%öÜ|ş®üıÒşg?ÛÿÍÿ¥{[úşÆoK¿Y×©lŠô6ß§Î{ıŸùÄ{õ/ß½¼õûÿúhí`ÿÿ‰?ïÇåsöãşwÕ6ö¿¯ëÆ†`Á$XY 	Ü0 gT)VŠL¿M¡È¤@fô–i…ª7 1!"¡gp Iğ¯@F¯$Â „.6ı"KféaåS/¦K,€S4ôy4;ĞL$Add‰™-+ĞB—ì& ¢z:(‹9 ‡$4p"„ğ®ø6k½µÙ„ ]—À¯ÃŸÂ ‘Ø
¾"F "‰Á&Yè)ÔW!p¡ 	0Y€`…¦ d #Í…Á	 Ä¨Ãp0ü)©ãŒP‘r<ÂÉçÛ ¥$€°#‘WLQáˆåº|ßß¶şQò¹¾·?®K•záÿ÷§z¬~Şê»İüéh¾«û÷w÷¿cï›ßV?²»ïoÿüÃú7ß_kv½¾›wl—ùßIšÏşX‚Ûş×öÿËOŸ¾›1Çoá|;ÿÖ»~ß®ë~®ö5~ùî‹-aı­yÿãkOşªÏÑêëOëıÿ€È±‡I”  %,œ9m•¢°ÃĞ,`Ã=Áp@…q °’ vÜ€0E#¦02î &¦i"C‡@k6
d³€½h€PDW4@6ä›E+ ¢Qª^°d@Ta8FhF,È —"Ìèˆ’Bı»ëı®ìõ¾—™­úaü÷v·¼š?«p;®Ş=ßıÛ¹¿û}×éÉ4Ô_ÍSWY½ÿİzÿşï{tvU:¯·aÕ§ÜÿÿsÖÑæ÷wÿ)ßegıöÛŸ/í»İûJó_où~_ßûó>ÙƒÓß¿×ùçî½¥¯Ï÷{õ÷ı}ãíhÿg¾ùıb¨ßYß;´ÿıÜŸUuK)íîó%íı±Jïlú¶¿çY‡7ÏmôŸu»ª×óçow·±à÷wµÿu±6ËmÂÿìéıÆoacş¿w?·«êJÇ£;›ûzÿU&Öşß»û_ölßÊŞÿVm?vgÿÿ÷xÓåù,­b—oòûÛÉ}Ï¿E÷õ|UîùãÉD£ô[+P80à„Ô b±0©„Wè¤:5$@,¤r#  ‰–(†Ìâ°m+†Š[ƒ8  O	†ªCg"Î  ğE0jH	1cÏ-+PQ&!xÏ	˜6…0(p #%%0¦ É1PŠ" “=@°ÿäXëC¾Ş?ûGxÿıóªu¯şW¢øwİÍ¼ßT_›Eö¼|şoîÔ¯ı„ßÛß´üäşó¿ÿçv¿k¿ÿ‡%û;~‡ÏÁ~ï¿÷íïúvõGÚ·ï¼{ÌÛ»úìY^|µKI÷=_øs¿µş÷WëŸÿ¿¯¥µ‹è{}?Âÿëêºİşï?ŸŒh)p
2ƒ+$’‘î`J\Æ¾Ãåc ô0$"ÏA¡7Ù°”ESG£îO)â@Œ«³@'"ˆ;@S !B‹e:pĞb5   Š5†%\QC+ï ºĞ“"¥€„V’ 7r²çĞBUJ‚ÍBøA:+±!—ğ!à L€< tBn ù‘†4@¤€‚¹Ï$…9¢
œ<È,  t:¤aˆÈr0!.€j˜À`åò ĞP£W@¡8³K ¦h^T€YÑ(ôÁ$ %ë'pŒ=Z 	, °)2(j•<oŞ ¶¾½‹îgı<óOÿ%ÿö'½ÌÛùß6\ÿ”÷­}ô“é/EõMÏæÿeÛ\ÿy>ş<¿íİŞÜŞåşÜßôôéoÇ±ıØG¿.>ëÿû[Éd¬}aÿsëçğOqvé6öåÿŞ½v7cåÿşÊ•šÿ‘İ·_>:ù§PaŒ„À-(RØ!¡P`ˆ• A$v…$5-pP€ĞŒO"  SD JÅ¤ƒÉ :h
Nl±ã¢vš–'’ÜæP™ÂÉ@Q•3¡"„@‹/!±D†d 		¬ŸC@W¤{ˆ¥Ğ6#NÌ‘5  "ÿK÷+??¿»ñ÷Gı/ ·ïÿ÷ÃÍ|÷µïŸğş|Ûÿóëû
n{¶üŞz­òŸ\ÑïØ_™wß~]øÓŸû§Ü8lûyfºóÙÿ÷ûõçêÏÛîÿ«õÿ¼õ£ß7­İø>1üŸç}·>ŠÍ»ü“¿¿+Ã°úş5~GŞÿWï¿ÇÎ¾ìGıGğ
Ëß«ÇÖè´}8ïi×éóìÕëŠWo&µ8úkÿÿŞ¿ûîçşÛ=ÈOçîßÿNş„²Ş\ÿï÷ı³ÿ÷=zTÿıyc7ÿ·Ûü–½÷İ~îâŒ#>ö}}µößãoÛôı½®rN÷ÿ¿µúØjÒßÿøwk_Ût÷~· &bÆ‹,B Y("ÓVI"{œ Úı=@AQ
„p¤#H‹1LlŸI€"^àWh½“ oÀ!õ… "2D‚åÑƒP"(MBD À#8ŒÙ&!kjìŞÜ#æˆ
€qèDÙà"£dcE:!  È¢İÈŸùÿ–÷İ]]Ó½¶ú÷ıúáX+ùeT&Ò¿N—ÑÓúõÏÿ?çÿÏıÕùıÿ±ŸÿêûºmÏÓùí9¶:Âòÿö•qy÷ŞÛßŠ¾ãöòşÏ®õ}=|ÿım§aõ7ú™mïJëõû×İ³lİ÷8sİní¿†øöúé÷ñ}ú]ëÕwŸ5“ 0
dğ êê	 `‰hA (ıô¨ 1$’	•CĞ" £¸vRÉ>ĞĞ¢Bb	q€@’G@¢`TÂ…¤/J&…½#Ag@€ „K‡VØPµD@@P#:i2ÌIÓò)ƒ8%Ej`<äfÜ’."p2!Æ0"PÓS4ˆü±„H0\‘˜˜‹J’4*gU6Ma@<ÎTcR%p¶I€Â6ĞA6V¸&  :ˆ½€#;&1²E@O_ˆAÙ?dš¹
…aˆ xPx¢®±I
Ä(F8;ğë÷«ëS~øº®êNòZùÛÿ{oõ{~Ÿí¾_Ü™êùŞwôßìM×¾äM¬¯šEşşó]}û½OöSøzç»ñ—úeşáÙ¨Şië¾u+ã]¿W¿ÿ.ïü»´ş¿÷;¿Ÿ·ÿÿoúæë¿Åû_IÿyÛ¿ç*·îù+øûûß÷§ï¾ïoö7æ8ä"Rƒ¬Ù²(ŠãH<¡p²¤Éªé†´Ö  ÄäôQòIX@
 –€!œJ˜Ğ!@BÍ œt‚ EÁVÔ¤ `£%@`'ŠŒ‚’Œ¡Ê¡#ñ&F!àÿ„Bğ€
ÁBa† ‰¥Ö³š®aÆÿ´ÖòÇŸğÕEÅù¾ıæöE·ööıå‹ù'®ş[ùÿ¿Ÿë.pôéÿ;\™Ç“GV~wû}‹†÷ıïõëüÿÊıûøÖ}ôîÜÿ^õçŞõµ©gßşO¿¹>³gdşo§ÿë[šÿ>7ÿşıíşÏÿ[ùÅÿø¤¿½¾Û÷ğïVİŞ=ï3[ŸıÔÕ·µû/gíö<ÖÄı³ªû™İQ{û¿¿ö¯¿ÿÿşÏå§×ıú¿æÖV»ëÿë~óßÙ±óûòí½ê~zößXİzÇİ=ÛÔÔxŠ_mßïï=÷ÍóOsï§Ï7£óıï]×ş¶w÷Şç®¶:{âìıïNv~ív’€” U	¤ kD …‘Ú¯<Ìœ82*ˆØ…‹Àà€"P¼árz»ó.‡w ÓšAô7Ğ,AHJF¹rŒ&ÔÜQ:…‘D`bBN
° ih%Àá,á‹ Dj‚Qc|Pæ€dãb! ™oot = editor.getBody();
          node = selection.getStart(true) || root;

          // Make sure the node is within the editor root or is the editor root
          if (node.ownerDocument != editor.getDoc() || !editor.dom.isChildOf(node, root)) {
            node = root;
          }

          // Get parents and add them to object
          parents = [];
          editor.dom.getParent(node, function (node) {
            if (node === root) {
              return true;
            }

            parents.push(node);
          });

          args = args || {};
          args.element = node;
          args.parents = parents;

          editor.fire('NodeChange', args);
        }
      };
    };
  }
);

/**
 * FakeCaret.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module contains logic for rendering a fake visual caret.
 *
 * @private
 * @class tinymce.caret.FakeCaret
 */
define(
  'tinymce.core.caret.FakeCaret',
  [
    'tinymce.core.caret.CaretContainer',
    'tinymce.core.caret.CaretContainerRemove',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.dom.DomQuery',
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.RangeUtils',
    'tinymce.core.geom.ClientRect',
    'tinymce.core.util.Delay'
  ],
  function (CaretContainer, CaretContainerRemove, CaretPosition, DomQuery, NodeType, RangeUtils, ClientRect, Delay) {
    var isContentEditableFalse = NodeType.isContentEditableFalse;

    var isTableCell = function (node) {
      return node && /^(TD|TH)$/i.test(node.nodeName);
    };

    return function (rootNode, isBlock) {
      var cursorInterval, $lastVisualCaret, caretContainerNode;

      function getAbsoluteClientRect(node, before) {
        var clientRect = ClientRect.collapse(node.getBoundingClientRect(), before),
          docElm, scrollX, scrollY, margin, rootRect;

        if (rootNode.tagName == 'BODY') {
          docElm = rootNode.ownerDocument.documentElement;
          scrollX = rootNode.scrollLeft || docElm.scrollLeft;
          scrollY = rootNode.scrollTop || docElm.scrollTop;
        } else {
          rootRect = rootNode.getBoundingClientRect();
          scrollX = rootNode.scrollLeft - rootRect.left;
          scrollY = rootNode.scrollTop - rootRect.top;
        }

        clientRect.left += scrollX;
        clientRect.right += scrollX;
        clientRect.top += scrollY;
        clientRect.bottom += scrollY;
        clientRect.width = 1;

        margin = node.offsetWidth - node.clientWidth;

        if (margin > 0) {
          if (before) {
            margin *= -1;
          }

          clientRect.left += margin;
          clientRect.right += margin;
        }

        return clientRect;
      }

      function trimInlineCaretContainers() {
        var contentEditableFalseNodes, node, sibling, i, data;

        contentEditableFalseNodes = DomQuery('*[contentEditable=false]', rootNode);
        for (i = 0; i < contentEditableFalseNodes.length; i++) {
          node = contentEditableFalseNodes[i];

          sibling = node.previousSibling;
          if (CaretContainer.endsWithCaretContainer(sibling)) {
            data = sibling.data;

            if (data.length == 1) {
              sibling.parentNode.removeChild(sibling);
            } else {
              sibling.deleteData(data.length - 1, 1);
            }
          }

          sibling = node.nextSibling;
          if (CaretContainer.startsWithCaretContainer(sibling)) {
            data = sibling.data;

            if (data.length == 1) {
              sibling.parentNode.removeChild(sibling);
            } else {
              sibling.deleteData(0, 1);
            }
          }
        }

        return null;
      }

      function show(before, node) {
        var clientRect, rng;

        hide();

        if (isTableCell(node)) {
          return null;
        }

        if (isBlock(node)) {
          caretContainerNode = CaretContainer.insertBlock('p', node, before);
          clientRect = getAbsoluteClientRect(node, before);
          DomQuery(caretContainerNode).css('top', clientRect.top);

          $lastVisualCaret = DomQuery('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(clientRect).appendTo(rootNode);

          if (before) {
            $lastVisualCaret.addClass('mce-visual-caret-before');
          }

          startBlink();

          rng = node.ownerDocument.createRange();
          rng.setStart(caretContainerNode, 0);
          rng.setEnd(caretContainerNode, 0);
        } else {
          caretContainerNode = CaretContainer.insertInline(node, before);
          rng = node.ownerDocument.createRange();

          if (isContentEditableFalse(caretContainerNode.nextSibling)) {
            rng.setStart(caretContainerNode, 0);
            rng.setEnd(caretContainerNode, 0);
          } else {
            rng.setStart(caretContainerNode, 1);
            rng.setEnd(caretContainerNode, 1);
          }

          return rng;
        }

        return rng;
      }

      function hide() {
        trimInlineCaretContainers();

        if (caretContainerNode) {
          CaretContainerRemove.remove(caretContainerNode);
          caretContainerNode = null;
        }

        if ($lastVisualCaret) {
          $lastVisualCaret.remove();
          $lastVisualCaret = null;
        }

        clearInterval(cursorInterval);
      }

      function startBlink() {
        cursorInterval = Delay.setInterval(function () {
          DomQuery('div.mce-visual-caret', rootNode).toggleClass('mce-visual-caret-hidden');
        }, 500);
      }

      function destroy() {
        Delay.clearInterval(cursorInterval);
      }

      function getCss() {
        return (
          '.mce-visual-caret {' +
          'position: absolute;' +
          'background-color: black;' +
          'background-color: currentcolor;' +
          '}' +
          '.mce-visual-caret-hidden {' +
          'display: none;' +
          '}' +
          '*[data-mce-caret] {' +
          'position: absolute;' +
          'left: -1000px;' +
          'right: auto;' +
          'top: 0;' +
          'margin: 0;' +
          'padding: 0;' +
          '}'
        );
      }

      return {
        show: show,
        hide: hide,
        getCss: getCss,
        destroy: destroy
      };
    };
  }
);
/**
 * MousePosition.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module calculates an absolute coordinate inside the editor body for both local and global mouse events.
 *
 * @private
 * @class tinymce.dom.MousePosition
 */
define(
  'tinymce.core.dom.MousePosition',
  [
  ],
  function () {
    var getAbsolutePosition = function (elm) {
      var doc, docElem, win, clientRect;

      clientRect = elm.getBoundingClientRect();
      doc = elm.ownerDocument;
      docElem = doc.documentElement;
      win = doc.defaultView;

      return {
        top: clientRect.top + win.pageYOffset - docElem.clientTop,
        left: clientRect.left + win.pageXOffset - docElem.clientLeft
      };
    };

    var getBodyPosition = function (editor) {
      return editor.inline ? getAbsolutePosition(editor.getBody()) : { left: 0, top: 0 };
    };

    var getScrollPosition = function (editor) {
      var body = editor.getBody();
      return editor.inline ? { left: body.scrollLeft, top: body.scrollTop } : { left: 0, top: 0 };
    };

    var getBodyScroll = function (editor) {
      var body = editor.getBody(), docElm = editor.getDoc().documentElement;
      var inlineScroll = { left: body.scrollLeft, top: body.scrollTop };
      var iframeScroll = { left: body.scrollLeft || docElm.scrollLeft, top: body.scrollTop || docElm.scrollTop };

      return editor.inline ? inlineScroll : iframeScroll;
    };

    var getMousePosition = function (editor, event) {
      if (event.target.ownerDocument !== editor.getDoc()) {
        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());
        var scrollPosition = getBodyScroll(editor);

        return {
          left: event.pageX - iframePosition.left + scrollPosition.left,
          top: event.pageY - iframePosition.top + scrollPosition.top
        };
      }

      return {
        left: event.pageX,
        top: event.pageY
      };
    };

    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {
      return {
        pageX: (mousePosition.left - bodyPosition.left) + scrollPosition.left,
        pageY: (mousePosition.top - bodyPosition.top) + scrollPosition.top
      };
    };

    var calc = function (editor, event) {
      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));
    };

    return {
      calc: calc
    };
  }
);

/**
 * DragDropOverrides.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module contains logic overriding the drag/drop logic of the editor.
 *
 * @private
 * @class tinymce.DragDropOverrides
 */
define(
  'tinymce.core.DragDropOverrides',
  [
    "tinymce.core.dom.NodeType",
    "tinymce.core.util.Arr",
    "tinymce.core.util.Fun",
    "tinymce.core.util.Delay",
    "tinymce.core.dom.DOMUtils",
    "tinymce.core.dom.MousePosition"
  ],
  function (
    NodeType, Arr, Fun, Delay, DOMUtils, MousePosition
  ) {
    var isContentEditableFalse = NodeType.isContentEditableFalse,
      isContentEditableTrue = NodeType.isContentEditableTrue;

    var isDraggable = function (rootElm, elm) {
      return isContentEditableFalse(elm) && elm !== rootElm;
    };

    var isValidDropTarget = function (editor, targetElement, dragElement) {
      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {
        return false;
      }

      if (isContentEditableFalse(targetElement)) {
        return false;
      }

      return true;
    };

    var cloneElement = function (elm) {
      var cloneElm = elm.cloneNode(true);
      cloneElm.removeAttribute('data-mce-selected');
      return cloneElm;
    };

    var createGhost = function (editor, elm, width, height) {
      var clonedElm = elm.cloneNode(true);

      editor.dom.setStyles(clonedElm, { width: width, height: height });
      editor.dom.setAttrib(clonedElm, 'data-mce-selected', null);

      var ghostElm = editor.dom.create('div', {
        'class': 'mce-drag-container',
        'data-mce-bogus': 'all',
        unselectable: 'on',
        contenteditable: 'false'
      });

      editor.dom.setStyles(ghostElm, {
        position: 'absolute',
        opacity: 0.5,
        overflow: 'hidden',
        border: 0,
        padding: 0,
        margin: 0,
        width: width,
        height: height
      });

      editor.dom.setStyles(clonedElm, {
        margin: 0,
        boxSizing: 'border-box'
      });

      ghostElm.appendChild(clonedElm);

      return ghostElm;
    };

    var appendGhostToBody = function (ghostElm, bodyElm) {
      if (ghostElm.parentNode !== bodyElm) {
        bodyElm.appendChild(ghostElm);
      }
    };

    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {
      var overflowX = 0, overflowY = 0;

      ghostElm.style.left = position.pageX + 'px';
      ghostElm.style.top = position.pageY + 'px';

      if (position.pageX + width > maxX) {
        overflowX = (position.pageX + width) - maxX;
      }

      if (position.pageY + height > maxY) {
        overflowY = (position.pageY + height) - maxY;
      }

      ghostElm.style.width = (width - overflowX) + 'px';
      ghostElm.style.height = (height - overflowY) + 'px';
    };

    var removeElement = function (elm) {
      if (elm && elm.parentNode) {
        elm.parentNode.removeChild(elm);
      }
    };

    var isLeftMouseButtonPressed = function (e) {
      return e.button === 0;
    };

    var hasDraggableElement = function (state) {
      return state.element;
    };

    var app AAG.Ä‰+`P%Ô¢E)¸T	ŒÆ¨PÂaM àŞUŠVtÕ
‹$rÕCx€fW Ô%Nx0Gs HÒ )x@Š+0‚Í@Z*Ó€5©oğ–-LÛYB„Î™Ml¡ !àĞ}—Àu&HKÂ˜n@ãMé…Œ¹ş÷ßc™ÀÕ_«÷·:¯ÒÑ·Â×Ğ,Úwø¯şÇ3¾gÿË¿:ó¼ı_Ú[ßŸíğßöûhş…Öûò×ö©µÃÆówñ™û÷š]şFQõ_ß¹îe­§ÿıõ–Úÿş»»?yoÆ€‘IÏ·IÕüOÏíîş¶½jııW?únû|ÿ~ÙËsÒŞíOáT½f¿à¿^İïVï=º¿šôÎ[åÒï¯wË»ıwıÓ™ëÃï?ÿnÿuŒsşœû.úùõı°Ş/ûç¥M÷ÈØøoæ™ıöÏÛÚ­×'Òÿ¦·ë]{öqş†ï»×Ì5cıŞ›íõĞí-íşşÍk:W{u‘_né}ßêv»şam˜)[.°@<N¤°I*!-SC‰£ (!*ğ 	Ğ\Ç(ÍÑ8LÁœÚ ±ØÄ"GÍ@ô» ÀW1L)-k!eÏJB—x S @m€‘¯¤€%i`˜õJ@!R@ÇÀ1$êHZ Vóşbîñç¾¾×ñåîíÙyôü>MÛ_z×µ\aß|Ûd'ñ=Ÿ·\Í2h‰ÚÿCşí/ö6Ìş3Ÿ/zş×<ÿsÛÓĞ÷‡ŸêK„ıöíãV)6›ß|áÕÿıw>%çßË_v÷ÊÔïitì'¿ô“ïE5ïº]Å£y½ÚüŸú1ßsúO(Ğ, "Mè!_“X‚Ö€ „ÃĞ€ VÄÃx.ÇD{R½4’B1VİaË:hàCäŠH›†pB2	äª23…U„i*| m6°Bªˆ:b B ÆÃ 	å`D-•Ègdœc è$pì T)¨@Ó\ğº“T	

0—Ğdhğd§+PR˜|Là”CEW‰•M|åÀ9|§HPV56$’Æ¦R< hµD#
¬’‹B„¸7ƒ$	JtÒÊÑ‚¦‡FÂF´‹¡ğ€«qÀ¢	ÚÓ “Ï½¿7÷¿†jÔ¿ıï“õÏıı[{üÕÿ¾#·Z6¿ñ»ä½ÿi5ÿ¾İ<;öø«_¼~z}ïo¿ÏıßïıüíôQß‘Æ½.Ïü½iñÏ7ÏyŞ·¯­¶—‡Çvy¯ó5Ï×Ÿÿ[¼~­½*şÖÜïÜy­şŞ[û¶şö/÷kß¾oçnæïA CÙû…h„j²—±€ÍGr /JG¥ƒj!-›×LÈ%€wŞ‚XOGBì*°U ¤ŞÛA@€1”§ĞSSjÉ¬·›bú"F0$™Ö§„˜ ZÂK‘HŒaL  ÇĞaÑœÀÖ$N¡"+÷.~ış/Ô~_j×~ïzş\V5İºF—o—âwÚ¯Ş÷,ÏÑ|?ó4¢½w½îûıöİº£÷ïÿ²ÿÄ<¿ß=«õvÖ¯›¿áú^]OÕuôúÿLßîé‡Ş£ü¾Ù{úİo»ç›Íó—¿Vşïl;¿Ş»ŸÙşŸÿî?ŞôÏ½ï5k{Ï÷òÙÖ­Ø¼éõ#ŸıüöíÏ½}õ;¹~ßõïWîÏíowŸ—Şß¿Tj»çûíÛù:·ÿtîşòOŸøí}nÜëÅºÙ~Çøİ2øúÚİït¯k_²ÿÏSo~ëÿß÷¹¼Ÿw=%½7SÿîÛı«/á~7ùÖìqÙ“ª{—çŞó-kšOîg€Ö˜1–h FØ¢Ô@+°'PŠ-†4GÊŒÃ×p¦ ‰â!
Ä	œ£]gq¿@+š™"ZŠ‚Wñ8Eˆa%f&pá•€v{y®já	X@	¡$c‚¨A¨,. @†ll A ¡=”ÎÀa‚“=øÕë½Öÿ;ı]ÿçáÉîşı?ÿoë?í…şıWhoæWW¸üÎó7¿kf?îß•w¿òkï¿=ÿÇ§şbÇ½ú{ûù:Ùè÷;_ïgÿcİ£~õx·äú¿šı~ğ„óŞv_uÖ;§ùğ´»uşJí}\¿'÷A]i¾:ÌŸîO}×·ë-:bÀ¢$@ BP,ŠLîó€ª (P÷( à¦Nd4
R	}x|º¡a. %h¢FJI€R!İÄÃT@€Áà…ÒPd«kXJ0 á2O
w7wØYáB*¸¼(4ÒH¢2ØèEI0Q–	Z"$0³A.… Ş&E ƒ(bæ
µ–¹E¥€HêµT&¢U:,8w ,z4``¦P‹Åo¨!pŒ¡xµÅ-o@	À #¤É80%Ã…8Á ÕBf
˜‰¡Y",0f2º2Ì"ñHÏâ8¼wÙy3Şß—¿¡î}÷´ólÿÓ?É½äm?µë¯Ù²üí»Äp}üWq•òßÁşİó÷ÛåÏï¿Ş_úí®Şÿú÷Œúşu«ÿWıı(ß—=æ¾±û®\õÿßÑIèÏ—q×¼8{û¿ë¹'ŞÏÿîÕ‹é+ÿSûû{ù/ÿ}_Ÿõky0´"!7?@Bá¡” $Q
@GÄ
@Z$@³‰ =˜‹BZE¡v÷•5&¹)!#[’<P8à‚ #
Hjá¦–<bãº   ÄEªÎ‚‰€XIfõ$h@ÇıD‡CTøÂcŠ}|TğE˜Í:s‡ 53ËªNÏoùûdWéÒÃ~÷ô²ô	÷÷v÷¶Ûo—½û~|ıëlŸˆ³÷»ûüë½®í;sßªî}lŞÿ?éÏ_çï]{×ÿ¯õZû~ßã½5ùşp;·®û”½ş¯¶Û^vİû¯kğüëùÏòŸ¾ºïğÏn{ïÒû¼¿ûßöùŸ·÷}¢|˜ÿíìÍ½¼ôÃoã|Ëôÿö÷Ùi÷L$_U|t5ªÇÿ-û<§—Ğß/™ÿxŸİW¿ö‹÷ÿïìÆ®ïå‹ç‹æ¦ëÏ¾ÙpÆìY›}_nÓõ«?or¿åîwì­¯ØµÜõÿØÕÕÖŞÛUŸOßFHšìíıEÿÿÎ½ÍÖ×öòN#€t@	¢ªƒV„C¨ƒ†İ5	Û&¶ ¬€eF‚!x©1€TJeÔµn	$$%"”€”EXH E è5
}-D(d€HFáéA‘ìÉ(TDI8@#	YL+»€J (j£Ãö–ßôïæÛõ_Ú›Âé¾P3w<ÿşåzÇ¹­·ÿG÷Ş¶Œ+ºûİÿÇ¯sYûíîûşİ½ç§ƒq—ìîşßs|İ¾¾ÿÉã/¯ş÷âûÿ¾xÿÜÿË]ÿ›µ{îÎq¼¿WSÛŸÏë_û	êÕŸNıy>ß:µ}d‡~Ü“úóm«g¾@$€¯EGˆÈ"H±,Õûd‚ TG¢5„hdÊÀWà'AïvV_
X P€R@4‰UHÕPÀÂê3H@T1Ğ…’«  ‚a‚”H,¡RØ)„%ˆ
ø³q pĞØ
€‘ †Š!@ ÊH;jäÊAòq‡ÕÉ&0 W Åè£ÈÒ ø4›™>V;Hù`Ì€Â2Á4h–DzbÂ#b5ÕY6 A ¹Ào"JsÌ	Iƒäí¥Ãd"R×$<@ ë­±ôNæp ’9	â+p0HQE°š2n¯œşÏ5¿Áşºú¬§6?Õ_åy~N]·ï¾B^û§­îúox¼¿û³U»ößgùÿ~<… ¼£ÿ÷Ëÿ•ü[=õ~÷köÿ-çø¼»—K?ÿñØ:ï¿ÿïéùwã}®üçQı3Ïvşıüßşø”–ÿ¼'¦ı;üçüm·öÓ×¡N$!aiĞ@œ*V‘Š& C Î\
1 ‚ãï+&FĞf5…ƒ(5ÑÏ6©é†m€ %`1²(”€İMY½‚M’€$Ï  ¼ ”4F ¢„š(×¯ 4¢Æ ½A$À @ÈˆL£00à¥ÈáG¨Oh0]ï_Kşwİ{Nõ¹4şÿóÄëGß]Oçß9A—ÛSõ¿>ç¯|{}íçÁpìÕoßşSßô²u<úë¯Ïlï÷o{ÿıo’kâş}«ùõÿW-åg¨}·ÒÏôÿî|^wâqÊ¬[vŞÓçzåï¿Ë¥_ú>†cÃæ7Ò1Ÿ|şÏpíµÿÕ·Ò¿6§æ­'~»6ÿ¸Ÿşjÿïİ÷5w¿3»>ïşõõ’Çç‡¹óÎ?|u_~|/÷¿º¹=›İŠ¿Ú|•ËÑ~œÿ·|õêxıÒ¸Şy•İä÷º«ßy¯ï¿¿—{Ÿõ±ñ»ÿØwxû•£ró®ûšëû}éhŠûû?ãÇuE’” T0.280à)—”€ Ù0D`$g &
˜ô\…<^a‰À
‹p¤dMƒÂp“ ÑÈÈÀVõ@` &äh‚pÈ. h„eÀĞr!"&Å Åä#Md¢E·€$Â8_DPÁpæÊaE’AFğ¦ú÷ogf÷ÿ?ÕH÷æ/ëş÷Ç¬-øşãû³ëí5Ûf¾Ë{ú}ß}GAYûëK¼­õşk×ä_Gÿá½}{1=(ı­YÉ»?ÙñUö³õ_Ë[ùùú7ß·—Ÿ:şøs=ï/R¯Óİï˜´ù¸·÷{ÿ?¿®n{%¿õ±a•ç­êÔŸÿş@œä'€B@ Ed
’d@”ñ0Ø€Ø0Ellh›ÅE €áØ8æ…‚§1Ò0•w	€^²Â¥ @¸sqŒR¢@²ÔI?„dÑ~	E2PZZMªæB`d! 	À1j	a#¢01!%	&¹ƒ@E‚ï‹¬ôÁ@ƒàÖ4Aš *!ˆ{v¿ø„&¦¸‰Ã s
¡jğ9 på›”°DF@½wÂ
›>
¾
33ì ” ØP›Bä¨JÀİ’°@!©"¨°”Àr,ÊKª ôÇÁ… ç§œ£æ¯§/	¿ç·ôq-_y¾ç7ÖŸ¹şèÓnïŸî—Ç¿×»î~;{WßkZßöİ^´jûşÇÏü±Úf|ïÏö2ÚŸõ_Ë÷ãóÿß¯r½şEöõÉŸhl‘·ûÓg-ÖûW=·óçŸÂŞ­‹~§ÒÙ«Å_«ñ¿›¿¼õÑßÑÌ¾\Î`C)do…†²_êÈSÅJ¸„0 ’ní`BH!ê‚,‡`+Q6$ °F´C] Â&2M-l ˆ£©Cæáœo<•x°± ™¥ˆ ¢	rª€ L#  à‹À”`D l‡ÅÎĞÄ±E“À„¦¤–ßó~sy»ËxZôxÓ?ßã·›òõ÷Ûğışòræé×ïùkuhüïÖÎ¦íMêı6‘Ú§ØãÑ®”Şë=ÿ5Òw›÷½½‹ßÿ¿9oÕ#Ë»iLş*Õ¿óÏ»<<ñw_áôô¾G¶>÷óÎÏÛk^ûx}Ê¹ÿüúHêõŞ5Ú{Çâ|~¾Ïù/MûøX¦¹nSşİÓìæ'×Üºıºÿ;*Îşº}»Z„ãŸı¬şoşÈß‡qßâÄßÛëW~oüÕßÊ¼ï?ù”~çxùµç˜µ1ş^çvÛ&ıAŞö—ãªÖo¸¿–æ7ø"®‘_¼àÖ©uœ—;u}?~ßÛí÷WÆ„°"ÃĞ´jÕ0	I&³hâˆ"ˆÓeS!ˆ^$Œ« 0bKÀÂltpfW€ğÑÉáa$P„ÑG2QFf‡° íKLÄ-á)°”	%.
/ Nˆ=ğ	)	.ğ€ÄÀ…Vpq³ƒ²UªÃÓŞ
-ÿüğ[èû¿´şÏ›hİ¿[gÿ>öovfÿıK“´î—Ïwéü·Ö½{>şŸ­®>öÉånèşßß­¬§ë–¿ºopŞDüÜ_qõïÊùõí)ÿûÏÜ›û£îŞ¦ÿíÂ¿{¼œ—ı·÷Mİc;ùÔÆïûmÆÿö;Ş3ƒºã^CQ‰ÇO(Œ 0 
AYXd'æt/Pèt0‡!€‰€EÂ  -ÈıÀ Œ  )( ¯™‚	¸kK° Ä  @”\åœ00D9„
ÀäH	 …ˆb@„ Á tÍ…	Ù´õŒÀĞ±İ @‹Ñ2Dˆ#C€S Ğ`ê „D€ &B(rG€!%gK‚ñL"&$€5`0ĞÄî ˆ­` r¯Ho ­B€ o±€†Šè  †ƒ„€@`!
fÎ6û5†0h¢W ?òÜ1€T°†""-É‚ˆwp%D)tTÔóúÿ¦Í,ÿš÷xŸõ¿\?×oG]¦ÓsÇÕwç¾îù½<iëóîuåşï?ºÁ¯Ñ}ó]4~?~qİ×Íëş®‡ıšß9‹ü¬<úûïİ­Ûæ¯şî¡¾ûO¹–ÕÏ[oÿös•‹¸2ßÜû÷ıš6_şûO{«öİışû´ï¯tuï6ß\AX!”	] x @B	PD„Š3`‚J‚@€ó ˜Ã
e4 0„b\ O&$! "é 
!Ñt¡¢!m ¸60	!È°’ƒ2" Dy,°‘„È¤ÒÄxÔà „ÀÄ… ’’Ä"‹V]øÏ¯.ÏO]{l€ë7àéìğEõŞşüÙßØãåãÍŸş-L¯¾?º‘ÿ{Æô¾~î÷/ûYüğ»ÎÿL¹ş4}ë;Ù³şÆ©Ş¿aØoóŠÿ~}óœßŸ9]Õ].¿{½›¾×¿÷¯é`Ö¦OØß“Õèw¾ãâîwÛ¿½ÿ·JöÆôæÿgwŞ{º¸÷Ñ·!›ÿş4ş}÷:ÿ§ÛoÛZz²ÿü·p}ú¶Jwcßİc÷µ7?âŸïş&>øıS9Öî§ã¾œ¿u‹ÿûI~_¨şÏ|×ÎíwÇ/>c1½¥»ı°'}»·ş»şıì¬5èºŸëÿû­İ_>û4ÏŞİ¿ÿßÿA‘‹ u[xP=bT"ÈN9Ü 1ÅaäÚ,1àÓ3$=@´¤È„K!ì”h¡ïZ¤4È¥=•
.`#` ñ	]¯‹´a  , <ğÁEyĞ,¦&ä@ÄE b$ Ğ"©´ˆ½°ˆ kù§`õœZ¾ßÿ¾¾ßßïØİv×í3ïñ®ÎzfÖ}ÕFûvnÿ<ôû›Í|®šÍäşw=3ü‘SuıBß¤‹=ÿvÿ·r½ëw
swŒÏ™ÄÛîÎV¯=A¿ózdÒ¿üöVó²;Oõß-ysw™=ù‹M{~–ëÕ¦†?ÿv:=÷WïèÀ:|`	"
EP*d‹…‰€ Ñ…ÁœB 6Â @éüI@ ,àÎOHÓ‚2€i@L°uæ ! X%	ñĞ	Æ ¤3‰	d˜t˜«„Ö"ˆD6Í¤…h&“ÑaD ¢EEÃÂÃ	p÷’²B bÌ04È*Hˆ>n $¬-p&Špƒç@ g‹ ² * &†!A ®	sÊc CL#&ÉgbÀ vP,#4@S€¬À#±C ÄQÔB’‘0À@ÑN„€ğ%Ğ”7%x~Wv¿[×Ü^gïùóı[óz?z?İïøgÏñ¿1û;mUİêÿŞç1×Ù×ıÿµ¶ö¿·öë|ÂÕŸ·úÇû¼!?_ïÏ·ëßê¿tßõßmÿÍ”ÿë~S_Ÿ÷m¼ıÔôíõ™¯Î¾ß;xq¯©\'õxk}_òïòÚyE²Êü-1œûãŠpÇŠŠ`†   Œ’ï$"xT‚AIWbÈ	00
q<)åËV R³{îp ú<.: BUJl  IŒ¦ğI@ ¸EÀ%ˆğÌ€:,3(b>œ BË#¹“€(˜4Ñ	  	ÂÜ{¿kwŞ]ß3§x»ïªùşö÷WßÿsˆÎû~ı¥OEñé~]¯õøÔ(Ş×[«Òüü\¿ê_“ÿ¿çı?>só~Ÿ-7[ûÛÕ÷ãf`ì»íÿ·ÊßÍÕÿìuõwNv9Óó}‡øóWÍ¶o?=‹}‘js³Ûê¿ÿ°¾÷3ÌºÇ›R¯y·½,Ï3û?÷ıÿõËÚı×ÿ½Lı;W~ù‰”nYõïÀ/oíşÏÛøOtÿ×Ïç:z8àÌœwíş™ïİ{¿Ç–õyß·¿Üëµ÷õÛòL}>oø['ş¶^Ş}ÿÿ«ÿşûÏë½åq÷¯¯½ûõİÓ˜÷œ_³ÿ¯0Gh!:"`„Ä4A¤–€Pƒ¢$Lp(* 6õZÈ š¤C"Ràs ö &š„dÁ d–)‰ò ƒğ0¾GäÀ‘dUH"Äy´€BbBTä$@8)€B*ZbÅ C†  J\`wë{íw¿|»ŸÑ/—ûzï°ûOÜüoßM÷ùMó—ìl»şgá³¸yVó{Îı½7œÎò\]oæÿÛ:ÖßTNoï]ÿé»û?gÅùßºß½°N6?ê|ófò{ÿı;ÿÍ[
oí÷üŸ« ~Ó}Ûÿü…ïâ“¾ş‡ëöº÷5ï=šÒ÷x{ÇWA!p™°¤ X Ğ3€ ˆĞ
CeÄ‚*ˆÁ¦hrd·ÆUcˆÀ;Âiƒ(ÄmÉLIx)ü–A&MğØ/Š°'Æ"&Ä&0#B1P3Px¦Å€¨0Ç Ğ ÓI( `( $
¢"¡œT Dg0e(ÆUÍ&	ˆJ¤Û%‰2ÉˆÉŒhKu€€"ƒ¹P\Î0¼A†Ë‰,ufÀA j"Ô†X- Š˜„¬PT¤ `£¶€4?TŠ³ § ¡•—¥˜&!ö_±çß}íğ›Ó[÷äú«è‹›Z}f^é®Ç}Ï¿¹æ²Osv”¤ß¿§¯/úíïÿÈöß{¬½³„p~Íñ¤î·×¾»¿ıFyşÅá½h·–ş¯ßo{~éŒî[ÿ}G¢ß¯}sûï[rıoùôîÏŞØë_÷?ùÎÿv«ß¿û½Ó¿œ`$D*-0§`(× Ñ´D	¤"$ÌxØ ÄŒ­Z."³Ü@‹ àP Â¤±5:Š©J ÌL’ŒAÄ	k@†Ø!‘ ¼•cßtR`„$Q@7B2€Ÿ@V Ê XÚà&c6ÙhDÄ~€»Âp$úôıÓ¿]öè÷ÿùÿı\èykÅÎß&ÿç×uÑ›ùz÷ë©5ô¾ıÙï³±îŸÿ°=ÿıcıÅù}şßûw¤ßöİ×ÿj´ûÿŠ÷<S{ß_½õ“ó2İÛöûaßë¿~ÿwO«p»Ÿåçlúû2ûy^âíİ3~ÿ«şÿl=û¦şŸ¹Î›¾ÿı_ºı±‡ıú¸ÿÛÜş¿kúÕ}í>¡û÷ìÛ¿0Oú÷ıúäÿÿxçÇşãó¿ù5œÔæSêı­ñÇ½®eKßî¹ıÿÍ¾wÛI.¿ÿı×öÇìıı¿.÷6ms>ÿ«wÛïsYü_‡ã]‹ùÿ:Éußu¬ÿß×¿yS¯÷Ë7´ NP«¢‚ ¨	ğA„0$j + Š!dp'ùƒÀ
À?`«F„)\6Ñ_‹Æ*ÀÀê‘;2€A¨È`(‰ä•Ï2°¹’‹ÛZ‘
0Mè½ƒİY¢aR,Å‘Oa "ˆ£‚aKp! aœïSÿwê¿¼ÿıÕ[ûÚÔıV¸í´ÿìEÙ§u¨˜;ësu¹?ïÏ¿ŸÿÃuW÷;È¿?³ü¯Îvw¯ãƒİ/Úõş”½ò¿­øt~ùïŞ~ûıößîÈ/ü©ö±jRuîÚÕş»¯æ*Î½ï>÷·û+çç_ÿ?`¼ßÁå¼ı¿¶ëyqïÆBbC €eˆ…ˆ$9"±€#=,?âh‡T¢pYbQà!`F&u˜D”Ü`DÉBKÓEàÑ» ËGM„p‘"@TB èhØ€! ’,/EB` †pì .¡C £@>,a¤ĞĞ €ŠY°ƒ*†€€*+u'ª!h“À‚C,PM"Ôˆ80Dä€0I@ê-ç…bkø$@ `"æÁP,ğ®S€@ „ k	TÆ
¨] YdB _¥'q”- ™B ¤ƒd¹AÁ Pˆ@tŸiöÙ¾ğ·Ÿşï½Ôøë/öÉ·}×Ï¾ıÆûoøß¯ïûü9çûßışş«øûüæ‹ÎQü-Ñói¹gSãø½_îß¿ŞtïÕUıëî~Ô7¿—=Í<‰ïfïş~“e¿çÛVgõŸ]7ûî¯rÿ®¤ÿÏ[nßVNÏıÓP7vly in performance critical code would be horrendous.
       *
       * JQuery has some magic here for IE popups, but we don't really need that.
       * It also uses element.ownerDocument.defaultView to handle iframes but that hasn't been required since FF 3.6.
       */
      var styles = window.getComputedStyle(dom);
      var r = styles.getPropertyValue(property);

      // jquery-ism: If r is an empty string, check that the element is not in a document. If it isn't, return the raw value.
      // Turns out we do this a lot.
      var v = (r === '' && !Body.inBody(element)) ? getUnsafeProperty(dom, property) : r;

      // undefined is the more appropriate value for JS. JQuery coerces to an empty string, but screw that!
      return v === null ? undefined : v;
    };

    var getUnsafeProperty = function (dom, property) {
      // removed: support for dom().style[property] where prop is camel case instead of normal property name
      // empty string is what the browsers (IE11 and Chrome) return when the propertyValue doesn't exists.
      return Style.isSupported(dom) ? dom.style.getPropertyValue(property) : '';
    };

    /*
     * Gets the raw value from the style attribute. Useful for retrieving "used values" from the DOM:
     * https://developer.mozilla.org/en-US/docs/Web/CSS/used_value
     *
     * Returns NONE if the property isn't set, or the value is an empty string.
     */
    var getRaw = function (element, property) {
      var dom = element.dom();
      var raw = getUnsafeProperty(dom, property);

      return Option.from(raw).filter(function (r) { return r.length > 0; });
    };

    var isValidValue = function (tag, property, value) {
      var element = Element.fromTag(tag);
      set(element, property, value);
      var style = getRaw(element, property);
      return style.isSome();
    };

    var remove = function (element, property) {
      var dom = element.dom();

      internalRemove(dom, property);

      if (Attr.has(element, 'style') && Strings.trim(Attr.get(element, 'style')) === '') {
        // No more styles left, remove the style attribute as well
        Attr.remove(element, 'style');
      }
    };

    var preserve = function (element, f) {
      var oldStyles = Attr.get(element, 'style');
      var result = f(element);
      var restore = oldStyles === undefined ? Attr.remove : Attr.set;
      restore(element, 'style', oldStyles);
      return result;
    };

    var copy = function (source, target) {
      var sourceDom = source.dom();
      var targetDom = target.dom();
      if (Style.isSupported(sourceDom) && Style.isSupported(targetDom)) {
        targetDom.style.cssText = sourceDom.style.cssText;
      }
    };

    var reflow = function (e) {
      /* NOTE:
       * do not rely on this return value.
       * It's here so the closure compiler doesn't optimise the property access away.
       */
      return e.dom().offsetWidth;
    };

    var transferOne = function (source, destination, style) {
      getRaw(source, style).each(function (value) {
        // NOTE: We don't want to clobber any existing inline styles.
        if (getRaw(destination, style).isNone()) set(destination, style, value);
      });
    };

    var transfer = function (source, destination, styles) {
      if (!Node.isElement(source) || !Node.isElement(destination)) return;
      Arr.each(styles, function (style) {
        transferOne(source, destination, style);
      });
    };

    return {
      copy: copy,
      set: set,
      preserve: preserve,
      setAll: setAll,
      setOptions: setOptions,
      remove: remove,
      get: get,
      getRaw: getRaw,
      isValidValue: isValidValue,
      reflow: reflow,
      transfer: transfer
    };
  }
);

/**
 * EditorView.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2016 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.EditorView',
  [
    'ephox.katamari.api.Fun',
    'ephox.sugar.api.node.Element',
    'ephox.sugar.api.properties.Css',
    'ephox.sugar.api.search.Traverse'
  ],
  function (Fun, Element, Css, Traverse) {
    var getProp = function (propName, elm) {
      var rawElm = elm.dom();
      return rawElm[propName];
    };

    var getComputedSizeProp = function (propName, elm) {
      return parseInt(Css.get(elm, propName), 10);
    };

    var getClientWidth = Fun.curry(getProp, 'clientWidth');
    var getClientHeight = Fun.curry(getProp, 'clientHeight');
    var getMarginTop = Fun.curry(getComputedSizeProp, 'margin-top');
    var getMarginLeft = Fun.curry(getComputedSizeProp, 'margin-left');

    var getBoundingClientRect = function (elm) {
      return elm.dom().getBoundingClientRect();
    };

    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {
      var clientWidth = getClientWidth(bodyElm);
      var clientHeight = getClientHeight(bodyElm);

      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;
    };

    var transpose = function (inline, elm, clientX, clientY) {
      var clientRect = getBoundingClientRect(elm);
      var deltaX = inline ? clientRect.left + elm.dom().clientLeft + getMarginLeft(elm) : 0;
      var deltaY = inline ? clientRect.top + elm.dom().clientTop + getMarginTop(elm) : 0;
      var x = clientX - deltaX;
      var y = clientY - deltaY;

      return { x: x, y: y };
    };

    // Checks if the specified coordinate is within the visual content area excluding the scrollbars
    var isXYInContentArea = function (editor, clientX, clientY) {
      var bodyElm = Element.fromDom(editor.getBody());
      var targetElm = editor.inline ? bodyElm : Traverse.documentElement(bodyElm);
      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);

      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);
    };

    return {
      isXYInContentArea: isXYInContentArea
    };
  }
);

/**
 * SelectionOverrides.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module contains logic overriding the selection with keyboard/mouse
 * around contentEditable=false regions.
 *
 * @example
 * // Disable the default cE=false selection
 * tinymce.activeEditor.on('ShowCaret BeforeObjectSelected', function(e) {
 *     e.preventDefault();
 * });
 *
 * @private
 * @class tinymce.SelectionOverrides
 */
define(
  'tinymce.core.SelectionOverrides',
  [
    'tinymce.core.caret.CaretContainer',
    'tinymce.core.caret.CaretPosition',
    'tinymce.core.caret.CaretUtils',
    'tinymce.core.caret.CaretWalker',
    'tinymce.core.caret.FakeCaret',
    'tinymce.core.caret.LineUtils',
    'tinymce.core.dom.NodeType',
    'tinymce.core.dom.RangePoint',
    'tinymce.core.DragDropOverrides',
    'tinymce.core.EditorView',
    'tinymce.core.Env',
    'tinymce.core.keyboard.CefUtils',
    'tinymce.core.util.Delay',
    'tinymce.core.util.VK'
  ],
  function (
    CaretContainer, CaretPosition, CaretUtils, CaretWalker, FakeCaret, LineUtils, NodeType, RangePoint, DragDropOverrides, EditorView, Env, CefUtils, Delay,
    VK
  ) {
    var isContentEditableTrue = NodeType.isContentEditableTrue,
      isContentEditableFalse = NodeType.isContentEditableFalse,
      isAfterContentEditableFalse = CaretUtils.isAfterContentEditableFalse,
      isBeforeContentEditableFalse = CaretUtils.isBeforeContentEditableFalse;

    function SelectionOverrides(editor) {
      var rootNode = editor.getBody();
      var fakeCaret = new FakeCaret(editor.getBody(), isBlock),
        realSelectionId = 'sel-' + editor.dom.uniqueId(),
        selectedContentEditableNode;

      function isFakeSelectionElement(elm) {
        return editor.dom.hasClass(elm, 'mce-offscreen-selection');
      }

      function getRealSelectionElement() {
        var container = editor.dom.get(realSelectionId);
        return container ? container.getElementsByTagName('*')[0] : container;
      }

      function isBlock(node) {
        return editor.dom.isBlock(node);
      }

      function setRange(range) {
        //console.log('setRange', range);
        if (range) {
          editor.selection.setRng(range);
        }
      }

      function getRange() {
        return editor.selection.getRng();
      }

      function scrollIntoView(node, alignToTop) {
        editor.selection.scrollIntoView(node, alignToTop);
      }

      function showCaret(direction, node, before) {
        var e;

        e = editor.fire('ShowCaret', {
          target: node,
          direction: direction,
          before: before
        });

        if (e.isDefaultPrevented()) {
          return null;
        }

        scrollIntoView(node, direction === -1);

        return fakeCaret.show(before, node);
      }

      function getNormalizedRangeEndPoint(direction, range) {
        range = CaretUtils.normalizeRange(direction, rootNode, range);

        if (direction == -1) {
          return CaretPosition.fromRangeStart(range);
        }

        return CaretPosition.fromRangeEnd(range);
      }

      function showBlockCaretContainer(blockCaretContainer) {
        if (blockCaretContainer.hasAttribute('data-mce-caret')) {
          CaretContainer.showCaretContainerBlock(blockCaretContainer);
          setRange(getRange()); // Removes control rect on IE
          scrollIntoView(blockCaretContainer[0]);
        }
      }

      function registerEvents() {
        function getContentEditableRoot(node) {
          var root = editor.getBody();

          while (node && node != root) {
            if (isContentEditableTrue(node) || isContentEditableFalse(node)) {
              return node;
            }

            node = node.parentNode;
          }

          return null;
        }

        // Some browsers (Chrome) lets you place the caret after a cE=false
        // Make sure we render the caret container in this case
        editor.on('mouseup', function (e) {
          var range = getRange();

          if (range.collapsed && EditorView.isXYInContentArea(editor, e.clientX, e.clientY)) {
            setRange(CefUtils.renderCaretAtRange(editor, range));
          }
        });

        editor.on('click', function (e) {
          var contentEditableRoot;

          contentEditableRoot = getContentEditableRoot(e.target);
          if (contentEditableRoot) {
            // Prevent clicks on links in a cE=false element
            if (isContentEditableFalse(contentEditableRoot)) {
              e.preventDefault();
              editor.focus();
            }

            // Removes fake selection if a cE=true is clicked within a cE=false like the toc title
            if (isContentEditableTrue(contentEditableRoot)) {
              if (editor.dom.isChildOf(contentEditableRoot, editor.selection.getNode())) {
                removeContentEditableSelection();
              }
            }
          }
        });

        editor.on('blur NewBlock', function () {
          removeContentEditableSelection();
          hideFakeCaret();
        });

        function handleTouchSelect(editor) {
          var moved = false;

          editor.on('touchstart', function () {
            moved = false;
          });

          editor.on('touchmove', function () {
            moved = true;
          });

          editor.on('touchend', function (e) {
            var contentEditableRoot = getContentEditableRoot(e.target);

            if (isContentEditableFalse(contentEditableRoot)) {
              if (!moved) {
                e.preventDefault();
                setContentEditableSelection(CefUtils.selectNode(editor, contentEditableRoot));
              }
            }
          });
        }

        var hasNormalCaretPosition = function (elm) {
          var caretWalker = new CaretWalker(elm);

          if (!elm.firstChild) {
            return false;
          }

          var startPos = CaretPosition.before(elm.firstChild);
          var newPos = caretWalker.next(startPos);

          return newPos && !isBeforeContentEditableFalse(newPos) && !isAfterContentEditableFalse(newPos);
        };

        var isInSameBlock = function (node1, node2) {
          var block1 = editor.dom.getParent(node1, editor.dom.isBlock);
          var block2 = editor.dom.getParent(node2, editor.dom.isBlock);
          return block1 === block2;
        };

        // Checks if the target node is in a block and if that block has a caret position better than the
        // suggested caretNode this is to prevent the caret from being sucked in towards a cE=false block if
        // they are adjacent on the vertical axis
        var hasBetterMouseTarget = function (targetNode, caretNode) {
          var targetBlock = editor.dom.getParent(targetNode, editor.dom.isBlock);
          var caretBlock = editor.dom.getParent(caretNode, editor.dom.isBlock);

          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);
        };

        handleTouchSelect(editor);

        editor.on('mousedown', function (e) {
          var contentEditableRoot;

          if (EditorView.isXYInContentArea(editor, e.clientX, e.clientY) === false) {
            return;
          }

          contentEditableRoot = getContentEditableRoot(e.target);
          if (contentEditableRoot) {
            if (isContentEditableFalse(contentEditableRoot)) {
              e.preventDefault();
              setContentEditableSelection(CefUtils.selectNode(editor, contentEditableRoot));
            } else {
              removeContentEditableSelection();

              // Check that we're not attempting a shift + click select within a contenteditable='true' element
              if (!(isContentEditableTrue(contentEditableRoot) && e.shiftKey) && !RangePoint.isXYWithinRange(e.clientX, e.clientY, editor.selection.getRng())) {
                editor.selection.placeCaretAt(e.clientX, e.clientY);
              }
            }
          } else {
            // Remove needs to be called here since the mousedown might alter the selection without calling selection.setRng
            // and therefore not fire the AfterSetSelectionRange event.
            removeContentEditableSelection();
            hideFakeCaret();

            var caretInfo = LineUtils.closestCaret(rootNode, e.clientX, e.clientY);
            if (caretInfo) {
              if (!hasBetterMouseTarget(e.target, caretInfo.node)) {
                e.preventDefault();
                editor.getBody().focus();
                setRange(showCaret(1, caretInfo.node, caretInfo.before));
              }
            }
          }
        });

        editor.on('keypress', function (e) {
          if (VK.modifierPressed(e)) {
            return;
          }

          switch (e.keyCode) {
            default:
              if (isContentEditableFalse(editor.selection.getNode())) {
                e.preventDefault();
              }
              break;
          }
        });

        editor.on('getSelectionRange', function (e) {
          var rng = e.range;

          if (selectedContentEditableNode) {
            if (!selectedContentEditableNode.parentNode) {
              selectedContentEditableNode = null;
              return;
            }

            rng = rng.cloneRange();
            rng.selectNode(selectedContentEditableNode);
            e.range = rng;
          }
        });

        editor.on('setSelectionRange', function (e) {
          var rng;

          rng = setContentEditableSelection(e.range, e.forward);
          if (rng) {
            e.range = rng;
          }
        });

        editor.on('AfterSetSelectionRange', function (e) {
          var rng = e.range;

          if (!isRangeInCaretContainer(rng)) {
            hideFakeCaret();
          }

          if (!isFakeSelectionElement(rng.startContainer.parentNode)) {
            removeContentEditableSelection();
          }
        });

        editor.on('focus', function () {
          // Make sure we have a proper fake caret on focus
          Delay.setEditorTimeout(editor, function () {
            editor.selection.setRng(CefUtils.renderRangeCaret(editor, editor.selection.getRng()));
          }, 0);
        });

        editor.on('copy', function (e) {
          var clipboardData = e.clipboardData;

          // Make sure we get proper html/text for the fake cE=false selection
          // Doesn't work at all on Edge since it doesn't have proper clipboardData support
          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {
            var realSelectionElement = getRealSelectionElement();
            if (realSelectionElement) {
              e.preventDefault();
              clipboardData.clearData();
              clipboardData.setData('text/html', realSelectionElement.outerHTML);
              clipboardData.setData('text/plain', realSelectionElement.outerText);
            }
          }
        });

        DragDropOverrides.init(editor);
      }

      function addCss() {
        var styles = editor.contentStyles, rootClass = '.mce-content-body';

        styles.push(fakeCaret.getCss());
        styles.push(
          rootClass + ' .mce-offscreen-selection {' +
          'position: absolute;' +
          'left: -9999999999px;' +
          'max-width: 1000000px;' +
          '}' +
          rootClass + ' *[contentEditable=false] {' +
          'cursor: default;' +
          '}' +
          rootClass + ' *[contentEditable=true] {' +
          'cursor: text;' +
          '}'
        );
      }

      function isWithinCaretContainer(node) {
        return (
          CaretContainer.isCaretContainer(node) ||
          CaretContainer.startsWithCaretContainer(node) ||
          CaretContainer.endsWithCaretContainer(node)
        );
      }

      function isRangeInCaretContainer(rng) {
        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);
      }

      function setContentEditableSelection(range, forward) {
        var node, $ = editor.$, dom = editor.dom, $realSelectionContainer, sel,
          startContainer, startOffset, endOffset, e, caretPosition, targetClone, origTargetClone;

        if (!range) {
          return null;
        }

        if (range.collapsed) {
          if (!isRangeInCaretContainer(range)) {
            if (forward === false) {
              caretPosition = getNormalizedRangeEndPoint(-1, range);

              if (isContentEditableFalse(caretPosition.getNode(true))) {
                return showCaret(-1, caretPosition.getNode(true), false);
              }

              if (isContentEditableFalse(caretPosition.getNode())) {
                return showCaret(-1, caretPosition.getNode(), !caretPosition.isAtEnd());
              }
            } else {
              caretPosition = getNormalizedRangeEndPoint(1, range);

              if (isContentEditableFalse(caretPosition.getNode())) {
                return showCaret(1, caretPosition.getNode(), !caretPosition.isAtEnd());
              }

              if (isContentEditableFalse(caretPosition.getNode(true))) {
                return showCaret(1, caretPosition.getNode(true), false);
              }
            }
          }

          return null;
        }

        startContainer = range.startContainer;
        startOffset = range.startOffset;
        endOffset = range.endOffset;

        // Normalizes <span cE=false>[</span>] to [<span cE=false></span>]
        if (startContainer.nodeType == 3 && startOffset == 0 && isContentEditableFalse(startContainer.parentNode)) {
          startContainer = startContainer.parentNode;
          startOffset = dom.nodeIndex(startContainer);
          startContainer = startContainer.parentNode;
        }

        if (startContainer.nodeType != 1) {
          return null;
        }

        if (endOffset == startOffset + 1) {
          node = startContainer.childNodes[startOffset];
        }

        if (!isContentEditableFalse(node)) {
          return null;
        }

        targetClone = origTargetClone = node.cloneNode(true);
        e = editor.fire('ObjectSelected', { target: node, targetClone: targetClone });
        if (e.isDefaultPrevented()) {
          return null;
        }

        targetClone = e.targetClone;
        $realSelectionContainer = $('#' + realSelectionId);
        if ($realSelectionContainer.length === 0) {
          $realSelectionContainer = $(
            '<div data-mce-bogus="all" class="mce-offscreen-selection"></div>'
          ).attr('id', realSelectionId);

          $realSelectionContainer.appendTo(editor.getBody());
        }

        range = editor.dom.createRng();

        // WHY is IE making things so hard! Copy on <i contentEditable="false">x</i> produces: <em>x</em>
        // This is a ridiculous hack where we place the selection from a block over the inline element
        // so that just the inline element is copied as is and not converted.
        if (targetClone === origTargetClone && Env.ie) {
          $realSelectionContainer.empty().append('<p style="font-size: 0" data-mce-bogus="all">\u00a0</p>').append(targetClone);
          range.setStartAfter($realSelectionContainer[0].firstChild.firstChild);
          range.setEndAfter(targetClone);
        } else {
          $realSelectionContainer.empty().append('\u00a0').append(targetClone).append('\u00a0');
          range.setStart($realSelectionContainer[0].firstChild, 1);
          range.setEnd($realSelectionContainer[0].lastChild, 0);
        }

        $realSelectionContainer.css({
          top: dom.getPos(node, editor.getBody()).y
        });

        $realSelectionContainer[0].focus();
        sel = editor.selection.getSel();
        sel.removeAllRanges();
        sel.addRange(range);

        editor.$('*[data-mce-selected]').removeAttr('data-mce-selected');
        node.setAttribute('data-mce-selected', 1);
        selectedContentEditableNode = node;
        hideFakeCaret();

        return range;
      }

      function removeContentEditableSelection() {
        if (selectedContentEditableNode) {
          selectedContentEditableNode.removeAttribute('data-mce-selected');
          editor.$('#' + realSelectionId).remove();
          selectedContentEditableNode = null;
        }
      }

      function destroy() {
        fakeCaret.destroy();
        selectedContentEditableNode = null;
      }

      function hideFakeCaret() {
        fakeCaret.hide();
      }

      if (Env.ceFalse) {
        registerEvents();
        addCss();
      }

      return {
        showCaret: showCaret,
        showBlockCaretContainer: showBlockCaretContainer,
        hideFakeCaret: hideFakeCaret,
        destroy: destroy
      };
    }

    return SelectionOverrides;
  }
);

/**
 * NodePath.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Handles paths of nodes within an element.
 *
 * @private
 * @class tinymce.dom.NodePath
 */
define(
  'tinymce.core.dom.NodePath',
  [
    "tinymce.core.dom.DOMUtils"
  ],
  function (DOMUtils) {
    function create(rootNode, targetNode, normalized) {
      var path = [];

      for (; targetNode && targetNode != rootNode; targetNode = targetNode.parentNode) {
        path.push(DOMUtils.nodeIndex(targetNode, normalized));
      }

      return path;
    }

    function resolve(rootNode, path) {
      var i, node, children;

      for (node = rootNode, i = path.length - 1; i >= 0; i--) {
        children = node.childNodes;

        if (path[i] > children.length - 1) {
          return null;
        }

        node = children[path[i]];
      }

      return node;
    }

    return {
      create: create,
      resolve: resolve
    };
  }
);
/**
 * Quirks.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */

/**
 * This file includes fixes for various browser quirks it's made to make it easy to add/remove browser specific fixes.
 *
 * @private
 * @class tinymce.util.Quirks
 */
define(
  'tinymce.core.util.Quirks',
  [
    "tinymce.core.util.VK",
    "tinymce.core.dom.RangeUtils",
    "tinymce.core.dom.TreeWalker",
    "tinymce.core.dom.NodePath",
rp}$CŠ¤‚œEH< ĞÄ €Ö#‘Äˆ°¥èà3•B&„wzH‰
%‚§1¨€†”!"	Ù0)Ò)«•#A/VG;ºµs&T0Í¢JJp(Dd¤ª`c¢
w²%C!` nÃ¥)cÈ †ÆÁˆIZ™Š™ô‡ÁlVœºşLz^´_ãşî‡óc7Zm¬îEûı›ıós…ëgëí·üŞÎ÷êM“—öß†F÷]æïïG‰úÚs¬­Íıü{â¯|»Öÿşş­ìoùÕô0ß½ÜÙÿÕnzN´:sy˜şÜ®_¯·?ëÛËûTO’Óè­oïï“¯>oU¾·ş=iì7ëşæ?ÿ{¿O®çÿß½¦¶zÒ¹ë»Ö?4Wø÷>kÕıí™[®ˆå÷şôwùÕZÙK>Fö}w«òÁå{Êûü/÷©fÉ³÷­øvoÿuÿûó'ù¢ş®ùç÷¶ú¾ÇÍêwñ-“Ÿç»ûáÁŒó^]¹¯gm|7_o4Š±œ 
ds8P…ä˜ED „òEjX”É3"„R ( Àøâp)À$	1*H×   ÄP|*  B	b Ç–_ Ü(·I!¤ 3A#°  §Ô02€¤¢AŠ†È¹*¢Ã$Ë®F 9P ›Hµ§	çô)Ÿwâ~«Úô¿™,w×´~ô»÷Íyîòç_~·~Î'ÃYÍİ åÁ÷Ûe§ëz’î-•ã¤ßz>òtÄJ¡Â{i'ê;ôˆŸı÷gSû]_7ø{T·ùïìoXPÏœŸ¸÷4ãİU¸U”‘Ã’½/³Çs?7Æÿÿş-ú‹+“û§¾ßhÀA
CÂ@D€D ®|KÂƒULgğ!¦•â²\!†EÃ¬€a °iD5a  p XP¨éT18@x!f^‡$%€*Œ Æ#°c#ä`íg€ jtD @°˜à>4ƒ
M4
€%2Fid!B†0€`Â–4#DBÚ«T;™"á¢ˆd5	hµ€ ô
\!j@)¤4&B£Âõ°
ø Â`ˆ4@N  €H!B@¡;M ÆüKÏ ŒB@ úKhH`ÈiwiˆB
0XêP2Ö œ…€ #Á€é‚ ™²ì 
¨ Í}ïkÿãû=ûç¦°—=]RúÓ§ÎaÖÿ-‡£í÷ûù×÷øÒõ_¦Û¾gP‘ÕÑ½¥uÚß®ÔÓ«ıı¹îxÇ6}î7ÿo{òîŞ[ÓVè)Ì_1»°„àwg®{¿úWİéİº]sÿ¸ya^D®”ïû~¿Ví>}>ı÷Ñ´ó2 Ä@*„ ’(7° „¦D‡šD´®4A0rÑ‚ÈëE!„‰˜€C `¡
 †ĞrA’ ‘ğ" ,n +’&¼i  "T>±HÀ$ ) PXÃàà·Š@À \a”8°áBeœ
PvAp	%ÏñÌİyÅŒñÊj|ïÛ¥úÓµGWÎÿîcgûgÃñßk³5uäòUê÷µcNınk—ì¾Ã·¦¼>Ó÷ßüËwóK¬åÿ½qxo}ïe9ßrÿåyÍíş±ôõŸw~ß¹^ùıcİ/êwv¨ÔÖJıq±îÜ¹îGåNö%ûv¾¯¿ßùÏX¼êÖeŞúæØ—ƒ]vŸôï‡ß÷ş¿ŞîñpşO˜»¹ï–º¯Óå~ùëFòÅç±õ!ûã7_X ¸tÚë¢õšégÃíòÄô·ıë[ûÜÒ}¼pGÛàôí§¶Ìı¿L'U­+““ÿéOÿëŠGoG3W­ºç½ïÿ·ş¤FõE‘À| ŒD`+„úDÍ”p„	0Æ@É„L ÁB¢2,Aƒ 
Ò¦‚* +"nè4$!>bWBEB”Àf¶0Lb8'HÙ‚¤i×Å DUD ª6‚	ƒãpHĞ  Š£œ@ Ö] İYïjîßgó*zSÚüõdÿ÷ô{7·õÖ+»¾ıíæoÖ¹¶ùë×õ¿8ºÿïV§Mºş8eÇıÖ½%9³ÑÑÓŒûêWß&ö.óÚÏijoÿ™ú£ëÿ×ØÿñşWUq£GÜÕ'¹Õó½ıü/»¡?Å*5ô”¯¯÷“´¸uñî«§ÛÒ
 B`   ‹BEÈG¡¤RĞ9 g‡Œ@ ñ-X!0eÆxIU5RXEdpDp (êA`º	ä;õ Rp˜„É@@ÑJ4·l êr(€€Ş(ˆ/L‡Aà@äH0B¨ÃZÄ”‡kO‚Ã&”
‹BX pØ#Ä*( bpE¢Ì‹jw‹A)D©(d‹:¤Ä•²á":$ŒX°ÑIEÑ Q˜›@·‹‰à1ÂL•2ÄP	 9€€8	¤ÄJä]¢^  ,@…³`Åh  (?}ÿ|goÏÑ—ıG2¿Ì/~ùús¢[M½=Ùûöğ_²nß]ÿıÖ»Ï§ş´ôïŸú÷Ã_q½L¦?Ş¿ßıÿĞ`/ï[ÿó_¦ëï_sñóºN(İZŸ@Â_Ó“ùÜöPşÓäkæk7Si¯5GşŞÛ~×ùGönÖÏìû5ÿÏí°:·, A'à€á 
P‘¥•(PVÕ@©% lP10‚oÄ‡	ÊŒô@"! ü”’ "# 'Rå‚Ÿˆ; -\Ä•ä&Hğš Œ"‚…,‡†‚PPhù]…`CŒĞ	¡Is÷?NtwJ÷^ú{?zÿëò6³{}Â7Æóf™½Ú+ŞùßÆ÷½å_;Øß5ìSÏU*fÛ÷ÅÿÿØô~”ûôš½->1hö1ù¿S¦ùz{úWWlÛ+ü;ôù–ß‡sÿşş¿;Pıÿ¤{»bıOú2ş¯=úSÏà¨şü8³Ësú—£öû·ÚÿÏßş…«Ì{:ê÷óÕ‡æ¿Íefn·á\Üàgİä¯ßD«zÿ¸‘)Ğö}ºûøïêŸıŸßŞÍ?ÏIŸD«Ì°)lÀê}îÿç•ÖÛıwäGkå©w÷ñÑßåÿµ„ ^zºœí¤ÎvN»=¤ï¿¹úÆ>Ö}Ÿùıºï@P‚%B„@#  l-ˆ›Q ÕU‡ B!‡Y °İPª @p—Q@dQDĞ^uB`BNË®AYØà-=‰|ÖÂT˜Õçš `8‰J {  @Îš9°U(0H@f)@³Ñ`2Ù~y5c¨ÍÜÿ«ıóy»~Ÿy«ÇW$ÎÏ¿£|óŸ³eüÿû¿wùSåN±âéI¿¦/S½÷ÏïPóïÏİ¯+GÛçÿíÓ4Õ`>™±—ïµÿ³öÛS÷ßâ|ö¹2½^¿§û·©ëğGµ0ã]ïí·ùû²^íß•ßÒ¿cˆÆmDU?·ÖÛûû†æZ6ğ‚ÄÃÀTŠ ˜qÉj¹ƒÁĞ ˆ‚i–aLB‚‚ !àÂÂcH1ˆQÅ 0@"‚C&`ë@ J¬6ˆ„£ª!İ4$,ŠÙ d(
L‘u?GPeÄ*º“  ´ĞšFˆŠQ‰àºŒ^a«€ª2p4åÄ @-VÄ f3ê (òNPÏ#eˆÁ„ñRQ€`)œ(È(Ù°–]µ†ÂGK%	$F
Ö†#™2t–x&³a FJJC ŠCX…B‘”Ø@ B±B@aÔ ¡ı³òù_ïşÒ»¿oP=™ªç79¿Ş¢vGUêÓ	Ïİ¿£ôÛşäÈ}:øO6õë¾ûóSæ×ùûêèşs×úÚîŠ½¿ËÎ¿%ÿÒõ,òõ¤ÙßÏõ¾[Önÿ=a†®Ë»Œí/ÉÍµâg.V~Jgßñ{ımöyıÿõWëÿÿ]üÇX€h±$Ò€i„ôı" #H„ã€€K4`$‚ÀÄP IˆÛBX‚Ö"IA@ZM$Ue±ËZŠ%.‘d}‚b	ñ
CÅ&4,*HA•@èH B!u% BI	Ğ‚ ©
qˆ)±õŒÊÃ¨„ š{çl9
Úkó>‚QÓùGó'á7¶ÿáÿXçóµ¹Ïº—áôoO¦óñ½Õãõ6¹şõ}nĞfïìc¡é¹Sûÿw¹õäáÕÌ—Ü>ï¿·¹»©>[ÚM«öì~¥]rïsß›¡Î÷©üşÏœ»PÔnïıËûÓŞşŞã§ïšKİãÿ»ª¯Îëw—¾Y~Ëç?Ş{Ãşw«®¶ç?Êçïûİïû+YË¾ş0~}ŸŸş÷Ùß¯:×İ„ãŸ]ì8w«·{?wqa^u3ß$|û~6ã¿§»¼çÏÌİıKØïä#7ì}Jî†®İçû}·Ú1rkçÿ+Â·æìÖ}ßCÅÈFÃpqÊ\šHOB	ŠJ  fU@ÜJºFKDc²S,ÙËaf.AàD•ÄD’‚$Dà œPnpc"$T†	ü‚Q„ *!˜I9pAÀ4e0 l4ˆ ’¨	é,&‚F0\”d œL :É²|ÚLSø´ïÕ¿;{n÷ïíù®»ÈÍ…?÷‡ıxqWë¯¿_9Í¶ú_rï{‰¾¾)ş1ùïG2ò¯İL×…ß2›Ûø¿ï²~¯ÿùsrqWßÒşW¤/ÿÿ“·ã¯ßBhzgIktªK]»»_knIóu.“õ*ís»Ÿÿ¦~Âæà§(`²°Ñ€G\T0hÁ8@ Kd,&E0C0@r*	@
åjÈ+2a±”bæB0WAñO!g$|Ñ4H7@aLM *@­#  Z3 ”J$ÔÒÂÁÎ)HI@,Q’¸05 ¼ˆ ÌŒ.Ñ=e*¸C€I ˜’ « €@‹L¼@J¥Ó°Ø¤ "ªò /8	(@ä
AÖ$‚‚ÑG@ Ş8J›DDÀ@
 Hz,5 d‚FFà8…4&¢Ã S 
Ô
—Ø$€¡D`B 0#PÀ!Qu¹÷Nïvg½L=z÷ÕÿæNüoõîgúxŸÒnÎOo¶4–G3â¸ï·öÃ£‡­Ô|ös^ÿ¿®¿ú¹5¸ï÷ç•·jô{:åşŞÕşå¸×õ·çÇ[³ùÎîÆµ~)´üYığüÙe&ö‘¯wwõf7¹òûz¦]÷Kß {
        if (editor.queryCommandSupported('mceInsertClipboardContent')) {
          editor.execCommand('mceInsertClipboardContent', false, { content: content, internal: internal });
        } else {
          editor.execCommand('mceInsertContent', false, content);
        }
      }

      /**
       * Makes sure that the editor body becomes empty when backspace or delete is pressed in empty editors.
       *
       * For example:
       * <p><b>|</b></p>
       *
       * Or:
       * <h1>|</h1>
       *
       * Or:
       * [<h1></h1>]
       */
      function emptyEditorWhenDeleting() {
        function serializeRng(rng) {
          var body = dom.create("body");
          var contents = rng.cloneContents();
          body.appendChild(contents);
          return selection.serializer.serialize(body, { format: 'html' });
        }

        function allContentsSelected(rng) {
          if (!rng.setStart) {
            if (rng.item) {
              return false;
            }

            var bodyRng = rng.duplicate();
            bodyRng.moveToElementText(editor.getBody());
            return RangeUtils.compareRanges(rng, bodyRng);
          }

          var selection = serializeRng(rng);

          var allRng = dom.createRng();
          allRng.selectNode(editor.getBody());

          var allSelection = serializeRng(allRng);
          return selection === allSelection;
        }

        editor.on('keydown', function (e) {
          var keyCode = e.keyCode, isCollapsed, body;

          // Empty the editor if it's needed for example backspace at <p><b>|</b></p>
          if (!isDefaultPrevented(e) && (keyCode == DELETE || keyCode == BACKSPACE)) {
            isCollapsed = editor.selection.isCollapsed();
            body = editor.getBody();

            // Selection is collapsed but the editor isn't empty
            if (isCollapsed && !dom.isEmpty(body)) {
              return;
            }

            // Selection isn't collapsed but not all the contents is selected
            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {
              return;
            }

            // Manually empty the editor
            e.preventDefault();
            editor.setContent('');

            if (body.firstChild && dom.isBlock(body.firstChild)) {
              editor.selection.setCursorLocation(body.firstChild, 0);
            } else {
              editor.selection.setCursorLocation(body, 0);
            }

            editor.nodeChanged();
          }
        });
      }

      /**
       * WebKit doesn't select all the nodes in the body when you press Ctrl+A.
       * IE selects more than the contents <body>[<p>a</p>]</body> instead of <body><p>[a]</p]</body> see bug #6438
       * This selects the whole body so that backspace/delete logic will delete everything
       */
      function selectAll() {
        editor.shortcuts.add('meta+a', null, 'SelectAll');
      }

      /**
       * WebKit has a weird issue where it some times fails to properly convert keypresses to input method keystrokes.
       * The IME on Mac doesn't initialize when it doesn't fire a proper focus event.
       *
       * This seems to happen when the user manages to click the documentElement element then the window doesn't get proper focus until
       * you enter a character into the editor.
       *
       * It also happens when the first focus in made to the body.
       *
       * See: https://bugs.webkit.org/show_bug.cgi?id=83566
       */
      function inputMethodFocus() {
        if (!editor.settings.content_editable) {
          // Case 1 IME doesn't initialize if you focus the document
          // Disabled since it was interferring with the cE=false logic
          // Also coultn't reproduce the issue on Safari 9
          /*dom.bind(editor.getDoc(), 'focusin', function() {
            selection.setRng(selection.getRng());
          });*/

          // Case 2 IME doesn't initialize if you click the documentElement it also doesn't properly fire the focusin event
          // Needs to be both down/up due to weird rendering bug on Chrome Windows
          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {
            var rng;

            if (e.target == editor.getDoc().documentElement) {
              rng = selection.getRng();
              editor.getBody().focus();

              if (e.type == 'mousedown') {
                if (CaretContainer.isCaretContainer(rng.startContainer)) {
                  return;
                }

                // Edge case for mousedown, drag select and mousedown again within selection on Chrome Windows to render caret
                selection.placeCaretAt(e.clientX, e.clientY);
              } else {
                selection.setRng(rng);
              }
            }
          });
        }
      }

      /**
       * Backspacing in FireFox/IE from a paragraph into a horizontal rule results in a floating text node because the
       * browser just deletes the paragraph - the browser fails to merge the text node with a horizontal rule so it is
       * left there. TinyMCE sees a floating text node and wraps it in a paragraph on the key up event (ForceBlocks.js
       * addRootBlocks), meaning the action does nothing. With this code, FireFox/IE matche the behaviour of other
       * browsers.
       *
       * It also fixes a bug on Firefox where it's impossible to delete HR elements.
       */
      function removeHrOnBackspace() {
        editor.on('keydown', function (e) {
          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {
            // Check if there is any HR elements this is faster since getRng on IE 7 & 8 is slow
            if (!editor.getBody().getElementsByTagName('hr').length) {
              return;
            }

            if (selection.isCollapsed() && selection.getRng(true).startOffset === 0) {
              var node = selection.getNode();
              var previousSibling = node.previousSibling;

              if (node.nodeName == 'HR') {
                dom.remove(node);
                e.preventDefault();
                return;
              }

              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === "hr") {
                dom.remove(previousSibling);
                e.preventDefault();
              }
            }
          }
        });
      }

      /**
       * Firefox 3.x has an issue where the body element won't get proper focus if you click out
       * side it's rectangle.
       */
      function focusBody() {
        // Fix for a focus bug in FF 3.x where the body element
        // wouldn't get proper focus if the user clicked on the HTML element
        if (!window.Range.prototype.getClientRects) { // Detect getClientRects got introduced in FF 4
          editor.on('mousedown', function (e) {
            if (!isDefaultPrevented(e) && e.target.nodeName === "HTML") {
              var body = editor.getBody();

              // Blur the body it's focused but not correctly focused
              body.blur();

              // Refocus the body after a little while
              Delay.setEditorTimeout(editor, function () {
                body.focus();
              });
            }
          });
        }
      }

      /**
       * WebKit has a bug where it isn't possible to select image, hr or anchor elements
       * by clicking on them so we need to fake that.
       */
      function selectControlElements() {
        editor.on('click', function (e) {
          var target = e.target;

          // Workaround for bug, http://bugs.webkit.org/show_bug.cgi?id=12250
          // WebKit can't even do simple things like selecting an image
          // Needs to be the setBaseAndExtend or it will fail to select floated images
          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== "false") {
            e.preventDefault();
            editor.selection.select(target);
            editor.nodeChanged();
          }

          if (target.nodeName == 'A' && dom.hasClass(target, 'mce-item-anchor')) {
            e.preventDefault();
            selection.select(target);
          }
        });
      }

      /**
       * Fixes a Gecko bug where the style attribute gets added to the wrong element when deleting between two block elements.
       *
       * Fixes do backspace/delete on this:
       * <p>bla[ck</p><p style="color:red">r]ed</p>
       *
       * Would become:
       * <p>bla|ed</p>
       *
       * Instead of:
       * <p style="color:red">bla|ed</p>
       */
      function removeStylesWhenDeletingAcrossBlockElements() {
        function getAttributeApplyFunction() {
          var template = dom.getAttribs(selection.getStart().cloneNode(false));

          return function () {
            var target = selection.getStart();

            if (target !== editor.getBody()) {
              dom.setAttrib(target, "style", null);

              each(template, function (attr) {
                target.setAttributeNode(attr.cloneNode(true));
              });
            }
          };
        }

        function isSelectionAcrossElements() {
          return !selection.isCollapsed() &&
            dom.getParent(selection.getStart(), dom.isBlock) != dom.getParent(selection.getEnd(), dom.isBlock);
        }

        editor.on('keypress', function (e) {
          var applyAttributes;

          if (!isDefaultPrevented(e) && (e.keyCode == 8 || e.keyCode == 46) && isSelectionAcrossElements()) {
            applyAttributes = getAttributeApplyFunction();
            editor.getDoc().execCommand('delete', false, null);
            applyAttributes();
            e.preventDefault();
            return false;
          }
        });

        dom.bind(editor.getDoc(), 'cut', function (e) {
          var applyAttributes;

          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {
            applyAttributes = getAttributeApplyFunction();

            Delay.setEditorTimeout(editor, function () {
              applyAttributes();
            });
          }
        });
      }

      /**
       * Screen readers on IE needs to have the role application set on the body.
       */
      function ensureBodyHasRoleApplication() {
        document.body.setAttribute("role", "application");
      }

      /**
       * Backspacing into a table behaves differently depending upon browser type.
       * Therefore, disable Backspace when cursor immediately follows a table.
       */
      function disableBackspaceIntoATable() {
        editor.on('keydown', function (e) {
          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {
            if (selection.isCollapsed() && selection.getRng(true).startOffset === 0) {
              var previousSibling = selection.getNode().previousSibling;
              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === "table") {
                e.preventDefault();
                return false;
              }
            }
          }
        });
      }

      /**
       * Old IE versions can't properly render BR elements in PRE tags white in contentEditable mode. So this
       * logic adds a \n before the BR so that it will get rendered.
       */
      function addNewLinesBeforeBrInPre() {
        // IE8+ rendering mode does the right thing with BR in PRE
        if (getDocumentMode() > 7) {
          return;
        }

        // Enable display: none in area and add a specific class that hides all BR elements in PRE to
        // avoid the caret from getting stuck at the BR elements while pressing the right arrow key
        setEditorCommandState('RespectVisibilityInDesign', true);
        editor.contentStyles.push('.mceHideBrInPre pre br {display: none}');
        dom.addClass(editor.getBody(), 'mceHideBrInPre');

        // Adds a \n before all BR elements in PRE to get them visual
        parser.addNodeFilter('pre', function (nodes) {
          var i = nodes.length, brNodes, j, brElm, sibling;

          while (i--) {
            brNodes = nodes[i].getAll('br');
            j = brNodes.length;
            while (j--) {
              brElm = brNodes[j];

              // Add \n before BR in PRE elements on olde‘µõXŠío   D¢0_H‡PÃğ;Ó	€EH:¡“¢$dk"d$bd¤¨N˜@@E;	0PÍ¹H€ìê ĞĞ’Mğ`]1 ØF ¢T'†@D‹„ÈÉàT pÈ%EÆ:ç°ˆ°* €ëw]ÕYÇşÕ|õŸÎ½ŸG—îü¯¯ñ÷?/ô×kjıî_íúû¾õí«8Şû®¿¦Ãñ¿öZÌ¿T÷´õ¸Š3{wn{İ·ı/íj3¬?ä½zÿ76İ¬ÃÏîÿSœınv=ıå	ÿÆ÷ÿ¹û7ş^Ã¾îÉÁmªoúŸ¹¾ò®üúßúû®eşºü3>ëW{ºxşW¿¾óú<çâóÛı»–ÓûÿÄ}Óß¾ßÿ“÷—Çúõö1ınR~ÙßÌïÿK?ûWnßQùÔË÷/tûÍÖú
¿ZNÙ‡İı÷~†ªõmOûÎK¸Öùo÷ıí½]²Õ;9íÿ¢ï÷¼û™yTÙ»»¿ö%(©@^ä”4*¡N`s&›P-A<âÍF|ª!BÙ0@ôq1‚*a@V¦¼‡ˆv; ,‡ò 
LAF>%À ‡*bÑ?( 4ÀD“	…FT%%2‹a¨™£‡°”)&õä/îpP˜F†!)‚06Ñ¿}Jıc¾ü[ÿ×ßí_~í´îóuğm{~åòu›ö/W>œû˜xıÊ|ş¯¿/åŞ\ûn§Mª_ı«?+ÑSUÛ÷§C^nÚÓo›ÿ­İğ÷_¿ëÿëeU‰<q=®Ùü_ëŸÕOûıßÏ'-}×şıOİÍ¿ÿÿ2ão¿Ó¹?üÿ(¿ ¥rƒ¡K2jˆ
Ã$ƒ\ ¸AÔc€™à! ‹MeÚ	Ç)sƒ/á`V’c)Æ$°Lrˆ´$„ªC@úò@ó I‡È#Èœà…àÄº*@÷išhpÚíÂŠFĞ°š¡æBDÄHS-‡Æp'È2¡$fÕˆEƒÄDã³N…c¦@) P).ÃqV q«‚šzPÇDÑH%¢qb”
$‘ t2¡@€{D	BA‚‚‘ƒYdaTHÆ4L‘U…&*XÆP¢(p2Œˆ …’°”"I˜‰½š{"¢$†Ş0ÚAd!ÊEA€,bp¿üöºÕ#5½İ}ÿûvÚc|¿}½·?VûÿŸ«“C+½¿à¼J³¿ç½ÿô|¿~ÿSşûvÏ¼Å­{öæîî}íõı½ü¹Ÿwq»ÿ=Ç_v³3¯ş|U=·â¼=¯—ÿºÕñóàùş²öõƒ¯ÿ'õ¼ôwãú7è¼ë56¸ÿóo˜ş·ÿ÷A/ˆc.œ‘—PD@4±ˆ%ŒX@á*HÀ *Äzy	)”DÀ¥¢œ0rZr%2 Àß!$àë‚8Š–‰CiQ@ Ø$i2EH& H2‘†¶,–VH&0ÃŒP\ºì2rI²	J RÀ±Pã´˜G	¢–´A$Cp¿¾oİ{vÜ>ü_uvGßOm÷6İì¸òbûl¥¹´_ÙÏâœWûü–¬—İzwï}K’}ö¿şëVß÷~	Mÿó;Ñ¿®ãE¾ÿÿşèK~ïI7¾¾Ë<¿·¦¥ş˜íõ¹¾½Ş%ï.MgıÇNÚş¾Ùµíõ~ÿùU´4ÿßşl½ùÇëı“ú»cÙğü¾Y¾wÿıœ»n’ñ°¿kŸßöİâ_{ûzâóøûŞ_ºßÖÿıÃâ®ÿÕ­ßöµï÷ºë}Ó÷oıï™wÛ›7-®}ô–•ì#ŞÏºıö†¾Æõ×óG¾ªÁGÇÿı&¯şë¥õ¢·ÈûjÌß3¾îÓçêT<Çû×Ÿ±™IşP ²}D¬AG )!‘>¨Å‚€AĞŒ=@€DÁP ¡ ›x/$L@¨Ö äLàlàÔ	 8X FÄHM°¤¤ 7$	JXA
ĞaäPÂÒüx‚ÄCÄpH³ŠH5Îéh‚‡“b5LÀÀ B€´'H;àØ4È_×J¸¿Î*[ş_|?}{üÿŸµı÷í?•gá«~Ú×÷&ÿÿóIú¡ÿÍ×#ã¦ßİÚgïû¾÷nß7ÿÆ¦é¢–Ï;WŒıê¾«5c‹·Ÿ’îöıÊ­yô?wö¸3ôr}è¿Å_ŸµüïŸ­®¶şæOİ‹¹Ş¼·÷¼]ë%
:,Ñ@  ˆ4bŠÄ%pš%%<‚$¯‘3)Äf!
 DUªŠÖP F½B(†¶m2
`‹Mù1X Á@`´=  J€¨#EY!¥¦‚M X)ÆP 	šR
@Š”- S Q„ B‹ˆÂÀ Å$Ä9$™aOµ‚s8ªÈzmˆ¹)aƒ‡B$i‘"€…®.Í²\¹h¡`ÕÀˆ¹Ì`l†$ ƒæ
€È ™jğ‡@àRø4ólPa~Š	>=X‰a\’AŠö¥ëXrüÓV¨Aáø£lh"h˜n‰!F)z—ı¾ıûn¶[Ò®—oø7{ÕKVQÚ§¼é{ş?óıöçº¯Ö¯«ú²úòt•ŸmùşfÙ¦ÉXOW¦ûç]úÛı ìûsùÿÓó§÷zÍş¿ïÛ&¿ıû¤ßúóÿóØ¾ÿ÷×5ì›•÷şlßéúÿßy/Ûõ—jò®ê}3â–Ë:lÚT#B$ˆ  FR Eå	‚! âV‚ L¤¡[€Ü¤C`5¤€Ë€e‰°‹Ä<Fv
d cğ!çcXFH mÊÆ-P*>eƒ«2Ro Ôê°A‚T¯°r/ FŠ¤@¡E¬D<‡¨û’NÎ‡ú÷tå·CßÑG-Ü?»õŞmğ«îÿœøğû½?˜ûñûŞßÿwß×{'WÏæû‡'ú5úÏû‡„;¿Çİ~½üf?ß^sUü-æßüÉÓúïW|ßûßçõ_å×ı¶§ìÇõwî×ÿÌÎÿ­ßÜÆKûw—³öëUô»ÊÇéßıı?îÚ"ÛßîÈŸ¿,¿ÉmÆI~›ÖïÚv
ó·Zß½]oÏÖ½×Şß˜;êı»wÿLó_ú÷§×;²}ıŠŞ×[Wëpaå(½÷7dşæÚõëñcîïÔ_—g¯ÿ¾[kßˆ»­ö|ïşÇû?•ìş×İË¼zfûgãøjÖïıö·{ù¿ê• VX]4 ‰]0Uz>q„feAPLà*°0“ªÃ³	ÀPµÁD_.ì´'Ö1CD@å%ƒ†D©)`T2”E@¬Ğâ€(Å@á=4…ªÆ"&„”šlÄB#–@8 X 0#$VˆQ5ğ—UEÿÄ¿÷ÅÏ~?ów½»ÿoÿİí\ËìçYúóûmé²ÿû¾è/oºÏeø5ÿ•Ç¿w÷ïı?ìô9_b:ßõ¿¯<çóÍô<—ÛÕÇÓæú¿ÿı÷öô4ïª÷j?ŞW¿õòoŸ÷ÿİóøŞÕñäùW÷ûŞõ·î¯Ú{¿Íwë¿]—9~…D"°€
‘ 
È§ àE$dğ	0	ÙK¢d‹Éqpò\Qá!Et² RÀ È ¤ˆÊ‹­Ëd€AäASzX c0 Q	IFPK—ôX‹Ppá&ÀB°0$1j%A–Ä
„<F´vÎ¤Y ˆîR$ e )2)Å`\dğ à$ J" )Î!’¤Bˆ!¶"HBBål &\$¸Õ¥&¥Ø³K+…Ùì¼Dav¤†KĞ¦ w‚Á $¤RÕ‘ï)nRÖD#ÚA‚ØƒÅ€ ğ À6FbEA}ÆëÓÿpZÏ°_¶ÿSŸuç½ÿÏÙõœß?:\­i·|;µ[ı½ùó)ÿõşû¯Şgş+ù>½{\^ø{ËUúÖ~?;³_Ù~9¿í¿·şû&Şi÷Wèî¬™ş7Ñÿó¿í»ş~è¼›Cuíû³ÿÁüîÛgïúùNùÿó¿ß÷mEŞ’"!=c ‚{¡ˆ lCĞ!%lTÁ40X89ÁL]è\Ò@ğ¨Ğ P€²‹#X	&IpIbV,nÈk4yÀP0›-YÊ2PğCÔ‘C@˜õB€‘)› –#1e
T-Ìœ5pX
\@ñ®m÷÷ï]Ôd¯Î^û÷rméÇ¹¿<üÿöZsˆŞşMçßšöãÏzŒ¿Kşşwâßüããwûç.œïŸáë?SŸ¿Oıº|EÀRß_WDî[ÓzëÇ;ß²ë‹Ì¯îŸ÷÷ëß>»zo›vèıÒŞß+•óh?×üKw;ïª}Ó¿ò”ÿöRjÿ§hû¡÷_ü.ûş^ÑÏ=ş¡ÿëùõâ9ŞõuôÌßíïÿÅïS;ÜrÓ5ğëÿqÿ¬z¼á7úÅ¿îfû~ùêşTÓïcæ÷g{ï/ƒ¿ÎÛ÷uiŞ÷ìœû£½÷é>¿­îöÉt›×ÿ——éïƒÙe8¶ÿo´^şå—¿sš®·’îÓà†§Ü Û4fà„´ÄñüÅ"sg¿Ò‚4Bú†N¥@†#bğ€
&—¢AÓ#
b (±Y7HÉ$™ .BrÂ‚	ÈS2ÑEb,¤ÿH¢ CÁÓ1 (Œ†…B!¡&ĞI “¶ˆ Š†(@`9±õcùOãç_œëßŞ¾½âo¾Ç÷½t²wò÷ÿ”z•]—š×İÿã÷/ıû”w}MİSp¦»Ûş¹ì_/®eşïúë±ôOÿï{¿yÖ{ÁÖÚuü¨“ÿ·i~]¡¿úÎ¸¿§şçÿ9AçıŸü¥÷‡Å_{>ıïÿû»V]–õéMÿ°¹ÛıÊzJ%‘ÀD”IÎ8äƒÿlÄ‡@d•ò¢
‚ÿ ƒğÕRa	†
ğ+Caµ@¢Œ	ˆˆ!‘(®,2)s•@+<›\`Lá! ¨ˆ€´R‘ˆ· /M0J5`‚í F*4Ñ®áF7š‰Q •^TÊº`DP#÷8È „¢^ rÈÀ‚J…ÄKaÕéyvâ“ñÑqgDÄÕ  AV˜ a ru”˜BŠ@aÍ^S
"Şlˆ+ĞÕD0åC¤-¸C #² Rš\ƒa@ƒg€¢AD 1’f¸ l_õşå·_Ÿ]²ş¿ÿgïì÷?|şú^íÌ[¤îş?ÿ«TÚûçpG²%ßÙ×/üæÕ£û~¼öè‡ûÑîÚeûpí›Êú²ßv×'CÏËñşò~ş°ºÿù•¿î¿Ò{½?¯}Î¿ÚùZÍf~òüı×Woi½×rùş»;ÿ'jûø~ß™ó›[ind the link. This fix adds a bogus br element after the link.
       *
       * For example this:
       * <p><b><a href="#">x</a></b></p>
       *
       * Becomes this:
       * <p><b><a href="#">x</a></b><br></p>
       */
      function addBrAfterLastLinks() {
        function fixLinks() {
          each(dom.select('a'), function (node) {
            var parentNode = node.parentNode, root = dom.getRoot();

            if (parentNode.lastChild === node) {
              while (parentNode && !dom.isBlock(parentNode)) {
                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {
                  return;
                }

                parentNode = parentNode.parentNode;
              }

              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });
            }
          });
        }

        editor.on('SetContent ExecCommand', function (e) {
          if (e.type == "setcontent" || e.command === 'mceInsertLink') {
            fixLinks();
          }
        });
      }

      /**
       * WebKit will produce DIV elements here and there by default. But since TinyMCE uses paragraphs by
       * default we want to change that behavior.
       */
      function setDefaultBlockType() {
        if (settings.forced_root_block) {
          editor.on('init', function () {
            setEditorCommandState('DefaultParagraphSeparator', settings.forced_root_block);
          });
        }
      }

      /**
       * Deletes the selected image on IE instead of navigating to previous page.
       */
      function deleteControlItemOnBackSpace() {
        editor.on('keydown', function (e) {
          var rng;

          if (!isDefaultPrevented(e) && e.keyCode == BACKSPACE) {
            rng = editor.getDoc().selection.createRange();
            if (rng && rng.item) {
              e.preventDefault();
              editor.undoManager.beforeChange();
              dom.remove(rng.item(0));
              editor.undoManager.add();
            }
          }
        });
      }

      /**
       * IE10 doesn't properly render block elements with the right height until you add contents to them.
       * This fixes that by adding a padding-right to all empty text block elements.
       * See: https://connect.microsoft.com/IE/feedback/details/743881
       */
      function renderEmptyBlocksFix() {
        var emptyBlocksCSS;

        // IE10+
        if (getDocumentMode() >= 10) {
          emptyBlocksCSS = '';
          each('p div h1 h2 h3 h4 h5 h6'.split(' '), function (name, i) {
            emptyBlocksCSS += (i > 0 ? ',' : '') + name + ':empty';
          });

          editor.contentStyles.push(emptyBlocksCSS + '{padding-right: 1px !important}');
        }
      }

      /**
       * Old IE versions can't retain contents within noscript elements so this logic will store the contents
       * as a attribute and the insert that value as it's raw text when the DOM is serialized.
       */
      function keepNoScriptContents() {
        if (getDocumentMode() < 9) {
          parser.addNodeFilter('noscript', function (nodes) {
            var i = nodes.length, node, textNode;

            while (i--) {
              node = nodes[i];
              textNode = node.firstChild;

              if (textNode) {
                node.attr('data-mce-innertext', textNode.value);
              }
            }
          });

          serializer.addNodeFilter('noscript', function (nodes) {
            var i = nodes.length, node, textNode, value;

            while (i--) {
              node = nodes[i];
              textNode = nodes[i].firstChild;

              if (textNode) {
                textNode.value = Entities.decode(textNode.value);
              } else {
                // Old IE can't retain noscript value so an attribute is used to store it
                value = node.attributes.map['data-mce-innertext'];
                if (value) {
                  node.attr('data-mce-innertext', null);
                  textNode = new Node('#text', 3);
                  textNode.value = value;
                  t‰–¤Êi
ª)ƒ@ñqá¤DAÂ‘ĞùÃ°dD›ñ"J‰€€8À	A"rú I…a’¾™‚A
õ©@eQU@%ZY–AL{t½¦°Ò%!€*0HGbJ+ H*àJ,%*R¢¨(OS• 0 -E ¸‘`Ây!P‚€É!Æ	ƒ
 
V‘i  Ñh‹*‹‚ B )€D`‡DŠD 
K R!A&àÀ:ˆÏ„

,âzCBÖ IÀ0L1Ã`Fjy#  JÔX])"}/Tô@}êP @º îl€‚CÀÁ@Ã<‚†HLH("0Xày’# €aLÂˆÀà8»a¤¤€ P"p< ¤t’åãq  ªÀ  h!l¤r¨ (™àñÃ¿Á€AôNÀ¡AÈÃcAA„ˆ%åP„Æ°ë…#ÂŞ˜™f0RE	€D!Èš	ÀÃ±jIÈ–CV‹&¥à‚Ë+¨Eé%Sâ) ’	) 	`[vV-VBH ,¶Ò|l…p İ.‚ÚÄ08ŞäAàØˆ¦åi¬<«è($Ì'ÜPÌ?´p¨PPˆ€½0QI ²¼
@Ú"‘x"š2 a˜ ø} D´©ğh)†0 
`@ÀV	eyAp‡ˆGL
 A‚dH tˆIa!U Z QƒA¤	@e© @ ´B:.@@ĞFÔ ˆSÚ!*R* á… ¸`6êO¼
(P! ¦Nº8¥ÄP . GpŒƒ¼ 4-‹gŒà2¥Ì
~`Œ™ê"sÎb 8 i¤SB 6œ\xsHMÒ ‚çà E±‚:Q?@lXU Ò ©ŠÒKL šŒ…'Q3È@„\tØ¼@ÈG& O¥˜4\² |Ğ¦
ÍÀF? f	ğØ¡¡ä(¨N
 "ëÀ8ëb  	Õx A†@yA%$21ÕÕ(Õæ˜Å¤úıÄÅš= £$c@é`®“%Å@(Ø¡]Ë©d †äF ‘cÇ 	 ‰”01,ä ÜÇ* ä§Ğ(š
P¨Å'ÚZÒrˆQ‚Lò! 0€
@( 4Q áòÂÀ¤$&GšC(Ô ¸«uŠ@: ])… AH£„3A ÀYh yhP€Î] F„RX i Tbæ!6‘4	´Y`±$„IbÊ!2ø±<Âh€ Ú'ÃAÁDB†å›İD„QV­/kóOlˆPÍcÌ” Ä*NÙ6ìh!qÌ1QæO®t¯Í&G¨63/N ã§!2f²3Ä„AÃÄB3œHÂ0pèàÔTÙÆ$2` V³ T…˜LÉP®Á4‚[@0qDDP  »0ä’‚"ET©JÈ€0XO"HàÈÀ„°‚¸&È‚ šDé0 ˆhIÁá%L…„,Š
„=©H1%àóéÁQ*òa”Y‘T„ñˆ@€™ T‡p¤PÁ‡"*J„&2X× U	ÔÅ‚Hm ED…%€M\$J$™‚(ªáQ,g`€¢%XÀ`Ñ10S$ - È/µ”c¦L ÔTˆp¢8@J˜R4ÜB@9ä*"]QÀÄÀ ú$nà¶Bˆ	„%H‘A@O”Ô	>c2‘[21A€Ç
ĞÂCÈRAKEh7 % 0i°Âë£c²ƒ\êD]€&d.` Ğ"‹edd\°Xc™QÆŸ2„B@T"
 Ñ‘	±_ÄB,LÊ "‚$=db*eˆT%gB7—9”Ñ`3ANÃ3$qEÏ:	Š(Ø™i2"‡
´I2ÄP`€¡  pÄ‚@Õx¼à`£º 
@^&‡ˆˆq#HÓ‘ (ÌH20’¹I0™ ñË©JyCP)pc’è\Šu¹%%ñ3eü“ädjä@Z$5Ğì¡)b  $
¢ Apã,êJ!D¡dd2  P¸ÓÅn "à€ Å!+€Àúèè(€vA[0o&%ÄQ¶Ú†q‘hBC„æœ…!Õ=ƒ°FèÔ
 	$*ª@’„di¬2oQ²ú$¦Ï³ ÑÁ‚Pb‰VÀ€Àvs¬gø€D‰:B¼¸¥$ãÁ„@BaĞ‚ViX˜& åÒX_İ\‰¥ÃÈá…zŒ¬Úï€…ä#p ª^Œ4õ‘ :À@/äĞcv~8Áx‚ÀH:3Ã›B¤"`¨ D L „@°<ÑÙäÂ€$GÂ $L°@T")
: Jæ‰0(‰¶1#œ„D¯Fğ Lä(@\ˆY\Ÿ
È€a®P?ŒC»’©1Gü$øV¸)Z…MÂwJd+d$äà0ÊcH¹Pr¤Ø¤ ı™ZPBL³
+÷™¢Š 3 Oæ “i Ñ+µB„“`ÆL¥€zBhã€0w´?ºX ½Ş?à2‹€f ¦Ù6¸
&Y(FD`¡<ª( fQPßĞ&£¹Òé`$
A²# Á01©ƒ€3	àx‚`¡f"xˆ`*\a6Ã"@AÕc0T†€Ê0 €]" < ™dğé¸ ÁV	  @!9!È"€B¾À(
'©’ˆ( u€’€h 0†Œ H:p$"Ô ‹f§FÑ,E.n€Q …Ä6œ:l–Rd,@K’‰NgXÓa5mÎr6Q±,±œéQïÀ€ÅPÉi ûjÆ¹ŸF2f¨´WL°| 9qEìD49^(‰{X|nX¸ ˆ¥@€ Í§8A`ºÀ‘Å§à¨bT€ÀÇd²ƒ8	IƒäA„†ŠK²¤@
W•&ªÂ  Y'o(1’ĞxFá˜‡^D"â¬²$ˆVEKDPañYà†ãd+ p–˜Q ˆĞW‡€GM ˆA˜„ « š¨aAPÜ¬— ¸	¦CØp°‚ ¦C ÒÌ/Bµ¾G†h 0!Ei”ƒnÈ( ”À€%Ir!8àÀÁ‰”( aÕ|%@[S@  ôDG 12 €( ±‡áD	‡Ø"‘Z¶ fa\B ÈµÊ$8 $…	)ÂÑ4L:A€4¨« àÓ±ÑÄà€4‰!€aÙAZ7õ¡ˆd¼ÆÑVfe¨ÀĞO¼ ÓJ( Â|0ˆ…‡ˆ"CRÅN ><Z`ÀŠå© 8XZñÊÚ¸†]!£<\t†€ÀP¤§¸hà¸™`c ¤ô£Ã%åŞÎ)²¼™¼vDLgêÀ¹[È@!~aƒÉĞ³%@€À°¯’ÕáÔ:QúJ(ù4Ö†TÃºÂÁÖ( £“©³`Â=^d Ø²¡"tÄajÒ•–Õ­Ò‘ğ’Qi¹‰!„b0 r$ô@' IZ¤’¨ÌR„R¢$è˜PBPÀ
°‰„
ğ À%¨[*¸+<°0òMd£¼„€V5BSÀDè6¢Bêl¨k 
D†ep8”)@ Ä1 T¡+ ÈD!Údğ’BÑè±Îš	Ë±ÚÈ‚ì„G'„( Ç”ÊÇS@º¡PKH¸‘¼B†›`L ±‚  £“DI˜1G xŒ
DpÀ—o `ÁO(ER"S$`C˜Ìf’Šâ=À¥ÀØˆh§+M…Xš1bŒ ŠÁPXß  CBd M$	0†Àö’€a€Ğİ%DD $’ƒâ‚ÑMGÔ‚I €Ä1+ „	ĞøA™€DÉ¤(øv’PRÎ1#¨eÀR-Œ™‚†SÕ‚%j%@4„;JéR@n€*„:J˜ h"ñ<G‘L0)Y	4Lr}M·R°<R˜q"Qğk±1¡€IDƒR7c*|9q ã±†T4(N8°¬8‚6€ª1 @Ø@ ÁH¢<,Â€qÃZq€*™.hQ—‘‰ğ–%$´€¦  ¡‘ˆÌ ì!#!¸ Ï¤ğ<C3˜ZƒI€  Ea
€@  ‘, tĞä&4ñB@¼L¥Á	 ‰ "¤=)¨3äIRpB$PÄ1…@†W°“h¸$ãrRÒJU¼&×‚H Xšp0 Åqp:Šø"2F	V„„€“aÀ‘hK[·1ÅÃl‰†FAƒ„Fp€Ãè )ƒ˜XåDç­C´ìBRBjHf€I(`I ’„2²Hlr§¥ J)2T å	Œñp°’i  à		BF£"Cæ¡D‘dE‚…ÍŠ‚PI‹Hv”d€$'1JM’p <¼¬…v #œğ*w È	²NB}Íè%"˜Ñt \…+èë ²š¸áX­Ár‚I˜‚·i O"—PDœ.
È©`\uEÑØÈÀaYb€#È.|òDµ(‚¶
(£LÂæ>@€°Tğ
0ˆQZ¦@ EØ©QHà¿ €[‚)P&ÍåC.zZiñù¢b /im4*:°ºltôYˆ” \/L rÌè@]Aà„*M‹âO€Úµ€lD Ù‚@G¨‘›§×c0P2a" ˜$J(&,NËXLqSÊF ÁA’âJ($‹*K#m 	Àøã€ì˜ €…HÈ¨ÀP</@AE(E# ¡%e%‚‚4¼Ì 4…Æ¨;@1If„H‘U">81  ÕÂD4 ‡BğƒM user touches the document while having the on screen keyboard visible.
       *
       * The touch event moves the focus to the parent document while having the caret inside the iframe
       * this fix moves the focus back into the iframe document.
       */
      function restoreFocusOnKeyDown() {
        if (!editor.inline) {
          editor.on('keydown', function () {
            if (document.activeElement == document.body) {
              editor.getWin().focus();
            }
          });
        }
      }

      /**
       * IE 11 has an annoying issue where you can't move focus into the editor
       * by clicking on the white area HTML element. We used to be able to to fix this with
       * the fixCaretSelectionOfDocumentElementOnIe fix. But since M$ removed the selection
       * object it's not possible anymore. So we need to hack in a ungly CSS to force the
       * body to be at least 150px. If the user clicks the HTML element out side this 150px region
       * we simply move the focus into the first paragraph. Not ideal since you loose the
       * positioning of the caret but goot enough for most cases.
       */
      function bodyHeight() {
        if (!editor.inline) {
          editor.contentStyles.push('body {min-height: 150px}');
          editor.on('click', function (e) {
            var rng;

            if (e.target.nodeName == 'HTML') {
              // Edge seems to only need focus if we set the range
              // the caret will become invisible and moved out of the iframe!!
              if (Env.ie > 11) {
                editor.getBody().focus();
                return;
              }

              // Need to store away non collapsed ranges since the focus call will mess that up see #7382
              rng = editor.selection.getRng();
              editor.getBody().focus();
              editor.selection.setRng(rng);
              editor.selection.normalize();
              editor.nodeChanged();
            }
          });
        }
      }

      /**
       * Firefox on Mac OS will move the browser back to the previous page if you press CMD+Left arrow.
       * You might then loose all your work so we need to block that behavior and replace it with our own.
       */
      function blockCmdArrowNavigation() {
        if (Env.mac) {
          editor.on('keydown', function (e) {
            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode == 37 || e.keyCode == 39)) {
              e.preventDefault();
              editor.selection.getSel().modify('move', e.keyCode == 37 ? 'backward' : 'forward', 'lineboundary');
            }
          });
        }
      }

      /**
       * Disables the autolinking in IE 9+ this is then re-enabled by the autolink plugin.
       */
      function disableAutoUrlDetect() {
        setEditorCommandState("AutoUrlDetect", false);
      }

      /**
       * iOS 7.1 introduced two new bugs:
       * 1) It's possible to open links within a contentEditable area by clicking on them.
       * 2) If you hold down the finger it will display the link/image touch callout menu.
       */
      function tapLinksAndImages() {
        editor.on('click', function (e) {
          var elm = e.target;

          do {
            if (elm.tagName === 'A') {
              e.preventDefault();
              return;
            }
          } while ((elm = elm.parentNode));
        });

        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');
      }

      /**
       * iOS Safari and possible other browsers have a bug where it won't fire
       * a click event when a contentEditable is focused. This function fakes click events
       * by using touchstart/touchend and measuring the time and distance travelled.
       */
      /*
      function touchClickEvent() {
        editor.on('touchstart', function(e) {
          var elm, time, startTouch, changedTouches;

          elm = e.target;
          time = new Date().getTime();
          changedTouches = e.changedTouches;

          if (!changedTouches || changedTouches.length > 1) {
            return;
          }

          startTouch = changedTouches[0];

          editor.once('touchend', function(e) {
            var endTouch = e.changedTouches[0], args;

            if (new Date().getTime() - time > 500) {
              return;
            }

            if (Math.abs(startTouch.clientX - endTouch.clientX) > 5) {
              return;
            }

            if (Math.abs(startTouch.clientY - endTouch.clientY) > 5) {
              return;
            }

            args = {
              target: elm
            };

            each('pageX pageY clientX clientY screenX screenY'.split(' '), function(key) {
              args[key] = endTouch[key];
            });

            args = editor.fire('click', args);

            if (!args.isDefaultPrevented()) {
              // iOS WebKit can't place the caret properly once
              // you bind touch events so we need to do this manually
              // TODO: Expand to the closest word? Touble tap still works.
              editor.selection.placeCaretAt(endTouch.clientX, endTouch.clientY);
              editor.nodeChanged();
            }
          });
        });
      }
      */

      /**
       * WebKit has a bug where it will allow forms to be submitted if they are inside a contentEditable element.
       * For example this: <form><button></form>
       */
      function blockFormSubmitInsideEditor() {
        editor.on('init', function () {
          editor.dom.bind(editor.getBody(), 'submit', function (e) {
            e.preventDefault();
          });
        });
      }

      /**
       * Sometimes WebKit/Blink generates BR elements with the Apple-interchange-newline class.
       *
       * Scenario:
       *  1) Create a table 2x2.
       *  2) Select and copy cells A2-B2.
       *  3) Paste and it will add BR element to table cell.
       */
      function removeAppleInterchangeBrs() {
        parser.addNodeFilter('br', function (nodes) {
          var i = nodes.length;

          while (i--) {
            if (nodes[i].attr('class') == 'Apple-interchange-newline') {
              nodes[i].remove();
            }
          }
        });
      }

      /**
       * IE cannot set custom contentType's on drag events, and also does not properly drag/drop between
       * editors. This uses a special data:text/mce-internal URL to pass data when drag/drop between editors.
       */
      function ieInternalDragAndDrop() {
        editor.on('dragstart', function (e) {
          setMceInternalContent(e);
        });

        editor.on('drop', function (e) {
          if (!isDefaultPrevented(e)) {
            var internalContent = getMceInternalContent(e);

            if (internalContent && internalContent.id != editor.id) {
              e.preventDefault();

              var rng = RangeUtils.getCaretRangeFromPoint(e.x, e.y, editor.getDoc());
              selection.setRng(rng);
              insertClipboardContents(internalContent.html, true);
            }
          }
        });
      }

      function refreshContentEditable() {
        // No-op since Mozilla seems to have fixed the caret repaint issues
      }

      function isHidden() {
        var sel;

        if (!isGecko || editor.removed) {
          return 0;
        }

        // Weird, wheres that cursor selection?
        sel = editor.selection.getSel();
        return (!sel || !sel.rangeCount || sel.rangeCount === 0);
      }

      /**
       * Properly empties the editor if all contents is selected and deleted this to
       * prevent empty paragraphs from being produced at beginning/end of contents.
       */
      function emptyEditorOnDeleteEverything() {
        function isEverythingSelected(editor) {
          var caretWalker = new CaretWalker(editor.getBody());
          var rng = editor.selection.getRng();
          var startCaretPos = CaretPosition.fromRangeStart(rng);
          var endCaretPos = CaretPosition.fromRangeEnd(rng);
          var prev = caretWalker.prev(startCaretPos);
          var next = caretWalker.next(endCaretPos);

          return !editor.selection.isCollapsed() &&
            (!prev || (prev.isAtStart() && startCaretPos.isEqual(prev))) &&
            (!next || (next.isAtEnd() && startCaretPos.isEqual(next)));
        }

        // Type over case delete and insert this won't cover typeover with a IME but at least it covers the common case
        editor.on('keypress', function (e) {
          if (!isDefaultPrevented(e) && !selection.isCollapsed() && e.charCode > 31 && !VK.metaKeyPressed(e)) {
            if (isEverythingSelected(editor)) {
              e.preventDefault();
              editor.setContent(String.fromCharCode(e.charCode));
              editor.selection.select(editor.getBody(), true);
              editor.selection.collapse(false);
              editor.nodeChanged();
            }
          }
        });

        editor.on('keydown', function (e) {
          var keyCode = e.keyCode;

          if (!isDefaultPrevented(e) && (keyCode == DELETE || keyCode == BACKSPACE)) {
            if (isEverythingSelected(editor)) {
              e.preventDefault();
              editor.setContent('');
              editor.nodeChanged();
            }
          }
        });
      }

      // All browsers
      removeBlockQuoteOnBackSpace();
      emptyEditorWhenDeleting();

      // Windows phone will return a range like [body, 0] on mousedown so
      // it will always normalize to the wrong location
      if (!Env.windowsPhone) {
        normalizeSelection();
      }

      // WebKit
      if (isWebKit) {
        emptyEditorOnDeleteEverything();
        inputMethodFocus();
        selectControlElements();
        setDefaultBlockType();
        blockFormSubmitInsideEditor();
        disableBackspaceIntoATable();
        removeAppleInterchangeBrs();

        //touchClickEvent();

        // iOS
        if (Env.iOS) {
          restoreFocusOnKeyDown();
          bodyHeight();
          tapLinksAndImages();
        } else {
          selectAll();
        }
      }

      // IE
      if (isIE && Env.ie < 11) {
        removeHrOnBackspace();
        ensureBodyHasRoleApplication();
        addNewLinesBeforeBrInPre();
        removePreSerializedStylesWhenSelectingControls();
        deleteControlItemOnBackSpace();
        renderEmptyBlocksFix();
        keepNoScriptContents();
        fixCaretSelectionOfDocumentElementOnIe();
      }

      if (Env.ie >= 11) {
        bodyHeight();
        disableBackspaceIntoATable();
      }

      if (Env.ie) {
        selectAll();
        disableAutoUrlDetect();
        ieInternalDragAndDrop();
      }

      // Gecko
      if (isGecko) {
        emptyEditorOnDeleteEverything();
        removeHrOnBackspace();
        focusBody();
        removeStylesWhenDeletingAcrossBlockElements();
        setGeckoEditingOptions();
        addBrAfterLastLinks();
        showBrokenImageIcon();
        blockCmdArrowNavigation();
        disableBackspaceIntoATable();
      }

      return {
        refreshContentEditable: refreshContentEditable,
        isHidden: isHidden
      };
    };
  }
);

/**
 * InitContentBody.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.init.InitContentBody',
  [
    'global!document',
    'global!window',
    'tinymce.core.caret.CaretContainerInput',
    'tinymce.core.dom.DOMUtils',
    'tinymce.core.dom.Selection',
    'tinymce.core.dom.Serializer',
    'tinymce.core.EditorUpload',
    'tinymce.core.ErrorReporter',
    'tinymce.core.ForceBlocks',
    'tinymce.core.Formatter',
    'tinymce.core.html.DomParser',
    'tinymce.core.html.Node',
    'tinymce.core.html.Schema',
    'tinymce.core.keyboard.KeyboardOverrides',
    'tinymce.core.NodeChange',
    'tinymce.core.SelectionOverrides',
    'tinymce.core.UndoManager',
    'tinymce.core.util.Delay',
    'tinymce.core.util.Quirks',
    'tinymce.core.util.Tools'
  ],
  function (
    document, window, CaretContainerInput, DOMUtils, Selection, Serializer, EditorUpload, ErrorReporter, ForceBlocks, Formatter, DomParser, Node, Schema, KeyboardOverrides,
    NodeChange, SelectionOverrides, UndoManager, Delay, Quirks, Tools
  ) {
    var DOM = DOMUtils.DOM;

    var createParser = function (editor) {
      var parser = new DomParser(editor.settings, editor.schema);

      // Convert src and href into data-mce-src, data-mce-href and data-mce-style
      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {
        var i = nodes.length, node, dom = editor.dom, value, internalName;

        while (i--) {
          node = nodes[i];
          value = node.attr(name);
          internalName = 'data-mce-' + name;

          // Add internal attribute if we need to we don't on a refresh of the document
          if (!node.attributes.map[internalName]) {
            // Don't duplicate these since they won't get modified by any browser
            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {
              continue;
            }

            if (name === "style") {
              value = dom.serializeStyle(dom.parseStyle(value), node.name);

              if (!value.length) {
                value = null;
              }

              node.attr(internalName, value);
              node.attr(name, value);
            } else if (name === "tabindex") {
              node.attr(internalName, value);
              node.attr(name, null);
            } else {
              node.attr(internalName, editor.convertURL(value, name, node.name));
            }
          }
        }
      });

      // Keep scripts from executing
      parser.addNodeFilter('script', function (nodes) {
        var i = nodes.length, node, type;

        while (i--) {
          node = nodes[i];
          type = node.attr('type') || 'no/type';
          if (type.indexOf('mce-') !== 0) {
            node.attr('type', 'mce-' + type);
          }
        }
      });

      parser.addNodeFilter('#cdata', function (nodes) {
        var i = nodes.length, node;

        while (i--) {
          node = nodes[i];
          node.type = 8;
          node.name = '#comment';
          node.value = '[CDATA[' + node.value + ']]';
        }
      });

      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {
        var i = nodes.length, node, nonEmptyElements = editor.schema.getNonEmptyElements();

        while (i--) {
          node = nodes[i];

          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {
            node.append(new Node('br', 1)).shortEnded = true;
          }
        }
      });

      return parser;
    };

    var autoFocus = function (editor) {
      if (editor.settings.auto_focus) {
        Delay.setEditorTimeout(editor, function () {
          var focusEditor;

          if (editor.settings.auto_focus === true) {
            focusEditor = editor;
          } else {
            focusEditor = editor.editorManager.get(editor.settings.auto_focus);
          }

          if (!focusEditor.destroyed) {
            focusEditor.focus();
          }
        }, 100);
      }
    };

    var initEditor = function (editor) {
      editor.bindPendingEventDelegates();
      editor.initialized = true;
      editor.fire('init');
      editor.focus(true);
      editor.nodeChanged({ initial: true });
      editor.execCallback('init_instance_callback', editor);
      autoFocus(editor);
    };

    var getStyleSheetLoader = function (editor) {
      return editor.inline ? DOM.styleSheetLoader : editor.dom.styleSheetLoader;
    };

    var initContentBody = function (editor, skipWrite) {
      var settings = editor.settings, targetElm = editor.getElement(), doc = editor.getDoc(), body, contentCssText;

      // Restore visibility on target element
      if (!settings.inline) {
        editor.getElement().style.visibility = editor.orgVisibility;
      }

      // Setup iframe body
      if (!skipWrite && !settings.content_editable) {
        doc.open();
        doc.write(editor.iframeHTML);
        doc.close();
      }

      if (settings.content_editable) {
        editor.on('remove', function () {
          var bodyEl = this.getBody();

          DOM.removeClass(bodyEl, 'mce-content-body');
          DOM.removeClass(bodyEl, 'mce-edit-focus');
          DOM.setAttrib(bodyEl, 'contentEditable', null);
        });

        DOM.addClass(targetElm, 'mce-content-body');
        editor.contentDocument = doc = settings.content_document || document;
        editor.contentWindow = settings.content_window || window;
        editor.bodyElement = targetElm;

        // Prevent leak in IE
        settings.content_document = settings.content_window = null;

        // TODO: Fix this
        settings.root_name = targetElm.nodeName.toLowerCase();
      }

      // It will not steal focus while setting contentEditable
      body = editor.getBody();
      body.disabled = true;
      editor.readonly = settings.readonly;

      if (!editor.readonly) {
        if (editor.inline && DOM.getStyle(body, 'position', true) === 'static') {
          body.style.position = 'relative';
        }

        body.contentEditable = editor.getParam('content_editable_state', true);
      }

      body.disabled = false;

      editor.editorUpload = new EditorUpload(editor);
      editor.schema = new Schema(settings);
      editor.dom = new DOMUtils(doc, {
        keep_values: true,
        url_converter: editor.convertURL,
        url_converter_scope: editor,
        hex_colors: settings.force_hex_style_colors,
        class_filter: settings.class_filter,
        update_styles: true,
        root_element: editor.inline ? editor.getBody() : null,
        collect: settings.content_editable,
        schema: editor.schema,
        onSetAttrib: function (e) {
          editor.fire('SetAttrib', e);
        }
      });

      editor.parser = createParser(editor);
      editor.serializer = new Serializer(settings, editor);
      editor.selection = new Selection(editor.dom, editor.getWin(), editor.serializer, editor);
      editor.formatter = new Formatter(editor);
      editor.undoManager = new UndoManager(editor);
      editor._nodeChangeDispatcher = new NodeChange(editor);
      editor._selectionOverrides = new SelectionOverrides(editor);

      CaretContainerInput.setup(editor);
      KeyboardOverrides.setup(editor);
      ForceBlocks.setup(editor);

      editor.fire('PreInit');

      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {
        doc.body.spellcheck = false; // Gecko
        DOM.setAttrib(body, "spellcheck", "false");
      }

      editor.quirks = new Quirks(editor);
      editor.fire('PostRender');

      if (settings.directionality) {
        body.dir = settings.directionality;
      }

      if (settings.nowrap) {
        body.style.whiteSpace = "nowrap";
      }

      if (settings.protect) {
        editor.on('BeforeSetContent', function (e) {
          Tools.each(settings.protect, function (pattern) {
            e.content = e.content.replace(pattern, function (str) {
              return '<!--mce:protected ' + escape(str) + '-->';
            });
          });
        });
      }

      editor.on('SetContent', function () {
        editor.addVisual(editor.getBody());
      });

      // Remove empty contents
      if (settings.padd_empty_editor) {
        editor.on('PostProcess', function (e) {
          e.content = e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/, '');
        });
      }

      editor.load({ initial: true, format: 'html' });
      editor.startContent = editor.getContent({ format: 'raw' });

      editor.on('compositionstart compositionend', function (e) {
        editor.composing = e.type === 'compositionstart';
      });

      // Add editor specific CSS styles
      if (editor.contentStyles.length > 0) {
        contentCssText = '';

        Tools.each(editor.contentStyles, function (style) {
          contentCssText += style + "\r\n";
        });

        editor.dom.addStyle(contentCssText);
      }

      getStyleSheetLoader(editor).loadAll(
        editor.contentCSS,
        function (_) {
          initEditor(editor);
        },
        function (urls) {
        ‘s4MÀà·„€Ú –K‘ÁÜZµ85„ŠŸ`ƒR€ è+6T’Òûp· ¦k°‡JÆv0œIUˆeªXmÈ@¬”`X››´Š
4‡Dnq@ÄÇ Â1È=7*Ğ°/0
M†²ì€X Ì‚'UL¡R/B˜@çsÕªÍÃ¡ mİÕV½´:˜m]?üô¾ ~‡{âı|¬ßíù¿?9aPcÚŸÏ—Õş`¡Şõ¾³÷oEçù~÷Ù÷Šq=öÛê+Ëİÿ›ÚÕœœ½âÿöİş4ÿÃ÷-Èí÷¾¿ùŞúw]ªßHj`ßñ÷ö ùßïtÉÿİ&è³¾µÿ€_¢ú§çŸ9doSéë;§w¥Üàó|¾@ûYÿ×ŞŞÉ’'oİõû8™WñnŸtŸÎÜİÿÿ_ Ûÿ_·şËÏºöŞÛŞ¸[ı€Ûıã{±ÜoÆ¯ÿ†ï¦NÿõİA§
ü¹ÿ}ÛßØ·şx’øşÙ±7æ±UP¯C°"*L•	bC;Eìf@ £E€éDbxÉ¶PJ3B+èO„Œ4aC ZAm+74BÆ˜ˆ(J°{Áå:_W_ÖĞØ2Òá]p 'g(r
3|cŒƒ ÛEôB`ëD0GÊh +äÓÀ@€Æ
üÎ>ÿŞº7àÿs7º¼_ä[İÿ7u„ÿÕ{H{şßÜ¡ü÷ıßıé	bû+O%¦è¡ıkî<[nıéÏëÈş)À©ø¿ûv0İ"æ¯óÒê+;ulÿé›ÿß¶¾©şş{o‡?l¯ë{ÿUÒo|¹¿í÷¤ŞÓ¹ú§Kzëß­ı=÷ô…kÇü'É¡’æ¦FºpG(€2°0@d “)@DH‡£Ù QB d+yOîXºX@u!…}1`!ÙD*ó“İ‰0úÄhtÊÍye¡†IÆJŒ„À@1O±ˆ!¨€ƒ „¸j/|èÅˆµpiÁ“áÓ
iÁJ@2àáASÊàXÛ3EÑêN†¢‘(Âhõ#UøjPá ÕÎ‘
¥ñeè¨8»@p@©ØL 	=Xd£¬&9@±& ÃCq/7" X¤˜È—g@¥è`0²9¨² T©` ¢ö0ùÑ_ı~ß×ôÛ÷ÿîzğú_ğ/Ş^5ûnôÓwïÑ¾ûy{»ÿù²O»¯™¿¿›.¡×÷ìx¼~€êcoZÿ¶Æ²¯óÏ	úÛûó§×—g‚÷¿=×¸WqùÛ¾çOÿÂ“ûnyñsdû/|;ş?ş)¨;ÿ&o«^_«‡İ.Í'®&°×r,‹Là€%e@õQ¨Ğ¢ªæ,(Ú  P³VÀÂ šq\#°«³Á-ˆ³‡ÔC-)\.¡#dG ¤—’ƒÅ#‚àRÅ	IÖp4#BRÊM$Õœc‡ÃÆ™äB	0÷¿ûüOwu0»úïÏ—¿ópù×4~‰æ; ğ¶İ\ğ³ ÆÆ£[Ü€à7ïÒtgĞñŠø/Wg}«&«¾xÿ¢­ƒ¨òN>º¿`GîN»}õ<üŞmûÕ~ş|ÿİî®¿Hæ_îşŸ Ÿ>ø³½¿î”f»å«õ‹şpf¿{¬/~5·şsÖ¯ÿ¼YË÷gö!?ö9‰üı p¿×ÔşîAõ‹‹ÔßÿôÍw‹çÍ3»vûWºåÜÿÅ1ÿ%İı¹ùÂÖÃ¿aø	ûÅÿÕw=îŠsş³¿?ŞïµŸîtÛkÔ¡Yşûw¹ï`õ5ß¶÷Ïş¥·<Ù÷*=ÈÎËºÎç}oB ‘I“+òC@‰bH)9p$
…{VÂäÖ`hæø)@00D0¸9Òe IlC0 võ-=i •1m h¶U§1a'´ |—›vÃÑd×48"¶{AZá!² á%oÄI¹ÄÊÅqhÙÛ·çİoØñÏæÍÿß‹ËWîæÿK÷¼VnÚºk-øÿ=úmRo@ÚVoÿÑ˜ıÈş=_z|åwgíùªx…Gÿ*Ÿıoçæ¬«$ÛWõGşïÎÍù¿¶—ïÄ=ı}Öu®R×âÏíö?Şh¡·şü[Jÿ±9Ü¿¦û ~ùı«ËucV0lb + G@4‚1ÆXLw˜F4Â68cKH°Vb åÂ|jr!N–¬'¢e% Õ³æ¦= ^€D¸Z{šh8€ ¥¦Àu
ì¢‡)Wb’ÛİÀFÄ€@ra¸‚IÀÀæACr…4Â*½XòŠ»Q!å-ZØ4â%ÄA'@Ç+&nŒ	—.®@œqL¡‚E! Îõ7$á€œŞˆ”?¢fR L„ìMğ‚BÈA ñT0!ƒ(Â PªÙh“ÒT(@ED¨ 
¬6ô’Ğj`K‡$&x*
fP„8Ùi˜oßW^‰Oıßú|şúèæ=Õß·ÿ‚Î½,›3âÙ w—5ù²cï@!}`·;;i~]÷ß_¶(ôÿøûGã”òõnõÚ	ç¿ÇîŸküú>~Òß»ıGù¬ÕÿâßŒıŸª×Ì™epÿÿÕïİÿ`r/Ÿÿÿÿ`\?u¼ÜÎm#$)jPˆâäA:>¤€tÁZB[”‡ĞEdÁJ‚H6ã†V#¢ˆ~P(€ Ğ"2\‚É©‚ Î' î!2	0öP í´i¼öf*ğPJøŠ@PH!BjP1B¢AXšDƒlš¦C  "`O×m°7ÿÊú€Ïßë¿º×JÜ×ş>Œ¯Ş¤İùïßŞ¿3¤5?å]o?ß’×ì“ï1ñ¯³¹ß§v÷šıÇ^?¾›8Ç1û#Ÿ»ÿí¬¤=ÿªÿûµİxèŞIïô„è÷m+ïˆ¿Ñï'½ïßÇ—Ûwßıû~²><şÇáƒĞ›Ç¾ê/‹û¾u¼ùõ>öwÛÛ›¼Û×ßÇçåÔyî[’_©/3^òçR«ÏoğÿÿµàJşv{ûÿ³LâŸüïÒıúuŞÄmÉ¼îw‰ÉòøÓòï t^i¯«~ßÌÿó{›ÿşâß$÷¿Ÿ×~€ç¸_múk@!~ÛÚ;]l
æ ™@››ˆ‚ÈŠe€”íÈ‡’€æH@”•˜ £÷±òq	X#¤GH·eË!FÕˆ ği$,Ğ4ÏDÂ%àDq¸–’Š³`Æx0EGp£ -‚ ıH(BU:=è…z>€ €*b¢6ƒ4È¢¢ä €Ê˜ŠÚr¯™óÿÿÄñ=æúßıA¹ìæz½¹ ÔQĞ‡[?qÍ¿ò®o]½r¬ÅÿîÚœÿmQMæÙîü	Õ;ŞK«ï¾ƒùß¥õÏkà¬ïø÷ÿï@Ï‰Ş¯ÿ|IĞËü·¿ßö£µÏÇv2¾·@†jîı¾íİıò´swß´ıù?õ·v°­ Mp`é!¡-c‡ 	`#¶G
”hËØ3h  F¸J ’ 6 ¤M2 ƒG¬@ˆ©àä3 RY¤÷ô™@ »!äá ¨PG"ÄÂ"°A‰,š€0 ä²‹ @Pã‘ Ù ªUÂĞHV \dQ$}â,`jBú5x°t™Q0.fBº	~¬†
ˆD#Á* ¡Ã‡‚Š² å¹…;
Iò
Œàp@$C]àR`FıˆH§,7C¡ÌÁL*#cÉ0K…ä´ÀÈI†$ƒEáP{ §µ¨?ùÏ+à-Ê~n‹¦çÇùûàwø6¯ógQ_î Ş—¸Ÿïô~àïÖ|Õ;oxØÜŞn¯ÿ~Â_^:M»½½ Ú<?­ÿÿ™ü÷gïdª»ÕKı÷W¡ü¯ïø÷öˆ®=¹óŞµ‹ «ÜµÏo=şF{æö¿_ÿÛÅşoŸ²õd$¦‚bNc ´ÁZ¶¡ 	ŞÍÉ`ƒáLE‰6zJ€¤D†è`¤qş•†”È2ÒĞCBtŒ€/b…ÂÌXTôQDƒÄ	@N 4 qHç‰Ÿ "J(X”°Q£
ƒmÄ„;ÆCE£#ˆ$ærQ¨>àÏ¾gëó	w­ıë»KÿßvÜm}ÔıÜ×ô³¯×‰­ïñß…^Öê?ãïîûú–Ú÷Gö?õ~MÜOş”ù^Şİòİ9ñXıú~óÿ…ïıµÛéu‰Ëÿ|íÿÏOçD‡ÿf´öïå ®ß¶;ûOïõ»êçít¾÷°¥İÕ óçÿÿ3>w›à»ÿ¾÷`w›Ëf~ßòö™;æüÛ¿7µ¼ÌSİUûÀ=±nÙîŞ¿d¿µ·}ÿ÷~…Ü[¿ÏS¿“m|Îm¿ørBòa¾z¿ïêBµ~¹»ş¿´»K|÷>{÷sß³Şêïä÷‘Ùuz}şÏ—‡ÿûşŠ‚Æßæ¿U›\ÎôIbj3	=+foFò>$dœ Q’HE! ‡ÁHÂˆ¨¢\•"„"2VbZ$D¡ ¥	:QÒ,P"ƒ0æCç²nh³v èXA,ÁÔ Œ°$	@*…†E‡@V&uˆƒt0£kSíúw×¤¿©½¢Ùû@ÿ‹øÿëçm@ÛçÖö»ÿ+´úû{?·¸¯Ü{Kñüß||›íûNÿ<L¬¯–İçÖ¶ã»¿×®ÿk ºwÍüûÓï:øÕË/~ëk²mûÚöC7ñÑº}½ş@¾Ÿÿí_“üaıö»%çõ?ökğ¡È¦ æBÊÄ4ÁßFè’ ºá"¤À£¡\ƒ@Qx.ß4ÁyzI åÃ„pñ€×"A@!ğØ*LPŒ‰ a$CÃíÜ(€È@Á®jƒI³U»^Ûå@ !´Ğ	!D+à8<uPD80Á¡‡ˆVb¢%¦„½BB7’=7Œ`ÂĞ&†Ê° BƒRa0çQ…*a S*Á‚á³’0c
‰àfÔA¬N5EB¥À\F†P"Ez3ÉÉĞu /²4Ä¤Ä¤Vi€AâáÕ+ŠMB!kÆ!	Y»mûËEÍ_=ÿØÿş1]İş·‰ÇÜèİÚÿŸ¹m…dşrµËVÿ ³9›·—şÿÈúwÊ÷úóònoVİûÿœ@l]=×~¤úLî¯Üº§ó·‡ÿüå£ÿB¯4§øïoÇ¼W²¥ÕÊÊ~şëï^ïe‡{{ßûŞÿ—€óõzúïÑŞ width: w,
            height: h,
            deltaWidth: settings.delta_width,
            deltaHeight: settings.delta_height
          });

          // Resize editor
          if (!settings.content_editable) {
            h = (o.iframeHeight || h) + (typeof h === 'number' ? (o.deltaHeight || 0) : '');
            if (h < minHeight) {
              h = minHeight;
            }
          }
        } else {
          o = settings.theme(editor, elm);

          if (o.editorContainer.nodeType) {
            o.editorContainer.id = o.editorContainer.id || editor.id + "_parent";
          }

          if (o.iframeContainer.nodeType) {
            o.iframeContainer.id = o.iframeContainer.id || editor.id + "_iframecontainer";
          }

          // Use specified iframe height or the targets offsetHeight
          h = o.iframeHeight || elm.offsetHeight;
        }

        editor.editorContainer = o.editorContainer;
        o.height = h;
      }

      return o;
    };

    var relaxDomain = function (editor, ifr) {
      // Domain relaxing is required since the user has messed around with document.domain
      // This only applies to IE 11 other browsers including Edge seems to handle document.domain
      if (document.domain !== window.location.hostname && Env.ie && Env.ie < 12) {
        var bodyUuid = Uuid.uuid('mce');

        editor[bodyUuid] = function () {
          InitContentBody.initContentBody(editor);
        };

        /*eslint no-script-url:0 */
        var domainRelaxUrl = 'javascript:(function(){' +
          'document.open();document.domain="' + document.domain + '";' +
          'var ed = window.parent.tinymce.get("' + editor.id + '");document.write(ed.iframeHTML);' +
          'document.close();ed.' + bodyUuid + '(true);})()';

        DOM.setAttrib(ifr, 'src', domainRelaxUrl);
        return true;
      }

      return false;
    };

    var createIframe = function (editor, o) {
      var settings = editor.settings, bodyId, bodyClass;

      editor.iframeHTML = settings.doctype + '<html><head>';

      // We only need to override paths if we have to
      // IE has a bug where it remove site absolute urls to relative ones if this is specified
      if (settings.document_base_url != editor.documentBaseUrl) {
        editor.iframeHTML += '<base href="' + editor.documentBaseURI.getURI() + '" />';
      }

      // IE8 doesn't support carets behind images setting ie7_compat would force IE8+ to run in IE7 compat mode.
      if (!Env.caretAfter && settings.ie7_compat) {
        editor.iframeHTML += '<meta http-equiv="X-UA-Compatible" content="IE=7" />';
      }

      editor.iframeHTML += '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';

      bodyId = settings.body_id || 'tinymce';
      if (bodyId.indexOf('=') != -1) {
        bodyId = editor.getParam('body_id', '', 'hash');
        bodyId = bodyId[editor.id] || bodyId;
      }

      bodyClass = settings.body_class || '';
      if (bodyClass.indexOf('=') != -1) {
        bodyClass = editor.getParam('body_class', '', 'hash');
        bodyClass = bodyClass[editor.id] || '';
      }

      if (settings.content_security_policy) {
        editor.iframeHTML += '<meta http-equiv="Content-Security-Policy" content="' + settings.content_security_policy + '" />';
      }

      editor.iframeHTML += '</head><body id="' + bodyId +
        '" class="mce-content-body ' + bodyClass +
        '" data-id="' + editor.id + '"><br></body></html>';

      // Create iframe
      // TODO: ACC add the appropriate description on this.
      var ifr = DOM.create('iframe', {
        id: editor.id + "_ifr",
        frameBorder: '0',
        allowTransparency: "true",
        title: editor.editorManager.translate(
          "Rich Text Area. Press ALT-F9 for menu. " +
          "Press ALT-F10 for toolbar. Press ALT-0 for help"
        ),
        style: {
          width: '100%',
          height: o.height,
          display: 'block' // Important for Gecko to render the iframe correctly
        }
      });

      ifr.onload = function () {
        ifr.onload = null;
        editor.fire("load");
      };

      var isDomainRelaxed = relaxDomain(editor, ifr);

      editor.contentAreaContainer = o.iframeContainer;
      editor.iframeElement = ifr;

      DOM.add(o.iframeContainer, ifr);

      return isDomainRelaxed;
    };

    var init = function (editor) {
      var settings = editor.settings, elm = editor.getElement(), boxInfo;

      editor.rtl = settings.rtl_ui || editor.editorManager.i18n.rtl;
      editor.editorManager.i18n.setCode(settings.language);
      settings.aria_label = settings.aria_label || DOM.getAttrib(elm, 'aria-label', editor.getLang('aria.rich_text_area'));

      editor.fire('ScriptsLoaded');

      initTheme(editor);
      initPlugins(editor);
      boxInfo = measueBox(editor);

      // Load specified content CSS last
      if (settings.content_css) {
        Tools.each(Tools.explode(settings.content_css), function (u) {
          editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u));
        });
      }

      // Load specified content CSS last
      if (settings.content_style) {
        editor.contentStyles.push(settings.content_style);
      }

      // Content editable mode ends here
      if (settings.content_editable) {
        return InitContentBody.initContentBody(editor);
      }

      var isDomainRelaxed = createIframe(editor, boxInfo);

      if (boxInfo.editorContainer) {
        DOM.get(boxInfo.editorContainer).style.display = editor.orgDisplay;
        editor.hidden = DOM.isHidden(boxInfo.editorContainer);
      }

      editor.getElement().style.display = 'none';
      DOM.setAttrib(editor.id, 'aria-hidden', true);

      if (!isDomainRelaxed) {
        InitContentBody.initContentBody(editor);
      }
    };

    return {
      init: init
    };
  }
);

/**
 * Render.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.init.Render',
  [
    'global!window',
    'tinymce.core.dom.DOMUtils',
    'tinymce.core.dom.EventUtils',
    'tinymce.core.dom.ScriptLoader',
    'tinymce.core.Env',
    'tinymce.core.ErrorReporter',
    'tinymce.core.init.Init',
    'tinymce.core.NotificationManager',
    'tinymce.core.PluginManager',
    'tinymce.core.ThemeManager',
    'tinymce.core.util.Tools',
    'tinymce.core.WindowManager'
  ],
  function (window, DOMUtils, EventUtils, ScriptLoader, Env, ErrorReporter, Init, NotificationManager, PluginManager, ThemeManager, Tools, WindowManager) {
    var DOM = DOMUtils.DOM;

    var loadScripts = function (editor, suffix) {
      var settings = editor.settings, scriptLoader = ScriptLoader.ScriptLoader;

      if (settings.language && settings.language != 'en' && !settings.language_url) {
        settings.language_url = editor.editorManager.baseURL + '/langs/' + settings.language + '.js';
      }

      if (settings.language_url) {
        scriptLoader.add(settings.language_url);
      }

      if (settings.theme && typeof settings.theme != "function" &&
        settings.theme.charAt(0) != '-' && !ThemeManager.urls[settings.theme]) {
        var themeUrl = settings.theme_url;

        if (themeUrl) {
          themeUrl = editor.documentBaseURI.toAbsolute(themeUrl);
        } else {
          themeUrl = 'themes/' + settings.theme + '/theme' + suffix + '.js';
        }

        ThemeManager.load(settings.theme, themeUrl);
      }

      if (Tools.isArray(settings.plugins)) {
        settings.plugins = settings.plugins.join(' ');
      }

      Tools.each(settings.external_plugins, function (url, name) {
        PluginManager.load(name, url);
        settings.plugins += ' ' + name;
      });

      Tools.each(settings.plugins.split(/[ ,]/), function (plugin) {
        plugin = Tools.trim(plugin);

        if (plugin && !PluginManager.urls[plugin]) {
          if (plugin.charAt(0) === '-') {
            plugin = plugin.substr(1, plugin.length);

            var dependencies = PluginManager.dependencies(plugin);

            Tools.each(dependenci`ÀX FPPEƒDrYD„ AÖ4 uÂJ¡ ‚W Î%¦ªæÀ„la
€"x	`L€4FBËÄ” ‚Œ´3TiI °Şa’Á× Õ@Ì. %„¦Q‘Ñ:Í%Åè@Bµ;ã ^¡j&ûÿşÙº¯…ÅŞDŒÓ{/ñÛäó»ÿÖÇ×õ®wîşVvæ—Î?;şàMR¾¶øz_Óú³zlñË³óÔOîr£Ë]¯73.±•æÏ­—×±îöUß¯â55ôüKÏ:æíÿŞìçÿøˆÖÇó³ıóç÷µ©WÅ×ûËÜı›5İØ~Wïë1›Wû"ºL×İ~>ælšú)U¥~÷ò®ŞgÛr•Ú7ùwÊÂó-*<fıû_Ì¸ğ7I^s“E¯ÿü];?à<;¯jï\¦fæ÷JşÃñéßàÛgßìÔ¿ÀnlÔîô·V-oVµ÷Ùÿ•éş©L9®ú~P7í÷EÿbP@; €€4ÄDˆ˜ EÃæ $s
DÀ)#”„À‹XP¹ €A°9< -@ h €aµbÔ”(/&(P§x˜lCE ˜)2R@à$À…Pcœ P+Ë¡H1 	ŠïvßwNŸöBÇÕms®Å»ñò–5ÔØ_Üêúg¿Ë©;ÜA¹?ï¨ûÿ$°òã­ÎåNøğ§_‹6Mû¢ÒO}v/ş|?œóŸÙ=w‹¦ó-.¿~—nÀ?75#¼¸şÚg«¿2,íùÏ%e¿ÿ–¢¾\ô¥·•4ŒÂÉ˜ò¶÷¿bZH=A€aÑ€
á0
‘1£‘¨@p	l3@Lt €¨E`€!
- ih
:‚ªĞ‚  €>¡ŸqdÄ–ÆcÔ‰¥0D
QT@R DJ€š $ &¢ P‚¢ğª Ã€Ê & º¸ 
4ĞÃ€>˜)‚Q”HËKBÕI‚ ‚DH‰ŒX E `6XAWÁ©hd%£Ä0ê„æĞ (¬O$Œdœ• ˆdí
˜ H%¶#-±àÁÈ &	<…Ûd ‰QèHåÁ‰ˆ6WÆRx†dt{^•Gs[oå
çıK­yŸµ×Š/òg†gvÎ«X÷¯Åø~‘®kä…?>,Ó{p»ÿå:¶ı[uß\ÎÜ>‘‡ØOi?¡»xøÓÌ¶qõ+ïætçâîõŞ»©eÏ°x˜G·<ì¨‰úåŸØ×/õ}û—õ«ï­Ñë±¯ê:¼î^)"  S
ä¤˜£’‚ÌP EL“‰pwĞU0BB˜, êÒ Ã©° ÊÅ¥.Ğ)P"J‚ ¬áeÀ@zH0ú $(Y,KPBsÆ3PBto (²0 aÁ0 å	KÁep-x(I©š@‡€,Xa¾¾Ôß§~>w¹ÒóN<½5ùÇÏñÂõj¿¾W'÷Êb]·ôÿ>ÿë?ğmÏu»Èª<‹Ìm^Í';ZaïÉïÎå[½{?ß»±ì^Ã¸•£ß­&UÕ?º÷~ñ‹Íö ÷'j÷ÅË³g|ÿÄÿUÆÄİÚwï-òw:;pÇVÂê÷Ùòë¦–ı©sğÃ×ßÜ=oô×¯tí½ö7:³~æ]lıÖşå.Oî.“ñßÓ^Û[åø«]ª»/ço7ÜO×}ZÍóJÿ8ëh9ê£Kk*eğ=şõwÿvêç÷öÈv0m±}¬å7Ëÿñe×ÚÏßÀõwmxÿü(*…óø^á0x
@@3 ,UBªOê2èƒš”0 ¨+<Ø¨H€œx†AEB°D$\`ŠB ³Œ$D4„1„vT@ğ ¡M(b0Ñ½¡ˆ#…"‚¡$ŠªPÔ(Ğ!Á´…ÁdP 5TTzÉ`
E‘8" h
q÷2n´¿£}ÿ
õkJíé{L?+î‡_şO~n»Gş;M±mwßü‡M}iƒõ½jÿyjş×ø÷`}o¶ªZû€¿{oí»óÏ*^f_0³oY7Tô‘™ÿ÷Rè†Lf4èeæßÛ3Í»—ßß³ü/ëïøE•ŸıÏÜ¸Qßò¼Ô_«€¢@0 €I(€ (AP4šD€¤M,H8 „ Àb@%Hò‘§0‹@3€`4ğD
B>†ôBàƒ+«šK)$ ;€€‚@ 	A±E0'ÙJ"@ªj™¤‚¥‘‘¨Oä „tTL(”P$…†Ä³ÑHKB˜¸ÍŞJĞY-A"d„˜àN8Dà‡8!È%R,Õè°!a4GÃ¦— F(²g4!
 ¹ˆĞP#6¶0± ]Ê4T±RBbU ÖBQMğğæÌ
Ö`‹‰¹w?ûçé³ÿãŸ¿vımtÿFŞ–gÏº«ü/ _ï›ZîZ8ïÏß¾z›ª'öz4ëü×vño»|ï³}ı~ï¼BİŸöi÷/‚Ü~×õL¨øş-ôaé²_GívÖ¾ª€†3Gî{%ïì[ß]û—ç¹Ù»m>x;v§²xæ³G®s‚@¡àEŒÔä^Ó ˆ2d@t°1‡æƒÖMrt‰*ÑUÚG!úÄó ¾çX!à	8…Z@A á  @€DsÑK (è 	ùQ‚3‚ˆÀ,PFƒ¿
@0 @aƒ¬F‚@„€ ‰F$,HŒÙšE_œ>jüá\î¯3óXî?ÿĞ¿?qæ­ÕÍû¬/ö'ûÀz®(|ş[ÁÓÿóÇV£ëÜÏÿÑ#oïFÇ?ª§_t©09¿£Æ»n´R—?¾ëìú4®Ù6÷óü`¶j{éÓÿ·­rlû<úøüåÑµòÌşÛ­>øÛùæµ÷ßœ%~×[ıM³Ÿ>¡ˆmöë=Ã©øoıòÔ²œú•7¯Ÿşï×q-‡¨ò~Ï\ğGéê8ÎuÛ°¿³»wû6ğçûyÜ÷{uı–3%Ünò®ö¾ùpsşuÔŞàßfüjÓãGÖİr–gÁÀ~ÿ·:õëz¥³ßøí½K5t !µĞõE 	IÀ<^“ @#!+H@Á@V p„(^Ì¢€JQáLU#‡,¦èx€dNè/Øx% f ¹€²
IŠ! … „92È$Ä$PDP"À’8‰L¡ˆ2z@Aœ¨;°\ğ”¾vZšlS¶Ç‡´şßÎê÷/Ó]Şïl’Ùw}{ı×}ÿÿò­×÷¿ÿ¼’¶Qsµñï°óÆü§Ó7Û$İgûçÊù/±-ÉÓö¨¾İ~¯ëşG°ıõ¼s•™ğ¨¼}…Ÿç‹4ÿ"—CésV‹¿yë÷e¿5·ê·õ±êy>):¾ùP÷óÇ°ˆLPJ° @Ñf0‚{˜Q1'V
 7ØÂl‹ 4²¶ "JVÀ€€TQÔtC*\@Ñ„c°'˜G†j0Áò (T1Q(
© T¨h#”WA¢a €IrŒ‚‘àŠìºp‘Á°)¨Ã	a	Y
@@š”H €ÂŒ°€€D„E Ô6MƒpE…ì<Ù9V""Í	äj$(N`$ Ñ QA¢	 Œ	t à JÀA
8£(@ABI¢I		À`PaB¶é……ïî-áß~%yŠ÷;sÙó‡Üï¶ş~î­‹ûnÔË/åú÷1Îï§Ù9şuø6´X]ùÓ‰ömÒóõ±üãn»~¬'>ë${ê½ù«Ê½®.¦ùG¾?¯ßğ»î"jmÿfûvßŸç‡·q÷¨ÎN÷×õasÎöwıÍ3”A¥‹ŠQ Ğ£P="”2	Z„Úò1	Fà!„Y- “¢ğèĞAœ8‚™t ›€x‘Q4 P€@ª,VB!4‚€±H#! dˆ†B1 2{9-@Nº`2‰$iI
4#Â ‰ØÚ˜ª’×ÿş†ø¾ª;ÁôôĞö™xış©Ñg ŞVç)Mñ¾ÿÕúlØĞöO}‰ğ«ï×6¿µûïå”ëˆ‹õ\Ág÷_İùÖz™™'òÿØBsñ÷ïû»"Øåqw/G¾7'î¬ñ¢÷šQgro9$l¬îï}Cò‡½×_çŞíuW}í/Zw‡õWAÙ/ßÄ.öy˜±ãC†ö«n~ïŞ.†.¿İ;şÎ§â9Ê<]×|ÓMú>_Õ®yÓ—õÿ:Iòô»:mòÜ½şÿ§ï–Şsš¼>¹ìÑp}Å§õF.çÜ£ÿ§;ü¯WşŒe£¿ÙgîµZ}Ö¶êË~ášç®?y-°Y|sg@  I‚'IEø„EfKm+&@ 0iHLT(Á•´P…è0BAhm\À¶0(P`h9 C †åDd–	›¨BÈÀ5`ğA‚À p 	ÍB€b@ÉôW¡ LÎD
 Nˆ ­Ëüh{¬üı¶Bõİ1¾Vİùjüjëÿuê×‹úùû›/ûÛÊÇ×óMøçô#MŠÓÎxîİ÷Ï¶ïÙÕ¯ü£İº÷õùc×ò!ğá^.!À'üoÃ7°›÷~œİZ±2îñÌ^Ğª@õ÷eOàÇÖã¬>ØDtå¡æÔo¦aPBJ"ír‡U…$ ³@J)€pLˆ¹ä$BÂ/; "
&IŸ4¤	 (ƒáƒ©‚‘ ˜`Œ€ #BGdÌ @&„ÁÂ” 0  Ê‚@`+˜Œ @ÀP  ™aüÆ<€Rœ¸(@âKÈ[¨8`©s(8NaÑ! ` “PFJ‘Ûdˆ¡%"$hOh%˜4˜pKD‹…0*Œ»
Z Ñ
¡u,T\€(QËÄF¤I]
%9™€¤úôÄ°£x ” !DN`(
¦€,P8EÊıã#{ßù»wÎõãÿş\j½}¿ÎwOŞsöZèÉ×»ŸãôÉ·œuû~•ÁõïÚïc4Nßå¯ÛA÷”…ıùjæ~%ÖÖ°¿øÏ‡&›öuç7D“áßßmÊÿí¢÷WZ¥¾æ{‡ïş`Î¹wşyñŸÍÎí»2ò~è×³±ÃğwJ$RQªymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Mode switcher logic.
 *
 * @private
 * @class tinymce.Mode
 */
define(
  'tinymce.core.Mode',
  [
  ],
  function () {
    function setEditorCommandState(editor, cmd, state) {
      try {
        editor.getDoc().execCommand(cmd, false, state);
      } catch (ex) {
        // Ignore
      }
    }

    function clickBlocker(editor) {
      var target, handler;

      target = editor.getBody();

      handler = function (e) {
        if (editor.dom.getParents(e.target, 'a').length > 0) {
          e.preventDefault();
        }
      };

      editor.dom.bind(target, 'click', handler);

      return {
        unbind: function () {
          editor.dom.unbind(target, 'click', handler);
        }
      };
    }

    function toggleReadOnly(editor, state) {
      if (editor._clickBlocker) {
        editor._clickBlocker.unbind();
        editor._clickBlocker = null;
      }

      if (state) {
        editor._clickBlocker = clickBlocker(editor);
        editor.selection.controlSelection.hideResizeRect();
        editor.readonly = true;
        editor.getBody().contentEditable = false;
      } else {
        editor.readonly = false;
        editor.getBody().contentEditable = true;
        setEditorCommandState(editor, "StyleWithCSS", false);
        setEditorCommandState(editor, "enableInlineTableEditing", false);
        setEditorCommandState(editor, "enableObjectResizing", false);
        editor.focus();
        editor.nodeChanged();
      }
    }

    function setMode(editor, mode) {
      var currentMode = editor.readonly ? 'readonly' : 'design';

      if (mode == currentMode) {
        return;
      }

      if (editor.initialized) {
        toggleReadOnly(editor, mode == 'readonly');
      } else {
        editor.on('init', function () {
          toggleReadOnly(editor, mode == 'readonly');
        });
      }

      // Event is NOT preventable
      editor.fire('SwitchMode', { mode: mode });
    }

    return {
      setMode: setMode
    };
  }
);
/**
 * Sidebar.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module handle sidebar instances for the editor.
 *
 * @class tinymce.ui.Sidebar
 * @private
 */
define(
  'tinymce.core.ui.Sidebar',
  [
  ],
  function (
  ) {
    var add = function (editor, name, settings) {
      var sidebars = editor.sidebars ? editor.sidebars : [];
      sidebars.push({ name: name, settings: settings });
      editor.sidebars = sidebars;
    };

    return {
      add: add
    };
  }
);

/**
 * Editor.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint scripturl:true */

/**
 * Include the base event class documentation.
 *
 * @include ../../../../../tools/docs/tinymce.Event.js
 */

/**
 * This class contains the core logic for a TinyMCE editor.
 *
 * @class tinymce.Editor
 * @mixes tinymce.util.Observable
 * @example
 * // Add a class to all paragraphs in the editor.
 * tinymce.activeEditor.dom.addClass(tinymce.activeEditor.dom.select('p'), 'someclass');
 *
 * // Gets the current editors selection as text
 * tinymce.activeEditor.selection.getContent({format: 'text'});
 *
 * // Creates a new editor instance
 * var ed = new tinymce.Editor('textareaid', {
 *     some_setting: 1
 * }, tinymce.EditorManager);
 *
 * ed.render();
 */
define(
  'tinymce.core.Editor',
  [
    'tinymce.core.AddOnManager',
    'tinymce.core.dom.DomQuery',
    'tinymce.core.dom.DOMUtils',
    'tinymce.core.EditorCommands',
    'tinymce.core.EditorObservable',
    'tinymce.core.EditorSettings',
    'tinymce.core.Env',
    'tinymce.core.html.Serializer',
    'tinymce.core.init.Render',
    'tinymce.core.Mode',
    'tinymce.core.Shortcuts',
    'tinymce.core.ui.Sidebar',
    'tinymce.core.util.Tools',
    'tinymce.core.util.URI',
    'tinymce.core.util.Uuid'
  ],
  function (AddOnManager, DomQuery, DOMUtils, EditorCommands, EditorObservable, EditorSettings, Env, Serializer, Render, Mode, Shortcuts, Sidebar, Tools, URI, Uuid) {
    // Shorten these names
    var DOM = DOMUtils.DOM;
    var extend = Tools.extend, each = Tools.each;
    var trim = Tools.trim, resolve = Tools.resolve;
    var isGecko = Env.gecko, ie = Env.ie;

    /**
     * Include Editor API docs.
     *
     * @include ../../../../../tools/docs/tinymce.Editor.js
     */

    /**
     * Constructs a editor instance by id.
     *
     * @constructor
     * @method Editor
     * @param {String} id Unique id for the editor.
     * @param {Object} settings Settings for the editor.
     * @param {tinymce.EditorManager} editorManager EditorManager instance.
     */
    function Editor(id, settings, editorManager) {
      var self = this, documentBaseUrl, baseUri;

      documentBaseUrl = self.documentBaseUrl = editorManager.documentBaseURL;
      baseUri = editorManager.baseURI;

      /**
       * Name/value collection with editor settings.
       *
       * @property settings
       * @type Object
       * @example
       * // Get the value of the theme setting
       * tinymce.activeEditor.windowManager.alert("You are using the " + tinymce.activeEditor.settings.theme + " theme");
       */
      settings = EditorSettings.getEditorSettings(self, id, documentBaseUrl, editorManager.defaultSettings, settings);
      self.settings = settings;

      AddOnManager.language = settings.language || 'en';
      AddOnManager.languageLoad = settings.language_load;
      AddOnManager.baseURL = editorManager.baseURL;

      /**
       * Editor instance id, normally the same as the div/textarea that was replaced.
       *
       * @property id
       * @type String
       */
      self.id = id;

      /**
       * State to force the editor to return false on a isDirty call.
       *
       * @property isNotDirty
       * @type Boolean
       * @deprecated Use editor.setDirty instead.
       */
      self.setDirty(false);

      /**
       * Name/Value object containing plugin instances.
       *
       * @property plugins
       * @type Object
       * @example
       * // Execute a method inside a plugin directly
       * tinymce.activeEditor.plugins.someplugin.someMethod();
       */
      self.plugins = {};

      /**
       * URI object to document configured for the TinyMCE instance.
       *
       * @property documentBaseURI
       * @type tinymce.util.URI
       * @example
       * // Get relative URL from the location of document_base_url
       * tinymce.activeEditor.documentBaseURI.toRelative('/somedir/somefile.htm');
       *
       * // Get absolute URL from the location of document_base_url
       * tinymce.activeEditor.documentBaseURI.toAbsolute('somefile.htm');
       */
      self.documentBaseURI = new URI(settings.document_base_url, {
        base_uri: baseUri
      });

      /**
       * URI object to current document that holds the TinyMCE editor instance.
       *
       * @property baseURI
       * @type tinymce.util.URI
       * @example
       * // Get relative URL from the location of the API
       * tinymce.activeEditor.baseURI.toRelative('/somedir/somefile.htm');
       *
       * // Get absolute URL from the location of the API
       * tinymce.activeEditor.baseURI.toAbsolute('somefile.htm');
       */
      self.baseURI = baseUri;

      /**
       * Array with CSS files to load into the iframe.
       *
       * @property contentCSS
       * @type Array
       */
      self.contentCSS = [];

      /**
       * Array of CSS styles to add to head of document when the editor loads.
       *
       * @property contentStyles
       * @type Array
       */
      self.contentStyles = [];

      // Creates all events like onClick, onSetContent etc see Editor.Events.js for the actual logic
      self.shortcuts = new Shortcuts(self);
      self.loadedCSS = {};
      self.editorCommands = new EditorCommands(self);
      self.suffix = editorManager.suffix;
      self.editorManaşü9¾ñÊ-3Ÿ]ÿúïŞïGï“ëÿÿ·^Éì}[7Í¶ÿwúOßûù}oR_æşùsmûİ>ûíqšw»×Úü}]ùK+ûú›ngwëçÿûÖÿ¯?îyú_Wï_¹íW¿Ş—Ãîè¿‡ì;ÿüşœPûaôûÇ@ùwÄ÷÷ö÷ı_ÿ[ÿ;/§ı<¯úçcåŸıôßç]×ıüŞ]·»Uÿ—óMÿ4²ş’vÜßò5ÈaêÙg/ï†óµ/Ùª¯çs­÷ïnc›ÿfuâW¹’ÅÓîÚ§ş÷k3zİçÇœ#Í,ïë=í³Mú÷ëÍ¯ñ--ÖzÒ	»îÿròİô¹Ë©Ç_6×êş×cYº¹ûÿoãÿF54şË5´^/š:O_<Û}¸šôŸ°µ°ßCG£fËÙîMö~/¶ªöÅGô\3Êø±7şîó
Íaÿ´×-{>õ‡öpó~úö½aÿÎR÷¯½¦VŒ·ÿmn×ñ]êöÌ@GÎsşıû©Mˆeqoâ{û~ûÿÓ¿`şïß}ÿıÿìû[æøâwP÷÷ıŞwımò«o~®$ë»w·ìş/Î¯âYÍÿÌÿ-º	mÿYsŸ×ú3üIŸø××ºWòİúî§=·öúïfûç{u_ÿè©~×NŞıÿäş«÷ûûßíxç4ß×û÷¿ß^ïGÿÔëtïéûÿ7çÙfıôÿï­»TÔ?=¾OÕ5íG÷uşY<İLyì“Ü¶áß³öÖß?òñÿêßÿïÍ¤>3Å´{7øw—£Š'˜É{w•Šÿ·n­ÎOıdz¯•9nìüûÍfØÿ¾Ú™|ßE÷{ÿ—¼
ğÃXï·/”ÿ{êõ“^”¿G³ş5şußÿ¢Ş×~+ßóßß¾ÿåŸ7n¿¿Ÿõÿù±ÿ¡Ìüşjëÿî·ıçïôÍjóçºşïâq²m£¿êÇïá;ÿíş-}æ½S?·\(»u»Ÿ™÷÷ÿ»v{ÿ;ÌWuè}í9ÿÙ÷kãŸ‡\«½÷”yeùù›·óŠÌ½•çİş!ÿWêOÏŒµõ»½¹¿şNuø¯“_îv¦om¦õ¾)ûxŞ_|ş›£şıõzFyÿ{æ¦.bK_öêäŞÊå9{ùÜû×ş=øõyÔSî;NpoŞ÷îZ©?SÊ½ıïW¯Ó÷9›eŞóóÿ´Šş¿ÈıÏºøcœü^½}ÿÿXAæë“–ó¹ÚıFÕøö¶åvg|±Ì)¯QvõŸ´“ı¥dÍó½éWÙ}{Ø'Uú{Å>áì_Û_ıÿZ¼ÜŞÓ7¸s·Û›måŸÔNËÜOı÷¨×ü¿ıoÿ†¿'úÏ™Mvå_œû»÷]ùW»4ãõù¨·¼s]üdÓ˜o¶ûÊînş4{iuãëêß¿üWí³Cÿw¯¡ı›¼ç¿óòõ¼«ış:\ß_s¹¶ñ„_\êëKz¯}ÿú?¯õş÷>=1çvgÄxqëg·å³}—öü÷µ2?ïu>ßÑ½ÔÍş?ùş#•üış[Îø¡n×¸µ/ßõü­ïãÖ?ĞÔm‘Üñ,÷7ónöÕşYì×5èŸŸûÿß<Ïÿ5şwô÷ï¿¯Ÿ÷çÿï¯ßÿoùBS¸Ø[¯{eïş»Ÿ¬®”J­ÜŸ?LUúû«¥w½ó>¯ùlîšŞÃS¯z¯ÿYV=ö÷>O²Ï÷Ov¦}â®»Ó/¥×ûøïuÂƒ®oØ¿÷æÕu»2³v>tóÁ_ù]fÚ½RäOn}ó5õöiûÿ}»nÚíD´ù_ÔşC6ovíİïõín-:S/÷6sì£óŸşçò¯'»Ïñ¿Ù^ÿõ§şgû‘›;®ÿ¼£äÓhæ«ø)LêWUï1kí»gí×ßëñ×+øÛÛ¯›ÛG§ÿŸ'Ò½ûGWC¸¯§õóèş­İî§İ·O7ïııS­İwµqëÿ“Ûç<ÙÅÃ^ÿ?ğ#û¯ï¿–vïW–ú\0ÏŞõŞŞü‹õúCıâ›¥¿òîTßÚw^×Ÿ¼_OìŸÚmÏı	â(óû:ü½õÉû¿ÿ\pGØß¸gâïÃ4ŸŞ®+ş¾;Oúk6½û\«Ìß¯Ûƒõs÷ÂJkŸ~[õ$'›iköÏkZ^¾#èÉ¿ş½;éèß±_ûVĞŸ#>‹§ûV=uöÿ÷²§×?¥öãüüí\³ƒo2{–_öÜÆæ7¾ÿ„†ıq~×yûuÿøÿ}ûÑ~_Ë=ßÿOİ_ûºmÇòï¯ä¿ín×{¾­ÿSı\ÿş›ÿMînş»Ş}ß¯½ÿûÚå{OútÙ~¿ËÿöÛİ÷ßùöàşÚnûıÔÿ5UßbŸÔO{üŸ^ì½îåúïË™ï
úàğ[ÿ£Ò2¹¹­÷÷oûŠì¿¼5´ÿy¶wv¿Ï÷¾ÿ?óŸõï·ñØ·tûçúg®yïóûKğ=ÿËÿ]ÿ³Uÿ—ıßÛ\{÷út=ã¨¥=.ßwÚ·ãÎmß§7òÿÙyù·ü÷¿eş\{üovßçú~÷êşû'´móş»ÿÿù™œöÚûÿ·š“Kgªû?§w¯ıÕÉ×÷ï¿/¿÷ºq/½„7êßÆmJŸ÷fqİïğ¿Meÿ¹õ×?Ïï·ÿô´6û£ïgEóæ¬ıŞıĞ£ÏöÍ­/ï¥ï]»ßo›Ïº¿swÕ>û÷û»÷ÍÔz‡_&Çÿ³\ÃJ¿ÿ;óù£ê·ıÄÿdŞİfßÎ.îôø½Ş½æŞ§¬ûTÿzÿ_®¼ú>~±µïe?ßôyk<xôŞxf1ôßÏîjæ›»şV¶7ÿwûß|ï÷ãWÿ½õ=ë÷}¶O³{N¯Ş»–¤ãã¾&ø]ßÿXï÷²ÛıéÕ=§^È?Ûø¿Éèİ\¥Ö_t×
Ÿ¾‰}/Y}Íù?w{ŞzËõıÖ|z}öíJ²{ÿúÿÿï…ır‘×~én$é)/÷¯×ÿ÷köş¯h÷¶![³Î»Ó÷OïÕÿÓæô½ğúûŸŞg×‡ë÷¹AÚ°êÒM¦»ÍŞÏÊ¤²ìçğ÷y­÷»ß³™U÷áu›­\L„ş\‹U¯7]ß4Í»/^¶TÙ‚×/ú³Ób¹)…g	÷·|$Eö³½š×v<[mÔ‡ûõ|¾Ş×Ú7÷ğÿüû¾íâ-Ç¯Ö_O+¢kßçñ;t«¬Òxß/Ws•øşkÚ—ôí·î}\µ»ƒßóÙÛĞúÅİ¬¾õàÚ¸/ş×û=j·Oú£ÿıáŸ?H|Ÿ‹Üš«ü¿²ñ0™ê£{mt¾Ûôò¶·>[şĞØÿÚê»ğÚyÉısÏû»âyş½6?»ú>7¸½ğ·çİ?>ºö›°äkr"¾–úïÃ|æÿ%·ºùwsƒëıöÙúı›ÿëÏÛÅş¿ø/uı7ßœ¿öş‰w÷üŸÿIoØƒòí?Øm.ç<Ç»Şğ>Yú˜ÏrÿuÙ/ïşËßŸüWºm¿ì_6Í>á½ÏgO?wwWgã™ek¿İ~õŸ“bş!;Ï[5×ÕÕlŒÿ•#ªù/’–û·§áº{É›Ûü-³ÿ¯o½»¿>6]ßgi±ş¿w¢œ[ÿı­~vì¿ç}cŸ¯vŸ}üÿoùÏË$÷¯ßï~}ÿÙÊ?ÏgNU©gØçƒÂÔM¹,¤êóÿÿ•°ûè¶/Ÿ¿2İÕk?.·†eİ{¥|ßªÿ0˜·Wÿÿ^_Ü³½û™_9ì[ï¶¿ø=ú3äÿ¿ç·íWbo_¥ò¼ÿì½úçşó÷Ûç¿×÷îª´ûÓWórT¸êŞ•}s[S7}ÿÎ—·¯£ÏüOßïª¯¼·ÿğWŞâ­ãóÖ’Æ¾:y¾îE3ìõWÌhoÛ¿·_ÿûs±ì)UxuÛø8©Óç³¿ô©ç»şÏ$»7?l2ûóí·Çú?bÿNÛ×ªvÿïW»·®÷}:óü³¥Ï¿ßÈ×İ|·Îu~“–/ÖúûeÔzß\íÊóö_¿ëfwBV»ACŞİæ¼áÉùç[%ïòİß'½…²–)ÖeêË°ËİîşÚ¤Iôç_ÆzïnÙóçö{úÇ÷¶Ÿåo<ÿ÷Z¿]°Şùı=FŞ¿™×›OÆ¾ö×ÖŸİQì”yÎ[%åòz÷Òø‘÷¡ç[Şkçü¯(÷’Ÿ»óï«>ù¼Á²ÏµzÇÏüÛşÂ•põJÏ¹oïÏÎßãÿùß—ôúëèúû÷wå¿Ü(ıkşı·ÉúØUºÿïùqıúå{{—¢Wi[vçœúÿêØ5ßÿ/Gø—Ûş¿ûó¿™øà}—~ô7Nşÿì¿Şiş§Ò¿Oì÷]ş=ö¯ªäóÏ_§•=ïË/ïÿó²Ïÿ½?¦~õßkú{'íHßcÿ‘:µØ=i[ÿ¶•³¹ó¼WõŞÿ¾ÿ²Œƒ³ÿæË©)ÏßNï6³ÿåéü>²ş?Übœïu®ø»Ôuéh?Œ•éŸ¨]ñ¾¯-÷UŸûß&nš¿Ëê¿o3(çöÔ§6-ßö¿ÿ†ïf¾ßã-Ï¾Õ–èßøüş›šq¦_«:Šmm^î^‘§¤ÌW¶¹ç:Ït¹ó×¿ŸÏ?9'ï³¿ósìò<z¿×Íe—ÅÜ_º'Oö·Ş¬AwÁ¾çöç÷ÿNıoÉõÿ¼]¿è’nYÿ›Íšoõ!]<ÓSöÿkû9æ¶ğwß¼š¬şŸëÛX÷×ïŸ<OüÿÏÜ÷ó~­”·W÷*/ïK?8‹…êSOksÑL¹õœíoÃ­®‹YÂûıéÿŸëMûµ_ïs¾¿§?çWùV~Î¿×MŸ}® |ò¯½›¾˜¼\û¸ÿŒÊÜµ¿ÿû_)Úúİíÿûõß¸\ßêìû^sÜòñ*­2¯½ôgôÿ³ût~Ù{K~¸>êö5¾:wØ^!v'Ó?zÓ“tBıÛíÓ“
"[¿°GöåÙ–rü,öíù}M—´İÿıåmOïíí¿¤÷ìæîõeº~‰q-óÙw½›ì5ùô7ç¯cÎùİõ/lÙôD{ö}~ı­ş»œuÿ­»÷¼ûµvíŸ-+ÁçZ*÷±ÒºÛöüì´´z›ù­ÛºêÜØsë>gÿ]}øoÖàß¿ÚÊíıË÷à¼GîûRóı{­Ÿ[ÿß»İ¬oNûëw›ãg¦vCyı+ï¿~ÿÄqÿ¼ú‘ãûâÛòëL‡‡éåîŸÿ?İÿ÷ÿöÑÿå¾-om—ùŞ¾¯ë—nŞ–·>ß:×;ó³2æùÍŞ¼?]nŞù©ÿÔ±oùü×_uïåe~û?çêŸ×¯ùÖùËß?™÷„ıÏ¯UÎy«·÷ïú¸·ø¯Æªîƒ¾ßq¾Ï·êŸÿİ~Çlö±±}÷^3}>ìÏç½~W\š±ª×%ÿxƒ¡ëâ}{Z[úÃ¾©|¥¼;ãS~à¿ÚP½ÿŞûIn~ßˆ'şß¥œğ¶×îFf}nVïwv|³NœÛá7ó_·Ù}7WbéËß¸{9×şw¾SãUÆ?®?6^Õwëv¿İ½ì°OŸï¯ë%aù*Cñ_¹ß>;£&wùß      },

      /**
       * Executes a legacy callback. This method is useful to call old 2.x option callbacks.
       * There new event model is a better way to add callback so this method might be removed in the future.
       *
       * @method execCallback
       * @param {String} name Name of the callback to execute.
       * @return {Object} Return value passed from callback function.
       */
      execCallback: function (name) {
        var self = this, callback = self.settings[name], scope;

        if (!callback) {
          return;
        }

        // Look through lookup
        if (self.callbackLookup && (scope = self.callbackLookup[name])) {
          callback = scope.func;
          scope = scope.scope;
        }

        if (typeof callback === 'string') {
          scope = callback.replace(/\.\w+$/, '');
          scope = scope ? resolve(scope) : 0;
          callback = resolve(callback);
          self.callbackLookup = self.callbackLookup || {};
          self.callbackLookup[name] = { func: callback, scope: scope };
        }

        return callback.apply(scope || self, Array.prototype.slice.call(arguments, 1));
      },

      /**
       * Translates the specified string by replacing variables with language pack items it will also check if there is
       * a key matching the input.
       *
       * @method translate
       * @param {String} text String to translate by the language pack data.
       * @return {String} Translated string.
       */
      translate: function (text) {
        if (text && Tools.is(text, 'string')) {
          var lang = this.settings.language || 'en', i18n = this.editorManager.i18n;

          text = i18n.data[lang + '.' + text] || text.replace(/\{\#([^\}]+)\}/g, function (a, b) {
            return i18n.data[lang + '.' + b] || '{#' + b + '}';
          });
        }

        return this.editorManager.translate(text);
      },

      /**
       * Returns a language pack item by name/key.
       *
       * @method getLang
       * @param {String} name Name/key to get from the language pack.
       * @param {String} defaultVal Optional default value to retrieve.
       */
      getLang: function (name, defaultVal) {
        return (
          this.editorManager.i18n.data[(this.settings.language || 'en') + '.' + name] ||
          (defaultVal !== undefined ? defaultVal : '{#' + name + '}')
        );
      },

      /**
       * Returns a configuration parameter by name.
       *
       * @method getParam
       * @param {String} name Configruation parameter to retrieve.
       * @param {String} defaultVal Optional default value to return.
       * @param {String} type Optional type parameter.
       * @return {String} Configuration parameter value or default value.
       * @example
       * // Returns a specific config value from the currently active editor
       * var someval = tinymce.activeEditor.getParam('myvalue');
       *
       * // Returns a specific config value from a specific editor instance by id
       * var someval2 = tinymce.get('my_editor').getParam('myvalue');
       */
      getParam: function (name, defaultVal, type) {
        var value = name in this.settings ? this.settings[name] : defaultVal, output;

        if (type === 'hash') {
          output = {};

          if (typeof value === 'string') {
            each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (value) {
              value = value.split('=');

              if (value.length > 1) {
                output[trim(value[0])] = trim(value[1]);
              } else {
                output[trim(value[0])] = trim(value);
              }
            });
          } else {
            output = value;
          }

          return output;
        }

        return value;
      },

      /**
       * Dispatches out a onNodeChange event to all observers. This method should be called when you
       * need to update the UI states or element path etc.
       *
       * @method nodeChanged
       * @param {Object} args Optional args to pass to NodeC
R @ˆGÀA€0A•@ b4#0P»Dˆ—ÄbAŒ
QF‘À ‰8AxXI!D¨B•!§€yHVç Ht,g ‹ Ûx 9*LBˆ `E$(ÖJŠ€ RBF	,p`,@ĞˆØMüµlá’ÀõÿÍ¿ÇÒ¹7¹Ñı³ı?D±ì—Ç+;ÃçßÄ^ŞÙå Ü{õ7ç—òÖùÕ÷uîO÷·|Ïôå~ÇŞ®÷ıùŞùôxO:µ^ËÓÓ¸7×ÿWVöÌ¤6ÛVİÇTßùïçİúÇz}k›ï[Ô{?ş³µyòúÇT÷Yoï½í_éy©?ñQ•ú·úß¾}¿oö“óvÿ½ßtóêù¼Éy_®¶E÷r_7]õtzoÿ3«¬Øíï¶ïå	ß¶ºl'ß¿3Å?Yìã·{Öû˜Ç?v¿¿»ùøÃ­ÿ/uæï»wéw{s'Vç¢ËVHÛæ[ú¯bc»U  A}öÂX	š  ğè	E qb‘"Ò €$/’BQFh
 Ê E]6Å@DrÕ	Š†6 JD09 P  a©8ç Á@Ã$Ò"¤&@Ã¦#+I¡œx7”‘0£H  ˆ`jşXÎ/òË¦qs¯EˆéS?ºõ‘ïşú¬Wlß?q»íÊY¼sÔvşíóE¾ì®«Şÿ)|ÿÇ?åûœT±<éüâ¡D»õÇàÅ~¾P'zÙãm¶ùg÷Ù÷ïºßŠL¿u÷÷û–­ßæÔ…ô:Æõ¸-¿?ü¶].À««z­âíÿ-}„Á	!b—±ˆ¡@PdFBğAØB# ¸IH<!ˆaÂÁ  @ ºY¢hB@HPB H˜˜
„n€º ( ‰	ÁH˜·‰ QDGğ˜)
I	Àƒ ˆ´bµË
d AP@‘Â9€hEÁ²B@@ô B‹€ ˜I•
  I@‰æJ1".©D$Å0¡a÷@ $šR"0ƒ@À”C‘ ‹ „APÀ1´Cx¡†ÅT4²0°6Á Eİ‘ˆ"± ¸Vc  Z‹vp­óo_÷“¿¾å¯×_ïÿÓ3«ïãİûKş?]Ÿù?×ÿô
ÇşóaÖótm{óGú?ç§ùréİñ±OûJpdÿo§º¯–Oçw_I´hıoüïi»eq3wTv?ŠRæŸ;–mí°¨Û5©—/¿Äç}ò,úâÿş´vßİ”šë Ò(ä
$¢@€¹ T†O` ¨  " ÑI*f#BÂráĞ4 ‚ˆHDAƒË`Èà!Ğ ˆ]‰	D© @±¼ P@‰„‚8PtÉ#!Rh …	AF•ALˆPŠ¢R”Ò Õşï·¿ïó§÷ù®´gŸïÕ8ºÖR1ßœ›½¼ç~'{7^ï¶ÜŞ¯õ7İ,÷z÷µ®—Lu“XÏõÓ{íçÏşVó}Sğ›ÿÍlóı´Œ#ÿ×8Ãÿ\-w6;gëÿ?üîe›_=•É¯Ñ¾Ø6¯÷£¦‡f"v¨7·]óÍÎEOı†b«'|”Ûüò÷ßÛpİû~zŸ¥iéöØö×ûEŞ±¦şÒüåÛ‰ÿìúĞNòUİÿòQ×«¯Ç–vçú÷ÿOİÊ)²7HJ±õ|µ;ß/»ÕyÿŞKÙ>,ò¬[íïİï?ã]_ò>û‹Üß9;ŸıêßŞ¶ëq` eö…‘#@ À®¢8€"2 1€`(‘0Cª ÈĞ€€¢q¡^@f“(¢
”† ¦XÈ H°­@Œ @€¦ ,ÂDÓt¼†ë†$(Í9ƒ ¸@CD:¡ Q(1*$RDT ïöÛÑ~µõíïs/©;Zİ»2üŒï~˜\p}-M~q°ÚŒıóòš¥˜84˜nşKwØA¿›ıïÚÉò?ªûÙˆÖXKø|ãæMùúşª¿ÿ]{`Şù{±^ŒáVßNóØ]hz_?9Çmı-©¯Vÿ~;{Ä_½—»û{¹v~%f¯è‘a%0T& â¬¢q’!$*Ã 8¤"1A 0²„ÒÊ@ÑAµ°™ H+$HNr €!ä¹A…R
 e0PxB "(%.ÅH9 B'&LhxpC¦˜aCS‰ ĞEáJÈ€¡
%  Ü¼„ˆO ĞJÑ HÜ @G¢f4d"(–<Á` bç0 ÅƒáH£€¨ ¥ÀÆEµ®ÁŒ !KF: 21RlQ²Œ`™à•`Ò¨`†aˆlÇráLâ"@ˆR!†	 Af(„V”…5( THıy·"îuÜµ‹óş·wïÏûcÿN}U×íÙß÷Çç»½í·o"Ÿ#·?½µş+×zlïOce¿S~7šåñÒÇëÚë-àk[lç¡ù~ı\Å~èïãÒş{'ÂşçêQH÷×›¶q¡>oíkÍëõöÓ§o{ı¿ó÷~(*îÙeşáFû³:¤r˜eÔ9Íq)‘„Zğ\IP& ¤B6‘ áÀ‚¢$ z¨2C!
“2A+q@	œƒ
‚¸“ÀajLh,@˜ÂÀ    G°Do`\Abğ¥ÌËà  $1D$$ T`—€D€
0nø¿~^­=»–Ë2îs‡ÖxıÕEjßMzïÊ½åXµß*w÷gIqÙú3Ğ¿ñWÛ§8ç*Vë>tM½—ßSmêû¾¾P\ÍoYÿ:÷·³!ËÇ? ilCfİ{÷4Šğ÷šªú#ú~}ËıŸù§ò­m.İWûŸ8?|¹¿ó_ÿ”z›o1üÖ=Ù/¿]÷íùl§ß#ÿıÁ<nû5äæÙ%wâûrùïs¾å‡ôi´©¹íĞë7Ø?É«'§úë‡¿eÏë÷ÎÖõsÿmåÿ{—œ%½ô{İºÿyÚ=Ñ/ÿuùÚóïı§eså»$ÏTŞŞô¯Ç·Úş7v/qÔŞ=W»†£ä;(–T\"	*@„A5†ÒX <„PÌÑ0XN@C * Y„Àd 8/J	„&Q ğ@ˆ ÁšÀ Ád˜Ø^4G` )F¡rm h'R„R*š`'…X@BA«&ÊÀjà4°qX: Pzïïşş¾a<~ËìD™újşÏ;·¾/ï¹q"áı×şß/İß{xß™ºº™ÇòÎ»ïµ-Îµ_Ğ÷è|‡Ô×kıâ~£ï÷}}ñ³.rş_¶êh^ë“İòım§õş-·z/ö×#¾Ü‡í·ßbõ©µnû}şO÷}½ar÷OìÚüBõ 
RŞGü Xæ"‡òÀ1FG Ê%–«›ºdĞzìPD%*IFEB¢r©„˜@AO€'"VÀP‘|@"² ‘åãÂ¢ €¨ÊÁ [T†˜¨ S0,‚ HA$d $ƒRÀ,¡Â>_@‘”"(¬@2!ĞG#¼ $Åi=á$Ağ'
àÁ•Dq¶Ó-@Ê‚ğ`  €ğÁ5pá”ˆ±•"¢ñÈB4
±H X78Ó@„Â3’¶mH´L†ÈRA DQ
È“„@‘A®Å•!Ó„ŒØ4HTAh·ª_ßw½¿o¢¿…Yíkş¯õ{şr/Û{Ğ©ÖÔ«M/fıÿòŸ=y‘l~Ûn~ù?ıU·¥×<â¥÷¥²·áéI|ÏS¯öß¡İ³*øÒ;ºEõSª#£°»~;S0üZeï\×¤í>qö”6~-çãybgÇ/¯±UØg»}~ßğ| !",@ĞŒ¯ÈÀ’ÕbVJÀëƒPìB¤PÏ (©M@” ™K((2Üa(€6‚ñp`ˆ)â( ˆ 
$ zhBÂFÀ%µaNÄh`„HT€Ã(DB”ˆ ¦0ƒ€ ªàïIz6UÙ:”.÷í>÷ö×Ï§ï	¶í¯g<µõ¶ÒŠ.ÿ‘şDlzÙ6³Ü&SoBoş%ĞNóÇñï|ìßVİ-oã/\;ñŸ»zw‹ÇİzÊÿig´É_»ûŸxw«W6‡YGhµˆx·½‚ëùúhŸÓúówTşúßÕŸ›s_b»şÔß¬åÊºô7Êk#¿ÕÕóòãD‰}ÏØ¯¡}m6×•ì¥‰ë{Ÿvsm¤¦{ø‡ş¾àJèû…sòşÿ´¼œu‡uLÖÿ˜_¯š›+Å®ÿ=¯µé-û§ßß½#Â»÷¿zê¿§¿oPø—şÃşy›~ÓÊn[ßoT3ı¦üız	`šE ;Ä"aè`2E
& Ç*F´ L <ˆ0€
@(áˆ‹)!P`€µÇŒØH‚† òP Âµn‘ˆ”  Â`Ø Ğn&a!’¡ ­b
  ãa(†Æ/c`:p† lß÷İÿv¯=CôüÂœ9şsÛŞß_-ÓëyB,î·€¯ñÏ±‡§uÕFß>®ël³Ÿ³«ø‡(ş†E¹§ü;ËoËF²3õˆÄîÉårÿ·ÓÿÖålùñO×ïdö}Æ·ïğ)’'Á'üwùü›?”ÿ{ß_®W=gk®ÔÒf©oòuÍªxÿ™dÀ"#Ì€2 bÀ @‚,Šˆ
± L
UˆË@ˆºIC‹ ®1 (D  ¢Aù ŠÊ† ÕÆ HaC‰-H(		G&F0ÀIî‚ŠˆB€D‰…ğ@œ Z’*% B“  dĞH7A R@° ÄW¨dáÎ˜ƒ°\€jL\
,¶ Š ˆ#	Š@õ–]b‚¸/` Ğ·@j—€ŠP¼PBEã8á€€åÈEºY‚	Ò&	PšEÍ …€×  Š‚ˆBG"T -bÁ Àf ) lıªï¿zÎ'ü}pÿaKc¹t?}{Ø¦şü¸gşåÃ^ö«!¿ñ#û¯ïûæK¯ÃñÏï$ïİi¯\ıgãñß©Ã‹ß+F¿ßm½Ÿşîœ«ü¶İpö­´»ß.ùˆÎòs¯3‡œÿ}ó¿Ö}ş_–?:¯¯Kğ]•tşO’İ16-Oø{ç‘÷ô§[ÍùÑ_?Ç†½âuÇ÷÷¶ıÁüİ­½h‚w·¶WÚÎ¿}¹d/Órö1–úõÆ“Ã>`mX½Ğïúçš•Óû_1¨ıdeùOÃŠ—2¾àU™Å~¨İ›Ÿé¥CTŞõ}®!bõ‡oå¿#ÒìôYoçõß¼¦·ò©·÷×¬ ‚R`ˆ¢€ ¢Ñ¢$›ôS‡Œa"Ğ=@ÃL Dˆ€ `D; ´	TI ¼ ÁS•¼
ÉÁÔ’ …à(‚Q˜HÙDE3è‘BÒa £P ‚	°(< ´Š0—Ô*‚³‹¨tT PX€Ÿ@ U@[0› p~¸1!b¶6*€Z˜rÇ@2p$0bK%) PàÂÉ¨0LPGÅ…¢‚‡E˜oâS¨ç ŒD! LÊ!7&Œt‘„&dÂÍ´Eku8
àõ  B°" d¬
H'¿wÔÑ;Ğc*n9{fš.ÒÕXÕDúïŸÿÂø-º‰Òİÿ×¤ßÑTÿ¢—ÖÔYø~&ºöWWh\.ì÷—ó}ÒTÍç\¿½jñÁï¡³9¿wÒRN$»{ãkw.&üíÓæu^3ı¸Ï3eÓ'SøÿŞÇ§ÿÁyx}åÿëFù­ı/]á™Á	  –Êg
@2LIÈm@«"`Ñ­€à]Â`$TÁÌè ÑÅMVP|˜@P˜d5 ’
±15 ZE0RGŠ4iù8‚¥Jà ‰rüi"@¢@eB¡F š°YØNˆ¨@…'dxˆ1‹Zí;qİ¹íßŞ¨Õ7ñ>âŞ×<ùùÿ”;(¨í¯§N‘¶N¿¤inùò¾·àğÒ{úy÷O÷ó†+ÇóÏú=?*·PP÷î~ÿç[KØïÿ{Şeÿ¼WÈÏ¿£ş—
füãÎë½w~éÃæß+{‡øk·Ù¯[öş÷÷ÛŒºî‹ÆÍ4­mX5ü©~×eü¹æj—ß×‚æõb€û¾½v³ç7Ë¼İßé5æ°Awï£¿¯¸İí2ï;G1ø•¼›ïÛÏDæ8>wz«Şï´şãù²yè¼ıÃ¾1×o›øÔ£°Ímë®±yã›nš	ë-Ùõğ¯Ósã÷qótÍlªÑ.	§ŸÎ›Sˆ&ºäfšhãh!M°DP„AMN(¹€Ô¦B€$è@üÆ±âRA©U¡lDŒ €ÂR0„”cŒ p@@À (Æ4AHT<@ƒ "èl7ÙàxÉhft‰`À  V ¥à7ê	WP‘	Ø  C†$»líŸ¯%¯ÿö]u(µJüÏnè …wßZÌ²€ÿ[gİ'_ü|uğú^b›¿é×Ü/$¦÷7Oçn¸6Ì»Úõ.w?!Üj¶—oßcz~ózïİÄÙÓ­ö³Îg}÷éœp³éÇŞ2ï>7Kúò¸×çï2‡ÿËÃd¿z¨ÅØ’ÄBPÔ€°Œ1"!˜40+6§;0a- b0®@Ä©
€"Ïu g@åîA†¼0*í¬Qu’H¤RU ¨T“gİF*Œ	à:ÁMRR
"‚Š ©
zŠ" ’@:òå²rJ- 5`Œ@áh0@6Ap(q£QC-Q
ü%Ø€Å8B¬XP! k ‚"ÉX*€""Å¨h‡4•@Ò"ÊÊ%DŠ)VÇĞËa\
 X‰¤ƒÇ	A1< ‰ zHwªD p&g`M¤0²eƒCx8 9FîÑ 9osos_[¯ÿ³/UÅ5×İ÷²7ì§,Í5µ¿Íïl·ƒtÿö)şË±3kÔxEĞ=­Øk“õÍU07ï¿şóZ\÷Zø?_’â|NÿÿÊ˜²»´ÛçŸR<ƒXÎ×Âöõÿ§?v}ÿü|«øïıbk‰úugı³÷ß|gRï{ï¶­6nÜ¡ÜZªï&ƒ ) ‰N¬1 6 JèIC–HĞ(K˜ŒÎ"KÈ
 W¢p¤¥dr‚.H!†(  Ğ Á€Ô"›‚IB„!1€Ğ5€d‡ÍÛˆeLä1ÓaS„ …`#0`(a$Q&ùÕ²µ—­rï^Ò–s½.‚W«Ã¯Îîædûı`Oéÿèû$.yîm_?elK…T_$X”½ë+Z<ş:å“_´ÕãóªêÃÛ·'›ºßñËÄÏ¯~úÿËrª¥ÚÒ7~?z÷æ¿¡ƒ|ÍZ£zvå‘×gÎ¨‹ï*³÷çÿ¦cëŸ³E¯ÿ=®ö¿ùkßñïÃOá’VÉß5{óØö±–ôyİ‡ûgùóo=vÕß‡ß¯’AzãÉ{ø}ŸŸkŞEbhSûà~¹ô¼u^gÒŒ}9/ÿ˜^eç’»Yëvßk´óà:»»_™ßñ¹'Ì8~üî½*tÙú¦åîâ’7îçuı}ùBÿ÷Ş„TzPì„¡ Oè’Ğ8„I$#[•ˆ	T‚ˆ@b< ù$(VÁGSØ%—@!CX@Eä)5fÑ€Ğ†0Ã@dC3 ğ:Q˜…¨€lLEğ1 ëD€eÖ“PŠ&'uAHĞ+Ø	   ëöï=¯¿Ö¾İñËõ3½£•‡»h5‹ú~Ÿ/ø}UW?:şQ0ïçİÔ:-—¿6KûÓÛ{~Äw£úö¯p„Lúãó×¥ø›øc}:í—.;gıç1’õ?bË[íœU|ß÷ğüÄ¥îûÉlôg+şaÿ÷÷äGåµãég÷¢¿›s®>½@ 	ˆ	 !#ˆœ#@ QX0J †è 0X*
 tÀ  !àˆ@bÉ+ â,ğ€H@„Îˆ(Fæ¨R DDâ«‚íÃ@´°è¿$ €ÄKa’¤` ™XZ¤Z<à   0Gz+Úˆ!ĞB‚`!	FQ
ê°pàEC ÍÁ Ä0  D dHô&!LŠ±AğF‘ZğUASF  í¦0’Uh£ `YE á@¥Ï#QQ€Ñ¹P†9 
Û±\È2G!F)XËjâøaİ{°ÇÔDkÉÿúß¿ôÛŸôñ®ÜÇc_iüŞİGj_ê¯~õ…¿a0‡kıwtï¹Wõ|{~'M_¾{ÿ@<mr½ãaü6ßùl{éÍù)¬Ä“æËl÷½Tw÷öó™QOÑßÿ÷Ú?ßví]µÚ%xœƒSßÿ¢Äş¨?wÅÂ&IPàº"ğ…„lÒF[`q²K€ jÜ‚b‚Tà €ÍI€  ¦8CÀHàÈ'²80"
Ÿ!Ò° pâ"  C$*$´ ‡e‚=P ’`7ŞPª„h2`Æ$Òµz¥AFH6b†ªø|‹]şB_MíZ¹w>Áó-‰ŒÇeIv÷øë^{qÂ/Yê›u…®»|‰<· >«Mì"Ù÷oìûYN7fñé©=¯ùı'W½«æ£ô‡væk±¥ï÷vÌ¿²ØßKÖú’Z¾Æ×ëÂµ{‰ÍíÖæÿn¼^üŞVï{Ï|5Gæ{W+äw_—ÓÅæ;«¹¥Ö2öÂíé×ö¾¨Ÿ»ùñ%ÚÜ&É…M0Ÿı¿ÊC§Uf.Ûc—u«ºÍ
áİ_ZçÜÇ?ÏÿEÑáÏéÉöÌşÚú3İîÒ¸¿Ù½işïu¿]¬û¥ws[è9ïßõş¦#»Çİx?âŞ¹îTŞÿ>?ı›_#MÀÀ€!„ğ	Iã±&S ¡1üŞ>à‹Ršl@@.$J eƒ×$X Ö<"Ö:µ8	†¾ˆ qTicĞ¼j å‚„P(¢
)5B\r£!ĞTÀ4i`Mˆ GV˜È­¬Pu×R]ÿ·¬÷ıô§ŸÏ|ö[ûW=İ>Şv½××ş÷î²}l?ı<Ü^·ÿ-×~öŠœ¥î/DêtßÔŸ}âÏÛãR¶ãs+ç+ÏÏeÔÿ6ò>sÉî¹w?Oûë_³k-ûöİí¾Ûş:›Áwc“öëŠŞÏwïîî³ı´~çIîí÷$â@tŠa"@ñ|.AD!$a\‹qHÈ2Á òFI"@I’CÀ0LX©Ç€  ‚ƒT€ 0pÊŠ ¨‰x 
!BˆD"	¦µ£'@	 ª›p(¶a‚"ĞÁÍ2$ŒÀ¡iŒè`ğ{‡.J"‘Ã„@àq8&Á!I.› <ñ®.(ªÂª¿ }èl0  (ˆ-DRÍjú„‘!Hw€Ì0 –#p+‘’“/¤B£"ÄI± ÃB @ª0Õ×	F<1 \GØm¢R€E¦ <ğTY„‹gdÁÚ ŞmãÚÿ˜wOE¾Ní‘Ÿfâüuß’b=nÙ^4½i\üø6A¾^+–Ÿ¿ñíw—ßğ]ûVjãïï÷¾¼ú®şÖj*Æöm”7[¦{îÓ@¾›ÿìñ÷i4uwîÛ/i7w“ùú æõwkWûINÆÿ·*ûfmı¿8€¿Ä&ÿ·£»C'L\`c †S(	dA" Y"±	 Â O \Z %³8ød’`0r6pÁ˜ H‰ˆ ¨ìĞˆB4˜=UÍ H“†8áWøR‡Q‚– Mœˆ2 EBHB› †„!  !‹!1‘(L0„hlƒ½ûJ¾İ&}ùÿ2[-²ÿ¡îC¯ïÊ­o×¸¿·~ûùçOY¯ê?óıïBâúŞÿˆ©#iåçã÷Ïï:{÷'ş•ÿŞ’–}Ø¾óöûùoÇx-+6ííßuÙÛÙó÷…nùrôİ¾6%D^ş]¤şÖgïCQÎ´§¥yÚĞ½!øg¼Ónf¿­Ğúë'³Üİiö­ª—]©/DW#>ÙûM±wÆ2ïÏñ=Ó¹´­«öº¾N[¾AÎ,ûæñK­AmísWıZş=Í¶*ãy?ğåÜéç„w÷»?ıïB÷E¨~SŞ÷¶Ÿßÿ’õû8r›áù“GĞ–şeìqßu T\vËâ #p‚fJ4  æb',@€	@J­Mp°P!xB<'Ä¬Rx¨d+QVa=Ÿ’î¢{á‡»Ê¡Z8ÜâdÔL‚2$4iDƒÂP°ŠÑª†)(	¨
= €Û¥"€ŒœP„CŒ    {
        this.shortcuts.add(pattern, desc, cmdFunc, scope);
      },

      /**
       * Executes a command on the current instance. These commands can be TinyMCE internal commands prefixed with "mce" or
       * they can be build in browser commands such as "Bold". A compleate list of browser commands is available on MSDN or Mozilla.org.
       * This function will dispatch the execCommand function on each plugin, theme or the execcommand_callback option if none of these
       * return true it will handle the command as a internal browser command.
       *
       * @method execCommand
       * @param {String} cmd Command name to execute, for example mceLink or Bold.
       * @param {Boolean} ui True/false state if a UI (dialog) should be presented or not.
       * @param {mixed} value Optional command value, this can be anything.
       * @param {Object} args Optional arguments object.
       */
      execCommand: function (cmd, ui, value, args) {
        return this.editorCommands.execCommand(cmd, ui, value, args);
      },

      /**
       * Returns a command specific state, for example if bold is enabled or not.
       *
       * @method queryCommandState
       * @param {string} cmd Command to query state from.
       * @return {Boolean} Command specific state, for example if bold is enabled or not.
       */
      queryCommandState: function (cmd) {
        return this.editorCommands.queryCommandState(cmd);
      },

      /**
       * Returns a command specific value, for example the current font size.
       *
       * @method queryCommandValue
       * @param {string} cmd Command to query value from.
       * @return {Object} Command specific value, for example the current font size.
       */
      queryCommandValue: function (cmd) {
        return this.editorCommands.queryCommandValue(cmd);
      },

      /**
       * Returns true/false if the command is supported or not.
       *
       * @method queryCommandSupported
       * @param {String} cmd Command that we check support for.
       * @return {Boolean} true/false if the command is supported or not.
       */
      queryCommandSupported: function (cmd) {
        return this.editorCommands.queryCommandSupported(cmd);
      },

      /**
       * Shows the editor and hides any textarea/div that the editor is supposed to replace.
       *
       * @method show
       */
      show: function () {
        var self = this;

        if (self.hidden) {
          self.hidden = false;

          if (self.inline) {
            self.getBody().contentEditable = true;
          } else {
            DOM.show(self.getContainer());
            DOM.hide(self.id);
          }

          self.load();
          self.fire('show');
        }
      },

      /**
       * Hides the editor and shows any textarea/div that the editor is supposed to replace.
       *
       * @method hide
       */
      hide: function () {
        var self = this, doc = self.getDoc();

        if (!self.hidden) {
          // Fixed bug where IE has a blinking cursor left from the editor
          if (ie && doc && !self.inline) {
            doc.execCommand('SelectAll');
          }

          // We must save before we hide so Safari doesn't crash
          self.save();

          if (self.inline) {
            self.getBody().contentEditable = false;

            // Make sure the editor gets blurred
            if (self == self.editorManager.focusedEditor) {
              self.editorManager.focusedEditor = null;
            }
          } else {
            DOM.hide(self.getContainer());
            DOM.setStyle(self.id, 'display', self.orgDisplay);
          }

          self.hidden = true;
          self.fire('hide');
        }
      },

      /**
       * Returns true/false if the editor is hidden or not.
       *
       * @method isHidden
       * @return {Boolean} True/false if the editor is hidden or not.
       */
      isHidden: function () {
        return !!this.hidden;
      },

      /**
       * Sets the progress state, this will display a throbber/progess for the editor.
       * This is ideal for asynchronous operations like an AJAX save call.
       *
       * @method setProgressState
       * @param {Boolean} state Boolean state if the progress should be shown or hidden.
       * @param {Number} time Optional time to wait before the progress gets shown.
       * @return {Boolean} Same as the input state.
       * @example
       * // Show progress for the active editor
       * tinymce.activeEditor.setProgressState(true);
       *
       * // Hide progress for the active editor
       * tinymce.activeEditor.setProgressState(false);
       *
       * // Show progress after 3 seconds
       * tinymce.activeEditor.setProgressState(true, 3000);
       */
      setProgressState: function (state, time) {
        this.fire('ProgressState', { state: state, time: time });
      },

      /**
       * Loads contents from the textarea or div element that got converted into an editor instance.
       * This method will move the contents from that textarea or div into the editor by using setContent
       * so all events etc that method has will get dispatched as well.
       *
       * @method load
       * @param {Object} args Optional content object, this gets passed around through the whole load process.
       * @return {String} HTML string that got set into the editor.
       */
      load: function (args) {
        var self = this, elm = self.getElement(), html;

        if (self.removed) {
          return '';
        }

        if (elm) {
          args = args || {};
          args.load = true;

          html = self.setContent(elm.value !== undefined ? elm.value : elm.innerHTML, args);
          args.element = elm;

          if (!args.no_events) {
            self.fire('LoadContent', args);
          }

          args.element = elm = null;

          return html;
        }
      },

      /**
       * Saves the contents from a editor out to the textarea or div element that got converted into an editor instance.
       * This method will move the HTML contents from the editor into that textarea or div by getContent
       * so all events etc that method has will get dispatched as well.
       *
       * @method save
       * @param {Object} args Optional content object, this gets passed around through the whole save process.
       * @return {String} HTML string that got set into the textarea/div.
       */
      save: function (args) {
        var self = this, elm = self.getElement(), html, form;

        if (!elm || !self.initialized || self.removed) {
          return;
        }

        args = args || {};
        args.save = true;

        args.element = elm;
        html = args.content = self.getContent(args);

        if (!args.no_events) {
          self.fire('SaveContent', args);
        }

        // Always run this internal event
        if (args.format == 'raw') {
          self.fire('RawSaveContent', args);
        }

        html = args.content;

        if (!/TEXTAREA|INPUT/i.test(elm.nodeName)) {
          // Update DIV element when not in inline mode
          if (!self.inline) {
            elm.innerHTML = html;
          }

          // Update hidden form element
          if ((form = DOM.getParent(self.id, 'form'))) {
            each(form.elements, function (elm) {
              if (elm.name == self.id) {
                elm.value = html;
                return false;
              }
            });
          }
        } else {
          elm.value = html;
        }

        args.element = elm = null;

        if (args.set_dirty !== false) {
          self.setDirty(false);
        }

        return html;
      },

      /**
       * Sets the specified content to the editor instance, this will cleanup the content before it gets set using
       * the different cleanup rules options.
       *
       * @method setContent
       * @param {String} content Content to set to editor, normally HTML contents but can be other formats as well.
       * @param {Object} args Optional content object, this gets passed around through the whole set process.
       * @return {String} HTML string thoYï_ßøç>üëºsZ>•:»ßãıùö÷êğ¿§3—ÿ¿Ú~ßß[<_NÛm·¿«ùİòûO¾óœoÏöáegÙ·*wu¿/•¯ÿãõNsÿ|M?™ø?}<­W¿ÎSÍßÉ¹·Ù¡:Şü•îó÷İa©uO»/¿Vş}ß·
pˆR€Q	ŒF°¾#((@Üv@)A j(Q‹À;ˆ-p‘hdü BœÀ Ğ( †p 4ª š¢¢Bà eB‰[À6dR	 ’( Cb˜B–˜ IHè@a *}À"¢İdD
(š´e€ÈS‚

&‚Ğ¡I0A M¢I)=ØúÂV‚:>A†#¼ñ¢"¸ÚDH§+`a€R † BÉ¥T5ùÛ€ÂM&\ ‹”PØ2[µSä
]9Y\nm„$ÁGgè$"¨¬„U$œ0å:áÔ:F½E>&‚9çúşÿÎÎßíøıÓ¾^ç9óıï[•¿»¹ÿ¿±yù"E÷ûÇ—ıœCÚûS¿}|[şËÏÛŞô];5§›ïë×ùŞ³}¼·›“şÛiå÷î}+›ÉıÛOß)okÓÿ?]¿öôlÏ-¼¹¸ûÓÿ¨6{¶·N~*e÷#Ç/gàF†‘eOM3JT)–ìúÉgAQJX;V€ÄBÄòx 5Œ¢b;@€+Ü•+hI„ác‚L Ò0 P„x†*+ØA-ÁVá `€(ĞĞ:¼¤¾ÒJ9ğ19©aMĞÀ¦àpX4 hğ	 UB ©ñÆßü×vûÛŸlÜıêÿü.şÿ›Ø?5õäØõççäı×¿{|ÿ÷ß½†µ¥ÍşßÇçeÖÓ_øî¿ÙWâß/ÿ_§öÏ7wıô½ÿ¿®ÿ÷ø÷ö@ÿí»£Ôø·éS¿òùæšïŸv@oüş??/Ùy_UÖÿúÛ{}¿ûİüş&›íÿÓşÄ×u‹ŸZÓìüw9¸ıÿMía­®û¿+şíç+÷VÿÏù´İc4ÿ7åø¿ë×Ÿ[º¯_µùácğëüòµº7İGÚÖÿ/óB”_ßóÏ’ZnÆ|Ë2×ãşë·¿ov·ûÌÓëîßŞÛúßŸ¾¿>ßÉ¶n¾*ş×úgÛoï?¿¿•€,@°$ò‚I"â"ÙÅ¢ªt( ‚–kè²4! 4¦ºÈ‘Hˆ E†(<ŠUPa@“‚¬4€K8ƒOŠEGFD“V€A`* o€{H ’CìM˜ÁÔ‹v<–¨u® e©$eD €¤Ì#NHÁë=Û‡ÿ[¶â\¾~ñûö?{ß_rõoÂW[×&sÃ-ÿïüçjÖ_í"çëıp|ûºjı¿æ~MyOCöÛ\}2ö{×•[û+¼7öo¾ÿç=øO–Šö¯’ßµv»ú·³®öæ¼ÇhsÛ¿wÿãúÙ¾™{õ‡¢İOÓúÿÊÜoz}§j8ÿ´7Hdá@•s1
Lˆ Á8„°JÔM  *s@j©++•…ˆ §æ ‚±!ÈQˆ2P8É_È=³ K”µT»…<L¶ÏèèdÄ(•‚.4"–[jÚ­©bd&€–ˆúÀ™‘xÇB`'%Yo€‚Àb0-RC 0=4Ì#k©IBBEr„Òd$1©"ıgÑ	—tj1$
ŒPd2É˜0,IJzI¸‚B{¤ * 
I!*¨b– K:’ë(Ç<XUÒ¶QN¶–„ƒ†äIu6ÔPuz¢ˆTŠe
lø†Š‚ºöÿî5ª¿«ş×h·¼güûªÕşooptoë¿×Nmı¿û?Šm¯»Üò²¯òıı¬øŸ~kÛÏÿîBº÷‘Ş+üS,Ùßó÷µûÌÿCù6ó;¯Zï—n$Çİ|^ŸvÿÜëwûÓåİ|øß¶}+í¦_Âouúo~³ùmy}Ër÷îŠò Àé4 ¡–à"üŒ2•a€(Á}Ä'`N‹‡Æ=&´À,
ØŞ&@4Ä=$$ÀkPm2BX‹àd<’\U#4„€èd¢„œ&Ad 8Òv²"«I0nõWw:ªĞ’ZÅØ@@ )‘ÈTñ€Y÷İû#İÏÕõÿë4ï}wÔ¿­<ûŸŞ{jıÛ7şO_ûŸwµ½»ßœbmıûïÅ÷åşÙGß¡ÿüÛSúõŞú}Z8ç›ÛOú]ø¹:ÖÙ?~êãÛ–[ùİ+™ïÊòMLÿ5~ótæõõëÚo¯+ş‰ı×ë_vï÷ëek½÷ö»çn{ûœ{ÕîÇ«íÑÓïÖ„ïÿ{Ùû~/ùïîößßßqüÛ÷ŞŞ¯GŸ_’xøÿÿşû±¹ödïuÿÏÒyûşwƒïêõ_?ıÿé_&¾ï¿×»{Ì=ùÿıëßÿïûêïÿ¿cõïÿ³?ûòÿøß‹ÿÏÿıYÿ™›>Ãÿôß}Mxû!  á ˆ  Y€ÍºáPà#	¹Á`¥É ÃÑˆ–‚&Vb´)À 1`¡@XKJÖkRÀv€õ‚Ğa”*E ¦„N ƒàÄ 2µà­4‹¡&sÀ±µh‡@3¡„€%Ğ€
 ª8 "z1å,—°)«?_gšÿ¿+¼şóûûïÙÏü¯¿Ÿ>î:Ë¯óÿëëpù™ySû‘ïåÆ>úzııéËï[ÿÛO>ÿ×÷_ÿßûOõÊóÿ­´¦êø}ÿÿ×§ëÍ¥ÿGïû¼³üi¤K}ÿöwûÿwFõı£ß7Ûçâóêÿt×ógïş¯¿Üï}ùûúşı`°1%(! 4âÙŒ*F›‰t¤2@¦	5°Aà*¤X
¨jõ¤ğD‘œ¨”8I!ÒKiòH‘œ…”æ´W+®àiˆ¹æ!¸>Ccó¢“¤$®	 ûáÎ` Òî•ºW"4=ƒ°\bCAdôQAv äP$Á ªp… X~2x 
r8}EÑ ’ğC¦µÒ9& FŸ !"L£mÜU ŒC „B­
@ Š†20€8C²fR‡¥“1DØjÕ$°¦”&bx%ÍÌj‚Â<Oä{¨àJ*19H¡¼;$"¿ı¸—¶kíİv¯ùSÛ¼|µœïû§çì_[ıºwı¿_y÷Ÿÿ¼şîø›»³×Ø~¬ı=ßëü¿WïÉµ÷~ßÚ½/gÓÇÔõ{ø¿÷üù7İªx;OıÙŞ|şÛÛwyÿWü×Úßûïkóüç¾.;ÿÿ›?ë©»û=ÛŞ×}u¿mı1¿[Ñ‚|bª*œ¨€Rá ILğ}¦ 	\2	qå)z$¡YHDÙUÖŒ±Ó4&Ë" @qØ'D'(EïK  ŠT>ŒüfÈBíãPÒXàG :&a¬à (–gJE7A	ìDâ˜Œ`€°ÆX íğ7İ…ÀÉàÿá~ûëÎ(¿÷g“÷bß¹ÿÍK;³W>ızûÿß»úÈ³õïßk—µ×›DMåë|ıßvş{Xùü]ışöZ^éßu·?Æö\k+Ùk8÷èŞÇ]ìŸzŞ.¥õûŞü_ÿnô½Ÿêz~ß;şÃÿüÎ;ezı¿k£ëßÿFËæóŞÏx¼ïÚÛéú‹tıã—]Îj¯¥.íoöAİÿsRÕ»¯ËR÷ëßígWß¿wÏ?úõÅı¼÷½¤­ÔŒµÃ¥z?´ÿïÿÒc;s—Sâ>ŸİÇûÇıûÓ¿ùğõŸıÉß§ßx,İ¬ôÏú·Cïı‡Ü³a_ø'_Ó_÷~ÏÖÿûägF€P©[gŸÁHÀÆ® Ğk÷D2tØ5›Ğ*ğ<Œ×d&‚Ö¥Wrâ¤„0V!AÑú PÅº ªüAY0HP¤Ğ@³™%bQ­Â‚ç"Ph‚@ŒˆL/Hjœ 2 PCÙ„$H‘C•Â"ß¿ø›Mû6î¾7õ¸¨Ó÷¯Ipúöú¼çç”Zªüëıümüû¯gÿw¯öÿÿKü~¿İ¿¶@>û;›ëşåoi<ÿ¾÷·÷úü¯ï¾§-vğşé«ÿìé“ş/Ï*·ÓÿÕıµæÏ{}³ş½µ_†¿µÖcm¼ÿûxëk¶¿åÇõÊ
SHyQrØ°"÷ €kAÛB+}bd%Ùü&€6r€€ŞˆŠ‘Í´„u™€‚	€¤w EHêá‰àˆ*‡ºòÆÕ³.Ÿ“ K'@Ì„8`E
¤
d:¿YZ „ L8Â†H á&`Õ „Š" ¥enÃˆ-ñD ö»t*Ğ_kfšª¥ SˆKnä^GW@x0,@à¤Ğ>$ı-$,£¸ˆIp5mî‚ÉÔø5HüDrX#¢I0ê0š&N4§¯iÇˆÁ¦
¡@‘T¨WX€ b…„’Áÿİ¾–¾ñéŞ–ŞóşªïıI¿7ÖiáóGŸ³›ÕË¾«ø*şÿ«q—ûŞ·_Ï®=Ë‹ŸôÜ[Ï¼·şæ†ÖİôûuÑ£ùÿ»úİóg¹è^Wd¾¿÷ÖU:ŸûĞ5>Ÿó7Ãÿn‡gâşówâßÍí¿ÏÔoŞc=¬ÿcÛ¾Ó¿¿äûÁ±"L°IªÊ`\$H…PÆÉhÕ!¬(ÀeÀ?`¥	 ˜¦Iº½@šÆé”±#–@EŒ~°p&Ì€¢!
1,À¬—WDà ²0X`T{ç€1ÈØ¯ó pÒÈ*CY¸›€ „tp)®ˆP³–^ï~¿äïüÎî½›ñífµé|üï·Ï;~ÿşjÿòÖ9,ÿ~ã[]<İØû¸ÙîñnıwÕWÎ9S­oê}š÷móg~ÛøpÿúÚüÿòÜç÷ß½Ï–ö¯gÓß·ş÷rüïãÿåÿ[ùõ§çÜâ?G÷¶áÿç§şyÛ÷O¸Ö/İ6—·öÖòºöÏÿ{ÿ}¿}İs{¸Ô‘şÃÜÓûğóõút®ÿ3úù-Ş÷½cíÄ¯y';çõ¤ÿfÔÏ+úüZïÑŞÕnüœ8ı'#èºK~kë¬7[½Ùß·ïó«Ÿ¯Ş¿ú÷®O?ıÿ½ïşÿóûßßmRïŸ³šúë{«Ïş“€ 
CEiD AF%Ï)€	 (!èR:ƒ}âP*5[U¤XˆkÚÊ,ÄG@Ùàåpá° &qg„Á@€O©„ p I!Í‘CP˜†á"Sà>†I¼tÀ XÍM  1”r`.–<2$      *
       * // Get the raw contents of the currently active editor
       * tinymce.activeEditor.getContent({format: 'raw'});
       *
       * // Get content of a specific editor:
       * tinymce.get('content id').getContent()
       */
      getContent: function (args) {
        var self = this, content, body = self.getBody();

        if (self.removed) {
          return '';
        }

        // Setup args object
        args = args || {};
        args.format = args.format || 'html';
        args.get = true;
        args.getInner = true;

        // Do preprocessing
        if (!args.no_events) {
          self.fire('BeforeGetContent', args);
        }

        // Get raw contents or by default the cleaned contents
        if (args.format == 'raw') {
          content = Tools.trim(self.serializer.getTrimmedContent());
        } else if (args.format == 'text') {
          content = body.innerText || body.textContent;
        } else {
          content = self.serializer.serialize(body, args);
        }

        // Trim whitespace in beginning/end of HTML
        if (args.format != 'text') {
          args.content = trim(content);
        } else {
          args.content = content;
        }

        // Do post processing
        if (!args.no_events) {
          self.fire('GetContent', args);
        }

        return args.content;
      },

      /**
       * Inserts content at caret position.
       *
       * @method insertContent
       * @param {String} content Content to insert.
       * @param {Object} args Optional args to pass to insert call.
       */
      insertContent: function (content, args) {
        if (args) {
          content = extend({ content: content }, args);
        }

        this.execCommand('mceInsertContent', false, content);
      },

      /**
       * Returns true/false if the editor is dirty or not. It will get dirty if the user has made modifications to the contents.
       *
       * The dirty state is automatically set to true if you do modifications to the content in other
       * words when new undo levels is created or if you undo/redo to update the contents of the editor. It will also be set
       * to false if you call editor.save().
       *
       * @method isDirty
       * @return {Boolean} True/false if the editor is dirty or not. It will get dirty if the user has made modifications to the contents.
       * @example
       * if (tinymce.activeEditor.isDirty())
       *     alert("You must save your contents.");
       */
      isDirty: function () {
        return !this.isNotDirty;
      },

      /**
       * Explicitly sets the dirty state. This will fire the dirty event if the editor dirty state is changed from false to true
       * by invoking this method.
       *
       * @method setDirty
       * @param {Boolean} state True/false if the editor is considered dirty.
       * @example
       * function ajaxSave() {
       *     var editor = tinymce.get('elm1');
       *
       *     // Save contents using some XHR call
       *     alert(editor.getContent());
       *
       *     editor.setDirty(false); // Force not dirty state
       * }
       */
      setDirty: function (state) {
        var oldState = !this.isNotDirty;

        this.isNotDirty = !state;

        if (state && state != oldState) {
          this.fire('dirty');
        }
      },

      /**
       * Sets the editor mode. Mode can be for example "design", "code" or "readonly".
       *
       * @method setMode
       * @param {String} mode Mode to set the editor in.
       */
      setMode: function (mode) {
        Mode.setMode(this, mode);
      },

      /**
       * Returns the editors container element. The container element wrappes in
       * all the elements added to the page for the editor. Such as UI, iframe etc.
       *
       * @method getContainer
       * @return {Element} HTML DOM element for the editor container.
       */
      getContainer: function () {
        var self = this;

        if (!self.container) {
          self.container = DOM.get(self.editorContainer || self.id + '_parent');
        }

        return self.container;
      },

      /**
       * Returns the editors content area container element. The this element is the one who
       * holds the iframe or the editable element.
       *
       * @method getContentAreaContainer
       * @return {Element} HTML DOM element for the editor area container.
       */
      getContentAreaContainer: function () {
        return this.contentAreaContainer;
      },

      /**
       * Returns the target element/textarea that got replaced with a TinyMCE editor instance.
       *
       * @method getElement
       * @return {Element} HTML DOM element for the replaced element.
       */
      getElement: function () {
        if (!this.targetElm) {
          this.targetElm = DOM.get(this.id);
        }

        return this.targetElm;
      },

      /**
       * Returns the iframes window object.
       *
       * @method getWin
       * @return {Window} Iframe DOM window object.
       */
      getWin: function () {
        var self = this, elm;

        if (!self.contentWindow) {
          elm = self.iframeElement;

          if (elm) {
            self.contentWindow = elm.contentWindow;
          }
        }

        return self.contentWindow;
      },

      /**
       * Returns the iframes document object.
       *
       * @method getDoc
       * @return {Document} Iframe DOM document object.
       */
      getDoc: function () {
        var self = this, win;

        if (!self.contentDocument) {
          win = self.getWin();

          if (win) {
            self.contentDocument = win.document;
          }
        }

        return self.contentDocument;
      },

      /**
       * Returns the root element of the editable area.
       * For a non-inline iframe-based editor, returns the iframe's body element.
       *
       * @method getBody
       * @return {Element} The root element of the editable area.
       */
      getBody: function () {
        var doc = this.getDoc();
        return this.bodyElement || (doc ? doc.body : null);
      },

      /**
       * URL converter function this gets executed each time a user adds an img, a or
       * any other element that has a URL in it. This will be called both by the DOM and HTML
       * manipulation functions.
       *
       * @method convertURL
       * @param {string} url URL to convert.
       * @param {string} name Attribute name src, href etc.
       * @param {string/HTMLElement} elm Tag name or HTML DOM element depending on HTML or DOM insert.
       * @return {string} Converted URL string.
       */
      convertURL: function (url, name, elm) {
        var self = this, settings = self.settings;

        // Use callback instead
        if (settings.urlconverter_callback) {
          return self.execCallback('urlconverter_callback', url, elm, true, name);
        }

        // Don't convert link href since thats the CSS files that gets loaded into the editor also skip local file URLs
        if (!settings.convert_urls || (elm && elm.nodeName == 'LINK') || url.indexOf('file:') === 0 || url.length === 0) {
          return url;
        }

        // Convert to relative
        if (settings.relative_urls) {
          return self.documentBaseURI.toRelative(url);
        }

        // Convert to absolute
        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);

        return url;
      },

      /**
       * Adds visual aid for tables, anchors etc so they can be more easily edited inside the editor.
       *
       * @method addVisual
       * @param {Element} elm Optional root element to loop though to find tables etc that needs the visual aid.
       */
      addVisual: function (elm) {
        var self = this, settings = self.settings, dom = self.dom, cls;

        elm = elm || self.getBody();

        if (self.hasVisual === undefined) {
          self.hasVisual = settings.visual;
        }

        each(dom.select('table,a', elm), function (elm) {
          var value;

          switch (elm.nodeName) {
            case 'TABLE':
              cls = settings.visual_table_class || 'mce-item-table';
              value = dom.getAttrib(elm, 'border');

              if ((!value || value == '0') && self.hasVisual) {
                dom.addClass(elm, cls);
              } else {
                dom.removeClass(elm, cls);
              }

              return;

            case 'A':
              if (!dom.getAttrib(elm, 'href', false)) {
                value = dom.getAttrib(elm, 'name') || elm.id;
                cls = settings.visual_anchor_class || 'mce-item-anchor';

                if (value && self.hasVisual) {
                  dom.addClass(elm, cls);
                } else {
                  dom.removeClass(elm, cls);
                }
              }

              return;
          }
        });

        self.fire('VisualAid', { element: elm, hasVisual: self.hasVisual });
      },

      /**
       * Removes the editor from the dom and tinymce collection.
       *
       * @method remove
       */
      remove: function () {
        var self = this;

        if (!self.removed) {
          self.save();
          self.removed = 1;
          self.unbindAllNativeEvents();

          // Remove any hidden input
          if (self.hasHiddenInput) {
            DOM.remove(self.getElement().nextSibling);
          }

          if (!self.inline) {
            // IE 9 has a bug where the selection stops working if you place the
            // caret inside the editor then remove the iframe
            if (ie && ie < 10) {
              self.getDoc().execCommand('SelectAll', false, null);
            }

            DOM.setStyle(self.id, 'display', self.orgDisplay);
            self.getBody().onload = null; // Prevent #6816
          }

          self.fire('remove');

          self.editorManager.remove(self);
          DOM.remove(self.getContainer());
          self._selectionOverrides.destroy();
          self.editorUpload.destroy();
          self.destroy();
        }
      },

      /**
       * Destroys the editor instance by removing all events, element references or other resources
       * that could leak memory. This method will be called automatically when the page is unloaded
       * but you can also call it directly if you know what you are doing.
       *
       * @method destroy
       * @param {Boolean} automatic Optional state if the destroy is an automatic destroy or user called one.
       */
      destroy: function (automatic) {
        var self = this, form;

        // One time is enough
        if (self.destroyed) {
          return;
        }

        // If user manually calls destroy and not remove
        // Users seems to have logic that calls destroy instead of remove
        if (!automatic && !self.removed) {
          self.remove();
          return;
        }

        if (!automatic) {
          self.editorManager.off('beforeunload', self._beforeUnload);

          // Manual destroy
          if (self.theme && self.theme.destroy) {
            self.theme.destroy();
          }

          // Destroy controls, selection and dom
          self.selection.destroy();
          self.dom.destroy();
        }

        form = self.formElement;
        if (form) {
          if (form._mceOldSubmit) {
            form.submit = form._mceOldSubmit;
            form._mceOldSubmit = null;
          }

          DOM.unbind(form, 'submit reset', self.formEventDelegate);
        }

        self.contentAreaContainer = self.formElement = self.container = self.editorContainer = null;
        self.bodyElement = self.contentDocument = self.contentWindow = null;
        self.iframeElement = self.targetElm = null;

        if (self.selection) {
          self.selection = self.selection.win = self.selection.dom = self.selection.dom.doc = null;
        }

        self.destroyed = 1;
      },

      /**
       * Uploads all data uri/blob uri images in the editor contents to server.
       *
       * @method uploadImages
       * @param {function} callback Optional callback with images and status for each image.
       * @return {tinymce.util.Promise} Promise instance.
       */
      uploadImages: function (callback) {
        return this.editorUpload.uploadImages(callback);
      },

      // Internal functions

      _scanForImages: function () {
        return this.editorUpload.scanForImages();
      }
    };

    extend(Editor.prototype, EditorObservable);

    return Editor;
  }
);

/**
 * I18n.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * I18n class that handles translation of TinyMCE UI.
 * Uses po style with csharp style parameters.
 *
 * @class tinymce.util.I18n
 */
define(
  'tinymce.core.util.I18n',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    "use strict";

    var data = {}, code = "en";

    return {
      /**
       * Sets the current language code.
       *
       * @method setCode
       * @param {String} newCode Current language code.
       */
      setCode: function (newCode) {
        if (newCode) {
          code = newCode;
          this.rtl = this.data[newCode] ? this.data[newCode]._dir === 'rtl' : false;
        }
      },

      /**
       * Returns the current language code.
       *
       * @method getCode
       * @return {String} Current language code.
       */
      getCode: function () {
        return code;
      },

      /**
       * Property gets set to true if a RTL language pack was loaded.
       *
       * @property rtl
       * @type Boolean
       */
      rtl: false,

      /**
       * Adds translations for a specific language code.
       *
       * @method add
       * @param {String} code Language code like sv_SE.
       * @param {Array} items Name/value array with English en_US to sv_SE.
       */
      add: function (code, items) {
        var langData = data[code];

        if (!langData) {
          data[code] = langData = {};
        }

        for (var name in items) {
          langData[name] = items[name];
        }

        this.setCode(code);
      },

      /**
       * Translates the specified text.
       *
       * It has a few formats:
       * I18n.translate("Text");
       * I18n.translate(["Text {0}/{1}", 0, 1]);
       * I18n.translate({raw: "Raw string"});
       *
       * @method translate
       * @param {String/Object/Array} text Text to translate.
       * @return {String} String that got translated.
       */
      translate: function (text) {
        var langData = data[code] || {};

        /**
         * number - string
         * null, undefined and empty string - empty string
         * array - comma-delimited string
         * object - in [object Object]
         * function - in [object Function]
         *
         * @param obj
         * @returns {string}
         */
        function toString(obj) {
          if (Tools.is(obj, 'function')) {
            return Object.prototype.toString.call(obj);
          }
          return !isEmpty(obj) ? '' + obj : '';
        }

        function isEmpty(text) {
          return text === '' || text === null || Tools.is(text, 'undefined');
        }

        function getLangData(text) {
          // make sure we work on a string and return a string
          text = toString(text);
          return Tools.hasOwn(langData, text) ? toString(langData[text]) : text;
        }


        if (isEmpty(text)) {
          return '';
        }

        if (Tools.is(text, 'object') && Tools.hasOwn(text, 'raw')) {
          return toString(text.raw);
        }

        if (Tools.is(text, 'array')) {
          var values = text.slice(1);
          text = getLangData(text[0]).replace(/\{([0-9]+)\}/g, function ($1, $2) {
            return Tools.hasOwn(values, $2) ? toString(values[$2]) : $1;
          });
        }

        return getLangData(text).replace(/{context:\w+}$/, '');
      },

      data: data
    };
  }
);
/**
 * FocusManager.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.*„<	 ƒ “ĞÑ€VÌ&‚@\âô±p¸‰ Šà"Q$#uÉ†»@ŠÂ@6B't šƒ™ê !øŒ ”SP!†H€¨Œ@ÅU¢±^Œ2ŠX8À<KÒ!	ÑPÁ`0BFÌP€)âG9q‰$ºTV€)´ ş€F˜ ‘¨ Îİ»„‰+4HAÍ"bÃP>€A °šB¤	 @DDŒO0°¤|F.4pB)H0 B# 5A¡ACDĞâBKÂ	—‹R’ĞÛ,L¨(ÍåYTË"„¨c  	Äh@"12Rp²Ağy$ ˆhI+!D“í¡()7[X8ÏdPJ¡9è‡Ï²BD­QU
ÆH°)d˜€(@ H™ H’yY°²”é ±r C%`òx,	ÂD%Šh €3ƒ‘0ÀdÀ ©“Á	QL€Æ%r¥ „0 0"geqä€!Û Š dJPè!`1$bø˜*"x9¼MöR%¸a¢"B;£6<"U‚M ˆä l@ˆ„Â1… ¥€ĞÂ$±€@Hh½£€,ŠÉà"G˜D
 …pºPÜÑ…„’A(  X–¬B 5!pÌ˜‹51Ä-	X¦‹‡ 1!øH¥Ç‘ "4C@"ÂD `¶6DÈ*Øı™ho"†[ğä `ˆƒÉ@`Ê‚'ÏCĞˆv`€ Q ¡  Æ*TÒ„ É°46 (µ¡€Ş€hf°TD]Æ05i;D+3 ”œ±,6` \Lg' Pà\èÚƒ¯œ›€Ae€"K0é€DPH"‡4 t‚¦~Y”p€rAâ lZ²Qb"”­4ƒD&„§•!?D
,4Q•d¼J4pX®¢¬MĞM-tÕ­Â#d 
[PQqDxC 8R	/@Bg“Ó'3´:Ê'€Ê”’j—(rí T¡pÛ©d²"kF¥Bx€»0u$FFBäo” gf•0¡LãhP©n‹'?@èô’X‘	E`BD	8Ke±‹D
ÕÑ,©p˜¬$ ",V¸'		SâIğVàÄ‚‚‡S”ÂVi "ØD¨
|r T‚$1o* Ì¬ \@l	aPHQ@Q‘ˆ @B°‰I )&“‘BS!…–™€@‰Y»0Oá¬àW€óPˆ(3“ÂQÄ¶
€óMa9Z/ âX!—€X@"VHBÑ! %È3hƒM>Z€”4 C”"sGÖ™ÀPr+ôÎ‚B¨³àL8†SbXáÈJù#p6c–Àh^C(ió„ôG¢ŞBƒU÷
JUUA	©-ø¡‘)¹¦èQjbB #C(	ˆ†,`0` Q•ÀFÄ€’ê@;	àIñ ’ÜşP6P’¬"á&Ó `I€Òê‚¡DA0ˆ ˆ Æ@A A$Uf"ˆ* YŠ!,¢8À¤4 ƒ` 5Œ`,¢ PÔ°YCÀiÀ‚5E ' ”
D‚@ƒØ°*U€`BÍ
€â	¡ ‰Ê bO:‹ ³ZF¤"h(9Ò("  ÀTˆOÒ ŒDlh°×™…†…P€"³›l"F¨¹ a¤`hW¤Œ¤01@¢EİDíH0ŠF	B@ùMñ"d,+˜€ˆp²0Â!+¢a@@-Å¨ÏUcç@neõƒEU´8–d¤:f:$ `GK	
…19¤ vCĞ+€¢#¢áQ$ 3	L)2…	I$Ì?’×ÌÌDğaÖœ„ BÃ‚”H‹D.‹‰l .ĞcHE)Œ‚Bêl#À*. é '	D–i,!˜Óƒáë T%G¼“ ZÂG”¡@ r `© I‚ËBô @š8(@€šÒG†Ä PX¨125@jx\ËƒÒş—	+.€œÑf¡N|æÀ±/ `†ÜÁ‚¢h”„•¹ A)À91;–ë«˜!ID»u"ZH!P	 ÄF0` h’ƒ“Ä+A¥Ä7€=ÒÖy>¢ \‡pgc¦èU0W’$Ÿ„Nµ ‘W#×Ö84 í¯"kÕ€ÀO	Ğ„i Igİˆ[À:këÂ¡ kˆÏ’™¤€Œ~³P„I 8F1Ú$CƒŠ±±ˆ‰F¢“,r€[)2—(Ú%˜E’ „¨¤`Y"š4‘ğSAŠ$!b’AÀè„"0€$•wGÜ¦Í³5Åç%Ô³F0I  UI+TA R°‚HA¶À©”„…ğ2YBp
¡bD‚U²0È9°
 	 b	8)‡KPºP”VXGày3ô cB€	ªB)é0diP‹€fSAàhZ¬(AL*ù	À(•OI ag,8"€Gp8
ƒğàcxbc4h  š&8Ö”Ø„’ r‹®F†*)‚KQö ()Rˆ„`px$­p1^±a@Ù¦vA7tj'K®¡iD
-CAB%„·ì8	qa˜V+Wó€Åb0‚©™ $40PXÏØbiO˜pC$	cÀ˜ T!"J‚QÚÆA  S’†h# 0B± »F DWØ1¡ P‘ „L‡GL(@ È• D‘È¨Ñ¡2((…ŒäH<Ï’((:	Átí4è9B¨ÉËH4!€ ƒ9	 ¢§	(  V# 1RÉä#P`œ¨Aˆ€Ş AZŠ¤ÎPN <Òf&"jˆ"85‹ aÕÌ
X ÀÉB	<J
­ ÷ò„äë° $ 9 T ÄTU¤„<‘NEdˆ&VÀc&œ¡¢ƒ¥ …F`
Ë†LD8¬ÄÌ e Ÿğ€ğTA â"I dFxõ‘Ú Ì#\;h¹`,¢™ÓNÅfğMräğÆèØààBâ/À¥/¼>ÌG:PZPø^AE(Ãœ4A+),fMĞ¥èBd@§Ã@iÓa%…(É
(ÈdƒvğÀ¡cÔ¡&`À	€ ¨Š0@Q ‘q8ĞBN)9
¤Àá
A	b¤‚Tf†Ùpš¨¨°.ï@?B„šÌÄ‚À,WÈ	¬20 X 	@!¹ê	¤Ô„“ê¡("Ä"+¸
dÔBšb/Î#„ñZ†óõÀb´khD'ÀI@â`ªmˆ—ÄL '„¡ˆÒš±Zlw` &‚†—  €‘úõ0Aœ&)êÃe1:A	±a@0¤€LH  @0§h! &"CSÀ1	ÚT Ù€—æ– š$.‚dDŒI“C02mGÎ@d! 9€‘8YDE<HÈ €
	Y"²	ÉA0P’PS%@- @bôÄ 0U! ,€CgPÀ R–	¡Ã+%†P	dğ 0Qò¦ ˜Ò`@ÅŠ¤Ç(P	Â^h@†"°A¨@ù“©CX4 fT"e	BDà@ÀÈĞPH"jƒáà`&8IEd¹ÄJ 
h (P«ì´H¦DˆE9Âè…Ü8`Q $8„ …bt½aô£ 6±ã &&µÊQ&À¦‚
< (%$E Ò D!Ê2C$Àâ*"ú€¢J×.æGÂ0¤İå N8Ø »¦C'pPkšœ`]¸˜Öº›ùÑ ø©P(q’À;Ğ%ü €` ChIôg  iÌÅHğùà‰"SW‘/bcŠ8áBtV†"Áä2¡A»’òÔ–Cá Æ Dü‚B" ECeŒPmi<J H d Œ ¥@T»a`ˆP0  ˆ„¼ °£ˆ—& âb€Ì’< qxÄl	 Ç ‡´ &B„H¤C•9U[ p @ã¸^}\HğcHtbPD2¸”ê  ì¬?`! B €0³fq Œ‰( ¨¤JŠµŠ'€@Ì	f@e@qF
b‘a¶¦@†40°ÂFBŒ‡"Y	êœ	Š_à$Ø b¦à²B'@¸$Ûä‡À3Íˆ‹ F (›oÀqp%Å €$ÀF z9/?ãğ2‡˜ õA˜L;‡¦A„(ÉÀ`¤ˆcã9œ"
d€.CPP£Å ºVa€2 Rˆ1½J‘°0Qœ I  ,cŒ,ÊŒÀ¯ EJ€‘ DH3 ‰À',V Öˆ(èP ©D0BPQ vQ0M°¤0RD‚¤´ÿØRQ Åú‘Îó€/(_Dá¤Œ b!p¨›. …b‰ üÀü8®	|BÔ…V`! b¢FSQPÎÒ8‡Š9‚‰œ’6(,0‰€ÁÃÁ
”T€L 1ÁåND $’×(Y„Èg„’„@r	BV @@À	9Œ*…Q±ã’hqFÄES@ª0Cã(Àd–AD	RCˆe£!„ c»Q!XuVL€2¨&‚BJM²ÔÀä kG€² Ç b4ˆ50`$”÷H7p	5ljÀûÏ‚i@1€!Éà@e…ÀL ğàÃ©e© (¬ à‹  ÅÚ…Ä‚8!À*ÀR3¨X)Ò¨"
‹  ì+@i2®FˆR¡¡œy “ 	  DÑ¢Ø
T`ÃP@(a+X‡J˜¼Æ@&,) £0.BêVD °™$1 ä ¡€:ÀJğ+b	0(fˆ©getActiveElement();

                // Only act on manual nodechanges
                if (e.type == 'nodechange' && e.selectionChange) {
                  return;
                }

                // IE 11 reports active element as iframe not body of iframe
                if (node && node.id == editor.id + '_ifr') {
                  node = editor.getBody();
                }

                if (editor.dom.isChildOf(node, editor.getBody())) {
                  editor.lastRng = editor.selection.getRng();
                }
              });
            }

            // Handles the issue with WebKit not retaining selection within inline document
            // If the user releases the mouse out side the body since a mouse up event wont occur on the body
            if (Env.webkit && !selectionChangeHandler) {
              selectionChangeHandler = function () {
                var activeEditor = editorManager.activeEditor;

                if (activeEditor && activeEditor.selection) {
                  var rng = activeEditor.selection.getRng();

                  // Store when it's non collapsed
                  if (rng && !rng.collapsed) {
                    editor.lastRng = rng;
                  }
                }
              };

              DOM.bind(document, 'selectionchange', selectionChangeHandler);
            }
          }
        });

        editor.on('setcontent', function () {
          editor.lastRng = null;
        });

        // Remove last selection bookmark on mousedown see #6305
        editor.on('mousedown', function () {
          editor.selection.lastFocusBookmark = null;
        });

        editor.on('focusin', function () {
          var focusedEditor = editorManager.focusedEditor, lastRng;

          if (editor.selection.lastFocusBookmark) {
            lastRng = bookmarkToRng(editor, editor.selection.lastFocusBookmark);
            editor.selection.lastFocusBookmark = null;
            editor.selection.setRng(lastRng);
          }

          if (focusedEditor != editor) {
            if (focusedEditor) {
              focusedEditor.fire('blur', { focusedEditor: editor });
            }

            editorManager.setActive(editor);
            editorManager.focusedEditor = editor;
            editor.fire('focus', { blurredEditor: focusedEditor });
            editor.focus(true);
          }

          editor.lastRng = null;
        });

        editor.on('focusout', function () {
          Delay.setEditorTimeout(editor, function () {
            var focusedEditor = editorManager.focusedEditor;

            // Still the same editor the blur was outside any editor UI
            if (!isUIElement(editor, getActiveElement()) && focusedEditor == editor) {
              editor.fire('blur', { focusedEditor: null });
              editorManager.focusedEditor = null;

              // Make sure selection is valid could be invalid if the editor is blured and removed before the timeout occurs
              if (editor.selection) {
                editor.selection.lastFocusBookmark = null;
              }
            }
          });
        });

        // Check if focus is moved to an element outside the active editor by checking if the target node
        // isn't within the body of the activeEditor nor a UI element such as a dialog child control
        if (!documentFocusInHandler) {
          documentFocusInHandler = function (e) {
            var activeEditor = editorManager.activeEditor, target;

            target = e.target;

            if (activeEditor && target.ownerDocument === document) {
              // Check to make sure we have a valid selection don't update the bookmark if it's
              // a focusin to the body of the editor see #7025
              if (activeEditor.selection && target !== activeEditor.getBody() && isElementOursideInlineEditor(editor, target)) {
                activeEditor.selection.lastFocusBookmark = createBookmark(activeEditor.dom, activeEditor.lastRng);
              }

              // Fire a blur event if the element isn't a UI element
              if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {
                activeEditor.fire('blur', { focusedEditor: null });
                editorManager.focusedEditor = null;
              }
            }
          };

          DOM.bind(document, 'focusin', documentFocusInHandler);
        }

        // Handle edge case when user starts the selection inside the editor and releases
        // the mouse outside the editor producing a new selection. This weird workaround is needed since
        // Gecko doesn't have the "selectionchange" event we need to do this. Fixes: #6843
        if (editor.inline && !documentMouseUpHandler) {
          documentMouseUpHandler = function (e) {
            var activeEditor = editorManager.activeEditor, dom = activeEditor.dom;

            if (activeEditor.inline && dom && !dom.isChildOf(e.target, activeEditor.getBody())) {
              var rng = activeEditor.selection.getRng();

              if (!rng.collapsed) {
                activeEditor.lastRng = rng;
              }
            }
          };

          DOM.bind(document, 'mouseup', documentMouseUpHandler);
        }
      }

      function unregisterDocumentEvents(e) {
        if (editorManager.focusedEditor == e.editor) {
          editorManager.focusedEditor = null;
        }

        if (!editorManager.activeEditor) {
          DOM.unbind(document, 'selectionchange', selectionChangeHandler);
          DOM.unbind(document, 'focusin', documentFocusInHandler);
          DOM.unbind(document, 'mouseup', documentMouseUpHandler);
          selectionChangeHandler = documentFocusInHandler = documentMouseUpHandler = null;
        }
      }

      editorManager.on('AddEditor', registerEvents);
      editorManager.on('RemoveEditor', unregisterDocumentEvents);
    }

    /**
     * Returns true if the specified element is part of the UI for example an button or text input.
     *
     * @method isEditorUIElement
     * @param  {Element} elm Element to check if it's part of the UI or not.
     * @return {Boolean} True/false state if the element is part of the UI or not.
     */
    FocusManager.isEditorUIElement = function (elm) {
      // Needs to be converted to string since svg can have focus: #6776
      return elm.className.toString().indexOf('mce-') !== -1;
    };

    FocusManager._isUIElement = isUIElement;

    return FocusManager;
  }
);

/**
 * LegacyInput.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Converts legacy input to modern HTML.
 *
 * @class tinymce.LegacyInput
 * @private
 */
define(
  'tinymce.core.LegacyInput',
  [
    "tinymce.core.util.Tools"
  ],
  function (Tools) {
    var each = Tools.each, explode = Tools.explode;

    var register = function (EditorManager) {
      EditorManager.on('AddEditor', function (e) {
        var editor = e.editor;

        editor.on('preInit', function () {
          var filters, fontSizes, dom, settings = editor.settings;

          function replaceWithSpan(node, styles) {
            each(styles, function (value, name) {
              if (value) {
                dom.setStyle(node, name, value);
              }
            });

            dom.rename(node, 'span');
          }

          function convert(e) {
            dom = editor.dom;

            if (settings.convert_fonts_to_spans) {
              each(dom.select('font,u,strike', e.node), function (node) {
                filters[node.nodeName.toLowerCase()](dom, node);
              });
            }
          }

          if (settings.inline_styles) {
            fontSizes = explode(settings.font_size_legacy_values);

            filters = {
              font: function (dom, node) {
                replaceWithSpan(node, {
                  backgroundColor: node.style.backgroundColor,
                  color: node.color,
                  fontFamily: node.face,
                  fontSize: fontSizes[parseI`ú„Â(A 6
„ (B%ˆÀ¨	®	x	ˆèP(I ‘‰ .0ÄJË0Ôƒ¡	ç¢C¸#P °!‚&jH`Œà„d˜ HBAÈÔHÕ W ´Ñ$q %laq 6rş‘˜A™ƒJ6ƒçíÉ‚	e»ßõ[úÿkÿ¯áÑßï-~/7çŞ9Éÿºÿızóæ.ó==Ê6>¤óv¯Êzğ¹³~ã§•›ÚßúÎ)°åéŸë¦ÎÂmó¿ßûşêçN#_¿g·'j~ÏÛ=õá^®×eû•îíú¶¿mılÛxşËç¿î…ÛÜÿotó;ÿ?ßÿ­şí×ô{vg³¬¿ıú>âü}uæÿôU¾/mO—ó/ëéuWÓk÷˜woû,ûï÷İïcı—Ÿ¯Ÿ…ŸæOäVùõë~Ëü¯«^÷·EsÚû~Û÷¯êMşüÅG÷²¯½£j­rß®~˜]ÍÂÿ˜s(Ÿø¬¹†3á÷ÖZúş4çæ±	‚€X ËˆåÖŠAøLKV ”AÀÁ>$@	0;@ ©wØ
Ğ II" ÀA` [†Ì	‰q¹ÎtºCˆÈäõìÃ±H4gÒ1
„@€	 …x	IFÜ0ˆs\EavKAK–pI@eA…”5-·ş|iÓBZ·êùtì`ÚšMókAß»§Ôiõô]ÖÿÎ.¯’´Î_·îÇ÷Šùß­úùóTuÿ‹ò'Ü5¹:£g_Úï‹}á›öjÕ¹×şÀ×÷È×võ¡^ZYşyzÿeŸ×~·yë’<Ÿœş>oÉõ›Ïv×Ã×}·^˜ ¢9	Z1&BWEº•(¡HÌnfÈåÌá9$0dÂP2@’€¡¦°1PÀq,mTFPH61I Àa Z„ŒŒsÒ‹f¥6Ã
Ô…Ä!"„¸1’†])š@Wt% (ŠA´&Dce(À(à`!Àä Ğ JÆGB ±”2„	W€H 0/Pˆ°rft2T„<hü.$¡  u ”ƒä€L€ˆ`ÁIŸ@¨ÇZ2U¡S*DRH˜Î3!†C 
W À`à‘$‚`ÂŒ@D%C*ø@J<MC8²Ä Tö»ıçùË[µåüvİï´‡ıÿßÿğüş/|[3İ‡Öå~Õİüõô.ı yæ¾ıuŞùUÆÔşMû—eßîÿ{.îñßáô÷*æ•îîãgCŞûywÅ´Dúiïınûßõõóñ/¾uğ7¾d~Ï}Û?ïÏ·«nÓğÑßŠ„@ M˜€k†€BP0‹C(Bè­(D€ÈJ‚<6¶A è	ƒ`†™ @ ,’	B¡^€[êWdBQ`•†ˆAĞ4†	$BÔ*,B Fx²P ‡¬A>ê0 !`D†— ¥Aêã5Ã^°SV~ñòs)¿[}nyf9Ş¸İ~¸ø]{?±êöL‡ÓáÙÚ_>'Ïïü?¦—Öã÷çõÑ½~”Áëêÿ·œ{\ï÷ÿ;ÖHÿ÷ÓG}Üu”ß®üïåoÿ.¼À5—ËËÃ…áÖ×ª9K3ªÿ×Ş%k1üì:¿ú§½¼kŸÁûèÿæ¯s7´Ï·üÛéÓ—Züë\?MÅ¿ŸÆuïïTïÇØ	­E}sßêıã\¯´Á§6şÉw–âézÅírYu×Ó|º7Gî÷õŸ‚zlÿ¯¿?5ıµ§¨x»ÂÙÿ÷ô÷ı²gÿï~0şÎ¿'ÖÚ—öorWáˆëy®«ÿmVòÃĞÉhH!å	’°i!
UŒ †A‘Â¼ 5
À¤0N! Xà& #XŠ@1‚ &RT·  €@p^¡‘`©„(¨	L@(X!ªp¥	 Eˆ€‚Tˆ
1´†ÈbıÉ°!,K@ˆ
CD‡“ê'Ÿíş?şêÎÿ¬`µ÷ùñ›Ÿ½°Z»Ÿî„ß«õ¾3çí¦®W¼âWËô…îŞıñeşï./?ñów«¿şíØc{çe»†í¸—{n
ù·¾ßüşÇÔù\–™¯ÿû½ø}WııÕîÛÜŞşMı/Ïw•£şà¯ÿÏõ~îÙ¶Èlü 4%’I” qø   E„J9&   @(" (´!_"@ë€§± <@º%TR €²0EˆG£   a$ˆƒ<´LbHI\ # €	ŠÁĞ D`
V%ÔIˆh*/Û˜R‹a¢ )HBJ
P PÍ
CÁ	ˆ„! Ù‚ƒ®òT€:E’0ğHLÁÉ’`ˆ5U²D'ê#!Á/¶‰t²ÄZ\±a(C@M	 2 •`h´ŒG€±õ@«	%Ñ @ÔR+ ‘˜À±0%M&eÑ&Ë½“ßÿoù^Ş/¢ñßz¹¹Ïÿÿÿ?Õ<võÿ÷íKîçû.Éşšúñgf¯ê_óŞîÏ¦ÙÚŸ¾òâ/%·‹¾?]çÂôW¬®á½O_kïî×¥ûÿqûá`õ×ñêÿoúñ/ÎŠ_õ½çS+ÏÖ{Ùw`ş÷Å¿ëŸÀü%‘Ğà„¬ yş„ÔûR³H|€è¤ÀÌ™kÒQ¢‚	ªp<SAÁeR˜¨€€€Ø  
´ I0H
ŞµI)$IÃRĞ´ 0²Aà$ Š° ÁZq… p€JÄÇ!†!€<08– t8PÍ>¿_õÄDj^eıŞ³ÒÏ¨0úõ™sÍc±?wyûøSİs·’gYÃ·ôøÿk¼£&ÿyò¿×bì¹Ë9^ì6éÿ¯¿Ïúö•«*}µqÿÓ?×úßÇíä¹o¹ùUü{ú4÷ºïmûÒtrõûw¸áŒïïÈ¨=oÖºFé?ß½Nı±7Y{Ûï?œúwıúóÿÆ®v{AüïŞG‹ÛŞÇ/ş5G8ş›Mçë¿Xÿu&]«‡ğó_*âú×ÿçzë¬gj°ÿ¿¼+;Ñ¿ñÙ¶jzŒçZ½ßÏ.öÉéû×Ê½ıŠİE—]S:bfÖ¿:û&û_üŞïÿ<ğé^j2ö÷ò&	°! 9@¹  ÉZ@„J4@€ÄŠ$Q`A±À€=ĞY<ÓÄñ¨,dˆ0BÀ.àHâPÂ*ê ³à€E„6¡9P–Q ¦7È"` JXĞ3„Cøi¢(b  ,cƒŒ@h‚ú‰zŒ"ö	rÈöğgn=~´ÕÅZí—ÔÔûòÿıì?¾Î¼w,ª{ûëşÿÕóÓ=sÍVKoÓ‡Âí¾ÿŸg»£ïü}÷ãûMæQ‹-[ö¿bl5s¿ô¹ƒ}ö~ŞÚíÕ[óõ¾ÿòÔŸ—÷ıEkÏı•ÇëWGÏºŸÍÿ•]Ïø¿Ï–f“{€°Jcº…( bØ@dàN$Z€.†B‚d)* PvÀù€ˆ„""	„‰0t=  “@¤d#ÑŒ ¡õÀ$Š€!¥b( #¼*&À¸¢Cƒ-àBkƒÉHPH B€HI IC	‰À!)DF$†è1y’6TÖdƒ’ 2‹¡‘  À=‚M;j ¢ƒ”" ôO  ‰@ÑŠÉnÄÃ¶A€	‹D˜Ö±Ä€œˆ‘X“Œ 
5 	)´*L©
­µPÁÛ˜Òˆ D … EÆ?åïéÅÃnqäªPs|ş7Â;á§ÖÙg¨ıİ™éûå_6ó–úÿ¹ñÓv×÷¯ÿÉ®ï—WWå–=áàSÿ¶ò­şùÈışïóSå~ÿ<W³4‡.Yè¦ö+Ûn5ıãgÇ~åŸ!Ö77ïõÄN'¿^ß÷Ï†³™x+³äÉüú_Ò6c^Ùa ÃB’‚U,e 0¢L$ ¨h^RRæ$b‚ h‘,æÃ•+È-ÀÓ(Š‘5 Â` 
…CB@À‘CJAjJ€¬¢š`Ì@àbTY’@ 0Bˆd!X0à4 0TW&0‘ ±â%€1\ÇûÃe?éíçÇ[óÕuòôW.±?·Ë…ïUyT~?ıÿ÷á¼?ş·ø;uq§DıßG_{û¯õæüÚß®o°óÖw~Ãûş[¼6£õò“ü[U=¿‡[‘X—ıîáÖ-şšMgÿÿ×Y2ç÷ë]çÿës»'GÛ6]ë>ÿıÏ³üµKs¾Sù—MõŞÅÉ<vywÏƒŸº;_Íæ×Ş´»çóY•şÿZûÙŸü³Şsşûƒu¸ôs»ÎZ¸ğä³ø“§Œ³·ÍT÷€¢Üö©ë={Óïû¿«¿ıİ°Ñ®İrı=ÜwO±ı·Ñ-¿*Zÿã&Wğ&ÇïµÁ¬ß'z?ÿ?*Be	  QT¸ Â‹OÁh €H bL h¡A„eH• ÀR–Z¤0Ğ(™a ¥D˜¨0à$l) âŠÉÎöBê ¾»Œ‚¨1„[ D ƒ‚ĞB©R÷‹ë*E#0T •^# B,JÌé¢ú´_ßWùŸu³VöÍ¶Õ×6PÙöÿq¼4=|5çÌ³Õ[ÄøMïëë·ÙÆ]=Zii®ÊŞvßsvVùNÿ×»ïã©Û¸tÌó¯å©ÿ×¯¾ô#¾÷¾}ıo¨¾ÿóîïgs£ûš¿6¸ïÚ{Àû¿µúaßëÛÇ·½«'¿"éõéÕøn’0` 8G’!J €xÄDQ((  (àà€T\¨ª€	… À`H  F$¥ˆÁ¬à	/ğD@8@‘
É°$ƒ€_ Àò I=(et•DHÆ¼‰D­ÒÆ `¸e “½Ì‘€“0™Æ&€4ÄiI ¤€®GT88 Æ HB41(¨„ÊàFTÁ"C¢OQ"	R	Ñ€$Y’ NR%F–PÔ¤t´h˜(@D4àaYƒ(È(yDaS%!1T,Av¡ $t":/ )İE‰$# Ú/Û/ün_ÿÏZµÎÍMvQ»OÆ_ÛÒ±ûî_İ­û¾½9BñÛ]Îİm×ş í{·•å°fŞíúîİ¶x–è?õùq±æ—?Ú¦ÿ7“Øu¿N3óÛ}	wîMûõıúŞò?úëSw¬{æßîö÷§¨¾[Zßl‡w8kç£:íàŸĞ '6.4',

      /**
       * Release date of TinyMCE build.
       *
       * @property releaseDate
       * @type String
       */
      releaseDate: '2017-06-13',

      /**
       * Collection of editor instances.
       *
       * @property editors
       * @type Object
       * @example
       * for (edId in tinymce.editors)
       *     tinymce.editors[edId].save();
       */
      editors: [],

      /**
       * Collection of language pack data.
       *
       * @property i18n
       * @type Object
       */
      i18n: I18n,

      /**
       * Currently active editor instance.
       *
       * @property activeEditor
       * @type tinymce.Editor
       * @example
       * tinyMCE.activeEditor.selection.getContent();
       * tinymce.EditorManager.activeEditor.selection.getContent();
       */
      activeEditor: null,

      setup: function () {
        var self = this, baseURL, documentBaseURL, suffix = "", preInit, src;

        // Get base URL for the current document
        documentBaseURL = URI.getDocumentBaseUrl(document.location);

        // Check if the URL is a document based format like: http://site/dir/file and file:///
        // leave other formats like applewebdata://... intact
        if (/^[^:]+:\/\/\/?[^\/]+\//.test(documentBaseURL)) {
          documentBaseURL = documentBaseURL.replace(/[\?#].*$/, '').replace(/[\/\\][^\/]+$/, '');

          if (!/[\/\\]$/.test(documentBaseURL)) {
            documentBaseURL += '/';
          }
        }

        // If tinymce is defined and has a base use that or use the old tinyMCEPreInit
        preInit = window.tinymce || window.tinyMCEPreInit;
        if (preInit) {
          baseURL = preInit.base || preInit.baseURL;
          suffix = preInit.suffix;
        } else {
          // Get base where the tinymce script is located
          var scripts = document.getElementsByTagName('script');
          for (var i = 0; i < scripts.length; i++) {
            src = scripts[i].src;

            // Script types supported:
            // tinymce.js tinymce.min.js tinymce.dev.js
            // tinymce.jquery.js tinymce.jquery.min.js tinymce.jquery.dev.js
            // tinymce.full.js tinymce.full.min.js tinymce.full.dev.js
            var srcScript = src.substring(src.lastIndexOf('/'));
            if (/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(src)) {
              if (srcScript.indexOf('.min') != -1) {
                suffix = '.min';
              }

              baseURL = src.substring(0, src.lastIndexOf('/'));
              break;
            }
          }

          // We didn't find any baseURL by looking at the script elements
          // Try to use the document.currentScript as a fallback
          if (!baseURL && document.currentScript) {
            src = document.currentScript.src;

            if (src.indexOf('.min') != -1) {
              suffix = '.min';
            }

            baseURL = src.substring(0, src.lastIndexOf('/'));
          }
        }

        /**
         * Base URL where the root directory if TinyMCE is located.
         *
         * @property baseURL
         * @type String
         */
        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);

        /**
         * Document base URL where the current document is located.
         *
         * @property documentBaseURL
         * @type String
         */
        self.documentBaseURL = documentBaseURL;

        /**
         * Absolute baseURI for the installation path of TinyMCE.
         *
         * @property baseURI
         * @type tinymce.util.URI
         */
        self.baseURI = new URI(self.baseURL);

        /**
         * Current suffix to add to each plugin/theme that gets loaded for example ".min".
         *
         * @property suffix
         * @type String
         */
        self.suffix = suffix;

        self.focusManager = new FocusManager(self);
      },

      /**
       * Overrides the default settings for editor instances.
       *
       * @method overrideDefaults
       * @param {Object} defaultSettings Defaults settings object.
       */
      overrideDefaults: function (defaultSettings) {
        var baseUrl, suffix;

        baseUrl = defaultSettings.base_url;
        if (baseUrl) {
          this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\/+$/, ''));
          this.baseURI = new URI(this.baseURL);
        }

        suffix = defaultSettings.suffix;
        if (defaultSettings.suffix) {
          this.suffix = suffix;
        }

        this.defaultSettings = defaultSettings;

        var pluginBaseUrls = defaultSettings.plugin_base_urls;
        for (var name in pluginBaseUrls) {
          AddOnManager.PluginManager.urls[name] = pluginBaseUrls[name];
        }
      },

      /**
       * Initializes a set of editors. This method will create editors based on various settings.
       *
       * @method init
       * @param {Object} settings Settings object to be passed to each editor instance.
       * @return {tinymce.util.Promise} Promise that gets resolved with an array of editors when all editor instances are initialized.
       * @example
       * // Initializes a editor using the longer method
       * tinymce.EditorManager.init({
       *    some_settings : 'some value'
       * });
       *
       * // Initializes a editor instance using the shorter version and with a promise
       * tinymce.init({
       *    some_settings : 'some value'
       * }).then(function(editors) {
       *    ...
       * });
       */
      init: function (settings) {
        var self = this, result, invalidInlineTargets;

        invalidInlineTargets = Tools.makeMap(
          'area base basefont br col frame hr img input isindex link meta param embed source wbr track ' +
          'colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu',
          ' '
        );

        function isInvalidInlineTarget(settings, elm) {
          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;
        }

        function createId(elm) {
          var id = elm.id;

          // Use element id, or unique name or generate a unique id
          if (!id) {
            id = elm.name;

            if (id && !DOM.get(id)) {
              id = elm.name;
            } else {
              // Generate unique name
              id = DOM.uniqueId();
            }

            elm.setAttribute('id', id);
          }

          return id;
        }

        function execCallback(name) {
          var callback = settings[name];

          if (!callback) {
            return;
          }

          return callback.apply(self, Array.prototype.slice.call(arguments, 2));
        }

        function hasClass(elm, className) {
          return className.constructor === RegExp ? className.test(elm.className) : DOM.hasClass(elm, className);
        }

        function findTargets(settings) {
          var l, targets = [];

          if (Env.ie && Env.ie < 11) {
            ErrorReporter.initError(
              'TinyMCE does not support the browser you are using. For a list of supported' +
              ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/'
            );
            return [];
          }

          if (settings.types) {
            each(settings.types, function (type) {
              targets = targets.concat(DOM.select(type.selector));
            });

            return targets;
          } else if (settings.selector) {
            return DOM.select(settings.selector);
          } else if (settings.target) {
            return [settings.target];
          }

          // Fallback to old setting
          switch (settings.mode) {
            case "exact":
              l = settings.elements || '';

              if (l.length > 0) {
                each(explode(l), function (id) {
                  var elm;

                  if ((elm = DOM.get(id))) {
                    targets.push(elm);
                  } else {
                    each(document.forms, function (f) {
                      each(f.elements, function (e) {
                        if (e.name === id) {
                          id = 'mce_editor_' + instanceCounter++;
                          DOM.setAttrib(e, 'id', id);
                          targets.push(e);
                        }
                      });
                    });
                  }
                });
              }
              break;

            case "textareas":
            case "specific_textareas":
              each(DOM.select('textarea'), function (elm) {
                if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {
                  return;
                }

                if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {
                  targets.push(elm);
                }
              });
              break;
          }

          return targets;
        }

        var provideResults = function (editors) {
          result = editors;
        };

        function initEditors() {
          var initCount = 0, editors = [], targets;

          function createEditor(id, settings, targetElm) {
            var editor = new Editor(id, settings, self);

            editors.push(editor);

            editor.on('init', function () {
              if (++initCount === targets.length) {
                provideResults(editors);
              }
            });

            editor.targetElm = editor.targetElm || targetElm;
            editor.render();
          }

          DOM.unbind(window, 'ready', initEditors);
          execCallback('onpageload');

          targets = DomQuery.unique(findTargets(settings));

          // TODO: Deprecate this one
          if (settings.types) {
            each(settings.types, function (type) {
              Tools.each(targets, function (elm) {
                if (DOM.is(elm, type.selector)) {
                  createEditor(createId(elm), extend({}, settings, type), elm);
                  return false;
                }

                return true;
              });
            });

            return;
          }

          Tools.each(targets, function (elm) {
            purgeDestroyedEditor(self.get(elm.id));
          });

          targets = Tools.grep(targets, function (elm) {
            return !self.get(elm.id);
          });

          if (targets.length === 0) {
            provideResults([]);
          } else {
            each(targets, function (elm) {
              if (isInvalidInlineTarget(settings, elm)) {
                ErrorReporter.initError('Could not initialize inline editor on invalid inline target element', elm);
              } else {
                createEditor(createId(elm), settings, elm);
              }
            });
          }
        }

        self.settings = settings;
        DOM.bind(window, 'ready', initEditors);

        return new Promise(function (resolve) {
          if (result) {
            resolve(result);
          } else {
            provideResults = function (editors) {
              resolve(editors);
            };
          }
        });
      },

      /**
       * Returns a editor instance by id.
       *
       * @method get
       * @param {String/Number} id Editor instance id or index to return.
       * @return {tinymce.Editor} Editor instance to return.
       * @example
       * // Adds an onclick event to an editor by id (shorter version)
       * tinymce.get('mytextbox').on('click', function(e) {
       *    ed.windowManager.alert('Hello world!');
       * });
       *
       * // Adds an onclick event to an editor by id (longer version)
       * tinymce.EditorManager.get('mytextbox').on('click', function(e) {
       *    ed.windowManager.alert('Hello world!');
       * });
       */
      get: function (id) {
        if (!arguments.length) {
          return this.editors;
        }

        return id in this.editors ? this.editors[id] : null;
      },

      /**
       * Adds an editor instance to the editor collection. This will also set it as the active editor.
       *
       * @method add
       * @param {tinymce.Editor} editor Editor instance to add to the collection.
       * @return {tinymce.Editor} The same instance that got passed in.
       */
      add: function (editor) {
        var self = this, editors = self.editors;

        // Add named and index editor instance
        editors[editor.id] = editor;
        editors.push(editor);

        toggleGlobalEvents(editors, true);

        // Doesn't call setActive method since we don't want
        // to fire a bunch of activate/deactivate calls while initializing
        self.activeEditor = editor;

        self.fire('AddEditor', { editor: editor });

        if (!beforeUnloadDelegate) {
          beforeUnloadDelegate = function () {
            self.fire('BeforeUnload');
          };

          DOM.bind(window, 'beforeunload', beforeUnloadDelegate);
        }

        return editor;
      },

      /**
       * Creates an editor instance and adds it to the EditorManager collection.
       *
       * @method createEditor
       * @param {String} id Instance id to use for editor.
       * @param {Object} settings Editor instance settings.
       * @return {tinymce.Editor} Editor instance that got created.
       */
      createEditor: function (id, settings) {
        return this.add(new Editor(id, settings, this));
      },

      /**
       * Removes a editor or editors form page.
       *
       * @example
       * // Remove all editors bound to divs
       * tinymce.remove('div');
       *
       * // Remove all editors bound to textareas
       * tinymce.remove('textarea');
       *
       * // Remove all editors
       * tinymce.remove();
       *
       * // Remove specific instance by id
       * tinymce.remove('#id');
       *
       * @method remove
       * @param {tinymce.Editor/String/Object} [selector] CSS selector or editor instance to remove.
       * @return {tinymce.Editor} The editor that got passed in will be return if it was found otherwise null.
       */
      remove: function (selector) {
        var self = this, i, editors = self.editors, editor;

        // Remove all editors
        if (!selector) {
          for (i = editors.length - 1; i >= 0; i--) {
            self.remove(editors[i]);
          }

          return;
        }

        // Remove editors by selector
        if (typeof selector == "string") {
          selector = selector.selector || selector;

          each(DOM.select(selector), function (elm) {
            editor = editors[elm.id];

            if (editor) {
              self.remove(editor);
            }
          });

          return;
        }

        // Remove specific editor
        editor = selector;

        // Not in the collection
        if (!editors[editor.id]) {
          return null;
        }

        if (removeEditorFromList(editor)) {
          self.fire('RemoveEditor', { editor: editor });
        }

        if (!editors.length) {
          DOM.unbind(window, 'beforeunload', beforeUnloadDelegate);
        }

        editor.remove();

        toggleGlobalEvents(editors, editors.length > 0);

        return editor;
      },

      /**
       * Executes a specific command on the currently active editor.
       *
       * @method execCommand
       * @param {String} cmd Command to perform for example Bold.
       * @param {Boolean} ui Optional boolean state if a UI should be presented for the command or not.
       * @param {String} value Optional value parameter like for example an URL to a link.
       * @return {Boolean} true/false if the command was executed or not.
       */
      execCommand: function (cmd, ui, value) {
        var self = this, editor = self.get(value);

        // Manager commands
        switch (cmd) {
          case "mceAddEditor":
            if (!self.get(value)) {
              new Editor(value, self.settings, self).render();
            }

            return true;

          case "mceRemoveEditor":
            if (editor) {
              editor.remove();
            }

            return true;

          case 'mceToggleEditor':
            if (!editor) {
              self.execCommand('mceAddEditor', 0, value);
              return Ùsÿ{ú½›ÉïÚïhÿ÷&ëß¿ıÄ”ı››Ñ¯ÿ…oh¾ÏrOïüÿû¾·Ù}VÏe¤7umëû{887£ıæÿÑ|>“š¿5~ÿ>ÿïjş~:¿Óßÿù·×ÿ×ÿçkßo~óO=íûí‡ıóŸäÜÿÛë^ÌëXá7¾Õ}u—¿û÷·ñı\€Á`ˆÔ‚2Pd¢£ğã&$‚ 2OÏ¢‹…R# =P  C"Š„&d¸T¾5PÄ €UP”@ñ`ì@ FN`š¯Uè\s	íH(B ˜0DTqF«%†ÁDDDGr  ¢cü&!@%a¢KÊ`v›,!€¬F-æ1(Ğ@©DÄ)°6R1¥¼± *ŒÊ€ !´£Ê !F­LÚK `‘ (Tsß¤z˜‰Óˆ¸( k HjuB
2)@b‚bSMÌ£m
FE˜.ŒƒA 
ò Ğ›ÑÄ¿¸Ã7WOuÏ¿çùüµ=|Úÿ~ï”P¸ÇüßŞ6WG­óG;NßÛ×«n—ÿpóŒ9ÿOj|õp¹:¯­şÓßé¯=÷ÿÿ½õoÏ/‡×Çw^Ÿtüzö}~¯½·=ÿwü~Âë§äyÿ”ø—ëçê÷K¬û×öÅ?Ön¦îß¿íöN’„ 3&e,E0Š‘êˆ0²$À  Ö·u …äQ@jA4ÆJ ÂĞŠt@"N˜ ‰J ¢Ø&°ã‚FvDvŞƒÁM¨q‡¨F!€‚Z†ì…pNâ6”Šopa)4â¥à‚½Pºf£>cò0Ø*(ù6ÿòw»>#·v­û|ïmw~?¦ŸÇısêõşÿzEv½?¾ö¿?…úÜ¹Î?^š>ñç®ú¼²×—Ş×ñ]¯§‚Ô¯Ûÿõ×šş’ıZYçã¿çÏÉ-¹ßµç°ş„Ù]^Ù¯uÄĞ?<ÿg¡»ı%ñòıº»Ş~ÿáKß}ı~:Ü÷Ì}ó8ZïwÕãá{{áÓÿ´vßÓhoÍU¨µÏ÷j4‘ÿşÿßmãîÿ¿??-û3²çş_Ñ}»è±Çf÷Û›³Èiü÷ï_rÛÛ¿ÿÙûú‹úÏ0îÿîïvŸıîóş÷?îOîş»êÛ§î¿ëTİ_tßPÛgûFĞÛóÿÙ¿ı<ûe÷?ûïã„D(ÆP0p£ —p	Ä-ÀqE3¤‡À2lˆYàQ"ƒ"TZ‡¢Ç–PŠ’ œP–ZŒ	ïÒDUˆ¤`)€rŠtrOZ Pà Ø¦~$ì •„!À)À¦Tu€AÜp»Ú¤üş¬ĞôÅkÿ<ÉùúüÏ^_zv¯²tuÙ¿w¿_ëìÿ¡_×õï]¾ïıñö-ûÿßÿ?qíáòVOUñ¼O…½¼÷´‡n’ßÏ¯÷YŸ‘ÕĞzëşıÑÚ~ÿ„éŸ~Íw¾tt™û^ÿ‡ÿóß—ë}ú˜ÿ¸Ÿñó°'^Ïş€q‚cÀtàÂ-X
‹ Á‘#Q‚4¢™JO!„Š‡R 6°!€j¹@AP‡¤ÈA %
ıBšÏh,u€
ÓQbE¤¨A6D)!J!QqE¢ Æá—L&4"MKÊŒL¡Ãd3aFæ„È‡tP6X$ çâ  G„¡0Eİx8¦0gq,¢^ÀG°+! °(‡+CFPsp)6„$–°’Ia°ˆ@“ ÔÅ1äaÑ1Ú2tE@0iA	ÉeÊfÒ”F„PT 1 1Y,ÖÛwóıSûòåï¼tÆ^y²ü3··3õUş›··Ç‚Ü›ÿûûŸËo;¿n?íÙÇİ»?¿ûÏ¤¢ß+¿´²şç“Ôï–¿·~º}·yó9OÎ–í«Ãmİ÷Yûæ=¯ûZ½–å¦ÄùŸw÷úà»üÿÿußóÊé›«ğÿíUÇ¦&k”UËaçDAÄd!Ñ´µê@EĞË V(4[Á6DOS‚€¬1q]03IhÀ„ÀRáY¹f¥Æ°1P ”s†(—¬
š¤BÓÁ SFAâCÕ‚ÀPÉÂhL.#@@SŒA"M‚Ò¡²|]öŞ«ß(û~N¿ùïÿvğ¿×ktËY—ööì7ı¯ÇÌç]/<v¯ÿ3ßßàxŸá^¼‡)÷Õ5ö—Öşa½ŠBïş¼¿m[ŸÑÏ¿ß×5?ÏışÙÖ¾İù{]Oõ[w¾äïyßwÏ{®÷öïío~òRÿã÷ÿóöòßœÒŒ–}|ë'ûü[5½Û@­ïV71Şqğ–—~u¿×ùïŸëÎo2s7ª“ö÷Ÿìû.j¹ZäÖI§$^µW³¼®ı£ë:{énşóîí÷ïùéÿiï;W¿ÇGÉ›şşY«zgWÿ:—î÷?Wmæo;y7Ø]ûåÚMÿ»ıûöó=»ûì÷ÕŞ‚¼{ıëŠ(1ÀÎ•U|@‹ k UDu¤‚ª@¢†€¨æ*/ :<! &ˆ#H(A4 *ø¦ÎÈ‹€:‘†VA(c•I E İA@
P…‚á DÇ,É@„¡!"…ÉÈ„DÆ* MH% ğ‚Ñˆ2a¡Îÿ¯ÓßÌíU·¯÷ÿÿófNß<™ã“ÿükş¹ıö°ùeûs7Yäï\ÿ¤õı5{ù{·6¿ïÿß}gæŞ}¿çÙêôÜÿÌyùo~÷=R×Y.ÇşÚïágn•Ï<¿×³ı?qØşÎ ·wv÷£Æıı¯wkg½ó!§ß¿wor >FmH¬ Á…UTH  ˜Ø r5zÁ·‰ĞXƒ0¤BB°p”Ø8@%  dx I@Ìa¦0a Â¨’ *pŠS¨İ\Èš"álAS"Èa£èòƒ{³Ad¨#”âÀî D@ Z‚ãÆl*0Ä*ÈQ:b¡<S‰!¥4«®?[ÉqL Ê‰H €dè¦ &T#!Å4A1HSP¤Cj `º Æ˜–(37 ,X"8 ¤r¢I’§fA"E—“]$`%9Â 1¨£&E À†85!”³µäíÇ—}çBæ_ÿŞÿoû«ûß<Éw~Zuÿÿgúµî½¸©oÉ?.óÉyÔ×·Ÿï©KmïÑä¿[úë|ÿÏ½÷ê¸Ø›|7¼¬û¸÷åx0g¼Å3¿Ï‚ª|ïÍ¼Ìß^ú¿û¸}U•ıû›úÒ»<÷+š^»W¾¸»ôûúãew¼†ÿ¿¼qıŞ‚oÀ€ 4aµ“14ŒCA
$""„šUCL.ä5$£¥ƒC±‡@ÂT¡¹˜ M…À8Û´€À!‰Ô"H¢uÀ 0Á…")•8BX“€4˜¶/æø™"9– IcG¨$^¢$ê·	ıÚïş¯ï'»ùUíŸí;¾Slİ«jn›ü§1ºüœ¯ş¿Ï`¯ˆ÷>ïûŞí÷İıw»\ÚMªÒİ¢v7~ûùºÚ¯êWğ¬ºy¿çºá¸›{mŸÕüOü¿ÊÌ·—õÑ›Û½óßşÚÜÑŞá÷eny~_ßî-Ëõß|>çûÙ¾ÿ]óî~¦¾û)^¨N=Î¿öŸâ=ºû¿rÑîÿÖ[¿ßò.õ®1ÿüõÛÿs=‡~Ï¿ç=ş³ÈÙïüYâ_&¶ãCÛ_ÿl÷ğ~æÛµŸ}Úÿ;»Ïõû[¦÷Şz›¹ù3?Öÿ›¹yk¯¶½ı?w¿ÍŸ?ÙŒïãŸMß~™
È¸r&—\=€ D"ˆJÀ€A•X€‚ŠÃm3¦6C6‘Ã|¢€1©E ¸ J5
£H@¬$ $÷d“@!“ŠB2ğ»C&U"µ† †yÀH€-6+ƒÍcÙŞ¬Q¤„( õg˜š… J sUÖd~{q«ùoÿ~ß±Wñ¤nøèºŸ?)òùoµúİfùşë_×µ½Õ:{óÖÌïıœŞüõÿuù/-î¯—2¹%)ÿwšb%ÿXÿìòÿÕ¹}ùõÌé!gäÕ÷¬Ãælå?÷ÏÖ=»ÿø/Ò^½îg“ïÏ¦©û\İ¦ö¿şÔßlgt…’‹ ØH0 'Ä™ @UğÄ !0ŒëĞ0T!†€Æ©
Äx„ @(š`7$T2d44$¥a$ ‚ :(²‚Ï‚æQ!Š!UdˆH´°ePqd"S 0 `,	$-ÓĞa@Â@ÄØá@
04!¨(y  R¬ †ÀÃ‰ "±¦J¥ĞŒ	&€ }ˆ !6”@` O AQ`Pa Ä!º)œĞ š  (Ä*RÜ Á ¸#%	ğ, ‚BJ‚V»pv‰Ò%#"JB@OAˆ0$k íŞ¿;ımÃõ|OŸíQÿ{ÿs<ç\²Û¦ëûã§ËŸ4wKö§ígw·¼òwì­îóÕZÊwO÷ıÇÎıÖ¿şê×¯º¿Ğg¾oö½Ï–ÿSıßùÿ¿³OúÙÔ÷G~e{nÖŠşöQÜÿ¯÷mÿÙŸÎ¬¬×ÎÖ¿ëú¶ßÿ]´ã Â*P"\@¸DàLPD	sš€ €TÔ`x€D€ïº¤TD
X!THÈ P"¢€@…ÁXåR
ˆ ×Hï+#Çb“#ôÈ 0­æ
ùYu6+@";1‘8J³Y!Ø]xC¡Çä2´ı}¹Î¼{7îÏ{t¼qùè¦÷{åÿ~yŸâK½‰çŞFÚYı¿¿ğÏßµæ½ëº»¹¯ı¯ı¯·ÿşçï§ï½ß´­Ë¡^ye«û;ÏŸ[ÏıÏÚ®çèÿ´ßgõ¾©PfÎr¾
ãeº)öÏßƒ%iÛLğ{ª·zï‹éëª-ïşüåçùÿê×ÿçü/ç¨_Š{Û‡ıáÎ÷Ò¿Äu~×õyşOôÿÒoÿİ×˜bô®şûm^ünü–}ÿ¿ï·ö}¾éOÀ~Öîÿ&éë•wü”ş{ÌŞ¯ÏóÏw»WŸ½]ïÿ\ùŸôÿÿî÷VÜÍßEÛñïÊûsŸØûšï»}¿¹»ğ\]¶ŒBäv(‹`¡„°b‡„J¨€X4Ã$ €4b‰Ædä8•%<bX@"
`Úš»âVÀ3A¥g`=*ä™ó	;š$0–!’è°QòLh¥å‚(B E(!³Q8j„ ³à“3 0À7³ ‰*cope || settings.scope;
        settings.async = settings.async === false ? false : true;
        settings.data = settings.data || '';

        XHR.fire('beforeInitialize', { settings: settings });

        xhr = new XMLHttpRequest();

        if (xhr) {
          if (xhr.overrideMimeType) {
            xhr.overrideMimeType(settings.content_type);
          }

          xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);

          if (settings.crossDomain) {
            xhr.withCredentials = true;
          }

          if (settings.content_type) {
            xhr.setRequestHeader('Content-Type', settings.content_type);
          }

          if (settings.requestheaders) {
            Tools.each(settings.requestheaders, function (header) {
              xhr.setRequestHeader(header.key, header.value);
            });
          }

          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');

          xhr = XHR.fire('beforeSend', { xhr: xhr, settings: settings }).xhr;
          xhr.send(settings.data);

          // Syncronous request
          if (!settings.async) {
            return ready();
          }

          // Wait for response, onReadyStateChange can not be used since it leaks memory in IE
          setTimeout(ready, 10);
        }
      }
    };

    Tools.extend(XHR, Observable);

    return XHR;
  }
);

/**
 * JSON.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * JSON parser and serializer class.
 *
 * @class tinymce.util.JSON
 * @static
 * @example
 * // JSON parse a string into an object
 * var obj = tinymce.util.JSON.parse(somestring);
 *
 * // JSON serialize a object into an string
 * var str = tinymce.util.JSON.serialize(obj);
 */
define(
  'tinymce.core.util.JSON',
  [
  ],
  function () {
    function serialize(o, quote) {
      var i, v, t, name;

      quote = quote || '"';

      if (o === null) {
        return 'null';
      }

      t = typeof o;

      if (t == 'string') {
        v = '\bb\tt\nn\ff\rr\""\'\'\\\\';

        /*eslint no-control-regex:0 */
        return quote + o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g, function (a, b) {
          // Make sure single quotes never get encoded inside double quotes for JSON compatibility
          if (quote === '"' && a === "'") {
            return a;
          }

          i = v.indexOf(b);

          if (i + 1) {
            return '\\' + v.charAt(i + 1);
          }

          a = b.charCodeAt().toString(16);

          return '\\u' + '0000'.substring(a.length) + a;
        }) + quote;
      }

      if (t == 'object') {
        if (o.hasOwnProperty && Object.prototype.toString.call(o) === '[object Array]') {
          for (i = 0, v = '['; i < o.length; i++) {
            v += (i > 0 ? ',' : '') + serialize(o[i], quote);
          }

          return v + ']';
        }

        v = '{';

        for (name in o) {
          if (o.hasOwnProperty(name)) {
            v += typeof o[name] != 'function' ? (v.length > 1 ? ',' + quote : quote) + name +
              quote + ':' + serialize(o[name], quote) : '';
          }
        }

        return v + '}';
      }

      return '' + o;
    }

    return {
      /**
       * Serializes the specified object as a JSON string.
       *
       * @method serialize
       * @param {Object} obj Object to serialize as a JSON string.
       * @param {String} quote Optional quote string defaults to ".
       * @return {string} JSON string serialized from input.
       */
      serialize: serialize,

      /**
       * Unserializes/parses the specified JSON string into a object.
       *
       * @method parse
       * @param {string} s JSON String to parse into a JavaScript object.
       * @return {Object} Object from input JSON string or undefined if it failed.
       */
      parse: function (text) {
        try {
          // Trick uglify JS
          return window[String.fromCharCode(101) + 'val']('(' + text + ')');
        } catch (ex) {
          // Ignore
        }
      }

      /**#@-*/
    };
  }
);

/**
 * JSONRequest.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class enables you to use JSON-RPC to call backend methods.
 *
 * @class tinymce.util.JSONRequest
 * @example
 * var json = new tinymce.util.JSONRequest({
 *     url: 'somebackend.php'
 * });
 *
 * // Send RPC call 1
 * json.send({
 *     method: 'someMethod1',
 *     params: ['a', 'b'],
 *     success: function(result) {
 *         console.dir(result);
 *     }
 * });
 *
 * // Send RPC call 2
 * json.send({
 *     method: 'someMethod2',
 *     params: ['a', 'b'],
 *     success: function(result) {
 *         console.dir(result);
 *     }
 * });
 */
define(
  'tinymce.core.util.JSONRequest',
  [
    "tinymce.core.util.JSON",
    "tinymce.core.util.XHR",
    "tinymce.core.util.Tools"
  ],
  function (JSON, XHR, Tools) {
    var extend = Tools.extend;

    function JSONRequest(settings) {
      this.settings = extend({}, settings);
      this.count = 0;
    }

    /**
     * Simple helper function to send a JSON-RPC request without the need to initialize an object.
     * Consult the Wiki API documentation for more details on what you can pass to this function.
     *
     * @method sendRPC
     * @static
     * @param {Object} o Call object where there are three field id, method and params this object should also contain callbacks etc.
     */
    JSONRequest.sendRPC = function (o) {
      return new JSONRequest().send(o);
    };

    JSONRequest.prototype = {
      /**
       * Sends a JSON-RPC call. Consult the Wiki API documentation for more details on what you can pass to this function.
       *
       * @method send
       * @param {Object} args Call object where there are three field id, method and params this object should also contain callbacks etc.
       */
      send: function (args) {
        var ecb = args.error, scb = args.success;

        args = extend(this.settings, args);

        args.success = function (c, x) {
          c = JSON.parse(c);

          if (typeof c == 'undefined') {
            c = {
              error: 'JSON Parse error.'
            };
          }

          if (c.error) {
            ecb.call(args.error_scope || args.scope, c.error, x);
          } else {
            scb.call(args.success_scope || args.scope, c.result);
          }
        };

        args.error = function (ty, x) {
          if (ecb) {
            ecb.call(args.error_scope || args.scope, ty, x);
          }
        };

        args.data = JSON.serialize({
          id: args.id || 'c' + (this.count++),
          method: args.method,
          params: args.params
        });

        // JSON content type for Ruby on rails. Bug: #1883287
        args.content_type = 'application/json';

        XHR.send(args);
      }
    };

    return JSONRequest;
  }
);
/**
 * JSONP.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.util.JSONP',
  [
    "tinymce.core.dom.DOMUtils"
  ],
  function (DOMUtils) {
    return {
      callbacks: {},
      count: 0,

      send: function (settings) {
        var self = this, dom = DOMUtils.DOM, count = settings.count !== undefined ? settings.count : self.count;
        var id = 'tinymce_jsonp_' + count;

        self.callbacks[count] = function (json) {
          dom.remove(id);
          delete self.callbacks[count];

          settings.callback(json);
        };

        dom.add(dom.doc.body, 'script', {
          id: id,
          src: settings.url,
          type: 'text/javascript'
        });

        self.count++;
      }
    };
  }
);
/**
 * LocalStorage.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class will simulate LocalStorage on IE 7 and return the native version on modern browsers.
 * Storage is done using userData on IE 7 and a special serialization format. The format is designed
 * to be as small as possible by making sure that the keys and values doesn't need to be encoded. This
 * makes it possible to store for example HTML data.
 *
 * Storage format for userData:
 * <base 32 key length>,<key string>,<base 32 value length>,<value>,...
 *
 * For example this data key1=value1,key2=value2 would be:
 * 4,key1,6,value1,4,key2,6,value2
 *
 * @class tinymce.util.LocalStorage
 * @static
 * @version 4.0
 * @example
 * tinymce.util.LocalStorage.setItem('key', 'value');
 * var value = tinymce.util.LocalStorage.getItem('key');
 */
define(
  'tinymce.core.util.LocalStorage',
  [
  ],
  function () {
    var LocalStorage, storageElm, items, keys, userDataKey, hasOldIEDataSupport;

    // Check for native support
    try {
      if (window.localStorage) {
        return localStorage;
      }
    } catch (ex) {
      // Ignore
    }

    userDataKey = "tinymce";
    storageElm = document.documentElement;
    hasOldIEDataSupport = !!storageElm.addBehavior;

    if (hasOldIEDataSupport) {
      storageElm.addBehavior('#default#userData');
    }

    /**
     * Gets the keys names and updates LocalStorage.length property. Since IE7 doesn't have any getters/setters.
     */
    function updateKeys() {
      keys = [];

      for (var key in items) {
        keys.push(key);
      }

      LocalStorage.length = keys.length;
    }

    /**
     * Loads the userData string and parses it into the items structure.
     */
    function load() {
      var key, data, value, pos = 0;

      items = {};

      // localStorage can be disabled on WebKit/Gecko so make a dummy storage
      if (!hasOldIEDataSupport) {
        return;
      }

      function next(end) {
        var value, nextPos;

        nextPos = end !== undefined ? pos + end : data.indexOf(',', pos);
        if (nextPos === -1 || nextPos > data.length) {
          return null;
        }

        value = data.substring(pos, nextPos);
        pos = nextPos + 1;

        return value;
      }

      storageElm.load(userDataKey);
      data = storageElm.getAttribute(userDataKey) || '';

      do {
        var offset = next();
        if (offset === null) {
          break;
        }

        key = next(parseInt(offset, 32) || 0);
        if (key !== null) {
          offset = next();
          if (offset === null) {
            break;
          }

          value = next(parseInt(offset, 32) || 0);

          if (key) {
            items[key] = value;
          }
        }
      } while (key !== null);

      updateKeys();
    }

    /**
     * Saves the items structure into a the userData format.
     */
    function save() {
      var value, data = '';

      // localStorage can be disabled on WebKit/Gecko so make a dummy storage
      if (!hasOldIEDataSupport) {
        return;
      }

      for (var key in items) {
        value = items[key];
        data += (data ? ',' : '') + key.length.toString(32) + ',' + key + ',' + value.length.toString(32) + ',' + value;
      }

      storageElm.setAttribute(userDataKey, data);

      try {
        storageElm.save(userDataKey);
      } catch (ex) {
        // Ignore disk full
      }

      updateKeys();
    }

    LocalStorage = {
      /**
       * Length of the number of items in storage.
       *
       * @property length
       * @type Number
       * @return {Number} Number of items in storage.
       */
      //length:0,

      /**
       * Returns the key name by index.
       *
       * @method key
       * @param {Number} index Index of key to return.
       * @return {String} Key value or null if it wasn't found.
       */
      key: function (index) {
        return keys[index];
      },

      /**
       * Returns the value if the specified key or null if it wasn't found.
       *
       * @method getItem
       * @param {String} key  ¨>ˆ`½°Ã@aGVØábAŒPˆ Á‚ 	%‚Ñ•ciM¡A†ğ°p€òB€H@€/‹ˆòNÃ€`.ÕÁCB‹0…$†(B‚ñ¤Aä‘á*›”
1&D%	#8@Â%ˆâi¦ –|u{óãJİ°ãİŸºí¶ûĞSñ„ÕE§æíB·‹™o–’OÏoY±º²üÄœ­YšÇ´Æó'û/·ŸØW.ışêŸ?F_ı³v5dsİ=ò_Vû/~oñ3:¯ï¨;uŞî³ıJßÁë/¶û~MkÆm8[ºı÷×Ç7~¦­Ê÷ö³?Ä{5ÄºÿÎßÿóØ¾ÿŒnÕì|¥UŞ½ïÙU½œ_÷*|WæŸTKªMïGr2Ôş¿ŸŸî[[-ş¯nó°¤İ|×Ğs5}d(Çm¹üç¿ûu
W:R#=ÆîıÓwM}Ûöax­‡ğ€}O¿g×‰Ü—ò]·èû£èAV Ä)@BP€ 02T…Ø6Á@@Áà­Bãi
€@€Àˆ&p†Ä8 
†)U T&Bã$[h0™„J6eíƒ‚ Ä„e  @- „Ñ hAˆÁ‰¼E$†*Ü‚€4:   £ F úp¿Ï²LWßûå;’kozsšâ%Ïn]ïå6û_··ØïUég;/[¹mı¥ÿ sú./ÎãİÖz»>ÁĞ=õ­÷Î%ğÇ·û·÷?åı—üy¦éÜsÏó/×“Ó¦¿Ztâ¯6ëü:uòé¹ÿíÏ^`¶ê¿±Á=şU¶ß (|CNX/èõ`¸Z`ÀÖ   Œ  æ @³18‘qH[ °°‚"¡P‚È$ ˆÀ‹¨D[ÀTS@—¢‡IÆ*”2€±p”Fª(š$Á¦`:.e™ú‰Á0ñ	¤Ú :`ÀÄ‹BBÁ4 Ybé ‚€@œlÑeej È €‘ü8PÁL&E0Ó
 W‚@Ÿ0B¥ê@Lp š  $€0XQ€Ì!f!ñ"£°¦Ê p€ÈèÁŠPÌˆ’DœƒÌC  K(U  Z&,âaÖçuæçı÷ñÿòÁ/£ş_wª9G!4ß”hıÔÍ1Ôyü-ÿ;×¶µnŠ{ğáÿïe5K¸ı5^ó_PuËû¯zùwË]¹Çò65RßcÏc±ßãONƒ_~_ºk»‹I§¡}»ùûÆúü?/®É_o¿ù~Oêÿ}ûXWıÚŞ\
Á¬¨BÊt… äXb °‘P ZF¤€ {ğ¦¢^x	È ÂS\„ˆR ÀÓh*42vÒ@ƒFIcÀ4ä(ˆB`N*m Ø•Ñ8BÔJPŠ@ Â”K	(b‚ˆ‘ddÈâ¾©åu ,ˆ`A F‰Foø¿ç÷Â_¶_[k‹v³ÿÖúú¯éÚPsğïÿùÿ÷ÙBñ×«Ş¦ïyŞ-RgF}íwñf<Öéå¼9æ€÷Ÿûß?»ÚŸoÓ{K}ña[9×3~u!Ç_/T^Ÿû´ë?¯ûÉ2úy³†²åüìó§÷J°›o:„íÇúWßjqïÓÔå§=ûãfk|œ“`êÿÿ‡_lè¿ÿöø—öëZ[_ıÿ[/¶>¨İ}í‡_£şwîÊtÿ§g=óóïòZo7W=^nËïŸâc6;ºßÿ=9·wü|¥óñóŞŒ%oÎöÂj?z¿tæ•oÖÅ_àS÷+šeësµ']ë_û† ²>•@‰%‘B¤d„X  „@RbBqÀ0J;”C(Ù2$aÁ~@\Uà ­— `!%P¢JªáÄÕb€ÀW•” ’‘ X P.Œ€a@°€ù c`	®µ QÆ D”d”:‹	Lq@—ÃlØq¨o÷ÎLÜ—ş|Õû7¶îŸÏoÑ~ÏC;çû¶ê//}v{5xÎ½J<îR=ÛÊ?ûf¼y±Oû¯T¯·»K{°oíúÏ­|íãsƒOzmÇÿÕkçşéG¿kî¯.àrvgÿzıûº¿ÍowÇØ~^¾[ú/ˆıÖ\zÏ}j€‚™& 5lÙVxI0¯Ä@¢j…
Ã2AQŒÅ6€"
 $!‡ €(È0DRp€¨ˆ™sÒ¨0KPñ@ ¡Idm1'…•¡!d°CÄ‘4’šºP¤‰)˜"1PA`”EÀXù
A@
	h!T£€p 5×‹ Ê4ÒD @€8FÈ (@ .tÏ‘‰ˆ- Ù€¤p¨Ø˜ š09„ ÌíeBìÁB"cf- Ğ$ yS¦eš@p²DÉ;Ëºgp@~Ívôë¿çİË»¾ö+øâGaÿ½üêê¿?{k_Å×goß=úô®Û×ïÎót³'÷ÿšĞkú?}uşÓ9ã’¢.˜¾êû·¤×;ô-Şå>ÿïLk.7õé§t7“wòâÖni{¹DôªÚİµıÖÇ¿¸qÏ´â7Š/„€¥­€a1UÂYœÒX*ŠC’,$
 ÈğH„ŒŒL¤ †ôIl •HL™#H((°‚ HqÒ« äÂA€É£4"™ƒˆŒô‚ó”˜) ä#Q
$	“!Ü9?í}ùtq³Ş½o|våñ²¯y}·fßº.m½ÖáÃ®pHŸşñ=ãŒƒË[¯çşUïGÖ5¼ŞQ	~&ÕÕ÷k^mŞäSoÍáŞæïÓÍÚó;NŒvK!iÛ¹OvŸ|x'û“Ã½[Ææ†ß¦^^ÿo|¿÷oı‡Ûà¿^å7åOõç[òô[í7¶GoŸ·üoïö~Î¸æêŸ÷®ôkûõƒwOù®¶ÓÔÿgxÛG¹âÒ¿(¿×]†PËëæ7,²}ßßy_h%ı–‹ıïİ_ÿMGÒŞv½ÿÇõÖCû=_yœÏ–÷·7İ¾Fäîgùv¦o¹G‡gäoÿ,') (3‘ `¥©Ğ,AŒU%  Ğ!‰?PD˜	DYŠšŒ¼NùY‚q`Œ *Ğ¸€‰Âa©lA`Ô"Àœ @H„$ D%ÑØ„NºƒD‘B«€! £Ñ„	 -Oƒ : q˜í8@9İ–õöÏÙ÷ŸÛó—ïã±•çF÷]ÿâ?cÜçÖùßİŸoi?şÏX„C„ÕÂÆ—RtSyçßsjïÿ¼Š¿fñGë–±'=ÿÍküÛˆ¿Ğ×9‘ÿ/Ò—òæü•ıÊ¸–ï[ÿèúúyØÿûV¼¯(ÿ{Û§íWõ½ÿÍE®FF ¸BN„ AœH àŠ	)PÌE" „I `l+ªXƒ $ @DI,íDJP³ğ ]p€$·…¯Ä„)* )Ú5d ¢P7†‚b€2B 3	A °Œ¨C ¡ ¤€ Í6ˆZğfI¡ Æ@¯Áh¼TÎ€ëÈAº“H´™°LBd/É“£B0©X@ğD$Êµ‚˜ˆI"Ä ˆ@ ´Ø"5F`¾k\„„C® †0ú+kâA0TĞ@•YÒ yˆÆ8ÅHHB$ÃEbÚäï ¼È?ƒ¿ŸåÎ~õlúw½³î¼L=\ö·ûoõ^í¯K^]¯,œóÏ»ÛÖ»ñ'_-²Ûbör¯ğoû_Üyç=·ÿÿŞò¶×Óc¾O¼ğW–n·ímû÷øy»Ş÷ÒF«~ï!8ğşO*ï~nÛ÷ôÏ_ù­·õÆë§Î[{)ÄM8Î°0á …B‚PÕ9@¶f@  Eæ­8wCO 
1ƒé¡(â7 P€¢´dŠ 	TJ	¢X…@,J€-®
:Vÿp4±XQ† Ne&Â(Ä H¤T€#¶–U)€”ØÚÅ H›C`%wş»¯×¾%5ÿg„Ö„éİ3ß%Ÿ>ø0ı÷Ëê·îã¯¡>y?ÿTæ#ÃÇ—ö{_oÆlûJ7'ïSÏòÅí¿üı|ÿİä÷ºç¯O‘ØägWuÿï3°WO¶·7s½ÿÿó´–»õuY±ÎU}æ°«?«gw·oë³ºİî–Z²ÿfrÅq÷»:³×ÿÇšş÷'ïİ<Òı½õé'ûğ_Î9?–Õ¾<?õ§Wïı¿÷âBÍö¯7—©q'vX§ÛóNòşï¹¬‘¶gUú­5<ø$7ÿö(N¤‘ùV¬gWÏÉXty›Q“}ï¯_‹S¬¶?¿óW'A(S.1%’TAã˜ğ‚¡Âj¹’¡ Ä‘‰	Hœ mh#P&H(- }B€Ğ à"‚\x)ğ…C°ˆ‰p$KH Š†§Œ @(€P èåF€N@"( M8xæ™D`§»€‘xÁŒt 	 ««û›ç5¨íú®ÍU-iâ—íšûÍµyoïç~>zè~ûGÕÛ-uÖÿÌì·L¾T>ï÷U?ZCú^ëşç6_µ¾wØY¾Ì÷ïCÿÖåO¶ûPFë2±£±RÿÍ¥_N5çÌêa¦iU×³ÿ»Ÿó>aı:—¾ÚFû‘V4CC ®’`#ƒR,ö=e†F3…e”ŠÀ‘4R€yæ 0Ò–€ ]0  
Ô 4¶0@Pé•@¡@XiRÔB	‚ ‡Ì1ˆ I …1ÄpQ¤‚8Ğ4SX –ÀRŠ   " ŠVFƒ-"„BŒ„²
D  "ˆîÀP8(H”-‘è‡ D®€¬IX@QR¢…ğˆBP1tÂ A $J0BAaTXÙ€Š`QÈ×Ptù P¦VH  ²#Ä)Œ 1hp ‚lp4‹’e‘ÔHT ,I"ˆ:Oà3KÀ >…$5P~GÖgÛÛµfúÔÚ°ÿîŞügHÙ–ÿ8Ìvo8—µ÷Ü¹Ú¼–¿ß3ùıï³³çu÷¯Ö¯~şûçb:L+Ez=_µ>ÏßöŞ›ó|İôİ»™mßT¯Giı\ÊNÑ^ªwégëø•?ˆZçı^õïVñ}§­IÁKûÿãÃUßwı×F`¥}ßàV®»õmÿ[ö¤e÷ìÕ_Gü?Ë½>Yµè¿¯ÚÕ’ç7Ìã·»l5÷Íû-xı{‹§¿Õº¶O9§3TC—_z,œV-ËÔ^¬¾7òŞ{ä÷_öwV¾èÅ\© 7ÿ”Ÿ‹oÜŸË™<ü-öÿÛ´™ıˆL#D(	fJe İs¤A Xâ„À @]Ñ80P!òr05IXXà©qäKX4Zª‘ *ØCl0Vb-,Aƒ]e–JÉŒK)ªª5!  IpC#NÒ•5#}Œ%ÂuiwŠøÍä¬€(àbÂ©0¤È†Pè€¸€ŒÄ“¦ê \X0$‰@Áˆ ª×Ğ²C,…„ R€ÚG+ 2L† ÈÈ!É²H`ƒÂøC ¼P‚uŠ+I8„GàDPÈˆH;`
cLdE° #œÂ@3…åI(Œšå€„T8 ˆ©Ü)Ç$£İ—óçLIİ¸ke;j£şïûaÛÕ-ş+ßgY]}*¸voé:×ÏÎ¡¿~c·Ğüzø½'m¦Ço9ú?ò[*¨’|¾5Æo,·ïçû-:øX
uşeWÃMŞkÿäíÿÿo¯œ¹ÑÛ®küÛ<ÖV'E—ãŸôsÇÎé­ıxµÏíy¾  @O
%Œht€+•(±!Êv°ŒÌ*Z(!Š´uF€a<ˆ* A(¤8Á2UlôHŠPAD0„ Bèj›¡ĞÀ´H€d ‘Ëàq²$c¼+,‚°, â@ , *(BA7z'Z |Nú„D&Šé–‡ª¥¿{şŠî*ëwW®ù;›÷İ¹Èñ…Å·gÛAç2]÷'ÇS¿”SßÛ{omŞúÎÖq?À~çÅ›¯MíÙ%[“2/–?wİ,¹ó¿÷úıŒ~/‹oÑoşé:õ¥‡ïwKİHî?oV=u"E%ë=ºÂÓBF¹wj~Ëm¯¾ö_«O|‰q#=zÿøFëX_‰ıò××g¹Ëÿàûå/ÚkÈ+Ê­%H­ıêŸt®bÿ,ë»·¥j¨±î¾7Úk½â;ŞlÛïJ—›kVşÿæÜ½iû“ê—Ïo¯WâšòûgÕĞ|”~WÅ†O?Æûş¾µ_İå´¯¸×À¶ı«QÆ$8a€Eb@Fğâ`J$÷`@‘PB–&€	AÍÅñKB	áÄ€f ‰ €Ã 8¢D“$Q(Âpa ’€Å-UFVm±"P2R  2ò PüĞR 0FàXC"š ‡’K #[¿í¿5¯·5ÿqX×å}>í>7ÙüÇoC»÷};Yû÷02ôçÅª÷¤İV…kÚ›Coë®|ÖNŸ,ó½úŸ ÃÏŸ¥Ö?‡WúıÏF»Ù´>NßÒñ¾¹ß¿×9[?ş¿ß³İ/.½µÿEõ¦g-¯úOÿo¹_Ç¢[Úıïjª	a.IA$Ä#Ôˆx€”ØlD,„&¤K¨¡ €B	5 † #BAÃ8$d¼ ØN(€Áa\ˆ ‹$vA„E«‚c §JPÁP AÊÈ x à x€<`,B´ÀQ9PaTd!QÊ=5 †Â„-GHˆ°‡èØ
¢\l!`¼r0•K°%ÑCxU€³0‘5ô2 ÊSÔ É À·” 9Ü Dä µh	 Ïs¢$nP“§  Â
@€•±
ÂAÒE
@£áâ@4™‰¼@È|À‘!Üúw+ü;âÊ¿qÒ˜ÿ_û™ú*~Òº«éëğüºí[Í¬õ÷ß­f×ÛoÌ\Îö–¿½lé<ş“5Ú/õ?ÿo­û½&‰—ıñvÿw¾ÿm„·ÀM•e+û—Ym%º:µ´·dï1,º~öt£‘õ¥7Íä¼
õâw×ï¬†şÒ3ılŸ´\â«  ›ĞëØ ·˜“¨à@€½šQxf-‹ƒ ŠzÇp õÀd]ï!Sµ9R ‰	< Sd …S’Ål/È©PLTP¼ña!D &(ƒ ô0	¥ )†F/ÄDè 0"±‚kyÌTá†îç×í>N7í^Wûh7¿¨ú5ıs?Ïğ¥r~~ODó¼·gíÙçœĞ·¤ı*§§˜C”ÇHûxÌæçßçâq3?ßïÆY­\A–â*â×óÎ•y$kî?Ö.l¯Oõq=â»U÷ù?Ï×=)¦½—7ó›í-[Ÿò’¹~g—õFßë—ïıë/³ó¹k•ïç¿Rÿ¿«vWå.º_[M‚“˜_­zOszÜÁ™É,÷R]g¾oOÏùıûßşî5~/ãÉiõ©°Ïíí÷Fıéb/¡ùZô¯~£_ßúWÿ}ıß{}ékŸ}Ø®şîÎœùŠ1üW}ÿ›èˆ 	u,h/ `Ø ¨R$‰j‘*" jx”@ ½ Öáx SÑ+Ñ K ©Ñ”)H¢n‰#!°˜©`’@Š¦9°"`Áp•BL	aC[À±)‰á`Q¸%€)i¿tA ˜Š›]rá¼©<Ä­å³9ìÿkW¯‰ç}ıyo÷oU»ı&•[¸&îÛçû7P_«ZısW÷Ç¬_Tàß{´Zø ´·÷İ/KÜ±]m¯š»·×5ã¯¿»ùİgî¿'üqíõÿ)ŞZ¯ß›êğ*£1×ìyôÜ/_ßĞ\ËÎfi(= “ÄôÁ  IŠáÒP³À pã@"$"å"h’Q‚w ‡ĞÅÁ ¨€w0” €t%	†L‚• ÈQĞĞ$KMFô à‘xD"6# ¡(H" 0J	,"„< c& ‚
‚Ñ@`€
(ÆØ	ğ@€b+ ¢&€ˆÆE€
1‚ƒh€)nˆ±‚€ ØbP HTšK8H¢90@hBh0Œ@0;$‰êU^a™+ #A„Q‰ˆF…h€,é†£VV @ô
š `Ñ(¢„y7íf·æïÿğÿGÖ‰E¾z#†yòzÿí>õ]şkßÓ÷Ş_ÃÉ-Y‹ç=çüOâÒj°çàÑÔwùçÖEÕoG-ı/Ïúm«ö“õï‘oÏÿïÖk±k¾Î¿®n?¯wvÇıÿ‘áwoôûy-7=ZO³ßWş«—Œò@HĞ®¤€Ä`v ˆd²o	A'Üƒ‰€GBd$P	ò ( Cˆ,I4¡Âœ @TcqÊ` „Å Ù\ xH`@DÁ1 ¨Q&ƒ’"Š ÊP²ÛK0ˆ(b0`H„@‘Z†Ÿèî¹ò|Ï^ªD^òu¾ÍÜçF»ykŸ"ıîÛĞÿ›«¶9uiVIÜı®ê·|£÷š¢·Ô{?o¹ø~êÜÁ¥—º¯ûgs^>áìÑ7glôÂ#|ù>şö©cgfûÿ/oã%±jĞõkí—/ÿüÙ¸î_:lYïk}¿[ïŸ+ı÷w×\î¾uòÿa"nù·
.ïÙ?<ı±ÅÚ¾İÅQ¯äÂ¿£x^oÊİ¡Ÿìy_Éî"ı ®wßãŞY¤Øüãw~~WúiÛş·ÒQÕú¶ğÇßÓu¼}Ÿï1§×_v*¤ü×[ÿ˜íÌõŸ×;cbVšß~în¿h)0Ø# 5Ü€r6V1eÄ3 Š1~\ hAÊÃ‘,Dˆ Á˜²‚$Là(B AáˆK8|ÀT˜
pB"¡4åHf$IÂ4Æà„BA	N€ÁÀ²\ˆÈ`,PJg„àsCÿâê6ÿGÏà9j¯ö”£µén&ö¾×Å#÷<#›ügPHîüÛßz_Ôøß9{õ_íı·+ÛÿYoÇ3—.Ôå_öWïµqÛrw}¯İNo? ¦öÚ«i~áwçs¯½w”ÍÓĞ¶vÏ›ñOÇşÜü2êôÿ¨C_8\¾?¿ÜGBdy4‚ä4s9MÖxœ.î È²A$wgl
À=‚d(˜èBhÓ *8wŠÓ0ôA‰A€eÀ^‚ 	€ ¸ bQ‘Ê` aØ'@„ÙµP@ˆQ¤%) .@p‘Â‹ŸR"
ñã’áUŒÌp>À’Â ^…œGÃ É0ãA€ ˆà”2; şcE.Ä œ Nc¹påT€`À Š"cÄ  Êxlˆ à„0  „€ Ñ "0ˆB@LEØ!@S6¢fxA@|#6’iò pIX aLıŞw\¶=¼|x,OÕŞ‹ù}…O3÷ÒûnUßü¥l÷òUq'³?_ºŞ•l÷.{Çûæw×Õÿ£Oª¹ÿes«vßg{ÇïŸ?ØÉ{ôfïÿ÷#×uÿ{çñĞÏıßŸË¿×ÓSp÷_ö¿Šï\ñûäû¬½‰ß>WõãÏöowG|şn-Ô3
CB@@sIj`00IaÈ$9`"H&Dp”À6 R“[qˆ€µ  r¯€p€L#‹ä fCR	 –D²Aš42¬9!™m5&°‚ˆHÀ%AÄD+½jBä‚EpÍZˆ)V\·–6Noï>ùNñíw=Ÿ¯Ş¯÷›Çíûxÿö|n_}7æßÔÏÄÎßkáõ‘òëm¿?ıÿ¬ºìæuèû©²çX¤ôÓõ›v¢˜x¿îJö¼_(M/ïR~3¯WNUgoÏT0k´»oÀ·Ö÷/½%fìÇ>iş¢¿ğµÃ1åØWïì¿	Ş°Çf¿×%ÿÜw]ÜAuûŞ°.ü#~míº·Õæ3wöŒûŸV÷)Hm}‚“ğ³^7óÙçí¸»[÷xj÷-_¼ê1ºåİíïz/ıû—‚ş²¬õşİ÷éİšõ?üó÷/™2jçJÏ×³n9èò²½ó»ÆÏÕÕïşõ ‚ˆG¥u°‘ Ş¤$Ë*¹•Âu/bÚÂŠ@Uå˜Äd¤8€d¡(4‚¥2¸XŒAUjjs ÈˆÊ æ&İ9ò"  
b Zˆ@"" C Å¨ C ƒ `@j GN%*’8 $B£((matches = /rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(value))) {
            r = parseInt(matches[1], 10);
            g = parseInt(matches[2], 10);
            b = parseInt(matches[3], 10);
          } else if ((matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value))) {
            r = parseInt(matches[1], 16);
            g = parseInt(matches[2], 16);
            b = parseInt(matches[3], 16);
          } else if ((matches = /#([0-F])([0-F])([0-F])/gi.exec(value))) {
            r = parseInt(matches[1] + matches[1], 16);
            g = parseInt(matches[2] + matches[2], 16);
            b = parseInt(matches[3] + matches[3], 16);
          }
        }

        r = r < 0 ? 0 : (r > 255 ? 255 : r);
        g = g < 0 ? 0 : (g > 255 ? 255 : g);
        b = b < 0 ? 0 : (b > 255 ? 255 : b);

        return self;
      }

      if (value) {
        parse(value);
      }

      self.toRgb = toRgb;
      self.toHsv = toHsv;
      self.toHex = toHex;
      self.parse = parse;
    }

    return Color;
  }
);

/**
 * Layout.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Base layout manager class.
 *
 * @class tinymce.ui.Layout
 */
define(
  'tinymce.core.ui.Layout',
  [
    "tinymce.core.util.Class",
    "tinymce.core.util.Tools"
  ],
  function (Class, Tools) {
    "use strict";

    return Class.extend({
      Defaults: {
        firstControlClass: 'first',
        lastControlClass: 'last'
      },

      /**
       * Constructs a layout instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       */
      init: function (settings) {
        this.settings = Tools.extend({}, this.Defaults, settings);
      },

      /**
       * This method gets invoked before the layout renders the controls.
       *
       * @method preRender
       * @param {tinymce.ui.Container} container Container instance to preRender.
       */
      preRender: function (container) {
        container.bodyClasses.add(this.settings.containerClass);
      },

      /**
       * Applies layout classes to the container.
       *
       * @private
       */
      applyClasses: function (items) {
        var self = this, settings = self.settings, firstClass, lastClass, firstItem, lastItem;

        firstClass = settings.firstControlClass;
        lastClass = settings.lastControlClass;

        items.each(function (item) {
          item.classes.remove(firstClass).remove(lastClass).add(settings.controlClass);

          if (item.visible()) {
            if (!firstItem) {
              firstItem = item;
            }

            lastItem = item;
          }
        });

        if (firstItem) {
          firstItem.classes.add(firstClass);
        }

        if (lastItem) {
          lastItem.classes.add(lastClass);
        }
      },

      /**
       * Renders the specified container and any layout specific HTML.
       *
       * @method renderHtml
       * @param {tinymce.ui.Container} container Container to render HTML for.
       */
      renderHtml: function (container) {
        var self = this, html = '';

        self.applyClasses(container.items());

        container.items().each(function (item) {
          html += item.renderHtml();
        });

        return html;
      },

      /**
       * Recalculates the positions of the controls in the specified container.
       *
       * @method recalc
       * @param {tinymce.ui.Container} container Container instance to recalc.
       */
      recalc: function () {
      },

      /**
       * This method gets invoked after the layout renders the controls.
       *
       * @method postRender
       * @param {tinymce.ui.Container} container Container instance to postRender.
       */
      postRender: function () {
      },

      isNative: function () {
        return false;
      }
    });
  }
);
/**
 * AbsoluteLayout.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * LayoutManager for absolute positioning. This layout manager is more of
 * a base class for other layouts but can be created and used directly.
 *
 * @-x-less AbsoluteLayout.less
 * @class tinymce.ui.AbsoluteLayout
 * @extends tinymce.ui.Layout
 */
define(
  'tinymce.core.ui.AbsoluteLayout',
  [
    "tinymce.core.ui.Layout"
  ],
  function (Layout) {
    "use strict";

    return Layout.extend({
      Defaults: {
        containerClass: 'abs-layout',
        controlClass: 'abs-layout-item'
      },

      /**
       * Recalculates the positions of the controls in the specified container.
       *
       * @method recalc
       * @param {tinymce.ui.Container} container Container instance to recalc.
       */
      recalc: function (container) {
        container.items().filter(':visible').each(function (ctrl) {
          var settings = ctrl.settings;

          ctrl.layoutRect({
            x: settings.x,
            y: settings.y,
            w: settings.w,
            h: settings.h
          });

          if (ctrl.recalc) {
            ctrl.recalc();
          }
        });
      },

      /**
       * Renders the specified container and any layout specific HTML.
       *
       * @method renderHtml
       * @param {tinymce.ui.Container} container Container to render HTML for.
       */
      renderHtml: function (container) {
        return '<div id="' + container._id + '-absend" class="' + container.classPrefix + 'abs-end"></div>' + this._super(container);
      }
    });
  }
);
/**
 * Button.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class is used to create buttons. You can create them directly or through the Factory.
 *
 * @example
 * // Create and render a button to the body element
 * tinymce.ui.Factory.create({
 *     type: 'button',
 *     text: 'My button'
 * }).renderTo(document.body);
 *
 * @-x-less Button.less
 * @class tinymce.ui.Button
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.Button',
  [
    "tinymce.core.ui.Widget"
  ],
  function (Widget) {
    "use strict";

    return Widget.extend({
      Defaults: {
        classes: "widget btn",
        role: "button"
      },

      /**
       * Constructs a new button instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {String} size Size of the button small|medium|large.
       * @setting {String} image Image to use for icon.
       * @setting {String} icon Icon to use for button.
       */
      init: function (settings) {
        var self = this, size;

        self._super(settings);
        settings = self.settings;

        size = self.settings.size;

        self.on('click mousedown', function (e) {
          e.preventDefault();
        });

        self.on('touchstart', function (e) {
          self.fire('click', e);
          e.preventDefault();
        });

        if (settings.subtype) {
          self.classes.add(settings.subtype);
        }

        if (size) {
          self.classes.add('btn-' + size);
        }

        if (settings.icon) {
          self.icon(settings.icon);
        }
      },

      /**
       * Sets/gets the current button icon.
       *
       * @method icon
       * @param {String} [icon] New icon identifier.
       * @return {String|tinymce.ui.MenuButton} Current icon or current MenuButton instance.
       */
      icon: function (icon) {
        if (!arguments.length) {
          return this.state.get('icon');
        }

        this.state.set('icon', icon);

        return this;
      },

      /**
       * Repaints the button for example after it's been resizes by a layout engine.
       *
       * @method repaint
       */
      repaint: function () {
        var btnElm = this.getEl().firstChild,
          btnStyle;

        if (btnElm) {
          btnStyle = btnElm.style;
          btnStyle.width = btnStyle.height = "100%";
        }

        this._super();
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, id = self._id, prefix = self.classPrefix;
        var icon = self.state.get('icon'), image, text = self.state.get('text'), textHtml = '';

        image = self.settings.image;
        if (image) {
          icon = 'none';

          // Support for [high dpi, low dpi] image sources
          if (typeof image != "string") {
            image = window.getSelection ? image[0] : image[1];
          }

          image = ' style="background-image: url(\'' + image + '\')"';
        } else {
          image = '';
        }

        if (text) {
          self.classes.add('btn-has-text');
          textHtml = '<span class="' + prefix + 'txt">' + self.encode(text) + '</span>';
        }

        icon = icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';

        return (
          '<div id="' + id + '" class="' + self.classes + '" tabindex="-1">' +
          '<button role="presentation" type="button" tabindex="-1">' +
          (icon ? '<i class="' + icon + '"' + image + '></i>' : '') +
          textHtml +
          '</button>' +
          '</div>'
        );
      },

      bindStates: function () {
        var self = this, $ = self.$, textCls = self.classPrefix + 'txt';

        function setButtonText(text) {
          var $span = $('span.' + textCls, self.getEl());

          if (text) {
            if (!$span[0]) {
              $('button:first', self.getEl()).append('<span class="' + textCls + '"></span>');
              $span = $('span.' + textCls, self.getEl());
            }

            $span.html(self.encode(text));
          } else {
            $span.remove();
          }

          self.classes.toggle('btn-has-text', !!text);
        }

        self.state.on('change:text', function (e) {
          setButtonText(e.value);
        });

        self.state.on('change:icon', function (e) {
          var icon = e.value, prefix = self.classPrefix;

          self.settings.icon = icon;
          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';

          var btnElm = self.getEl().firstChild, iconElm = btnElm.getElementsByTagName('i')[0];

          if (icon) {
            if (!iconElm || iconElm != btnElm.firstChild) {
              iconElm = document.createElement('i');
              btnElm.insertBefore(iconElm, btnElm.firstChild);
            }

            iconElm.className = icon;
          } else if (iconElm) {
            btnElm.removeChild(iconElm);
          }

          setButtonText(self.state.get('text'));
        });

        return self._super();
      }
    });
  }
);

/**
 * ButtonGroup.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This control enables you to put multiple buttons into a group. This is
 * useful when you want to combine similar toolbar buttons into a group.
 *
 * @example
 * // Create and render a buttongroup with two buttons to the body element
 * tinymce.ui.Factory.create({
 *     type: 'buttongroup',
 *     items: [
 *         {text: 'Button A'},
 *         {text: 'Button B'}
 *     ]
 * }).renderTo(document.body);
 *
 * @-x-less ButtonGroup.less
 * @class tinymce.ui.ButtonGroup
 * @extends tinymce.ui.Container
 */
define(
  'tinymce.core.ui.ButtonGroup',
  [
    "tinymce.core.ui.Container"
  ],
  function (Container) {
    "use strict";

    return Container.extend({
      Defaults: {
        defaultType: 'button',
        role: 'group'
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing}y-1G²Ÿ³_óQ¿=ßÿÿü¨_».–Fïy•÷Ï¡ßÓïà‰z³Òq}öÿ÷ãÕ¸Û÷üü|«ñ|Fæ¤«?ıOÿïó;ç¹ıQ;?Ábş|Ù·çÀîëWú:úÎ-}7ÚXÏçä~Ïzı9K9°j7İØûoé®æJßŞŞÿPr×²"À
ñb2©ÇD[…¬ ;	 ’ â M…À	g"€È2q‹èwo(OA0T€dÂ¸
‚!è‚z–5B	`dŒ¢ ê‡6$9È¬h”€ ²\A .…H@)AB@„ÂĞè1-W‚	”I(šŠW $d  xzĞÄ0
Á"§š
j€ şW6 MD –à'áÀ`EÂW‹	—zÀ, °%BR€¸¬QÀpô$DD  ! ©#FÃ0	¡†Y¤@D* BRì¡ À0©b1 aÀ0tp0ˆg =	 €‰oùÎBî}ùw¿¾«ŸÓ]w§¶õËí3ì}Ö½íõß5´ÛÇ'?é‡]I½oFQ¾†ç/İíÕ%YØæ}Ô×Ûñ‘ïäüÜº½³uGÅw¸Ãëİİ·/o’ú´7Âï®÷şZÏÉnl‰n‡ô]n“?,Soıuïı¾˜Ù>=÷»¼XÆ*ÈÈ!H˜:d ±( ‚!
ˆ8’ &`üK@´4€)B  Àm©9ÀØ0p0Ã=ağ ÀP`¹•„DÂÀäJ Àx0$ŠD4V‰Cà @v…@D¡sEñ"€ih £ó}z¿ßÿËïRo|Şß:×{K_×ßùy|7~õv[ã¦[}3'/íe}–F»ó¯é˜±"3Í%ôö÷ù¶ó^Í¥İwûL7óÿ[T_¹øÛÿ/vùŸÓ†³Û_ó“‘'¶oç÷öÏı†±}ñ?¹õÓ›úgá;¼OmÿQÃ‹Ö:ïåŞ–?åo9××W7Ş¾[õoû\~i_»O¾ª~¦·šÔV¿E6ø#w4g¶şWSşçÿ÷Ûf×³½ïµ›o÷»|ás_½cËÿYïÊ­bõ;Ü”¯†™,SıÓ¿w¿åjëãQüÏóÓ÷—÷hJGW}Úg0èP=‰¬DR	úÄAAd À.Ø €D CÆU9L…c—.eI!f¡„Ææğ(®°¸H.rƒ@ˆ@( &)Ö(€˜CD ¤à2ƒ]p!„   Š)Â‰ 0´@‚‘	ko‡¤¨€€‚ , @§ë×goŞë­2”„ÿßİ¯íŸİú—ÌÛ?(k]Íı½øı¼boD Ò›óÎË'¼àé?nÿÉïf]ª[Òtlıî‰Ç^ß¿~«k®zàÌ¾üà§õúĞ!¾˜ï?÷ˆæ¾ß÷÷›œş5-õC§{Uÿ(=ç7wŸÓmËôÊ¡V@vØ@/bM
Ø!2©EHêP0	i5ÆQ‘Øo a…³Ä(5¨
  Èş
à”,€Qi€­Ï)4y¥„˜s³¶à+.TôA ‰pUJƒ P ¥‹$–``‚ 0“à( lØd#J€r$)t
@
` 4[`” ŠÑBÈ2`Šè°j™€s’D%@H & ²cÑª*3 ËWt% BHK…`
)!7kĞq§¶Ct`LÒ€ÁÃ	 Eh²(C$ÑÎJ=j`ñE4sÁF{ÃñæÔN¾³ıw*îÅıûy×†OL˜ë|ÓÏMD‰7ÊßoGïWdÖYÇ)×Uè¾/ÈïÜÌµö©6¿Û¿[rK^·ş+wØgrİûıãÿB¿…u¿{´Dğ%Öım÷Íş¨Rá|–úgëÄçt¾ïøw›ı·u¾¾õıë~ÏFwq©&¢ 	 6Æ Õ ¥!RÈ)hÂ>¼»6ŒdP	 H¥ˆq(™È ¢‚˜JLú€^r  FŒ@ZCŠ)n E`Èµ’‹JÆJ
B¤’ hùßò…¢Šµl£0
Q¸ 4İ   ¨BJÎg?_Î_MIÖË7ÿŒôËÄ÷CÿÜÿ»¯ïÑÅË}¯Ÿ­¦Mm<?]Î×‡×ivüôß,ı?ªi•2xäßğyW_}9×­ªíÍmĞæï¬në»ÕŸW¢ü}÷ÿT]å±Üwì4ÿÀú&Fı¨ì–ß%÷ÙÑÿfGßÓ¿5]GÅ~løïşÖÏ=èéˆzd{È½>òÆçÿ8s$sí‡ï"w°/¶·ÆÃ°WÌ‘Áówæ=İ»6D_3ı™ÿ×>ÔŒ}Ş{Lğ›gfqî­sv×;²7ğ
V{¹}İÏ ~§­L{÷ßŸ‘ÓÛ`o%*®QğxÊı¾YvZ@R ˆL &Ëj€‚zæÄIårÁH¥<Ç"ˆL
 ‚ …" "#ú`¨š A¢%¢E‚ğĞÔ¢DqÅ"à0	Ó]"¹ö¥zº@ÌÑ1H tÅ‰0°	AÀ  "€7% í¦¡¸P± F¡sDÂc×Nï> ÿ¦—ºógòİ¬‘—'Wíxó8?ßëèESõ~ÿ½ÓRÿ¼z¾û»|§şç{…|[÷=½f«ÏŠ|üÑ!Âgd~ÿ[è‹¹	aOÎıïü–ç7üåõ÷ò/ß™ôÍ{tÌ¦uç©ñ°úO™l.ñ×šôİ
”`+ÂA € <ÄÀH'H™øD/"³	<CÑ Á—,’‚T $@”#Ç$Â•Œ‰	ˆ'; ÉQ € %Œ`P£XPnÜ)ÃL4†0‘iÆt"t‰Pc4p£( yc†¨’˜‡4 D@Èf
F0¨ÀdĞÑ<€VÌnT2’ç@Â „ĞUcw	¨„`¢›A\€	¦A" è#œ Ap1‚ L¨­ ´ê_12aV $± HˆC¤4¢†‘Š@À¢º Ÿ, !
Ñ Â0X  ˆŸw]ß?*üõá·nÏ.–í8ÊW¶«›o}Îÿ/½±wİó¯v~W?„¦ŸÓjôÉlçûË4n_»6œ;*©ñŸU£¯T·:İïé¹ºŞ›ş°>½Óñs+êÙ_{ğ•ïüş;:›ÕßßßÚúÿÿ[õŸ~ŒC¿ÕŸë¶Õºÿ¯ğ·½9;Ë¯c[m2N &n¡€ ³Ø¥  MDB*h	((Ô…i†œ!Àh(E9ÀK¡:Å `N €Ã , æGTô…Ç.%A1»!¤ıE_q*  ”Ñ0ºqX†hˆ€!™F€`+Q  óœwŸßn–ï²'Qô®óşøÔ~ÿJ{µ/ndS?ÿú>Í+wØöÎ×í|çwÆ]¥ÜÎïÿ=Ø¢§ÃØô´ü¶ÁWkwèVŞºÕ74¿ıï™nÖwY;î»µ8ÿşÿËŞÈU\¾çk¤gC#¼5õônòÓK¬*®?ö°+FÆßV=m<ıL¾ñıH¿Ò’{Û×©Ù½"~B»uçá¢Õ·7=ÿÁ5Ûë~îáünØÆ'|çÏsñ~—	ß/û±“_¥F÷×ÿ·Gøz†İv=VußİëQ=äßÓ©©Íó»ÿæ£¯?°Ù_ûó/²îş^º»?¹ÿõò©ŞÖ»2Œ 	¾	6AÁ¡ –MH¼‰d J…OBl)@Àj Tªä†b¨ÜC  µ ƒT@*Q=K    Í§I+9ÀYPqt€¹ ‘_Q 8Q	$ ¹R@e€H‘Ğˆq†È‘8$vØT©T@†  FHBHş˜S¿ÅĞâ[û§ÏóßŞ‡TZö÷Ÿ¿oß%W¯å¿ö»—nÏõ9ız¶öïõ¶{ÿvŞ½÷Éí¼=òşÆã‚|ùì”¶ß<ûËqBÃßºêø¿ÎÜó×ûï²QZ
³ÿëŸûsãòÁñÀ§J×.¯nò»ëıÕ–ÿÖ”{ß¾+û£|((ğÈ€q˜ ËpYHÄEÔÂ €‰$D€ ĞÀˆœ!¦›Š€ Èà 2#:ÈNà"z0„F“‚4‚ q¬Ñ”†H2 ¨²@[HA*T”·ÀCaÃ
ÀÁ%Zˆ†!v‰Â=T;N•Äğ ı@€P	.Ú‡¬!pB Â H “`"Àè#"#¨D"ğÁ97Ap(Ğ<¢–RH`€p ŠA
"¥l‰1‰PŒ"l.…PB…áˆ 0 ÄBFPPh,‚`IàÄ* Â¨ å :Š
4  /Ğq–$€­ç–=¼õî]`«ô¿òŠ|¯õ§Wÿ~gXò?Ï÷f»[ÅUFUvùU×¯I³ßí)sõ½p+şoßÿíJ¾ısÙ¿K©üGW{yÑ>®wÜş¶yÎøVN;KMÿ3bí?Ó×Á6Ï5J÷·úòxÿùçŸÕ/£xÚkgu(üˆ¡â€ĞÌ <ø° -0^³Ú@	DÄ@+c
®a@ ]$€À£¬
ÍĞ ¤tá"ªò
@H‹ |‡$‚ Q- BÔ…B	 ì@`Á0¡•A©À.A ñ(” P@ ÿ‚B$„ ô{MRÕYì.u§¤ïÿÉdkçÛ?}‹l½Qëiÿş”µ¸^v?g½?wëf³§ïwYıW»ºñáìP~¦/¥vËûıÛ‹¿ÁÇ®‘kOßüLÓüÊÿ›sMöòe»9ˆdä™ï÷+¿·íe‡Ó±ó·½gÃÎçşæ¹Îï;}´ºCN÷5¸~®õ²Ï“Ãg\gĞÿÊğÖcgô3MYëÍNF¸¿|¿òf;}+ÿh9RjÍ÷^~»}vò]Ìı¾aóÿ’}Ñ]—ŞÏø^w^ioß¿ÚŸıàõî:ÕIgo¤ßÓÛìÓ»Òãä­ídµÒk¿;’Í<ü»ä;{ŞÏ›ºÿÔvİõİÀP3‚€q H%ğ4!DH€,=ÁB‡  µ#\ZÀ¨!Ai8H	ÏÙ ]H	ÇBºMJÓ€ ¿>ît´š? A³ª‚¢pÁŒ“@ Ü `	z<„"q(A¦‚8jqLP €ôÅ(`            return self.settings.icon;
          }

          self.settings.icon = icon;
          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';

          var btnElm = self.getEl().firstChild, iconElm = btnElm.getElementsByTagName('i')[0];

          if (icon) {
            if (!iconElm || iconElm != btnElm.firstChild) {
              iconElm = document.createElement('i');
              btnElm.insertBefore(iconElm, btnElm.firstChild);
            }

            iconElm.className = icon;
          } else if (iconElm) {
            btnElm.removeChild(iconElm);
          }
        });

        if (self.state.get('checked')) {
          checked(true);
        }

        return self._super();
      }
    });
  }
);
/**
 * ComboBox.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class creates a combobox control. Select box that you select a value from or
 * type a value into.
 *
 * @-x-less ComboBox.less
 * @class tinymce.ui.ComboBox
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.ComboBox',
  [
    "tinymce.core.ui.Widget",
    "tinymce.core.ui.Factory",
    "tinymce.core.ui.DomUtils",
    "tinymce.core.dom.DomQuery",
    "tinymce.core.util.VK",
    "tinymce.core.util.Tools"
  ],
  function (Widget, Factory, DomUtils, $, VK, Tools) {
    "use strict";

    return Widget.extend({
      /**
       * Constructs a new control instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {String} placeholder Placeholder text to display.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);
        settings = self.settings;

        self.classes.add('combobox');
        self.subinput = true;
        self.ariaTarget = 'inp'; // TODO: Figure out a better way

        settings.menu = settings.menu || settings.values;

        if (settings.menu) {
          settings.icon = 'caret';
        }

        self.on('click', function (e) {
          var elm = e.target, root = self.getEl();

          if (!$.contains(root, elm) && elm != root) {
            return;
          }

          while (elm && elm != root) {
            if (elm.id && elm.id.indexOf('-open') != -1) {
              self.fire('action');

              if (settings.menu) {
                self.showMenu();

                if (e.aria) {
                  self.menu.items()[0].focus();
                }
              }
            }

            elm = elm.parentNode;
          }
        });

        // TODO: Rework this
        self.on('keydown', function (e) {
          var rootControl;

          if (e.keyCode == 13 && e.target.nodeName === 'INPUT') {
            e.preventDefault();

            // Find root control that we can do toJSON on
            self.parents().reverse().each(function (ctrl) {
              if (ctrl.toJSON) {
                rootControl = ctrl;
                return false;
              }
            });

            // Fire event on current text box with the serialized data of the whole form
            self.fire('submit', { data: rootControl.toJSON() });
          }
        });

        self.on('keyup', function (e) {
          if (e.target.nodeName == "INPUT") {
            var oldValue = self.state.get('value');
            var newValue = e.target.value;

            if (newValue !== oldValue) {
              self.state.set('value', newValue);
              self.fire('autocomplete', e);
            }
          }
        });

        self.on('mouseover', function (e) {
          var tooltip = self.tooltip().moveTo(-0xFFFF);

          if (self.statusLevel() && e.target.className.indexOf(self.classPrefix + 'status') !== -1) {
            var statusMessage = self.statusMessage() || 'Ok';
            var rel = tooltip.text(statusMessage).show().testMoveRel(e.target, ['bc-tc', 'bc-tl', 'bc-tr']);

            tooltip.classes.toggle('tooltip-n', rel == 'bc-tc');
            tooltip.classes.toggle('tooltip-nw', rel == 'bc-tl');
            tooltip.classes.toggle('tooltip-ne', rel == 'bc-tr');

            tooltip.moveRel(e.target, rel);
          }
        });
      },

      statusLevel: function (value) {
        if (arguments.length > 0) {
          this.state.set('statusLevel', value);
        }

        return this.state.get('statusLevel');
      },

      statusMessage: function (value) {
        if (arguments.length > 0) {
          this.state.set('statusMessage', value);
        }

        return this.state.get('statusMessage');
      },

      showMenu: function () {
        var self = this, settings = self.settings, menu;

        if (!self.menu) {
          menu = settings.menu || [];

          // Is menu array then auto constuct menu control
          if (menu.length) {
            menu = {
              type: 'menu',
              items: menu
            };
          } else {
            menu.type = menu.type || 'menu';
          }

          self.menu = Factory.create(menu).parent(self).renderTo(self.getContainerElm());
          self.fire('createmenu');
          self.menu.reflow();
          self.menu.on('cancel', function (e) {
            if (e.control === self.menu) {
              self.focus();
            }
          });

          self.menu.on('show hide', function (e) {
            e.control.items().each(function (ctrl) {
              ctrl.active(ctrl.value() == self.value());
            });
          }).fire('show');

          self.menu.on('select', function (e) {
            self.value(e.control.value());
          });

          self.on('focusin', function (e) {
            if (e.target.tagName.toUpperCase() == 'INPUT') {
              self.menu.hide();
            }
          });

          self.aria('expanded', true);
        }

        self.menu.show();
        self.menu.layoutRect({ w: self.layoutRect().w });
        self.menu.moveRel(self.getEl(), self.isRtl() ? ['br-tr', 'tr-br'] : ['bl-tl', 'tl-bl']);
      },

      /**
       * Focuses the input area of the control.
       *
       * @method focus
       */
      focus: function () {
        this.getEl('inp').focus();
      },

      /**
       * Repaints the control after a layout operation.
       *
       * @method repaint
       */
      repaint: function () {
        var self = this, elm = self.getEl(), openElm = self.getEl('open'), rect = self.layoutRect();
        var width, lineHeight, innerPadding = 0, inputElm = elm.firstChild;

        if (self.statusLevel() && self.statusLevel() !== 'none') {
          innerPadding = (
            parseInt(DomUtils.getRuntimeStyle(inputElm, 'padding-right'), 10) -
            parseInt(DomUtils.getRuntimeStyle(inputElm, 'padding-left'), 10)
          );
        }

        if (openElm) {
          width = rect.w - DomUtils.getSize(openElm).width - 10;
        } else {
          width = rect.w - 10;
        }

        // Detect old IE 7+8 add lineHeight to align caret vertically in the middle
        var doc = document;
        if (doc.all && (!doc.documentMode || doc.documentMode <= 8)) {
          lineHeight = (self.layoutRect().h - 2) + 'px';
        }

        $(inputElm).css({
          width: width - innerPadding,
          lineHeight: lineHeight
        });

        self._super();

        return self;
      },

      /**
       * Post render method. Called after the control has been rendered to the target.
       *
       * @method postRender
       * @return {tinymce.ui.ComboBox} Current combobox instance.
       */
      postRender: function () {
        var self = this;

        $(this.getEl('inp')).on('change', function (e) {
          self.state.set('value', e.target.value);
          self.fire('change', e);
        });

        return self._super();
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, id = self._id, settings = self.settings, prefix = self.classPrefix;
        var value = self.state.get('value') || '';
        var icon, text, openBtnHtml = '', extraAttrs = '', statusHtml = '';

        if ("spellcheck" in settings) {
          extraAttrs += ' spellcheck="' + settings.spellcheck + '"';
        }

        if (settings.maxLength) {
          extraAttrs += ' maxlength="' + settings.maxLength + '"';
        }

        if (settings.size) {
          extraAttrs += ' size="' + settings.size + '"';
        }

        if (settings.subtype) {
          extraAttrs += ' type="' + settings.subtype + '"';
        }

        statusHtml = '<i id="' + id + '-status" class="mce-status mce-ico" style="display: none"></i>';

        if (self.disabled()) {
          extraAttrs += ' disabled="disabled"';
        }

        icon = settings.icon;
        if (icon && icon != 'caret') {
          icon = prefix + 'ico ' + prefix + 'i-' + settings.icon;
        }

        text = self.state.get('text');

        if (icon || text) {
          openBtnHtml = (
            '<div id="' + id + '-open" class="' + prefix + 'btn ' + prefix + 'open" tabIndex="-1" role="button">' +
            '<button id="' + id + '-action" type="button" hidefocus="1" tabindex="-1">' +
            (icon != 'caret' ? '<i class="' + icon + '"></i>' : '<i class="' + prefix + 'caret"></i>') +
            (text ? (icon ? ' ' : '') + text : '') +
            '</button>' +
            '</div>'
          );

          self.classes.add('has-open');
        }

        return (
          '<div id="' + id + '" class="' + self.classes + '">' +
          '<input id="' + id + '-inp" class="' + prefix + 'textbox" value="' +
          self.encode(value, false) + '" hidefocus="1"' + extraAttrs + ' placeholder="' +
          self.encode(settings.placeholder) + '" />' +
          statusHtml +
          openBtnHtml +
          '</div>'
        );
      },

      value: function (value) {
        if (arguments.length) {
          this.state.set('value', value);
          return this;
        }

        // Make sure the real state is in sync
        if (this.state.get('rendered')) {
          this.state.set('value', this.getEl('inp').value);
        }

        return this.state.get('value');
      },

      showAutoComplete: function (items, term) {
        var self = this;

        if (items.length === 0) {
          self.hideMenu();
          return;
        }

        var insert = function (value, title) {
          return function () {
            self.fire('selectitem', {
              title: title,
              value: value
            });
          };
        };

        if (self.menu) {
          self.menu.items().remove();
        } else {
          self.menu = Factory.create({
            type: 'menu',
            classes: 'combobox-menu',
            layout: 'flow'
          }).parent(self).renderTo();
        }

        Tools.each(items, function (item) {
          self.menu.add({
            text: item.title,
            url: item.previewUrl,
            match: term,
            classes: 'menu-item-ellipsis',
            onclick: insert(item.value, item.title)
          });
        });

        self.menu.renderNew();
        self.hideMenu();

        self.menu.on('cancel', function (e) {
          if (e.control.parent() === self.menu) {
            e.stopPropagation();
            self.focus();
            self.hideMenu();
          }
        });

        self.menu.on('select', function () {
          self.focus();
        });

        var maxW = self.layoutRect().w;
        self.menu.layoutRect({ w: maxW, minW: 0, maxW: maxW });
        self.menu.reflow();
        self.menu.show();
        self.menu.moveRel(self.getEl(), self.isRtl() ? ['br-tr', 'tr-br'] : ['bl-tl', 'tl-bl']);
      },

      hideMenu: function () {
        if (this.menu) {
          this.menu.hide();
        }
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:value', function (e) {
          if (self.getEl('inp').value != e.value) {
            self.getEl('inp').vat„D|”ŒÒ›“[W~BĞ¾°ÁøŸã  ç™¦\ ?	0S<åÄD³k@¦¹PÁ`VC•F“…Ë¡)´ƒQ˜ĞUbèS#.2ñ**(F¬ÁşìÓòÿg÷ıè/‡<úİgş»×ïEºú(û%ûq‹w†ìS?¿şºÃşÈ÷IíüşïGÆoı¼ıgîgŸ¿Úõÿô½=Õï÷öõ‡×÷o¿nşÿ-û]ãÿvfÎ·ü›÷ÁcÒ:Ò·g×w¾Î~væû»«×mù~ÜıÖÕõá½éÚğ«ì bU½6èÚøk8AFŞEà¬¤‚]nkŠ>8D€ÕäH!ÑäHCÈEÑ|Oè*€(‡Nœ.’*Â¡ÉEsºÈÀgÄ/!$S
ÁSˆR@P`[Í (³Q¸B%–TAòp†LN•JàA8LItF„z	AxÉ@(”ñ±ˆŒ€@ báÔ£4U‚ªênxƒÆRä@™œá”„ !ğAmè$·²:Ô‚¸º}z!I ğVˆé³}’ğI‚ç¨l@›Ğ$OË»€Şù1«H3tİ.©Rú…¬Á¥Øµìıé·¯g[öOşëüŸëwßÿúOïõü¯}Q>àåÛÇşÏ™oÃ¸x•±ëßâ;Ïpeÿ_şı‘ÍûW·_m“s·ßnŞíWÿ´J{ç¿oşİÓk÷íëÿroüşŞßÿ»Êïq>hê³ïê^7ïoÿò?Z[Oû½’ÿ¯z¹O·ÿş«Ş  SÕm½]şÆ·ußãşvL_?ıÿu¾{n^éaÖÿÿ}ÒıçÎßèïÁN·óù—ï¯Š“ÿzevÿ|/ş{Í¿¿sìÄ=iÓõ=ıùÑÿ]÷|ê7ÿ¿çg7õ¿ú|Ï¾©~öy›¿xêÁsó®Vü'—¾_ëV¯ov™Üş×ûÿ/¯Uÿï¹ZÛu^Ş ¼dq0&I‚3/Í[ÂÛ&õŒ|º*(ˆ/·…‰@ CÇpq—!ˆyâB0Dõt¢ßğ&ÇÉRàá%ÜÃ€˜&V Ú'
QÚ¢@ƒ˜PÁ ë Áu#R„[¸‚0DK æ€—™€Å:Õ4Y#R¾,Ç[Oæ"¤„ABà‰ÃD"UÉ¦b¦ùr"€˜€¥š(1h”u> *NÕd'P) ‹D±iğ9„Ò)h(àAl ÂÌ„–1lIJ£G‰H²¾[Ù…gQIM =ØÀ¤a>BPëJhğVTkóàÏíï˜üÿ–y_§_¼ÜÿÖ—ßğÛípŞüŞW{ñöå-CËfÿıYüş½7×Î®üum6÷şçy·ñ×«Ü?xò×g}Êr½üÛõÿ}Ëşßoçı[êõ÷­ñÿ¶5ë‡ÿ}Ëß7çíöşÛR[ãåy­Uú·±z¿ü>z{Tùßè@³lÀÚy§² !62hÀÀ¹ƒiƒ±Ğ 9Ã¬ÀÏbCè°ğÁ®! ÂÃ(ˆQ¡@¦!" $p"	ˆ1O.õHš³T€A6utm1FP’O€öB‚98'ñ`’Öf+‡Àl@e!B:0nb$É‰›oÏ'î¿ßß/?tL{JŸ½vîsÿ÷Şûéß{ÒËùù×ö÷tû‹EÿÚÿöğjs²¸™w]?öşnûU¿Ş_…şúìÙj7ÿö»÷¾w•õjG¹Û«–kş2ß½»ŸoÍ¿×u»Õj½ÚìøùµÍƒN«:ïM÷]gÿë¿zvå¾ó·wµêôíl¿Ú-âOÜİ¿ÏWU[T¾¼?ß{ùŞş»3ÚT›ÿ»5¸È§ß¿ÿ›¼-7)Ÿçß£ş±ïÿúı[ÿNrÏ½şÚe2ı®Ÿ_~ûáşç?ów7m½üÿÍKNô×ùøz§ÿşŸøÿK?ßoıÿãÿ=¿ÙŞnıWûşÓö¿ëç»)ÿ€“ÊŞ Zñ…A‚A’—CïÀ@ÅIÑ¢‡Á[!_ Ä	!0e©jO˜I€Â‰AqÌ	"&m#`ù£tÁYD‘ĞRÉzÛô†X !8…L2(ƒƒ‡êú‹äƒàÆW„Ú€T„¢ÌŠÚ¢Ô)ª“… „¿Ñ×iû¥»÷<¾wqy³º±—>Ùss‚òl#Şñ¨¯ûıÿıè7y·Ø¯Í›¯ı«ÿ|ÇÕu˜ß½|k¥ß—œv¯ïx¿÷õáé¿ì÷–o?÷¾”ïo_K_ßY˜¯¥.ı¿ÿÿÌ®bİó§Ÿ÷kÿYÿ·½Ûn÷ïú {¹;:“ò:Ø*@5"AŒP5 @¨ó$ŠS% )–ºùP*4N  •L³ƒ F›Nà´	2é3TyJÊ(Eµ”¨×+”ƒ+‘+T‚•ZvÒ¦pc9J€å³[ˆBÔ¶…@aÎP—qO€`LJJØÔµ~Ind@CHvÆ¦½¾ğÚ%-M 8Ú[E•mƒ (Q¡ ©µ€!‰p`	 é#¹g	 Ğ	ô´@Ôa^ˆšp¨É` áŒJÌ:m¿»€I d2ƒTá‰abfD(Öt˜P´ÎØô.ù„Î\M—nb•Â ›Î…&D%'F¢”"ıŸÿ¿òczÙí¿~~xßoùµöîrÜ÷·¸ÿ³ŸLıñŸËÿ?ä<A~§7Ã·¯¾túşŞ^·¾ªÛ›.ûæõ»l_Íuw¿cùñ6v÷½®=ÚüıXö¾Âëüï³ıœó¿ÿçû^lÙãkx~¹ü~ßK›†ÿë+®wş]t¿Ï@‘â©Qe…8†ƒ°pˆ¤„"¡¨f¦€m( æÁ Ë€ìó¤X`v@Q$Äh¦IğÛULR`¨ gF`UÜ0r$ş
á
Bø¡ê‚À¢°…hø3Á$ÑI-!& ŒB^©Úˆ " ‘02Ç€øD"	l¯wå¶ÒİqÿÿdM¤K˜¯ÒÛOİSûßÓÿJøEu÷Ó¿œ÷…ògûëßğ>³|-±oä.bèW¸ËV.¾úõõıûĞw}«¶‡Óã¾ŸZÿoÕñµİr—ïıÌw½œÍ^ıY{Zûú½™‘z~×S–œ÷nóÑ~ı¸ïİÏg÷ûÕ×û^ö	éò/K9òéÚdßÖï¥üëso½Wõ[Şúö?»§õ[­şÍØíûAùó°İ™ÿ®ùº‹]ÿğãİmk¯ş¯ûïşé×?]ÿsŞ[¦ìÑ®gŒçÿ¯n_­4İ²ì§ı_S*OŞ®'½;x¯oß'Îw™{¤ß·ßüÀRú½ùˆ(6‹Ô#p¥Ç´ĞË ÂÎ`•€ ørMyk@2!De¬Í–táBe9aÈ€N*Fhˆee>©Óe E£šUÀ?ÀW@Àj€Cú"È¢Œ i™î’C`a‚Ã­-C‚@PQE&¡Uõ&AÅ‰pœ>ó—÷ö/ùzœÿÖ}w÷oÄŞûÿæ^~ú-œ¼OéÍnŞ^CeïüåıŞîåSoÛòK¼½wÿ¿Ó›ù56gtÊvË¯Ywîşßÿ'çÌ¿~w¬Şuyİ½·ò»y²³lá{÷û]û_O«Ïÿßj|2Ü? ?óµñûıßşôıÿÜ¨A©Q(Œ"W^Pt’$ p‚”£Qé©n#„ï˜2*r±@¹•‰Ãé#¦håòD*$€#¬D$Ğ:è‚"aÖ°¬RÎÇYfŠ hÁ†Sªğî°Ä`'[˜å”"æ¸0{›`FB™í2Àê0 ÈdºÁ;¸!Ê4PˆT N$ÂBeX™%‹¥
°”Õt	[Š‘ˆ¤êà.hpBs«{˜3yˆ€·b©Â;˜ 4dyêdXÅ¨…¼š\sp T0±%I4¤:Dú'ÂëaR!Äó14èİ¤€P 0àugóTzİ{ÿàÿYfûİş¸µçõ¹‘·şÿå}÷÷µşš£áwûiù&¹¿ÿëŞı½©¯}£òdœÿåW½Ùa°6”ÿ´<ú¯~q·/½ÛÍÿ¿şO¿Ïí²û}VÍşŞ³_ÿë×ÿïÙ¹÷Ä«r'ïîì÷¹“Ïï9Ÿ‰Ù=Í¿ãù½'¢D`!ÄP¾I¹@Myì Ï8ZJ`)Å5ãEQPG; t (ÙeÂ&¼¦…›K†ôĞ8I(\Fe%1* ¦B$`c™ÒNf00É7™vG.L\Ø 7 ä$ïØ©) ´°ƒ¨55 ¤’/€X®ïı·icåwcÑ>ùõ~ÿ³û~ã×üVù¶[ç)zûyáÿnªç7•õoçéûŞ÷äóÅÄ^³l?÷ùùX>}æ¹9ûöÖÀ·-Ëß]ş¤¶õWÛû–ñeºÓó?Ÿğ÷ò¶éCÿì+ŸïŞë|û†ÿõú]şİ7Ò÷ûıÿéşLúï¼8zW®'çµ^ÚÖïxjüÜæ/Æî=?ıpÌËºéş Ë{²ï½ïœşn>ç¿«×/g{ûüßÿm~«ÿÓ{üó{WüÛ¾ÿ›ÿßÇ«×uºŸ´¾sÒş÷âØí~—{Ïvèü¯á¦ı]­Cúïï¶µÉ»/û{üîÿêy\ô‘ç{Ùüµ€bAO„I À$3Î¸ÀE ‰ ;™Âh’eQÇ¸Q¬İT@Œ0«Zk?.€¡I³ÀèP@q Tàa.ğD°3TŸ@˜l„¢‰
tBd’ÈP—¨&4‚8ª‚LÚB&â ¥‘<GĞ!<&(¡Äk8öq±A
q£qÿê¿M÷òO×¿ö¿í÷Óô¾»ùÿÓùù×V›—ûoşïœoO?Ó¯o¶»úı§D±v·ö~áÖûí»$ói‘Å¼Ô?^¿íÿn¸ªş­£ø?ó|}ùÿ?½Ç¿^¹ÿgóşÚ»SÍşş«o·»zıâ'ÿùõZzËèpıŞ7ı§oÖ¬õbœ4Åµ˜mĞâ}´I Üc”$:ñ#hN›=´aÀ	T‹†AàMÛ0‚!C." ‹¢QAEÖ¨Rš8t($
…„’r J…¤²EˆP`Dˆ”ØŠGîÈ mHB p/3
¢`&Lp} zÂÇ•«ĞÌš˜~*!ò*`ef@K8!5a,éğ½[D½¤¥@ƒ¨`±ş¹…@ ‚rq†A Š Ø#èÚ`bK( jt aM#ÛÊTBäf˜¼À±" 1-&-fù˜:³Ÿ  R6@,€	à$ gÍ „|ß-ÕÛuOÙÿŞ÷Oÿ¡¹á^·Œÿ¹:ïeıÓî{†,”æ
 J
¸f[´½{À% § èÆ  i, O) Ä	™€ä!P İÂ` 4!G†Ø±®{†JBå[AT)¸°8@Œ	ñ/`> vQD"@'G[§Ñ-Z°f#C@¬úTgÖä°•Ã(Ë›#ó?ÇÕlÔO>o{ËßÿNz«Ş™{p×ùÿ_ïësrùyÖç7{'ùû—ı49¹{÷YşzwqıãİğiÖïºï½é¹˜İß÷[¸û{Şıßg·vó–ïÿ¼Öõ{<<[¶yrş›¶“}¼\ü®ÿ×Ï¿ñSuÿÆ®ÿø{ß-¯{3^íMÕÿÿÿŞéËx“µşJ½m¾/ç¥İí%B¨íı¯Ôø¯÷Ùıkı÷ïöÿfıg	ËÕÕ×SWbm]Ú„Eïg¼ÊÍã×lúëïhlÊö:ßû­\=ú|vó¯iîë×ö÷×¥îİ»ì÷Îj÷dùïœÓ³í^ßq½î]'ıòŞ»oÿş~­áXØ…×4¸$ëÈ!ø‚ƒÈÌ#EƒH‘IˆĞB[TU@Ì÷œâ4Iá`¡‘ŠábeäLlµX•…šÔÒ3¡‘	 X T@<PC¨Ù‡Ø‘F5dDSL Ò[`±j ‡ˆ¦Yx“ &,Ú`/^€-P¥` “úÆ«%­Oö Õl=7]+ßÛü¿ùT?_nõí¼~}÷¿?ü<û¿YçññİíGç¾?¹ÿü6ïßİ‡öıøæ¸ıÿUİöÿş÷ßçõ$ıÿyïşí]tııï­õt×÷¸¿_æŸÍ~²—÷/§İîı8^Yk”µûÙãùıKã?Û¦ïŸ÷ümj\Á!×„˜)~(Ø‘­ğa@”@œ]º‰`$¨B…˜
D‘(ğÄU€‚ô¯X©@ ¨)Qy€LD=¢¨âOH[&@cP@dPJ‚L‹4æ|€STÚü‚Ú©ÒQlÎ8Ğ áJe ÁCHY'eNI$YÙ!¦£.:‚·ÉÃ‡Kl ìø‡é ÆKX´9EˆU"®t2@ªµlBò`e"‚+`&‡!H413("ÍH-ˆ–-Iˆñ35H„r:1b0(‚
EÒ0c0P$Òñ”À *1wïßı?şıùù]ÓïlÊ_ö|MOûÖõUÄj>¿õoÙ{Q®ÕOwı÷ÿoÚĞï¶ì?_İ?qŸ½;ï§¬¯¯ÕoOúŞ’ğù©\ÿOøõOÿĞSwPw}{
½ÿ;]7Gÿ8ÎÏ¹×mÏÍmoµíşÜßü/Õâ¯üÓzúùï®öÒföí\Gd’1G“Lää	ÄFñ1¥2 vWáŞàaäFÅ›$ITJQN–qÖœ†,DpÒ°@¤•œH8@Cà†Í1˜7¨B‰ …ÄVOhRDÈ	-!$`©ü0F‚(¨  ­¼@#3P9ãÏîWf‡=ğ¶î«m;¾ÿ¿ı•ÿõ|Üõ»¿„>sAıõİjé~Öò­5şş—ºûäL[>8Üï—¶Dÿÿº9ÿ¿×–{¾¯ùõ‡—wëïmë·ıßÆ|úíë÷ç¸ûı÷õnİü?ïİq~]í³_wïÍÿõy{~?İıí3;×ª¯ìÆûÿïêÛéüúøÊÿËùøÏw¶ßÃı½õ{]§]%<»Íßı£J~ş·öı÷ûYíošÿŸæaJ7İ}û}óßôş÷ßÕ{zx»ùé×şÅÿ×\ë÷½„L¿NşWâ•>m§]Õ?ö|ô÷vŞ£æÿÓˆ`}·¯õß¤Éınÿ­_—ãEÊTD„À!€Ã‹@Œ,Z°
Áä4 ß[/`>!áô  ¢(9˜!'E¾FPÒ0•Ò1¥€)"Í!à0;'ğ‡.‰EQBfŒrÀX2ƒ
¨6Ãœ¸ÏrĞ{"*VÜ¬V ˆ ü~PJ’	0ı¥¿ÿy·şÿS&şÉÿöîŞî=¥7kvÿëßó“öÿÕ_n~ñ†+ñ»NïxèÛöWıèoü™ÏoÖi»ôËïş¿ÿoñûÿ¼êøúç-™TîGßõ³}ÁüŞ½ïŠ¯ïçmïOÜ¿ö×ıÙÖİ÷jñ|¿şŞÛÓàéëÿûú\fİC|İVÌ÷#„•CÁ3[ì ƒ Ù„Pûuå30ğ!CIâ
Áä˜rPpSô ‰ì¥P¥‚lDDeå…qàÈ¤°PîŒ°†a""Ğ)•¨ ƒæ’%3@øf&zAã‚U%(@Á¼P ÁÌà ¼t‚“M DÀ%N2‚Ã‚TSãhP†DG“8ä `œLQ·2¨LTB; m€ yÕ·“J#s:‡h\ˆ¢`n–Åàe¼"k…°s”}5Ö@ A$Nf TÓgSp…FÀÂ8cÁî†T¨É#AA ˆá¤RŒ*” Ø Q%b…şıı÷Ûôç÷ÿu;^ì}lq÷«Ü¿æwŞ~ŸW÷UuööÀïa¯}ÛÄçÕ«÷şsÙwİ_[lï¿§Şß[»û‰vı÷·öa~ÎÔçï¼µ«&•ëï-÷·>šßJ‰«wÜ-î«=×/~îİ¿Ä·_“y­æ_Ñı_—'…oüß Ş`Èh?Ò;V¦¸À µ$¢:‚ÑKˆ–øhH¤n†0ÃTc 9àG÷sÛƒ: :QIñ@„¤$¸a¯Ğ5
X&#a †Él= 6DÏ <²ÕM9ÔŒĞJ’… KPn)ut 	(Z°yúØe»¼«˜¶š³×õß?{o¨·Ï}ÖÿÓú~‰üÕæîíi_íûÙõç¿şÍ$‹uŸç¯ymO?ıv²ÿ{½wooıøÎıí—÷Ï»4ÿôâçıÿ#;ÇúvOu«;~õô9wx·šèó?û5¶Ïyïµ³í§Êßçíøg|µ®v{oZhù÷w¿Ïú[K×ÿ\ı~C·t77ô×ı{$ïø&ß7ÿ¿wÌõïß¶ûÿdÜÇ¿ß/ó_$¿n^ÿÿOùÿÎıè_ş»+»ç^ôşu3û>­ıŸoÙÕö„¿ï{ÿ}¹ÿv4½½Úùïÿ3g·ºßÿoÛq¼Ş¾¹ß™CwµÃŸö¿äK2*p‚f3c &$ }C3%¤GÄPğ-P.¢XHIë±F \Eô ì~£l}!ZpP àÂúòì9v@Ñ—zò„‡¢ ©²ˆ"f’„-Xjâp½%èM Ø À°È2B†ÄYÔ†U axGïƒ¿oÇ–?„é[9½¦ßŞû½ílgjşÙGÜß6”w/{ş÷~ÿŞŸmgn¿İ÷í<é-õX¿_QnÚ€ûıÍv7Eÿ;¯âŸ©¿…}o>÷n~îU»ÿ½ßå\Åÿßú™ÏvA7Ö³®eFwîæ<Ù´ß£ÛP–­œ‡k¿ßŸ7¾Güî!6°¤

zÎ`RØü:¼t²‚B ¼ `(°*+p¨7LKB|RuĞeäŸnø#
£á!B5€‘0P€ ¨U1=Y… b…1 ƒh¥V„Á!Ô*)`üU Ù(x£*"N
HGbNlB‹pd€Áf-´D@1`€@A'N‘@€
·82jnÄ=!pÌ¶[ LPSˆ`qÅ£N B`DjÈ=GTz²0t'S®U`âŠ E‹C»ˆ(hB„àÀªÇ8(š‚HXä1JFÑw‘AÀ@c¼<§¢²,aUÌµ¿Û'ÿşçĞ¿ãÍşÏ÷?û/a­üûÍŸå¿íıêÛºì½ÿŞî:Ïmç_ÿ2İ?öa\üZßwŞ&o_Ê¾İoÿñ¢Ç¥ûI÷ş?ß¹AÏOßô»LŸçª}¿›vş¿şß´Ö¿O§ß™«ïiúOÃ™×ñ·¿ä[şúÿîßÿç>Ó}oñ†¨|p$0H$S—" Ğ$áB"xÄq"Åy°L%#<à“cÑ  –ÀàÃRÓR)h‚÷@F!ˆ ÀL
$"-Ç:é0€o ’¸‡ G–È+r•©d'†@CÂ› ³q‚mğ¤@á¢å9@è°?¾{ó{°÷ÿÿ{ÿï·÷ÿßàıœÓ}Çÿş÷9)ıì½m}¿ï}Üö¾Ù=ó+ùûKíyŸ;ŸõÉË®]Ù§íÿ~»nÏ7ïôDåŞÕŞ¯ß÷·¿¿æ÷Şûß¼O|¯{âW‹·š¯íïb©¯ÿ·Ëoÿßÿvw×§æëë¾n>ÿİÈõ××ŸŸÌTgçÅş¿_ùæîÛ›~õ6Ÿ,9Ï:÷ÿ^¾|÷µıÛoôÛ×ƒHÖşü½¾oÍ×ï¸ıÿÿøÎ·»?æ|¾Ğ(ïîÑºúoÿåõû†}ï¿ñm5í¦ó¾<êÔ¶Ëyÿş—ÿ?móäıÇï_U;ÿîˆnÆ¾ÿ‹íë›Ã½Í8ÀG L^ˆ¬ÀÖá °GEE
A Ha€RS€H.:³DiÈa1fL–ã `"Lzõçÿˆ5*’‰ˆ5íL‚LÉ*#²ò,Bl 
€yN8PÑJÌ¢Fl8¨Ş è›ùnÿÿ¥çç¾x÷xçµûñôm»'ŸŞ[úÃŠ¿ª4‡uÓ+Üß¿ùú'>İµºëÿ×}w»ïw²_Ÿ´ûY|—wî>¾~w¿=¥b|îû1şç?ÿœÓÓÛÜf~í¾u_÷ÚúW@õóô¿;ÿş7ııÔÖô£v‡[oÿ}ûçşÿÿÖù¿FQ€I ÔI‚~„Dg 	,ÄR	1À0s 9rƒSh5Ñ Èƒ•f.12F@U0ˆ&ˆÉ DX8<À`âÁ$ Z*8—T7 !8à BQ‹™+>@ôR8x—Ñ C]@6˜¡¢ƒG€Á§æ€xÜàe&‰AŒ Ã³JQK0š3 ’”f8 &TÂDÚª›L‚E«²øgfŠZE©‰BÀ"ÂB ˆ@5LAX¥…J"#spğpGA €¾@`ù1@œÍÕCJ`¢ (Q €6Ä“JB%À ×Ëßşşfëõ“èíÛßûÆ÷·Ò|·?SÓ­ô>ûß??ÊµúÏwW÷‡_[Ov=ûç_şÿÿ©|¯Â<ı^ÁWWÏ˜¹>Ìü7Ó½]¹êù?¯ıïèêïŞ¾gv¿›¥şûG¦{IÒÿ~Æu]ÇZ—¿?ïõ¿»öüïoıîøîİÿmÿn this._color;
      },

      /**
       * Resets the current color.
       *
       * @method resetColor
       * @return {tinymce.ui.ColorButton} Current instance.
       */
      resetColor: function () {
        this._color = null;
        this.getEl('preview').style.backgroundColor = null;
        return this;
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, id = self._id, prefix = self.classPrefix, text = self.state.get('text');
        var icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';
        var image = self.settings.image ? ' style="background-image: url(\'' + self.settings.image + '\')"' : '',
          textHtml = '';

        if (text) {
          self.classes.add('btn-has-text');
          textHtml = '<span class="' + prefix + 'txt">' + self.encode(text) + '</span>';
        }

        return (
          '<div id="' + id + '" class="' + self.classes + '" role="button" tabindex="-1" aria-haspopup="true">' +
          '<button role="presentation" hidefocus="1" type="button" tabindex="-1">' +
          (icon ? '<i class="' + icon + '"' + image + '></i>' : '') +
          '<span id="' + id + '-preview" class="' + prefix + 'preview"></span>' +
          textHtml +
          '</button>' +
          '<button type="button" class="' + prefix + 'open" hidefocus="1" tabindex="-1">' +
          ' <i class="' + prefix + 'caret"></i>' +
          '</button>' +
          '</div>'
        );
      },

      /**
       * Called after the control has been rendered.
       *
       * @method postRender
       */
      postRender: function () {
        var self = this, onClickHandler = self.settings.onclick;

        self.on('click', function (e) {
          if (e.aria && e.aria.key == 'down') {
            return;
          }

          if (e.control == self && !DOM.getParent(e.target, '.' + self.classPrefix + 'open')) {
            e.stopImmediatePropagation();
            onClickHandler.call(self, e);
          }
        });

        delete self.settings.onclick;

        return self._super();
      }
    });
  }
);

/**
 * ColorPicker.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Color picker widget lets you select colors.
 *
 * @-x-less ColorPicker.less
 * @class tinymce.ui.ColorPicker
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.ColorPicker',
  [
    "tinymce.core.ui.Widget",
    "tinymce.core.ui.DragHelper",
    "tinymce.core.ui.DomUtils",
    "tinymce.core.util.Color"
  ],
  function (Widget, DragHelper, DomUtils, Color) {
    "use strict";

    return Widget.extend({
      Defaults: {
        classes: "widget colorpicker"
      },

      /**
       * Constructs a new colorpicker instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {String} color Initial color value.
       */
      init: function (settings) {
        this._super(settings);
      },

      postRender: function () {
        var self = this, color = self.color(), hsv, hueRootElm, huePointElm, svRootElm, svPointElm;

        hueRootElm = self.getEl('h');
        huePointElm = self.getEl('hp');
        svRootElm = self.getEl('sv');
        svPointElm = self.getEl('svp');

        function getPos(elm, event) {
          var pos = DomUtils.getPos(elm), x, y;

          x = event.pageX - pos.x;
          y = event.pageY - pos.y;

          x = Math.max(0, Math.min(x / elm.clientWidth, 1));
          y = Math.max(0, Math.min(y / elm.clientHeight, 1));

          return {
            x: x,
            y: y
          };
        }

        function updateColor(hsv, hueUpdate) {
          var hue = (360 - hsv.h) / 360;

          DomUtils.css(huePointElm, {
            top: (hue * 100) + '%'
          });

          if (!hueUpdate) {
            DomUtils.css(svPointElm, {
              left: hsv.s + '%',
              top: (100 - hsv.v) + '%'
            });
          }

          svRootElm.style.background = new Color({ s: 100, v: 100, h: hsv.h }).toHex();
          self.color().parse({ s: hsv.s, v: hsv.v, h: hsv.h });
        }

        function updateSaturationAndValue(e) {
          var pos;

          pos = getPos(svRootElm, e);
          hsv.s = pos.x * 100;
          hsv.v = (1 - pos.y) * 100;

          updateColor(hsv);
          self.fire('change');
        }

        function updateHue(e) {
          var pos;

          pos = getPos(hueRootElm, e);
          hsv = color.toHsv();
          hsv.h = (1 - pos.y) * 360;
          updateColor(hsv, true);
          self.fire('change');
        }

        self._repaint = function () {
          hsv = color.toHsv();
          updateColor(hsv);
        };

        self._super();

        self._svdraghelper = new DragHelper(self._id + '-sv', {
          start: updateSaturationAndValue,
          drag: updateSaturationAndValue
        });

        self._hdraghelper = new DragHelper(self._id + '-h', {
          start: updateHue,
          drag: updateHue
        });

        self._repaint();
      },

      rgb: function () {
        return this.color().toRgb();
      },

      value: function (value) {
        var self = this;

        if (arguments.length) {
          self.color().parse(value);

          if (self._rendered) {
            self._repaint();
          }
        } else {
          return self.color().toHex();
        }
      },

      color: function () {
        if (!this._color) {
          this._color = new Color();
        }

        return this._color;
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, id = self._id, prefix = self.classPrefix, hueHtml;
        var stops = '#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000';

        function getOldIeFallbackHtml() {
          var i, l, html = '', gradientPrefix, stopsList;

          gradientPrefix = 'filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=';
          stopsList = stops.split(',');
          for (i = 0, l = stopsList.length - 1; i < l; i++) {
            html += (
              '<div class="' + prefix + 'colorpicker-h-chunk" style="' +
              'height:' + (100 / l) + '%;' +
              gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ');' +
              '-ms-' + gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ')' +
              '"></div>'
            );
          }

          return html;
        }

        var gradientCssText = (
          'background: -ms-linear-gradient(top,' + stops + ');' +
          'background: linear-gradient(to bottom,' + stops + ');'
        );

        hueHtml = (
          '<div id="' + id + '-h" class="' + prefix + 'colorpicker-h" style="' + gradientCssText + '">' +
          getOldIeFallbackHtml() +
          '<div id="' + id + '-hp" class="' + prefix + 'colorpicker-h-marker"></div>' +
          '</div>'
        );

        return (
          '<div id="' + id + '" class="' + self.classes + '">' +
          '<div id="' + id + '-sv" class="' + prefix + 'colorpicker-sv">' +
          '<div class="' + prefix + 'colorpicker-overlay1">' +
          '<div class="' + prefix + 'colorpicker-overlay2">' +
          '<div id="' + id + '-svp" class="' + prefix + 'colorpicker-selector1">' +
          '<div class="' + prefix + 'colorpicker-selector2"></div>' +
          '</div>' +
          '</div>' +
          '</div>' +
          '</div>' +
          hueHtml +
          '</div>'
        );
      }
    });
  }
);
/**
 * Path.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http:/ÿ³ôı¿-ßûÖV>ûÚÿôi¿_\ß–6gm?Ú'ìá}§Nì?ê$ÛÃx{g†|ïµÏşäÉ®ÛõQò]ªîsœ}ş÷íuÇ^u%_ìışúWv7ï›çş–êÿßëâğÿ;»ö_şO¾ï}ûFSñêä•`¿m—g{Ù¹gM‹·Wv}¹¿ë8ït%»»Ê½ûÈV™íüï%úïŸÛÿ/w¥Só÷ÎRk½üZaÎ¿ÜÉ©[ëóùµ·úÂo·=¥M¶Oò_—î·Ò öÏZûôé¯/ò£{w¥Ûv¾7ßJ_/¶	ïôï‚şC¾®¹ı]ë¹x;éÛ¥ÿ¹ıGk{ZzZ¿é»¿ÍÜïõ;ùŞåØ{´_ıÍÿÏ‡»ı»=şúæÁç;×Íûñÿùÿ¿û—åï÷øë¿õïöï¥¿İß‘?Š=ïöÿÿ½ş§øzÇÔÿ?çú´_iotyÿşMµÿ™Gï4v»÷Ùİöß}÷‡×«ú6¿íñgÿ|7ï¶ı¥·]÷¿ık!ı±Â¿÷÷{V·º?8{Õ÷üFìÔÿ7íÕ×ä<”®•4=o¹Á¥ı_{Ù|3fù×ÓÛÒsåÉzÆ_CøiÖúÅ~T³²~¯¶~¯¶ûšéo]®kû­õ6d–Y_=æ_ûÄ{ıÕƒ}äh¿î®åÛÿ=ÿíÌfßÜ(—³hßåßıİ¼Ò{9ìm×üŸÉ÷µ³y‹¿—ıû{Ë÷÷ğ{øú½ß{DFù¿_úÂÿºg}ûÿNıÿ¯Ï¿Í§Õm¯ïó?[|çÎ~ìßŸì¼³¯şË7ı»góÙ‡7Ïkïÿ¹N©—¡­ë?Û?ZÏö±İõ>D‘ùşmÛ{û:éÏ^İ¼Ğ·ïwû½â½Ñ\ß_¼—úŸqõ1ÿİ`—ßÓW¾]ÿß=ßUÜüşÏüîı<ëñİ–O.ü?çó÷³ïås…ÿ~‘Ú_iıR‡—º_ºÿzËgWí«3şº/ïÿ¶ûm|-Šó“ÿóxnÈîûÅîwõÖ“;{äã`nÌlğöl³ù}<şó­Ï>.n<åÿ×ubC;3şÅçşäGşçhøìŞâêí•ğ‡{í–êûµÏa[ı/'ó{‹{tlFñUv·Î¶«ÍøçÎ»5Ş%÷ï}7}Ú1êïÿşÿ}±i[Ÿ³ªs»âİ}jÚvr·óË7{×üwïŞ;éx³îÿ|ïî;?Şöİßœ¸µ9ëûÿØ¿Ë˜²¹Òû×7~oŞñßÚÃ­Ÿ§÷´än[wĞ?Ûç|‹ê~\ïŒ¾ÃºêëiÖ‡];×åıóÇÏkû±ßı£¾%z¦»ş—óÎK7»òĞö_ÜÔ¿—ÿLõ¾¾÷Ù~ƒêûîoÿÙìÎû°ûhXìŠ¿EòvtïÚn(ğ·éıW*äı¢/F•«zßÃU´;Í}:äÎ4ÃyXçÇşó¡×–¸ßô=yñXÛ'n«Z«.éûwó»å¥ùõW½¸ë¨NÀåøÿÛÏ¿"çnò@:`_%[WGvßæ}Y¼#¿µo[¾/Ôã×ıÕçıî6^m,¬ôèæü¼7¿'Ÿ7KÖôõûßâÖ¾şºíı=6¼:ÕÔÍİ½Zçmşœÿö{ïø—}ÖùwÏ‘õë¹õı{û¿o­ÿ|ÿy«ßİfÿë¾Õy?å
õÆÏülëÿ÷=Ùïş~ïõzW÷ıõŸşl÷Û/úÿ©ÿíı÷>ğw/ú®û_È­ıkó¿¯}|Ûï6ÏÛëzÑúÜ'}½Ï·_ÿKvëÃñşîÛ§½yn;=Üû³¿^ÿxõß¿Nû\Ûø?›Û½÷ïîí<İûïÌ½}Ó'4ı{zıUøİ_ï/uŸêó½×=oßÿæó¹®u÷ò·{ª«kví—ÿŸ¿§æY bíÖ¾yåQâi-oïÅ¹V~|ıå%£@Uÿæ¯|'2ÙÕ¯ùîò6lÙßÙ
ñykH­‰Õø‰ÕeUúÿ®îÖÍN§Ö¼~ÏöOÏÜö/Ï¿Iç·¡XëÕ³V¾òø+Ëµ~ıŒ§‹[ë‰´û·…»s>rv :ËO—Â©¶ÿïıı_<ŸUı½zÖÏÂ_6Ïïg¿iîÃÖ{¿÷ûçô÷Ÿsöû{º¿×½~úë§÷Ÿ›éû“Ú~Në—ñ¿úpiÿ»›ù6çåçßûœo?İüù.ûßÛûıîøo·÷ÏËóÛÏMóî×Ïºß?;õ/şÿ¹­ÿqï\©ÿçï·çÍP­ÆßŞøúŸ1íñ×B[ù7·Û~Á’ÿ6Õ×^Û7”=æŸá3ÄM?åË{Í[ík¶µf9Úw;¯Î×æ¯¿ü-ñ¸wLeo¦VGºPë9kşƒf_wº›ÛåÏ¯ÏşÒ§?Vn~ÜçŞ÷û‰×ù+_?¯-Êå§|×ı÷{_÷ãÿê‹½O&#7í[œ7}•½Íü°÷w¾Îô÷ÅÖ.¦s£ôSèOiY	Ç£½~›Ë³;ûÕçT;qëyá»îßşÌ»LÍå;6µk¬jöë¿ãÚ©×OpßŞ,•üé=°øoùŞ.çfŠ2yÿcñHŸúnuÿEê."åwY9Q)ƒ‡&öŠ?sör¾¸ê~k)òSZ©ßış+şû.ï•ûÿ»ÿxlş÷¯¼ÇŞ´õ/÷×è_üE½êşg¥ş_¶·ß¶çÆë»Únß×¯›yÖßsõüå¿üı‡©’û{oóßø^ş½æáW\àZºnT7÷ïïÚ¯­÷sÊúÏÃo}§>ıôÿ·ûùLœŞµ_-ÿÕÖ¹ÿ•SÇNt£§ŞÍ>»ıJ“]¿-½ßfXøGOäQß	¥ó?uRâ&´×wcâõ;]zæÍ|Ösş—w\Æ”z»Ég´ƒƒÚzKU¿¬û§ízô>æqÿ_õÖºîîşio¿Š²sO®Uæ×®ç»î¢æ„»ñ1/pÊO¿Íå[mß­ÛÕú¹¤İÿöéÿßÿ?g§íé»¿æçşîôsœûÿgLwZÛmÿ˜ıGŸ=ë½\}¿GÒãc=½é÷ë™ª»ó—Ø÷Ûßs½ç÷‰~+ÿø«±ú›m¾sMõ÷àì_û~é©Í½ïû³'kÑ¾ëµ_}K{cço=2?İ¯Š¾ûİ‹óËWÿµúÿdq{mnşT¾“–ïßø˜®ßûë¾¦Ì†GÛKÿ·ı~?ÿÚ¿ıÿıİ}ÇïsÛÙïPÚòËØúqT}ß;W·PüÎ_×ÿÔ%ßm÷ú÷qyñÿùnó²úşşÓóe½y6½ÿ¾ÉåÛè»{óõ“õ~øÿcwbK…ù~Æø3Zœ[%/îıŞÚÙïK¬Âx9^^[ßÇç}~§^á¥7t>|;uÇUÍeü}+ß1ºt×ôz¾¶¯ë?ŸGò±ò]ñÛ+å÷;Rb½ç÷7ZÎ¹ø½ŞÏŞİÿ;wµò­çïsª¹wÂ«zP·úûO×ñigç˜İnºÖç_x›çÙÓğßÑıß˜¢·7?C®¾­wšÿeoÿÏi5­Ößõ­[—|óÿä¿|?4äe9ëßŞŸóú½Gü¿x¶Ïk®êı»»Ó§ÿVû9«~ß‹ªï~éÿ¯êoÇvî³üäúG÷“œó÷»Ş&çû×=Ÿû¾™?óï*/½6ÿOİ‡ööàSRİë+ÍQ—ºıı6OE××ÿŞöÕÃÿ÷ ÿÿıïıÇ!÷×k“úõ¹óûÏ´]»¿¯ı™9ûËê±§é Ö_ı›ø{¨ÖÌËî¼ıè±ÿ5=g'=’—+oÏÒgÌwøùlaöoµ×úşüo®ãû©¿Æş\e?]ŸñÊ¿)¹ï½Å~®µ’?½Øs¢wù*×%İÌ'÷w’æGq¿»uÃımxñÿì5ë]÷vey®Î_Ù	Yù»c=|òÓôŒü(öäı½ûúcÿ†¾“Ú^TQ>©÷Ô^—~J]~­{6èoßÜó»{«òw{¶Òzæ%w÷3»}ğöHßíßëïéï0Îşı?®Ş·Ì_­®.í²oğËÜ÷Yşgôıí©ïıºŸ}ÿü;ò×½OŞ÷_oŠúøŸ{7ı§äw´¯ı÷¯öõ»û÷ŞØq¡Ìûïÿÿ»ånıZÿ0ØÿÊõ®º÷~õÏ?÷÷×sÿ¥76ÎÚ\şwè{j÷ÚWËßgk×Ü!—¼ğCÚŸóÇÌşc[r‡¤·oÅÒÇûüüenÎV=Ï¹ŒâÉİ×ĞúÛïÈŸõı_~9;ÿ™tGo×w¿×\ÊwW×ëõ?{´ç¿•·“tqç¸;ÛiMF×Ñ‡™[{ß:qf)õk½&ş©ğqwoËàóËO7ä½Òïß^²¿~»}7±ÿ÷{NoÛöåÜúşúã²÷øİú;7¿ıÛËê|¾½«îí©MÙ§ìk©Ì»åß]ç_Ùq½ös®ŸîÚ¯ü²[O~}­ìı¾¿ÓQ\ûOİßë{¿;ûü­S;Îî¾¾Ÿÿ»øëº¿¬üÿgmŞóÔÿ^MN¾¢ŞïKØ~ÏÆÉÆëıï÷ùÎ^ k¿ï­İîºùo¿~ûèû‘îçvû<‹÷¾·—?ã?‡åÿÿw?rg¾í»öıßuûõŞı»ímıßûoÏÌ÷­-¯=>\ªş\Î¾ç÷öÿÿşûÖ«­şû•qïwéæ›Êêş×ŸËæÑû÷nSfíW~»ÿ©Á¯×›½¯ÌÖx{MıÖ¾áoÓ«Úõ%ú†×;X6Ù_âëÀş¿úıÇ&¿%Nşï¶ÃDl.’Vß/ËÉ–ÿƒ¶ŸëïS"Ú=@]ÛÖÿc½óo÷0˜ÛtƒÕşÛóÔXuv}µşô_.â*=+?ôFëhÌÛŞ+ñ´ß¹ı`÷=W¶¯ï{ÿ¿^ıõ[÷ÿ>µïñÔrÏc–á}Ûöß·òËÛÙëïsë*u?ƒK•ÉÂÿ‘¢~ÛdKRßòšßR×ôÛkïŞ÷×~Ö÷ãÛ÷k÷ïşïÿÿß~u‡ğçÍrÜŞe>ŸÛî¿·[g¿ÿã>ıæíg¯ÿÿÿ÷ÿ]Sikî­4Ù§Çe^vıùBĞÓ‡gÿuKíFå»ÿı÷„eûåºË7Z½r‹}ùÙ|7‡òûûşßîn¬¹«Oè¦%&Kş[WSş¿Kgbÿ?ÿNsëğŸ¤ê…ÛÔ<Íïîß™¬-ë|¿ø_½¥ïqe¼Ã›şÔëÙ˜>ë¶ù6Êñ·ûôyùîªü^î›ïû{şl«ù•ù—ï«Ö.¿7çÁîóÆ³·T™}/İŞ¥üÿ]§ù¤sÛ'­fÒ[–ëàç»ÿÑE[ñoÿÉş½áñµ¿›Õ…ïŸÛï£<Ãè;8N;¶ßşİv)û:?ö³ç¿›Hş×\÷†©ù¿ùŸCÒ½ïZO×÷Çí½ßü?É>¿ªkŞ¯şıõ˜Ÿ³KÏÉ´õÜ¯Òÿ¡÷ŞùßÎ[÷*Ûßésù¿›ùj—×xüÅÒ9ÚŞ¾¿~.¦ßŞı»Şß·kÿµ£ÿîWÎ»0ßÿûşï|{vÿş};f½ª×şûz‡~kÿvv×÷‘çgß¹¾ÿÊÿ÷ÿ¯Nû^            return true;
            }

            if (elm.getAttribute('data-mce-type') === 'bookmark') {
              return true;
            }
          }

          return false;
        }

        if (editor.settings.elementpath !== false) {
          self.on('select', function (e) {
            editor.focus();
            editor.selection.select(this.row()[e.index].element);
            editor.nodeChanged();
          });

          editor.on('nodeChange', function (e) {
            var outParents = [], parents = e.parents, i = parents.length;

            while (i--) {
              if (parents[i].nodeType == 1 && !isHidden(parents[i])) {
                var args = editor.fire('ResolveName', {
                  name: parents[i].nodeName.toLowerCase(),
                  target: parents[i]
                });

                if (!args.isDefaultPrevented()) {
                  outParents.push({ name: args.name, element: parents[i] });
                }

                if (args.isPropagationStopped()) {
                  break;
                }
              }
            }

            self.row(outParents);
          });
        }

        return self._super();
      }
    });
  }
);
/**
 * FormItem.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class is a container created by the form element with
 * a label and control item.
 *
 * @class tinymce.ui.FormItem
 * @extends tinymce.ui.Container
 * @setting {String} label Label to display for the form item.
 */
define(
  'tinymce.core.ui.FormItem',
  [
    "tinymce.core.ui.Container"
  ],
  function (Container) {
    "use strict";

    return Container.extend({
      Defaults: {
        layout: 'flex',
        align: 'center',
        defaults: {
          flex: 1
        }
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, layout = self._layout, prefix = self.classPrefix;

        self.classes.add('formitem');
        layout.preRender(self);

        return (
          '<div id="' + self._id + '" class="' + self.classes + '" hidefocus="1" tabindex="-1">' +
          (self.settings.title ? ('<div id="' + self._id + '-title" class="' + prefix + 'title">' +
            self.settings.title + '</div>') : '') +
          '<div id="' + self._id + '-body" class="' + self.bodyClasses + '">' +
          (self.settings.html || '') + layout.renderHtml(self) +
          '</div>' +
          '</div>'
        );
      }
    });
  }
);
/**
 * Form.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class creates a form container. A form container has the ability
 * to automatically wrap items in tinymce.ui.FormItem instances.
 *
 * Each FormItem instance is a container for the label and the item.
 *
 * @example
 * tinymce.ui.Factory.create({
 *     type: 'form',
 *     items: [
 *         {type: 'textbox', label: 'My text box'}
 *     ]
 * }).renderTo(document.body);
 *
 * @class tinymce.ui.Form
 * @extends tinymce.ui.Container
 */
define(
  'tinymce.core.ui.Form',
  [
    "tinymce.core.ui.Container",
    "tinymce.core.ui.FormItem",
    "tinymce.core.util.Tools"
  ],
  function (Container, FormItem, Tools) {
    "use strict";

    return Container.extend({
      Defaults: {
        containerCls: 'form',
        layout: 'flex',
        direction: 'column',
        align: 'stretch',
        flex: 1,
        padding: 20,
        labelGap: 30,
        spacing: 10,
        callbacks: {
          submit: function () {
            this.submit();
          }
        }
      },

      /**
       * This method gets invoked before the control is rendered.
       *
       * @method preRender
     E" ¢ìL(lHĞè€\ 	¶#‚ Ä d8	vøÔğH‚H`,<@p0A
Î0„@!ˆt€ ÆLB°,MƒDC-±!Ä¡ø•G’¸Yi¨ F6
Àaš•s8¤UÈ (¤p‰@â‚è¤Q%‚ÔIY–:€œ ƒ'NŒ*ĞÜBÀãÂ 6–}…5r¡-xØáÁ
ÀAj§Ø¡R9XH›ˆ‰ “çb`
!#¸&­ÕH\°œ@ûÀ ZæA=-G?%ç(ZP!‡0 dÖ¨¼z  ¢JAò	íà`H	’ˆX†‘”ç@ÂD€ª@@	;"§ˆ/
T*PIœy	WÀ˜e?O!0à˜bt	Hp‰Ô!P¤
…#RgI™£…™Q|6Òd¤X!ù0ĞÇ/spÄvà¤‘J2Y=œ+'XP
ˆ]D$!
à`n*£€I8X$ A °$h—<”pŠA,DÌT%˜EŠ€5ÈÑh`A(@€aÅ­,+8ÄD@$qˆ<@À’ÀÈæXÀQ°P*©ˆÈùQ™jlPI!ÀÌ!8Vƒq_J»¤AÌ±!öĞ!€  ĞL–gJ °4,IC  ¢1÷ºğä”Iµ@ŠÊOÆşÀÀP¼"pğÆ@Ä„%PÊ HBUt$
R7"rr
QÈÕæÒ¸a¥RY ñD@äŠRrD!J00á*G`£HX@Áôlé‚è„Ê@ÁT6¥4L¥¶Â y¥–@Ğ	 B$!sĞ&H Àr„(¦@„LŒ„FHµİô.r€‚(
Í   àªDhp¦L!s3Kr ‚Üğ¹`‹0° I€iØ"@ Ë ö@ÁZˆ‘c! 0¡‰h 	Ë€` T‰xÂ‘È4±¯Íq€@†‚)€"€4
 9” •ÆK0 N=¨P ² ‚–B’(^2&)ÙU0¨‘h.#iQ	É…Èˆ °¹X„Ğ	ò†SO„yˆ„5ˆ'ÈéI”3GÅ Ê„"^'€F
AAñA ‡
Càd)A`T12&Ò 1A>»·…óNV4ÊiBĞ€!ˆ1¨ÜH:Ñhµ(@
€» VS2’¶±fT3œ§/€:/FAqIExÁ` ¥(	û*› ±JHÊÑ ƒ$°…9hèÚk,[„”,RÁH4IŞ[0˜Ê C!HÁ PR ” ¢QcÚÏÂ@R¦q„€A¹ƒ£,ÿA†È3K13‰š0Ç0@˜è€„¨1nQj0HŒBd (BÀl]Q‘]¿aZH2!Eb,5@”ç€ à€à£¤”¢}$˜L†ÀN
¦	
$Dİ¢ @DÁHŒâH4§@Ì@Ñ¢PvÄ€FÌ9(„ƒ É±T@¬¤`*©*Ò^Ï€0 1   H9 !FJc#ªD,€K0ç!X„Á€PĞ(

TêåCN›hœqJ  ½$¨@f"äªˆ¢Òh
¢¿Š$%&0‰ÀRî‚s6ÏuU±Pàk@'E4„SFà.é&P–”p3 ÈWÜ-‹µaB‡Æ)!pM>LüPP:çĞ@ğœ,X!Ú±9ØI•+¢­ È 
 Â”HÜÈ1šŒ€	™(†Ô˜ˆ ™T¬, $–HX PYäL‚À“	@b`T!HQĞQ)“EŠ,C™È
Õî,j&„„ €
 µiâ€ 3¦Nƒ‰İ €0}„?ƒä<äÚE¢ V Ş@ ÎH4¼ ÓxAy”ºÆd˜g ;³R±"©/KF3Ğo)M‰ÍÒĞkœ”á0 ¦ØE–Âá$À¦$ "À&´‹D1eÃĞ¶Àu’„œÁ69 '`bùCl†„Hà-U ÀN3ÄÔª}Z-g@(™!„  d€†0`ğÒÒ–@„£Ç4`;@,4'‘ AàĞ
j £(ØHyÃP
ô	nÊ‰ 2ŒJ @€„%-ƒŒC@‚QLò1.mìÒ
 ;E@r€$H  *àØx<lDJ(Ph  Qª
Š !ñ8AfY\t"DµVADs‰Aƒ„0S•1ˆR']xêÜ‡ éR 
Á€8*4(! ,(Âº)ˆğZ€üd P ²“³#€RÜ@Rdø€¹ w``6(!!P§%A L ˜áè2#‹ª&‚ÄÒÂá +b†ß€˜ ”åµ‘ŒP2`HA¶E@É„.P–åÂ €5i†LÖ1™ò¢*G Tˆ …U”¡âÊl=(³‚èPã)"GB	ìQ>x‰Ø"”ÎìXŒ‰`Æ-Ùrkh†”2ˆˆÄƒ°j€5Ìh$	ˆ–ú¢£ÇP0 C¸„œ x†M"h. Ğ®  Ğ@E& °Ñ$ğÄ !cá] Şp‹ƒ‹‹%¼.é@x(-h¨–¿äÈD$,úS‰dD8	ÌĞÄ* ä—@€Bøé0‚)7 )æ~Åƒ0à5s±“T† rš¥E@ĞgLÌ„‚árC¬âáÉä$á(fGìyº¡/ô”²€D#¦Q=ÅBg·pÂ¹Ôhè¬§ÂC—Y±Cğùä+	U	LM’´”haÈnÂ‰®‚„–µÀ¦ĞàÙBUD^†A™@C„²‚æÁâ†£Ìø1B´ !µqræ BD;£ùA(Hr”z ‰	FBƒâª 4"SRfU–PÛ 0¶^ğP`Œ†Fç62(>Û4
EX† ÓÉã4“PA¤àÆŠ0‚D¢‘˜8KJ&Î†„Æ  ¨—Ñ@ p5T+ğ&~D:sìÂÀs8˜¡ÊÈ‚ÓƒÔ	ƒÀ	R‰P‰… ó°Àh@0!XJ»"Çâ ‚.Br€†µ"‚@*G¢Ä(7`4H€íbM\ D ÄÏ€%…H N¨0 9º„ s7j
ĞÚCB¼‹Ïjeô 	§	ÃQX8–L£ »-	È  IXG1Áif
ŞÆ¬?Ê,šª\“!¨Dº04!`Rh	HB3ä4à`BÁq’ÄÆâDHb° @J2¢Š€‰ÓPLUá)P©BY„8)p5@jr. dĞ8D0  °°F’šp! "@VQ,`  L( P!X© RğH-Ô  ¡l€‰.BDâ€ñ{† FjÊR±ÒÔ`D	dpŠ`':ŒD€Ğxøe"$:o¤
Å@BEA¦	¤«(¬º)0v¢€Á ˆ@ l¡TÅ”jøŒ $¢èœ@”#9L	0bG‚c•g
 Q1B8İnRCÂ“¸ CÁ€R‚ Â30H¹¤B¡0%
 /š & @U !Åj8D  pp‘ D>Å  "ø2 qˆ1H{vi
ÀAHŒHÈ@O”äSÆü
å&$Ê4w	+0AÃ¤  Á  b
ÀˆW7.é­k¡£´…„1YØ7"ó>?bä/C
ÔƒR $*@t4+HàP@E	È†.‰!O×˜„Š\à‘’`2! $Q
¬…¦CÂB”ee@( b0ÑQQc(p àˆYCD¤Sq–ƒ%Zx!ƒaTl ğ0¡¬˜èÀŒa… p UB)ƒâÉµ‹6ÆºèMDÚ±p	„…˜ğKBÓ›â¶C@¢  åT#Õô6SNÒ`Ha`S!d@	 NŠ·Š½Â0¡\CT Uú
ÈéĞ’Ø¶Øì/ˆ
‹ÄlO™rƒHiƒ9   A
NB!@@€$ “Q¬SC#á	p1 QŠ’ÀT„!¼€”‡f(”²YD°jÊ ÅN &Í±Q”VÈª64x‚^ÒFh‚aºóBˆ3Äa&P@%(*ƒ=l0a K=(Â'Hc0	B ¤?†baA1Vg‘h§ ²j@  4Á" ‘˜|×4ÁÀ!`CAÀ 	à€q˜$´rt€4*cÀ'mAAk _
¦F U = YØ}nnP‚q"¦ 0&Œ¢!ˆ€r2„¬AoˆE0
j…µd€Dd†0µÂÕ•Ä!"ˆ
°0¡4ÀVØ€PIQGÿÌ)a(xw4 Hb €X†èn£B Â:° €hĞ‡Šà° Aˆ¡FPAV‘Æ‘„vƒÅDzHYÄ
àĞˆÔ€€B0.i!tf`‘5™  IÑ–€¡
”@´5Ã‰`€`Ôç@0jƒ$p¦T AÃ`†‰™Ô4‘ŒH˜mJQc¤‚h4‘( B  )Â-0diJ´2Í	xÑâ "ô(  †h€íLÕ,6IÙ¨ì 	0@Á‰‚@Txè@YN+>I	Eh1Ù˜ÿ‘3Eœ @pĞ8Ğé@² ÖJénBŒFê7z„U¥ùB@"ÍC Ñ¦JĞ0(€A®¬$'xªhÍEb&@E,l2Q…+Ä‘b`lD J„@‰<ÀaŠ""Du„)&¨ !.„È ÑƒH$a€LºS"Q™¢ÀPt²CÒ ÁVÛ&AaÂ°Z4`VÁ…­œ  à$@X€xë$€t + self._id + '-body" class="' + self.bodyClasses + '">' +
          (self.settings.html || '') + layout.renderHtml(self) +
          '</div>' +
          '</fieldset>'
        );
      }
    });
  }
);
/**
 * LinkTargets.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This module is enables you to get anything that you can link to in a element.
 *
 * @private
 * @class tinymce.content.LinkTargets
 */
define(
  'tinymce.core.content.LinkTargets',
  [
    'tinymce.core.dom.DOMUtils',
    'tinymce.core.dom.NodeType',
    'tinymce.core.util.Arr',
    'tinymce.core.util.Fun',
    'tinymce.core.util.Tools',
    'tinymce.core.util.Uuid'
  ],
  function (DOMUtils, NodeType, Arr, Fun, Tools, Uuid) {
    var trim = Tools.trim;

    var create = function (type, title, url, level, attach) {
      return {
        type: type,
        title: title,
        url: url,
        level: level,
        attach: attach
      };
    };

    var isChildOfContentEditableTrue = function (node) {
      while ((node = node.parentNode)) {
        var value = node.contentEditable;
        if (value && value !== 'inherit') {
          return NodeType.isContentEditableTrue(node);
        }
      }

      return false;
    };

    var select = function (selector, root) {
      return DOMUtils.DOM.select(selector, root);
    };

    var getElementText = function (elm) {
      return elm.innerText || elm.textContent;
    };

    var getOrGenerateId = function (elm) {
      return elm.id ? elm.id : Uuid.uuid('h');
    };

    var isAnchor = function (elm) {
      return elm && elm.nodeName === 'A' && (elm.id || elm.name);
    };

    var isValidAnchor = function (elm) {
      return isAnchor(elm) && isEditable(elm);
    };

    var isHeader = function (elm) {
      return elm && /^(H[1-6])$/.test(elm.nodeName);
    };

    var isEditable = function (elm) {
      return isChildOfContentEditableTrue(elm) && !NodeType.isContentEditableFalse(elm);
    };

    var isValidHeader = function (elm) {
      return isHeader(elm) && isEditable(elm);
    };

    var getLevel = function (elm) {
      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;
    };

    var headerTarget = function (elm) {
      var headerId = getOrGenerateId(elm);

      var attach = function () {
        elm.id = headerId;
      };

      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);
    };

    var anchorTarget = function (elm) {
      var anchorId = elm.id || elm.name;
      var anchorText = getElementText(elm);

      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, Fun.noop);
    };

    var getHeaderTargets = function (elms) {
      return Arr.map(Arr.filter(elms, isValidHeader), headerTarget);
    };

    var getAnchorTargets = function (elms) {
      return Arr.map(Arr.filter(elms, isValidAnchor), anchorTarget);
    };

    var getTargetElements = function (elm) {
      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);
      return elms;
    };

    var hasTitle = function (target) {
      return trim(target.title).length > 0;
    };

    var find = function (elm) {
      var elms = getTargetElements(elm);
      return Arr.filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);
    };

    return {
      find: find
    };
  }
);

/**
 * FilePicker.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class creates a file picker control.
 *
 * @class tinymce.ui.FilePicker
 * @extends tinymce.ui.ComboBox
 */
define(
  'tinymce.core.ui.FilePicker',
  [
    'global!window',
    'tinymce.core.content.LinkTargets',
    'tinymce.core.EditorManager',
    'tinymce.core.ui.ComboBox',
    'tinymce.core.util.Arr',
    'tinymce.core.util.Fun',
    'tinymce.core.util.Tools'
  ],
  function (window, LinkTargets, EditorManager, ComboBox, Arr, Fun, Tools) {
    "use strict";

    var getActiveEditor = function () {
      return window.tinymce ? window.tinymce.activeEditor : EditorManager.activeEditor;
    };

    var history = {};
    var HISTORY_LENGTH = 5;

    var toMenuItem = function (target) {
      return {
        title: target.title,
        value: {
          title: { raw: target.title },
          url: target.url,
          attach: target.attach
        }
      };
    };

    var toMenuItems = function (targets) {
      return Tools.map(targets, toMenuItem);
    };

    var staticMenuItem = function (title, url) {
      return {
        title: title,
        value: {
          title: title,
          url: url,
          attach: Fun.noop
        }
      };
    };

    var isUniqueUrl = function (url, targets) {
      var foundTarget = Arr.find(targets, function (target) {
        return target.url === url;
      });

      return !foundTarget;
    };

    var getSetting = function (editorSettings, name, defaultValue) {
      var value = name in editorSettings ? editorSettings[name] : defaultValue;
      return value === false ? null : value;
    };

    var createMenuItems = function (term, targets, fileType, editorSettings) {
      var separator = { title: '-' };

      var fromHistoryMenuItems = function (history) {
        var uniqueHistory = Arr.filter(history[fileType], function (url) {
          return isUniqueUrl(url, targets);
        });

        return Tools.map(uniqueHistory, function (url) {
          return {
            title: url,
            value: {
              title: url,
              url: url,
              attach: Fun.noop
            }
          };
        });
      };

      var fromMenuItems = function (type) {
        var filteredTargets = Arr.filter(targets, function (target) {
          return target.type == type;
        });

        return toMenuItems(filteredTargets);
      };

      var anchorMenuItems = function () {
        var anchorMenuItems = fromMenuItems('anchor');
        var topAnchor = getSetting(editorSettings, 'anchor_top', '#top');
        var bottomAchor = getSetting(editorSettings, 'anchor_bottom', '#bottom');

        if (topAnchor !== null) {
          anchorMenuItems.unshift(staticMenuItem('<top>', topAnchor));
        }

        if (bottomAchor !== null) {
          anchorMenuItems.push(staticMenuItem('<bottom>', bottomAchor));
        }

        return anchorMenuItems;
      };

      var join = function (items) {
        return Arr.reduce(items, function (a, b) {
          var bothEmpty = a.length === 0 || b.length === 0;
          return bothEmpty ? a.concat(b) : a.concat(separator, b);
        }, []);
      };

      if (editorSettings.typeahead_urls === false) {
        return [];
      }

      return fileType === 'file' ? join([
        filterByQuery(term, fromHistoryMenuItems(history)),
        filterByQuery(term, fromMenuItems('header')),
        filterByQuery(term, anchorMenuItems())
      ]) : filterByQuery(term, fromHistoryMenuItems(history));
    };

    var addToHistory = function (url, fileType) {
      var items = history[fileType];

      if (!/^https?/.test(url)) {
        return;
      }

      if (items) {
        if (Arr.indexOf(items, url) === -1) {
          history[fileType] = items.slice(0, HISTORY_LENGTH).concat(url);
        }
      } else {
        history[fileType] = [url];
      }
    };

    var filterByQuery = function (term, menuItems) {
      var lowerCaseTerm = term.toLowerCase();
      var result = Tools.grep(menuItems, function (item) {
        return item.title.toLowerCase().indexOf(lowerCaseTerm) !== -1;
      });

      return result.length === 1 && result[0].title === term ? [] : result;
    };

    var getTitle = function (linkDetails) {
      var title = linkDetails.title;
      return title.raw ? title.raw : title;
    };

    var setupAutoCompleteHandler = function (ctrl, editorSettings, bodyElm, fileType) {
      var autocomplete = function (term) {
        var linkTargets = LinkTargets.find(bodyElm);
        var menuItems = createMenuItems(term, linkTargets, fileType, editorSettings);
        ctrl.showAutoComplete(menuItems, term);
      };

      ctrl.on('autocomplete', function () {
        autocomplete(ctrl.value());
      });

      ctrl.on('selectitem', function (e) {
        var linkDetails = e.value;

        ctrl.value(linkDetails.url);
        var title = getTitle(linkDetails);

        if (fileType === 'image') {
          ctrl.fire('change', { meta: { alt: title, attach: linkDetails.attach } });
        } else {
          ctrl.fire('change', { meta: { text: title, attach: linkDetails.attach } });
        }

        ctrl.focus();
      });

      ctrl.on('click', function (e) {
        if (ctrl.value().length === 0 && e.target.nodeName === 'INPUT') {
          autocomplete('');
        }
      });

      ctrl.on('PostRender', function () {
        ctrl.getRoot().on('submit', function (e) {
          if (!e.isDefaultPrevented()) {
            addToHistory(ctrl.value(), fileType);
          }
        });
      });
    };

    var statusToUiState = function (result) {
      var status = result.status, message = result.message;

      if (status === 'valid') {
        return { status: 'ok', message: message };
      } else if (status === 'unknown') {
        return { status: 'warn', message: message };
      } else if (status === 'invalid') {
        return { status: 'warn', message: message };
      } else {
        return { status: 'none', message: '' };
      }
    };

    var setupLinkValidatorHandler = function (ctrl, editorSettings, fileType) {
      var validatorHandler = editorSettings.filepicker_validator_handler;
      if (validatorHandler) {
        var validateUrl = function (url) {
          if (url.length === 0) {
            ctrl.statusLevel('none');
            return;
          }

          validatorHandler({
            url: url,
            type: fileType
          }, function (result) {
            var uiState = statusToUiState(result);

            ctrl.statusMessage(uiState.message);
            ctrl.statusLevel(uiState.status);
          });
        };

        ctrl.state.on('change:value', function (e) {
          validateUrl(e.value);
        });
      }
    };

    return ComboBox.extend({
      /**
       * Constructs a new control instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       */
      init: function (settings) {
        var self = this, editor = getActiveEditor(), editorSettings = editor.settings;
        var actionCallback, fileBrowserCallback, fileBrowserCallbackTypes;
        var fileType = settings.filetype;

        settings.spellcheck = false;

        fileBrowserCallbackTypes = editorSettings.file_picker_types || editorSettings.file_browser_callback_types;
        if (fileBrowserCallbackTypes) {
          fileBrowserCallbackTypes = Tools.makeMap(fileBrowserCallbackTypes, /[, ]/);
        }

        if (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType]) {
          fileBrowserCallback = editorSettings.file_picker_callback;
          if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {
            actionCallback = function () {
              var meta = self.fire('beforecall').meta;

              meta = Tools.extend({ filetype: fileType }, meta);

              // file_picker_callback(callback, currentValue, metaData)
              fileBrowserCallback.call(
                editor,
                function (value, meta) {
                  self.value(value).fire('change', { meta: meta });
                },
                self.value(),
                meta
              );
            };
          } else {
            // Legacy callback: file_picker_callback(id, currentValue, filetype, window)
            fileBrowserCallback = editorSettings.file_browser_callback;
            if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {
              actionCallback = function () {
                fileBrowserCallback(
                  self.getEl('inp').id,
                  self.value(),
                  fileType,
                  window
                );
              };
            }
          }
        }

        if (actionCallback) {
          settings.icon = 'browse';
          settings.onaction = actionCallback;
        }

        self._super(settings);

        setupAutoCompleteHandler(self, editorSettings, editor.getBody(), fileType);
        setupLinkValidatorHandler(self, editorSettings, fileType);
      }
    });
  }
);
/**
 * FitLayout.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This layout manager will resize the control to be the size of it's parent container.
 * In other words width: 100% and height: 100%.
 *
 * @-x-less FitLayout.less
 * @class tinymce.ui.FitLayout
 * @extends tinymce.ui.AbsoluteLayout
 */
define(
  'tinymce.core.ui.FitLayout',
  [
    "tinymce.core.ui.AbsoluteLayout"
  ],
  function (AbsoluteLayout) {
    "use strict";

    return AbsoluteLayout.extend({
      /**
       * Recalculates the positions of the controls in the specified container.
       *
       * @method recalc
       * @param {tinymce.ui.Container} container Container instance to recalc.
       */
      recalc: function (container) {
        var contLayoutRect = container.layoutRect(), paddingBox = container.paddingBox;

        container.items().filter(':visible').each(function (ctrl) {
          ctrl.layoutRect({
            x: paddingBox.left,
            y: paddingBox.top,
            w: contLayoutRect.innerW - paddingBox.right - paddingBox.left,
            h: contLayoutRect.innerH - paddingBox.top - paddingBox.bottom
          });

          if (ctrl.recalc) {
            ctrl.recalc();
          }
        });
      }
    });
  }
);
/**
 * FlexLayout.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This layout manager works similar to the CSS flex box.
 *
 * @setting {String} direction row|row-reverse|column|column-reverse
 * @setting {Number} flex A positive-number to flex by.
 * @setting {String} align start|end|center|stretch
 * @setting {String} pack start|end|justify
 *
 * @class tinymce.ui.FlexLayout
 * @extends tinymce.ui.AbsoluteLayout
 */
define(
  'tinymce.core.ui.FlexLayout',
  [
    "tinymce.core.ui.AbsoluteLayout"
  ],
  function (AbsoluteLayout) {
    "use strict";

    return AbsoluteLayout.extend({
      /**
       * Recalculates the positions of the controls in the specified container.
       *
       * @method recalc
       * @param {tinymce.ui.Container} container Container instance to recalc.
       */
      recalc: function (container) {
        // A ton of variables, needs to be in the same scope for performance
        var i, l, items, contLayoutRect, contPaddingBox, contSettings, align, pack, spacing, totalFlex, availableSpace, direction;
        var ctrl, ctrlLayoutRect, ctrlSettings, flex, maxSizeItems = [], size, maxSize, ratio, rect, pos, maxAlignEndPos;
        var sizeName, minSizeName, posName, maxSizeName, beforeName, innerSizeName, deltaSizeName, contentSizeName;
        var alignAxisName, alignInnerSizeName, alignSizeName, alignMinSizeName, alignBeforeName, alignAfterName;
        var alignDeltaSizeName, alignContentSizeName;
        var max = Math.max, min = Math.min;

        // Get container items, properties and settings
        items = container.items().filter(':visible');
        contLayoutRect = container.layoutRect();
        contPaddingBox = container.paddingBox;
        contSettings = container.settings;
        direction = container.isRtl() ? (contSettings.direction || 'row-reversed') : contSettings.direction;
        align = contSettings.align;
        pack = container.isRtl() ? (contSettings.pack || 'end') : contSettings.pack;
        spacing = contSettings.spacing || 0;

        if (direction == "row-reversed" || direction == "column-reverse") {
          items = items.set(items.toArray().reverse());
          direction = direction.split('-')[0];
        }

        // Setup axis variable name for row/column direction since the calculations is the same
        if (direction == "column") {
          posName = "y";
          sizeName = "h";
          minSizeName = "minH";
          maxSizeName = "maxH";
          innerSizeName = "innerH";
          beforeName = 'top';
          deltaSizeName = "deltaH";
          contentSizeName = "contentH";

          alignBeforeName = "left";
          alignSizeName = "w";
          alignAxisName = "x";
          alignInnerSizeName = "innerW";
          alignMinSizeName = "minW";
          alignAfterName = "right";
          alignDeltaSizeName = "deltaW";
          alignContentSizeName = "contentW";
        } else {
          posName = "x";
          sizeName = "w";
          minSizeName = "minW";
          maxSizeName = "maxW";
          innerSizeName = "innerW";
          beforeName = 'left';
          deltaSizeName = "deltaW";
          contentSizeName = "contentW";

          alignBeforeName = "top";
          alignSizeName = "h";
          alignAxisName = "y";
          alignInnerSizeName = "innerH";
          alignMinSizeName = "minH";
          alignAfterName = "bottom";
          alignDeltaSizeName = "deltaH";
          alignContentSizeName = "contentH";
        }

        // Figure out total flex, availableSpace and collect any max size elements
        availableSpace = contLayoutRect[innerSizeName] - contPaddingBox[beforeName] - contPaddingBox[beforeName];
        maxAlignEndPos = totalFlex = 0;
        for (i = 0, l = items.length; i < l; i++) {
          ctrl = items[i];
          ctrlLayoutRect = ctrl.layoutRect();
          ctrlSettings = ctrl.settings;
          flex = ctrlSettings.flex;
          availableSpace -= (i < l - 1 ? spacing : 0);

          if (flex > 0) {
            totalFlex += flex;

            // Flexed item has a max size then we need to check if we will hit that size
            if (ctrlLayoutRect[maxSizeName]) {
              maxSizeItems.push(ctrl);
            }

            ctrlLayoutRect.flex = flex;
          }

          availableSpace -= ctrlLayoutRect[minSizeName];

          // Calculate the align end position to be used to check for overflow/underflow
          size = contPaddingBox[alignBeforeName] + ctrlLayoutRect[alignMinSizeName] + contPaddingBox[alignAfterName];
          if (size > maxAlignEndPos) {
            maxAlignEndPos = size;
          }
        }

        // Calculate minW/minH
        rect = {};
        if (availableSpace < 0) {
          rect[minSizeName] = contLayoutRect[minSizeName] - availableSpace + contLayoutRect[deltaSizeName];
        } else {
          rect[minSizeName] = contLayoutRect[innerSizeName] - availableSpace + contLayoutRect[deltaSizeName];
        }

        rect[alignMinSizeName] = maxAlignEndPos + contLayoutRect[alignDeltaSizeName];

        rect[contentSizeName] = contLayoutRect[innerSizeName] - availableSpace;
        rect[alignContentSizeName] = maxAlignEndPos;
        rect.minW = min(rect.minW, contLayoutRect.maxW);
        rect.minH = min(rect.minH, contLayoutRect.maxH);
        rect.minW = max(rect.minW, contLayoutRect.startMinWidth);
        rect.minH = max(rect.minH, contLayoutRect.startMinHeight);

        // Resize container container if minSize was changed
        if (contLayoutRect.autoResize && (rect.minW != contLayoutRect.minW || rect.minH != contLayoutRect.minH)) {
          rect.w = rect.minW;
          rect.h = rect.minH;

          container.layoutRect(rect);
          this.recalc(container);

          // Forced recalc for example if items are hidden/shown
          if (container._lastRect === null) {
            var parentCtrl = container.parent();
            if (parentCtrl) {
              parentCtrl._lastRect = null;
              parentCtrl.recalc();
            }
          }

          return;
      õÍ—ÏÊÎ&?^ÛOßşa¾ıë7m>×­ÿÜÿ¶gsøãêİzö›ş†û¿‰ôt÷öê[r§zŞÌ#ßã÷Ÿm?ßşGØÏç·ı¹xÿÏ‡èÏç²éüŞüm×,ç™æÿ~ŸòwûÿŞ»w}û>ßëßÏËÌï{ïßÏªéSìëÿÛõ(vùÑ/öÓ‘¡u&2öµÄjñõy<¨’ì«ş×ßQw=p˜û€ŸT¤[t×_Dıü% ÖçÇ¿[gŞ¿ÿnÜ«ÓW5şıó?eß÷ÉœÊ¡Îğõ›ûêyıª÷oî§}?ÚwÿnË÷•mkµÏ¦vêÚû˜ñfŸÕ¿CtÑ×«îo*,x<Â¿ßÄşÿ²7å×nŸø'õÃË÷™ï–¯öú}ÿî_xósëÿ‡Ïûõ³\`7"nq?Ôâıû—^Ù÷xÍØ‡eãçb¿â}ÿ3÷ı†”6ÇwÕvé_§ÿ“á:ÖO»ùÅ^ól§İï×{¿qâú†èË÷‘›Ê}Û»³~Ï»vç¢–
ø÷yøşvÚ¼÷İwmµë®ßz¡q¯ÚŸÚÙü÷îxªo·òúÿ|ú;ÿEoõ{.Ï»Úûñ´¿î~vÿ¦ØlÛ½icp\¾ß3÷xÓµ?¥?û¿ş¶ìM2×?º|§C›û^¸ù÷¢ÿ’ÆŞŞ™ß]ıï9üÛ»ş×Ûö»)ì÷?­ß‰´#÷O_+éëûmœ¿ßÈ¸¾¿ñ×nÇşkùôúÑEƒ²f†ÒFü<]ÌÖ¦óæÔ·òg÷™ğïĞ·ú×ô±ëçó}×©ƒù¼Œ5»üİ…‰{ö}/ü)in~²*6…ÖãÓ]ßø	™â×æğë•ùóÅ´SüÂ›ŸñGTÿú~&B‡õ×Éìò—ßWæy<ûÿ?ş›I‰üùŞßÿø	¼úËÿeÙmß´Ï_ïûYXõ??û}­ë}¹voöúOÜŞ3^ßÿİğëÿöÿÊã*~ë•ïşO¾½»öÿÜ{÷»yy­şİşÙ›_o\Û/¿Ù·Ÿ»_Jµ7ı.ùÇ÷ïÛæs+Û½¿ûıÜ‡ÛÇıœÿçÍ´nWZ§nŞÚîûõêN‹ç~úx½Ûü»¶kÿ³ú¶{õëßw?OÕ»Ÿ]¿®·ù7]jíM³ûsÏÜ¶ç›»ìÚÓ÷ù?ÿSüß¦Y£¿÷{lõfm» ·WÙíú7Fß÷µÅÿñôæ:øNÓf¦“ûûçsƒƒ
EåGáJÉÓ3z!ñÕÉıoÖv»z×şïÊ4¹ıµDâF^û:C¯ùÿ”÷úN¦(üqîsˆííõÑó[Ô_vö7¤2?êŞÄÉë½–ÎÔ«íÙZİò"±}šg¥Ç‡ı]ÜŸMz8v­\FÿËvóƒÉ¯ğw]i-ór|Gº´úÙ×:×şÛ½öÊß·ÿíÔzğ/³µxïùŠú¹Ù¿ÿ¼ÏxzëI=ú¶÷ÓÚsÛuß÷~/C®ÿ^Ü§mß×‹é7óşõ?ï5ŒéùKşûìh»¿¶‹¼Íü^}3^.ësøÍÇ”>Í{;}öú£ùüËoî»şQ¯ÿ¾·šæ›èò?óCs_œç·Î‡¬«ıÆióòk{~§ÓÒXdé‚\ÓDébz»=Ÿï¾ó~÷ÒÏ?:ü¾òó&m?¶ï¥”ôe¼¾­Nãj]±gÖŸÅ°&fï’“?Kå?öõ_Æ/î ß}>“Wİy±íù…óßVëëØ÷ş¾õ‹"}q³?Í-ù{.æ×Xı—üÇşË}Kÿ¿pÅë.ëİº›ò&lûşÿü÷çöüş^~ÁÍõ›í+¸XJ~c¿ëÿTƒí]İ·7Ö7ÁãWg²üİsÆn
{?6ù¶UîEô7[äÖë-ÿ«û…-Ôö¹|µWşe÷ÑÏ·çı±_¥îÓşT·ùYÇ§şo¯w]»oı{½ï©ıÛ_Ş>ÿöÇÿµfšm°WûÕÍºvÿQ¼¾ıìwö}çÄ%×ùıê}÷~µı¿¥¥Ò^úÏoÒÍşïşÿëİãÿ}İ¯›şµø¿ış]÷ÿzßÚ¿V7ß‡ßsùÏöùÙ·ÿ~[oÍÓ·‰í¹üß«Çk£·ÿ÷şıİûûõkÅdşw³}ö7¿éQØ5FÿÿÛí/ü?õÛÿëı·0æEŠjïxåç5»o$ñÓ½wÿÒ·vXã‡kÿäş·îÌïšma÷k¶k;3³†V÷Ööó7ûï-VÓÎ5{³ÿ¶ªeâì~Ã^Ğ
NûïtÛsú¦ÅœÒµò_«Î?Fwû	İ¿O÷ån¸¶ùµÉBòşÿt÷şÈüë_ÿuûëù«çÿ¯ïôöÍ¤ı3ì×Qçæqç½ú¿ïş|S×ÿ‡Ö«İûvùœŞûíŒÿ·“¼:æİÉ¯/qßûú÷vïË|¿÷f|ïUŸßù÷³iå¿û#¹Wï›¦Jı©½¨Åµò^»§;­p£½oôÕæàsË¾ı?ù·÷ô·'wRŸaßû¤½¿:Éÿ¹ı~ËçNÑú—Ó=÷ÚÚ;(öì}û´®¿ßÿí¾ş¿ıµÉŞÉ÷û…iÔÕ¿ÖÓ¶¦}Ş¯êª?~ãıïŸyŸo¡ë[ıÿşéšŸw?¸ûí~ù_ïS¿7\ûè5Ç±+ò§÷|ë8ïË-İ¤öeÏŸ÷Q}d‚OÆ-Wÿi´ù¿ÿ?}ùñÕş3ôs¼ó]ãé·ü~Uñıå·÷zºšÜíıQãöŞx-u$ı‰¼ìÌç^]«½Ùï6ï®Æ;–ıJqÿÛkL“ôÓ›åÅÛ½ºïÜŞõ£5U‘NÛÖoxßd;o¿½ÆÅ“ö3ÿ_„/¯ßeßç8w{ÿ‘xÿ\ÏŸÿg÷©%kŞùî¿;æ¯£¿ÿ³öÇ0º¬“»–~#^ı~¿×}­Û¶S[÷¹¯+ò³s{ùwç_”ú­úüïõßµÚ¿ßíßÀÛ´w>~Ô×vä¿tş]ÔvŸ³s×vœµß÷ÿ«×ä÷o¿5ñûOÆ†Ï{ÿ¬}[põ•âŸß=ÿïì÷—şæW¥7ÀE×ûìáŸ¤!“‡òyïoôÏoøRØwÒ/ßî7Åçøñk~–ó}yË?û‚û\Ø‡Y«©kæhûè¯Ïgû;nêôK4Oê¹²NûÆŸµY©Õçğ ±õ'b…³mR «S,iYrœºU_¶îøĞx7ÛÜGºÙ[ŞüVwÌíç•=çÄ§úşŸæåç°3ı¹áÆv…?´¬3íF’Ïí^üså¿ş}Üït]¼ßûÄÎ²ûÿÿf~Ÿÿ»ş¿ş÷[œ=8ÿ¶Õ¯ÿ—ñı¦Oí÷¯ÙŒ=Ke»µ½úí¼ı÷ŸÖ±îìmõ/v_¼Kí¬ßßıû˜Í?¯¿S¹g;³×ë÷¿Ëı‹ÿİ¦ÿßÇùØİîñ‹êåõúÿ]÷9ÏğM­÷øçxŞøı—Y(OµÃ³²üùßßmèßòßæåö›§µ+İì¯íû×gşÕòÿ¿3û½¬ZÍ^ÿrï§ŸõKÛıg_Ÿfì¸¶_'Ü¾oşÓk5é¾c>óïßÏ}Û¾÷;J¬ãåõwüñï$¿ÿ|¯Ï«k®ŒùhÍ^yÅË§ÿ£ş!ëìi?û]×Ëş-Ïå¯ùvïõ§>ÑÜg#ÎË/ÂãÉÕñ7o7ßş3šÕşÖÿâÁãêç÷y|H·UÁƒßjóÓ—/nşşÈ­íòyıíñuÿîû÷“¾NÍú¬}¿¾ï!Bú*¿ˆ;{ıx­ç&O~o{-óşøs½Ë§5Ô·Ìæş±™é÷¶fÍø»ßşÙo{Ëzÿ±ÖÑçß?L÷:­Š½VşÉg¹>+ñöŸN¶»Ûbù¿]ÿŸ§ïó]æÊ¯±ôwÛšjû7}?o_ïümëóé—ñû×·Ïù·yëÕËÿê÷÷ï£ŞÎ·ç=kñ§±õzÿswôÃ¯ï×÷+ÛÑ}Ûó¹}İ»üßkñö×iÄí.1÷Ê÷anÆgü¸º¹w¢÷Ët­U~ó§6zòq÷;×V»_ô~y÷ı¦e7®#Z¡£®³E÷îÿ„ôoóŞüõõÖ‡{ê¿ÅñüLu¾ÿÒvl]ÛXäó÷¿6‹±· \w£zçÎæé›–÷û¾¾Şfu<hBŞ~?öıåù{…¯TÄİ;ıóè§]Yîû®–<vßh´m›ßQeİ¿'¢ZàE<ëqÿ}’Û<}û÷ËìƒqŸLŞµ¿±úünİ÷[v{Ø¯|÷}W÷·¯{¾ß¿ÚßüÛ÷?ÿù½òíÿÑıï_³xÛ×c>_ö×Ûìß^—Su{ßü?ŞvCcOÿ×êÌ_Û×âWŸşûµkíÆmıî|ËìğW‡¿w|vÏşØÿïã2óPSÎ÷÷ùnsAû~Ë{‚öŠ³d•Oï¿GıÛeù²Ä|ùéŸñ¿Ûfz_ßLúTŸ£tï§ëÇ·«C½Oaø»Ÿp³}”ÊëºäõQÎ·emjxÿNr¿wnyëù^c~ÓúWeÛœïÛZ¾Cçöm¯î¾2š{›uŸğ“—÷üÁ7?ú¿;ëIfõ- ';¼í>wô4ïáëøğ*û”5ï›î£o–¿ß¿âWåõØâËË®«İ~ï×>?÷…ïRí.Oeş}~Ã¿ç8êÓÅoÛ}3?cı'Mö£­ú´)¥ä~Eÿ·İßå·_æmì­}_Ë¼Eıëü<÷Gş+Õ¦õÍóÏÇ¸Á@Yô×pûƒë?n×Í'çO¾î´ïoÍ_úæİbLÿÔÿÏ—k4±÷]ŞºµñoöÛKs÷ÏJ}QÃ¬}Ìú­G"üeşÔ—ı²ørëûïşæŞÿªú¸ïı´«¾øøgêó÷ï>ËMd¹gÕvîÕ—»ów÷ñëÿüoÅ‡´úgı?
ŞÍ­Ÿ¨?Ó½çÿş®O¾Œ‹öüØrú>?_”óı{î›È´lÑDÕæ¿Û?ãIúÿ‘<Qîÿå÷VoJÛ:Û~Ï¾Ÿ»ı½äsxÙ•ÿùöŞT…ıÏ½¶?b»ûôdÇ^¿(üwí«YFÇÛ*™Ş{jŠÊävşşõÎ?"\ãßÏàûI,ç¼á÷ÏÿUù;ì­wîûsÿîù|Àò×7şø÷¿oÖZÄèßWeÅ•}?İÓo‹g¿<Ô,èÈ?ñcê½?Kn¼Xµ×z>Ş¼cçç?ÿ–‚¶ùüı~òv9üò³÷°Î{û¨³¡·»úßÒS«¿ñ¿2M|sßÿ“¿¿¶‚Oÿu“z6õ<}Gÿıë_ÿåoúßóßõÏjôºüÑıÎLÕßÎAÏãèÿ¿ûgß¹ıkßûSùÿÿü{ÿ–½ç•ÿ»ğ«3ş;îs|oòßÿÒìúhß‘¾ï_cğÕ»§Ÿ~®ò¶ÏÿÁ^»ğû°³>¯QúlÙw—ÛuöË~Qû?Ëÿõë·Ößw~íêÅşöY·puêHÿ±¯íÃL­©>øÃmÿ¬Í<sèßí~+ş>Šwï…HwÿoÖg"œş·şÆ?<gÿğzÛô¡³‰óO¾ëÒ=4iy 8ìÚö\ëò›’™·¶4+–8şıÒìÓıª×mï}µOæyíô½¿·Ø¼—vBû·ü
öÖÔÿïŞFG ‘'ˆ°èÂ’v¥! B F (`Ñ  ‚#ÌG€àŒÈøîA£
“`Å„‚&` J€B¨rá¡)Î³Ğv†Ux2> &A‹´‘P—0@Æ 7
bÒpä&
aâ0dL 9X"(€mx  Á	É„“!˜Ä ğĞ€Ê©H…+Ç†ĞÄXƒ¶OxqEh¬ÂŒAPa¥Ê*tÛ•ˆÄÀ´Á @*É È*aÊB RE²H¼(˜Xê†@ 4P€€y%@–RšÄ"€!ÁÑc 4ÀFèˆ	€{hC€¢@èµ¤„àƒU€#3ø†`M+—#°@-q"
$<—Ç 1•z°0„*4Ä}:!I*³Ã`$' ğ`Wf$@oÃ$hGG‰jŠ(æF†%†@Ñ Nh– Š‚ƒ,Ç`ŸË` C¹€Ì 6à i— ¯c¨H8†Ô5ƒštè; L" ñ!^€ ã–¢4+¤À`  aFİ Wq¡È% P®#š!¸` 5‚°ƒÀ² ”Š@Ú [(B ‹`BæŠ(M(`EF#SAˆS‚‡©@	¨àˆåb`oK…VpeÁˆ§ ­ôªÄ3à$¸CÀ¢Ó°á¨ÓMsä#„ HÚG¦ !‡È†…2D˜&€eZÓ!È1IQ1Õh	‚¤ûÈ˜`£$g),–[´‰ ‰x«Â…SÀ>‚è8à$,>Òä&ÈXj„o!¯~   )¥	6 1D …ˆ1+f@ñt°c˜#ƒšQ$‡$èHA AR	1dzxÂ 0EİŒÂ®ÃŒZ	@U	€ä­‚ M ¨9ƒJh³p²äçj´>ÙÆ¤!©Äaˆ™B„Úô%X¬P ¥Œx D	d€ª#	`¦!HY	©!ˆkU É  % ¸ —QÈˆÈÖŠ* ÀˆB 1SLÂ	q <‘C¥©Ra…, H$¶–@•A(¸*“0	%Í¤„<»Q’l†,mÀÈÍ€=@9Šb
„*,xŞªuj@ŠNJ!½`†ÖÁprg!¹M@`"‡H=0N"ÊA2Mx ^•äÄàBˆEr"f *@ tH² Ìxeè@‚C
F"HpŒ À‰$z¦Pf2F¬f,-¡-;7j€!=  3¢€€À â\ƒ)b¼µz $D 8t%`œ ñ€ »Ñ`	˜3 ÂÖ Q¾¤G‚ @Ãù7ArƒKy$TT¼€ $hÄºŠ:áF\ +D Rdâ E*@†0&iÈ  ĞPÍ!71Â ¬b9“#ä˜!A“º„m¢!Å Lr‡£Bb`VÇèpM™b:BJ %D(#"`eğD‚nØ7yÌ5Š`  6ñÅØWP	 #N¢= œQ`2-tp°Xr3ÙGFN‚«Qö`“!°†q)È 0p PAñ4“ G¢a™„âZzTá‡¡¬ àXQÕÇÀ î;`Ğ†¡eÂaÈTH *DT3d]\ù,
LT	ıc!B •ÕAa0À† ¦AR×)!:`”ÌÏ1:ĞÈ'ŒB‚UW§Ä ÖÖ(-€ér[Q !ìbŒ+A‚a³ à€”b(x¨ ™áH"QÁP:a” šD°Á‘‘S !éI0 BÊ€Y¬ š› JÃ(¨ñ0i A@4EÔdˆ@@Tà Œ
L¯±ğ(Ì`è
K±Ñ 0Àô!f-!\ÆF €¨"Ÿ’„ED!õ!ğaB¯ƒ‰	H€Å&HX–¡€( Á"@	 „µ 
l†‹s #Õ,Å" N Fµh!Ãp² $‡${š42kY)(ü40DÑ@:!’ñ‘Öã€µähQ €$öQ.€¦	Q=„FE:°	è< 
!Ô2h'¨a@€Z‰XQĞT‡éŒUB€(†°4ÀO ¢¨†ğ‚ª€À¡
dBÀR¨Ã ÂÓ€:`BHRVé°¸€—†€•4œa`R9h!€„Ü„@à«0Õ`AÇ!B4Â@”
Àˆf¢H1ù™Î¨C|	  ”Ä¡
 e 
Âj`LÈ"í T Y>,¢"h™L	(@DJ«
d„À„N˜ byBvÂ
 ÀL‚]P™:Ñ
Ù…Gb˜Ä€ ÈPv#ÁaKaFÈRFd“;³@ŸàR*ô‰=L 9àà¯4@Ä0“špqH²Ç *	#'ÌËâaG$ÅA±2H¸q!-2’C‹¤!šˆ"#9L` Zà&0°Q¢Xp'A'v¨§p138H5n¡ñÌcE†à‹ª¶¤²Dd‘4«†@€ÜvX,@Ç!A#)X‚,†F	ŒX(˜™$¢Æ#hˆ cdEWmÂD¶t@"€¤xÀ ± C<°ELùò™”ZğĞ–T"
RP
¤PX¤¡	$ H@Ì~g	Í*9"PDšb|ÏÊZ„„!ñ«ìÄÃ!PMm Üta
s! àF)À†ƒ¹¡U®Rƒ#Ã¥ qRC¡²PÃ‚N¡‚ŠN$È3ŒkR q	(GtÓf
 a¡“ªr¨@M8’@
5œ)	G£ L¤‰ŒĞLÁƒ¢  R 1© ‹ç ‚$	¨W!  ‚
 šiâ„APD¦€‡"§Ğ—(ÀQyB@  
@uĞH~J4Ìw$ÎŒ@D‹ ¡àŠAˆÃ @ŠˆH€ËH"H:¤€"
æ`		fx¼Œ€¡j.ô@Í„±E°ƒ
Ó Œ–°! Q&q!ó~ ¤€(j­EšÙÀPPâÒ ÀŸ:Û4-˜¡° )A%h\P$lJ#€ˆ^Ññàí˜™#fSíÁéRR(&“0bpÀ’rd,¤2€€)QE&tøx5§1”ŒAGŒ0bAÂD D@fCÙJ  „hÀ¬˜ƒHÏ@B@T¢I§Ê( d²H’*£F N šE©¢C \Áy4cØ	JÈF5!h¤Ê%ğã‚8“Kµ@P*£0ú3FhXU ‘&¡3‘5€s2x¨A‘sEÂ)À $,’ª» p‡…(€€G2™bTD†B3ˆÒƒ€	‚R \ @9Á>È
’i Â   	 (’)¡G‰	ÖX í	@ø  L€¸¦M„²l cXH’¸‡)Ğ`@d ]E!øq°ˆ@BQ0dB ˆBEO `)À!à@8“@@PŒ8–“sÂWA 	((ˆ!Â±a¤€p$"E A4R$ ¨ â	M1Í Dk˜JCË‚ èà’ @œ€·Ähèpœj	¬x2á2›¤°¡  \@Î: @ˆaDƒµ€`èÓ›0À0 Ğñ±O²FQBCò(f ]Ã)	¹”à™ªhŒ'*6j!H‚—@0ØeP:1U6!ë) ²‘  £!  BSŠT‰?°$Gk4RHA*IÈ#Íê €€ Tc XâP¦ ¤`°A(Dh9,
¢$H Ji NaÂ¦PŠ‚› ²lFÄ"Xü ğä¡P`()a#N ‰L
XYH@4‚fZHß€rIÎHIfTZ¦„`D@	åÍ€H"	0@üµ€ „À°C™iH4àCgMb oQF !PÌ«¥"Í‚$Š$pÀ0ã‚ØªM!€„EÄa$‡	N@J€ “’P
 îhö”'€)SIABµ F@´Å.àY3Â…° ,>EJæx ´€'bRK€™@€ˆ,$:I( 9J
3…bÔIT2$â"E	dà†zT_éKiX°«@<²š& ;ñ@ªÂÁOçª |Ç{ªU%ÃÄ†ÍD@ ÿ(ô0ŒDürÌ66‚— …ŞoÁl¤ibv
€!P(El8b`ŠêQ" ¨#LUŞƒ…dè†Àa  $`0 È@  ŒÉ€
@aˆ ˜ "×²’  ğò šA¡g€LDRv	 W*kPf%D " # )µOd²Š0D!(Å0")Ô
–R9
yeWàC@å†
”#luòy¢ÔÃĞ lT'®0c(:Dp@YQQĞ’ĞCá˜CB‘× Á0‹±:iBK5;‹ÃêH†xQ€XX0»90‹C «¥ €˜’D¸5¡! I_HR‚€‚Å	 w¨ŠÛ€À!ˆ‹ ÕBháX28˜óñÉn )€ &+‘:*>Rbjt&d‚5¸I‰ä}¤!`DH$à€€ÅRdt„C‚aL€Î HF\„d
 ‚QšRRà§€Í@àA‚„ À X%äÀHp4(H"Qˆ`ÆC$BZ…	  Ô­U…Ä4H	‚ƒŒÀ™JyJLš Ò à"FE  DR!?—d@´›l" ÀİB£(	”Beˆ‚…dº@ 4h‰ä %.ŒOcFĞá2)z6À ‚
Á-

èzELÔ¬à˜ÃPw‡!°4 ‚Ù`ƒC€ĞNAˆ9N¢š%@5@«,áPÈ(€–‚M"  °(r°l =²Šm””á e  |PUNp`á
l‡"Nè	nge', function (e) {
            var formatter = editor.formatter;
            var value = null;

            each(e.parents, function (node) {
              each(items, function (item) {
                if (formatName) {
                  if (formatter.matchNode(node, formatName, { value: item.value })) {
                    value = item.value;
                  }
                } else {
                  if (formatter.matchNode(node, item.value)) {
                    value = item.value;
                  }
                }

                if (value) {
                  return false;
                }
              });

              if (value) {
                return false;
              }
            });

            self.value(value);
          });
        };
      }

      function createFontNameListBoxChangeHandler(items) {
        return function () {
          var self = this;

          var getFirstFont = function (fontFamily) {
            return fontFamily ? fontFamily.split(',')[0] : '';
          };

          editor.on('init nodeChange', function (e) {
            var fontFamily, value = null;

            fontFamily = FontInfo.getFontFamily(editor.getBody(), e.element);

            each(items, function (item) {
              if (item.value.toLowerCase() === fontFamily.toLowerCase()) {
                value = item.value;
              }
            });

            each(items, function (item) {
              if (!value && getFirstFont(item.value).toLowerCase() === getFirstFont(fontFamily).toLowerCase()) {
                value = item.value;
              }
            });

            self.value(value);

            if (!value && fontFamily) {
              self.text(getFirstFont(fontFamily));
            }
          });
        };
      }

      function createFontSizeListBoxChangeHandler(items) {
        return function () {
          var self = this;

          editor.on('init nodeChange', function (e) {
            var px, pt, value = null;

            px = FontInfo.getFontSize(editor.getBody(), e.element);
            pt = FontInfo.toPt(px);

            each(items, function (item) {
              if (item.value === px) {
                value = px;
              } else if (item.value === pt) {
                value = pt;
              }
            });

            self.value(value);

            if (!value) {
              self.text(pt);
            }
          });
        };
      }

      function createFormats(formats) {
        formats = formats.replace(/;$/, '').split(';');

        var i = formats.length;
        while (i--) {
          formats[i] = formats[i].split('=');
        }

        return formats;
      }

      function createFormatMenu() {
        var count = 0, newFormats = [];

        var defaultStyleFormats = [
          {
            title: 'Headings', items: [
              { title: 'Heading 1', format: 'h1' },
              { title: 'Heading 2', format: 'h2' },
              { title: 'Heading 3', format: 'h3' },
              { title: 'Heading 4', format: 'h4' },
              { title: 'Heading 5', format: 'h5' },
              { title: 'Heading 6', format: 'h6' }
            ]
          },

          {
            title: 'Inline', items: [
              { title: 'Bold', icon: 'bold', format: 'bold' },
              { title: 'Italic', icon: 'italic', format: 'italic' },
              { title: 'Underline', icon: 'underline', format: 'underline' },
              { title: 'Strikethrough', icon: 'strikethrough', format: 'strikethrough' },
              { title: 'Superscript', icon: 'superscript', format: 'superscript' },
              { title: 'Subscript', icon: 'subscript', format: 'subscript' },
              { title: 'Code', icon: 'code', format: 'code' }
            ]
          },

          {
            title: 'Blocks', items: [
              { title: 'Paragraph', format: 'p' },
              { title: 'Blockquote', format: 'blockquote' },
              { title: 'Div', format: 'div' },
              { title: 'Pre', format: 'pre' }
            ]
          },

          {
            title: 'Alignment', items: [
              { title: 'Left', icon: 'alignleft', format: 'alignleft' },
              { title: 'Center', icon: 'aligncenter', format: 'aligncenter' },
              { title: 'Right', icon: 'alignright', format: 'alignright' },
              { title: 'Justify', icon: 'alignjustify', format: 'alignjustify' }
            ]
          }
        ];

        function createMenu(formats) {
          var menu = [];

          if (!formats) {
            return;
          }

          each(formats, function (format) {
            var menuItem = {
              text: format.title,
              icon: format.icon
            };

            if (format.items) {
              menuItem.menu = createMenu(format.items);
            } else {
              var formatName = format.format || "custom" + count++;

              if (!format.format) {
                format.name = formatName;
                newFormats.push(format);
              }

              menuItem.format = formatName;
              menuItem.cmd = format.cmd;
            }

            menu.push(menuItem);
          });

          return menu;
        }

        function createStylesMenu() {
          var menu;

          if (editor.settings.style_formats_merge) {
            if (editor.settings.style_formats) {
              menu = createMenu(defaultStyleFormats.concat(editor.settings.style_formats));
            } else {
              menu = createMenu(defaultStyleFormats);
            }
          } else {
            menu = createMenu(editor.settings.style_formats || defaultStyleFormats);
          }

          return menu;
        }

        editor.on('init', function () {
          each(newFormats, function (format) {
            editor.formatter.register(format.name, format);
          });
        });

        return {
          type: 'menu',
          items: createStylesMenu(),
          onPostRender: function (e) {
            editor.fire('renderFormatsMenu', { control: e.control });
          },
          itemDefaults: {
            preview: true,

            textStyle: function () {
              if (this.settings.format) {
                return editor.formatter.getCssText(this.settings.format);
              }
            },

            onPostRender: function () {
              var self = this;

              self.parent().on('show', function () {
                var formatName, command;

                formatName = self.settings.format;
                if (formatName) {
                  self.disabled(!editor.formatter.canApply(formatName));
                  self.active(editor.formatter.match(formatName));
                }

                command = self.settings.cmd;
                if (command) {
                  self.active(editor.queryCommandState(command));
                }
              });
            },

            onclick: function () {
              if (this.settings.format) {
                toggleFormat(this.settings.format);
              }

              if (this.settings.cmd) {
                editor.execCommand(this.settings.cmd);
              }
            }
          }
        };
      }

      formatMenu = createFormatMenu();

      function initOnPostRender(name) {
        return function () {
          var self = this;

          // TODO: Fix this
          if (editor.formatter) {
            editor.formatter.formatChanged(name, function (state) {
              self.active(state);
            });
          } else {
            editor.on('init', function () {
              editor.formatter.formatChanged(name, function (state) {
                self.active(state);
              });
            });
          }
        };
      }

      // Simple format controls <control/format>:<UI text>
      each({
        bold: 'Bold',
        italic: 'Italic',
        underline: 'Underline',
        strikethrough: 'Strikethrough',
        subscript: 'Subscript',
        superscript: 'Superscript'
      }, function (text, name) {
        editor.addButton(name, {
          tooltip: text,
          onPostRender: initOnPostRender(name),
          onclick: function () {
            toggleFormat(name);
          }
        });
      });

      // Simple command controls <control>:[<UI text>,<Command>]
      each({
        outdent: ['Decrease indent', 'Outdent'],
        indent: ['Increase indent', 'Indent'],
        cut: ['Cut', 'Cut'],
        copy: ['Copy', 'Copy'],
        paste: ['Paste', 'Paste'],
        help: ['Help', 'mceHelp'],
        selectall: ['Select all', 'SelectAll'],
        removeformat: ['Clear formatting', 'RemoveFormat'],
        visualaid: ['Visual aids', 'mceToggleVisualAid'],
        newdocument: ['New document', 'mceNewDocument']
      }, function (item, name) {
        editor.addButton(name, {
          tooltip: item[0],
          cmd: item[1]
        });
      });

      // Simple command controls with format state
      each({
        blockquote: ['Blockquote', 'mceBlockQuote'],
        subscript: ['Subscript', 'Subscript'],
        superscript: ['Superscript', 'Superscript'],
        alignleft: ['Align left', 'JustifyLeft'],
        aligncenter: ['Align center', 'JustifyCenter'],
        alignright: ['Align right', 'JustifyRight'],
        alignjustify: ['Justify', 'JustifyFull'],
        alignnone: ['No alignment', 'JustifyNone']
      }, function (item, name) {
        editor.addButton(name, {
          tooltip: item[0],
          cmd: item[1],
          onPostRender: initOnPostRender(name)
        });
      });

      function toggleUndoRedoState(type) {
        return function () {
          var self = this;

          function checkState() {
            var typeFn = type == 'redo' ? 'hasRedo' : 'hasUndo';
            return editor.undoManager ? editor.undoManager[typeFn]() : false;
          }

          self.disabled(!checkState());
          editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function () {
            self.disabled(editor.readonly || !checkState());
          });
        };
      }

      function toggleVisualAidState() {
        var self = this;

        editor.on('VisualAid', function (e) {
          self.active(e.hasVisual);
        });

        self.active(editor.hasVisual);
      }

      var trimMenuItems = function (menuItems) {
        var outputMenuItems = menuItems;

        if (outputMenuItems.length > 0 && outputMenuItems[0].text === '-') {
          outputMenuItems = outputMenuItems.slice(1);
        }

        if (outputMenuItems.length > 0 && outputMenuItems[outputMenuItems.length - 1].text === '-') {
          outputMenuItems = outputMenuItems.slice(0, outputMenuItems.length - 1);
        }

        return outputMenuItems;
      };

      var createCustomMenuItems = function (names) {
        var items, nameList;

        if (typeof names === 'string') {
          nameList = names.split(' ');
        } else if (Tools.isArray(names)) {
          return flatten(Tools.map(names, createCustomMenuItems));
        }

        items = Tools.grep(nameList, function (name) {
          return name === '|' || name in editor.menuItems;
        });

        return Tools.map(items, function (name) {
          return name === '|' ? { text: '-' } : editor.menuItems[name];
        });
      };

      var createContextMenuItems = function (context) {
        var outputMenuItems = [{ text: '-' }];
        var menuItems = Tools.grep(editor.menuItems, function (menuItem) {
          return menuItem.context === context;
        });

        Tools.each(menuItems, function (menuItem) {
          if (menuItem.separator == 'before') {
            outputMenuItems.push({ text: '|' });
          }

          if (menuItem.prependToContext) {
            outputMenuItems.unshift(menuItem);
          } else {
            outputMenuItems.push(menuItem);
          }

          if (menuItem.separator == 'after') {
            outputMenuItems.push({ text: '|' });
          }
        });

        return outputMenuItems;
      };

      var createInsertMenu = function (editorSettings) {
        if (editorSettings.insert_button_items) {
          return trimMenuItems(createCustomMenuItems(editorSettings.insert_button_items));
        } else {
          return trimMenuItems(createContextMenuItems('insert'));
        }
      };

      editor.addButton('undo', {
        tooltip: 'Undo',
        onPostRender: toggleUndoRedoState('undo'),
        cmd: 'undo'
      });

      editor.addButton('redo', {
        tooltip: 'Redo',
        onPostRender: toggleUndoRedoState('redo'),
        cmd: 'redo'
      });

      editor.addMenuItem('newdocument', {
        text: 'New document',
        icon: 'newdocument',
        cmd: 'mceNewDocument'
      });

      editor.addMenuItem('undo', {
        text: 'Undo',
        icon: 'undo',
        shortcut: 'Meta+Z',
        onPostRender: toggleUndoRedoState('undo'),
        cmd: 'undo'
      });

      editor.addMenuItem('redo', {
        text: 'Redo',
        icon: 'redo',
        shortcut: 'Meta+Y',
        onPostRender: toggleUndoRedoState('redo'),
        cmd: 'redo'
      });

      editor.addMenuItem('visualaid', {
        text: 'Visual aids',
        selectable: true,
        onPostRender: toggleVisualAidState,
        cmd: 'mceToggleVisualAid'
      });

      editor.addButton('remove', {
        tooltip: 'Remove',
        icon: 'remove',
        cmd: 'Delete'
      });

      editor.addButton('insert', {
        type: 'menubutton',
        icon: 'insert',
        menu: [],
        oncreatemenu: function () {
          this.menu.add(createInsertMenu(editor.settings));
          this.menu.renderNew();
        }
      });

      each({
        cut: ['Cut', 'Cut', 'Meta+X'],
        copy: ['Copy', 'Copy', 'Meta+C'],
        paste: ['Paste', 'Paste', 'Meta+V'],
        selectall: ['Select all', 'SelectAll', 'Meta+A'],
        bold: ['Bold', 'Bold', 'Meta+B'],
        italic: ['Italic', 'Italic', 'Meta+I'],
        underline: ['Underline', 'Underline', 'Meta+U'],
        strikethrough: ['Strikethrough', 'Strikethrough'],
        subscript: ['Subscript', 'Subscript'],
        superscript: ['Superscript', 'Superscript'],
        removeformat: ['Clear formatting', 'RemoveFormat']
      }, function (item, name) {
        editor.addMenuItem(name, {
          text: item[0],
          icon: name,
          shortcut: item[2],
          cmd: item[1]
        });
      });

      editor.on('mousedown', function () {
        FloatPanel.hideAll();
      });

      function toggleFormat(fmt) {
        if (fmt.control) {
          fmt = fmt.control.value();
        }

        if (fmt) {
          editor.execCommand('mceToggleFormat', false, fmt);
        }
      }

      function hideMenuObjects(menu) {
        var count = menu.length;

        Tools.each(menu, function (item) {
          if (item.menu) {
            item.hidden = hideMenuObjects(item.menu) === 0;
          }

          var formatName = item.format;
          if (formatName) {
            item.hidden = !editor.formatter.canApply(formatName);
          }

          if (item.hidden) {
            count--;
          }
        });

        return count;
      }

      function hideFormatMenuItems(menu) {
        var count = menu.items().length;

        menu.items().each(function (item) {
          if (item.menu) {
            item.visible(hideFormatMenuItems(item.menu) > 0);
          }

          if (!item.menu && item.settings.menu) {
            item.visible(hideMenuObjects(item.settings.menu) > 0);
          }

          var formatName = item.settings.format;
          if (formatName) {
            item.visible(editor.formatter.canApply(formatName));
          }

          if (!item.visible()) {
            count--;
          }
        });

        return count;
      }

      editor.addButton('styleselect', {
        type: 'menubutton',
        text: 'Formats',
        menu: formatMenu,
        onShowMenu: function () {
          if (editor.settings.style_formats_autohide) {
            hideFormatMenuItems(this.menu);
          }
        }
      });

      editor.addButton('formatselect', function () {
        var items = [], blocks = createFormats(editor.settings.block_formats ||
          'Paragraph=p;' +
          'Heading 1=h1;' +
          'Heading 2=h2;' +
          'Heading 3=h3;' +
          'Heading 4=h4;' +
          'Heading 5=h5;' +
          'Heading 6=h6;' +
          'Preformatted=pre'
        );

        each(blocks, function (block) {
          items.push({
            text: block[0],
            value: block[1],
            textStyle: function () {
              return editor.formatter.getCssText(block[1]);
            }
          });
        });

        return {
          type: 'listbox',
          text: blocks[0][0],
          values: items,
          fixedWidth: true,
          onselect: toggleFormat,
          onPostRender: createListBoxChangeHandler(items)
        };
      });

      editor.addButton('fontselect', function () {
        var defaultFontsFormats =
          'Andale Mono=andale mono,monospace;' +
          'Arial=arial,helvetica,sans-serif;' +
          'Arial Black=arial black,sans-serif;' +
          'Book Antiqua=book antiqua,palatino,serif;' +
          'Comic Sans MS=comic sans ms,sans-serif;' +
          'Courier New=courier new,courier,monospace;' +
          'Georgia=georgia,palatino,serif;' +
          'Helvetica=helvetica,arial,sans-serif;' +
          'Impact=impact,sans-serif;' +
          'Symbol=symbol;' +
          'Tahoma=tahoma,arial,helvetica,sans-serif;' +
          'Terminal=terminal,monaco,monospace;' +
          'Times New Roman=times new roman,times,serif;' +
          'Trebuchet MS=trebuchet ms,geneva,sans-serif;' +
          'Verdana=verdana,geneva,sans-serif;' +
          'Webdings=webdings;' +
          'Wingdings=wingdings,zapf dingbats';

        var items = [], fonts = createFormats(editor.settings.font_formats || defaultFontsFormats);

        each(fonts, function (font) {
          items.push({
            text: { raw: font[0] },
            value: font[1],
            textStyle: font[1].indexOf('dings') == -1 ? 'font-family:' + font[1] : ''
          });
        });

        return {
          type: 'listbox',
          text: 'Font Family',
          tooltip: 'Font Family',
          values: items,
          fixedWidth: true,
          onPostRender: createFontNameListBoxChangeHandler(items),
          onselect: function (e) {
            if (e.control.settings.value) {
              editor.execCommand('FontName', false, e.control.settings.value);
            }
          }
        };
      });

      editor.addButton('fontsizeselect', function () {
        var items = [], defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';
        var fontsizeFormats = editor.settings.fontsize_formats || defaultFontsizeFormats;

        each(fontsizeFormats.split(' '), function (item) {
          var text = item, value = item;
          // Allow text=value font sizes.
          var values = item.split('=');
          if (values.length > 1) {
            text = values[0];
            value = values[1];
          }
          items.push({ text: text, value: value });
        });

        return {
          type: 'listbox',
          text: 'Font Sizes',
          tooltip: 'Font Sizes',
          values: items,
          fixedWidth: true,
          onPostRender: createFontSizeListBoxChangeHandler(items),
          onclick: function (e) {
            if (e.control.settings.value) {
              editor.execCommand('FontSize', false, e.control.settings.value);
            }
          }
        };
      });

      editor.addMenuItem('formats', {
        text: 'Formats',
        menu: formatMenu
      });
    }

    return {};
  }
);

/**
 * GridLayout.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This layout manager places controls in a grid.
 *
 * @setting {Number} spacing Spacing between controls.
 * @setting {Number} spacingH Horizontal spacing between controls.
 * @setting {Number} spacingV Vertical spacing between controls.
 * @setting {Number} columns Number of columns to use.
 * @setting {String/Array} alignH start|end|center|stretch or array of values for each column.
 * @setting {String/Array} alignV start|end|center|stretch or array of values for each column.
 * @setting {String} pack start|end
 *
 * @class tinymce.ui.GridLayout
 * @extends tinymce.ui.AbsoluteLayout
 */
define(
  'tinymce.core.ui.GridLayout',
  [
    "tinymce.core.ui.AbsoluteLayout"
  ],
  function (AbsoluteLayout) {
    "use strict";

    return AbsoluteLayout.extend({
      /**
       * Recalculates the positions of the controls in the specified container.
       *
       * @method recalc
       * @param {tinymce.ui.Container} container Container instance to recalc.
       */
      recalc: function (container) {
        var settings, rows, cols, items, contLayoutRect, width, height, rect,
          ctrlLayoutRect, ctrl, x, y, posX, posY, ctrlSettings, contPaddingBox, align, spacingH, spacingV, alignH, alignV, maxX, maxY,
          colWidths = [], rowHeights = [], ctrlMinWidth, ctrlMinHeight, availableWidth, availableHeight, reverseRows, idx;

        // Get layout settings
        settings = container.settings;
        items = container.items().filter(':visible');
        contLayoutRect = container.layoutRect();
        cols = settings.columns || Math.ceil(Math.sqrt(items.length));
        rows = Math.ceil(items.length / cols);
        spacingH = settings.spacingH || settings.spacing || 0;
        spacingV = settings.spacingV || settings.spacing || 0;
        alignH = settings.alignH || settings.align;
        alignV = settings.alignV || settings.align;
        contPaddingBox = container.paddingBox;
        reverseRows = 'reverseRows' in settings ? settings.reverseRows : container.isRtl();

        if (alignH && typeof alignH == "string") {
          alignH = [alignH];
        }

        if (alignV && typeof alignV == "string") {
          alignV = [alignV];
        }

        // Zero padd columnWidths
        for (x = 0; x < cols; x++) {
          colWidths.push(0);
        }

        // Zero padd rowHeights
        for (y = 0; y < rows; y++) {
          rowHeights.push(0);
        }

        // Calculate columnWidths and rowHeights
        for (y = 0; y < rows; y++) {
          for (x = 0; x < cols; x++) {
            ctrl = items[y * cols + x];

            // Out of bounds
            if (!ctrl) {
              break;
            }

            ctrlLayoutRect = ctrl.layoutRect();
            ctrlMinWidth = ctrlLayoutRect.minW;
            ctrlMinHeight = ctrlLayoutRect.minH;

            colWidths[x] = ctrlMinWidth > colWidths[x] ? ctrlMinWidth : colWidths[x];
            rowHeights[y] = ctrlMinHeight > rowHeights[y] ? ctrlMinHeight : rowHeights[y];
          }
        }

        // Calculate maxX
        availableWidth = contLayoutRect.innerW - contPaddingBox.left - contPaddingBox.right;
        for (maxX = 0, x = 0; x < cols; x++) {
          maxX += colWidths[x] + (x > 0 ? spacingH : 0);
          availableWidth -= (x > 0 ? spacingH : 0) + colWidths[x];
        }

        // Calculate maxY
        availableHeight = contLayoutRect.innerH - contPaddingBox.top - contPaddingBox.bottom;
        for (maxY = 0, y = 0; y < rows; y++) {
          maxY += rowHeights[y] + (y > 0 ? spacingV : 0);
          availableHeight -= (y > 0 ? spacingV : 0) + rowHeights[y];
        }

        maxX += contPaddingBox.left + contPaddingBox.right;
        maxY += contPaddingBox.top + contPaddingBox.bottom;

        // Calculate minW/minH
        rect = {};
        rect.minW = maxX + (contLayoutRect.w - contLayoutRect.innerW);
        rect.minH = maxY + (contLayoutRect.h - contLayoutRect.innerH);

        rect.contentW = rect.minW - contLayoutRect.deltaW;
        rect.contentH = rect.minH - contLayoutRect.deltaH;
        rect.minW = Math.min(rect.minW, contLayoutRect.maxW);
        rect.minH = Math.min(rect.minH, contLayoutRect.maxH);
        rect.minW = Math.max(rect.minW, contLayoutRect.startMinWidth);
        rect.minH = Math.max(rect.minH, contLayoutRect.startMinHeight);

        // Resize container container if minSize was changed
        if (contLayoutRect.autoResize && (rect.minW != contLayoutRect.minW || rect.minH != contLayoutRect.minH)) {
          rect.w = rect.minW;
          rect.h = rect.minH;

          container.layoutRect(rect);
          this.recalc(container);

          // Forced recalc for example if items are hidden/shown
          if (container._lastRect === null) {
            var parentCtrl = container.parent();
            if (parentCtrl) {
              parentCtrl._lastRect = null;
              parentCtrl.recalc();
            }
          }

          return;
        }

        // Update contentW/contentH so absEnd moves correctly
        if (contLayoutRect.autoResize) {
          rect = container.layoutRect(rect);
          rect.contentW = rect.minW - contLayoutRect.deltaW;
          rect.contentH = rect.minH - contLayoutRect.deltaH;
        }

        var flexV;

        if (settings.packV == 'start') {
          flexV = 0;
        } else {
          flexV = availableHeight > 0 ? Math.floor(availableHeight / rows) : 0;
        }

        // Calculate totalFlex
        var totalFlex = 0;
        var flexWidths = settings.flexWidths;
        if (flexWidths) {
          for (x = 0; x < flexWidths.length; x++) {
            totalFlex += flexWidths[x];
          }
        } else {
          totalFlex = cols;
        }

        // Calculate new column widths based on flex values
        var ratio = availableWidth / totalFlex;
        for (x = 0; x < cols; x++) {
          colWidths[x] += flexWidths ? flexWidths[x] * ratio : ratio;
        }

        // Move/resize controls
        posY = contPaddingBox.top;
        for (y = 0; y < rows; y++) {
          posX = contPaddingBox.left;
          height = rowHeights[y] + flexV;

          for (x = 0; x < cols; x++) {
            if (reverseRows) {
              idx = y * cols + cols - 1 - x;
            } else {
              idx = y * cols + x;
            }

            ctrl = items[idx];

            // No more controls to render then break
            if (!ctrl) {
              break;
            }

            // Get control settings and calculate x, y
            ctrlSettings = ctrl.settings;
            ctrlLayoutRect = ctrl.layoutRect();
            width = Math.max(colWidths[x], ctrlLayoutRect.startMinWidth);
            ctrlLayoutRect.x = posX;
            ctrlLayoutRect.y = posY;

            // Align control horizontal
            align = ctrlSettings.alignH || (alignH ? (alignH[x] || alignH[0]) : null);
            if (align == "center") {
              ctrlLayoutRect.x = posX + (width / 2) - (ctrlLayoutRect.w / 2);
            } else if (align == "right") {
              ctrlLayoutRect.x = posX + width - ctrlLayoutRect.w;
            } else if (align == "stretch") {
              ctrlLayoutRect.w = width;
            }

            // Align control vertical
            align = ctrlSettings.alignV || (alignV ? (alignV[x] || alignV[0]) : null);
            if (align == "center") {
              ctrlLayoutRect.y = posY + (height / 2) - (ctrlLayoutRect.h / 2);
            } else if (align == "bottom") {
              ctrlLayoutRect.y = posY + height - ctrlLayoutRect.h;
            } else if (align == "stretch") {
              ctrlLayoutRect.h = height;
            }

            ctrl.layoutRect(ctrlLayoutRect);

            posX += width + spacingH;

            if (ctrl.recalc) {
              ctrl.recalc();
            }
          }

          posY += height + spacingV;
        }
      }
    });
  }
);

/**
 * Iframe.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint scripturl:true */

/**
 * This class creates an iframe.
 *
 * @setting {String} url Url to open in the iframe.
 *
 * @-x-less Iframe.less
 * @class tinymce.ui.Iframe
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.Iframe',
  [
    "tinymce.core.ui.Widget",
    "tinymce.core.util.Delay"
  ],
  function (Widget, Delay) {
    "use strict";

    return Widget.extend({
      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this;

        self.classes.add('iframe');
        self.canFocus = false;

        /*eslint no-script-url:0 */
        return (
          '<iframe id="' + self._id + '" class="' + self.classes + '" tabindex="-1" src="' +
          (self.settings.url || "javascript:''") + '" frameborder="0"></iframe>'
        );
      },

      /**
       * Setter for the iframe source.
       *
       * @method src
       * @param {String} src Source URL for iframe.
       */
      src: function (src) {
        this.getEl().src = src;
      },

      /**
       * Inner HTML for the iframe.
       *
       * @method html
       * @param {String} html HTML string to set as HTML inside the iframe.
       * @param {function} callback Optional callback to execute when the iframe body is filled with contents.
       * @return {tinymce.ui.Iframe} Current iframe control.
       */
      html: function (html, callback) {
        var self = this, body = this.getEl().contentWindow.document.body;

        // Wait for iframe to initialize IE 10 takes time
        if (!body) {
          Delay.setTimeout(function () {
            self.html(html);
          });
        } else {
          body.innerHTML = html;

          if (callback) {
            callback();
          }
        }

        return this;
      }
    });
  }
);

/**
 * InfoBox.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ....
 *
 * @-x-less InfoBox.less
 * @class tinymce.ui.InfoBox
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.InfoBox',
  [
    "tinymce.core.ui.Widget"
  ],
  function (Widget) {
    "use strict";

    return Widget.extend({
      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {Boolean} multiline Multiline label.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);
        self.classes.add('widget').add('infobox');
        self.canFocus = false;
      },

      severity: function (level) {
        this.classes.remove('error');
        this.classes.remove('warning');
        this.classes.remove('success');
        this.classes.add(level);
      },

      help: function (state) {
        this.state.set('help', state);
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, prefix = self.classPrefix;

        return (
          '<div id="' + self._id + '" class="' + self.classes + '">' +
          '<div id="' + self._id + '-body">' +
          self.encode(self.state.get('text')) +
          '<button role="button" tabindex="-1">' +
          '<i class="' + prefix + 'ico ' + prefix + 'i-help"></i>' +
          '</button>' +
          '</div>' +
          '</div>'
        );
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:text', function (e) {
          self.getEl('body').firstChild.data = self.encode(e.value);

          if (self.state.get('rendered')) {
            self.updateLayoutRect();
          }
        });

        self.state.on('change:help', function (e) {
          self.classes.toggle('has-help', e.value);

          if (self.state.get('rendered')) {
            self.updateLayoutRect();
          }
        });

        return self._super();
      }
    });
  }
);

/**
 * Label.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class creates a label element. A label is a simple text control
 * that can be bound to other controls.
 *
 * @-x-less Label.less
 * @class tinymce.ui.Label
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.Label',
  [
    "tinymce.core.ui.Widget",
    "tinymce.core.ui.DomUtils"
  ],
  function (Widget, DomUtils) {
    "use strict";

    return Widget.extend({
      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {Boolean} multiline Multiline label.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);
        self.classes.add('widget').add('label');
        self.canFocus = false;

        if (settings.multiline) {
          self.classes.add('autoscroll');
        }

        if (settings.strong) {
          self.classes.add('strong');
        }
      },

      /**
       * Initializes the current controls layout rect.
       * This will be executed by the layout managers to determine the
       * default minWidth/minHeight etc.
       *
       * @method initLayoutRect
       * @return {Object} Layout rect instance.
       */
      initLayoutRect: function () {
        var self = this, layoutRect = self._super();

        if (self.settings.multiline) {
          var size = DomUtils.getSize(self.getEl());

          // Check if the text fits within maxW if not then try word wrapping it
          if (size.width > layoutRect.maxW) {
            layoutRect.minW = layoutRect.maxW;
            self.classes.add('multiline');
          }

          self.getEl().style.width = layoutRect.minW + 'px';
          layoutRect.startMinH = layoutRect.h = layoutRect.minH = Math.min(layoutRect.maxH, DomUtils.getSize(self.getEl()).height);
        }

        return layoutRect;
      },

      /**
       * Repaints the control after a layout operation.
       *
       * @method repaint
       */
      repaint: function () {
        var self = this;

        if (!self.settings.multiline) {
          self.getEl().style.lineHeight = self.layoutRect().h + 'px';
        }

        return self._super();
      },

      severity: function (level) {
        this.classes.remove('error');
        this.classes.remove('warning');
        this.classes.remove('success');
        this.classes.add(level);
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, targetCtrl, forName, forId = self.settings.forId;
        var text = self.settings.html ? self.settings.html : self.encode(self.state.get('text'));

        if (!forId && (forName = self.settings.forName)) {
          targetCtrl = self.getRoot().find('#' + forName)[0];

          if (targetCtrl) {
            forId = targetCtrl._id;
          }
        }

        if (forId) {
          return (
            '<label id="' + self._id + '" class="' + self.classes + '"' + (forId ? ' for="' + forId + '"' : '') + '>' +
            text +
            '</label>'
          );
        }

        return (
          '<span id="' + self._id + '" class="' + self.classes + '">' +
          text +
          '</span>'
        );
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:text', function (e) {
          self.innerHtml(self.encode(e.value));

          if (self.state.get('rendered')) {
            self.updateLayoutRect();
          }
        });

        return self._super();
      }
    });
  }
);

/**
 * Toolbar.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new toolbar.
 *
 * @class tinymce.ui.Toolbar
 * @extends tinymce.ui.Container
 */
define(
  'tinymce.core.ui.Toolbar',
  [
    "tinymce.core.ui.Container"
  ],
  function (Container) {
    "use strict";

    return Container.extend({
      Defaults: {
        role: 'toolbar',
        layout: 'flow'
      },

      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);
        self.classes.add('toolbar');
      },

      /**
       * Called after the control has been rendered.
       *
       * @method postRender
       */
      postRender: function () {
        var self = this;

        self.items().each(function (ctrl) {
          ctrl.classes.add('toolbar-item');
        });

        return self._super();
      }
    });
  }
);
/**
 * MenuBar.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new menubar.
 *
 * @-x-less MenuBar.less
 * @class tinymce.ui.MenuBar
 * @extends tinymce.ui.Container
 */
define(
  'tinymce.core.ui.MenuBar',
  [
    "tinymce.core.ui.Toolbar"
  ],
  function (Toolbar) {
    "use strict";

    return Toolbar.extend({
      Defaults: {
        role: 'menubar',
        containerCls: 'menubar',
        ariaRoot: true,
        defaults: {
          type: 'menubutton'
        }
      }
    });
  }
);
/**
 * MenuButton.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new menu button.
 *
 * @-x-less MenuButton.less
 * @class tinymce.ui.MenuButton
 * @extends tinymce.ui.Button
 */
define(
  'tinymce.core.ui.MenuButton',
  [
    "tinymce.core.ui.Button",
    "tinymce.core.ui.Factory",
    "tinymce.core.ui.MenuBar"
  ],
  function (Button, Factory, MenuBar) {
    "use strict";

    // TODO: Maybe add as some global function
    function isChildOf(node, parent) {
      while (node) {
        if (parent === node) {
          return true;
        }

        node = node.parentNode;
      }

      return false;
    }

    var MenuButton = Button.extend({
      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       */
      init: function (settings) {
        var self = this;

        self._renderOpen = true;

        self._super(settings);
        settings = self.settings;

        self.classes.add('menubtn');

        if (settings.fixedWidth) {
          self.classes.add('fixed-width');
        }

        self.aria('haspopup', true);

        self.state.set('menu', settings.menu || self.render());
      },

      /**
       * Shows the menu for the button.
       *
       * @method showMenu
       */
      showMenu: function (toggle) {
        var self = this, menu;

        if (self.menu && self.menu.visible() && toggle !== false) {
          return self.hideMenu();
        }

        if (!self.menu) {
          menu = self.state.get('menu') || [];

          // Is menu array then auto constuct menu control
          if (menu.length) {
            menu = {
              type: 'menu',
              items: menu
            };
          } else {
            menu.type = menu.type || 'menu';
          }

          if (!menu.renderTo) {
            self.menu = Factory.create(menu).parent(self).renderTo();
          } else {
            self.menu = menu.parent(self).show().renderTo();
          }

          self.fire('createmenu');
          self.menu.reflow();
          self.menu.on('cancel', function (e) {
            if (e.control.parent() === self.menu) {
              e.stopPropagation();
              self.focus();
              self.hideMenu();
            }
          });

          // Move focus to button when a menu item is selected/clicked
          self.menu.on('select', function () {
            self.focus();
          });

          self.menu.on('show hide', function (e) {
            if (e.control == self.menu) {
              self.activeMenu(e.type == 'show');
            }

            self.aria('expanded', e.type == 'show');
          }).fire('show');
        }

        self.menu.show();
        self.menu.layoutRect({ w: self.layoutRect().w });
        self.menu.moveRel(self.getEl(), self.isRtl() ? ['br-tr', 'tr-br'] : ['bl-tl', 'tl-bl']);
        self.fire('showmenu');
      },

      /**
       * Hides the menu for the button.
       *
       * @method hideMenu
       */
      hideMenu: function () {
        var self = this;

        if (self.menu) {
          self.menu.items().each(function (item) {
            if (item.hideMenu) {
              item.hideMenu();
            }
          });

          self.menu.hide();
        }
      },

      /**
       * Sets the active menu state.
       *
       * @private
       */
      activeMenu: function (state) {
        this.classes.toggle('active', state);
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, id = self._id, prefix = self.classPrefix;
        var icon = self.settings.icon, image, text = self.state.get('text'),
          textHtml = '';

        image = self.settings.image;
        if (image) {
          icon = 'none';

          // Support for [high dpi, low dpi] image sources
          if (typeof image != "string") {
            image = window.getSelection ? image[0] : image[1];
          }

          image = ' style="background-image: url(\'' + image + '\')"';
        } else {
          image = '';
        }

        if (text) {
          self.classes.add('btn-has-text');
          textHtml = '<span class="' + prefix + 'txt">' + self.encode(text) + '</span>';
        }

        icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';

        self.aria('role', self.parent() instanceof MenuBar ? 'menuitem' : 'button');

        return (
          '<div id="' + id + '" class="' + self.classes + '" tabindex="-1" aria-labelledby="' + id + '">' +
          '<button id="' + id + '-open" role="presentation" type="button" tabindex="-1">' +
          (icon ? '<i class="' + icon + '"' + image + '></i>' : '') +
          textHtml +
          ' <i class="' + prefix + 'caret"></i>' +
          '</button>' +
          '</div>'
        );
      },

      /**
       * Gets invoked after the control has been rendered.
       *
       * @method postRender
       */
      postRender: function () {
        var self = this;

        self.on('click', function (e) {
          if (e.control === self && isChildOf(e.target, self.getEl())) {
            self.focus();
            self.showMenu(!e.aria);

            if (e.aria) {
              self.menu.items().filter(':visible')[0].focus();
            }
          }
        });

        self.on('mouseenter', function (e) {
          var overCtrl = e.control, parent = self.parent(), hasVisibleSiblingMenu;

          if (overCtrl && parent && overCtrl instanceof MenuButton && overCtrl.parent() == parent) {
            parent.items().filter('MenuButton').each(function (ctrl) {
              if (ctrl.hideMenu && ctrl != overCtrl) {
                if (ctrl.menu && ctrl.menu.visible()) {
                  hasVisibleSiblingMenu = true;
                }

                ctrl.hideMenu();
              }
            });

            if (hasVisibleSiblingMenu) {
              overCtrl.focus(); // Fix for: #5887
              overCtrl.showMenu();
            }
          }
        });

        return self._super();
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:menu', function () {
          if (self.menu) {
            self.menu.remove();
          }

          self.menu = null;
        });

        return self._super();
      },

      /**
       * Removes the control and it's menus.
       *
       * @method remove
       */
      remove: function () {
        this._super();

        if (this.menu) {
          this.menu.remove();
        }
      }
    });

    return MenuButton;
  }
);

/**
 * MenuItem.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new menu item.
 *
 * @-x-less MenuItem.less
 * @class tinymce.ui.MenuItem
 * @extends tinymce.ui.Control
 */
define(
  'tinymce.core.ui.MenuItem',
  [
    "tinymce.core.ui.Widget",
    "tinymce.core.ui.Factory",
    "tinymce.core.Env",
    "tinymce.core.util.Delay"
  ],
  function (Widget, Factory, Env, Delay) {
    "use strict";

    return Widget.extend({
      Defaults: {
        border: 0,
        role: 'menuitem'
      },

      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {Boolean} selectable Selectable menu.
       * @setting {Array} menu Submenu array with items.
       * @setting {String} shortcut Shortcut to display for menu item. Example: Ctrl+X
       */
      init: function (settings) {
        var self = this, text;

        self._super(settings);

        settings = self.settings;

        self.classes.add('menu-item');

        if (settings.menu) {
          self.classes.add('menu-item-expand');
        }

        if (settings.preview) {
          self.classes.add('menu-item-preview');
        }

        text = self.state.get('text');
        if (text === '-' || text === '|') {
          self.classes.add('menu-item-sep');
          self.aria('role', 'separator');
          self.state.set('text', '-');
        }

        if (settings.selectable) {
          self.aria('role', 'menuitemcheckbox');
          self.classes.add('menu-item-checkbox');
          settings.icon = 'selected';
        }

        if (!settings.preview && !settings.selectable) {
          self.classes.add('menu-item-normal');
        }

        self.on('mousedown', function (e) {
          e.preventDefault();
        });

        if (settings.menu && !settings.ariaHideMenu) {
          self.aria('haspopup', true);
        }
      },

      /**
       * Returns true/false if the menuitem has sub menu.
       *
       * @method hasMenus
       * @return {Boolean} True/false state if it has submenu.
       */
      hasMenus: function () {
        return !!this.settings.menu;
      },

      /**
       * Shows the menu for the menu item.
       *
       * @method showMenu
       */
      showMenu: function () {
        var self = this, settings = self.settings, menu, parent = self.parent();

        parent.items().each(function (ctrl) {
          if (ctrl !== self) {
            ctrl.hideMenu();
          }
        });

        if (settings.menu) {
          menu = self.menu;

          if (!menu) {
            menu = settings.menu;

            // Is menu array then auto constuct menu control
            if (menu.length) {
              menu = {
                type: 'menu',
                items: menu
              };
            } else {
              menu.type = menu.type || 'menu';
            }

            if (parent.settings.itemDefaults) {
              menu.itemDefaults = parent.settings.itemDefaults;
            }

            menu = self.menu = Factory.create(menu).parent(self).renderTo();
            menu.reflow();
            menu.on('cancel', function (e) {
              e.stopPropagation();
              self.focus();
              menu.hide();
            });
            menu.on('show hide', function (e) {
              if (e.control.items) {
                e.control.items().each(function (ctrl) {
                  ctrl.active(ctrl.settings.selected);
                });
              }
            }).fire('show');

            menu.on('hide', function (e) {
              if (e.control === menu) {
                self.classes.remove('selected');
              }
            });

            menu.submenu = true;
          } else ÍüxÆ:½«~Ã»òÿÎÆÓí¹¾¿WûÛÿp¾ÿS·üŞÕûûO÷òŸCu{2xêùn·íùáüOáÙÿÅû}Í«}%°ù7ıgöıÇY¥¶×ÿf_×{ü±ÿï9_÷×üº}+@lü_ôü©¾käë»í®ŞMÛçãzé¿úíhõwµÎ5ÿ˜7ÄÂ¨6­V ŒXì5EÉ$ ñä]ğ%ıìz‚8	CªˆµÄDyĞØÆ•™ÙYºâÒY	w*t  »á*ÀWGU%0h I7YP'äcé6£” `°iÄ>r "$ã° ™ Ø„äÁL" ™’à³FÍRŠ¢„Œ0DJ€ÃÊ€—ŒK~ûºõPˆ.F€¢˜P¨ÀHñPZbV$zH§Òr€¬6ÈaLW•c ã±;İõÍJ#¢ò7«Ğ€)q ö!„œI“ô¥p°c]âwL 2&‰©Ù1œ›ı•ÿ›õ>úw÷ÏÏøÊ³ß4açôãv«Ç'3{â÷ı~;ÿıÿ_úùÿ¿éó>éoúÖî/õ%¾YÜ­³¯/ÿsó~Õ*kÿœUènê%Á—)û,íÿ½½ó¿3|ÿıl÷¨ÙÛİóñWùŞ¿›¸ıùÛôéûÃê›{ßãşï¾üÓŞü%Yú„E¡Ã×˜ÈR„
±Y’+Ã= ¾¾œ5Öûgl 'NÛ}F+õU¬/W·•*,"@*‡	ì¼0¦:=àcØÃ6x½Â3tĞ}`xİìÍd@!¡?íÎEEx%.LBDÔpD"@Ñu9Á-)P3C& …ıÃ÷)/Ñş¯œq_øå©¾=Ïü÷Êë¯o”½{7ûÑëÍ»Ø¹ëûšóú¾‹öÎÿüm2Š}o_úùnÏ‡¼éÉ}öşïÏÌşçıüö§ßWª•;Eéÿ7ñºÖü¶ù]œ+?yÎ`ÛoÉ÷ÿú/|ıÕ£ï®]?ÕnM_ş)÷ßgÀõm¬6ÿëö'çæ_}ŞıÑ_G‘>¿G­qï4Ğ³Ò¿3_÷~ÿçéä%¿ù~ÿùÖwIæÚöw/÷ı¯zZmvoû³©·ÿ¿¿{H~øÈş×ç¦~§—ôX©öw7»ßÿWj¾ú·í×û›ÇîÊıøÚœ±,gç÷Ÿ¿Òüû×ï<øóñû^o»ß„¬BÁ0¸&¢iF@ ä¦B«HPŞ
i›F˜Øì
@K)æQBà’¸A n%%Än‡·9°Ä<& 0Àn‘ÿ/±·(‚À¯p3	5´HãàXÉ&7‚æ-Yún ¯2QVÇ´€,Çƒåh• ²ûºÿ÷×£¾x÷¶zÛÜÎßö~êşc_e¦÷º•ÿû>ÛtÏÖë´ÏÙßÌ¾şÿ}µ¦–¯ç­›ıÑ¯^Ğ¬ló¹Û—×¹¾ŞßVŸcoõÖûÕ~å†¿ıİ¯ºìÇoû÷mû›şìXïx³ïá—wtûÿy¹ÿolpİÇJ™Â^Ë§êáìbJN:áæÁĞ8Áj¯„Úx†Š£HÀ°úà†dN°Ö¨PQ f2”àFßyP€Í®€F}\JœJe%X…( ÌÀ0i
L¹ÌÎ%à`Œ:€‡5:€%06 °Æ5Slrd,-oËd(@ì
†-Ì“ .=}Çº e–Aüß¸xšsTƒ` H ;}¼vDÙš@_ˆ.#ØPPLôG…tSX‹ApN¢5ˆ×- (šƒğ¯@6‹"ƒP@3éÒøC±oJBb sÉQ2ÅêIV ¯pÀ@3£<ĞNîø}²‡¯Ö»×ïÓ…yşŸ¶šWZşRT®~ÿ÷cûçU÷s:ÿ¯¼ï^æ³>Gß=ÆØ»‡}µŞ¹­úß{û_kgv×şûíğGMşµîÛçİåiŞ­ÿÿqUıùk¶~³qã½Ïæ}ıİêêœ³~Ê²Øõ™«Oİş%0?ÃMÛÌ@rÉQ  $…&”µ&@jLHSe&‚$ „4…Š:$	€ó£8±Käy!@Æ €\‚à¡álèm@-Ò„¨D’¢9¥ûá¢÷:9‰ Œ–)-9D`@Ap-ƒæ•t PØæ‰Â
ÄX€+üuÿ]êüÏz÷îÿÿ-d|½'Uø÷?¼ûşï;İß}åíûÒ6îûÿğßüò²÷ÑÙ§îoèŸ¿ÿô¼ì*ßóºÎâ;_ô÷'~¢r‹Î?xÏıŠ‡]—­ÄNsqÿ¾£ô÷Óÿ_¿ÿ0ÚÇ‹ı=~?©ímYUÿÓúİ’şÜO}ô¿¯ò«ïÙ]ÆÏì×~Ÿ¿>›÷êowş¾§óüDÿ1Í³Hœu·~'ı—ô×oš'±ÿ£ùÙÛ¼ßİã¿ıŠ¿úì<µ™şîÿ×Ÿñìîïİ5¯€/eİGíÿÛÿÖÓ,{Iöç2~jn«İşs§ÿ÷ı³lïvñøÇÿæáş?5ÿ«ßûy×¬r¼µÆK"H†ï„ò0…¢ÂPwh tAP¨[D” İ%ŒÒ4(Æ)–À(7«hWpx[@¤v‚‘7†G0Vº
à¢+#[˜4³#PrTÄOäõé€ˆ€rô' &ú)Ø†€
r	A·ıêÿÆö>üüñûR}üµ×Ï¿[ı·½—[Ïµío‹;¬äE—Õİ•çÿıÏ×ıïÓY…Ÿçëòÿ~êı©ß¼úş÷í~‰Ó°xØ=åûß>ÿÍÏÑûÿÿüç~U¿Õ—ÙÜï¿yô¿›sîÓ~û—ØóÿØüoo^Û¢=Å–¿k’x¨	J	Bà¶U<¤‚ÇP‹Õ ÏWW• b5…>°yÙº„‰ãÂ‚)4h8‰¥j8ÄÑ×à”’Ù¯82×@"«Òš¥D`B—ŒB@–‰M°Ÿ; ˜ì¨MğXÌÄ-Œåğ€@ÂŒÃxFÄ°d"ˆ<Ã@¸-µ'²½,h†#D‚g”ÅyÙ¸yFfB@YÊQlÑ@C&ŒÓp€aÕÂÆ¡  p%
ÑR„ÑÊÅ!pŒbE!w.B¹XÕn›U«ÄM¸-H<°P×5ª­\(˜Ài¤™´…¥¥¢=µU$&û½ÿ›]¼‹âTnûéıkc›ÿõyı©~aûûñÿ³·äÿ3uÙí¡ïı=‘'g³}ëÿõßW]+o¿çÿn¼éÿø¿sÑ—sö›,Ç.}ÿG?â¿şßcRó?¸–Ïòÿ¿{ÿ…wûÊ\åÕõõö·ß÷²ªl×Ùz´ïV½oÍûõÍOåDí®%”Ã½Z4¤¤ª`ôRtU" G‰„¢6<Z&BÄh*J:7$"@=YS·§0ğ5Á8„!Ô±Ã>`@<rÀ"]"“c~@&BR¥@‚cXD¹BBÑÀ­¡ Ga\ê0¹"@Ì/é)©»c?ÿıóNïıÙò}÷Úøªïr»³ı¯ów¾{YûÁ¿üÌµ#ÿ*J6ûdÖ÷ñ»¬ßoŸóæø&Óâßß¥~Óq­ãÄ“ë_Ş<VÊßøËË·õ÷çÙ}óùoÖcü¸×ïâoîéå6õËRÃº~rî'VÕİÜÑ¯ıı»=?Gü}Ç>×\~·wÓên¡0ÜïÏÇvÿœßù¾[¹ïşy~Ñÿ~>6Û·ı®Õyñ0øãİy¿¯¸áwµ6¾ü9ßå6ïä×\ëÛñ¾ÿİ:_¿ş´ûöÉó¿º‚?êºÔ^??÷wéûTñ¥7ì/­Íÿ\[şÛæÿgÿ÷™²÷öÛ½wû}™ÅYe¸ eÁ!‰~]{WÚdU(Aˆv.ZÁÒÒ ÁO@
$i…Ä#ÀY#	`&wß•RiÂ€ød!ˆPRüv +™¾`ùlËT a pH)Â ´¦ÒàƒÉ8Õ¢ƒ^w
ÄÀ‚@&–D0™<Ô¦’F•ãÙ‚×W¿µÿıg×xˆŸw¿Çî/t¿_ßÇu·‹eJ1ËıÙgø¾ÿÏëûá/ûÏœ?¿Ü??½Lı3à©oÿÍÿ®´öÏmX“ûô 9ñv?¿ÿÙ²ëóníšÚë^+[¿;åx?û[vÕ÷#{?»}_¿ãñ5şÿ­ßÿ-]¥ŞO_ÿgÈSQœ3ŠW\ò&XQ:²!P¿jQŒ–Ğ4l¹Jd¡QW&ğ"¬d§4­ëD`dBˆ‰È(K+Y	d i&-¶ü”1 bäÊë è"€Íš”Pàu@3Hç%3¤ÍÔZR…L j³ª%PÆƒS”‡).'-¨ë¥E„[Jk€2Á›b ^…	Œ§ÑèİÔõbù”€Âƒ†©D‹Y`³ˆ2J•ˆ%Ñ!¤¹ÍKÂ‚äÕCsH#Ã£±'C"Ò
±5š¨‡S˜€Q0™#ãÈ‚ˆ‰ 3z„„B`‚¤X$˜ŸS‚}D@nõ<™§ÿUGïû—ïÿı¿õ8ôï~Êı_Ã‘·ß—ëııYÌjğ™ó¾—:7ÇßÇÿ¿·ûû?yÈ½]öİÿòü­µ÷~×U}¹ŞÛ÷úşîOz+½¿qõ·s·õ4xş¦ãïv¯gõøïÿåîà¾UÏíù[{t†œv?ÿú¹ÿq¾ÆU4àäEM¨²r×<q–iPy¥L²‡Á8“P8Âh0ÔìòI G€Cƒ!°Šd
ã+ùäª’ÿÀ Ù:PöSŞÁ”Ç”€$´@ HP›D°Ó³’N€B>âH(V&³Ø 6‰à™v±Àx„/ú#ûÙlõ¾n-İÛûş_µÇg§Óİß¯ÿÅóK¸)iFMşcïÛäŞu~úíÓıûÌïè­M{¸@ë>®m½÷÷·µÎıüîZlo¿_?»ö{÷W¦óÿØ=ÿ»/İ¹ÿİû­ö?u÷½ïÿ´o¼*ŸÚ0ïVİ°¤e¾õøæô—şïç™tßı¯ïßÇ³/ş¥¶ŸJïÿnõuwüyoõïâ†ïû_¦<~pËãë;nòíÿış¯/Kÿ£î]î\ßãÙ²ÌïÊúÍû?ÿÍ¯¼4÷¶?ºÙõÃíÏ³½çd¿Ö OÅÒû·÷Ìnw­·4Î®ğ'ı÷÷¸©ìûcı;éô	 Â/Ğ€ú;Ì
!´"„D$˜  ¡Ü    µ$3`U p@äé`SVŠ@¾ÈF	®`AÄ&Mò4ƒ7€‰³B€CCPÄ€ó FˆÁ×@}Àd&Y$—ÜCôKÄ6™c
)I£;Œ€Æhis, settings = self.settings;

        var textStyle = settings.textStyle;
        if (typeof textStyle == "function") {
          textStyle = textStyle.call(this);
        }

        if (textStyle) {
          var textElm = self.getEl('text');
          if (textElm) {
            textElm.setAttribute('style', textStyle);
          }
        }

        self.on('mouseenter click', function (e) {
          if (e.control === self) {
            if (!settings.menu && e.type === 'click') {
              self.fire('select');

              // Edge will crash if you stress it see #2660
              Delay.requestAnimationFrame(function () {
                self.parent().hideAll();
              });
            } else {
              self.showMenu();

              if (e.aria) {
                self.menu.focus(true);
              }
            }
          }
        });

        self._super();

        return self;
      },

      hover: function () {
        var self = this;

        self.parent().items().each(function (ctrl) {
          ctrl.classes.remove('selected');
        });

        self.classes.toggle('selected', true);

        return self;
      },

      active: function (state) {
        if (typeof state != "undefined") {
          this.aria('checked', state);
        }

        return this._super(state);
      },

      /**
       * Removes the control and it's menus.
       *
       * @method remove
       */
      remove: function () {
        this._super();

        if (this.menu) {
          this.menu.remove();
        }
      }
    });
  }
);

/**
 * Throbber.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This class enables you to display a Throbber for any element.
 *
 * @-x-less Throbber.less
 * @class tinymce.ui.Throbber
 */
define(
  'tinymce.core.ui.Throbber',
  [
    "tinymce.core.dom.DomQuery",
    "tinymce.core.ui.Control",
    "tinymce.core.util.Delay"
  ],
  function ($, Control, Delay) {
    "use strict";

    /**
     * Constructs a new throbber.
     *
     * @constructor
     * @param {Element} elm DOM Html element to display throbber in.
     * @param {Boolean} inline Optional true/false state if the throbber should be appended to end of element for infinite scroll.
     */
    return function (elm, inline) {
      var self = this, state, classPrefix = Control.classPrefix, timer;

      /**
       * Shows the throbber.
       *
       * @method show
       * @param {Number} [time] Time to wait before showing.
       * @param {function} [callback] Optional callback to execute when the throbber is shown.
       * @return {tinymce.ui.Throbber} Current throbber instance.
       */
      self.show = function (time, callback) {
        function render() {
          if (state) {
            $(elm).append(
              '<div class="' + classPrefix + 'throbber' + (inline ? ' ' + classPrefix + 'throbber-inline' : '') + '"></div>'
            );

            if (callback) {
              callback();
            }
          }
        }

        self.hide();

        state = true;

        if (time) {
          timer = Delay.setTimeout(render, time);
        } else {
          render();
        }

        return self;
      };

      /**
       * Hides the throbber.
       *
       * @method hide
       * @return {tinymce.ui.Throbber} Current throbber instance.
       */
      self.hide = function () {
        var child = elm.lastChild;

        Delay.clearTimeout(timer);

        if (child && child.className.indexOf('throbber') != -1) {
          child.parentNode.removeChild(child);
        }

        state = false;

        return self;
      };
    };
  }
);

/**
 * Menu.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new menu.
 *
 * @-x-less Menu.less
 * @class tinymce.ui.Menu
 * @extends tinymce.ui.FloatPanel
 */
define(
  'tinymce.core.ui.Menu',
  [
    "tinymce.core.ui.FloatPanel",
    "tinymce.core.ui.MenuItem",
    "tinymce.core.ui.Throbber",
    "tinymce.core.util.Tools"
  ],
  function (FloatPanel, MenuItem, Throbber, Tools) {
    "use strict";

    return FloatPanel.extend({
      Defaults: {
        defaultType: 'menuitem',
        border: 1,
        layout: 'stack',
        role: 'application',
        bodyRole: 'menu',
        ariaRoot: true
      },

      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       */
      init: function (settings) {
        var self = this;

        settings.autohide = true;
        settings.constrainToViewport = true;

        if (typeof settings.items === 'function') {
          settings.itemsFactory = settings.items;
          settings.items = [];
        }

        if (settings.itemDefaults) {
          var items = settings.items, i = items.length;

          while (i--) {
            items[i] = Tools.extend({}, settings.itemDefaults, items[i]);
          }
        }

        self._super(settings);
        self.classes.add('menu');
      },

      /**
       * Repaints the control after a layout operation.
       *
       * @method repaint
       */
      repaint: function () {
        this.classes.toggle('menu-align', true);

        this._super();

        this.getEl().style.height = '';
        this.getEl('body').style.height = '';

        return this;
      },

      /**
       * Hides/closes the menu.
       *
       * @method cancel
       */
      cancel: function () {
        var self = this;

        self.hideAll();
        self.fire('select');
      },

      /**
       * Loads new items from the factory items function.
       *
       * @method load
       */
      load: function () {
        var self = this, time, factory;

        function hideThrobber() {
          if (self.throbber) {
            self.throbber.hide();
            self.throbber = null;
          }
        }

        factory = self.settings.itemsFactory;
        if (!factory) {
          return;
        }

        if (!self.throbber) {
          self.throbber = new Throbber(self.getEl('body'), true);

          if (self.items().length === 0) {
            self.throbber.show();
            self.fire('loading');
          } else {
            self.throbber.show(100, function () {
              self.items().remove();
              self.fire('loading');
            });
          }

          self.on('hide close', hideThrobber);
        }

        self.requestTime = time = new Date().getTime();

        self.settings.itemsFactory(function (items) {
          if (items.length === 0) {
            self.hide();
            return;
          }

          if (self.requestTime !== time) {
            return;
          }

          self.getEl().style.width = '';
          self.getEl('body').style.width = '';

          hideThrobber();
          self.items().remove();
          self.getEl('body').innerHTML = '';

          self.add(items);
          self.renderNew();
          self.fire('loaded');
        });
      },

      /**
       * Hide menu and all sub menus.
       *
       * @method hideAll
       */
      hideAll: function () {
        var self = this;

        this.find('menuitem').exec('hideMenu');

        return self._super();
      },

      /**
       * Invoked before the menu is rendered.
       *
       * @method preRender
       */
      preRender: function () {
        var self = this;

        self.items().each(function (ctrl) {
          var settings = ctrl.settings;

          if (settings.icon || settings.image || settings.selectable) {
            self._hasIcons = true;
            return false;
          }
        });

        if (self.settings.itemsFactory) {
          self.on('postrender', function () {
            if (self.settings.itemsFactory) {
              self.load();
            }
          });
        }

        return self._super();
      }
    });
  }
);

/**
 * ListBox.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new list box control.
 *
 * @-x-less ListBox.less
 * @class tinymce.ui.ListBox
 * @extends tinymce.ui.MenuButton
 */
define(
  'tinymce.core.ui.ListBox',
  [
    "tinymce.core.ui.MenuButton",
    "tinymce.core.ui.Menu"
  ],
  function (MenuButton, Menu) {
    "use strict";

    return MenuButton.extend({
      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {Array} values Array with values to add to list box.
       */
      init: function (settings) {
        var self = this, values, selected, selectedText, lastItemCtrl;

        function setSelected(menuValues) {
          // Try to find a selected value
          for (var i = 0; i < menuValues.length; i++) {
            selected = menuValues[i].selected || settings.value === menuValues[i].value;

            if (selected) {
              selectedText = selectedText || menuValues[i].text;
              self.state.set('value', menuValues[i].value);
              return true;
            }

            // If the value has a submenu, try to find the selected values in that menu
            if (menuValues[i].menu) {
              if (setSelected(menuValues[i].menu)) {
                return true;
              }
            }
          }
        }

        self._super(settings);
        settings = self.settings;

        self._values = values = settings.values;
        if (values) {
          if (typeof settings.value != "undefined") {
            setSelected(values);
          }

          // Default with first item
          if (!selected && values.length > 0) {
            selectedText = values[0].text;
            self.state.set('value', values[0].value);
          }

          self.state.set('menu', values);
        }

        self.state.set('text', settings.text || selectedText);

        self.classes.add('listbox');

        self.on('select', function (e) {
          var ctrl = e.control;

          if (lastItemCtrl) {
            e.lastControl = lastItemCtrl;
          }

          if (settings.multiple) {
            ctrl.active(!ctrl.active());
          } else {
            self.value(e.control.value());
          }

          lastItemCtrl = ctrl;
        });
      },

      /**
       * Getter/setter function for the control value.
       *
       * @method value
       * @param {String} [value] Value to be set.
       * @return {Boolean/tinymce.ui.ListBox} Value or self if it's a set operation.
       */
      bindStates: function () {
        var self = this;

        function activateMenuItemsByValue(menu, value) {
          if (menu instanceof Menu) {
            menu.items().each(function (ctrl) {
              if (!ctrl.hasMenus()) {
                ctrl.active(ctrl.value() === value);
              }
            });
          }
        }

        function getSelectedItem(menuValues, value) {
          var selectedItem;

          if (!menuValues) {
            return;
          }

          for (var i = 0; i < menuValues.length; i++) {
            if (menuValues[i].value === value) {
              return menuValues[i];
            }

            if (menuValues[i].menu) {
              selectedItem = getSelectedItem(menuValues[i].menu, value);
              if (selectedItem) {
                return selectedItem;
              }
            }
          }
        }

        self.on('show', function (e) {
          activateMenuItemsByValue(e.control, self.value());
        });

        self.state.on('change:value', function (e) {
          var selectedItem = getSelectedItem(self.state.get('menu'), e.value);

          if (selectedItem) {
            self.text(selectedItem.text);
          } else {
            self.text(self.settings.text);
          }
        });

        return self._super();
      }
    });
  }
);

/**
 * Radio.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new radio button.
 *
 * @-x-less Radio.less
 * @class tinymce.ui.Radio
 * @extends tinymce.ui.Checkbox
 */
define(
  'tinymce.core.ui.Radio',
  [
    "tinymce.core.ui.Checkbox"
  ],
  function (Checkbox) {
    "use strict";

    return Checkbox.extend({
      Defaults: {
        classes: "radio",
        role: "radio"
      }
    });
  }
);
/**
 * ResizeHandle.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Renders a resize handle that fires ResizeStart, Resize and ResizeEnd events.
 *
 * @-x-less ResizeHandle.less
 * @class tinymce.ui.ResizeHandle
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.ResizeHandle',
  [
    "tinymce.core.ui.Widget",
    "tinymce.core.ui.DragHelper"
  ],
  function (Widget, DragHelper) {
    "use strict";

    return Widget.extend({
      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, prefix = self.classPrefix;

        self.classes.add('resizehandle');

        if (self.settings.direction == "both") {
          self.classes.add('resizehandle-both');
        }

        self.canFocus = false;

        return (
          '<div id="' + self._id + '" class="' + self.classes + '">' +
          '<i class="' + prefix + 'ico ' + prefix + 'i-resize"></i>' +
          '</div>'
        );
      },

      /**
       * Called after the control has been rendered.
       *
       * @method postRender
       */
      postRender: function () {
        var self = this;

        self._super();

        self.resizeDragHelper = new DragHelper(this._id, {
          start: function () {
            self.fire('ResizeStart');
          },

          drag: function (e) {
            if (self.settings.direction != "both") {
              e.deltaX = 0;
            }

            self.fire('Resize', e);
          },

          stop: function () {
            self.fire('ResizeEnd');
          }
        });
      },

      remove: function () {
        if (this.resizeDragHelper) {
          this.resizeDragHelper.destroy();
        }

        return this._super();
      }
    });
  }
);

/**
 * SelectBox.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a new select box control.
 *
 * @-x-less SelectBox.less
 * @class tinymce.ui.SelectBox
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.SelectBox',
  [
    "tinymce.core.ui.Widget"
  ],
  function (Widget) {
    "use strict";

    function createOptions(options) {
      var strOptions = '';
      if (options) {
        for (var i = 0; i < options.length; i++) {
          strOptions += '<option value="' + options[i] + '">' + options[i] + '</option>';
        }
      }
      return strOptions;
    }

    return Widget.extend({
      Defaults: {
        classes: "selectbox",
        role: "selectbox",
        options: []
      },
      /**
       * Constructs a instance with the specified settings.
       *
       * @constructor
       * @param {Object} settings Name/value object with settings.
       * @setting {Array} options Array with options to add to the select box.
       */
      init: function (settings) {
        var self = this;

        self._super(settings);

        if (self.settings.size) {
          self.size = self.settings.size;
        }

        if (self.settings.options) {
          self._options = self.settings.options;
        }

        self.on('keydown', function (e) {
          var rootControl;

          if (e.keyCode == 13) {
            e.preventDefault();

            // Find root control that we can do toJSON on
            self.parents().reverse().each(function (ctrl) {
              if (ctrl.toJSON) {
                rootControl = ctrl;
                return false;
              }
            });

            // Fire event on current text box with the serialized data of the whole form
            self.fire('submit', { data: rootControl.toJSON() });
          }
        });
      },

      /**
       * Getter/setter function for the options state.
       *
       * @method options
       * @param {Array} [state] State to be set.
       * @return {Array|tinymce.ui.SelectBox} Array of string options.
       */
      options: function (state) {
        if (!arguments.length) {
          return this.state.get('options');
        }

        this.state.set('options', state);

        return this;
      },

      renderHtml: function () {
        var self = this, options, size = '';

        options = createOptions(self._options);

        if (self.size) {
          size = ' size = "' + self.size + '"';
        }

        return (
          '<select id="' + self._id + '" class="' + self.classes + '"' + size + '>' +
          options +
          '</select>'
        );
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:options', function (e) {
          self.getEl().innerHTML = createOptions(e.value);
        });

        return self._super();
      }
    });
  }
);

/**
 * Slider.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Slider control.
 *
 * @-x-less Slider.less
 * @class tinymce.ui.Slider
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.Slider',
  [
    "tinymce.core.ui.Widget",
    "tinymce.core.ui.DragHelper",
    "tinymce.core.ui.DomUtils"
  ],
  function (Widget, DragHelper, DomUtils) {
    "use strict";

    function constrain(value, minVal, maxVal) {
      if (value < minVal) {
        value = minVal;
      }

      if (value > maxVal) {
        value = maxVal;
      }

      return value;
    }

    function setAriaProp(el, name, value) {
      el.setAttribute('aria-' + name, value);
    }

    function updateSliderHandle(ctrl, value) {
      var maxHandlePos, shortSizeName, sizeName, stylePosName, styleValue, handleEl;

      if (ctrl.settings.orientation == "v") {
        stylePosName = "top";
        sizeName = "height";
        shortSizeName = "h";
      } else {
        stylePosName = "left";
        sizeName = "width";
        shortSizeName = "w";
      }

      handleEl = ctrl.getEl('handle');
      maxHandlePos = (ctrl.layoutRect()[shortSizeName] || 100) - DomUtils.getSize(handleEl)[sizeName];

      styleValue = (maxHandlePos * ((value - ctrl._minValue) / (ctrl._maxValue - ctrl._minValue))) + 'px';
      handleEl.style[stylePosName] = styleValue;
      handleEl.style.height = ctrl.layoutRect().h + 'px';

      setAriaProp(handleEl, 'valuenow', value);
      setAriaProp(handleEl, 'valuetext', '' + ctrl.settings.previewFilter(value));
      setAriaProp(handleEl, 'valuemin', ctrl._minValue);
      setAriaProp(handleEl, 'valuemax', ctrl._maxValue);
    }

    return Widget.extend({
      init: function (settings) {
        var self = this;

        if (!settings.previewFilter) {
          settings.previewFilter = function (value) {
            return Math.round(value * 100) / 100.0;
          };
        }

        self._super(settings);
        self.classes.add('slider');

        if (settings.orientation == "v") {
          self.classes.add('vertical');
        }

        self._minValue = settings.minValue || 0;
        self._maxValue = settings.maxValue || 100;
        self._initValue = self.state.get('value');
      },

      renderHtml: function () {
        var self = this, id = self._id, prefix = self.classPrefix;

        return (
          '<div id="' + id + '" class="' + self.classes + '">' +
          '<div id="' + id + '-handle" class="' + prefix + 'slider-handle" role="slider" tabindex="-1"></div>' +
          '</div>'
        );
      },

      reset: function () {
        this.value(this._initValue).repaint();
      },

      postRender: function () {
        var self = this, minValue, maxValue, screenCordName,
          stylePosName, sizeName, shortSizeName;

        function toFraction(min, max, val) {
          return (val + min) / (max - min);
        }

        function fromFraction(min, max, val) {
          return (val * (max - min)) - min;
        }

        function handleKeyboard(minValue, maxValue) {
          function alter(delta) {
            var value;

            value = self.value();
            value = fromFraction(minValue, maxValue, toFraction(minValue, maxValue, value) + (delta * 0.05));
            value = constrain(value, minValue, maxValue);

            self.value(value);

            self.fire('dragstart', { value: value });
            self.fire('drag', { value: value });
            self.fire('dragend', { value: value });
          }

          self.on('keydown', function (e) {
            switch (e.keyCode) {
              case 37:
              case 38:
                alter(-1);
                break;

              case 39:
              case 40:
                alter(1);
                break;
            }
          });
        }

        function handleDrag(minValue, maxValue, handleEl) {
          var startPos, startHandlePos, maxHandlePos, handlePos, value;

          self._dragHelper = new DragHelper(self._id, {
            handle: self._id + "-handle",

            start: function (e) {
              startPos = e[screenCordName];
              startHandlePos = parseInt(self.getEl('handle').style[stylePosName], 10);
              maxHandlePos = (self.layoutRect()[shortSizeName] || 100) - DomUtils.getSize(handleEl)[sizeName];
              self.fire('dragstart', { value: value });
            },

            drag: function (e) {
              var delta = e[screenCordName] - startPos;

              handlePos = constrain(startHandlePos + delta, 0, maxHandlePos);
              handleEl.style[stylePosName] = handlePos + 'px';

              value = minValue + (handlePos / maxHandlePos) * (maxValue - minValue);
              self.value(value);

              self.tooltip().text('' + self.settings.previewFilter(value)).show().moveRel(handleEl, 'bc tc');

              self.fire('drag', { value: value });
            },

            stop: function () {
              self.tooltip().hide();
              self.fire('dragend', { value: value });
            }
          });
        }

        minValue = self._minValue;
        maxValue = self._maxValue;

        if (self.settings.orientation == "v") {
          screenCordName = "screenY";
          stylePosName = "top";
          sizeName = "height";
          shortSizeName = "h";
        } else {
          screenCordName = "screenX";
          stylePosName = "left";
          sizeName = "width";
          shortSizeName = "w";
        }

        self._super();

        handleKeyboard(minValue, maxValue, self.getEl('handle'));
        handleDrag(minValue, maxValue, self.getEl('handle'));
      },

      repaint: function () {
        this._super();
        updateSliderHandle(this, this.value());
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:value', function (e) {
          updateSliderHandle(self, e.value);
        });

        return self._super();
      }
    });
  }
);
/**
 * Spacer.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a spacer. This control is used in flex layouts for example.
 *
 * @-x-less Spacer.less
 * @class tinymce.ui.Spacer
 * @extends tinymce.ui.Widget
 */
define(
  'tinymce.core.ui.Spacer',
  [
    "tinymce.core.ui.Widget"
  ],
  function (Widget) {
    "use strict";

    return Widget.extend({
      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this;

        self.classes.add('spacer');
        self.canFocus = false;

        return '<div id="' + self._id + '" class="' + self.classes + '"></div>';
      }
    });
  }
);
/**
 * SplitButton.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a split button.
 *
 * @-x-less SplitButton.less
 * @class tinymce.ui.SplitButton
 * @extends tinymce.ui.Button
 */
define(
  'tinymce.core.ui.SplitButton',
  [
    "tinymce.core.ui.MenuButton",
    "tinymce.core.ui.DomUtils",
    "tinymce.core.dom.DomQuery"
  ],
  function (MenuButton, DomUtils, $) {
    return MenuButton.extend({
      Defaults: {
        classes: "widget btn splitbtn",
        role: "button"
      },

      /**
       * Repaints the control after a layout operation.
       *
       * @method repaint
       */
      repaint: function () {
        var self = this, elm = self.getEl(), rect = self.layoutRect(), mainButtonElm, menuButtonElm;

        self._super();

        mainButtonElm = elm.firstChild;
        menuButtonElm = elm.lastChild;

        $(mainButtonElm).css({
          width: rect.w - DomUtils.getSize(menuButtonElm).width,
          height: rect.h - 2
        });

        $(menuButtonElm).css({
          height: rect.h - 2
        });

        return self;
      },

      /**
       * Sets the active menu state.
       *
       * @private
       */
      activeMenu: function (state) {
        var self = this;

        $(self.getEl().lastChild).toggleClass(self.classPrefix + 'active', state);
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, id = self._id, prefix = self.classPrefix, image;
        var icon = self.state.get('icon'), text = self.state.get('text'),
          textHtml = '';

        image = self.settings.image;
        if (image) {
          icon = 'none';

          // Support for [high dpi, low dpi] image sources
          if (typeof image != "string") {
            image = window.getSelection ? image[0] : image[1];
          }

          image = ' style="background-image: url(\'' + image + '\')"';
        } else {
          image = '';
        }

        icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';

        if (text) {
          self.classes.add('btn-has-text');
          textHtml = '<span class="' + prefix + 'txt">' + self.encode(text) + '</span>';
        }

        return (
          '<div id="' + id + '" class="' + self.classes + '" role="button" tabindex="-1">' +
          '<button type="button" hidefocus="1" tabindex="-1">' +
          (icon ? '<i class="' + icon + '"' + image + '></i>' : '') +
          textHtml +
          '</button>' +
          '<button type="button" class="' + prefix + 'open" hidefocus="1" tabindex="-1">' +
          //(icon ? '<i class="' + icon + '"></i>' : '') +
          (self._menuBtnText ? (icon ? '\u00a0' : '') + self._menuBtnText : '') +
          ' <i class="' + prefix + 'caret"></i>' +
          '</button>' +
          '</div>'
        );
      },

      /**
       * Called after the control has been rendered.
       *
       * @method postRender
       */
      postRender: function () {
        var self = this, onClickHandler = self.settings.onclick;

        self.on('click', function (e) {
          var node = e.target;

          if (e.control == this) {
            // Find clicks that is on the main button
            while (node) {
              if ((e.aria && e.aria.key != 'down') || (node.nodeName == 'BUTTON' && node.className.indexOf('open') == -1)) {
                e.stopImmediatePropagation();

                if (onClickHandler) {
                  onClickHandler.call(this, e);
                }

                return;
              }

              node = node.parentNode;
            }
          }
        });

        delete self.settings.onclick;

        return self._super();
      }
    });
  }
);
/**
 * StackLayout.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This layout uses the browsers layout when the items are blocks.
 *
 * @-x-less StackLayout.less
 * @class tinymce.ui.StackLayout
 * @extends tinymce.ui.FlowLayout
 */
define(
  'tinymce.core.ui.StackLayout',
  [
    "tinymce.core.ui.FlowLayout"
  ],
  function (FlowLayout) {
    "use strict";

    return FlowLayout.extend({
      Defaults: {
        containerClass: 'stack-layout',
        controlClass: 'stack-layout-item',
        endClass: 'break'
      },

      isNative: function () {
        return true;
      }
    });
  }
);
/**
 * TabPanel.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Creates a tab panel control.
 *
 * @-x-less TabPanel.less
 * @class tinymce.ui.TabPanel
 * @extends tinymce.ui.Panel
 *
 * @setting {Number} activeTab Active tab index.
 */
define(
  'tinymce.core.ui.TabPanel',
  [
    "tinymce.core.ui.Panel",
    "tinymce.core.dom.DomQuery",
    "tinymce.core.ui.DomUtils"
  ],
  function (Panel, $, DomUtils) {
    "use strict";

    return Panel.extend({
      Defaults: {
        layout: 'absolute',
        defaults: {
          type: 'panel'
        }
      },

      /**
       * Activates the specified tab by index.
       *
       * @method activateTab
       * @param {Number} idx Index of the tab to activate.
       */
      activateTab: function (idx) {
        var activeTabElm;

        if (this.activeTabId) {
          activeTabElm = this.getEl(this.activeTabId);
          $(activeTabElm).removeClass(this.classPrefix + 'active');
          activeTabElm.setAttribute('aria-selected', "false");
        }

        this.activeTabId = 't' + idx;

        activeTabElm = this.getEl('t' + idx);
        activeTabElm.setAttribute('aria-selected', "true");
        $(activeTabElm).addClass(this.classPrefix + 'active');

        this.items()[idx].show().fire('showtab');
        this.reflow();

        this.items().each(function (item, i) {
          if (idx != i) {
            item.hide();
          }
        });
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, layout = self._layout, tabsHtml = '', prefix = self.classPrefix;

        self.preRender();
        layout.preRender(self);

        self.items().each(function (ctrl, i) {
          var id = self._id + '-t' + i;

          ctrl.aria('role', 'tabpanel');
          ctrl.aria('labelledby', id);

          tabsHtml += (
            '<div id="' + id + '" class="' + prefix + 'tab" ' +
            'unselectable="on" role="tab" aria-controls="' + ctrl._id + '" aria-selected="false" tabIndex="-1">' +
            self.encode(ctrl.settings.title) +
            '</div>'
          );
        });

        return (
          '<div id="' + self._id + '" class="' + self.classes + '" hidefocus="1" tabindex="-1">' +
          '<div id="' + self._id + '-head" class="' + prefix + 'tabs" role="tablist">' +
          tabsHtml +
          '</div>' +
          '<div id="' + self._id + '-body" class="' + self.bodyClasses + '">' +
          layout.renderHtml(self) +
          '</div>' +
          '</div>'
        );
      },

      /**
       * Called after the control has been rendered.
       *
       * @method postRender
       */
      postRender: function () {
        var sC
°ğ?€:€? ÿC8ü:7 ÿÃ8ĞÂ; ÿ8àğ?Ğ> ÿƒ8ü? ÿ1 ÿ  l Sh   |   ›       z23         tÄDÌ@        Ğ0	#       @@€À/DŒ           ½13         tÄDÌ@        Ğ0	#       @@€À/DŒ           ½13         tÄDÌ@        Ğ0	#       @@@À/DŒ           ½13         tÄDÌ@        Ğ 0#       0¿í'ÿÿÿPÁí'!Ce‡               €Äí'                        ÀÈí'                  Ìí'                        0Ğí'      îí}ŞíŞîĞî}îİîNçî}ŞäNî@îtîDîäNç~Dîî€îtîˆîèçîxèîîxîîáçîqáîà~îp0 ÿ8`(üÃğ?`
ü7Cüƒ
Àğ?;A? ÿƒ8àğ?°ğğ?À.À < ÿC8ğC7 ÿƒ8 4 ÿÃ8Â8 ÿ8 4ü!C1 ÿ  l Sh   |   ›       èÈHÌ@        Ğ0	#       @@@À'DŒ           ½13         ôÄDÌ@        Ğ0	#       @@@À'DŒ           ½13         ôÄDÌ@        Ğ0	#       @@€À/DŒ           ½13         tÄDÌ@        Ğ0	#       @@€À/DŒ       @¯í'ÿÿÿ`±í'!Ce‡               ´í'                        Ğ¸í'                   ¼í'                        @Àí'      îævnænî`îvîfîşçîvnïşîğîîÿîïşç~ÿî®î îîªîê®ç
~ªî¾î°îz
î»îë¾çî{¾ë»îà~î€0 ÿC8pB)ü ğ?pü8ƒü	Ã
	Ğğ? < ? ÿÃ8ğğ?À ğ?Ğ/Ğ@< ÿƒ8 ğ?ğ0ğ? "  9 ÿC80C5ü"ƒ1 ÿ  ¸ Sƒ   ”   ®       z2""         ¸ˆˆˆ@        à   
"       €€€À+DŒ           ®"3         tÄDÌ@        Ğ0	#       @@€À/DŒ           ½13         tÄDÌ@        Ğ0	#       @@@À/DŒ           ½13         tÄDÌ@        Ğ 0#       0Ÿë'ÿÿÿP¡ë'ÿÿÿ!Ce‡p¡ë'ÿÿÿ   @ ë'ÿÿÿ`¢ë'ÿÿÿ@ ë'ÿÿÿ€¢ë'ÿÿÿ      P¡ë'ÿÿÿp£ë'ÿÿÿP¡ë'ÿÿÿ£ë'ÿÿÿ      `¢ë'ÿÿÿ€¤ë'`¢ë'ÿÿÿ      p£ë'ÿÿÿp£ë'ÿÿÿ                  À¨ë'                  ¬ë'                        0°ë'      ä~ àw°î¾ëç{¾ë¾î°î{î»înçî{¾ænî`îvîfîæîævnâ.î îvî"îâ.ç~"î®  ğ?ü? ÿƒ2 ÿCüƒ
Àğ?;A? ÿƒ8àğ?°ğğ?À.À < ÿC8ğC7 ÿƒ8 4 ÿÃ8Â8 ÿ8 4ü!C1 ÿ  t Sk             èÈHÌ@        Ğ0	#       @@@À'DŒ           ½13         ôÄDÌ@        Ğ0	#       @@@À'DŒ           ½13         ôÄDÌ@        Ğ0	#       @@€À/DŒ           ½13         tÄDÌ@        Ğ0	#       @@€€/Hˆ       @ë'ÿÿÿ`‘ë'!Ce‡               ”ë'                        Ğ˜ë'                   œë'                        @ ë'ÿÿÿ` ë'ÿÿÿ      îïşïşîğîîÿîÎçîşìÎîÀî|îÌîìÎç~Ìî^îPî|îUîå^ç~UîNî@îuîDîäNçîtNäDîpN  €0 ÿC8pB)ü ğ?pü8ƒü	Ã
	Ğğ? < ? ÿÃ8ğğ?À ğ?Ğ/Ğ@< ÿƒ8 ğ?ğ0ğ? "  9 ÿC80C5ü"ğ?t Sj   ~             0#       @@@À'DŒ           13         ôÄHÌ@        Ğ0#       @@@À'DŒ           13         ôÄHÌ@        Ğ0#       @@@À'DŒ           ½13         ôÄDÌ@        Ğ0	#       @@@À'DŒ           ½13     Pë'ÿÿÿpë'!Ce‡Pë'ÿÿÿ                „ë'                        àˆë'                  Œë'                        Pë'      äNàäNçîtNäDîà~îOîïşçîşïÿîğîçîÿîçîşáîîçîîŞçîqíİîĞîçîİŞíŞçà~İî 0 ÿƒ8€‚*üC°ğ?€ü9Ãü

àğ?°=°Á? ÿ8 ğ?Ğğ?à0à€< ÿÃ80ğ? @ğ?#@9 ÿƒ8@ƒ6ü#Ã1 ÿ  Ü S   Ÿ   ·       €€€ÀDŒ           13         tÄDÌ@         0#       @@@À.HŒ           ©13         ¤Ä„Ì@        0
#       @@@À*DŒ           ™13         ôÄˆˆ@        Ğ  "       €€€€+Hˆ           ®"""         ¸ˆHÌ@    `oë'ÿÿÿ€që'!Ce‡               °të'!Ce‡Ğtë'      !Ce‡àuë'      !Ce‡°të'      !Ce‡Àuë' xë'      !Ce‡Ğvë'      !Ce‡àwë'      !Ce‡       |ë'ÿÿÿ@|ë'ÿÿÿ      0}ë'ÿÿÿP}ë'ÿÿÿ       |ë'ÿÿÿ@~ë'ÿÿÿ |ë'ÿÿÿ`~ë'ÿÿÿ      0}ë'ÿÿÿPë'ÿÿÿ0}ë'ÿÿÿpë'ÿÿÿ      @~ë'ÿÿÿ`€ë'@~ë'ÿÿÿ      îãs>ã>î0îsî3îã>îçã~~çîçîîçÎìîçÎìÀîÌîÌîpÎîpÎìà~àç 0 ÿÃ8Â+üƒÀğ?> ÿƒ8Àğ?°-ğğ?À>ü-Ãü>"üC0ğ? > ÿC8ü? ÿğ?€ğ?x Sn                    0#       @@@À'DŒ           13         ôÄHÌ@t vertically in the middle
        var doc = document;
        if (!self.settings.multiline && doc.all && (!doc.documentMode || doc.documentMode <= 8)) {
          style.lineHeight = (rect.h - borderH) + 'px';
        }

        borderBox = self.borderBox;
        borderW = borderBox.left + borderBox.right + 8;
        borderH = borderBox.top + borderBox.bottom + (self.settings.multiline ? 8 : 0);

        if (rect.x !== lastRepaintRect.x) {
          style.left = rect.x + 'px';
          lastRepaintRect.x = rect.x;
        }

        if (rect.y !== lastRepaintRect.y) {
          style.top = rect.y + 'px';
          lastRepaintRect.y = rect.y;
        }

        if (rect.w !== lastRepaintRect.w) {
          style.width = (rect.w - borderW) + 'px';
          lastRepaintRect.w = rect.w;
        }

        if (rect.h !== lastRepaintRect.h) {
          style.height = (rect.h - borderH) + 'px';
          lastRepaintRect.h = rect.h;
        }

        self._lastRepaintRect = lastRepaintRect;
        self.fire('repaint', {}, false);

        return self;
      },

      /**
       * Renders the control as a HTML string.
       *
       * @method renderHtml
       * @return {String} HTML representing the control.
       */
      renderHtml: function () {
        var self = this, settings = self.settings, attrs, elm;

        attrs = {
          id: self._id,
          hidefocus: '1'
        };

        Tools.each([
          'rows', 'spellcheck', 'maxLength', 'size', 'readonly', 'min',
          'max', 'step', 'list', 'pattern', 'placeholder', 'required', 'multiple'
        ], function (name) {
          attrs[name] = settings[name];
        });

        if (self.disabled()) {
          attrs.disabled = 'disabled';
        }

        if (settings.subtype) {
          attrs.type = settings.subtype;
        }

        elm = DomUtils.create(settings.multiline ? 'textarea' : 'input', attrs);
        elm.value = self.state.get('value');
        elm.className = self.classes;

        return elm.outerHTML;
      },

      value: function (value) {
        if (arguments.length) {
          this.state.set('value', value);
          return this;
        }

        // Make sure the real state is in sync
        if (this.state.get('rendered')) {
          this.state.set('value', this.getEl().value);
        }

        return this.state.get('value');
      },

      /**
       * Called after the control has been rendered.
       *
       * @method postRender
       */
      postRender: function () {
        var self = this;

        self.getEl().value = self.state.get('value');
        self._super();

        self.$el.on('change', function (e) {
          self.state.set('value', e.target.value);
          self.fire('change', e);
        });
      },

      bindStates: function () {
        var self = this;

        self.state.on('change:value', function (e) {
          if (self.getEl().value != e.value) {
            self.getEl().value = e.value;
          }
        });

        self.state.on('change:disabled', function (e) {
          self.getEl().disabled = e.value;
        });

        return self._super();
      },

      remove: function () {
        this.$el.off();
        this._super();
      }
    });
  }
);

/**
 * Api.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.ui.Api',
  [
    'tinymce.core.ui.Selector',
    'tinymce.core.ui.Collection',
    'tinymce.core.ui.ReflowQueue',
    'tinymce.core.ui.Control',
    'tinymce.core.ui.Factory',
    'tinymce.core.ui.KeyboardNavigation',
    'tinymce.core.ui.Container',
    'tinymce.core.ui.DragHelper',
    'tinymce.core.ui.Scrollable',
    'tinymce.core.ui.Panel',
    'tinymce.core.ui.Movable',
    'tinymce.core.ui.Resizable',
    'tinymce.core.ui.FloatPanel',
    'tinymce.core.ui.Window',
    'tinymce.core.ui.MessageBox',
    'tinymce.core.ui.Tooltip',
    'tinymce.core.ui.Widget',
    'tinymce.core.ui.Progress',
    'tinymce.core.ui.Notification',
    'tinymce.core.ui.Layout',
    'tinymce.core.ui.AbsoluteLayout',
    'tinymce.core.ui.Button',
    'tinymce.core.ui.ButtonGroup',
    'tinymce.core.ui.Checkbox',
    'tinymce.core.ui.ComboBox',
    'tinymce.core.ui.ColorBox',
    'tinymce.core.ui.PanelButton',
    'tinymce.core.ui.ColorButton',
    'tinymce.core.ui.ColorPicker',
    'tinymce.core.ui.Path',
    'tinymce.core.ui.ElementPath',
    'tinymce.core.ui.FormItem',
    'tinymce.core.ui.Form',
    'tinymce.core.ui.FieldSet',
    'tinymce.core.ui.FilePicker',
    'tinymce.core.ui.FitLayout',
    'tinymce.core.ui.FlexLayout',
    'tinymce.core.ui.FlowLayout',
    'tinymce.core.ui.FormatControls',
    'tinymce.core.ui.GridLayout',
    'tinymce.core.ui.Iframe',
    'tinymce.core.ui.InfoBox',
    'tinymce.core.ui.Label',
    'tinymce.core.ui.Toolbar',
    'tinymce.core.ui.MenuBar',
    'tinymce.core.ui.MenuButton',
    'tinymce.core.ui.MenuItem',
    'tinymce.core.ui.Throbber',
    'tinymce.core.ui.Menu',
    'tinymce.core.ui.ListBox',
    'tinymce.core.ui.Radio',
    'tinymce.core.ui.ResizeHandle',
    'tinymce.core.ui.SelectBox',
    'tinymce.core.ui.Slider',
    'tinymce.core.ui.Spacer',
    'tinymce.core.ui.SplitButton',
    'tinymce.core.ui.StackLayout',
    'tinymce.core.ui.TabPanel',
    'tinymce.core.ui.TextBox'
  ],
  function (
    Selector, Collection, ReflowQueue, Control, Factory, KeyboardNavigation, Container, DragHelper, Scrollable, Panel, Movable,
    Resizable, FloatPanel, Window, MessageBox, Tooltip, Widget, Progress, Notification, Layout, AbsoluteLayout, Button,
    ButtonGroup, Checkbox, ComboBox, ColorBox, PanelButton, ColorButton, ColorPicker, Path, ElementPath, FormItem, Form,
    FieldSet, FilePicker, FitLayout, FlexLayout, FlowLayout, FormatControls, GridLayout, Iframe, InfoBox, Label, Toolbar,
    MenuBar, MenuButton, MenuItem, Throbber, Menu, ListBox, Radio, ResizeHandle, SelectBox, Slider, Spacer, SplitButton,
    StackLayout, TabPanel, TextBox
  ) {
    "use strict";

    var registerToFactory = function (id, ref) {
      Factory.add(id.split('.').pop(), ref);
    };

    var expose = function (target, id, ref) {
      var i, fragments;

      fragments = id.split(/[.\/]/);
      for (i = 0; i < fragments.length - 1; ++i) {
        if (target[fragments[i]] === undefined) {
          target[fragments[i]] = {};
        }

        target = target[fragments[i]];
      }

      target[fragments[fragments.length - 1]] = ref;

      registerToFactory(id, ref);
    };

    var appendTo = function (target) {
      expose(target, 'ui.Selector', Selector);
      expose(target, 'ui.Collection', Collection);
      expose(target, 'ui.ReflowQueue', ReflowQueue);
      expose(target, 'ui.Control', Control);
      expose(target, 'ui.Factory', Factory);
      expose(target, 'ui.KeyboardNavigation', KeyboardNavigation);
      expose(target, 'ui.Container', Container);
      expose(target, 'ui.DragHelper', DragHelper);
      expose(target, 'ui.Scrollable', Scrollable);
      expose(target, 'ui.Panel', Panel);
      expose(target, 'ui.Movable', Movable);
      expose(target, 'ui.Resizable', Resizable);
      expose(target, 'ui.FloatPanel', FloatPanel);
      expose(target, 'ui.Window', Window);
      expose(target, 'ui.MessageBox', MessageBox);
      expose(target, 'ui.Tooltip', Tooltip);
      expose(target, 'ui.Widget', Widget);
      expose(target, 'ui.Progress', Progress);
      expose(target, 'ui.Notification', Notification);
      expose(target, 'ui.Layout', Layout);
      expose(target, 'ui.AbsoluteLayout', AbsoluteLayout);
      expose(target, 'ui.Button', Button);
      expose(target, 'ui.ButtonGroup', ButtonGroup);
      expose(target, 'ui.Checkbox', Checkbox);
      expose(target, 'ui.ComboBox', ComboBox);
      expose(target, 'ui.ColorBox', ColorBox);
      expose(target, 'ui.PanelButton', PanelButton);
      expose(target, 'ui.ColorButton', ColorButton);
      expose(target, 'ui.ColorPicker', ColorPicker);
      expose(target, 'ui.Path', Path);
      expose(target, 'ui.ElementPath', ElementPath);
      expose(target, 'ui.FormItem', FormItem);
      expose(target, 'ui.Form', Form);
      expose(target, 'ui.FieldSet', FieldSet);
      expose(target, 'ui.FilePicker', FilePicker);
      expose(target, 'ui.FitLayout', FitLayout);
      expose(target, 'ui.FlexLayout', FlexLayout);
      expose(target, 'ui.FlowLayout', FlowLayout);
      expose(target, 'ui.FormatControls', FormatControls);
      expose(target, 'ui.GridLayout', GridLayout);
      expose(target, 'ui.Iframe', Iframe);
      expose(target, 'ui.InfoBox', InfoBox);
      expose(target, 'ui.Label', Label);
      expose(target, 'ui.Toolbar', Toolbar);
      expose(target, 'ui.MenuBar', MenuBar);
      expose(target, 'ui.MenuButton', MenuButton);
      expose(target, 'ui.MenuItem', MenuItem);
      expose(target, 'ui.Throbber', Throbber);
      expose(target, 'ui.Menu', Menu);
      expose(target, 'ui.ListBox', ListBox);
      expose(target, 'ui.Radio', Radio);
      expose(target, 'ui.ResizeHandle', ResizeHandle);
      expose(target, 'ui.SelectBox', SelectBox);
      expose(target, 'ui.Slider', Slider);
      expose(target, 'ui.Spacer', Spacer);
      expose(target, 'ui.SplitButton', SplitButton);
      expose(target, 'ui.StackLayout', StackLayout);
      expose(target, 'ui.TabPanel', TabPanel);
      expose(target, 'ui.TextBox', TextBox);
      expose(target, 'ui.Api', Api);
    };

    var Api = {
      appendTo: appendTo
    };

    return Api;
  }
);
/**
 * Tinymce.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.api.Tinymce',
  [
    'tinymce.core.geom.Rect',
    'tinymce.core.util.Promise',
    'tinymce.core.util.Delay',
    'tinymce.core.Env',
    'tinymce.core.dom.EventUtils',
    'tinymce.core.dom.Sizzle',
    'tinymce.core.util.Tools',
    'tinymce.core.dom.DomQuery',
    'tinymce.core.html.Styles',
    'tinymce.core.dom.TreeWalker',
    'tinymce.core.html.Entities',
    'tinymce.core.dom.DOMUtils',
    'tinymce.core.dom.ScriptLoader',
    'tinymce.core.AddOnManager',
    'tinymce.core.dom.RangeUtils',
    'tinymce.core.html.Node',
    'tinymce.core.html.Schema',
    'tinymce.core.html.SaxParser',
    'tinymce.core.html.DomParser',
    'tinymce.core.html.Writer',
    'tinymce.core.html.Serializer',
    'tinymce.core.dom.Serializer',
    'tinymce.core.util.VK',
    'tinymce.core.dom.ControlSelection',
    'tinymce.core.dom.BookmarkManager',
    'tinymce.core.dom.Selection',
    'tinymce.core.Formatter',
    'tinymce.core.UndoManager',
    'tinymce.core.EditorCommands',
    'tinymce.core.util.URI',
    'tinymce.core.util.Class',
    'tinymce.core.util.EventDispatcher',
    'tinymce.core.util.Observable',
    'tinymce.core.WindowManager',
    'tinymce.core.NotificationManager',
    'tinymce.core.EditorObservable',
    'tinymce.core.Shortcuts',
    'tinymce.core.Editor',
    'tinymce.core.util.I18n',
    'tinymce.core.FocusManager',
    'tinymce.core.EditorManager',
    'tinymce.core.util.XHR',
    'tinymce.core.util.JSON',
    'tinymce.core.util.JSONRequest',
    'tinymce.core.util.JSONP',
    'tinymce.core.util.LocalStorage',
    'tinymce.core.api.Compat',
    'tinymce.core.util.Color',
    'tinymce.core.ui.Api'
  ],
  function (
    Rect, Promise, Delay, Env, EventUtils, Sizzle, Tools, DomQuery, Styles, TreeWalker, Entities, DOMUtils, ScriptLoader, AddOnManager,
    RangeUtils, Node, Schema, SaxParser, DomParser, Writer, HtmlSerializer, DomSerializer, VK, ControlSelection, BookmarkManager, Selection,
    Formatter, UndoManager, EditorCommands, URI, Class, EventDispatcher, Observable, WindowManager,
    NotificationManager, EditorObservable, Shortcuts, Editor, I18n, FocusManager, EditorManager,
    XHR, JSON, JSONRequest, JSONP, LocalStorage, Compat, Color, Api
  ) {
    var tinymce = EditorManager;

    var expose = function (target, id, ref) {
      var i, fragments;

      fragments = id.split(/[.\/]/);
      for (i = 0; i < fragments.length - 1; ++i) {
        if (target[fragments[i]] === undefined) {
          target[fragments[i]] = {};
        }

        target = target[fragments[i]];
      }

      target[fragments[fragments.length - 1]] = ref;
    };

    expose(tinymce, 'geom.Rect', Rect);
    expose(tinymce, 'util.Promise', Promise);
    expose(tinymce, 'util.Delay', Delay);
    expose(tinymce, 'Env', Env);
    expose(tinymce, 'dom.EventUtils', EventUtils);
    expose(tinymce, 'dom.Sizzle', Sizzle);
    expose(tinymce, 'util.Tools', Tools);
    expose(tinymce, 'dom.DomQuery', DomQuery);
    expose(tinymce, 'html.Styles', Styles);
    expose(tinymce, 'dom.TreeWalker', TreeWalker);
    expose(tinymce, 'html.Entities', Entities);
    expose(tinymce, 'dom.DOMUtils', DOMUtils);
    expose(tinymce, 'dom.ScriptLoader', ScriptLoader);
    expose(tinymce, 'AddOnManager', AddOnManager);
    expose(tinymce, 'dom.RangeUtils', RangeUtils);
    expose(tinymce, 'html.Node', Node);
    expose(tinymce, 'html.Schema', Schema);
    expose(tinymce, 'html.SaxParser', SaxParser);
    expose(tinymce, 'html.DomParser', DomParser);
    expose(tinymce, 'html.Writer', Writer);
    expose(tinymce, 'html.Serializer', HtmlSerializer);
    expose(tinymce, 'dom.Serializer', DomSerializer);
    expose(tinymce, 'util.VK', VK);
    expose(tinymce, 'dom.ControlSelection', ControlSelection);
    expose(tinymce, 'dom.BookmarkManager', BookmarkManager);
    expose(tinymce, 'dom.Selection', Selection);
    expose(tinymce, 'Formatter', Formatter);
    expose(tinymce, 'UndoManager', UndoManager);
    expose(tinymce, 'EditorCommands', EditorCommands);
    expose(tinymce, 'util.URI', URI);
    expose(tinymce, 'util.Class', Class);
    expose(tinymce, 'util.EventDispatcher', EventDispatcher);
    expose(tinymce, 'util.Observable', Observable);
    expose(tinymce, 'WindowManager', WindowManager);
    expose(tinymce, 'NotificationManager', NotificationManager);
    expose(tinymce, 'EditorObservable', EditorObservable);
    expose(tinymce, 'Shortcuts', Shortcuts);
    expose(tinymce, 'Editor', Editor);
    expose(tinymce, 'util.I18n', I18n);
    expose(tinymce, 'FocusManager', FocusManager);
    expose(tinymce, 'EditorManager', EditorManager);
    expose(tinymce, 'util.XHR', XHR);
    expose(tinymce, 'util.JSON', JSON);
    expose(tinymce, 'util.JSONRequest', JSONRequest);
    expose(tinymce, 'util.JSONP', JSONP);
    expose(tinymce, 'util.LocalStorage', LocalStorage);
    expose(tinymce, 'Compat', Compat);
    expose(tinymce, 'util.Color', Color);

    Api.appendTo(tinymce);

    Compat.register(tinymce);

    return tinymce;
  }
);

/**
 * Register.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * This registers tinymce in common module loaders.
 *
 * @private
 * @class tinymce.Register
 */
define(
  'tinymce.core.Register',
  [
  ],
  function () {
    /*eslint consistent-this: 0 */
    var context = this || window;

    var exposeToModuleLoaders = function (tinymce) {
      if (typeof context.define === "function") {
        // Bolt
        if (!context.define.amd) {
          context.define("ephox/tinymce", [], function () {
            return tinymce;
          });

          context.define("tinymce.core.EditorManager", [], function () {
            return tinymce;
          });
        }
      }

      if (typeof module === 'object') {
        /* global module */
        module.exports = tinymce;
      }
    };

    return {
      exposeToModuleLoaders: exposeToModuleLoaders
    };
  }
);

/**
 * Main.js
 *
 * Released under LGPL License.
 * Copyright (c) 1999-2017 Ephox Corp. All rights reserved
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

define(
  'tinymce.core.api.Main',
  [
    'tinymce.core.api.Tinymce',
    'tinymce.core.Register'
  ],
  function (tinymce, Register) {
    return function () {
      window.tinymce = tinymce;
      window.tinyMCE = tinymce;
      Register.exposeToModuleLoaders(tinymce);
      return tinymce;
    };
  }
);

dem('tinymce.core.api.Main')();
})();
