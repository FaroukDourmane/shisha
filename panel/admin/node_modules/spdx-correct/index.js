›utÇ£7D>Ï©ïÓ®÷Ÿ·MşÃîôï9¿ÕKïF¿>£öÇ·ÒQ×ìØÿÏ¿ûó\qOSıÏßŞ³yOõşëŞZ{-v“ëç0x÷uõ¨ÿËsVw?7Oğ·¼>½Œ8Õì»Hwÿ_ÿ÷Óx»çïïU¾şÕÿ*áï w¹ûŸß”MÿŒW‡÷«ì+ÏÊßıÌï±g÷nÿÜíä¿mÏ÷/ûÇvŞQo¼®ß–äû×ßYú#ı5â×ÿîiòúÿëåá½wïw¯ÿQŞ?‡ÒnñŞß}ûº½<mgßûÿ;9ÿìßG{îqòë·ÉÒgæ–ø~Ë?wÛ:û~ıßÔøşÛ¾ñ¾»ùƒÿ¾¿ïs·/Ú|ß¬àÿ0NÿÍî÷ïãàôıU¿?üïğ®²Ã[ü¯ÿÒ¾ÖwÏÿú~j_3]s{Çş„ã¿ï›ß{?ñ8F›´îïçŸ·ËÒY[úó÷_sËé^¿_ö¹?ƒş×ud/c\WÜıo÷ãtÿşäëÿëòöîùçWÿŒ~ık5_§ûÇ|3ì|G}­ÿıö>öó¿êÒúÿŸµ¿ç¿÷˜yw°û]ÚÖùæËÿÖ·á™Ï=Êëã¯öÍÇö?=gók—±~£KŸŸ»²wêd«¿¹o~21b5ÇÿyïWÔùV?óüëw÷ÿt/ûÓ[êjë÷~ß3ü-¦¯—8ı¿íwÃòçÎûbO:~¾Ôıäìóã¾oôõİ›Odøöö÷uN½½­w²½~¿mhÿŸ®ûÏye·“Ìkµz¹w'íà¾FÏ¯¯õÖïÕÒ¿ìcWèúúíöÿéwÉÿ©ğ7|.ş~å&l*ïûî÷›/c‡ûŞs¿ënsëû¾Ÿ+¦åÿß/ŸOd<–?Ç63+¸ûşş»Ê_÷vş]…õ·RUÿ¾Ó˜~O·î¯ßK¿üèü}¿İùß¸ï}²Q/›ïî=õ¿Z~zÿİ¥ÿo,âïsb'uÇıÿ¾ı§÷¶—ıŸúÛûTäoşÍÿŸ÷ç5ëşå§³¸Ycäz9c?÷ÙûÅØµ37~ù¶Áª×êŞ¼gìò_œgï´ïß¤ïŸ§ßq«İñŸ@z–›&ûËö×¬ß?³qE?~—áâİØİ÷•n(Ñİõï¿ç7;Ùz^İÙw}Ëÿÿ~è¼ÿ~-\û·õ»u»ùoîŞ~GŸí™|¾Ûß·oÿü§âŞ{µÿw/ı7mîÿ½ÛúñöÒ·ñş?¿§û„ÿóî¿¹íù/}ıù_¼üİüó[ù™<Ÿõzÿ,Ó¦Ñ ½ú·iŸ“ï{<7¥ËE·|ñçm§¯o¿{ØO³Ì¿R¯ëß¿õé_sŸë:lÛıìîÛËİê=íş~}?Ï¸ü¿ƒÜşşå¯—~]]ŸÏÙ÷ë÷¯<ÿ|å§ïï÷Î¯÷Æ~ëü«}Ü{Ÿ­;i\‡õWĞûÎ¨áfV<¾¼ìw×­Yİ{ÿş}§Û®?_ZåÇûŸ‹lŸµîî¬¿•¿»1½ÏúæÇuíòÿ¹»ü’i]Ï—ÿµSß<¿í÷¿ÛÇé›º=S3–5Üïã~õjÔ}·õçNû{óòüÇLëÕÿ|»üÜé¹¿(i˜ü-æ»¶Sİ½Ûé.ş½SïC½•¿YƒqüË¯?şËä4Ï_ûúşëí^«}³óş_¶#¾ÃÊËûwl±ÿRFìø+KİÍ·&¶ß…O¯{·Q§İw¿N±øÍŸùt·WÓôwUvÿ¨==¯÷–Û=ïû¾‘÷üÍ¿ù¿ÿ¨>¼¿ÌîŞoîó¿ï¿sË|Ş‡gå_÷õ›ÿq¿ÿ÷|•~r¯Íôëævÿÿí9æ»ØÛ¯¿Şw³ÿgşö·ó“?ı®í~gnï_}{Îïìû>kø=ş;åõ¹Û-šÛÿ§öI™	-nùr¿ıÜIµjvEü³ÿá“wóNíVì¯CûøXtç¾úeÿ¿ğ/K9¹-oõ÷Ïæ4¿ö÷¯­ï±·ÿı†}-/vsüÜšÛ«å¬õ<üë—öª¾RÏlÎ|ò¯×¾ş7.{ïÕ¥í¿ÔòÛööÛô·ê8t¹7™_ÆÏÿâ«ı¶Müë«KıeØKïwSÿ{}"îıû‹l¾½ÅÙu5ÿêÍó¶ïÕÛãç-çÙ‚ê«pûúı8Ş¿õã»üüºÿæÎë»RŸc~şÚ5ß·oûÓTÇóª³>Ëj;Ï»P‡NrmÜaï½zšºmòÜğëİÓÏ?øúG_ù²ßı½¥ş}A4ãıä'ú¿³ÎdmÖ[mõ~¿,šç»Õ^–óxu(?·öîş	|>•ökÙoñæÙiïÊv·ÿ_·ÿá?[U¼¸_yä½†Ë¤ÏÕÕİÏëÛçu¿¿¿W
.«×İã;ú~ÖıòfŞTËßãk¿ooßº›“ØÇ—½÷²7Î¯këşëù^ÿıÛ²áû‘öïy—ıí¹ØåÏì~ıä]=>¿·ı¾İóñûNÓ7=<Ne‡UİQşIûûrQşÓs»Òşüß+fÿkü=şùÃï\7^ÿglşO¿ö¿õGrwîóç5G™^×Íaşw®?³¼İ¾Oû©Î=¿3Ï_yG½ùöÍÍ­äwèûÓÿa°ÇıŞíïÿ…vß³ıÿŞÿï;şıŞıâ¿®ìÿm¾__¹¿ou›9Ü}Z=wúœìUK~ùîû›¯Ûù]·Ü{Oıt+©eüŸßoİÿÏïl±¿oé¾ïó¸ûô§íÿ½İ“wĞù•y—¾ôÁçw¾\æ÷íÛ¿½Õ¼Ï÷îÏï6mû_ØËş'Û}yËçGn×vò?ı”9ûØß6ş©{V_\÷ìÍıÖĞ{ÿØı3ãfõ˜ÿÿÑ7òWâıÊä¯Ï~OÿİÓ?û÷êò/ãùwºŸOùsİ¯ï&ûßv_cÓ5½û¯Şÿ·$Fèúæ‡*ô¾=şÍ¹>ï³WıÓ{¾;úËxÖß|–«Nñõİµí>ÓÛMùŸ®ÿ†Ræ/½êÓÿüïÍ¿ŞË“¼÷İÜy›×¯û6‹ä#Û¿ûçæ=½/÷÷Ên¾ÿ_}¾/¸Ş~eÒÓÿòZÔÚì:ÿcsÉAÎİŸÃï‡{z÷=)~'´Şg}?—ŒNíóKXøçôGÄ^ı¨ß³Â7ŸŸ¯Ôİ¿›õ>Û÷ë{îtÿ¥~Ğ¸ş@]ü<Ş‹üÉvı–ş÷¯o’ëW~şçí¿¿÷ëŸ·¿?şñvÊK¿¯ıåluCu¬ÿ÷ç­µÒ,ÿÕ–X½Ò½c¾‡Òúæİ´ıì÷W¨nÕßõæ{å¼}D\ø¿_ú¿ÒÿÏë»?\{ßœ÷wyŸZÿo§ÚÛ½eF­ÿëé‡ß¿ÿG×hñ~g<ÿ[÷ì®§Ûóü;ÿ”’ct_ÿm÷úp§ïÛîÿÖÛ9ñş¶4ù…¼âí«›îığŒ°ïßü»¿l7~Û^ï¾–şf§²û÷\yûÛÿuÏıÿß½ı=îŸîßû¶ÿçîóğ’ñí¿QÖŞö¿ß÷îûgoõì·ûÌïÛŞ{Ó¹ŸíÙßàø“ïË”¿wUv;û~ïu|ıûú±ın¡¿şıª~l²ºµOz«ï÷ÿnÚ»ïŸt^İCúzºån¸ÔI«/¶vgš›;ïòÿ“¯Spı[k›Ï×_Ûï3×ß¸§´ì‹ßİ.ëE¿>Ü›ÿÉëk|íâ¾Ï^ıë—ÿõÃ¾ğwòGÿ^ßüXoéÿy-{o÷	Ÿº³©óıUíí·_ÕvÅFÍ¿³y[õ'—{|§ï½ßæ>¢ÙKîºÕoÃkô»©µçõ9wõÚÃ}y÷WÓİ<ûş—«õ®¾{Ñş÷‡Q•êœ£+ù9GôÖÿL{÷õş¯ÿ_/!êësS¸Ö÷Ç…3Çôÿú7rz_òßïóëıK–ıãf¾ÿhìºk×z/¹qû·Ÿ°ñoó÷ò¿ôñÏœğ½¾¿°ÓÿœôĞ?øO«ş¡ï]¦ù¾}nz[»ësïøcø¿xÿú_ùû~«º÷£¸[Ç;—üş×~¿qÿ¥m~êÿ¿ûÛ:o£¿[Í¿®¼{|«ıÕŸuÍî{]ÌÒdı¹bUş¾¾şW?Û:Û™6Ù\‹­|ı—ÃõÕ§»ï­ê/;¿æËüõ÷ŒZªïÇÆ~_;û.ıÿ¯¼÷ÿN¶ÿšÿ¶Whöÿ÷Msœ¯·g6†_¼¾¨­ùéŸ¶ßlŸU_;•sí¡Ûq_eFón¦Ø÷w>T½÷_±­¿¬?½Ñî×m+s—}t‹÷/ëûvkgcQKNµş¾˜–WOuy¯­|ƒÍß~´Õ÷oæÿw7wwâ}Å÷iü8óùîŞr©~i=û~ıº¿ÿ_ÿ{—¸_¾õÏrÔ¾—ı×ß¯ÿø”¾vÕ}µû­¸Í×ïŸü*¯-ÿÑ¿gµŸõ¿û^Ù½·O_»qİÿß›¯ì}uïjÓÑªoüõ§ã;Ôûrß	/¶ºªİ)'õ¦g¯Îüÿ¼j}¾­Öû¿ê{ïÒıûÏ3ÿéşÿéŞëÓywgëî½ãkíõÿã»½ı¯¿ÅõÃõÒ÷z-Úå÷KÇ>³KæÏ÷ÊKßø¿ô¸¿q»äŞ·oûÜËïç“ıæ¯¿îlÊî6¿œ{üìw½g®t£¯=í¾v›w÷¸–ì£-¼Öõ¥o÷¯ÿîùÍ}×şÿ?ı„×,sFîÏíù³ŞõãÓ·ïßí¾×!|J¨zçØÿ«ÏŸïçºpñÎ_öÿ
ïtVv>ôïz—Siò¿ü<ÌùÓEús{~oÿtGóı’Ì»Gõ§ã¯ˆ›wÔô7?ó¦Ï›ì¦ãîûÿå ?ÕÿË~ÛmR[q0×©—[}û™ÿûZoğÿö{ÆŞ½?³^á}×ÿw3wÿûùõÑÖ}^[uÅôë×kÖÿ»Ğÿ×<¿vWŸË›yòÕÙ-Í¿øßå_âœT~"_ûÒ>ï›ÔëvØV#ÿÏ2ÒÚşçî'2:âö>ÿ/×ïV÷~FÇû+ø®UÿoöîrŞWÉóß÷óËöéæ5‘¦¾ÔM5ÿ½ÿ÷öS}gş§õ‡¾î­—{wß7ïÄŞT×œ¿,}íã8öİ¯%4+~ø–¾ä¼ÿkö¢÷·şŸêÿòı^Úî¬k~ÙûºşÈn—
ïÎX«—y¶”®«?gzşö÷å’âü<&+n¸n\ùxÅæû¼ôÅ9¯>7ê’Ès}İ~õwy©ékk	z°Ï•÷w×z}Ì›ŞÚk·×¿ë}ë•R|îçöµ÷¯'_oMÇ+ãínô9ròŞ_í¹×Ïú·ıÇëq½ÙÍôÏfµë¶º—¥Ó÷óµÿ_½vÏŸoò­· ³êü‡Îww³²Ùÿ=Ñz—yÎ÷ÿ¬£9Òû³^ºë?Ût–}ó¾lèİó/µå?÷°H+ÛïûğæŞü—İëçİ?)ïú½ü+æ—Xÿ3£˜CÚ·4Ó½÷ß_ıWßÏı»]Ø|Oõİz»åbøóß÷•Ïš¿ÿ»ÿ¤åıoÛ.îöOÖ{]ß.ß®×›şşt,Ïïg|kç­EÛ¿ïí˜Élace(/ (\d)/, '-$1')
        .replace(/ ?International/, '') +
      '-4.0'
  }
]

var licensesWithVersions = spdxLicenseIds
  .map(function (id) {
    var match = /^(.*)-\d+\.\d+$/.exec(id)
    return match
      ? [match[0], match[1]]
      : [id, null]
  })
  .reduce(function (objectMap, item) {
    var key = item[1]
    objectMap[key] = objectMap[key] || []
    objectMap[key].push(item[0])
    return objectMap
  }, {})

var licensesWithOneVersion = Object.keys(licensesWithVersions)
  .map(function makeEntries (key) {
    return [key, licensesWithVersions[key]]
  })
  .filter(function identifySoleVersions (item) {
    return (
      // Licenses has just one valid version suffix.
      item[1].length === 1 &&
      item[0] !== null &&
      // APL will be considered Apache, rather than APL-1.0
      item[0] !== 'APL'
    )
  })
  .map(function createLastResorts (item) {
    return [item[0], item[1][0]]
  })

licensesWithVersions = undefined

// If all else fails, guess that strings containing certain substrings
// meant to identify certain licenses.
var lastResorts = [
  ['UNLI', 'Unlicense'],
  ['WTF', 'WTFPL'],
  ['2 CLAUSE', 'BSD-2-Clause'],
  ['2-CLAUSE', 'BSD-2-Clause'],
  ['3 CLAUSE', 'BSD-3-Clause'],
  ['3-CLAUSE', 'BSD-3-Clause'],
  ['AFFERO', 'AGPL-3.0-or-later'],
  ['AGPL', 'AGPL-3.0-or-later'],
  ['APACHE', 'Apache-2.0'],
  ['ARTISTIC', 'Artistic-2.0'],
  ['Affero', 'AGPL-3.0-or-later'],
  ['BEER', 'Beerware'],
  ['BOOST', 'BSL-1.0'],
  ['BSD', 'BSD-2-Clause'],
  ['CDDL', 'CDDL-1.1'],
  ['ECLIPSE', 'EPL-1.0'],
  ['FUCK', 'WTFPL'],
  ['GNU', 'GPL-3.0-or-later'],
  ['LGPL', 'LGPL-3.0-or-later'],
  ['GPLV1', 'GPL-1.0-only'],
  ['GPL-1', 'GPL-1.0-only'],
  ['GPLV2', 'GPL-2.0-only'],
  ['GPL-2', 'GPL-2.0-only'],
  ['GPL', 'GPL-3.0-or-later'],
  ['MIT +NO-FALSE-ATTRIBS', 'MITNFA'],
  ['MIT', 'MIT'],
  ['MPL', 'MPL-2.0'],
  ['X11', 'X11'],
  ['ZLIB', 'Zlib']
].concat(licensesWithOneVersion)

var SUBSTRING = 0
var IDENTIFIER = 1

var validTransformation = function (identifier) {
  for (var i = 0; i < transforms.length; i++) {
    var transformed = transforms[i](identifier).trim()
    if (transformed !== identifier && valid(transformed)) {
      return transformed
    }
  }
  return null
}

var validLastResort = function (identifier) {
  var upperCased = identifier.toUpperCase()
  for (var i = 0; i < lastResorts.length; i++) {
    var lastResort = lastResorts[i]
    if (upperCased.indexOf(lastResort[SUBSTRING]) > -1) {
      return lastResort[IDENTIFIER]
    }
  }
  return null
}

var anyCorrection = function (identifier, check) {
  for (var i = 0; i < transpositions.length; i++) {
    var transposition = transpositions[i]
    var transposed = transposition[TRANSPOSED]
    if (identifier.indexOf(transposed) > -1) {
      var corrected = identifier.replace(
        transposed,
        transposition[CORRECT]
      )
      var checked = check(corrected)
      if (checked !== null) {
        return checked
      }
    }
  }
  return null
}

module.exports = function (identifier, options) {
  options = options || {}
  var upgrade = options.upgrade === undefined ? true : !!options.upgrade
  function postprocess (value) {
    return upgrade ? upgradeGPLs(value) : value
  }
  var validArugment = (
    typeof identifier === 'string' &&
    identifier.trim().length !== 0
  )
  if (!validArugment) {
    throw Error('Invalid argument. Expected non-empty string.')
  }
  identifier = identifier.trim()
  if (valid(identifier)) {
    return postprocess(identifier)
  }
  var noPlus = identifier.replace(/\+$/, '').trim()
  if (valid(noPlus)) {
    return postprocess(noPlus)
  }
  var transformed = validTransformation(identifier)
  if (transformed !== null) {
    return postprocess(transformed)
  }
  transformed = anyCorrection(identifier, function (argument) {
    if (valid(argument)) {
      return argument
    }
    return validTransformation(argument)
  })
  if (transformed !== null) {
    return postprocess(transformed)
  }
  transformed = validLastResort(identifier)
  if (transformed !== null) {
    return postprocess(transformedkío3å¿næéG3¬ÃşÕ\÷yö´”û¿Ø—ûæİV¿tßÃêæ³û˜¾ûîš—ûÓù~ïüııüv.ŞW´w÷ınÄ¾º¥)mgMæ½>¶¥ÿ¥T4^Ş«g_©ı†ß™Ûß÷û+¥üVÕıÔ9Î÷îWÿÌİD—ÿú^Æ­ùÿjN»7÷¾€E‘­,ê›ÉÒ¼@‚V&‘¶rPPB(H†°|2=
I’ÃĞŠ€ƒ„ [9@@So0(E ®‚¶™›¦0É+§Xê…€ ?*Š8¬z
Z(lÒ‚áC `JLC °ØA– Y1Nì‹Hˆ
³H€ !F#‘Â¾`Rƒ€!$ Á°ÈÊK€I£(a"B€V²‰#¥#-@ZGŞ 5 b1LB!D…GdÕ€AfV²¶VA•ÃMA-Q‡e„!ÅÅ€B…·¦(HVŒÁ5ÂN±Xc”(Œ¡ pšòsşí.cieáösóÕ˜;{ÿË[»“~Ë6çãï:_vÕş´ÿ>Ïÿy»ÊÎ>ÇôÚø»"ßşÿoÂıÀWWŸ½;ùÚ.o×Şç-ÿÙ×ÖoçÎù·çüµqß7>ÿ“/ó}}Ïµûõsÿ«÷…ÿ~yü¸GïïnÙ_æôÿÌıûÿß¿~Ÿ%C f’PMÇ#t˜#ĞM›<c‚	  dB€,d!Á8. b”Lu AT2]raÀq‘2@0ÇàCÀT`„Æ´&Y@7áƒ\*Nˆ  dÊ`Ä`Ğ€@ 0#VÂ­‡-±aâålÁÙ e<# I·ïÎ×õïÏ«ö~ûë¿üÿø6'.¿Ç}ú­½ÜhàøÆøÿ|nÅú